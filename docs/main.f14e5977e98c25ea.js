"use strict";var SQ=Object.defineProperty,AQ=Object.defineProperties,MQ=Object.getOwnPropertyDescriptors,M3=Object.getOwnPropertySymbols,xQ=Object.prototype.hasOwnProperty,kQ=Object.prototype.propertyIsEnumerable,x3=(it,Ce,P)=>Ce in it?SQ(it,Ce,{enumerable:!0,configurable:!0,writable:!0,value:P}):it[Ce]=P,ut=(it,Ce)=>{for(var P in Ce||(Ce={}))xQ.call(Ce,P)&&x3(it,P,Ce[P]);if(M3)for(var P of M3(Ce))kQ.call(Ce,P)&&x3(it,P,Ce[P]);return it},Ei=(it,Ce)=>AQ(it,MQ(Ce));(self.webpackChunkfoodTrackingApp=self.webpackChunkfoodTrackingApp||[]).push([[179],{7905:(it,Ce,P)=>{P.d(Ce,{hO:()=>We,xv:()=>ge,Dh:()=>ue,GT:()=>we,cc:()=>xe,on:()=>z,pX:()=>he});var c=P(3668),j=P(7892),O=P(7233);it=P.hmd(it);const oe=["ngOnDestroy"],he=(se,De,Be,je={})=>new Proxy(se,{get:(ct,Fe)=>Be.runOutsideAngular(()=>{var Ze;if(se[Fe])return(null===(Ze=null==je?void 0:je.spy)||void 0===Ze?void 0:Ze.get)&&je.spy.get(Fe,se[Fe]),se[Fe];if(oe.indexOf(Fe)>-1)return()=>{};const Je=De.toPromise().then(Ie=>{const K=Ie&&Ie[Fe];return"function"==typeof K?K.bind(Ie):K&&K.then?K.then(ne=>Be.run(()=>ne)):Be.run(()=>K)});return new Proxy(()=>{},{get:(Ie,K)=>Je[K],apply:(Ie,K,ne)=>Je.then(fe=>{var ye;const Ne=fe&&fe(...ne);return(null===(ye=null==je?void 0:je.spy)||void 0===ye?void 0:ye.apply)&&je.spy.apply(Fe,ne,Ne),Ne})})})}),we=(se,De)=>{De.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(je=>{Object.defineProperty(se.prototype,je,Object.getOwnPropertyDescriptor(Be.prototype||Be,je))})})};class ie{constructor(De){return De}}const ue=new c.OlP("angularfire2.app.options"),ge=new c.OlP("angularfire2.app.name");function z(se,De,Be){const ct="object"==typeof Be&&Be||{};ct.name=ct.name||"string"==typeof Be&&Be||"[DEFAULT]";const Ze=j.Z.apps.filter(Je=>Je&&Je.name===ct.name)[0]||De.runOutsideAngular(()=>j.Z.initializeApp(se,ct));try{JSON.stringify(se)!==JSON.stringify(Ze.options)&&q("error",`${Ze.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Je){}return new ie(Ze)}const q=(se,...De)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[se](...De)},ae={provide:ie,useFactory:z,deps:[ue,c.R0b,[new c.FiY,ge]]};let We=(()=>{class se{constructor(Be){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",c.q4F.full,Be.toString())}static initializeApp(Be,je){return{ngModule:se,providers:[{provide:ue,useValue:Be},{provide:ge,useValue:je}]}}}return se.\u0275fac=function(Be){return new(Be||se)(c.LFG(c.Lbi))},se.\u0275mod=c.oAB({type:se}),se.\u0275inj=c.cJS({providers:[ae]}),se})();function xe(se,De,Be,je,ct){const[,Fe,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===se)||[];if(Fe)return function(se,De){try{return se.toString()===De.toString()}catch(Be){return se===De}}(ct,Ze)||(Ue("error",`${De} was already initialized on the ${Be} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:ct,was:Ze})),Fe;{const Je=je();return globalThis.\u0275AngularfireInstanceCache.push([se,Je,ct]),Je}}const ze=!!it.hot,Ue=(se,...De)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[se](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(it,Ce,P)=>{P.d(Ce,{q4:()=>Vh,iC:()=>Xa,HU:()=>Xl,vb:()=>Ki,JM:()=>jh,u3:()=>od});var c=P(3668),j=P(7713),O=P(8239),oe=P(1572),he=P(4213),we=P(1177),ie=P(3855),ue=P(5600);const ge="@firebase/installations",z="0.5.9",ae=`w:${z}`,We="FIS_v2",De=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(T){return T instanceof he.ZR&&T.code.includes("request-failed")}function je({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function ct(T){return{token:T.token,requestStatus:2,expiresIn:fe(T.expiresIn),creationTime:Date.now()}}function Fe(T,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(T,S){const U=(yield S.json()).error;return De.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Je({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ie(T,{refreshToken:S}){const k=Je(T);return k.append("Authorization",function(T){return`${We} ${T}`}(S)),k}function K(T){return ne.apply(this,arguments)}function ne(){return(ne=(0,O.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function fe(T){return Number(T.replace("s","000"))}function Ne(T,S){return ce.apply(this,arguments)}function ce(){return(ce=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:k}){const U=je(T),G=Je(T),le=S.getImmediate({optional:!0});if(le){const Ot=yield le.getHeartbeatsHeader();Ot&&G.append("x-firebase-client",Ot)}const tt={method:"POST",headers:G,body:JSON.stringify({fid:k,authVersion:We,appId:T.appId,sdkVersion:ae})},Tt=yield K(()=>fetch(U,tt));if(Tt.ok){const Ot=yield Tt.json();return{fid:Ot.fid||k,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:ct(Ot.authToken)}}throw yield Fe("Create Installation",Tt)})).apply(this,arguments)}function wt(T){return new Promise(S=>{setTimeout(S,T)})}const er=/^[cdef][\w-]{21}$/;function Kt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return er.test(k)?k:""}catch(T){return""}}function dn(T){return`${T.appName}!${T.appId}`}const br=new Map;function Yr(T,S){const k=dn(T);Bn(k,S),function(T,S){const k=(!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=T=>{Bn(T.data.key,T.data.fid)}),_n);k&&k.postMessage({key:T,fid:S}),0===br.size&&_n&&(_n.close(),_n=null)}(k,S)}function Bn(T,S){const k=br.get(T);if(k)for(const U of k)U(S)}let _n=null;const Oe="firebase-installations-store";let ar=null;function wr(){return ar||(ar=(0,ue.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Oe)}})),ar}function vt(T,S){return en.apply(this,arguments)}function en(){return(en=(0,O.Z)(function*(T,S){const k=dn(T),G=(yield wr()).transaction(Oe,"readwrite"),le=G.objectStore(Oe),Le=yield le.get(k);return yield le.put(S,k),yield G.done,(!Le||Le.fid!==S.fid)&&Yr(T,S.fid),S})).apply(this,arguments)}function Fn(T){return lr.apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*(T){const S=dn(T),U=(yield wr()).transaction(Oe,"readwrite");yield U.objectStore(Oe).delete(S),yield U.done})).apply(this,arguments)}function ur(T,S){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(T,S){const k=dn(T),G=(yield wr()).transaction(Oe,"readwrite"),le=G.objectStore(Oe),Le=yield le.get(k),tt=S(Le);return void 0===tt?yield le.delete(k):yield le.put(tt,k),yield G.done,tt&&(!Le||Le.fid!==tt.fid)&&Yr(T,tt.fid),tt})).apply(this,arguments)}function $n(T){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(T){let S;const k=yield ur(T.appConfig,U=>{const G=mo(U),le=hn(T,G);return S=le.registrationPromise,le.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function mo(T){return St(T||{fid:Kt(),registrationStatus:0})}function hn(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(De.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function(T,S){return pt.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ss(T)}:{installationEntry:S}}function pt(){return(pt=(0,O.Z)(function*(T,S){try{const k=yield Ne(T,S);return vt(T.appConfig,k)}catch(k){throw Be(k)&&409===k.customData.serverCode?yield Fn(T.appConfig):yield vt(T.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function ss(T){return fi.apply(this,arguments)}function fi(){return(fi=(0,O.Z)(function*(T){let S=yield rn(T.appConfig);for(;1===S.registrationStatus;)yield wt(100),S=yield rn(T.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield $n(T);return U||k}return S})).apply(this,arguments)}function rn(T){return ur(T,S=>{if(!S)throw De.create("installation-not-found");return St(S)})}function St(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function tr(T,S){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},k){const U=H(T,k),G=Ie(T,k),le=S.getImmediate({optional:!0});if(le){const Ot=yield le.getHeartbeatsHeader();Ot&&G.append("x-firebase-client",Ot)}const tt={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:ae,appId:T.appId}})},Tt=yield K(()=>fetch(U,tt));if(Tt.ok)return ct(yield Tt.json());throw yield Fe("Generate Auth Token",Tt)})).apply(this,arguments)}function H(T,{fid:S}){return`${je(T)}/${S}/authTokens:generate`}function Q(T){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(T,S=!1){let k;const U=yield ur(T.appConfig,le=>{if(!Rt(le))throw De.create("not-registered");const Le=le.authToken;if(!S&&Mn(Le))return le;if(1===Le.requestStatus)return k=$(T,S),le;{if(!navigator.onLine)throw De.create("app-offline");const tt=Er(le);return k=rt(T,tt),tt}});return k?yield k:U.authToken})).apply(this,arguments)}function $(T,S){return re.apply(this,arguments)}function re(){return(re=(0,O.Z)(function*(T,S){let k=yield ke(T.appConfig);for(;1===k.authToken.requestStatus;)yield wt(100),k=yield ke(T.appConfig);const U=k.authToken;return 0===U.requestStatus?Q(T,S):U})).apply(this,arguments)}function ke(T){return ur(T,S=>{if(!Rt(S))throw De.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function rt(T,S){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(T,S){try{const k=yield tr(T,S),U=Object.assign(Object.assign({},S),{authToken:k});return yield vt(T.appConfig,U),k}catch(k){if(!Be(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield vt(T.appConfig,U)}else yield Fn(T.appConfig);throw k}})).apply(this,arguments)}function Rt(T){return void 0!==T&&2===T.registrationStatus}function Mn(T){return 2===T.requestStatus&&!function(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function Er(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function Y(){return(Y=(0,O.Z)(function*(T){const S=T,{installationEntry:k,registrationPromise:U}=yield $n(S);return U?U.catch(console.error):Q(S).catch(console.error),k.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(T,S=!1){const k=T;return yield Vt(k),(yield Q(k,S)).token})).apply(this,arguments)}function Vt(T){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(T){const{registrationPromise:S}=yield $n(T);S&&(yield S)})).apply(this,arguments)}function Gi(T){return De.create("missing-app-config-values",{valueName:T})}const mr="installations";(0,oe._registerComponent)(new we.wA(mr,T=>{const S=T.getProvider("app").getImmediate(),k=function(T){if(!T||!T.options)throw Gi("App Configuration");if(!T.name)throw Gi("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!T.options[k])throw Gi(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,oe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,oe._registerComponent)(new we.wA("installations-internal",T=>{const S=T.getProvider("app").getImmediate(),k=(0,oe._getProvider)(S,mr).getImmediate();return{getId:()=>function(T){return Y.apply(this,arguments)}(k),getToken:G=>function(T){return Ke.apply(this,arguments)}(k,G)}},"PRIVATE")),(0,oe.registerVersion)(ge,z),(0,oe.registerVersion)(ge,z,"esm2017");const Dt="@firebase/remote-config",wn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zc{constructor(S,k,U,G){this.client=S,this.storage=k,this.storageCache=U,this.logger=G}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,G=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${G}.`),G}fetch(S){var k=this;return(0,O.Z)(function*(){const[U,G]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(G&&k.isCachedDataFresh(S.cacheMaxAgeMillis,U))return G;S.eTag=G&&G.eTag;const le=yield k.client.fetch(S),Le=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Le.push(k.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Le),le})()}}function Q_(T=navigator){return T.languages&&T.languages[0]||T.language}class Di{constructor(S,k,U,G,le,Le){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=U,this.projectId=G,this.apiKey=le,this.appId=Le}fetch(S){var k=this;return(0,O.Z)(function*(){const[U,G]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Tt={sdk_version:k.sdkVersion,app_instance_id:U,app_instance_id_token:G,app_id:k.appId,language_code:Q_()},Ot={method:"POST",headers:tt,body:JSON.stringify(Tt)},sn=fetch(Le,Ot),Ft=new Promise((ps,zr)=>{S.signal.addEventListener(()=>{const da=new Error("The operation was aborted.");da.name="AbortError",zr(da)})});let _r;try{yield Promise.race([sn,Ft]),_r=yield sn}catch(ps){let zr="fetch-client-network";throw"AbortError"===ps.name&&(zr="fetch-timeout"),wn.create(zr,{originalErrorMessage:ps.message})}let mn=_r.status;const ca=_r.headers.get("ETag")||void 0;let _i,So;if(200===_r.status){let ps;try{ps=yield _r.json()}catch(zr){throw wn.create("fetch-client-parse",{originalErrorMessage:zr.message})}_i=ps.entries,So=ps.state}if("INSTANCE_STATE_UNSPECIFIED"===So?mn=500:"NO_CHANGE"===So?mn=304:("NO_TEMPLATE"===So||"EMPTY_CONFIG"===So)&&(_i={}),304!==mn&&200!==mn)throw wn.create("fetch-status",{httpStatus:mn});return{status:mn,eTag:ca,config:_i}})()}}class Sh{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,O.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:U}){var G=this;return(0,O.Z)(function*(){yield function(T,S){return new Promise((k,U)=>{const G=Math.max(S-Date.now(),0),le=setTimeout(k,G);T.addEventListener(()=>{clearTimeout(le),U(wn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const le=yield G.client.fetch(S);return yield G.storage.deleteThrottleMetadata(),le}catch(le){if(!function(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const Le={throttleEndTimeMillis:Date.now()+(0,he.$s)(U),backoffCount:U+1};return yield G.storage.setThrottleMetadata(Le),G.attemptFetch(S,Le)}})()}}class qc{constructor(S,k,U,G,le){this.app=S,this._client=k,this._storageCache=U,this._storage=G,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vu(T,S){const k=T.target.error||void 0;return wn.create(S,{originalErrorMessage:k&&k.message})}const qs="app_namespace_store";class Kc{constructor(S,k,U,G=function(){return new Promise((T,S)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=U=>{S(Vu(U,"storage-open"))},k.onsuccess=U=>{T(U.target.result)},k.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(qs,{keyPath:"compositeKey"})}}catch(k){S(wn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=S,this.appName=k,this.namespace=U,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,O.Z)(function*(){const U=yield k.openDbPromise;return new Promise((G,le)=>{const tt=U.transaction([qs],"readonly").objectStore(qs),Tt=k.createCompositeKey(S);try{const Ot=tt.get(Tt);Ot.onerror=sn=>{le(Vu(sn,"storage-get"))},Ot.onsuccess=sn=>{const Ft=sn.target.result;G(Ft?Ft.value:void 0)}}catch(Ot){le(wn.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(S,k){var U=this;return(0,O.Z)(function*(){const G=yield U.openDbPromise;return new Promise((le,Le)=>{const Tt=G.transaction([qs],"readwrite").objectStore(qs),Ot=U.createCompositeKey(S);try{const sn=Tt.put({compositeKey:Ot,value:k});sn.onerror=Ft=>{Le(Vu(Ft,"storage-set"))},sn.onsuccess=()=>{le()}}catch(sn){Le(wn.create("storage-set",{originalErrorMessage:sn&&sn.message}))}})})()}delete(S){var k=this;return(0,O.Z)(function*(){const U=yield k.openDbPromise;return new Promise((G,le)=>{const tt=U.transaction([qs],"readwrite").objectStore(qs),Tt=k.createCompositeKey(S);try{const Ot=tt.delete(Tt);Ot.onerror=sn=>{le(Vu(sn,"storage-delete"))},Ot.onsuccess=()=>{G()}}catch(Ot){le(wn.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class im{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const k=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),G=S.storage.getActiveConfig(),le=yield k;le&&(S.lastFetchStatus=le);const Le=yield U;Le&&(S.lastSuccessfulFetchTimestampMillis=Le);const tt=yield G;tt&&(S.activeConfig=tt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Uu(){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,oe._registerComponent)(new we.wA("remote-config",function(S,{instanceIdentifier:k}){const U=S.getProvider("app").getImmediate(),G=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw wn.create("registration-window");if(!(0,he.hl)())throw wn.create("indexed-db-unavailable");const{projectId:le,apiKey:Le,appId:tt}=U.options;if(!le)throw wn.create("registration-project-id");if(!Le)throw wn.create("registration-api-key");if(!tt)throw wn.create("registration-app-id");const Tt=new Kc(tt,U.name,k=k||"firebase"),Ot=new im(Tt),sn=new ie.Yd(Dt);sn.logLevel=ie.in.ERROR;const Ft=new Di(G,oe.SDK_VERSION,k,le,Le,tt),_r=new Sh(Ft,Tt),mn=new zc(_r,Tt,Ot,sn),ca=new qc(U,mn,Ot,Tt,sn);return function(T){const S=(0,he.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ca),ca},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Dt,"0.3.8"),(0,oe.registerVersion)(Dt,"0.3.8","esm2017");const sm="/firebase-messaging-sw.js",Qc="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$o="google.c.a.c_id",Il="google.c.a.c_l",Tl="google.c.a.ts",Hr="google.c.a.e";var vo=(()=>{return(T=vo||(vo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",vo;var T})();function Cr(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ju(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),G=new Uint8Array(U.length);for(let le=0;le<U.length;++le)G[le]=U.charCodeAt(le);return G}const bo="fcm_token_details_db",Sl="fcm_token_object_Store";function Mh(T){return zo.apply(this,arguments)}function zo(){return zo=(0,O.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(bo))return null;let S=null;return(yield(0,ue.X3)(bo,5,{upgrade:(U=(0,O.Z)(function*(G,le,Le,tt){var Tt;if(le<2||!G.objectStoreNames.contains(Sl))return;const Ot=tt.objectStore(Sl),sn=yield Ot.index("fcmSenderId").get(T);if(yield Ot.clear(),sn)if(2===le){const Ft=sn;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;S={token:Ft.fcmToken,createTime:null!==(Tt=Ft.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:Cr(Ft.vapidKey)}}}else if(3===le){const Ft=sn;S={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Cr(Ft.auth),p256dh:Cr(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Cr(Ft.vapidKey)}}}else if(4===le){const Ft=sn;S={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Cr(Ft.auth),p256dh:Cr(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Cr(Ft.vapidKey)}}}}),function(le,Le,tt,Tt){return U.apply(this,arguments)})})).close(),yield(0,ue.Lj)(bo),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),xh(S)?S:null;var U}),zo.apply(this,arguments)}function xh(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const tn="firebase-messaging-store";let $u=null;function Al(){return $u||($u=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(tn)}})),$u}function Ln(T){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,O.Z)(function*(T){const S=Wo(T),U=yield(yield Al()).transaction(tn).objectStore(tn).get(S);if(U)return U;{const G=yield Mh(T.appConfig.senderId);if(G)return yield Ks(T,G),G}})).apply(this,arguments)}function Ks(T,S){return ti.apply(this,arguments)}function ti(){return(ti=(0,O.Z)(function*(T,S){const k=Wo(T),G=(yield Al()).transaction(tn,"readwrite");return yield G.objectStore(tn).put(S,k),yield G.done,S})).apply(this,arguments)}function cr(T){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(T){const S=Wo(T),U=(yield Al()).transaction(tn,"readwrite");yield U.objectStore(tn).delete(S),yield U.done})).apply(this,arguments)}function Wo({appConfig:T}){return T.appId}const pn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xl(T,S){return ls.apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(T,S){const k=yield ni(T),U=Nl(S),G={method:"POST",headers:k,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(bt(T.appConfig),G)).json()}catch(Le){throw pn.create("token-subscribe-failed",{errorInfo:Le})}if(le.error)throw pn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw pn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function kl(T,S){return Or.apply(this,arguments)}function Or(){return(Or=(0,O.Z)(function*(T,S){const k=yield ni(T),U=Nl(S.subscriptionOptions),G={method:"PATCH",headers:k,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(`${bt(T.appConfig)}/${S.token}`,G)).json()}catch(Le){throw pn.create("token-update-failed",{errorInfo:Le})}if(le.error)throw pn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw pn.create("token-update-no-token");return le.token})).apply(this,arguments)}function Rl(T,S){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(T,S){const U={method:"DELETE",headers:yield ni(T)};try{const le=yield(yield fetch(`${bt(T.appConfig)}/${S}`,U)).json();if(le.error)throw pn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(G){throw pn.create("token-unsubscribe-failed",{errorInfo:G})}})).apply(this,arguments)}function bt({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function ni(T){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*({appConfig:T,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Nl({p256dh:T,auth:S,endpoint:k,vapidKey:U}){const G={web:{endpoint:k,auth:S,p256dh:T}};return U!==Zs&&(G.web.applicationPubKey=U),G}const Ol=6048e5;function Ko(T){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,O.Z)(function*(T){const S=yield us(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:Cr(S.getKey("auth")),p256dh:Cr(S.getKey("p256dh"))},U=yield Ln(T.firebaseDependencies);if(U){if(Ha(U.subscriptionOptions,k))return Date.now()>=U.createTime+Ol?Qt(T,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield Rl(T.firebaseDependencies,U.token)}catch(G){console.warn(G)}return Zn(T.firebaseDependencies,k)}return Zn(T.firebaseDependencies,k)})).apply(this,arguments)}function zu(T){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*(T){const S=yield Ln(T.firebaseDependencies);S&&(yield Rl(T.firebaseDependencies,S.token),yield cr(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Qt(T,S){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(T,S){try{const k=yield kl(T.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield Ks(T.firebaseDependencies,U),k}catch(k){throw yield zu(T),k}})).apply(this,arguments)}function Zn(T,S){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(T,S){const U={token:yield xl(T,S),createTime:Date.now(),subscriptionOptions:S};return yield Ks(T,U),U.token})).apply(this,arguments)}function us(T,S){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ju(S)})})).apply(this,arguments)}function Ha(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Qo(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,S){if(!S.notification)return;T.notification={};const k=S.notification.title;k&&(T.notification.title=k);const U=S.notification.body;U&&(T.notification.body=U);const G=S.notification.image;G&&(T.notification.image=G)}(S,T),function(T,S){!S.data||(T.data=S.data)}(S,T),function(T,S){if(!S.fcmOptions)return;T.fcmOptions={};const k=S.fcmOptions.link;k&&(T.fcmOptions.link=k);const U=S.fcmOptions.analytics_label;U&&(T.fcmOptions.analyticsLabel=U)}(S,T),S}function Xo(T){return"object"==typeof T&&!!T&&$o in T}function Ir(T,S){const k=[];for(let U=0;U<T.length;U++)k.push(T.charAt(U)),U<S.length&&k.push(S.charAt(U));return k.join("")}function Co(T){return pn.create("missing-app-config-values",{valueName:T})}Ir("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ir("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ea{constructor(S,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function(T){if(!T||!T.options)throw Co("App Configuration Object");if(!T.name)throw Co("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const U of S)if(!k[U])throw Co(U);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:G,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Si(T){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,O.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(sm,{scope:Qc}),T.swRegistration.update().catch(()=>{})}catch(S){throw pn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Ll(T,S){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Si(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw pn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function qu(T,S){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Zs)})).apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(T,S){if(!navigator)throw pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pn.create("permission-blocked");return yield qu(T,null==S?void 0:S.vapidKey),yield Ll(T,null==S?void 0:S.serviceWorkerRegistration),Ko(T)})).apply(this,arguments)}function Ga(T,S,k){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,O.Z)(function*(T,S,k){const U=Xc(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[$o],message_name:k[Il],message_time:k[Tl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xc(T){switch(T){case vo.NOTIFICATION_CLICKED:return"notification_open";case vo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ul(){return(Ul=(0,O.Z)(function*(T,S){const k=S.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===vo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Qo(k)):T.onMessageHandler.next(Qo(k)));const U=k.data;Xo(U)&&"1"===U[Hr]&&(yield Ga(T,k.messageType,U))})).apply(this,arguments)}const za="@firebase/messaging";function Yu(){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(){try{yield(0,he.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,oe._registerComponent)(new we.wA("messaging",T=>{const S=new ea(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function(T,S){return Ul.apply(this,arguments)}(S,k)),S},"PUBLIC")),(0,oe._registerComponent)(new we.wA("messaging-internal",T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:U=>function(T,S){return na.apply(this,arguments)}(S,U)}},"PRIVATE")),(0,oe.registerVersion)(za,"0.9.13"),(0,oe.registerVersion)(za,"0.9.13","esm2017");const ra="analytics",ia="firebase_id",kh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zl="https://www.googletagmanager.com/gtag/js",Kn=new ie.Yd("@firebase/analytics");function Io(T){return Promise.all(T.map(S=>S.catch(k=>k)))}function am(T,S){const k=document.createElement("script");k.src=`${zl}?l=${T}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Wa(T,S,k,U,G,le){return sa.apply(this,arguments)}function sa(){return(sa=(0,O.Z)(function*(T,S,k,U,G,le){const Le=U[G];try{if(Le)yield S[Le];else{const Tt=(yield Io(k)).find(Ot=>Ot.measurementId===G);Tt&&(yield S[Tt.appId])}}catch(tt){Kn.error(tt)}T("config",G,le)})).apply(this,arguments)}function Xu(T,S,k,U,G){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(T,S,k,U,G){try{let le=[];if(G&&G.send_to){let Le=G.send_to;Array.isArray(Le)||(Le=[Le]);const tt=yield Io(k);for(const Tt of Le){const Ot=tt.find(Ft=>Ft.measurementId===Tt),sn=Ot&&S[Ot.appId];if(!sn){le=[];break}le.push(sn)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),T("event",U,G||{})}catch(le){Kn.error(le)}})).apply(this,arguments)}function xn(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(zl))return S;return null}const Xe=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),oa=new class{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function um(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function qa(T){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,O.Z)(function*(T){var S;const{appId:k,apiKey:U}=T,G={method:"GET",headers:um(U)},le=kh.replace("{app-id}",k),Le=yield fetch(le,G);if(200!==Le.status&&304!==Le.status){let tt="";try{const Tt=yield Le.json();(null===(S=Tt.error)||void 0===S?void 0:S.message)&&(tt=Tt.error.message)}catch(Tt){}throw Xe.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:tt})}return Le.json()})).apply(this,arguments)}function ql(T){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,O.Z)(function*(T,S=oa,k){const{appId:U,apiKey:G,measurementId:le}=T.options;if(!U)throw Xe.create("no-app-id");if(!G){if(le)return{measurementId:le,appId:U};throw Xe.create("no-api-key")}const Le=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new To;return setTimeout((0,O.Z)(function*(){tt.abort()}),void 0!==k?k:6e4),hs({appId:U,apiKey:G,measurementId:le},Le,tt,S)})).apply(this,arguments)}function hs(T,S,k){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:k},U,G=oa){const{appId:le,measurementId:Le}=T;try{yield ec(U,S)}catch(tt){if(Le)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:le,measurementId:Le};throw tt}try{const tt=yield qa(T);return G.deleteThrottleMetadata(le),tt}catch(tt){if(!Nh(tt)){if(G.deleteThrottleMetadata(le),Le)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:le,measurementId:Le};throw tt}const Tt=503===Number(tt.customData.httpStatus)?(0,he.$s)(k,G.intervalMillis,30):(0,he.$s)(k,G.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+Tt,backoffCount:k+1};return G.setThrottleMetadata(le,Ot),Kn.debug(`Calling attemptFetch again in ${Tt} millis`),hs(T,Ot,U,G)}})).apply(this,arguments)}function ec(T,S){return new Promise((k,U)=>{const G=Math.max(S-Date.now(),0),le=setTimeout(k,G);T.addEventListener(()=>{clearTimeout(le),U(Xe.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Nh(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class To{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Zl(){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(){if(!(0,he.hl)())return Kn.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(T){return Kn.warn(Xe.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(T,S,k,U,G,le,Le){var tt;const Tt=ql(T);Tt.then(mn=>{k[mn.measurementId]=mn.appId,T.options.measurementId&&mn.measurementId!==T.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mn=>Kn.error(mn)),S.push(Tt);const Ot=Zl().then(mn=>{if(mn)return U.getId()}),[sn,Ft]=yield Promise.all([Tt,Ot]);xn()||am(le,sn.measurementId),G("js",new Date);const _r=null!==(tt=null==Le?void 0:Le.config)&&void 0!==tt?tt:{};return _r.origin="firebase",_r.update=!0,null!=Ft&&(_r[ia]=Ft),G("config",sn.measurementId,_r),sn.measurementId})).apply(this,arguments)}class Oh{constructor(S){this.app=S}_delete(){return delete ri[this.app.options.appId],Promise.resolve()}}let ri={},Kl=[];const la={};let Za,Fr,eo="dataLayer",xs=!1;function rr(T,S,k){!function(){const T=[];if((0,he.ru)()&&T.push("This is a browser extension environment."),(0,he.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((U,G)=>`(${G+1}) ${U}`).join(" "),k=Xe.create("invalid-analytics-context",{errorInfo:S});Kn.warn(k.message)}}();const U=T.options.appId;if(!U)throw Xe.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Xe.create("no-api-key");Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ri[U])throw Xe.create("already-exists",{id:U});if(!xs){!function(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(eo);const{wrappedGtag:le,gtagCore:Le}=function(T,S,k,U,G){let le=function(...Le){window[U].push(arguments)};return window[G]&&"function"==typeof window[G]&&(le=window[G]),window[G]=function(T,S,k,U){function le(){return(le=(0,O.Z)(function*(Le,tt,Tt){try{"event"===Le?yield Xu(T,S,k,tt,Tt):"config"===Le?yield Wa(T,S,k,U,tt,Tt):T("set",tt)}catch(Ot){Kn.error(Ot)}})).apply(this,arguments)}return function(Le,tt,Tt){return le.apply(this,arguments)}}(le,T,S,k),{gtagCore:le,wrappedGtag:window[G]}}(ri,Kl,la,eo,"gtag");Fr=le,Za=Le,xs=!0}return ri[U]=function(T,S,k,U,G,le,Le){return Xs.apply(this,arguments)}(T,Kl,la,S,Za,eo,k),new Oh(T)}function Ka(){return(Ka=(0,O.Z)(function*(T,S,k,U,G){if(G&&G.global)T("event",k,U);else{const le=yield S;T("event",k,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function Vn(){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}const sd="@firebase/analytics";(0,oe._registerComponent)(new we.wA(ra,(S,{options:k})=>rr(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,oe._registerComponent)(new we.wA("analytics-internal",function(S){try{const k=S.getProvider(ra).getImmediate();return{logEvent:(U,G,le)=>function(T,S,k,U){T=(0,he.m9)(T),function(T,S,k,U,G){return Ka.apply(this,arguments)}(Fr,ri[T.app.options.appId],S,k,U).catch(G=>Kn.error(G))}(k,U,G,le)}}catch(k){throw Xe.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,oe.registerVersion)(sd,"0.7.9"),(0,oe.registerVersion)(sd,"0.7.9","esm2017");var Qn=P(2869),Ql=P(8843);const Lh=new class extends Ql.v{}(class extends Qn.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,k,U):S.flush(this)}});var fs=P(2210),Ya=P(8305),Qa=P(7384),io=P(5222),Jl=P(4763);const Vh=new c.GfV("7.3.0"),nc="__angularfire_symbol__analyticsIsSupportedValue",Ja="__angularfire_symbol__analyticsIsSupported",rc="__angularfire_symbol__remoteConfigIsSupportedValue",jt="__angularfire_symbol__remoteConfigIsSupported",$r="__angularfire_symbol__messagingIsSupportedValue",Mi="__angularfire_symbol__messagingIsSupported";function jh(T,S,k){if(S){if(1===S.length)return S[0];const le=S.filter(Le=>Le.app===k);if(1===le.length)return le[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[Ja]||(globalThis[Ja]=Vn().then(T=>globalThis[nc]=T).catch(()=>globalThis[nc]=!1)),globalThis[Mi]||(globalThis[Mi]=Yu().then(T=>globalThis[$r]=T).catch(()=>globalThis[$r]=!1)),globalThis[jt]||(globalThis[jt]=Uu().then(T=>globalThis[rc]=T).catch(()=>globalThis[rc]=!1));const Ki=(T,S)=>{const k=S?[S]:(0,j.C6)(),U=[];return k.forEach(G=>{G.container.getProvider(T).instances.forEach(Le=>{U.includes(Le)||U.push(Le)})}),U};function Do(){}class ic{constructor(S,k=Lh){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,U){const G=this.zone;return this.delegate.schedule(function(Le){G.runGuarded(()=>{S.apply(this,[Le])})},k,U)}}class sc{constructor(S){this.zone=S,this.task=null}call(S,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Do,{},Do,Do)),k.pipe((0,Qa.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xl=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new ic(Zone.current)),this.insideAngular=k.run(()=>new ic(Zone.current,fs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(c.LFG(c.R0b))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Nn(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Yi(T){return Nn().ngZone.runOutsideAngular(()=>T())}function Qi(T){return Nn().ngZone.run(()=>T())}function Xa(T){return Nn(),function(T){return function(k){return(k=k.lift(new sc(T.ngZone))).pipe((0,io.R)(T.outsideAngular),(0,Jl.Q)(T.insideAngular))}}(Nn())(T)}const ru=(T,S)=>{const k=void 0;return function(){const U=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Qi(()=>T.apply(k,U))}},od=(T,S)=>function(){let k;const U=arguments;for(let le=0;le<arguments.length;le++)"function"==typeof U[le]&&(S&&(k||(k=Qi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Do,{},Do,Do)))),U[le]=ru(U[le],k));const G=Yi(()=>T.apply(this,U));if(!S){if(G instanceof Ya.y){const le=Nn();return G.pipe((0,io.R)(le.outsideAngular),(0,Jl.Q)(le.insideAngular))}return Qi(()=>G)}return G instanceof Ya.y?G.pipe(Xa):G instanceof Promise?Qi(()=>new Promise((le,Le)=>G.then(tt=>Qi(()=>le(tt)),tt=>Qi(()=>Le(tt))))):"function"==typeof G&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),G.apply(this,arguments)}:Qi(()=>G)}},3533:(it,Ce,P)=>{P.d(Ce,{$:()=>Wu,A:()=>Kt,B:()=>br,G:()=>mi,H:()=>Ba,J:()=>Cr,L:()=>os,M:()=>Ks,N:()=>Wo,P:()=>S,Q:()=>qo,R:()=>ic,T:()=>pn,U:()=>wo,V:()=>Or,W:()=>Rl,X:()=>Nl,Y:()=>Fl,Z:()=>Xo,_:()=>cs,a:()=>to,a0:()=>Vl,a1:()=>Ga,a2:()=>Xc,a3:()=>Ul,a4:()=>Zu,a5:()=>Ku,a6:()=>Yu,a7:()=>Un,a8:()=>jn,a9:()=>Hl,aA:()=>Ao,aB:()=>tl,aC:()=>hm,aD:()=>fa,aE:()=>qn,aI:()=>Wi,aL:()=>ls,aa:()=>X_,ab:()=>ra,ac:()=>Ju,af:()=>Kn,ag:()=>am,ah:()=>lm,ak:()=>Re,al:()=>Bt,an:()=>Nh,ao:()=>Oh,ap:()=>ei,aq:()=>wr,ar:()=>yo,as:()=>Lu,at:()=>_n,au:()=>bm,av:()=>su,aw:()=>yn,ax:()=>Oe,ay:()=>en,az:()=>zi,b:()=>Fr,c:()=>sn,d:()=>ca,e:()=>_r,f:()=>ny,g:()=>pa,h:()=>Wh,i:()=>Fh,j:()=>ry,k:()=>wm,l:()=>Qi,m:()=>Em,n:()=>ms,o:()=>zt,r:()=>tu,s:()=>Nn,u:()=>od});var c=P(8239),j=P(4213),O=P(1572);function ie(b,p){var _={};for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&p.indexOf(w)<0&&(_[w]=b[w]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var M=0;for(w=Object.getOwnPropertySymbols(b);M<w.length;M++)p.indexOf(w[M])<0&&Object.prototype.propertyIsEnumerable.call(b,w[M])&&(_[w[M]]=b[w[M]])}return _}var Ne=P(3855),ce=P(1177);const zt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Kt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const br=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Yr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nn=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bn=new Ne.Yd("@firebase/auth");function Qr(b,...p){Bn.logLevel<=Ne.in.ERROR&&Bn.error(`Auth (${O.SDK_VERSION}): ${b}`,...p)}function _n(b,...p){throw Xr(b,...p)}function yn(b,...p){return Xr(b,...p)}function zs(b,p,_){const w=Object.assign(Object.assign({},Yr()),{[p]:_});return new j.LL("auth","Firebase",w).create(p,{appName:b.name})}function Jr(b,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&_n(b,"argument-error"),zs(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xr(b,...p){if("string"!=typeof b){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=b.name),b._errorFactory.create(_,...w)}return nn.create(b,...p)}function Oe(b,p,..._){if(!b)throw Xr(p,..._)}function ar(b){const p="INTERNAL ASSERTION FAILED: "+b;throw Qr(p),new Error(p)}function wr(b,p){b||ar(p)}const vt=new Map;function en(b){wr(b instanceof Function,"Expected a class definition");let p=vt.get(b);return p?(wr(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,vt.set(b,p),p)}function ur(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Ss(){return"http:"===$n()||"https:"===$n()}function $n(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class hn{constructor(p,_){this.shortDelay=p,this.longDelay=_,wr(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ss()||(0,j.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function at(b,p){wr(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class pt{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ss={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fi=new hn(3e4,6e4);function rn(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function St(b,p,_,w){return pr.apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(b,p,_,w,M={}){return tr(b,M,(0,c.Z)(function*(){let N={},X={};w&&("GET"===p?X=w:N={body:JSON.stringify(w)});const ve=(0,j.xO)(Object.assign({key:b.config.apiKey},X)).slice(1),Ye=yield b._getAdditionalHeaders();return Ye["Content-Type"]="application/json",b.languageCode&&(Ye["X-Firebase-Locale"]=b.languageCode),pt.fetch()(Ee(b,b.config.apiHost,_,ve),Object.assign({method:p,headers:Ye,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function tr(b,p,_){return W.apply(this,arguments)}function W(){return(W=(0,c.Z)(function*(b,p,_){b._canInitEmulator=!1;const w=Object.assign(Object.assign({},ss),p);try{const M=new $(b),N=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const X=yield N.json();if("needConfirmation"in X)throw re(b,"account-exists-with-different-credential",X);if(N.ok&&!("errorMessage"in X))return X;{const ve=N.ok?X.errorMessage:X.error.message,[Ye,Ve]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw re(b,"credential-already-in-use",X);if("EMAIL_EXISTS"===Ye)throw re(b,"email-already-in-use",X);const _t=w[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw zs(b,_t,Ve);_n(b,_t)}}catch(M){if(M instanceof j.ZR)throw M;_n(b,"network-request-failed")}})).apply(this,arguments)}function H(b,p,_,w){return Q.apply(this,arguments)}function Q(){return(Q=(0,c.Z)(function*(b,p,_,w,M={}){const N=yield St(b,p,_,w,M);return"mfaPendingCredential"in N&&_n(b,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ee(b,p,_,w){const M=`${p}${_}?${w}`;return b.config.emulator?at(b.config,M):`${b.config.apiScheme}://${M}`}class ${constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(yn(this.auth,"network-request-failed")),fi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function re(b,p,_){const w={appName:b.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=yn(b,p,w);return M.customData._tokenResponse=_,M}function rt(){return(rt=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Mt(b,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Mn(b,p){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Er(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Y(){return(Y=(0,c.Z)(function*(b,p=!1){const _=(0,j.m9)(b),w=yield _.getIdToken(p),M=Ke(w);Oe(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const N="object"==typeof M.firebase?M.firebase:void 0,X=null==N?void 0:N.sign_in_provider;return{claims:M,token:w,authTime:Er(Se(M.auth_time)),issuedAtTime:Er(Se(M.iat)),expirationTime:Er(Se(M.exp)),signInProvider:X||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Se(b){return 1e3*Number(b)}function Ke(b){const[p,_,w]=b.split(".");if(void 0===p||void 0===_||void 0===w)return Qr("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,j.tV)(_);return M?JSON.parse(M):(Qr("Failed to decode base64 JWT payload"),null)}catch(M){return Qr("Caught error parsing JWT payload as JSON",M),null}}function gt(b,p){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,c.Z)(function*(b,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof j.ZR&&fn(w)&&b.auth.currentUser===b&&(yield b.auth.signOut()),w}})).apply(this,arguments)}function fn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class bn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class zn{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Er(this.lastLoginAt),this.creationTime=Er(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Me(b){return It.apply(this,arguments)}function It(){return(It=(0,c.Z)(function*(b){var p;const _=b.auth,w=yield b.getIdToken(),M=yield gt(b,Mn(_,{idToken:w}));Oe(null==M?void 0:M.users.length,_,"internal-error");const N=M.users[0];b._notifyReloadListener(N);const X=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?mr(N.providerUserInfo):[],ve=Gi(b.providerData,X),_t=!!b.isAnonymous&&!(b.email&&N.passwordHash||(null==ve?void 0:ve.length)),xt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ve,metadata:new zn(N.createdAt,N.lastLoginAt),isAnonymous:_t};Object.assign(b,xt)})).apply(this,arguments)}function jr(){return(jr=(0,c.Z)(function*(b){const p=(0,j.m9)(b);yield Me(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Gi(b,p){return[...b.filter(w=>!p.some(M=>M.providerId===w.providerId)),...p]}function mr(b){return b.map(p=>{var{providerId:_}=p,w=ie(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Wn(){return(Wn=(0,c.Z)(function*(b,p){const _=yield tr(b,{},(0,c.Z)(function*(){const w=(0,j.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:N}=b.config,X=Ee(b,M,"/v1/token",`key=${N}`),ve=yield b._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",pt.fetch()(X,{method:"POST",headers:ve,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class $i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Oe(p.idToken,"internal-error"),Oe(void 0!==p.idToken,"internal-error"),Oe(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(b){const p=Ke(b);return Oe(p,"internal-error"),Oe(void 0!==p.exp,"internal-error"),Oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,c.Z)(function*(){return Oe(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,c.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:X}=yield function(b,p){return Wn.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(M,N,Number(X))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:M,expirationTime:N}=_,X=new $i;return w&&(Oe("string"==typeof w,"internal-error",{appName:p}),X.refreshToken=w),M&&(Oe("string"==typeof M,"internal-error",{appName:p}),X.accessToken=M),N&&(Oe("number"==typeof N,"internal-error",{appName:p}),X.expirationTime=N),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new $i,this.toJSON())}_performRefresh(){return ar("not implemented")}}function pi(b,p){Oe("string"==typeof b||void 0===b,"internal-error",{appName:p})}class Dt{constructor(p){var{uid:_,auth:w,stsTokenManager:M}=p,N=ie(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new zn(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,c.Z)(function*(){const w=yield gt(_,_.stsTokenManager.getToken(_.auth,p));return Oe(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function(b){return Y.apply(this,arguments)}(this,p)}reload(){return function(b){return jr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Dt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,c.Z)(function*(){let M=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield Me(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,c.Z)(function*(){const _=yield p.getIdToken();return yield gt(p,function(b,p){return rt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,M,N,X,ve,Ye,Ve,_t;const xt=null!==(w=_.displayName)&&void 0!==w?w:void 0,Cn=null!==(M=_.email)&&void 0!==M?M:void 0,xr=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,so=null!==(X=_.photoURL)&&void 0!==X?X:void 0,kr=null!==(ve=_.tenantId)&&void 0!==ve?ve:void 0,sl=null!==(Ye=_._redirectEventId)&&void 0!==Ye?Ye:void 0,fd=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,Cm=null!==(_t=_.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:tf,emailVerified:hc,isAnonymous:Im,providerData:fc,stsTokenManager:pc}=_;Oe(tf&&pc,p,"internal-error");const Tm=$i.fromJSON(this.name,pc);Oe("string"==typeof tf,p,"internal-error"),pi(xt,p.name),pi(Cn,p.name),Oe("boolean"==typeof hc,p,"internal-error"),Oe("boolean"==typeof Im,p,"internal-error"),pi(xr,p.name),pi(so,p.name),pi(kr,p.name),pi(sl,p.name),pi(fd,p.name),pi(Cm,p.name);const nf=new Dt({uid:tf,auth:p,email:Cn,emailVerified:hc,displayName:xt,isAnonymous:Im,photoURL:so,phoneNumber:xr,tenantId:kr,stsTokenManager:Tm,createdAt:fd,lastLoginAt:Cm});return fc&&Array.isArray(fc)&&(nf.providerData=fc.map(pd=>Object.assign({},pd))),sl&&(nf._redirectEventId=sl),nf}static _fromIdTokenResponse(p,_,w=!1){return(0,c.Z)(function*(){const M=new $i;M.updateFromServerResponse(_);const N=new Dt({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:w});return yield Me(N),N})()}}const os=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,c.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,c.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,c.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return b.type="NONE",b})();function zi(b,p,_){return`firebase:${b}:${p}:${_}`}class Ci{constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:M,name:N}=this.auth;this.fullUserKey=zi(this.userKey,M.apiKey,N),this.fullPersistenceKey=zi("persistence",M.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Dt._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,c.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,c.Z)(function*(){if(!_.length)return new Ci(en(os),p,w);const M=(yield Promise.all(_.map(function(){var Ve=(0,c.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let N=M[0]||en(os);const X=zi(w,p.config.apiKey,p.name);let ve=null;for(const Ve of _)try{const _t=yield Ve._get(X);if(_t){const xt=Dt._fromJSON(p,_t);Ve!==N&&(ve=xt),N=Ve;break}}catch(_t){}const Ye=M.filter(Ve=>Ve._shouldAllowMigration);return N._shouldAllowMigration&&Ye.length?(N=Ye[0],ve&&(yield N._set(X,ve.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,c.Z)(function*(_t){if(_t!==N)try{yield _t._remove(X)}catch(xt){}});return function(_t){return Ve.apply(this,arguments)}}())),new Ci(N,p,w)):new Ci(N,p,w)})()}}function wn(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(En(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(La(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(_o(p))return"Blackberry";if(Va(p))return"Webos";if(As(p))return"Safari";if((p.includes("chrome/")||Ii(p))&&!p.includes("edge/"))return"Chrome";if(Lu(p))return"Android";{const w=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function La(b=(0,j.z$)()){return/firefox\//i.test(b)}function As(b=(0,j.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ii(b=(0,j.z$)()){return/crios\//i.test(b)}function En(b=(0,j.z$)()){return/iemobile/i.test(b)}function Lu(b=(0,j.z$)()){return/android/i.test(b)}function _o(b=(0,j.z$)()){return/blackberry/i.test(b)}function Va(b=(0,j.z$)()){return/webos/i.test(b)}function yo(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)}function ei(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function nr(b=(0,j.z$)()){return yo(b)||Lu(b)||Va(b)||_o(b)||/windows phone/i.test(b)||En(b)}function Ti(b,p=[]){let _;switch(b){case"Browser":_=wn((0,j.z$)());break;case"Worker":_=`${wn((0,j.z$)())}-${b}`;break;default:_=b}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${w}`}class as{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=N=>new Promise((X,ve)=>{try{X(p(N))}catch(Ye){ve(Ye)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===p)return;const w=[];try{for(const M of _.queue)yield M(p),M.onAbort&&w.push(M.onAbort)}catch(M){w.reverse();for(const N of w)try{N()}catch(X){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M.message})}})()}}class Th{constructor(p,_,w){this.app=p,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cl(this),this.idTokenSubscription=new Cl(this),this.beforeStateQueue=new as(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=en(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var M,N;if(!w._deleted&&(w.persistenceManager=yield Ci.create(w,p),!w._deleted)){if(null===(M=w._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(X){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,c.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let N=M,X=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ve=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Ye=null==N?void 0:N._redirectEventId,Ve=yield _.tryRedirectSignIn(p);(!ve||ve===Ye)&&(null==Ve?void 0:Ve.user)&&(N=Ve.user,X=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(N)}catch(ve){N=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ve))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return Oe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var _=this;return(0,c.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(M){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,c.Z)(function*(){try{yield Me(p)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,c.Z)(function*(){const w=p?(0,j.m9)(p):null;return w&&Oe(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return p&&Oe(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(en(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new j.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,c.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&en(p)||_._popupRedirectResolver;Oe(w,_,"argument-error"),_.redirectPersistenceManager=yield Ci.create(_,[en(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,c.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,c.Z)(function*(){if(p===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,M){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(X,this,"internal-error"),X.then(()=>N(this.currentUser)),"function"==typeof _?p.addObserver(_,w,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ti(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function qn(b){return(0,j.m9)(b)}class Cl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mi(b,p,_){const w=qn(b);Oe(w._canInitEmulator,w,"emulator-config-failed"),Oe(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const M=!!(null==_?void 0:_.disableWarnings),N=zc(p),{host:X,port:ve}=function(b){const p=zc(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const N=M[1];return{host:N,port:Di(w.substr(N.length+1))}}{const[N,X]=w.split(":");return{host:N,port:Di(X)}}}(p);w.config.emulator={url:`${N}//${X}${null===ve?"":`:${ve}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:X,port:ve,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function(){function b(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function zc(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function Di(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Ba{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ar("not implemented")}_getIdTokenResponse(p){return ar("not implemented")}_linkToIdToken(p,_){return ar("not implemented")}_getReauthenticationResolver(p){return ar("not implemented")}}function Sh(b,p){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:resetPassword",rn(b,p))})).apply(this,arguments)}function Ah(b,p){return qc.apply(this,arguments)}function qc(){return(qc=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Vu(b,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:update",rn(b,p))})).apply(this,arguments)}function Zc(){return(Zc=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithPassword",rn(b,p))})).apply(this,arguments)}function Bu(b,p){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:sendOobCode",rn(b,p))})).apply(this,arguments)}function im(b,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,c.Z)(function*(b,p){return Bu(b,p)})).apply(this,arguments)}function J_(b,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(b,p){return Bu(b,p)})).apply(this,arguments)}function Uu(b,p){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,c.Z)(function*(b,p){return Bu(b,p)})).apply(this,arguments)}function sm(b,p){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,c.Z)(function*(b,p){return Bu(b,p)})).apply(this,arguments)}function ja(){return(ja=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,p))})).apply(this,arguments)}function Il(){return(Il=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,p))})).apply(this,arguments)}class Tl extends Ba{constructor(p,_,w,M=null){super("password",w),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new Tl(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new Tl(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,c.Z)(function*(){switch(_.signInMethod){case"password":return function(b,p){return Zc.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(b,p){return ja.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:_n(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return Ah(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(b,p){return Il.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:_n(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Hr(b,p){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithIdp",rn(b,p))})).apply(this,arguments)}class Cr extends Ba{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Cr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):_n("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M}=_,N=ie(_,["providerId","signInMethod"]);if(!w||!M)return null;const X=new Cr(w,M);return X.idToken=N.idToken||void 0,X.accessToken=N.accessToken||void 0,X.secret=N.secret,X.nonce=N.nonce,X.pendingToken=N.pendingToken||null,X}_getIdTokenResponse(p){return Hr(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,Hr(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Hr(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,j.xO)(_)}return p}}function ju(b,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:sendVerificationCode",rn(b,p))})).apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,p))})).apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(b,p){const _=yield H(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,p));if(_.temporaryProof)throw re(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const xh={USER_NOT_FOUND:"user-not-found"};function Gu(){return(Gu=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),xh)})).apply(this,arguments)}class tn extends Ba{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new tn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new tn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function(b,p){return Sl.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function(b,p){return zo.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(b,p){return Gu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:N}=p;return w||_||M||N?new tn({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:N}):null}}class Ln{constructor(p){var _,w,M,N,X,ve;const Ye=(0,j.zd)((0,j.pd)(p)),Ve=null!==(_=Ye.apiKey)&&void 0!==_?_:null,_t=null!==(w=Ye.oobCode)&&void 0!==w?w:null,xt=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ye.mode)&&void 0!==M?M:null);Oe(Ve&&_t&&xt,"argument-error"),this.apiKey=Ve,this.operation=xt,this.code=_t,this.continueUrl=null!==(N=Ye.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(X=Ye.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(ve=Ye.tenantId)&&void 0!==ve?ve:null}static parseLink(p){const _=function(b){const p=(0,j.zd)((0,j.pd)(b)).link,_=p?(0,j.zd)((0,j.pd)(p)).deep_link_id:null,w=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(w?(0,j.zd)((0,j.pd)(w)).link:null)||w||_||p||b}(p);try{return new Ln(_)}catch(w){return null}}}let Ks=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,w){return Tl._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=Ln.parseLink(w);return Oe(M,"argument-error"),Tl._fromEmailAndCode(_,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class ti{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class cr extends ti{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class wo extends cr{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Oe("providerId"in _&&"signInMethod"in _,"argument-error"),Cr._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Oe(p.idToken||p.accessToken,"argument-error"),Cr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return wo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return wo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:N,nonce:X,providerId:ve}=p;if(!w&&!M&&!_&&!N||!ve)return null;try{return new wo(ve)._credential({idToken:_,accessToken:w,nonce:X,pendingToken:N})}catch(Ye){return null}}}let Wo=(()=>{class b extends cr{constructor(){super("facebook.com")}static credential(_){return Cr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(w){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),qo=(()=>{class b extends cr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Cr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return b.credential(w,M)}catch(N){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),pn=(()=>{class b extends cr{constructor(){super("github.com")}static credential(_){return Cr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(w){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ls extends Ba{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Hr(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,Hr(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Hr(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M,pendingToken:N}=_;return w&&M&&N&&w===M?new ls(w,N):null}static _create(p,_){return new ls(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Or extends ti{constructor(p){Oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Or.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Or.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=ls.fromJSON(p);return Oe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return ls._create(w,_)}catch(M){return null}}}let Rl=(()=>{class b extends cr{constructor(){super("twitter.com")}static credential(_,w){return Cr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return b.credential(w,M)}catch(N){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Eo(b,p){return bt.apply(this,arguments)}function bt(){return(bt=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signUp",rn(b,p))})).apply(this,arguments)}class ni{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,M=!1){return(0,c.Z)(function*(){const N=yield Dt._fromIdTokenResponse(p,w,M),X=Zo(w);return new ni({user:N,providerId:X,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const M=Zo(w);return new ni({user:p,providerId:M,_tokenResponse:w,operationType:_})})()}}function Zo(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Nl(b){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,c.Z)(function*(b){var p;const _=qn(b);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new ni({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Eo(_,{returnSecureToken:!0}),M=yield ni._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ko extends j.ZR{constructor(p,_,w,M){var N;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,M){return new Ko(p,_,w,M)}}function Pl(b,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ko._fromErrorAndOperation(b,N,p,w):N})}function zu(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function Re(b,p){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(b,p){const _=(0,j.m9)(b);yield Yo(!0,_,p);const{providerUserInfo:w}=yield Mt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=zu(w||[]);return _.providerData=_.providerData.filter(N=>M.has(N.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Ms(b,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(b,p,_=!1){const w=yield gt(b,p._linkToIdToken(b.auth,yield b.getIdToken()),_);return ni._forOperation(b,"link",w)})).apply(this,arguments)}function Yo(b,p,_){return us.apply(this,arguments)}function us(){return(us=(0,c.Z)(function*(b,p,_){yield Me(p);const M=!1===b?"provider-already-linked":"no-such-provider";Oe(zu(p.providerData).has(_)===b,p.auth,M)})).apply(this,arguments)}function Gr(b,p){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,c.Z)(function*(b,p,_=!1){const{auth:w}=b,M="reauthenticate";try{const N=yield gt(b,Pl(w,M,p,b),_);Oe(N.idToken,w,"internal-error");const X=Ke(N.idToken);Oe(X,w,"internal-error");const{sub:ve}=X;return Oe(b.uid===ve,w,"user-mismatch"),ni._forOperation(b,M,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&_n(w,"user-mismatch"),N}})).apply(this,arguments)}function Qo(b,p){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,c.Z)(function*(b,p,_=!1){const w="signIn",M=yield Pl(b,w,p),N=yield ni._fromIdTokenResponse(b,w,M);return _||(yield b._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Fl(b,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,c.Z)(function*(b,p){return Qo(qn(b),p)})).apply(this,arguments)}function Xo(b,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,c.Z)(function*(b,p){const _=(0,j.m9)(b);return yield Yo(!1,_,p.providerId),Ms(_,p)})).apply(this,arguments)}function cs(b,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,c.Z)(function*(b,p){return Gr((0,j.m9)(b),p)})).apply(this,arguments)}function ea(b,p){return Si.apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(b,p){return H(b,"POST","/v1/accounts:signInWithCustomToken",rn(b,p))})).apply(this,arguments)}function Wu(b,p){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(b,p){const _=qn(b),w=yield ea(_,{token:p,returnSecureToken:!0}),M=yield ni._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class ta{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?qu._fromServerResponse(p,_):_n(p,"internal-error")}}class qu extends ta{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new qu(_)}}function Ys(b,p,_){var w;Oe((null===(w=_.url)||void 0===w?void 0:w.length)>0,b,"invalid-continue-uri"),Oe(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Oe(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Oe(_.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Vl(b,p,_){return na.apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b),M={requestType:"PASSWORD_RESET",email:p};_&&Ys(w,M,_),yield J_(w,M)})).apply(this,arguments)}function Ga(b,p,_){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,c.Z)(function*(b,p,_){yield Sh((0,j.m9)(b),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Xc(b,p){return $a.apply(this,arguments)}function $a(){return($a=(0,c.Z)(function*(b,p){yield Vu((0,j.m9)(b),{oobCode:p})})).apply(this,arguments)}function Ul(b,p){return za.apply(this,arguments)}function za(){return(za=(0,c.Z)(function*(b,p){const _=(0,j.m9)(b),w=yield Sh(_,{oobCode:p}),M=w.requestType;switch(Oe(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(w.mfaInfo,_,"internal-error");default:Oe(w.email,_,"internal-error")}let N=null;return w.mfaInfo&&(N=ta._fromServerResponse(qn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:M}})).apply(this,arguments)}function Zu(b,p){return jl.apply(this,arguments)}function jl(){return(jl=(0,c.Z)(function*(b,p){const{data:_}=yield Ul((0,j.m9)(b),p);return _.email})).apply(this,arguments)}function Ku(b,p,_){return ed.apply(this,arguments)}function ed(){return(ed=(0,c.Z)(function*(b,p,_){const w=qn(b),M=yield Eo(w,{returnSecureToken:!0,email:p,password:_}),N=yield ni._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Yu(b,p,_){return Fl((0,j.m9)(b),Ks.credential(p,_))}function Un(b,p,_){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b),M={requestType:"EMAIL_SIGNIN",email:p};Oe(_.handleCodeInApp,w,"argument-error"),_&&Ys(w,M,_),yield Uu(w,M)})).apply(this,arguments)}function jn(b,p){const _=Ln.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Hl(b,p,_){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b),M=Ks.credentialWithLink(p,_||ur());return Oe(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Fl(w,M)})).apply(this,arguments)}function om(b,p){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:createAuthUri",rn(b,p))})).apply(this,arguments)}function X_(b,p){return td.apply(this,arguments)}function td(){return(td=(0,c.Z)(function*(b,p){const w={identifier:p,continueUri:Ss()?ur():"http://localhost"},{signinMethods:M}=yield om((0,j.m9)(b),w);return M||[]})).apply(this,arguments)}function ra(b,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(b,p){const _=(0,j.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&Ys(_.auth,M,p);const{email:N}=yield im(_.auth,M);N!==b.email&&(yield b.reload())})).apply(this,arguments)}function Ju(b,p,_){return $l.apply(this,arguments)}function $l(){return($l=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};_&&Ys(w.auth,N,_);const{email:X}=yield sm(w.auth,N);X!==b.email&&(yield b.reload())})).apply(this,arguments)}function kh(b,p){return zl.apply(this,arguments)}function zl(){return(zl=(0,c.Z)(function*(b,p){return St(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Kn(b,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,c.Z)(function*(b,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,j.m9)(b),N={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},X=yield gt(w,kh(w.auth,N));w.displayName=X.displayName||null,w.photoURL=X.photoUrl||null;const ve=w.providerData.find(({providerId:Ye})=>"password"===Ye);ve&&(ve.displayName=w.displayName,ve.photoURL=w.photoURL),yield w._updateTokensIfNecessary(X)})).apply(this,arguments)}function am(b,p){return Wa((0,j.m9)(b),p,null)}function lm(b,p){return Wa((0,j.m9)(b),null,p)}function Wa(b,p,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,c.Z)(function*(b,p,_){const{auth:w}=b,N={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(N.email=p),_&&(N.password=_);const X=yield gt(b,Ah(w,N));yield b._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class Qs{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class nd extends Qs{constructor(p,_,w,M){super(p,_,w),this.username=M}}class ey extends Qs{constructor(p,_){super(p,"facebook.com",_)}}class xn extends nd{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Js extends Qs{constructor(p,_){super(p,"google.com",_)}}class Xe extends nd{constructor(p,_,w){super(p,"twitter.com",_,w)}}function Bt(b){const{user:p,_tokenResponse:_}=b;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(b){var p,_;if(!b)return null;const{providerId:w}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},N=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!w&&(null==b?void 0:b.idToken)){const X=null===(_=null===(p=Ke(b.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new Qs(N,"anonymous"!==X&&"custom"!==X?X:null)}if(!w)return null;switch(w){case"facebook.com":return new ey(N,M);case"github.com":return new xn(N,M);case"google.com":return new Js(N,M);case"twitter.com":return new Xe(N,M,b.screenName||null);case"custom":case"anonymous":return new Qs(N,null);default:return new Qs(N,w,M)}}(_)}class et{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new et("enroll",p)}static _fromMfaPendingCredential(p){return new et("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return et._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return et._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ec{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=qn(p),M=_.customData._serverResponse,N=(M.mfaInfo||[]).map(ve=>ta._fromServerResponse(w,ve));Oe(M.mfaPendingCredential,w,"internal-error");const X=et._fromMfaPendingCredential(M.mfaPendingCredential);return new ec(X,N,function(){var ve=(0,c.Z)(function*(Ye){const Ve=yield Ye._process(w,X);delete M.mfaInfo,delete M.mfaPendingCredential;const _t=Object.assign(Object.assign({},M),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const xt=yield ni._fromIdTokenResponse(w,_.operationType,_t);return yield w._updateCurrentUser(xt.user),xt;case"reauthenticate":return Oe(_.user,w,"internal-error"),ni._forOperation(_.user,_.operationType,_t);default:_n(w,"internal-error")}});return function(Ye){return ve.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,c.Z)(function*(){return _.signInResolver(p)})()}}function Nh(b,p){var _;const w=(0,j.m9)(b),M=p;return Oe(p.customData.operationType,w,"argument-error"),Oe(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),ec._fromError(w,M)}function To(b,p){return St(b,"POST","/v2/accounts/mfaEnrollment:start",rn(b,p))}class aa{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>ta._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new aa(p)}getSession(){var p=this;return(0,c.Z)(function*(){return et._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var w=this;return(0,c.Z)(function*(){const M=p,N=yield w.getSession(),X=yield gt(w.user,M._process(w.user.auth,N,_));return yield w.user._updateTokensIfNecessary(X),w.user.reload()})()}unenroll(p){var _=this;return(0,c.Z)(function*(){const w="string"==typeof p?p:p.uid,M=yield _.user.getIdToken(),N=yield gt(_.user,function(b,p){return St(b,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(b,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:X})=>X!==w),yield _.user._updateTokensIfNecessary(N);try{yield _.user.reload()}catch(X){if("auth/user-token-expired"!==X.code)throw X}})()}}const Xs=new WeakMap;function Oh(b){const p=(0,j.m9)(b);return Xs.has(p)||Xs.set(p,aa._fromUser(p)),Xs.get(p)}const ri="__sak";class Kl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ri,"1"),this.storage.removeItem(ri),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fr=(()=>{class b extends Kl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,j.z$)();return As(b)||yo(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=nr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),N=this.localCache[w];M!==N&&_(w,N,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ve,Ye,Ve)=>{this.notifyListeners(ve,Ve)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(M);if(_.newValue!==ve)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const N=()=>{const ve=this.storage.getItem(M);!w&&this.localCache[M]===ve||this.notifyListeners(M,ve)},X=this.storage.getItem(M);(0,j.w1)()&&10===document.documentMode&&X!==_.newValue&&_.newValue!==_.oldValue?setTimeout(N,10):N()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const N of Array.from(M))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,N=this;return(0,c.Z)(function*(){yield M().call(N,_,w),N.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,c.Z)(function*(){const N=yield w().call(M,_);return M.localCache[_]=JSON.stringify(N),N})()}_remove(_){var w=()=>super._remove,M=this;return(0,c.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return b.type="LOCAL",b})(),to=(()=>{class b extends Kl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return b.type="SESSION",b})();let rr=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(N=>N.isListeningto(_));if(w)return w;const M=new b(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,c.Z)(function*(){const M=_,{eventId:N,eventType:X,data:ve}=M.data,Ye=w.handlersMap[X];if(!(null==Ye?void 0:Ye.size))return;M.ports[0].postMessage({status:"ack",eventId:N,eventType:X});const Ve=Array.from(Ye).map(function(){var xt=(0,c.Z)(function*(Cn){return Cn(M.origin,ve)});return function(Cn){return xt.apply(this,arguments)}}()),_t=yield function(b){return Promise.all(b.map(function(){var p=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(Ve);M.ports[0].postMessage({status:"done",eventId:N,eventType:X,response:_t})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Wi(b="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return b+_}class Ka{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var M=this;return(0,c.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let X,ve;return new Promise((Ye,Ve)=>{const _t=Wi("",20);N.port1.start();const xt=setTimeout(()=>{Ve(new Error("unsupported_event"))},w);ve={messageChannel:N,onMessage(Cn){const xr=Cn;if(xr.data.eventId===_t)switch(xr.data.status){case"ack":clearTimeout(xt),X=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Ye(xr.data.response);break;default:clearTimeout(xt),clearTimeout(X),Ve(new Error("invalid_response"))}}},M.handlers.add(ve),N.port1.addEventListener("message",ve.onMessage),M.target.postMessage({eventType:p,eventId:_t,data:_},[N.port2])}).finally(()=>{ve&&M.removeMessageHandler(ve)})})()}}function $t(){return window}function Mr(){return void 0!==$t().WorkerGlobalScope&&"function"==typeof $t().importScripts}function ii(){return(ii=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Rn="firebaseLocalStorageDb",Rs="firebaseLocalStorage",Vn="fbase_key";class ro{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function id(b,p){return b.transaction([Rs],p?"readwrite":"readonly").objectStore(Rs)}function Ph(){const b=indexedDB.open(Rn,1);return new Promise((p,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const w=b.result;try{w.createObjectStore(Rs,{keyPath:Vn})}catch(M){_(M)}}),b.addEventListener("success",(0,c.Z)(function*(){const w=b.result;w.objectStoreNames.contains(Rs)?p(w):(w.close(),yield function(){const b=indexedDB.deleteDatabase(Rn);return new ro(b).toPromise()}(),p(yield Ph()))}))})}function ua(b,p,_){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(b,p,_){const w=id(b,!0).put({[Vn]:p,value:_});return new ro(w).toPromise()})).apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(b,p){const _=id(b,!1).get(p),w=yield new ro(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function tc(b,p){const _=id(b,!0).delete(p);return new ro(_).toPromise()}const Fh=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield Ph()),_.db})()}_withRetries(_){var w=this;return(0,c.Z)(function*(){let M=0;for(;;)try{const N=yield w._openDb();return yield _(N)}catch(N){if(M++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return Mr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=rr._getInstance(Mr()?self:null),_.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(M,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(M,N){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(M,N){return["keyChanged"]});return function(M,N){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function(){return ii.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ka(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=N[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ph();return yield ua(_,ri,"1"),yield tc(_,ri),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,c.Z)(function*(){return M._withPendingWrite((0,c.Z)(function*(){return yield M._withRetries(N=>ua(N,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,c.Z)(function*(){const M=yield w._withRetries(N=>function(b,p){return Lr.apply(this,arguments)}(N,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(M=>tc(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const w=yield _._withRetries(X=>{const ve=id(X,!1).getAll();return new ro(ve).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:X,value:ve}of w)N.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(ve)&&(_.notifyListeners(X,ve),M.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!N.has(X)&&(_.notifyListeners(X,null),M.push(X));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const N of Array.from(M))N(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Lh(b,p){return St(b,"POST","/v2/accounts/mfaSignIn:start",rn(b,p))}function Ya(){return(Ya=(0,c.Z)(function*(b){return(yield St(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function io(b){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",b),w.onload=p,w.onerror=M=>{const N=yn("internal-error");N.customData=M,_(N)},w.type="text/javascript",w.charset="UTF-8",function(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(w)})}function Jl(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ja=1e12;class rc{constructor(p){this.auth=p,this.counter=Ja,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new jt(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||Ja;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Ja))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,c.Z)(function*(){var w;return null===(w=_._widgets.get(p||Ja))||void 0===w||w.execute(),""})()}}class jt{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;Oe(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}();const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mi=Jl("rcb"),Ns=new hn(3e4,6e4);class Uh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!$t().grecaptcha}load(p,_=""){return Oe((b=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($t().grecaptcha):new Promise((w,M)=>{const N=$t().setTimeout(()=>{M(yn(p,"network-request-failed"))},Ns.get());$t()[Mi]=()=>{$t().clearTimeout(N),delete $t()[Mi];const ve=$t().grecaptcha;if(!ve)return void M(yn(p,"internal-error"));const Ye=ve.render;ve.render=(Ve,_t)=>{const xt=Ye(Ve,_t);return this.counter++,xt},this.hostLanguage=_,w(ve)},io(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Mi,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),M(yn(p,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!$t().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jh{load(p){return(0,c.Z)(function*(){return new rc(p)})()}clearedOneInstance(){}}const Ki="recaptcha",Do={theme:"light",type:"image"};class ic{constructor(p,_=Object.assign({},Do),w){this.parameters=_,this.type=Ki,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(w),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;Oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jh:new Uh,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(N=>{const X=ve=>{!ve||(p.tokenChangeListeners.delete(X),N(ve))};p.tokenChangeListeners.add(X),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=$t()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){Oe(Ss()&&!Mr(),p.auth,"internal-error"),yield function(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function(b){return Ya.apply(this,arguments)}(p.auth);Oe(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xl{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=tn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Nn(b,p,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,c.Z)(function*(b,p,_){const w=qn(b),M=yield nu(w,p,(0,j.m9)(_));return new Xl(M,N=>Fl(w,N))})).apply(this,arguments)}function Qi(b,p,_){return eu.apply(this,arguments)}function eu(){return(eu=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b);yield Yo(!1,w,"phone");const M=yield nu(w.auth,p,(0,j.m9)(_));return new Xl(M,N=>Xo(w,N))})).apply(this,arguments)}function tu(b,p,_){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b),M=yield nu(w.auth,p,(0,j.m9)(_));return new Xl(M,N=>cs(w,N))})).apply(this,arguments)}function nu(b,p,_){return ru.apply(this,arguments)}function ru(){return(ru=(0,c.Z)(function*(b,p,_){var w;const M=yield _.verify();try{let N;if(Oe("string"==typeof M,b,"argument-error"),Oe(_.type===Ki,b,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const X=N.session;if("phoneNumber"in N)return Oe("enroll"===X.type,b,"internal-error"),(yield To(b,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Oe("signin"===X.type,b,"internal-error");const ve=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return Oe(ve,b,"missing-multi-factor-info"),(yield Lh(b,{mfaPendingCredential:X.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield ju(b,{phoneNumber:N.phoneNumber,recaptchaToken:M});return X}}finally{_._reset()}})).apply(this,arguments)}function od(b,p){return T.apply(this,arguments)}function T(){return(T=(0,c.Z)(function*(b,p){yield Ms((0,j.m9)(b),p)})).apply(this,arguments)}let S=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=qn(_)}verifyPhoneNumber(_,w){return nu(this.auth,_,(0,j.m9)(w))}static credential(_,w){return tn._fromVerification(_,w)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?tn._fromTokenResponse(w,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function k(b,p){return p?en(p):(Oe(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class U extends Ba{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Hr(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Hr(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Hr(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function G(b){return Qo(b.auth,new U(b),b.bypassAuthState)}function le(b){const{auth:p,user:_}=b;return Oe(_,p,"internal-error"),Gr(_,new U(b),b.bypassAuthState)}function Le(b){return tt.apply(this,arguments)}function tt(){return(tt=(0,c.Z)(function*(b){const{auth:p,user:_}=b;return Oe(_,p,"internal-error"),Ms(_,new U(b),b.bypassAuthState)})).apply(this,arguments)}class Tt{constructor(p,_,w,M,N=!1){this.auth=p,this.resolver=w,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,c.Z)(function*(w,M){p.pendingPromise={resolve:w,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:N,tenantId:X,error:ve,type:Ye}=p;if(ve)return void _.reject(ve);const Ve={auth:_.auth,requestUri:w,sessionId:M,tenantId:X||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ye)(Ve))}catch(_t){_.reject(_t)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return G;case"linkViaPopup":case"linkViaRedirect":return Le;case"reauthViaPopup":case"reauthViaRedirect":return le;default:_n(this.auth,"internal-error")}}resolve(p){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ot=new hn(2e3,1e4);function sn(b,p,_){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(b,p,_){const w=qn(b);Jr(b,p,ti);const M=k(w,_);return new So(w,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function _r(b,p,_){return mn.apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b);Jr(w.auth,p,ti);const M=k(w.auth,_);return new So(w.auth,"reauthViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}function ca(b,p,_){return _i.apply(this,arguments)}function _i(){return(_i=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b);Jr(w.auth,p,ti);const M=k(w.auth,_);return new So(w.auth,"linkViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}let So=(()=>{class b extends Tt{constructor(_,w,M,N,X){super(_,w,N,X),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const w=yield _.execute();return Oe(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,c.Z)(function*(){wr(1===_.filter.length,"Popup operations only handle one event");const w=Wi();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(yn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=(null===(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Ot.get())};_()}}return b.currentPopupAction=null,b})();const zr=new Map;class da extends Tt{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,c.Z)(function*(){let w=zr.get(_.auth._key());if(!w){try{const N=(yield function(b,p){return Gh.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(N)}catch(M){w=()=>Promise.reject(M)}zr.set(_.auth._key(),w)}return _.bypassAuthState||zr.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const M=yield w.auth._redirectUserForId(p.eventId);if(M)return w.user=M,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Gh(){return(Gh=(0,c.Z)(function*(b,p){const _=zh(p),w=ty(b);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function $h(b,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(b,p){return ty(b)._set(zh(p),"true")})).apply(this,arguments)}function fa(){zr.clear()}function hm(b,p){zr.set(b._key(),p)}function ty(b){return en(b._redirectPersistence)}function zh(b){return zi("pendingRedirect",b.config.apiKey,b.name)}function ny(b,p,_){return function(b,p,_){return ad.apply(this,arguments)}(b,p,_)}function ad(){return(ad=(0,c.Z)(function*(b,p,_){const w=qn(b);Jr(b,p,ti);const M=k(w,_);return yield $h(M,w),M._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Wh(b,p,_){return function(b,p,_){return xi.apply(this,arguments)}(b,p,_)}function xi(){return(xi=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b);Jr(w.auth,p,ti);const M=k(w.auth,_);yield $h(M,w.auth);const N=yield iu(w);return M._openRedirect(w.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function pa(b,p,_){return function(b,p,_){return ld.apply(this,arguments)}(b,p,_)}function ld(){return(ld=(0,c.Z)(function*(b,p,_){const w=(0,j.m9)(b);Jr(w.auth,p,ti);const M=k(w.auth,_);yield Yo(!1,w,p.providerId),yield $h(M,w.auth);const N=yield iu(w);return M._openRedirect(w.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function ry(b,p){return ma.apply(this,arguments)}function ma(){return(ma=(0,c.Z)(function*(b,p){return yield qn(b)._initializationPromise,tl(b,p,!1)})).apply(this,arguments)}function tl(b,p){return oc.apply(this,arguments)}function oc(){return(oc=(0,c.Z)(function*(b,p,_=!1){const w=qn(b),M=k(w,p),X=yield new da(w,M,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield w._persistUserIfCurrent(X.user),yield w._setRedirectUser(null,p)),X})).apply(this,arguments)}function iu(b){return ac.apply(this,arguments)}function ac(){return(ac=(0,c.Z)(function*(b){const p=Wi(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class Ao{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dd(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!dd(p)){const M=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(yn(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cd(p))}saveEventToCache(p){this.cachedEventUids.add(cd(p)),this.lastProcessedEventTime=Date.now()}}function cd(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function dd({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function su(b){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,c.Z)(function*(b,p={}){return St(b,"GET","/v1/projects",p)})).apply(this,arguments)}const Mo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ou=/^https?/;function nl(){return(nl=(0,c.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield su(b);for(const _ of p)try{if(Kh(_))return}catch(w){}_n(b,"unauthorized-domain")})).apply(this,arguments)}function Kh(b){const p=ur(),{protocol:_,hostname:w}=new URL(p);if(b.startsWith("chrome-extension://")){const X=new URL(b);return""===X.hostname&&""===w?"chrome-extension:"===_&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===w}if(!ou.test(_))return!1;if(Mo.test(b))return w===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const fm=new hn(3e4,6e4);function Yh(){const b=$t().___jsl;if(null==b?void 0:b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let rl=null;function oy(b){return rl=rl||function(b){return new Promise((p,_)=>{var w,M,N;function X(){Yh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Yh(),_(yn(b,"network-request-failed"))},timeout:fm.get()})}if(null===(M=null===(w=$t().gapi)||void 0===w?void 0:w.iframes)||void 0===M?void 0:M.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=$t().gapi)||void 0===N?void 0:N.load)){const ve=Jl("iframefcb");return $t()[ve]=()=>{gapi.load?X():_(yn(b,"network-request-failed"))},io(`https://apis.google.com/js/api.js?onload=${ve}`).catch(Ye=>_(Ye))}X()}}).catch(p=>{throw rl=null,p})}(b),rl}const ay=new hn(5e3,15e3),Qh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function il(b){const p=b.config;Oe(p.authDomain,b,"auth-domain-config-required");const _=p.emulator?at(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:b.name,v:O.SDK_VERSION},M=uy.get(b.config.apiHost);M&&(w.eid=M);const N=b._getFrameworks();return N.length&&(w.fw=N.join(",")),`${_}?${(0,j.xO)(w).slice(1)}`}function Ji(){return Ji=(0,c.Z)(function*(b){const p=yield oy(b),_=$t().gapi;return Oe(_,b,"internal-error"),p.open({where:document.body,url:il(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qh,dontclear:!0},w=>new Promise(function(){var M=(0,c.Z)(function*(N,X){yield w.restyle({setHideOnLeave:!1});const ve=yn(b,"network-request-failed"),Ye=$t().setTimeout(()=>{X(ve)},ay.get());function Ve(){$t().clearTimeout(Ye),N(w)}w.ping(Ve).then(Ve,()=>{X(ve)})});return function(N,X){return M.apply(this,arguments)}}()))}),Ji.apply(this,arguments)}const au={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ga{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function bm(b,p,_,w,M,N){Oe(b.config.authDomain,b,"auth-domain-config-required"),Oe(b.config.apiKey,b,"invalid-api-key");const X={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:w,v:O.SDK_VERSION,eventId:M};if(p instanceof ti){p.setDefaultLanguage(b.languageCode),X.providerId=p.providerId||"",(0,j.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ye,Ve]of Object.entries(N||{}))X[Ye]=Ve}if(p instanceof cr){const Ye=p.getScopes().filter(Ve=>""!==Ve);Ye.length>0&&(X.scopes=Ye.join(","))}b.tenantId&&(X.tid=b.tenantId);const ve=X;for(const Ye of Object.keys(ve))void 0===ve[Ye]&&delete ve[Ye];return`${function({config:b}){return b.emulator?at(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(ve).slice(1)}`}const _a="webStorageSupport",wm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=tl,this._overrideRedirectResult=hm}_openPopup(p,_,w,M){var N=this;return(0,c.Z)(function*(){var X;wr(null===(X=N.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const ve=bm(p,_,w,ur(),M);return function(b,p,_,w=500,M=600){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),X=Math.max((window.screen.availWidth-w)/2,0).toString();let ve="";const Ye=Object.assign(Object.assign({},au),{width:w.toString(),height:M.toString(),top:N,left:X}),Ve=(0,j.z$)().toLowerCase();_&&(ve=Ii(Ve)?"_blank":_),La(Ve)&&(p=p||"http://localhost",Ye.scrollbars="yes");const _t=Object.entries(Ye).reduce((Cn,[xr,so])=>`${Cn}${xr}=${so},`,"");if(function(b=(0,j.z$)()){var p;return yo(b)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ve)&&"_self"!==ve)return function(b,p){const _=document.createElement("a");_.href=b,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",ve),new ga(null);const xt=window.open(p||"",ve,_t);Oe(xt,b,"popup-blocked");try{xt.focus()}catch(Cn){}return new ga(xt)}(p,ve,Wi())})()}_openRedirect(p,_,w,M){var N=this;return(0,c.Z)(function*(){return yield N._originValidation(p),b=bm(p,_,w,ur(),M),$t().location.href=b,new Promise(()=>{});var b})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:N}=this.eventManagers[_];return M?Promise.resolve(M):(wr(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,c.Z)(function*(){const w=yield function(b){return Ji.apply(this,arguments)}(p),M=new Ao(p);return w.register("authEvent",N=>(Oe(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=w,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(_a,{type:_a},M=>{var N;const X=null===(N=null==M?void 0:M[0])||void 0===N?void 0:N[_a];void 0!==X&&_(!!X),_n(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(b){return nl.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return nr()||As()||yo()}};class dc extends class{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return ar("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new dc(p)}_finalizeEnroll(p,_,w){return function(b,p){return St(b,"POST","/v2/accounts/mfaEnrollment:finalize",rn(b,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function(b,p){return St(b,"POST","/v2/accounts/mfaSignIn:finalize",rn(b,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Em=(()=>{class b{constructor(){}static assertion(_){return dc._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var b,lu="@firebase/auth";class ef{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{var M;p((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ms(b=(0,O.getApp)()){const p=(0,O._getProvider)(b,"auth");return p.isInitialized()?p.getImmediate():function(b,p){const _=(0,O._getProvider)(b,"auth");if(_.isInitialized()){const M=_.getImmediate(),N=_.getOptions();if((0,j.vZ)(N,null!=p?p:{}))return M;_n(M,"already-initialized")}return _.initialize({options:p})}(b,{popupRedirectResolver:wm,persistence:[Fh,Fr,to]})}b="Browser",(0,O._registerComponent)(new ce.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),{apiKey:N,authDomain:X}=w.options;return((ve,Ye)=>{Oe(N&&!N.includes(":"),"invalid-api-key",{appName:ve.name}),Oe(!(null==X?void 0:X.includes(":")),"argument-error",{appName:ve.name});const Ve={apiKey:N,authDomain:X,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ti(b)},_t=new Th(ve,Ye,Ve);return function(b,p){const _=(null==p?void 0:p.persistence)||[],w=(Array.isArray(_)?_:[_]).map(en);(null==p?void 0:p.errorMap)&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(_t,_),_t})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ce.wA("auth-internal",p=>{const _=qn(p.getProvider("auth").getImmediate());return new ef(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(lu,"0.20.1",void 0),(0,O.registerVersion)(lu,"0.20.1","esm2017")},4213:(it,Ce,P)=>{P.d(Ce,{BH:()=>We,LL:()=>ce,ZR:()=>Ne,gQ:()=>Oe,zI:()=>ne,hu:()=>j,g5:()=>O,US:()=>we,tV:()=>ge,h$:()=>ie,L:()=>ue,$s:()=>rn,r3:()=>nn,Sg:()=>xe,ne:()=>ar,p$:()=>z,vZ:()=>_n,ZB:()=>q,gK:()=>ur,pd:()=>Xr,m9:()=>tr,z$:()=>$e,GJ:()=>Yr,jU:()=>se,ru:()=>De,d:()=>je,xb:()=>Bn,w1:()=>ct,hl:()=>Ie,uI:()=>ze,UG:()=>Ue,Yr:()=>Ze,b$:()=>Be,G6:()=>Je,Mn:()=>Fe,w9:()=>br,cI:()=>er,UI:()=>Qr,xO:()=>zs,zd:()=>Jr,DV:()=>Ds,ug:()=>hn,dS:()=>mo,Pz:()=>Et,Dv:()=>lr,Wj:()=>$n,lb:()=>vn,eu:()=>K});const j=function(W,H){if(!W)throw O(H)},O=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},oe=function(W){const H=[];let Q=0;for(let Ee=0;Ee<W.length;Ee++){let $=W.charCodeAt(Ee);$<128?H[Q++]=$:$<2048?(H[Q++]=$>>6|192,H[Q++]=63&$|128):55296==(64512&$)&&Ee+1<W.length&&56320==(64512&W.charCodeAt(Ee+1))?($=65536+((1023&$)<<10)+(1023&W.charCodeAt(++Ee)),H[Q++]=$>>18|240,H[Q++]=$>>12&63|128,H[Q++]=$>>6&63|128,H[Q++]=63&$|128):(H[Q++]=$>>12|224,H[Q++]=$>>6&63|128,H[Q++]=63&$|128)}return H},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,H){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let $=0;$<W.length;$+=3){const re=W[$],ke=$+1<W.length,rt=ke?W[$+1]:0,Mt=$+2<W.length,Rt=Mt?W[$+2]:0;let Er=(15&rt)<<2|Rt>>6,de=63&Rt;Mt||(de=64,ke||(Er=64)),Ee.push(Q[re>>2],Q[(3&re)<<4|rt>>4],Q[Er],Q[de])}return Ee.join("")},encodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(W):this.encodeByteArray(oe(W),H)},decodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(W):function(W){const H=[];let Q=0,Ee=0;for(;Q<W.length;){const $=W[Q++];if($<128)H[Ee++]=String.fromCharCode($);else if($>191&&$<224){const re=W[Q++];H[Ee++]=String.fromCharCode((31&$)<<6|63&re)}else if($>239&&$<365){const Mt=((7&$)<<18|(63&W[Q++])<<12|(63&W[Q++])<<6|63&W[Q++])-65536;H[Ee++]=String.fromCharCode(55296+(Mt>>10)),H[Ee++]=String.fromCharCode(56320+(1023&Mt))}else{const re=W[Q++],ke=W[Q++];H[Ee++]=String.fromCharCode((15&$)<<12|(63&re)<<6|63&ke)}}return H.join("")}(this.decodeStringToByteArray(W,H))},decodeStringToByteArray(W,H){this.init_();const Q=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let $=0;$<W.length;){const re=Q[W.charAt($++)],rt=$<W.length?Q[W.charAt($)]:0;++$;const Rt=$<W.length?Q[W.charAt($)]:64;++$;const Nt=$<W.length?Q[W.charAt($)]:64;if(++$,null==re||null==rt||null==Rt||null==Nt)throw Error();Ee.push(re<<2|rt>>4),64!==Rt&&(Ee.push(rt<<4&240|Rt>>2),64!==Nt&&Ee.push(Rt<<6&192|Nt))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ie=function(W){const H=oe(W);return we.encodeByteArray(H,!0)},ue=function(W){return ie(W).replace(/\./g,"")},ge=function(W){try{return we.decodeString(W,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z(W){return q(void 0,W)}function q(W,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return H}for(const Q in H)!H.hasOwnProperty(Q)||!ae(Q)||(W[Q]=q(W[Q],H[Q]));return W}function ae(W){return"__proto__"!==W}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Q)=>{this.resolve=H,this.reject=Q})}wrapCallback(H){return(Q,Ee)=>{Q?this.reject(Q):this.resolve(Ee),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Q):H(Q,Ee))}}}function xe(W,H){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=H||"demo-project",$=W.iat||0,re=W.sub||W.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:$,exp:$+3600,auth_time:$,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},W);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ke)),""].join(".")}function $e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function se(){return"object"==typeof self&&self.self===self}function De(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return $e().indexOf("Electron/")>=0}function ct(){const W=$e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Fe(){return $e().indexOf("MSAppHost/")>=0}function Ze(){return!1}function Je(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ie(){return"object"==typeof indexedDB}function K(){return new Promise((W,H)=>{try{let Q=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(Ee);$.onsuccess=()=>{$.result.close(),Q||self.indexedDB.deleteDatabase(Ee),W(!0)},$.onupgradeneeded=()=>{Q=!1},$.onerror=()=>{var re;H((null===(re=$.error)||void 0===re?void 0:re.message)||"")}}catch(Q){H(Q)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(H,Q,Ee){super(Q),this.code=H,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(H,Q,Ee){this.service=H,this.serviceName=Q,this.errors=Ee}create(H,...Q){const Ee=Q[0]||{},$=`${this.service}/${H}`,re=this.errors[H],ke=re?function(W,H){return W.replace(zt,(Q,Ee)=>{const $=H[Ee];return null!=$?String($):`<${Ee}?>`})}(re,Ee):"Error";return new Ne($,`${this.serviceName}: ${ke} (${$}).`,Ee)}}const zt=/\{\$([^}]+)}/g;function er(W){return JSON.parse(W)}function Et(W){return JSON.stringify(W)}const Kt=function(W){let H={},Q={},Ee={},$="";try{const re=W.split(".");H=er(ge(re[0])||""),Q=er(ge(re[1])||""),$=re[2],Ee=Q.d||{},delete Q.d}catch(re){}return{header:H,claims:Q,data:Ee,signature:$}},br=function(W){const Q=Kt(W).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Yr=function(W){const H=Kt(W).claims;return"object"==typeof H&&!0===H.admin};function nn(W,H){return Object.prototype.hasOwnProperty.call(W,H)}function Ds(W,H){if(Object.prototype.hasOwnProperty.call(W,H))return W[H]}function Bn(W){for(const H in W)if(Object.prototype.hasOwnProperty.call(W,H))return!1;return!0}function Qr(W,H,Q){const Ee={};for(const $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(Ee[$]=H.call(Q,W[$],$,W));return Ee}function _n(W,H){if(W===H)return!0;const Q=Object.keys(W),Ee=Object.keys(H);for(const $ of Q){if(!Ee.includes($))return!1;const re=W[$],ke=H[$];if(yn(re)&&yn(ke)){if(!_n(re,ke))return!1}else if(re!==ke)return!1}for(const $ of Ee)if(!Q.includes($))return!1;return!0}function yn(W){return null!==W&&"object"==typeof W}function zs(W){const H=[];for(const[Q,Ee]of Object.entries(W))Array.isArray(Ee)?Ee.forEach($=>{H.push(encodeURIComponent(Q)+"="+encodeURIComponent($))}):H.push(encodeURIComponent(Q)+"="+encodeURIComponent(Ee));return H.length?"&"+H.join("&"):""}function Jr(W){const H={};return W.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[$,re]=Ee.split("=");H[decodeURIComponent($)]=decodeURIComponent(re)}}),H}function Xr(W){const H=W.indexOf("?");if(!H)return"";const Q=W.indexOf("#",H);return W.substring(H,Q>0?Q:void 0)}class Oe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Q){Q||(Q=0);const Ee=this.W_;if("string"==typeof H)for(let Nt=0;Nt<16;Nt++)Ee[Nt]=H.charCodeAt(Q)<<24|H.charCodeAt(Q+1)<<16|H.charCodeAt(Q+2)<<8|H.charCodeAt(Q+3),Q+=4;else for(let Nt=0;Nt<16;Nt++)Ee[Nt]=H[Q]<<24|H[Q+1]<<16|H[Q+2]<<8|H[Q+3],Q+=4;for(let Nt=16;Nt<80;Nt++){const Er=Ee[Nt-3]^Ee[Nt-8]^Ee[Nt-14]^Ee[Nt-16];Ee[Nt]=4294967295&(Er<<1|Er>>>31)}let Rt,Mn,$=this.chain_[0],re=this.chain_[1],ke=this.chain_[2],rt=this.chain_[3],Mt=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(Rt=rt^re&(ke^rt),Mn=1518500249):(Rt=re^ke^rt,Mn=1859775393):Nt<60?(Rt=re&ke|rt&(re|ke),Mn=2400959708):(Rt=re^ke^rt,Mn=3395469782);const Er=($<<5|$>>>27)+Rt+Mt+Mn+Ee[Nt]&4294967295;Mt=rt,rt=ke,ke=4294967295&(re<<30|re>>>2),re=$,$=Er}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+re&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+rt&4294967295,this.chain_[4]=this.chain_[4]+Mt&4294967295}update(H,Q){if(null==H)return;void 0===Q&&(Q=H.length);const Ee=Q-this.blockSize;let $=0;const re=this.buf_;let ke=this.inbuf_;for(;$<Q;){if(0===ke)for(;$<=Ee;)this.compress_(H,$),$+=this.blockSize;if("string"==typeof H){for(;$<Q;)if(re[ke]=H.charCodeAt($),++ke,++$,ke===this.blockSize){this.compress_(re),ke=0;break}}else for(;$<Q;)if(re[ke]=H[$],++ke,++$,ke===this.blockSize){this.compress_(re),ke=0;break}}this.inbuf_=ke,this.total_+=Q}digest(){const H=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&Q,Q/=256;this.compress_(this.buf_);let Ee=0;for(let $=0;$<5;$++)for(let re=24;re>=0;re-=8)H[Ee]=this.chain_[$]>>re&255,++Ee;return H}}function ar(W,H){const Q=new wr(W,H);return Q.subscribe.bind(Q)}class wr{constructor(H,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{H(this)}).catch(Ee=>{this.error(Ee)})}next(H){this.forEachObserver(Q=>{Q.next(H)})}error(H){this.forEachObserver(Q=>{Q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Q,Ee){let $;if(void 0===H&&void 0===Q&&void 0===Ee)throw new Error("Missing Observer.");$=function(W,H){if("object"!=typeof W||null===W)return!1;for(const Q of["next","error","complete"])if(Q in W&&"function"==typeof W[Q])return!0;return!1}(H)?H:{next:H,error:Q,complete:Ee},void 0===$.next&&($.next=Fn),void 0===$.error&&($.error=Fn),void 0===$.complete&&($.complete=Fn);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(ke){}}),this.observers.push($),re}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,H)}sendOne(H,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Q(this.observers[H])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fn(){}const lr=function(W,H,Q,Ee){let $;if(Ee<H?$="at least "+H:Ee>Q&&($=0===Q?"none":"no more than "+Q),$)throw new Error(W+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+$+".")};function ur(W,H){return`${W} failed: ${H} argument `}function $n(W,H,Q,Ee){if((!Ee||Q)&&"function"!=typeof Q)throw new Error(ur(W,H)+"must be a valid function.")}function vn(W,H,Q,Ee){if((!Ee||Q)&&("object"!=typeof Q||null===Q))throw new Error(ur(W,H)+"must be a valid context object.")}const mo=function(W){const H=[];let Q=0;for(let Ee=0;Ee<W.length;Ee++){let $=W.charCodeAt(Ee);if($>=55296&&$<=56319){const re=$-55296;Ee++,j(Ee<W.length,"Surrogate pair missing trail surrogate."),$=65536+(re<<10)+(W.charCodeAt(Ee)-56320)}$<128?H[Q++]=$:$<2048?(H[Q++]=$>>6|192,H[Q++]=63&$|128):$<65536?(H[Q++]=$>>12|224,H[Q++]=$>>6&63|128,H[Q++]=63&$|128):(H[Q++]=$>>18|240,H[Q++]=$>>12&63|128,H[Q++]=$>>6&63|128,H[Q++]=63&$|128)}return H},hn=function(W){let H=0;for(let Q=0;Q<W.length;Q++){const Ee=W.charCodeAt(Q);Ee<128?H++:Ee<2048?H+=2:Ee>=55296&&Ee<=56319?(H+=4,Q++):H+=3}return H};function rn(W,H=1e3,Q=2){const Ee=H*Math.pow(Q,W),$=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+$)}function tr(W){return W&&W._delegate?W._delegate:W}},7713:(it,Ce,P)=>{P.d(Ce,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=P(1572);(0,c.registerVersion)("firebase","9.8.1","app")},7892:(it,Ce,P)=>{P.d(Ce,{Z:()=>c.Z});var c=P(6293);c.Z.registerVersion("firebase","9.8.1","app-compat")},2115:(it,Ce,P)=>{P.r(Ce);var c=P(8239),j=P(6293),O=P(3533),oe=P(4213),ie=(P(1572),P(3855),P(1177));function ue(){return window}function q(){return(q=(0,c.Z)(function*(de,J,Y){var Se;const{BuildInfo:Ke}=ue();(0,O.aq)(J.sessionId,"AuthEvent did not contain a session ID");const Vt=yield se(J.sessionId),gt={};return(0,O.ar)()?gt.ibi=Ke.packageName:(0,O.as)()?gt.apn=Ke.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),Ke.displayName&&(gt.appDisplayName=Ke.displayName),gt.sessionId=Vt,(0,O.au)(de,Y,J.type,void 0,null!==(Se=J.eventId)&&void 0!==Se?Se:void 0,gt)})).apply(this,arguments)}function We(){return(We=(0,c.Z)(function*(de){const{BuildInfo:J}=ue(),Y={};(0,O.ar)()?Y.iosBundleId=J.packageName:(0,O.as)()?Y.androidPackageName=J.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),yield(0,O.av)(de,Y)})).apply(this,arguments)}function ze(){return(ze=(0,c.Z)(function*(de,J,Y){const{cordova:Se}=ue();let Ke=()=>{};try{yield new Promise((Vt,gt)=>{let Zt=null;function fn(){var Me;Vt();const It=null===(Me=Se.plugins.browsertab)||void 0===Me?void 0:Me.close;"function"==typeof It&&It(),"function"==typeof(null==Y?void 0:Y.close)&&Y.close()}function bn(){Zt||(Zt=window.setTimeout(()=>{gt((0,O.aw)(de,"redirect-cancelled-by-user"))},2e3))}function zn(){"visible"===(null==document?void 0:document.visibilityState)&&bn()}J.addPassiveListener(fn),document.addEventListener("resume",bn,!1),(0,O.as)()&&document.addEventListener("visibilitychange",zn,!1),Ke=()=>{J.removePassiveListener(fn),document.removeEventListener("resume",bn,!1),document.removeEventListener("visibilitychange",zn,!1),Zt&&window.clearTimeout(Zt)}})}finally{Ke()}})).apply(this,arguments)}function se(de){return De.apply(this,arguments)}function De(){return(De=(0,c.Z)(function*(de){const J=Be(de),Y=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(Y)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Be(de){if((0,O.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const J=new ArrayBuffer(de.length),Y=new Uint8Array(J);for(let Se=0;Se<de.length;Se++)Y[Se]=de.charCodeAt(Se);return Y}class ct extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(J)),super.onEvent(J)}initialized(){var J=this;return(0,c.Z)(function*(){yield J.initPromise})()}}function Je(de){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,c.Z)(function*(de){const J=yield fe()._get(ye(de));return J&&(yield fe()._remove(ye(de))),J})).apply(this,arguments)}function ne(){const de=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Y=0;Y<20;Y++){const Se=Math.floor(Math.random()*J.length);de.push(J.charAt(Se))}return de.join("")}function fe(){return(0,O.ay)(O.b)}function ye(de){return(0,O.az)("authEvent",de.config.apiKey,de.name)}function wt(de){if(!(null==de?void 0:de.includes("?")))return{};const[J,...Y]=de.split("?");return(0,oe.zd)(Y.join("?"))}function Kt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function nn(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Bn(de=(0,oe.z$)()){return!("file:"!==nn()&&"ionic:"!==nn()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jr(){try{const de=self.localStorage,J=O.aI();if(de)return de.setItem(J,"1"),de.removeItem(J),!function(de=(0,oe.z$)()){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)||function(de=(0,oe.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,oe.hl)()}catch(de){return Xr()&&(0,oe.hl)()}return!1}function Xr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Oe(){return("http:"===nn()||"https:"===nn()||(0,oe.ru)()||Bn())&&!((0,oe.b$)()||(0,oe.UG)())&&Jr()&&!Xr()}function ar(){return Bn()&&"undefined"!=typeof document}function vt(){return(vt=(0,c.Z)(function*(){return!!ar()&&new Promise(de=>{const J=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),de(!0)})})})).apply(this,arguments)}const Fn={LOCAL:"local",NONE:"none",SESSION:"session"},lr=O.ax,ur="persistence";function $n(de){return vn.apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(de){yield de._initializationPromise;const J=hn(),Y=O.az(ur,de.config.apiKey,de.name);J&&J.setItem(Y,de._getPersistence())})).apply(this,arguments)}function hn(){var de;try{return(null===(de="undefined"!=typeof window?window:null)||void 0===de?void 0:de.sessionStorage)||null}catch(J){return null}}const at=O.ax;class pt{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(J){var Y=this;return(0,c.Z)(function*(){const Se=J._key();let Ke=Y.eventManagers.get(Se);return Ke||(Ke=new ct(J),Y.eventManagers.set(Se,Ke),Y.attachCallbackListeners(J,Ke)),Ke})()}_openPopup(J){(0,O.at)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,Y,Se,Ke){var Vt=this;return(0,c.Z)(function*(){!function(de){var J,Y,Se,Ke,Vt,gt,Zt,fn,bn,zn;const Me=ue();(0,O.ax)("function"==typeof(null===(J=null==Me?void 0:Me.universalLinks)||void 0===J?void 0:J.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(Y=null==Me?void 0:Me.BuildInfo)||void 0===Y?void 0:Y.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Vt=null===(Ke=null===(Se=null==Me?void 0:Me.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Vt?void 0:Vt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(fn=null===(Zt=null===(gt=null==Me?void 0:Me.cordova)||void 0===gt?void 0:gt.plugins)||void 0===Zt?void 0:Zt.browsertab)||void 0===fn?void 0:fn.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(zn=null===(bn=null==Me?void 0:Me.cordova)||void 0===bn?void 0:bn.InAppBrowser)||void 0===zn?void 0:zn.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const gt=yield Vt._initialize(J);yield gt.initialized(),gt.resetRedirect(),(0,O.aD)(),yield Vt._originValidation(J);const Zt=function(de,J,Y=null){return{type:J,eventId:Y,urlResponse:null,sessionId:ne(),postBody:null,tenantId:de.tenantId,error:(0,O.aw)(de,"no-auth-event")}}(J,Se,Ke);yield function(de,J){return fe()._set(ye(de),J)}(J,Zt);const fn=yield function(de,J,Y){return q.apply(this,arguments)}(J,Zt,Y),bn=yield function(de){const{cordova:J}=ue();return new Promise(Y=>{J.plugins.browsertab.isAvailable(Se=>{let Ke=null;Se?J.plugins.browsertab.openUrl(de):Ke=J.InAppBrowser.open(de,(0,O.ap)()?"_blank":"_system","location=yes"),Y(Ke)})})}(fn);return function(de,J,Y){return ze.apply(this,arguments)}(J,gt,bn)})()}_isIframeWebStorageSupported(J,Y){throw new Error("Method not implemented.")}_originValidation(J){const Y=J._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function(de){return We.apply(this,arguments)}(J)),this.originValidationPromises[Y]}attachCallbackListeners(J,Y){const{universalLinks:Se,handleOpenURL:Ke,BuildInfo:Vt}=ue(),gt=setTimeout((0,c.Z)(function*(){yield Je(J),Y.onEvent(Kt())}),500),Zt=function(){var zn=(0,c.Z)(function*(Me){clearTimeout(gt);const It=yield Je(J);let Dn=null;It&&(null==Me?void 0:Me.url)&&(Dn=function(de,J){var Y,Se;const Ke=function(de){const J=wt(de),Y=J.link?decodeURIComponent(J.link):void 0,Se=wt(Y).link,Ke=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return wt(Ke).link||Ke||Se||Y||de}(J);if(Ke.includes("/__/auth/callback")){const Vt=wt(Ke),gt=Vt.firebaseError?function(de){try{return JSON.parse(de)}catch(J){return null}}(decodeURIComponent(Vt.firebaseError)):null,Zt=null===(Se=null===(Y=null==gt?void 0:gt.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===Se?void 0:Se[1],fn=Zt?(0,O.aw)(Zt):null;return fn?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:fn,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:Ke,postBody:null}}return null}(It,Me.url)),Y.onEvent(Dn||Kt())});return function(It){return zn.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,Zt);const fn=Ke,bn=`${Vt.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var zn=(0,c.Z)(function*(Me){if(Me.toLowerCase().startsWith(bn)&&Zt({url:Me}),"function"==typeof fn)try{fn(Me)}catch(It){console.error(It)}});return function(Me){return zn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(J){var Y=this;return(0,c.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,Y,Se,Ke){var Vt=this;return(0,c.Z)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openPopup(J,Y,Se,Ke)})()}_openRedirect(J,Y,Se,Ke){var Vt=this;return(0,c.Z)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openRedirect(J,Y,Se,Ke)})()}_isIframeWebStorageSupported(J,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,Y)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return ar()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return at(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,c.Z)(function*(){if(J.underlyingResolver)return;const Y=yield function(){return vt.apply(this,arguments)}();J.underlyingResolver=Y?J.cordovaResolver:J.browserResolver})()}}function ss(de){return de.unwrap()}function rn(de){return pr(de)}function pr(de){const{_tokenResponse:J}=de instanceof oe.ZR?de.customData:de;if(!J)return null;if(!(de instanceof oe.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return O.P.credentialFromResult(de);const Y=J.providerId;if(!Y||Y===O.o.PASSWORD)return null;let Se;switch(Y){case O.o.GOOGLE:Se=O.Q;break;case O.o.FACEBOOK:Se=O.N;break;case O.o.GITHUB:Se=O.T;break;case O.o.TWITTER:Se=O.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:Vt,oauthTokenSecret:gt,pendingToken:Zt,nonce:fn}=J;return Vt||gt||Ke||Zt?Zt?Y.startsWith("saml.")?O.aL._create(Y,Zt):O.J._fromParams({providerId:Y,signInMethod:Y,pendingToken:Zt,idToken:Ke,accessToken:Vt}):new O.U(Y).credential({idToken:Ke,accessToken:Vt,rawNonce:fn}):null}return de instanceof oe.ZR?Se.credentialFromError(de):Se.credentialFromResult(de)}function tr(de,J){return J.catch(Y=>{throw Y instanceof oe.ZR&&function(de,J){var Y;const Se=null===(Y=J.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===J.code)J.resolver=new Q(de,O.an(de,J));else if(Se){const Ke=pr(J),Vt=J;Ke&&(Vt.credential=Ke,Vt.tenantId=Se.tenantId||void 0,Vt.email=Se.email||void 0,Vt.phoneNumber=Se.phoneNumber||void 0)}}(de,Y),Y}).then(Y=>{const Ke=Y.user;return{operationType:Y.operationType,credential:rn(Y),additionalUserInfo:O.al(Y),user:Ee.getOrCreate(Ke)}})}function W(de,J){return H.apply(this,arguments)}function H(){return(H=(0,c.Z)(function*(de,J){const Y=yield J;return{verificationId:Y.verificationId,confirm:Se=>tr(de,Y.confirm(Se))}})).apply(this,arguments)}class Q{constructor(J,Y){this.resolver=Y,this.auth=J.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return tr(ss(this.auth),this.resolver.resolveSignIn(J))}}class Ee{constructor(J){this._delegate=J,this.multiFactor=O.ao(J)}static getOrCreate(J){return Ee.USER_MAP.has(J)||Ee.USER_MAP.set(J,new Ee(J)),Ee.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var Y=this;return(0,c.Z)(function*(){return tr(Y.auth,O.Z(Y._delegate,J))})()}linkWithPhoneNumber(J,Y){var Se=this;return(0,c.Z)(function*(){return W(Se.auth,O.l(Se._delegate,J,Y))})()}linkWithPopup(J){var Y=this;return(0,c.Z)(function*(){return tr(Y.auth,O.d(Y._delegate,J,pt))})()}linkWithRedirect(J){var Y=this;return(0,c.Z)(function*(){return yield $n(O.aE(Y.auth)),O.g(Y._delegate,J,pt)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var Y=this;return(0,c.Z)(function*(){return tr(Y.auth,O._(Y._delegate,J))})()}reauthenticateWithPhoneNumber(J,Y){return W(this.auth,O.r(this._delegate,J,Y))}reauthenticateWithPopup(J){return tr(this.auth,O.e(this._delegate,J,pt))}reauthenticateWithRedirect(J){var Y=this;return(0,c.Z)(function*(){return yield $n(O.aE(Y.auth)),O.h(Y._delegate,J,pt)})()}sendEmailVerification(J){return O.ab(this._delegate,J)}unlink(J){var Y=this;return(0,c.Z)(function*(){return yield O.ak(Y._delegate,J),Y})()}updateEmail(J){return O.ag(this._delegate,J)}updatePassword(J){return O.ah(this._delegate,J)}updatePhoneNumber(J){return O.u(this._delegate,J)}updateProfile(J){return O.af(this._delegate,J)}verifyBeforeUpdateEmail(J,Y){return O.ac(this._delegate,J,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ee.USER_MAP=new WeakMap;const $=O.ax;let re=(()=>{class de{constructor(Y,Se){if(this.app=Y,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=Y.options;$(Ke,"invalid-api-key",{appName:Y.name}),$(Ke,"invalid-api-key",{appName:Y.name});const Vt="undefined"!=typeof window?pt:void 0;this._delegate=Se.initialize({options:{persistence:rt(Ke,Y.name),popupRedirectResolver:Vt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ee.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,Se){O.G(this._delegate,Y,Se)}applyActionCode(Y){return O.a2(this._delegate,Y)}checkActionCode(Y){return O.a3(this._delegate,Y)}confirmPasswordReset(Y,Se){return O.a1(this._delegate,Y,Se)}createUserWithEmailAndPassword(Y,Se){var Ke=this;return(0,c.Z)(function*(){return tr(Ke._delegate,O.a5(Ke._delegate,Y,Se))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return O.aa(this._delegate,Y)}isSignInWithEmailLink(Y){return O.a8(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,c.Z)(function*(){$(Oe(),Y._delegate,"operation-not-supported-in-this-environment");const Se=yield O.j(Y._delegate,pt);return Se?tr(Y._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function(de,J){(0,O.aE)(de)._logFramework(J)}(this._delegate,Y)}onAuthStateChanged(Y,Se,Ke){const{next:Vt,error:gt,complete:Zt}=ke(Y,Se,Ke);return this._delegate.onAuthStateChanged(Vt,gt,Zt)}onIdTokenChanged(Y,Se,Ke){const{next:Vt,error:gt,complete:Zt}=ke(Y,Se,Ke);return this._delegate.onIdTokenChanged(Vt,gt,Zt)}sendSignInLinkToEmail(Y,Se){return O.a7(this._delegate,Y,Se)}sendPasswordResetEmail(Y,Se){return O.a0(this._delegate,Y,Se||void 0)}setPersistence(Y){var Se=this;return(0,c.Z)(function*(){let Ke;switch(function(de,J){lr(Object.values(Fn).includes(J),de,"invalid-persistence-type"),(0,oe.b$)()?lr(J!==Fn.SESSION,de,"unsupported-persistence-type"):(0,oe.UG)()?lr(J===Fn.NONE,de,"unsupported-persistence-type"):Xr()?lr(J===Fn.NONE||J===Fn.LOCAL&&(0,oe.hl)(),de,"unsupported-persistence-type"):lr(J===Fn.NONE||Jr(),de,"unsupported-persistence-type")}(Se._delegate,Y),Y){case Fn.SESSION:Ke=O.a;break;case Fn.LOCAL:Ke=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case Fn.NONE:Ke=O.L;break;default:return O.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return tr(this._delegate,O.X(this._delegate))}signInWithCredential(Y){return tr(this._delegate,O.Y(this._delegate,Y))}signInWithCustomToken(Y){return tr(this._delegate,O.$(this._delegate,Y))}signInWithEmailAndPassword(Y,Se){return tr(this._delegate,O.a6(this._delegate,Y,Se))}signInWithEmailLink(Y,Se){return tr(this._delegate,O.a9(this._delegate,Y,Se))}signInWithPhoneNumber(Y,Se){return W(this._delegate,O.s(this._delegate,Y,Se))}signInWithPopup(Y){var Se=this;return(0,c.Z)(function*(){return $(Oe(),Se._delegate,"operation-not-supported-in-this-environment"),tr(Se._delegate,O.c(Se._delegate,Y,pt))})()}signInWithRedirect(Y){var Se=this;return(0,c.Z)(function*(){return $(Oe(),Se._delegate,"operation-not-supported-in-this-environment"),yield $n(Se._delegate),O.f(Se._delegate,Y,pt)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return O.a4(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=Fn,de})();function ke(de,J,Y){let Se=de;"function"!=typeof de&&({next:Se,error:J,complete:Y}=de);const Ke=Se;return{next:gt=>Ke(gt&&Ee.getOrCreate(gt)),error:J,complete:Y}}function rt(de,J){const Y=function(de,J){const Y=hn();if(!Y)return[];const Se=O.az(ur,de,J);switch(Y.getItem(Se)){case Fn.NONE:return[O.L];case Fn.LOCAL:return[O.i,O.a];case Fn.SESSION:return[O.a];default:return[]}}(de,J);if("undefined"!=typeof self&&!Y.includes(O.i)&&Y.push(O.i),"undefined"!=typeof window)for(const Se of[O.b,O.a])Y.includes(Se)||Y.push(Se);return Y.includes(O.L)||Y.push(O.L),Y}class Mt{constructor(){this.providerId="phone",this._delegate=new O.P(ss(j.Z.auth()))}static credential(J,Y){return O.P.credential(J,Y)}verifyPhoneNumber(J,Y){return this._delegate.verifyPhoneNumber(J,Y)}unwrap(){return this._delegate}}Mt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Mt.PROVIDER_ID=O.P.PROVIDER_ID;const Rt=O.ax;var de;(de=j.Z).INTERNAL.registerComponent(new ie.wA("auth-compat",J=>{const Y=J.getProvider("app-compat").getImmediate(),Se=J.getProvider("auth");return new re(Y,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:Mt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(J,Y,Se=j.Z.app()){var Ke;Rt(null===(Ke=Se.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new O.R(J,Y,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.W,Auth:re,AuthCredential:O.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.14")},8305:(it,Ce,P)=>{P.d(Ce,{y:()=>z});var c=P(584),j=P(7908),O=P(4816),oe=P(4623);var ie=P(5367),ue=P(5044),ge=P(8706);let z=(()=>{class xe{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const Ue=new xe;return Ue.source=this,Ue.operator=ze,Ue}subscribe(ze,Ue,se){const De=function(xe){return xe&&xe instanceof c.Lv||function(xe){return xe&&(0,ue.m)(xe.next)&&(0,ue.m)(xe.error)&&(0,ue.m)(xe.complete)}(xe)&&(0,j.Nn)(xe)}(ze)?ze:new c.Hp(ze,Ue,se);return(0,ge.x)(()=>{const{operator:Be,source:je}=this;De.add(Be?Be.call(De,je):je?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(ze){try{return this._subscribe(ze)}catch(Ue){ze.error(Ue)}}forEach(ze,Ue){return new(Ue=q(Ue))((se,De)=>{let Be;Be=this.subscribe(je=>{try{ze(je)}catch(ct){De(ct),null==Be||Be.unsubscribe()}},De,se)})}_subscribe(ze){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(ze)}[O.L](){return this}pipe(...ze){return function(xe){return 0===xe.length?oe.y:1===xe.length?xe[0]:function(ze){return xe.reduce((Ue,se)=>se(Ue),ze)}}(ze)(this)}toPromise(ze){return new(ze=q(ze))((Ue,se)=>{let De;this.subscribe(Be=>De=Be,Be=>se(Be),()=>Ue(De))})}}return xe.create=$e=>new xe($e),xe})();function q(xe){var $e;return null!==($e=null!=xe?xe:ie.v.Promise)&&void 0!==$e?$e:Promise}},273:(it,Ce,P)=>{P.d(Ce,{x:()=>ie});var c=P(8305),j=P(7908);const oe=(0,P(4893).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=P(3980),we=P(8706);let ie=(()=>{class ge extends c.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ae=new ue(this,this);return ae.operator=q,ae}_throwIfClosed(){if(this.closed)throw new oe}next(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ae=this.observers.slice();for(const We of ae)We.next(q)}})}error(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ae}=this;for(;ae.length;)ae.shift().error(q)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ae,isStopped:We,observers:xe}=this;return ae||We?j.Lc:(xe.push(q),new j.w0(()=>(0,he.P)(xe,q)))}_checkFinalizedStatuses(q){const{hasError:ae,thrownError:We,isStopped:xe}=this;ae?q.error(We):xe&&q.complete()}asObservable(){const q=new c.y;return q.source=this,q}}return ge.create=(z,q)=>new ue(z,q),ge})();class ue extends ie{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ae;null===(ae=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ae||ae.call(q,z)}error(z){var q,ae;null===(ae=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ae||ae.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ae;return null!==(ae=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ae?ae:j.Lc}}},584:(it,Ce,P)=>{P.d(Ce,{Hp:()=>We,Lv:()=>ae});var c=P(5044),j=P(7908),O=P(5367),oe=P(5160),he=P(6921);const we=ge("C",void 0,void 0);function ge(se,De,Be){return{kind:se,value:De,error:Be}}var z=P(2496),q=P(8706);class ae extends j.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,j.Nn)(De)&&De.add(this)):this.destination=Ue}static create(De,Be,je){return new We(De,Be,je)}next(De){this.isStopped?ze(ge("N",De,void 0),this):this._next(De)}error(De){this.isStopped?ze(ge("E",void 0,De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?ze(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class We extends ae{constructor(De,Be,je){let ct;if(super(),(0,c.m)(De))ct=De;else if(De){let Fe;({next:ct,error:Be,complete:je}=De),this&&O.v.useDeprecatedNextContext?(Fe=Object.create(De),Fe.unsubscribe=()=>this.unsubscribe()):Fe=De,ct=null==ct?void 0:ct.bind(Fe),Be=null==Be?void 0:Be.bind(Fe),je=null==je?void 0:je.bind(Fe)}this.destination={next:ct?xe(ct):he.Z,error:xe(null!=Be?Be:$e),complete:je?xe(je):he.Z}}}function xe(se,De){return(...Be)=>{try{se(...Be)}catch(je){O.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(je):(0,oe.h)(je)}}}function $e(se){throw se}function ze(se,De){const{onStoppedNotification:Be}=O.v;Be&&z.z.setTimeout(()=>Be(se,De))}const Ue={closed:!0,next:he.Z,error:$e,complete:he.Z}},7908:(it,Ce,P)=>{P.d(Ce,{Lc:()=>we,w0:()=>he,Nn:()=>ie});var c=P(5044);const O=(0,P(4893).d)(ge=>function(q){ge(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ae,We)=>`${We+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var oe=P(3980);class he{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const xe of q)xe.remove(this);else q.remove(this);const{initialTeardown:ae}=this;if((0,c.m)(ae))try{ae()}catch(xe){z=xe instanceof O?xe.errors:[xe]}const{_teardowns:We}=this;if(We){this._teardowns=null;for(const xe of We)try{ue(xe)}catch($e){z=null!=z?z:[],$e instanceof O?z=[...z,...$e.errors]:z.push($e)}}if(z)throw new O(z)}}add(z){var q;if(z&&z!==this)if(this.closed)ue(z);else{if(z instanceof he){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._teardowns=null!==(q=this._teardowns)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,oe.P)(q,z)}remove(z){const{_teardowns:q}=this;q&&(0,oe.P)(q,z),z instanceof he&&z._removeParent(this)}}he.EMPTY=(()=>{const ge=new he;return ge.closed=!0,ge})();const we=he.EMPTY;function ie(ge){return ge instanceof he||ge&&"closed"in ge&&(0,c.m)(ge.remove)&&(0,c.m)(ge.add)&&(0,c.m)(ge.unsubscribe)}function ue(ge){(0,c.m)(ge)?ge():ge.unsubscribe()}},5367:(it,Ce,P)=>{P.d(Ce,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(it,Ce,P)=>{P.d(Ce,{E:()=>j});const j=new(P(8305).y)(he=>he.complete())},5947:(it,Ce,P)=>{P.d(Ce,{D:()=>ct});var c=P(9985),j=P(4763),O=P(5222),we=P(8305),ue=P(5497),ge=P(5044),z=P(8395);function ae(Fe,Ze){if(!Fe)throw new Error("Iterable cannot be null");return new we.y(Je=>{(0,z.f)(Je,Ze,()=>{const Ie=Fe[Symbol.asyncIterator]();(0,z.f)(Je,Ze,()=>{Ie.next().then(K=>{K.done?Je.complete():Je.next(K.value)})},0,!0)})})}var We=P(1073),xe=P(2442),$e=P(1537),ze=P(2317),Ue=P(9908),se=P(3754),De=P(7751);function ct(Fe,Ze){return Ze?function(Fe,Ze){if(null!=Fe){if((0,We.c)(Fe))return function(Fe,Ze){return(0,c.Xf)(Fe).pipe((0,O.R)(Ze),(0,j.Q)(Ze))}(Fe,Ze);if((0,$e.z)(Fe))return function(Fe,Ze){return new we.y(Je=>{let Ie=0;return Ze.schedule(function(){Ie===Fe.length?Je.complete():(Je.next(Fe[Ie++]),Je.closed||this.schedule())})})}(Fe,Ze);if((0,xe.t)(Fe))return function(Fe,Ze){return(0,c.Xf)(Fe).pipe((0,O.R)(Ze),(0,j.Q)(Ze))}(Fe,Ze);if((0,Ue.D)(Fe))return ae(Fe,Ze);if((0,ze.T)(Fe))return function(Fe,Ze){return new we.y(Je=>{let Ie;return(0,z.f)(Je,Ze,()=>{Ie=Fe[ue.h](),(0,z.f)(Je,Ze,()=>{let K,ne;try{({value:K,done:ne}=Ie.next())}catch(fe){return void Je.error(fe)}ne?Je.complete():Je.next(K)},0,!0)}),()=>(0,ge.m)(null==Ie?void 0:Ie.return)&&Ie.return()})}(Fe,Ze);if((0,De.L)(Fe))return function(Fe,Ze){return ae((0,De.Q)(Fe),Ze)}(Fe,Ze)}throw(0,se.z)(Fe)}(Fe,Ze):(0,c.Xf)(Fe)}},9985:(it,Ce,P)=>{P.d(Ce,{Xf:()=>We});var c=P(9162),j=P(1537),O=P(2442),oe=P(8305),he=P(1073),we=P(9908),ie=P(3754),ue=P(2317),ge=P(7751),z=P(5044),q=P(5160),ae=P(4816);function We(je){if(je instanceof oe.y)return je;if(null!=je){if((0,he.c)(je))return function(je){return new oe.y(ct=>{const Fe=je[ae.L]();if((0,z.m)(Fe.subscribe))return Fe.subscribe(ct);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(je);if((0,j.z)(je))return function(je){return new oe.y(ct=>{for(let Fe=0;Fe<je.length&&!ct.closed;Fe++)ct.next(je[Fe]);ct.complete()})}(je);if((0,O.t)(je))return function(je){return new oe.y(ct=>{je.then(Fe=>{ct.closed||(ct.next(Fe),ct.complete())},Fe=>ct.error(Fe)).then(null,q.h)})}(je);if((0,we.D)(je))return se(je);if((0,ue.T)(je))return function(je){return new oe.y(ct=>{for(const Fe of je)if(ct.next(Fe),ct.closed)return;ct.complete()})}(je);if((0,ge.L)(je))return function(je){return se((0,ge.Q)(je))}(je)}throw(0,ie.z)(je)}function se(je){return new oe.y(ct=>{(function(je,ct){var Fe,Ze,Je,Ie;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Fe=(0,c.KL)(je);!(Ze=yield Fe.next()).done;)if(ct.next(Ze.value),ct.closed)return}catch(K){Je={error:K}}finally{try{Ze&&!Ze.done&&(Ie=Fe.return)&&(yield Ie.call(Fe))}finally{if(Je)throw Je.error}}ct.complete()})})(je,ct).catch(Fe=>ct.error(Fe))})}},3719:(it,Ce,P)=>{P.d(Ce,{T:()=>we});var c=P(5373),j=P(9985),O=P(5583),oe=P(7613),he=P(5947);function we(...ie){const ue=(0,oe.yG)(ie),ge=(0,oe._6)(ie,1/0),z=ie;return z.length?1===z.length?(0,j.Xf)(z[0]):(0,c.J)(ge)((0,he.D)(z,ue)):O.E}},8889:(it,Ce,P)=>{P.d(Ce,{Q:()=>j});var c=P(584);class j extends c.Lv{constructor(oe,he,we,ie,ue){super(oe),this.onFinalize=ue,this._next=he?function(ge){try{he(ge)}catch(z){oe.error(z)}}:super._next,this._error=ie?function(ge){try{ie(ge)}catch(z){oe.error(z)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(ge){oe.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;const{closed:he}=this;super.unsubscribe(),!he&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}},4753:(it,Ce,P)=>{P.d(Ce,{U:()=>O});var c=P(9947),j=P(8889);function O(oe,he){return(0,c.e)((we,ie)=>{let ue=0;we.subscribe(new j.Q(ie,ge=>{ie.next(oe.call(he,ge,ue++))}))})}},5373:(it,Ce,P)=>{P.d(Ce,{J:()=>O});var c=P(5724),j=P(4623);function O(oe=1/0){return(0,c.z)(j.y,oe)}},5724:(it,Ce,P)=>{P.d(Ce,{z:()=>ue});var c=P(4753),j=P(9985),O=P(9947),he=(P(8395),P(8889)),ie=P(5044);function ue(ge,z,q=1/0){return(0,ie.m)(z)?ue((ae,We)=>(0,c.U)((xe,$e)=>z(ae,xe,We,$e))((0,j.Xf)(ge(ae,We))),q):("number"==typeof z&&(q=z),(0,O.e)((ae,We)=>function(ge,z,q,ae,We,xe,$e,ze){const Ue=[];let se=0,De=0,Be=!1;const je=()=>{Be&&!Ue.length&&!se&&z.complete()},ct=Ze=>se<ae?Fe(Ze):Ue.push(Ze),Fe=Ze=>{se++;let Je=!1;(0,j.Xf)(q(Ze,De++)).subscribe(new he.Q(z,Ie=>{z.next(Ie)},()=>{Je=!0},void 0,()=>{if(Je)try{for(se--;Ue.length&&se<ae;){const Ie=Ue.shift();Fe(Ie)}je()}catch(Ie){z.error(Ie)}}))};return ge.subscribe(new he.Q(z,ct,()=>{Be=!0,je()})),()=>{}}(ae,We,ge,q)))}},4763:(it,Ce,P)=>{P.d(Ce,{Q:()=>oe});var c=P(8395),j=P(9947),O=P(8889);function oe(he,we=0){return(0,j.e)((ie,ue)=>{ie.subscribe(new O.Q(ue,ge=>(0,c.f)(ue,he,()=>ue.next(ge),we),()=>(0,c.f)(ue,he,()=>ue.complete(),we),ge=>(0,c.f)(ue,he,()=>ue.error(ge),we)))})}},3174:(it,Ce,P)=>{P.d(Ce,{B:()=>we});var c=P(5947),j=P(9468),O=P(273),oe=P(584),he=P(9947);function we(ue={}){const{connector:ge=(()=>new O.x),resetOnError:z=!0,resetOnComplete:q=!0,resetOnRefCountZero:ae=!0}=ue;return We=>{let xe=null,$e=null,ze=null,Ue=0,se=!1,De=!1;const Be=()=>{null==$e||$e.unsubscribe(),$e=null},je=()=>{Be(),xe=ze=null,se=De=!1},ct=()=>{const Fe=xe;je(),null==Fe||Fe.unsubscribe()};return(0,he.e)((Fe,Ze)=>{Ue++,!De&&!se&&Be();const Je=ze=null!=ze?ze:ge();Ze.add(()=>{Ue--,0===Ue&&!De&&!se&&($e=ie(ct,ae))}),Je.subscribe(Ze),xe||(xe=new oe.Hp({next:Ie=>Je.next(Ie),error:Ie=>{De=!0,Be(),$e=ie(je,z,Ie),Je.error(Ie)},complete:()=>{se=!0,Be(),$e=ie(je,q),Je.complete()}}),(0,c.D)(Fe).subscribe(xe))})(We)}}function ie(ue,ge,...z){return!0===ge?(ue(),null):!1===ge?null:ge(...z).pipe((0,j.q)(1)).subscribe(()=>ue())}},5222:(it,Ce,P)=>{P.d(Ce,{R:()=>j});var c=P(9947);function j(O,oe=0){return(0,c.e)((he,we)=>{we.add(O.schedule(()=>he.subscribe(we),oe))})}},9468:(it,Ce,P)=>{P.d(Ce,{q:()=>oe});var c=P(5583),j=P(9947),O=P(8889);function oe(he){return he<=0?()=>c.E:(0,j.e)((we,ie)=>{let ue=0;we.subscribe(new O.Q(ie,ge=>{++ue<=he&&(ie.next(ge),he<=ue&&ie.complete())}))})}},7384:(it,Ce,P)=>{P.d(Ce,{b:()=>he});var c=P(5044),j=P(9947),O=P(8889),oe=P(4623);function he(we,ie,ue){const ge=(0,c.m)(we)||ie||ue?{next:we,error:ie,complete:ue}:we;return ge?(0,j.e)((z,q)=>{var ae;null===(ae=ge.subscribe)||void 0===ae||ae.call(ge);let We=!0;z.subscribe(new O.Q(q,xe=>{var $e;null===($e=ge.next)||void 0===$e||$e.call(ge,xe),q.next(xe)},()=>{var xe;We=!1,null===(xe=ge.complete)||void 0===xe||xe.call(ge),q.complete()},xe=>{var $e;We=!1,null===($e=ge.error)||void 0===$e||$e.call(ge,xe),q.error(xe)},()=>{var xe,$e;We&&(null===(xe=ge.unsubscribe)||void 0===xe||xe.call(ge)),null===($e=ge.finalize)||void 0===$e||$e.call(ge)}))}):oe.y}},2869:(it,Ce,P)=>{P.d(Ce,{o:()=>he});var c=P(7908);class j extends c.w0{constructor(ie,ue){super()}schedule(ie,ue=0){return this}}const O={setInterval(...we){const{delegate:ie}=O;return((null==ie?void 0:ie.setInterval)||setInterval)(...we)},clearInterval(we){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(we)},delegate:void 0};var oe=P(3980);class he extends j{constructor(ie,ue){super(ie,ue),this.scheduler=ie,this.work=ue,this.pending=!1}schedule(ie,ue=0){if(this.closed)return this;this.state=ie;const ge=this.id,z=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(z,ge,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(z,this.id,ue),this}requestAsyncId(ie,ue,ge=0){return O.setInterval(ie.flush.bind(ie,this),ge)}recycleAsyncId(ie,ue,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ue;O.clearInterval(ue)}execute(ie,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ie,ue);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ue){let z,ge=!1;try{this.work(ie)}catch(q){ge=!0,z=q||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ue}=this,{actions:ge}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ge,this),null!=ie&&(this.id=this.recycleAsyncId(ue,ie,null)),this.delay=null,super.unsubscribe()}}}},8843:(it,Ce,P)=>{P.d(Ce,{v:()=>O});var c=P(1733);class j{constructor(he,we=j.now){this.schedulerActionCtor=he,this.now=we}schedule(he,we=0,ie){return new this.schedulerActionCtor(this,he).schedule(ie,we)}}j.now=c.l.now;class O extends j{constructor(he,we=j.now){super(he,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:we}=this;if(this._active)return void we.push(he);let ie;this._active=!0;do{if(ie=he.execute(he.state,he.delay))break}while(he=we.shift());if(this._active=!1,ie){for(;he=we.shift();)he.unsubscribe();throw ie}}}},2210:(it,Ce,P)=>{P.d(Ce,{z:()=>O,P:()=>oe});var c=P(2869);const O=new(P(8843).v)(c.o),oe=O},1733:(it,Ce,P)=>{P.d(Ce,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},2496:(it,Ce,P)=>{P.d(Ce,{z:()=>c});const c={setTimeout(...j){const{delegate:O}=c;return((null==O?void 0:O.setTimeout)||setTimeout)(...j)},clearTimeout(j){const{delegate:O}=c;return((null==O?void 0:O.clearTimeout)||clearTimeout)(j)},delegate:void 0}},5497:(it,Ce,P)=>{P.d(Ce,{h:()=>j});const j="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(it,Ce,P)=>{P.d(Ce,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(it,Ce,P)=>{P.d(Ce,{jO:()=>oe,yG:()=>he,_6:()=>we});var c=P(5044),j=P(7398);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,c.m)(O(ie))?ie.pop():void 0}function he(ie){return(0,j.K)(O(ie))?ie.pop():void 0}function we(ie,ue){return"number"==typeof O(ie)?ie.pop():ue}},3980:(it,Ce,P)=>{function c(j,O){if(j){const oe=j.indexOf(O);0<=oe&&j.splice(oe,1)}}P.d(Ce,{P:()=>c})},4893:(it,Ce,P)=>{function c(j){const oe=j(he=>{Error.call(he),he.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Ce,{d:()=>c})},8706:(it,Ce,P)=>{P.d(Ce,{x:()=>O,O:()=>oe});var c=P(5367);let j=null;function O(he){if(c.v.useDeprecatedSynchronousErrorHandling){const we=!j;if(we&&(j={errorThrown:!1,error:null}),he(),we){const{errorThrown:ie,error:ue}=j;if(j=null,ie)throw ue}}else he()}function oe(he){c.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=he)}},8395:(it,Ce,P)=>{function c(j,O,oe,he=0,we=!1){const ie=O.schedule(function(){oe(),we?j.add(this.schedule(null,he)):this.unsubscribe()},he);if(j.add(ie),!we)return ie}P.d(Ce,{f:()=>c})},4623:(it,Ce,P)=>{function c(j){return j}P.d(Ce,{y:()=>c})},1537:(it,Ce,P)=>{P.d(Ce,{z:()=>c});const c=j=>j&&"number"==typeof j.length&&"function"!=typeof j},9908:(it,Ce,P)=>{P.d(Ce,{D:()=>j});var c=P(5044);function j(O){return Symbol.asyncIterator&&(0,c.m)(null==O?void 0:O[Symbol.asyncIterator])}},5044:(it,Ce,P)=>{function c(j){return"function"==typeof j}P.d(Ce,{m:()=>c})},1073:(it,Ce,P)=>{P.d(Ce,{c:()=>O});var c=P(4816),j=P(5044);function O(oe){return(0,j.m)(oe[c.L])}},2317:(it,Ce,P)=>{P.d(Ce,{T:()=>O});var c=P(5497),j=P(5044);function O(oe){return(0,j.m)(null==oe?void 0:oe[c.h])}},2442:(it,Ce,P)=>{P.d(Ce,{t:()=>j});var c=P(5044);function j(O){return(0,c.m)(null==O?void 0:O.then)}},7751:(it,Ce,P)=>{P.d(Ce,{Q:()=>O,L:()=>oe});var c=P(9162),j=P(5044);function O(he){return(0,c.FC)(this,arguments,function*(){const ie=he.getReader();try{for(;;){const{value:ue,done:ge}=yield(0,c.qq)(ie.read());if(ge)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ue)}}finally{ie.releaseLock()}})}function oe(he){return(0,j.m)(null==he?void 0:he.getReader)}},7398:(it,Ce,P)=>{P.d(Ce,{K:()=>j});var c=P(5044);function j(O){return O&&(0,c.m)(O.schedule)}},9947:(it,Ce,P)=>{P.d(Ce,{A:()=>j,e:()=>O});var c=P(5044);function j(oe){return(0,c.m)(null==oe?void 0:oe.lift)}function O(oe){return he=>{if(j(he))return he.lift(function(we){try{return oe(we,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(it,Ce,P)=>{function c(){}P.d(Ce,{Z:()=>c})},5160:(it,Ce,P)=>{P.d(Ce,{h:()=>O});var c=P(5367),j=P(2496);function O(oe){j.z.setTimeout(()=>{const{onUnhandledError:he}=c.v;if(!he)throw oe;he(oe)})}},3754:(it,Ce,P)=>{function c(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>c})},2458:(it,Ce,P)=>{var c=P(3668);let j=null;function O(){return j}const ie=new c.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.LFG)(q)},providedIn:"platform"}),n})();const z=new c.OlP("Location Initialized");let q=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ae()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ae()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new q((0,c.LFG)(ie))},providedIn:"platform"}),n})();function ae(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function(n){const e=(0,c.LFG)(ie).location;return new Be((0,c.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const De=new c.OlP("appBaseHref");let Be=(()=>{class n extends Ue{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+ze(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+ze(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(De,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+ze(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+ze(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(De,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ct=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=$e(Je(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ze,n.joinWithSlash=xe,n.stripTrailingSlash=$e,n.\u0275fac=function(t){return new(t||n)(c.LFG(Ue),c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new ct((0,c.LFG)(Ue),(0,c.LFG)(ue))},providedIn:"root"}),n})();function Je(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Zero=0]="Zero",ne[ne.One=1]="One",ne[ne.Two=2]="Two",ne[ne.Few=3]="Few",ne[ne.Many=4]="Many",ne[ne.Other=5]="Other",ne))();const Xr=c.kL8;class zi{}let wn=(()=>{class n extends zi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Xr(r||this.locale)(t)){case ne.Zero:return"zero";case ne.One:return"one";case ne.Two:return"two";case ne.Few:return"few";case ne.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function As(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Lu{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _o=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,u)=>{if(null==i.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new Lu(null,this._ngForOf,-1,-1),null===u?void 0:u),m=new Va(i,h);r.push(m)}else if(null==u)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const h=this._viewContainer.get(s);this._viewContainer.move(h,u);const m=new Va(i,h);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const u=this._viewContainer.get(i);u.context.index=i,u.context.count=s,u.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Va{constructor(e,t){this.record=e,this.view=t}}let ei=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ws("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ws("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wl{constructor(){this.$implicit=null,this.ngIf=null}}function Ws(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class nr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let El=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Ti=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new nr(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(El,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),mi=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Hr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:zi,useClass:wn}]}),n})();const Dl="browser";function bo(n){return n===Dl}function gi(n){return"server"===n}let xh=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Hu((0,c.LFG)(ie),window)}),n})();class Hu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Gu(this.window.history)||Gu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Gu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Al{}class Ml extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ml,j||(j=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ks=Ks||document.querySelector("base"),Ks?Ks.getAttribute("href"):null);return null==t?null:function(n){cr=cr||document.createElement("a"),cr.setAttribute("href",n);const e=cr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return As(document.cookie,e)}}let cr,Ks=null;const Wo=new c.OlP("TRANSITION_ID"),pn=[{provide:c.ip1,useFactory:function(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Wo,ie,c.zs3],multi:!0}];class xl{static init(){(0,c.VLi)(new xl)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(m){u=u||m,s--,0==s&&r(u)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ls=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const kl=new c.OlP("EventManagerPlugins");let Or=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kl),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Rl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Eo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),bt=(()=>{class n extends Eo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ni),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ni))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function ni(n){O().remove(n)}const Zo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Nl=/%COMP%/g;function Ms(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ms(n,i,t):(i=i.replace(Nl,n),t.push(i))}return t}function Zn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let us=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Gr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Jc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Fl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ms(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Or),c.LFG(bt),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Gr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Zo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Zo[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Zo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Zn(r)):this.eventManager.addEventListener(e,t,Zn(r))}}class Jc extends Gr{constructor(e,t,r,i){super(e),this.component=r;const s=Ms(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(Nl,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Nl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fl extends Gr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ms(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jo=(()=>{class n extends Rl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Xo=["alt","control","meta","shift"],cs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Co={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ea={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Si=(()=>{class n extends Rl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="";if(Xo.forEach(m=>{const y=r.indexOf(m);y>-1&&(r.splice(y,1),u+=m+".")}),u+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Co.hasOwnProperty(e)&&(e=Co[e]))}return cs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Xo.forEach(s=>{s!=i&&ea[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Vl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Dl},{provide:c.g9A,useValue:function(){Ml.makeCurrent(),xl.init()},multi:!0},{provide:ie,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),na=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:kl,useClass:Jo,multi:!0,deps:[ie,c.R0b,c.Lbi]},{provide:kl,useClass:Si,multi:!0,deps:[ie]},{provide:us,useClass:us,deps:[Or,bt,c.AFp]},{provide:c.FYo,useExisting:us},{provide:Eo,useExisting:bt},{provide:bt,useClass:bt,deps:[ie]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Or,useClass:Or,deps:[kl,c.R0b]},{provide:Al,useClass:ls,deps:[]}];let Ga=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Wo,useExisting:c.AFp},pn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:na,imports:[Hr,c.hGG]}),n})();"undefined"!=typeof window&&window;let Xu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(nd),r},providedIn:"root"}),n})(),nd=(()=>{class n extends Xu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function(n){return new nd(n.get(ie))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var xn=P(5947),Js=P(7613);function Xe(...n){const e=(0,Js.yG)(n);return(0,xn.D)(n,e)}var Bt=P(273);class Pr extends Bt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Yn=P(8305);const{isArray:oa}=Array,{getPrototypeOf:um,prototype:qa,keys:Wl}=Object;function ql(n){if(1===n.length){const e=n[0];if(oa(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&um(n)===qa}(e)){const t=Wl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var hs=P(4623),et=P(4753);const{isArray:ec}=Array;function To(n){return(0,et.U)(e=>function(n,e){return ec(e)?n(...e):n(e)}(n,e))}function Zl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var kn=P(8889),aa=P(8395);function ri(n,e,t){n?(0,aa.f)(t,n,e):e()}const la=(0,P(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var eo=P(5373);function Za(...n){return(0,eo.J)(1)((0,xn.D)(n,(0,Js.yG)(n)))}var Fr=P(9985);function xs(n){return new Yn.y(e=>{(0,Fr.Xf)(n()).subscribe(e)})}var to=P(5583),ks=P(7908),rr=P(9947);function Wi(){return(0,rr.e)((n,e)=>{let t=null;n._refCount++;const r=new kn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ka extends Yn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ks.w0;const t=this.getSubject();e.add(this.source.subscribe(new kn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ks.w0.EMPTY)}return e}refCount(){return Wi()(this)}}function $t(n,e){return(0,rr.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new kn.Q(r,m=>{null==i||i.unsubscribe();let y=0;const C=s++;(0,Fr.Xf)(n(m,C)).subscribe(i=new kn.Q(r,D=>r.next(e?e(m,D,C,y++):D),()=>{i=null,h()}))},()=>{u=!0,h()}))})}var Xn=P(9468);function Mr(...n){const e=(0,Js.yG)(n);return(0,rr.e)((t,r)=>{(e?Za(n,t,e):Za(n,t)).subscribe(r)})}function no(n,e,t,r,i){return(s,u)=>{let h=t,m=e,y=0;s.subscribe(new kn.Q(u,C=>{const D=y++;m=h?n(m,C,D):(h=!0,C),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}function ii(n,e){return(0,rr.e)(no(n,e,arguments.length>=2,!0))}function un(n,e){return(0,rr.e)((t,r)=>{let i=0;t.subscribe(new kn.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function qi(n){return(0,rr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new kn.Q(t,void 0,void 0,u=>{s=(0,Fr.Xf)(n(u,qi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var Rn=P(5724),Ai=P(5044);function Rs(n,e){return(0,Ai.m)(e)?(0,Rn.z)(n,e,1):(0,Rn.z)(n,1)}function Vn(n){return n<=0?()=>to.E:(0,rr.e)((e,t)=>{let r=[];e.subscribe(new kn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ro(n=id){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function id(){return new la}function cm(n){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?un((i,s)=>n(i,s,r)):hs.y,(0,Xn.q)(1),t?cm(e):ro(()=>new la))}var gr=P(7384);function sd(n){return(0,rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Lr{constructor(e,t){this.id=e,this.url=t}}class tc extends Lr{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qn extends Lr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yl extends Lr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ql extends Lr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fh extends Lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lh extends Lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zi extends Lr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fs extends Lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ya extends Lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qa{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class io{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jl{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ja{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class $r{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mi(n){return new $r(n)}const Ns="ngNavigationCancelingError";function Bh(n){const e=Error("NavigationCancelingError: "+n);return e[Ns]=!0,e}function dm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ki(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Do(n[i],e[i]))return!1;return!0}function Do(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function ic(n){return Array.prototype.concat.apply([],n)}function sc(n){return n.length>0?n[n.length-1]:null}function Nn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Yi(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,xn.D)(Promise.resolve(n)):Xe(n)}const eu={exact:function ru(n,e,t){if(!tt(n.segments,e.segments)||!k(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ru(n.children[r],e.children[r],t))return!1;return!0},subset:T},tu={exact:function(n,e){return Ki(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Do(n[t],e[t]))},ignored:()=>!0};function Xa(n,e,t){return eu[t.paths](n.root,e.root,t.matrixParams)&&tu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return S(n,e,e.segments,t)}function S(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!tt(i,t)||e.hasChildren()||!k(i,t,r))}if(n.segments.length===t.length){if(!tt(n.segments,t)||!k(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(tt(n.segments,i)&&k(n.segments,i,r)&&n.children[jt])&&S(n.children[jt],e,s,r)}}function k(n,e,t){return e.every((r,i)=>tu[t](n[i].parameters,r.parameters))}class U{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mi(this.queryParams)),this._queryParamMap}toString(){return Ft.serialize(this)}}class G{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Nn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _r(this)}}class le{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mi(this.parameters)),this._parameterMap}toString(){return Hh(this)}}function tt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ot{}class sn{parse(e){const t=new sw(e);return new U(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${mn(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${_i(t)}=${_i(i)}`).join("&"):`${_i(t)}=${_i(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Ft=new sn;function _r(n){return n.segments.map(e=>Hh(e)).join("/")}function mn(n,e){if(!n.hasChildren())return _r(n);if(e){const t=n.children[jt]?mn(n.children[jt],!1):"",r=[];return Nn(n.children,(i,s)=>{s!==jt&&r.push(`${s}:${mn(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Nn(n.children,(r,i)=>{i===jt&&(t=t.concat(e(r,i)))}),Nn(n.children,(r,i)=>{i!==jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===jt?[mn(n.children[jt],!1)]:[`${i}:${mn(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${_r(n)}/${t[0]}`:`${_r(n)}/(${t.join("//")})`}}function ca(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _i(n){return ca(n).replace(/%3B/gi,";")}function ps(n){return ca(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zr(n){return decodeURIComponent(n)}function da(n){return zr(n.replace(/\+/g,"%20"))}function Hh(n){return`${ps(n.path)}${function(n){return Object.keys(n).map(e=>`;${ps(e)}=${ps(n[e])}`).join("")}(n.parameters)}`}const ha=/^[^\/()?;=#]+/;function fa(n){const e=n.match(ha);return e?e[0]:""}const hm=/^[^=?&#]+/,zh=/^[^&#]+/;class sw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new G([],{}):new G([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new G(e,t)),r}parseSegment(){const e=fa(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new le(zr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fa(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fa(this.remaining);i&&(r=i,this.capture(r))}e[zr(t)]=zr(r)}parseQueryParam(e){const t=function(n){const e=n.match(hm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(zh);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=da(t),s=da(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fa(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=jt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[jt]:new G([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ad{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Wh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qh(e,this._root).map(t=>t.value)}}function Wh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Wh(n,t);if(r)return r}return null}function qh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qh(n,t);if(r.length)return r.unshift(e),r}return[]}class xi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class el extends ad{constructor(e,t){super(e),this.snapshot=t,ud(this,e)}toString(){return this.snapshot.toString()}}function ld(n,e){const t=function(n,e){const u=new iu([],{},{},"",{},jt,e,null,n.root,-1,{});return new ac("",new xi(u,[]))}(n,e),r=new Pr([new le("",{})]),i=new Pr({}),s=new Pr({}),u=new Pr({}),h=new Pr(""),m=new ma(r,i,u,h,s,jt,e,t.root);return m.snapshot=t.root,new el(new xi(m,[]),t)}class ma{constructor(e,t,r,i,s,u,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.U)(e=>Mi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.U)(e=>Mi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:ut(ut({},e.params),t.params),data:ut(ut({},e.data),t.data),resolve:ut(ut({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class iu{constructor(e,t,r,i,s,u,h,m,y,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ac extends ad{constructor(e,t){super(t),this.url=e,ud(this,t)}toString(){return Ao(this._root)}}function ud(n,e){e.value._routerState=n,e.children.forEach(t=>ud(n,t))}function Ao(n){const e=n.children.length>0?` { ${n.children.map(Ao).join(", ")} } `:"";return`${n.value}${e}`}function cd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ki(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ki(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ki(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ki(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function dd(n,e){const t=Ki(n.params,e.params)&&function(n,e){return tt(n,e)&&n.every((t,r)=>Ki(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dd(n.parent,e.parent))}function su(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return su(n,r,i);return su(n,r)})}(n,e,t);return new xi(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>su(n,h)),u}}const r=function(n){return new ma(new Pr(n.url),new Pr(n.params),new Pr(n.queryParams),new Pr(n.fragment),new Pr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>su(n,s));return new xi(r,i)}}function lc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function nl(n){return"object"==typeof n&&null!=n&&n.outlets}function Kh(n,e,t,r,i){let s={};return r&&Nn(r,(u,h)=>{s[h]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`}),new U(t.root===n?e:fm(t.root,n,e),s,i)}function fm(n,e,t){const r={};return Nn(n.children,(i,s)=>{r[s]=i===e?t:fm(i,e,t)}),new G(n.segments,r)}class Yh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(nl);if(i&&i!==sc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function pm(n,e,t){if(n||(n=new G([],{})),0===n.segments.length&&n.hasChildren())return Qh(n,e,t);const r=function(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(nl(h))break;const m=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!au(m,y,u))return s;r+=2}else{if(!au(m,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new G(n.segments.slice(0,r.pathIndex),{});return s.children[jt]=new G(n.segments.slice(r.pathIndex),n.children),Qh(s,0,i)}return r.match&&0===i.length?new G(n.segments,{}):r.match&&!n.hasChildren()?il(n,e,t):r.match?Qh(n,0,i):il(n,e,t)}function Qh(n,e,t){if(0===t.length)return new G(n.segments,{});{const r=function(n){return nl(n[0])?n[0].outlets:{[jt]:n}}(t),i={};return Nn(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=pm(n.children[u],e,s))}),Nn(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new G(n.segments,i)}}function il(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(nl(s)){const m=mm(s.outlets);return new G(r,m)}if(0===i&&lc(t[0])){r.push(new le(n.segments[e].path,Ji(t[0]))),i++;continue}const u=nl(s)?s.outlets[jt]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&lc(h)?(r.push(new le(u,Ji(h))),i+=2):(r.push(new le(u,{})),i++)}return new G(r,{})}function mm(n){const e={};return Nn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=il(new G([],{}),0,t))}),e}function Ji(n){const e={};return Nn(n,(t,r)=>e[r]=`${t}`),e}function au(n,e,t){return n==t.path&&Ki(e,t.parameters)}class _m{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=pa(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Nn(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=pa(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=pa(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=pa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ja(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Vh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(cd(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),cd(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=m,u.outlet&&u.outlet.activateWith(i,m),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class vm{constructor(e,t){this.routes=e,this.module=t}}function ga(n){return"function"==typeof n}function xo(n){return n instanceof U}const _a=Symbol("INITIAL_VALUE");function uc(){return $t(n=>function(...n){const e=(0,Js.yG)(n),t=(0,Js.jO)(n),{args:r,keys:i}=ql(n);if(0===r.length)return(0,xn.D)([],e);const s=new Yn.y(function(n,e,t=hs.y){return r=>{ri(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let m=0;m<i;m++)ri(e,()=>{const y=(0,xn.D)(n[m],e);let C=!1;y.subscribe(new kn.Q(r,D=>{s[m]=D,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Zl(i,u):hs.y));return t?s.pipe(To(t)):s}(n.map(e=>e.pipe((0,Xn.q)(1),Mr(_a)))).pipe(ii((e,t)=>{let r=!1;return t.reduce((i,s,u)=>i!==_a?i:(s===_a&&(r=!0),r||!1!==s&&u!==t.length-1&&!xo(s)?i:s),e)},_a),un(e=>e!==_a),(0,et.U)(e=>xo(e)?e:!0===e),(0,Xn.q)(1)))}class wm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cc,this.attachRef=null}}class cc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new wm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let dc=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new Em(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(cc),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Em{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ma?this.route:e===cc?this.childContexts:this.parent.get(e,t)}}let lu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[dc],encapsulation:2}),n})();function hd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ef(r,cy(e,r))}}function ef(n,e){n.children&&hd(n.children,e)}function cy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ir(n){const e=n.children&&n.children.map(ir),t=e?Ei(ut({},n),{children:e}):ut({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=lu),t}function ms(n){return n.outlet||jt}function b(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}const p={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _(n,e,t){var h;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?ut({},p):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dm)(t,n,e);if(!i)return ut({},p);const s={};Nn(i.posParams,(m,y)=>{s[y]=m.path});const u=i.consumed.length>0?ut(ut({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:u,positionalParamSegments:null!=(h=i.posParams)?h:{}}}function w(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ye(n,e,r)&&ms(r)!==jt)}(n,t,r)){const u=new G(e,function(n,e,t,r){const i={};i[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ms(s)!==jt){const u=new G([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[ms(s)]=u}return i}(n,e,r,new G(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ye(n,e,r))}(n,t,r)){const u=new G(n.segments,function(n,e,t,r,i,s){const u={};for(const h of r)if(Ye(n,t,h)&&!i[ms(h)]){const m=new G([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[ms(h)]=m}return ut(ut({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new G(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Ye(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ve(n,e,t,r){return!!(ms(n)===r||r!==jt&&Ye(e,t,n))&&("**"===n.path||_(e,n,t).matched)}function _t(n,e,t){return 0===e.length&&!n.children[t]}class xt{constructor(e){this.segmentGroup=e||null}}class Cn{constructor(e){this.urlTree=e}}function xr(n){return new Yn.y(e=>e.error(new xt(n)))}function so(n){return new Yn.y(e=>e.error(new Cn(n)))}function kr(n){return new Yn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Cm{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=w(this.urlTree.root,[],[],this.config).segmentGroup,t=new G(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,jt).pipe((0,et.U)(s=>this.createUrlTree(hc(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qi(s=>{if(s instanceof Cn)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof xt?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,jt).pipe((0,et.U)(i=>this.createUrlTree(hc(i),e.queryParams,e.fragment))).pipe(qi(i=>{throw i instanceof xt?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new G([],{[jt]:e}):e;return new U(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,et.U)(s=>new G([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,xn.D)(i).pipe(Rs(s=>{const u=r.children[s],h=b(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,et.U)(m=>({segment:m,outlet:s})))}),ii((s,u)=>(s[u.outlet]=u.segment,s),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?un((i,s)=>n(i,s,r)):hs.y,Vn(1),t?cm(e):ro(()=>new la))}())}expandSegment(e,t,r,i,s,u){return(0,xn.D)(r).pipe(Rs(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe(qi(y=>{if(y instanceof xt)return Xe(null);throw y}))),ua(h=>!!h),qi((h,m)=>{if(h instanceof la||"EmptyError"===h.name){if(_t(t,i,s))return Xe(new G([],{}));throw new xt(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return Ve(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):xr(t):xr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?so(s):this.lineralizeSegments(r,s).pipe((0,Rn.z)(u=>{const h=new G(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:m,lastChild:y,positionalParamSegments:C}=_(t,i,s);if(!h)return xr(t);const D=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?so(D):this.lineralizeSegments(i,D).pipe((0,Rn.z)(R=>this.expandSegment(e,t,r,R.concat(s.slice(y)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,et.U)(R=>(r._loadedConfig=R,new G(i,{})))):Xe(new G(i,{}));const{matched:u,consumedSegments:h,lastChild:m}=_(t,r,i);if(!u)return xr(t);const y=i.slice(m);return this.getChildConfig(e,r,i).pipe((0,Rn.z)(D=>{const R=D.module,L=D.routes,{segmentGroup:B,slicedSegments:ee}=w(t,h,y,L),be=new G(B.segments,B.children);if(0===ee.length&&be.hasChildren())return this.expandChildren(R,L,be).pipe((0,et.U)(lt=>new G(h,lt)));if(0===L.length&&0===ee.length)return Xe(new G(h,{}));const qe=ms(r)===s;return this.expandSegment(R,be,L,ee,qe?jt:s,!0).pipe((0,et.U)(ft=>new G(h.concat(ft.segments),ft.children)))}))}getChildConfig(e,t,r){return t.children?Xe(new vm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Rn.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,et.U)(s=>(t._loadedConfig=s,s))):(n=t,new Yn.y(e=>e.error(Bh(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):Xe(new vm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Xe(i.map(u=>{const h=e.get(u);let m;if((n=h)&&ga(n.canLoad))m=h.canLoad(t,r);else{if(!ga(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}var n;return Yi(m)})).pipe(uc(),(0,gr.b)(u=>{if(!xo(u))return;const h=Bh(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,et.U)(u=>!0===u)):Xe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[jt])return kr(e.redirectTo);i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new U(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Nn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Nn(t.children,(h,m)=>{u[m]=this.createSegmentGroup(e,h,r,i)}),new G(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function hc(n){const e={};for(const r of Object.keys(n.children)){const s=hc(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new G(n.segments.concat(e.segments),e.children)}return n}(new G(n.segments,e))}class fc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pc{constructor(e,t){this.component=e,this.route=t}}function Tm(n,e,t){const r=n._root;return mc(r,e?e._root:null,t,[r.value])}function pd(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function mc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=pa(e);return n.children.forEach(u=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const m=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tt(n.url,e.url)||!Ki(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dd(n,e)||!Ki(n.queryParams,e.queryParams);default:return!dd(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new fc(r)):(s.data=u.data,s._resolvedData=u._resolvedData),mc(n,e,s.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new pc(h.outlet.component,u))}else u&&Dm(e,h,i),i.canActivateChecks.push(new fc(r)),mc(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Nn(s,(u,h)=>Dm(u,t.getContext(h),i)),i}function Dm(n,e,t){const r=pa(n),i=n.value;Nn(r,(s,u)=>{Dm(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new pc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class BD{}function hy(n){return new Yn.y(e=>e.error(n))}class jD{constructor(e,t,r,i,s,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const e=w(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,jt);if(null===t)return null;const r=new iu([],Object.freeze({}),Object.freeze(ut({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xi(r,t),s=new ac(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=tl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const u=t.children[s],h=b(e,s),m=this.processSegmentGroup(h,u,s);if(null===m)return null;r.push(...m)}const i=uw(r);return i.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const s of e){const u=this.processSegmentAgainstRoute(s,t,r,i);if(null!==u)return u}return _t(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ve(e,t,r,i))return null;let s,u=[],h=[];if("**"===e.path){const L=r.length>0?sc(r).parameters:{};s=new iu(r,L,Object.freeze(ut({},this.urlTree.queryParams)),this.urlTree.fragment,ko(e),ms(e),e.component,e,cw(t),gc(t)+r.length,$D(e))}else{const L=_(t,e,r);if(!L.matched)return null;u=L.consumedSegments,h=r.slice(L.lastChild),s=new iu(u,L.parameters,Object.freeze(ut({},this.urlTree.queryParams)),this.urlTree.fragment,ko(e),ms(e),e.component,e,cw(t),gc(t)+u.length,$D(e))}const m=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:y,slicedSegments:C}=w(t,u,h,m.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);var n;if(0===C.length&&y.hasChildren()){const L=this.processChildren(m,y);return null===L?null:[new xi(s,L)]}if(0===m.length&&0===C.length)return[new xi(s,[])];const D=ms(e)===i,R=this.processSegment(m,y,C,D?jt:i);return null===R?null:[new xi(s,R)]}}function lw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uw(n){const e=[],t=new Set;for(const r of n){if(!lw(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=uw(r.children);e.push(new xi(r.value,i))}return e.filter(r=>!t.has(r))}function cw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ko(n){return n.data||{}}function $D(n){return n.resolve||{}}function sf(n){return $t(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,et.U)(()=>e)):Xe(e)})}class af extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Sm=new c.OlP("ROUTES");class py{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,et.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=s.create(e);return new vm(ic(u.injector.get(Sm,void 0,c.XFs.Self|c.XFs.Optional)).map(ir),u)}),qi(s=>{throw t._loader$=void 0,s}));return t._loader$=new Ka(i,()=>new Bt.x).pipe(Wi()),t._loader$}loadModuleFactory(e){return Yi(e()).pipe((0,Rn.z)(t=>t instanceof c.YKP?Xe(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class gy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fw(n){throw n}function jO(n,e,t){return e.parse("/")}function _c(n,e){return Xe(null)}const _y={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ki=(()=>{class n{constructor(t,r,i,s,u,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bt.x,this.errorHandler=fw,this.malformedUriErrorHandler=jO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_c,afterPreactivation:_c},this.urlHandlingStrategy=new gy,this.routeReuseStrategy=new af,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(c.h0i),this.console=u.get(c.c2e);const D=u.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=new U(new G([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new py(u,h,R=>this.triggerEvent(new Qa(R)),R=>this.triggerEvent(new io(R))),this.routerState=ld(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(un(i=>0!==i.id),(0,et.U)(i=>Ei(ut({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$t(i=>{let s=!1,u=!1;return Xe(i).pipe((0,gr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Ei(ut({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$t(h=>{const m=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Am(h.source)&&(this.browserUrlTree=h.extractedUrl),Xe(h).pipe($t(D=>{const R=this.transitions.getValue();return r.next(new tc(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions.getValue()?to.E:Promise.resolve(D)}),function(n,e,t,r){return $t(i=>function(n,e,t,r,i){return new Cm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,et.U)(s=>Ei(ut({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,gr.b)(D=>{this.currentNavigation=Ei(ut({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Rn.z)(s=>function(n,e,t,r,i="emptyOnly",s="legacy"){try{const u=new jD(n,e,t,r,i,s).recognize();return null===u?hy(new BD):Xe(u)}catch(u){return hy(u)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,et.U)(u=>Ei(ut({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,gr.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const R=new Fh(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(R)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:L,source:B,restoredState:ee,extras:be}=h,qe=new tc(R,this.serializeUrl(L),B,ee);r.next(qe);const ot=ld(L,this.rootComponentType).snapshot;return Xe(Ei(ut({},h),{targetSnapshot:ot,urlAfterRedirects:L,extras:Ei(ut({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),to.E}),sf(h=>{const{targetSnapshot:m,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:L}}=h;return this.hooks.beforePreactivation(m,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!L})}),(0,gr.b)(h=>{const m=new Lh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,et.U)(h=>Ei(ut({},h),{guards:Tm(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Rn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?Xe(Ei(ut({},t),{guardsResult:!0})):function(n,e,t,r){return(0,xn.D)(n).pipe((0,Rn.z)(i=>function(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Xe(s.map(h=>{const m=pd(h,e,i);let y;if(function(n){return n&&ga(n.canDeactivate)}(m))y=Yi(m.canDeactivate(n,e,t,r));else{if(!ga(m))throw new Error("Invalid CanDeactivate guard");y=Yi(m(n,e,t,r))}return y.pipe(ua())})).pipe(uc()):Xe(!0)}(i.component,i.route,t,e,r)),ua(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Rn.z)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,e,t,r){return(0,xn.D)(e).pipe(Rs(i=>Za(function(n,e){return null!==n&&e&&e(new Jl(n)),Xe(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new nc(n)),Xe(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>xs(()=>Xe(u.guards.map(m=>{const y=pd(m,u.node,t);let C;if(function(n){return n&&ga(n.canActivateChild)}(y))C=Yi(y.canActivateChild(r,n));else{if(!ga(y))throw new Error("Invalid CanActivateChild guard");C=Yi(y(r,n))}return C.pipe(ua())})).pipe(uc())));return Xe(s).pipe(uc())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(s=>xs(()=>{const u=pd(s,e,t);let h;if(function(n){return n&&ga(n.canActivate)}(u))h=Yi(u.canActivate(e,n));else{if(!ga(u))throw new Error("Invalid CanActivate guard");h=Yi(u(e,n))}return h.pipe(ua())}));return Xe(i).pipe(uc())}(n,i.route,t))),ua(i=>!0!==i,!0))}(r,s,n,e):Xe(h)),(0,et.U)(h=>Ei(ut({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,gr.b)(h=>{if(xo(h.guardsResult)){const y=Bh(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const m=new Zi(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),un(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),sf(h=>{if(h.guards.canActivateChecks.length)return Xe(h).pipe((0,gr.b)(m=>{const y=new fs(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),$t(m=>{let y=!1;return Xe(m).pipe(function(n,e){return(0,Rn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);let s=0;return(0,xn.D)(i).pipe(Rs(u=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Xe({});const s={};return(0,xn.D)(i).pipe((0,Rn.z)(u=>function(n,e,t,r){const i=pd(n,e,r);return Yi(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,gr.b)(h=>{s[u]=h}))),Vn(1),(0,Rn.z)(()=>Object.keys(s).length===i.length?Xe(s):to.E))}(n._resolve,n,e,r).pipe((0,et.U)(s=>(n._resolvedData=s,n.data=ut(ut({},n.data),tl(n,t).resolve),null)))}(u.route,r,n,e)),(0,gr.b)(()=>s++),Vn(1),(0,Rn.z)(u=>s===i.length?Xe(t):to.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,gr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,gr.b)(m=>{const y=new Ya(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}))}),sf(h=>{const{targetSnapshot:m,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:L}}=h;return this.hooks.afterPreactivation(m,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!L})}),(0,et.U)(h=>{const m=function(n,e,t){const r=su(n,e._root,t?t._root:void 0);return new el(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Ei(ut({},h),{targetRouterState:m})}),(0,gr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,et.U)(r=>(new _m(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,gr.b)({next(){s=!0},complete(){s=!0}}),sd(()=>{var h;s||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(h=this.currentNavigation)?void 0:h.id)===i.id&&(this.currentNavigation=null)}),qi(h=>{if(u=!0,function(n){return n&&n[Ns]}(h)){const m=xo(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Yl(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),m?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Am(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Ql(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return to.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(ut(ut({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var h;const i={replaceUrl:!0},s=(null==(h=t.state)?void 0:h.navigationId)?t.state:null;if(s){const m=ut({},s);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(i.state=m)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){hd(t),this.config=t.map(ir),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:m}=r,y=i||this.routerState.root,C=m?this.currentUrlTree.fragment:u;let D=null;switch(h){case"merge":D=ut(ut({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function(n,e,t,r,i){if(0===t.length)return Kh(e.root,e.root,e,r,i);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Yh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Nn(s.outlets,(m,y)=>{h[y]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Yh(t,e,r)}(t);if(s.toRoot())return Kh(e.root,new G([],{}),e,r,i);const u=function(n,e,t){if(n.isAbsolute)return new rl(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new rl(s,s===e.root,0)}const r=lc(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new rl(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=u.processChildren?Qh(u.segmentGroup,u.index,s.commands):pm(u.segmentGroup,u.index,s.commands);return Kh(u.segmentGroup,h,e,r,i)}(y,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?ut({},_y):!1===r?ut({},pw):r,xo(t))return Xa(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Xa(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Qn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){var qe,ot,ft;if(this.disposed)return Promise.resolve(!1);const h=this.transitions.value,m=Am(r)&&h&&!Am(h.source),y=h.rawUrl.toString()===t.toString(),C=h.id===(null==(qe=this.currentNavigation)?void 0:qe.id);if(m&&y&&C)return Promise.resolve(!0);let R,L,B;u?(R=u.resolve,L=u.reject,B=u.promise):B=new Promise((lt,Gt)=>{R=lt,L=Gt});const ee=++this.navigationId;let be;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),be=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(ot=this.browserPageId)?ot:0:(null!=(ft=this.browserPageId)?ft:0)+1):be=0,this.setTransition({id:ee,targetPageId:be,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:R,reject:L,promise:B,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),B.catch(lt=>Promise.reject(lt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=ut(ut({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Yl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Am(n){return"imperative"!==n}let md=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this.commands=null,this.onChanges=new Bt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:gd(this.skipLocationChange),replaceUrl:gd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ki),c.Y36(ma),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Mm=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Bt.x,this.subscription=t.events.subscribe(s=>{s instanceof Qn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){if(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:gd(this.skipLocationChange),replaceUrl:gd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ki),c.Y36(ma),c.Y36(Ue))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function gd(n){return""===n||!!n}class vy{}class wy{preload(e,t){return Xe(null)}}let xm=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new py(i,r,m=>t.triggerEvent(new Qa(m)),m=>t.triggerEvent(new io(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(un(t=>t instanceof Qn),Rs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,xn.D)(i).pipe((0,eo.J)(),(0,et.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Rn.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ki),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(vy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ey=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const uu=new c.OlP("ROUTER_CONFIGURATION"),Cy=new c.OlP("ROUTER_FORROOT_GUARD"),yc=[ct,{provide:Ot,useClass:sn},{provide:ki,useFactory:function(n,e,t,r,i,s,u={},h,m){const y=new ki(null,n,e,t,r,i,ic(s));return h&&(y.urlHandlingStrategy=h),m&&(y.routeReuseStrategy=m),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(C=>{var D,R;null==(D=console.group)||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null==(R=console.groupEnd)||R.call(console)}),y},deps:[Ot,cc,ct,c.zs3,c.Sil,Sm,uu,[class{},new c.FiY],[class{},new c.FiY]]},cc,{provide:ma,useFactory:function(n){return n.routerState.root},deps:[ki]},xm,wy,class{preload(e,t){return t().pipe(qi(()=>Xe(null)))}},{provide:uu,useValue:{enableTracing:!1}}];function mw(){return new c.PXZ("Router",ki)}let _d=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[yc,Iy(t),{provide:Cy,useFactory:KD,deps:[[ki,new c.FiY,new c.tp0]]},{provide:uu,useValue:r||{}},{provide:Ue,useFactory:km,deps:[ue,[new c.tBr(De),new c.FiY],uu]},{provide:Ey,useFactory:ZD,deps:[ki,xh,uu]},{provide:vy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:wy},{provide:c.PXZ,multi:!0,useFactory:mw},[Rm,{provide:c.ip1,multi:!0,useFactory:Nm,deps:[Rm]},{provide:Dy,useFactory:Om,deps:[Rm]},{provide:c.tb,multi:!0,useExisting:Dy}]]}}static forChild(t){return{ngModule:n,providers:[Iy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cy,8),c.LFG(ki,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function ZD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ey(n,e,t)}function km(n,e,t={}){return t.useHash?new je(n,e):new Be(n,e)}function KD(n){return"guarded"}function Iy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Sm,multi:!0,useValue:n}]}let Rm=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Bt.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(ki),u=this.injector.get(uu);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(uu),i=this.injector.get(xm),s=this.injector.get(Ey),u=this.injector.get(ki),h=this.injector.get(c.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Nm(n){return n.appInitializer.bind(n)}function Om(n){return n.bootstrapListener.bind(n)}const Dy=new c.OlP("Router Initializer"),Ay=[];let lf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[_d.forRoot(Ay)],_d]}),n})();class Pm{constructor(e=!1,t,r=!0){this._multiple=e,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Bt.x,t&&t.length&&(e?t.forEach(i=>this._markSelected(i)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}var uf=P(6921);function Rr(n){return(0,rr.e)((e,t)=>{(0,Fr.Xf)(n).subscribe(new kn.Q(t,()=>t.complete(),uf.Z)),!t.closed&&e.subscribe(t)})}function sr(n){return null!=n&&"false"!=`${n}`}function Wr(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function ol(n){return n instanceof c.SBq?n.nativeElement:n}const rS=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,c.f3M)(ie)}}),iS=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let cf=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?iS.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(rS,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),My=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();class Ew extends class{constructor(){this.expansionModel=new Pm(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(r=>this._trackByValue(r)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(r=>this._trackByValue(r)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}{constructor(e,t,r){super(),this.getLevel=e,this.isExpandable=t,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const r=[];for(let i=this.dataNodes.indexOf(e)+1;i<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[i]);i++)r.push(this.dataNodes[i]);return r}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}const gs=new c.OlP("CDK_TREE_NODE_OUTLET_NODE");let yd=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(gs,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class oS{constructor(e){this.$implicit=e}}let vd=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),va=(()=>{class n{constructor(t,r){this._differs=t,this._changeDetectorRef=r,this._onDestroy=new Bt.x,this._levels=new Map,this.viewChange=new Pr({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(r=>!r.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;!function(n){return n&&"function"==typeof n.connect}(this._dataSource)?function(n){return!!n&&(n instanceof Yn.y||(0,Ai.m)(n.lift)&&(0,Ai.m)(n.subscribe))}(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=Xe(this._dataSource)):t=this._dataSource.connect(this),t&&(this._dataSubscription=t.pipe(Rr(this._onDestroy)).subscribe(r=>this.renderNodeChanges(r)))}renderNodeChanges(t,r=this._dataDiffer,i=this._nodeOutlet.viewContainer,s){const u=r.diff(t);!u||(u.forEachOperation((h,m,y)=>{if(null==h.previousIndex)this.insertNode(t[y],y,i,s);else if(null==y)i.remove(m),this._levels.delete(h.item);else{const C=i.get(m);i.move(C,y)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,r){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(r,t))||this._defaultNodeDef}insertNode(t,r,i,s){const u=this._getNodeDef(t,r),h=new oS(t);h.level=this.treeControl.getLevel?this.treeControl.getLevel(t):void 0!==s&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,h.level),(i||this._nodeOutlet.viewContainer).createEmbeddedView(u.template,h,r),al.mostRecentTreeNode&&(al.mostRecentTreeNode.data=t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,vd,5),2&t){let s;c.iGM(s=c.CRH())&&(r._nodeDefs=s)}},viewQuery:function(t,r){if(1&t&&c.Gf(yd,7),2&t){let i;c.iGM(i=c.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[yd],encapsulation:2}),n})(),al=(()=>{class n{constructor(t,r){this._elementRef=t,this._tree=r,this._destroyed=new Bt.x,this._dataChanges=new Bt.x,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(n){let e=n.parentElement;for(;e&&!Lm(e);)e=e.parentElement;return e?e.classList.contains("cdk-nested-tree-node")?Wr(e.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(va))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("aria-expanded",r.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();function Lm(n){const e=n.classList;return!(!(null==e?void 0:e.contains("cdk-nested-tree-node"))&&!(null==e?void 0:e.contains("cdk-tree")))}const ky=/([A-Za-z%]+)$/;let Ry,hf=(()=>{class n{constructor(t,r,i,s){this._treeNode=t,this._tree=r,this._element=i,this._dir=s,this._destroyed=new Bt.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe(Rr(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,r=null==this._level?t:this._level;return"number"==typeof r?`${r*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const r=this._paddingIndent();if(r!==this._currentPadding||t){const i=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",u="paddingLeft"===s?"paddingRight":"paddingLeft";i.style[s]=r||"",i.style[u]="",this._currentPadding=r}}_setLevelInput(t){this._level=Wr(t,null),this._setPadding()}_setIndentInput(t){let r=t,i="px";if("string"==typeof t){const s=t.split(ky);r=s[0],i=s[1]||i}this.indentUnits=i,this._indent=Wr(r),this._setPadding()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(al),c.Y36(va),c.Y36(c.SBq),c.Y36(cf,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),Tw=(()=>{class n{constructor(t,r){this._tree=t,this._treeNode=r,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=sr(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(va),c.Y36(al))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),lS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();try{Ry="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Ry=!1}let ff,_s=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?bo(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ry)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dw=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function cS(){if(ff)return ff;if("object"!=typeof document||!document)return ff=new Set(Dw),ff;let n=document.createElement("input");return ff=new Set(Dw.filter(e=>(n.setAttribute("type",e),n.type===e))),ff}let bd,wd,Ed,Aw;function Vm(n){return function(){if(null==bd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bd=!0}))}finally{bd=bd||!1}return bd}()?n:!!n.capture}function Bm(){if("object"!=typeof document||!document)return 0;if(null==wd){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),wd=0,0===n.scrollLeft&&(n.scrollLeft=1,wd=0===n.scrollLeft?1:2),n.remove()}return wd}function dS(n){if(function(){if(null==Aw){const n="undefined"!=typeof document?document.head:null;Aw=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Aw}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Um(n){return n.composedPath?n.composedPath()[0]:n.target}function vf(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var hu=P(2210);function $m(n,e=hu.z){return(0,rr.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function m(){const y=u+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe(new kn.Q(r,y=>{s=y,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}function zm(n,e=hs.y){return n=null!=n?n:GS,(0,rr.e)((t,r)=>{let i,s=!0;t.subscribe(new kn.Q(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function GS(n,e){return n===e}class No extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Bt.x,this._typeaheadSubscription=ks.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Bt.x,this.change=new Bt.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,gr.b)(t=>this._pressedLetters.push(t)),$m(e),un(()=>this._pressedLetters.length>0),(0,et.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,u=r[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||vf(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let qS=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===Wm(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=Wm(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||iE(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_s))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Wm(n){if(!iE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class JS{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(e)}}let XS=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new JS(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qS),c.LFG(c.R0b),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Zm(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const wa=new c.OlP("cdk-input-modality-detector-options"),wf={ignoreKeys:[18,17,224,91,16]},ao=Vm({passive:!0,capture:!0});let Km=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Pr(null),this._lastTouchMs=0,this._onKeydown=u=>{var h,m;(null==(m=null==(h=this._options)?void 0:h.ignoreKeys)?void 0:m.some(y=>y===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Um(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(sE(u)?"keyboard":"mouse"),this._mostRecentTarget=Um(u))},this._onTouchstart=u=>{Zm(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Um(u))},this._options=ut(ut({},wf),s),this.modalityDetected=this._modality.pipe(un((e,t)=>1<=t)),this.modalityChanged=this.modalityDetected.pipe(zm()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ao),i.addEventListener("mousedown",this._onMousedown,ao),i.addEventListener("touchstart",this._onTouchstart,ao)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ao),document.removeEventListener("mousedown",this._onMousedown,ao),document.removeEventListener("touchstart",this._onTouchstart,ao))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_s),c.LFG(c.R0b),c.LFG(ie),c.LFG(wa,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Id=new c.OlP("cdk-focus-monitor-default-options"),ul=Vm({passive:!0,capture:!0});let fu=(()=>{class n{constructor(t,r,i,s,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Bt.x,this._rootNodeFocusAndBlurListener=h=>{const m=Um(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let C=m;C;C=C.parentElement)y.call(this,h,C)},this._document=s,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=ol(t);if(!this._platform.isBrowser||1!==i.nodeType)return Xe(null);const s=dS(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const h={checkChildren:r,subject:new Bt.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=ol(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=ol(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,m])=>this._originChanged(h,r,m)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Um(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ul),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ul)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Rr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ul),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ul),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(_s),c.LFG(Km),c.LFG(ie,8),c.LFG(Id,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bc="cdk-high-contrast-black-on-white",wc="cdk-high-contrast-white-on-black",Ym="cdk-high-contrast-active";let oE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Ym),t.remove(bc),t.remove(wc),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(Ym),t.add(bc)):2===r&&(t.add(Ym),t.add(wc))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_s),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $y{}const Ea="*";function zy(n,e){return{type:7,name:n,definitions:e,options:{}}}function Qm(n,e=null){return{type:4,styles:e,timings:n}}function Wy(n,e=null){return{type:2,steps:n,options:e}}function Td(n){return{type:6,styles:n,offset:null}}function Jm(n,e,t){return{type:0,name:n,styles:e,options:t}}function qy(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function lE(n){Promise.resolve(null).then(n)}class Df{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){lE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?lE(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Xm(){return"undefined"!=typeof window&&void 0!==window.document}function Zy(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ec(n){switch(n.length){case 0:return new Df;case 1:return n[0];default:return new uE(n)}}function iA(n,e,t,r,i={},s={}){const u=[],h=[];let m=-1,y=null;if(r.forEach(C=>{const D=C.offset,R=D==m,L=R&&y||{};Object.keys(C).forEach(B=>{let ee=B,be=C[B];if("offset"!==B)switch(ee=e.normalizePropertyName(ee,u),be){case"!":be=i[B];break;case Ea:be=s[B];break;default:be=e.normalizeStyleValue(B,ee,be,u)}L[ee]=be}),R||h.push(L),y=L,m=D}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return h}function cE(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ky(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ky(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ky(t,"destroy",n)))}}function Ky(n,e,t){const r=t.totalTime,s=eg(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function eg(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function lo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function dE(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let pu=(n,e)=>!1,Yy=(n,e)=>!1,Qy=(n,e,t)=>[];const hE=Zy();(hE||"undefined"!=typeof Element)&&(pu=Xm()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),Yy=(()=>{if(hE||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):Yy}})(),Qy=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let Ca=null,pE=!1;function tg(n){Ca||(Ca=("undefined"!=typeof document?document.body:null)||{},pE=!!Ca.style&&"WebkitAppearance"in Ca.style);let e=!0;return Ca.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ca.style,!e&&pE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ca.style)),e}const Jy=Yy,Xy=pu,ev=Qy;function mE(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let tv=(()=>{class n{validateStyleProperty(t){return tg(t)}matchesElement(t,r){return Jy(t,r)}containsElement(t,r){return Xy(t,r)}query(t,r,i){return ev(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],m){return new Df(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),nv=(()=>{class n{}return n.NOOP=new tv,n})();const _E="ng-enter",Dd="ng-leave",mu="ng-trigger",Af=".ng-trigger",ng="ng-animating",Mf=".ng-animating";function Cc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xf(parseFloat(e[1]),e[2])}function xf(n,e){return"s"===e?1e3*n:n}function Sd(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=xf(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(s=xf(parseFloat(m),h[4]));const y=h[5];y&&(u=y)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(m,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:u}}(n,e,t)}function kf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ia(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else kf(n,t);return t}function rg(n,e,t){return t?e+":"+t+";":""}function sv(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=rg(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=rg(0,EE(t),n.style[t]));n.setAttribute("style",e)}function Po(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Of(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Zy()&&sv(n))}function cl(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Of(t);n.style[r]=""}),Zy()&&sv(n))}function Ad(n){return Array.isArray(n)?1==n.length?n[0]:Wy(n):n}const Rf=new RegExp("{{\\s*(.+?)\\s*}}","g");function ig(n){let e=[];if("string"==typeof n){let t;for(;t=Rf.exec(n);)e.push(t[1]);Rf.lastIndex=0}return e}function sg(n,e,t){const r=n.toString(),i=r.replace(Rf,(s,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function Nf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const wE=/-+([a-z0-9])/g;function Of(n){return n.replace(wE,(...e)=>e[1].toUpperCase())}function EE(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function CE(n,e){return 0===n||0===e}function ov(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],u=[];if(r.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(m){h[m]=og(n,m)})}}return e}function ys(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function og(n,e){return window.getComputedStyle(n)[e]}function IE(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const m=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],u=r[3];e.push(av(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(av(u,i))}(r,t,e)):t.push(n),t}const Pf=new Set(["true","1"]),Ff=new Set(["false","0"]);function av(n,e){const t=Pf.has(n)||Ff.has(n),r=Pf.has(e)||Ff.has(e);return(i,s)=>{let u="*"==n||n==i,h="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?Pf.has(n):Ff.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?Pf.has(e):Ff.has(e)),u&&h}}const SE=new RegExp("s*:selfs*,?","g");function AE(n,e,t){return new oA(n).build(e,t)}class oA{constructor(e){this._driver=e}build(e,t){const r=new qr(t);return this._resetContextStyleTimingState(r),ys(this,Ad(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,y=m.name;y.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,s.push(this.visitState(m,t))}),m.name=y}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};if(r.styles.forEach(h=>{if(ag(h)){const m=h;Object.keys(m).forEach(y=>{ig(m[y]).forEach(C=>{u.hasOwnProperty(C)||s.add(C)})})}}),s.size){const h=Nf(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ys(this,Ad(e.animation),t);return{type:1,matchers:IE(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:gu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ys(this,r,t)),options:gu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=ys(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:gu(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return uv(Sd(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=uv(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||Sd(r,e),uv(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Td({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const y={};r.easing&&(y.easing=r.easing),u=Td(y)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Ea?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,s=null;return r.forEach(u=>{if(ag(u)){const h=u,m=h.easing;if(m&&(s=m,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const m=t.collectedStyles[t.currentQuerySelector],y=m[h];let C=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),C=!1),s=y.startTime),C&&(m[h]={startTime:s,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=ig(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const u=[];let h=!1,m=!1,y=0;const C=e.steps.map(qe=>{const ot=this._makeStyleAst(qe,t);let ft=null!=ot.offset?ot.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(ag(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(ag(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),lt=0;return null!=ft&&(s++,lt=ot.offset=ft),m=m||lt<0||lt>1,h=h||lt<y,y=lt,u.push(lt),ot});m&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let R=0;s>0&&s<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(R=1/(D-1));const L=D-1,B=t.currentTime,ee=t.currentAnimateTimings,be=ee.duration;return C.forEach((qe,ot)=>{const ft=R>0?ot==L?1:R*ot:u[ot],lt=ft*be;t.currentTime=B+ee.delay+lt,ee.duration=lt,this._validateStyleAst(qe,t),qe.offset=ft,r.styles.push(qe)}),r}visitReference(e,t){return{type:8,animation:ys(this,Ad(e.animation),t),options:gu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:gu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:gu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(SE,"")),n=n.replace(/@\*/g,Af).replace(/@\w+/g,t=>Af+"-"+t.substr(1)).replace(/:animating/g,Mf),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,lo(t.collectedStyles,t.currentQuerySelector,{});const h=ys(this,Ad(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:gu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Sd(e.timings,t.errors,!0);return{type:12,animation:ys(this,Ad(e.animation),t),timings:r,options:null}}}class qr{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ag(n){return!Array.isArray(n)&&"object"==typeof n}function gu(n){return n?(n=kf(n)).params&&(n.params=function(n){return n?kf(n):null}(n.params)):n={},n}function uv(n,e,t){return{duration:n,delay:e,easing:t}}function lg(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class Lf{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cA=new RegExp(":enter","g"),dA=new RegExp(":leave","g");function ug(n,e,t,r,i,s={},u={},h,m,y=[]){return(new K1).buildKeyframes(n,e,t,r,i,s,u,h,m,y)}class K1{buildKeyframes(e,t,r,i,s,u,h,m,y,C=[]){y=y||new Lf;const D=new Vf(e,t,y,i,s,C,[]);D.options=m,D.currentTimeline.setStyles([u],null,D.errors,m),ys(this,r,D);const R=D.timelines.filter(L=>L.containsAnimation());if(R.length&&Object.keys(h).length){const L=R[R.length-1];L.allowOnlyTimelineStyles()||L.setStyles([h],null,D.errors,m)}return R.length?R.map(L=>L.buildKeyframes()):[lg(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?Cc(r.duration):null,h=null!=r.delay?Cc(r.delay):null;return 0!==u&&e.forEach(m=>{const y=t.appendInstructionToTimeline(m,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ys(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=kd);const u=Cc(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ys(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Cc(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),ys(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Sd(t.params?sg(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*s),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Cc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=kd);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(m=D.currentTimeline),ys(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const D=C.currentTime;ys(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const kd={};class Vf{constructor(e,t,r,i,s,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Os(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Cc(r.duration)),null!=r.delay&&(i.delay=Cc(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=sg(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Vf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=kd,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new hA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(cA,"."+this._enterClassName)).replace(dA,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class Os{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Os(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ea,this._currentKeyframe[t]=Ea}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},u=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Ea})):Ia(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const m=sg(u[h],s,r);this._pendingStyles[h]=m,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Ea),this._updateStyle(h,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const y=Ia(h,!0);Object.keys(y).forEach(C=>{const D=y[C];"!"==D?e.add(C):D==Ea&&t.add(C)}),r||(y.offset=m/this.duration),i.push(y)});const s=e.size?Nf(e.values()):[],u=t.size?Nf(t.values()):[];if(r){const h=i[0],m=kf(h);h.offset=0,m.offset=1,i=[h,m]}return lg(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class hA extends Os{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,m=Ia(e[0],!1);m.offset=0,s.push(m);const y=Ia(e[0],!1);y.offset=NE(h),s.push(y);const C=e.length-1;for(let D=1;D<=C;D++){let R=Ia(e[D],!1);R.offset=NE((t+R.offset*r)/u),s.push(R)}r=u,t=0,i="",e=s}return lg(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function NE(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Ps{}class OE extends Ps{normalizePropertyName(e,t){return Of(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(pA[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+s}}const pA=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function PE(n,e,t,r,i,s,u,h,m,y,C,D,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:y,postStyleProps:C,totalTime:D,errors:R}}const cv={};class cg{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):u}build(e,t,r,i,s,u,h,m,y,C){const D=[],R=this.ast.options&&this.ast.options.params||cv,B=this.buildStyles(r,h&&h.params||cv,D),ee=m&&m.params||cv,be=this.buildStyles(i,ee,D),qe=new Set,ot=new Map,ft=new Map,lt="void"===i,Gt={params:ut(ut({},R),ee)},Xt=C?[]:ug(e,t,this.ast.animation,s,u,B,be,Gt,y,D);let Pn=0;if(Xt.forEach(Gc=>{Pn=Math.max(Gc.duration+Gc.delay,Pn)}),D.length)return PE(t,this._triggerName,r,i,lt,B,be,[],[],ot,ft,Pn,D);Xt.forEach(Gc=>{const $c=Gc.element,D3=lo(ot,$c,{});Gc.preStyleProps.forEach(tm=>D3[tm]=!0);const rw=lo(ft,$c,{});Gc.postStyleProps.forEach(tm=>rw[tm]=!0),$c!==t&&qe.add($c)});const $s=Nf(qe.values());return PE(t,this._triggerName,r,i,lt,B,be,Xt,$s,ot,ft,Pn)}}class gA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=kf(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!=u&&(i[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let m=u[h];m.length>1&&(m=sg(m,i,t));const y=this.normalizer.normalizePropertyName(h,t);m=this.normalizer.normalizeStyleValue(h,y,m,t),r[y]=m})}}),r}}class _A{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new gA(i.style,i.options&&i.options.params||{},r)}),dv(this.states,"true","1"),dv(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new cg(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new cg(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function dv(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const dg=new Lf;class yA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=AE(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=iA(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let u;const h=new Map;if(s?(u=ug(this._driver,t,s,_E,Dd,{},{},r,dg,i),u.forEach(C=>{const D=lo(h,C.element,{});C.postStyleProps.forEach(R=>D[R]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((C,D)=>{Object.keys(C).forEach(R=>{C[R]=this._driver.computeStyle(D,R,Ea)})});const y=Ec(u.map(C=>{const D=h.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=eg(t,"","","");return cE(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const hv="ng-animate-queued",hg="ng-animate-disabled",Uf=".ng-animate-disabled",UE=[],pv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fs="__ng_removed";class fg{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const s=kf(e);delete s.value,this.options=s}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Rd="void",mv=new fg(Rd);class vA{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,uo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const s=lo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=lo(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(uo(e,mu),uo(e,mu+"-"+t),h[t]=mv),()=>{this._engine.afterFlush(()=>{const m=s.indexOf(u);m>=0&&s.splice(m,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new gv(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(uo(e,mu),uo(e,mu+"-"+t),this._engine.statesByElement.set(e,h={}));let m=h[t];const y=new fg(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&y.absorbOptions(m.options),h[t]=y,m||(m=mv),y.value!==Rd&&m.value===y.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(m.params,y.params)){const ee=[],be=s.matchStyles(m.value,m.params,ee),qe=s.matchStyles(y.value,y.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{cl(e,be),Po(e,qe)})}return}const R=lo(this._engine.playersByElement,e,[]);R.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let L=s.matchTransition(m.value,y.value,e,y.params),B=!1;if(!L){if(!i)return;L=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:m,toState:y,player:u,isFallbackTransition:B}),B||(uo(e,hv),u.onStart(()=>{Nd(e,hv)})),u.onDone(()=>{let ee=this.players.indexOf(u);ee>=0&&this.players.splice(ee,1);const be=this._engine.playersByElement.get(e);if(be){let qe=be.indexOf(u);qe>=0&&be.splice(qe,1)}}),this.players.push(u),R.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Af,!0);r.forEach(i=>{if(i[Fs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e);if(s){const u=[];if(Object.keys(s).forEach(h=>{if(this._triggers[h]){const m=this.trigger(e,h,Rd,i);m&&u.push(m)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Ec(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const m=this._triggers[u].fallbackTransition,y=r[u]||mv,C=new fg(Rd),D=new gv(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Fs];(!s||s===pv)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){uo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=eg(s,r.triggerName,r.fromState.value,r.toState.value);m._data=e,cE(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class bA{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new vA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const u=r[i[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(pg(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!pg(t))return;const s=t[Fs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),uo(e,hg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Nd(e,hg))}removeNode(e,t,r,i){if(pg(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[Fs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,s){return pg(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Af,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Mf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ec(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Fs];if(t&&t.setForRemoval){if(e[Fs]=pv,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Uf)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Uf,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)uo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ec(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Lf,i=[],s=new Map,u=[],h=new Map,m=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(yt=>{C.add(yt);const kt=this.driver.query(yt,".ng-animate-queued",!0);for(let qt=0;qt<kt.length;qt++)C.add(kt[qt])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=$E(R,this.collectedEnterElements),B=new Map;let ee=0;L.forEach((yt,kt)=>{const qt=_E+ee++;B.set(kt,qt),yt.forEach(An=>uo(An,qt))});const be=[],qe=new Set,ot=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const kt=this.collectedLeaveElements[yt],qt=kt[Fs];qt&&qt.setForRemoval&&(be.push(kt),qe.add(kt),qt.hasAnimation?this.driver.query(kt,".ng-star-inserted",!0).forEach(An=>qe.add(An)):ot.add(kt))}const ft=new Map,lt=$E(R,Array.from(qe));lt.forEach((yt,kt)=>{const qt=Dd+ee++;ft.set(kt,qt),yt.forEach(An=>uo(An,qt))}),e.push(()=>{L.forEach((yt,kt)=>{const qt=B.get(kt);yt.forEach(An=>Nd(An,qt))}),lt.forEach((yt,kt)=>{const qt=ft.get(kt);yt.forEach(An=>Nd(An,qt))}),be.forEach(yt=>{this.processLeaveNode(yt)})});const Gt=[],Xt=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(qt=>{const An=qt.player,Hi=qt.element;if(Gt.push(An),this.collectedEnterElements.length){const Fu=Hi[Fs];if(Fu&&Fu.setForMove)return void An.destroy()}const Pu=!D||!this.driver.containsElement(D,Hi),Ho=ft.get(Hi),Ih=B.get(Hi),Ur=this._buildInstruction(qt,r,Ih,Ho,Pu);if(Ur.errors&&Ur.errors.length)Xt.push(Ur);else{if(Pu)return An.onStart(()=>cl(Hi,Ur.fromStyles)),An.onDestroy(()=>Po(Hi,Ur.toStyles)),void i.push(An);if(qt.isFallbackTransition)return An.onStart(()=>cl(Hi,Ur.fromStyles)),An.onDestroy(()=>Po(Hi,Ur.toStyles)),void i.push(An);Ur.timelines.forEach(Fu=>Fu.stretchStartingKeyframe=!0),r.append(Hi,Ur.timelines),u.push({instruction:Ur,player:An,element:Hi}),Ur.queriedElements.forEach(Fu=>lo(h,Fu,[]).push(An)),Ur.preStyleProps.forEach((Fu,iw)=>{const MD=Object.keys(Fu);if(MD.length){let nm=m.get(iw);nm||m.set(iw,nm=new Set),MD.forEach(LO=>nm.add(LO))}}),Ur.postStyleProps.forEach((Fu,iw)=>{const MD=Object.keys(Fu);let nm=y.get(iw);nm||y.set(iw,nm=new Set),MD.forEach(LO=>nm.add(LO))})}});if(Xt.length){const yt=[];Xt.forEach(kt=>{yt.push(`@${kt.triggerName} has failed due to:\n`),kt.errors.forEach(qt=>yt.push(`- ${qt}\n`))}),Gt.forEach(kt=>kt.destroy()),this.reportError(yt)}const Pn=new Map,$s=new Map;u.forEach(yt=>{const kt=yt.element;r.has(kt)&&($s.set(kt,kt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,Pn))}),i.forEach(yt=>{const kt=yt.element;this._getPreviousPlayers(kt,!1,yt.namespaceId,yt.triggerName,null).forEach(An=>{lo(Pn,kt,[]).push(An),An.destroy()})});const Gc=be.filter(yt=>_v(yt,m,y)),$c=new Map;GE($c,this.driver,ot,y,Ea).forEach(yt=>{_v(yt,m,y)&&Gc.push(yt)});const rw=new Map;L.forEach((yt,kt)=>{GE(rw,this.driver,new Set(yt),m,"!")}),Gc.forEach(yt=>{const kt=$c.get(yt),qt=rw.get(yt);$c.set(yt,ut(ut({},kt),qt))});const tm=[],S3=[],A3={};u.forEach(yt=>{const{element:kt,player:qt,instruction:An}=yt;if(r.has(kt)){if(C.has(kt))return qt.onDestroy(()=>Po(kt,An.toStyles)),qt.disabled=!0,qt.overrideTotalTime(An.totalTime),void i.push(qt);let Hi=A3;if($s.size>1){let Ho=kt;const Ih=[];for(;Ho=Ho.parentNode;){const Ur=$s.get(Ho);if(Ur){Hi=Ur;break}Ih.push(Ho)}Ih.forEach(Ur=>$s.set(Ur,Hi))}const Pu=this._buildAnimation(qt.namespaceId,An,Pn,s,rw,$c);if(qt.setRealPlayer(Pu),Hi===A3)tm.push(qt);else{const Ho=this.playersByElement.get(Hi);Ho&&Ho.length&&(qt.parentPlayer=Ec(Ho)),i.push(qt)}}else cl(kt,An.fromStyles),qt.onDestroy(()=>Po(kt,An.toStyles)),S3.push(qt),C.has(kt)&&i.push(qt)}),S3.forEach(yt=>{const kt=s.get(yt.element);if(kt&&kt.length){const qt=Ec(kt);yt.setRealPlayer(qt)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<be.length;yt++){const kt=be[yt],qt=kt[Fs];if(Nd(kt,Dd),qt&&qt.hasAnimation)continue;let An=[];if(h.size){let Pu=h.get(kt);Pu&&Pu.length&&An.push(...Pu);let Ho=this.driver.query(kt,Mf,!0);for(let Ih=0;Ih<Ho.length;Ih++){let Ur=h.get(Ho[Ih]);Ur&&Ur.length&&An.push(...Ur)}}const Hi=An.filter(Pu=>!Pu.destroyed);Hi.length?IA(this,kt,Hi):this.processLeaveNode(kt)}return be.length=0,tm.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const kt=this.players.indexOf(yt);this.players.splice(kt,1)}),yt.play()}),tm}elementContainsData(e,t){let r=!1;const i=t[Fs];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!s||s==Rd;h.forEach(y=>{y.queued||!m&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const y=m.element,C=y!==s,D=lo(r,y,[]);this._getPreviousPlayers(y,C,u,h,t.toState).forEach(L=>{const B=L.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),L.destroy(),D.push(L)})}cl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,m=t.element,y=[],C=new Set,D=new Set,R=t.timelines.map(B=>{const ee=B.element;C.add(ee);const be=ee[Fs];if(be&&be.removedBeforeQueried)return new Df(B.duration,B.delay);const qe=ee!==m,ot=function(n){const e=[];return zE(n,e),e}((r.get(ee)||UE).map(Pn=>Pn.getRealPlayer())).filter(Pn=>!!Pn.element&&Pn.element===ee),ft=s.get(ee),lt=u.get(ee),Gt=iA(0,this._normalizer,0,B.keyframes,ft,lt),Xt=this._buildPlayer(B,Gt,ot);if(B.subTimeline&&i&&D.add(ee),qe){const Pn=new gv(e,h,ee);Pn.setRealPlayer(Xt),y.push(Pn)}return Xt});y.forEach(B=>{lo(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>uo(B,ng));const L=Ec(R);return L.onDestroy(()=>{C.forEach(B=>Nd(B,ng)),Po(m,t.toStyles)}),D.forEach(B=>{lo(i,B,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Df(e.duration,e.delay)}}class gv{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Df,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>cE(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){lo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function pg(n){return n&&1===n.nodeType}function HE(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function GE(n,e,t,r,i){const s=[];t.forEach(m=>s.push(HE(m)));const u=[];r.forEach((m,y)=>{const C={};m.forEach(D=>{const R=C[D]=e.computeStyle(y,D,i);(!R||0==R.length)&&(y[Fs]=jE,u.push(y))}),n.set(y,C)});let h=0;return t.forEach(m=>HE(m,s[h++])),u}function $E(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(h){if(!h)return 1;let m=s.get(h);if(m)return m;const y=h.parentNode;return m=t.has(y)?y:i.has(y)?1:u(y),s.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}const mg="$$classes";function uo(n,e){if(n.classList)n.classList.add(e);else{let t=n[mg];t||(t=n[mg]={}),t[e]=!0}}function Nd(n,e){if(n.classList)n.classList.remove(e);else{let t=n[mg];t&&delete t[e]}}function IA(n,e,t){Ec(t).onDone(()=>n.processLeaveNode(e))}function zE(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof uE?zE(r.players,e):e.push(r)}}function _v(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class jf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new bA(e,t,r),this._timelineEngine=new yA(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const m=[],y=AE(this._driver,s,m);if(m.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);h=function(n,e,t){return new _A(n,e,t)}(i,y,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=dE(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=dE(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function yv(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=gg(e[0]),e.length>1&&(r=gg(e[e.length-1]))):e&&(t=gg(e)),t||r?new qE(n,t,r):null}let qE=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Po(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Po(this._element,this._initialStyles),this._endStyles&&(Po(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(cl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cl(this._element,this._endStyles),this._endStyles=null),Po(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function gg(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];ZE(i)&&(e=e||{},e[i]=n[i])}return e}function ZE(n){return"display"===n||"position"===n}const vv="animation",_g="animationend";class Ic{constructor(e,t,r,i,s,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function(n,e){const t=yg(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Gf(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),AA(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){YE(this._element,this._name,"paused")}resume(){YE(this._element,this._name,"running")}setPosition(e){const t=SA(this._element,this._name);this._position=e*this._duration,Gf(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),AA(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=yg(n,"").split(","),i=Hf(r,e);i>=0&&(r.splice(i,1),Gf(n,"",r.join(",")))}(this._element,this._name))}}function YE(n,e,t){Gf(n,"PlayState",t,SA(n,e))}function SA(n,e){const t=yg(n,"");return t.indexOf(",")>0?Hf(t.split(","),e):Hf([t],e)}function Hf(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function AA(n,e,t){t?n.removeEventListener(_g,e):n.addEventListener(_g,e)}function Gf(n,e,t,r){const i=vv+e;if(null!=r){const s=n.style[i];if(s.length){const u=s.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function yg(n,e){return n.style[vv+e]||""}class QE{constructor(e,t,r,i,s,u,h,m){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=h,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ic(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:og(this.element,r))})}this.currentSnapshot=e}}class xA extends Df{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=mE(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class $f{constructor(){this._count=0}validateStyleProperty(e){return tg(e)}matchesElement(e,t){return Jy(e,t)}containsElement(e,t){return Xy(e,t)}query(e,t,r){return ev(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>mE(h));let i=`@keyframes ${t} {\n`,s="";r.forEach(h=>{s=" ";const m=parseFloat(h.offset);i+=`${s}${100*m}% {\n`,s+=" ",Object.keys(h).forEach(y=>{const C=h[y];switch(y){case"offset":return;case"easing":return void(C&&(i+=`${s}animation-timing-function: ${C};\n`));default:return void(i+=`${s}${y}: ${C};\n`)}}),i+=`${s}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,s,u=[],h){const m=u.filter(be=>be instanceof QE),y={};CE(r,i)&&m.forEach(be=>{let qe=be.currentSnapshot;Object.keys(qe).forEach(ot=>y[ot]=qe[ot])});const C=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=ov(e,t,y));if(0==r)return new xA(e,C);const D="gen_css_kf_"+this._count++,R=this.buildKeyframeElement(e,D,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(R);const B=yv(e,t),ee=new QE(e,t,D,r,i,s,C,B);return ee.onDestroy(()=>{var n;(n=R).parentNode.removeChild(n)}),ee}}class XE{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:og(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class eC{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ev().toString()),this._cssKeyframesDriver=new $f}validateStyleProperty(e){return tg(e)}matchesElement(e,t){return Jy(e,t)}containsElement(e,t){return Xy(e,t)}query(e,t,r){return ev(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(C.easing=s);const D={},R=u.filter(B=>B instanceof XE);CE(r,i)&&R.forEach(B=>{let ee=B.currentSnapshot;Object.keys(ee).forEach(be=>D[be]=ee[be])});const L=yv(e,t=ov(e,t=t.map(B=>Ia(B,!1)),D));return new XE(e,t,C,L)}}function Ev(){return Xm()&&Element.prototype.animate||{}}let nC=(()=>{class n extends $y{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Wy(t):t;return rC(this._renderer,null,r,"register",[i]),new kA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class kA extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new RA(this._id,e,t||{},this._renderer)}}class RA{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return rC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function rC(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const iC="@.disabled";let NA=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new sC("",s,this.engine),this._rendererCache.set(s,C)),C}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(u,h,t,C.name,C)};return r.data.animation.forEach(m),new wg(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(jf),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class sC{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==iC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class wg extends sC{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==iC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let lC=(()=>{class n extends jf{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(nv),c.LFG(Ps))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=new c.OlP("AnimationModuleType"),uC=[{provide:$y,useClass:nC},{provide:Ps,useFactory:function(){return new OE}},{provide:jf,useClass:lC},{provide:c.FYo,useFactory:function(n,e,t){return new NA(n,e,t)},deps:[us,jf,c.R0b]}],cC=[{provide:nv,useFactory:function(){return"function"==typeof Ev()?new eC:new $f}},{provide:Fo,useValue:"BrowserAnimations"},...uC],dC=[{provide:nv,useClass:tv},{provide:Fo,useValue:"NoopAnimations"},...uC];let Cv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?dC:cC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:cC,imports:[Ga]}),n})();const Eg=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Dr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!("undefined"!=typeof __karma__&&__karma__||"undefined"!=typeof jasmine&&jasmine||"undefined"!=typeof jest&&jest||"undefined"!=typeof Mocha&&Mocha)&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oE),c.LFG(Eg,8),c.LFG(ie))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[My],My]}),n})();function fC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=sr(e)}}}function Tc(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function pC(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=sr(e)}}}function mC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Wr(t):this.defaultTabIndex}}}function gC(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Bt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let Ig=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WA{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Tg={enterDuration:225,exitDuration:150},Dg=Vm({passive:!0}),yC=["mousedown","touchstart"],vC=["mouseup","mouseleave","touchend","touchcancel"];class bC{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ol(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=ut(ut({},Tg),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,m=t-i.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-u+"px",C.style.top=m-u+"px",C.style.height=2*u+"px",C.style.width=2*u+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),window.getComputedStyle(C).getPropertyValue("opacity"),C.style.transform="scale(1)";const D=new WA(this,C,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const R=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!R||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=ut(ut({},Tg),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ol(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(yC))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(vC),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=sE(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Zm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Dg)})})}_removeTriggerEvents(){this._triggerElement&&(yC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Dg)}),this._pointerUpEventsRegistered&&vC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Dg)}))}}const wC=new c.OlP("mat-ripple-global-options");let Iv=(()=>{class n{constructor(t,r,i,s,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new bC(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ut(ut(ut({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,ut(ut({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,ut(ut({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(_s),c.Y36(wC,8),c.Y36(Fo,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),YA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Dr],Dr]}),n})();var co=P(3719);const DC=mC(fC(al));let SC=(()=>{class n extends DC{constructor(t,r,i){super(t,r),this.tabIndex=Number(i)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(va),c.$8M("tabindex"))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[c._Bn([{provide:al,useExisting:n}]),c.qOj]}),n})(),Tv=(()=>{class n extends vd{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[c._Bn([{provide:vd,useExisting:n}]),c.qOj]}),n})(),Dv=(()=>{class n extends hf{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[c._Bn([{provide:hf,useExisting:n}]),c.qOj]}),n})(),AC=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(gs,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[c._Bn([{provide:yd,useExisting:n}])]}),n})(),MC=(()=>{class n extends va{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-tree"]],viewQuery:function(t,r){if(1&t&&c.Gf(AC,7),2&t){let i;c.iGM(i=c.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[c._Bn([{provide:va,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[AC],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),Pd=(()=>{class n extends Tw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[c._Bn([{provide:Tw,useExisting:n}]),c.qOj]}),n})(),Fd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lS,Dr],Dr]}),n})();class Kf{constructor(e,t,r,i){this.transformFunction=e,this.getLevel=t,this.isExpandable=r,this.getChildren=i}_flattenNode(e,t,r,i){const s=this.transformFunction(e,t);if(r.push(s),this.isExpandable(s)){const u=this.getChildren(e);u&&(Array.isArray(u)?this._flattenChildren(u,t,r,i):u.pipe((0,Xn.q)(1)).subscribe(h=>{this._flattenChildren(h,t,r,i)}))}return r}_flattenChildren(e,t,r,i){e.forEach((s,u)=>{let h=i.slice();h.push(u!=e.length-1),this._flattenNode(s,t+1,r,h)})}flattenNodes(e){let t=[];return e.forEach(r=>this._flattenNode(r,0,t,[])),t}expandFlattenedNodes(e,t){let r=[],i=[];return i[0]=!0,e.forEach(s=>{let u=!0;for(let h=0;h<=this.getLevel(s);h++)u=u&&i[h];u&&r.push(s),this.isExpandable(s)&&(i[this.getLevel(s)+1]=t.isExpanded(s))}),r}}class nM extends class{}{constructor(e,t,r){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new Pr([]),this._expandedData=new Pr([]),this._data=new Pr([]),r&&(this.data=r)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){return(0,co.T)(e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,et.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function Sv(n,e){const t=(0,Ai.m)(n)?n:()=>n,r=i=>i.error(t());return new Yn.y(e?i=>e.schedule(r,0,i):r)}var rM=P(1537);const iM=["addListener","removeListener"],sM=["addEventListener","removeEventListener"],oM=["on","off"];function Sa(n,e,t,r){if((0,Ai.m)(t)&&(r=t,t=void 0),r)return Sa(n,e,t).pipe(To(r));const[i,s]=function(n){return(0,Ai.m)(n.addEventListener)&&(0,Ai.m)(n.removeEventListener)}(n)?sM.map(u=>h=>n[u](e,h,t)):function(n){return(0,Ai.m)(n.addListener)&&(0,Ai.m)(n.removeListener)}(n)?iM.map(Av(n,e)):function(n){return(0,Ai.m)(n.on)&&(0,Ai.m)(n.off)}(n)?oM.map(Av(n,e)):[];if(!i&&(0,rM.z)(n))return(0,Rn.z)(u=>Sa(u,e,t))((0,Fr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Yn.y(u=>{const h=(...m)=>u.next(1<m.length?m:m[0]);return i(h),()=>s(h)})}function Av(n,e){return t=>r=>n[t](e,r)}const yu=new Yn.y(uf.Z),lM={connector:()=>new Bt.x};function kC(n,e=lM){const{connector:t}=e;return(0,rr.e)((r,i)=>{const s=t();(0,xn.D)(n(function(n){return new Yn.y(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function RC(n){return(0,et.U)(()=>n)}function NC(n,e){return e?t=>Za(e.pipe((0,Xn.q)(1),(0,rr.e)((n,e)=>{n.subscribe(new kn.Q(e,uf.Z))})),t.pipe(NC(n))):(0,Rn.z)((t,r)=>n(t,r).pipe((0,Xn.q)(1),RC(t)))}var dM=P(7398);function Ag(n=0,e,t=hu.P){let r=-1;return null!=e&&((0,dM.K)(e)?t=e:r=e),new Yn.y(i=>{let s=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const Mg="Service workers are disabled or not supported by this browser";class xg{constructor(e){if(this.serviceWorker=e,e){const r=Sa(e,"controllerchange").pipe((0,et.U)(()=>e.controller)),s=Za(xs(()=>Xe(e.controller)),r);this.worker=s.pipe(un(C=>!!C)),this.registration=this.worker.pipe($t(()=>e.getRegistration()));const y=Sa(e,"message").pipe((0,et.U)(C=>C.data)).pipe(un(C=>C&&C.type)).pipe(function(n){return n?e=>kC(n)(e):e=>function(n,e){const t=(0,Ai.m)(n)?n:()=>n;return(0,Ai.m)(e)?kC(e,{connector:t}):r=>new Ka(r,t)}(new Bt.x)(e)}());y.connect(),this.events=y}else this.worker=this.events=this.registration=(Mg,xs(()=>Sv(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe((0,Xn.q)(1),(0,gr.b)(r=>{r.postMessage(ut({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(un(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Xn.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(un(t=>t.nonce===e),(0,Xn.q)(1),(0,et.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let yP=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Bt.x,!t.isEnabled)return this.messages=yu,this.notificationClicks=yu,void(this.subscription=yu);this.messages=this.sw.eventsOfType("PUSH").pipe((0,et.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,et.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,et.U)(i=>i.pushManager));const r=this.pushManager.pipe($t(i=>i.getSubscription()));this.subscription=(0,co.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Mg));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return r.applicationServerKey=s,this.pushManager.pipe($t(u=>u.subscribe(r)),(0,Xn.q)(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Xn.q)(1),$t(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Mg))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),kv=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=yu,this.available=yu,this.activated=yu,void(this.unrecoverable=yu);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(un(r=>"VERSION_READY"===r.type),(0,et.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Mg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Mg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class PC{}const Rv=new c.OlP("NGSW_REGISTER_SCRIPT");function Nv(n,e,t,r){return()=>{if(!bo(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[h,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":s=Xe(null);break;case"registerWithDelay":s=Ov(+m[0]||0);break;case"registerWhenStable":s=m[0]?(0,co.T)(Pv(n),Ov(+m[0])):Pv(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(c.R0b).runOutsideAngular(()=>s.pipe((0,Xn.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function Ov(n){return Xe(null).pipe(function(n,e=hu.z){const t=Ag(n,e);return NC(()=>t)}(n))}function Pv(n){return n.get(c.z2F).isStable.pipe(un(t=>t))}function hM(n,e){return new xg(bo(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let fM=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:Rv,useValue:t},{provide:PC,useValue:r},{provide:xg,useFactory:hM,deps:[PC,c.Lbi]},{provide:c.ip1,useFactory:Nv,deps:[c.zs3,Rv,PC,c.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[yP,kv]}),n})();var vu=P(3533),F=P(4213),Lo=P(1572),Vo=P(3855),dl=P(1177),Jn=P(7233);P(7713);const Vv=(0,Jn.u3)(vu.f,!0);function Uv(){return(0,rr.e)((n,e)=>{let t,r=!1;n.subscribe(new kn.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ht,Ri=P(7905),jv=(P(2115),P(6293)),Te=P(8239),YC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Aa={},Hv=Hv||{},Ut=YC||self;function Fg(){}function Lg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vg="closure_uid_"+(1e9*Math.random()>>>0),FM=0;function LM(n,e,t){return n.call.apply(n.bind,arguments)}function VM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function si(n,e,t){return(si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LM:VM).apply(null,arguments)}function Gv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ni(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Sc(){this.s=this.s,this.o=this.o}var ZP={};Sc.prototype.s=!1,Sc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Vg)&&n[Vg]||(n[Vg]=++FM)}(this);delete ZP[n]}},Sc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const BM=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},UM=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function Xf(n){return Array.prototype.concat.apply([],arguments)}function JC(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Hd(n){return/^[\s\xa0]*$/.test(n)}var Xi,Ac=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Oi(n,e){return-1!=n.indexOf(e)}function $v(n,e){return n<e?-1:n>e?1:0}e:{var Bg=Ut.navigator;if(Bg){var zv=Bg.userAgent;if(zv){Xi=zv;break e}}Xi=""}function Ug(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Wv(n){const e={};for(const t in n)e[t]=n[t];return e}var jM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<jM.length;s++)t=jM[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gd(n){return Gd[" "](n),n}Gd[" "]=Fg;var Hg,n,YP=Oi(Xi,"Opera"),ep=Oi(Xi,"Trident")||Oi(Xi,"MSIE"),HM=Oi(Xi,"Edge"),Zv=HM||ep,jg=Oi(Xi,"Gecko")&&!(Oi(Xi.toLowerCase(),"webkit")&&!Oi(Xi,"Edge"))&&!(Oi(Xi,"Trident")||Oi(Xi,"MSIE"))&&!Oi(Xi,"Edge"),GM=Oi(Xi.toLowerCase(),"webkit")&&!Oi(Xi,"Edge");function $M(){var n=Ut.document;return n?n.documentMode:void 0}e:{var tp="",Kv=(n=Xi,jg?/rv:([^\);]+)(\)|;)/.exec(n):HM?/Edge\/([\d\.]+)/.exec(n):ep?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):GM?/WebKit\/(\S+)/.exec(n):YP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Kv&&(tp=Kv?Kv[1]:""),ep){var es=$M();if(null!=es&&es>parseFloat(tp)){Hg=String(es);break e}}Hg=tp}var zM={};function Yv(){return e=zM,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Ac(String(Hg)).split("."),t=Ac("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=$v(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||$v(0==i[2].length,0==s[2].length)||$v(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n}();var e}var Jv=Ut.document&&ep&&($M()||parseInt(Hg,10))||void 0,tI=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",Fg,e),Ut.removeEventListener("test",Fg,e)}catch(t){}return n}();function vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function np(n,e){if(vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jg){e:{try{Gd(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&np.Z.h.call(this)}}vi.prototype.h=function(){this.defaultPrevented=!0},Ni(np,vi);var nI={2:"touch",3:"pen",4:"mouse"};np.prototype.h=function(){np.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $d="closure_listenable_"+(1e6*Math.random()|0),WM=0;function qM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++WM,this.ca=this.fa=!1}function zd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function bs(n){this.src=n,this.g={},this.h=0}function Xv(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=BM(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(zd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function eb(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}bs.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=eb(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new qM(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var tb="closure_lm_"+(1e6*Math.random()|0),Gg={};function rI(n,e,t,r,i){if(r&&r.once)return oI(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)rI(n,e[s],t,r,i);return null}return t=Mc(t),n&&n[$d]?n.N(e,t,jd(r)?!!r.capture:!!r,i):iI(n,e,t,!1,r,i)}function iI(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=jd(i)?!!i.capture:!!i,h=rb(n);if(h||(n[tb]=h=new bs(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function(){var e=KM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tI||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(nb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function oI(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)oI(n,e[s],t,r,i);return null}return t=Mc(t),n&&n[$d]?n.O(e,t,jd(r)?!!r.capture:!!r,i):iI(n,e,t,!0,r,i)}function ZM(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ZM(n,e[s],t,r,i);else r=jd(r)?!!r.capture:!!r,t=Mc(t),n&&n[$d]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=eb(s=n.g[e],t,r,i))&&(zd(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=rb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=eb(e,t,r,i)),(t=-1<n?e[n]:null)&&$g(t))}function $g(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[$d])Xv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(nb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rb(e))?(Xv(t,n),0==t.h&&(t.src=null,e[tb]=null)):zd(n)}}}function nb(n){return n in Gg?Gg[n]:Gg[n]="on"+n}function KM(n,e){if(n.ca)n=!0;else{e=new np(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&$g(n),n=t.call(r,e)}return n}function rb(n){return(n=n[tb])instanceof bs?n:null}var zg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mc(n){return"function"==typeof n?n:(n[zg]||(n[zg]=function(e){return n.handleEvent(e)}),n[zg])}function Vr(){Sc.call(this),this.i=new bs(this),this.P=this,this.I=null}function oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new vi(e,n);else if(e instanceof vi)e.target=e.target||n;else{var i=e;qv(e=new vi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=Wg(u,r,!0,e)&&i}if(i=Wg(u=e.g=n,r,!0,e)&&i,i=Wg(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Wg(u=e.g=t[s],r,!1,e)&&i}function Wg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&Xv(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Ni(Vr,Sc),Vr.prototype[$d]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){ZM(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zd(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qg=Ut.JSON.stringify;function aI(){var n=JM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ib,lI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new QP,n=>n.reset());class QP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function JP(n){Ut.setTimeout(()=>{throw n},0)}function Zg(n,e){ib||function(){var n=Ut.Promise.resolve(void 0);ib=function(){n.then(XP)}}(),sb||(ib(),sb=!0),JM.add(n,e)}var sb=!1,JM=new class{constructor(){this.h=this.g=null}add(e,t){const r=lI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function XP(){for(var n;n=aI();){try{n.h.call(n.g)}catch(t){JP(t)}var e=lI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sb=!1}function ob(n,e){Vr.call(this),this.h=n||1,this.g=e||Ut,this.j=si(this.kb,this),this.l=Date.now()}function uI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function cI(n,e,t){if("function"==typeof n)t&&(n=si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=si(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function dI(n){n.g=cI(()=>{n.g=null,n.i&&(n.i=!1,dI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ni(ob,Vr),(ht=ob.prototype).da=!1,ht.S=null,ht.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),oi(this,"tick"),this.da&&(uI(this),this.start()))}},ht.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.M=function(){ob.Z.M.call(this),uI(this),delete this.g};class Kg extends Sc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dI(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rp(n){Sc.call(this),this.h=n,this.g={}}Ni(rp,Sc);var hI=[];function ab(n,e,t,r){Array.isArray(t)||(t&&(hI[0]=t.toString()),t=hI);for(var i=0;i<t.length;i++){var s=rI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function bu(n){Ug(n.g,function(e,t){this.g.hasOwnProperty(t)&&$g(e)},n),n.g={}}function ip(){this.g=!0}function Wd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return qg(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}rp.prototype.M=function(){rp.Z.M.call(this),bu(this)},rp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ip.prototype.Aa=function(){this.g=!1},ip.prototype.info=function(){};var wu={},hb=null;function fb(){return hb=hb||new Vr}function XM(n){vi.call(this,wu.Ma,n)}function Yg(n){const e=fb();oi(e,new XM(e,n))}function ex(n,e){vi.call(this,wu.STAT_EVENT,n),this.stat=e}function ws(n){const e=fb();oi(e,new ex(e,n))}function tx(n,e){vi.call(this,wu.Na,n),this.size=e}function Qg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}wu.Ma="serverreachability",Ni(XM,vi),wu.STAT_EVENT="statevent",Ni(ex,vi),wu.Na="timingevent",Ni(tx,vi);var sp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pb(){}function mI(){}pb.prototype.h=null;var mb,qd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jg(){vi.call(this,"d")}function Xg(){vi.call(this,"c")}function e_(){}function Zd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new rp(this),this.P=nx,this.W=new ob(n=Zv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new op}function op(){this.i=null,this.g="",this.h=!1}Ni(Jg,vi),Ni(Xg,vi),Ni(e_,pb),e_.prototype.g=function(){return new XMLHttpRequest},e_.prototype.i=function(){return{}},mb=new e_;var nx=45e3,t_={},xc={};function gb(n,e,t){n.K=1,n.v=l(Eu(e)),n.s=t,n.U=!0,gI(n,null)}function gI(n,e){n.F=Date.now(),ap(n),n.A=Eu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),dt(t.h,"t",r),n.C=0,t=n.l.H,n.h=new op,n.g=vF(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Kg(si(n.Ia,n,n.g),n.O)),ab(n.V,n.g,"readystatechange",n.gb),e=n.H?Wv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Yg(1),function(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");u=2<=D.length&&"type"==D[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function _I(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=eF(n,t),i==xc){4==e&&(n.o=4,ws(14),r=!1),Wd(n.j,n.m,null,"[Incomplete Response]");break}if(i==t_){n.o=4,ws(15),Wd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wd(n.j,n.m,i,null),_b(n,i)}_I(n)&&i!=xc&&i!=t_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ws(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),cx(e),e.L=!0,ws(11))):(Wd(n.j,n.m,t,"[Invalid Chunked Response]"),kc(n),lp(n))}function eF(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xc:(t=Number(e.substring(t,r)),isNaN(t)?t_:(r+=1)+t>e.length?xc:(e=e.substr(r,t),n.C=r+t,e))}function ap(n){n.Y=Date.now()+n.P,vI(n,n.P)}function vI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qg(si(n.eb,n),e)}function n_(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function lp(n){0==n.l.G||n.I||mF(n.l,n)}function kc(n){n_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,uI(n.W),bu(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _b(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||cp(t.i,n)))if(t.I=n.N,!n.J&&cp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Qg(si(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;DI(t),II(t)}ux(t),ws(18)}if(1>=r_(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else fp(t,11)}else if((n.J||t.g==n)&&DI(t),!Hd(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const B=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;!s.g&&(Oi(B,"spdy")||Oi(B,"quic")||Oi(B,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(dp(s,s.h),s.h=null))}if(r.D){const ee=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.sa=ee,a(r.F,r.D,ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=yF(r,r.H?r.la:null,r.W),u.J){i_(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(n_(h),ap(h)),r.g=u}else fF(r);0<t.l.length&&TI(t)}else"stop"!=y[0]&&"close"!=y[0]||fp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?fp(t,7):ax(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Yg(4)}catch(y){}}function yb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Lg(n)||"string"==typeof n)UM(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Lg(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Lg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function up(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof up)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function bI(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Kd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Kd(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Kd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ht=Zd.prototype).setTimeout=function(n){this.P=n},ht.gb=function(n){n=n.target;const e=this.L;e&&3==Nc(n)?e.l():this.Ia(n)},ht.Ia=function(n){try{if(n==this.g)e:{const C=Nc(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||Zv||this.g&&(this.h.h||this.g.ga()||lF(this.g)))){this.I||4!=C||7==e||Yg(8==e||0>=D?3:2),n_(this);var t=this.g.ba();this.N=t;t:if(_I(this)){var r=lF(this.g);n="";var i=r.length,s=4==Nc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){kc(this),lp(this);var u="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hd(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ws(12),kc(this),lp(this);break e}Wd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_b(this,t)}this.U?(yI(this,C,u),Zv&&this.i&&3==C&&(ab(this.V,this.W,"tick",this.fb),this.W.start())):(Wd(this.j,this.m,u,null),_b(this,u)),4==C&&kc(this),this.i&&!this.I&&(4==C?mF(this.l,this):(this.i=!1,ap(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ws(12)):(this.o=0,ws(13)),kc(this),lp(this)}}}catch(C){}},ht.fb=function(){if(this.g){var n=Nc(this.g),e=this.g.ga();this.C<e.length&&(n_(this),yI(this,n,e),this.i&&4!=n&&ap(this))}},ht.cancel=function(){this.I=!0,kc(this)},ht.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yg(3),ws(17)),kc(this),this.o=2,lp(this)):vI(this,this.Y-n)},(ht=up.prototype).R=function(){bI(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ht.T=function(){return bI(this),this.g.concat()},ht.get=function(n,e){return Kd(this.h,n)?this.h[n]:e},ht.set=function(n,e){Kd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ht.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var ix=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Rc){this.g=void 0!==e?e:n.g,vb(this,n.j),this.s=n.s,bb(this,n.i),wb(this,n.m),this.l=n.l,e=n.h;var t=new te;t.i=e.i,e.g&&(t.g=new up(e.g),t.h=e.h),o(this,t),this.o=n.o}else n&&(t=String(n).match(ix))?(this.g=!!e,vb(this,t[1]||"",!0),this.s=g(t[2]||""),bb(this,t[3]||"",!0),wb(this,t[4]),this.l=g(t[5]||"",!0),o(this,t[6]||"",!0),this.o=g(t[7]||"")):(this.g=!!e,this.h=new te(null,this.g))}function Eu(n){return new Rc(n)}function vb(n,e,t){n.j=t?g(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function bb(n,e,t){n.i=t?g(e,!0):e}function wb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function o(n,e,t){e instanceof te?(n.h=e,function(n,e){e&&!n.j&&(_e(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(He(this,r),dt(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=v(e,V)),n.h=new te(e,n.g))}function a(n,e,t){n.h.set(e,t)}function l(n){return a(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function g(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function v(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,E),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function E(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(v(e,I,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(v(e,I,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(v(t,"/"==t.charAt(0)?x:A,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",v(t,Z)),n.join("")};var I=/[#\/\?@]/g,A=/[#\?:]/g,x=/[#\?]/g,V=/[#\?@]/g,Z=/#/g;function te(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function _e(n){n.g||(n.g=new up,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function He(n,e){_e(n),e=Ae(n,e),Kd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Kd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&bI(n)))}function Qe(n,e){return _e(n),e=Ae(n,e),Kd(n.g.h,e)}function dt(n,e,t){He(n,e),0<t.length&&(n.i=null,n.g.set(Ae(n,e),JC(t)),n.h+=t.length)}function Ae(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Sn(n){this.l=n||Ls,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=te.prototype).add=function(n,e){_e(this),this.i=null,n=Ae(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){_e(this),this.g.forEach(function(t,r){UM(t,function(i){n.call(e,i,r,this)},this)},this)},ht.T=function(){_e(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},ht.R=function(n){_e(this);var e=[];if("string"==typeof n)Qe(this,n)&&(e=Xf(e,this.g.get(Ae(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Xf(e,n[t])}return e},ht.set=function(n,e){return _e(this),this.i=null,Qe(this,n=Ae(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;""!==r[s]&&(u+="="+encodeURIComponent(String(r[s]))),n.push(u)}}return this.i=n.join("&")};var Ls=10;function Cu(n){return!!n.h||!!n.g&&n.g.size>=n.j}function r_(n){return n.h?1:n.g?n.g.size:0}function cp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dp(n,e){n.g?n.g.add(e):n.h=e}function i_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function s_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return JC(n.i)}function hp(){}function Eb(){this.g=new hp}function Cb(n,e,t){const r=t||"";try{yb(n,function(i,s){let u=i;jd(i)&&(u=qg(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Tb(n){this.l=n.$b||null,this.j=n.ib||!1}function EI(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=sx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sn.prototype.cancel=function(){if(this.i=s_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},hp.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},hp.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Ni(Tb,pb),Tb.prototype.g=function(){return new EI(this.l,this.j)},Tb.prototype.i=function(n){return function(){return n}}({}),Ni(EI,Vr);var sx=0;function nF(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Db(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sb(n)}function Sb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=EI.prototype).open=function(n,e){if(this.readyState!=sx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sb(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Db(this)),this.readyState=sx},ht.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sb(this)),this.g&&(this.readyState=3,Sb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nF(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ht.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Db(this):Sb(this),3==this.readyState&&nF(this)}},ht.Ua=function(n){this.g&&(this.response=this.responseText=n,Db(this))},ht.Ta=function(n){this.g&&(this.response=n,Db(this))},ht.ha=function(){this.g&&Db(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(EI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var X3=Ut.JSON.parse;function ai(n){Vr.call(this),this.headers=new up,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rF,this.K=this.L=!1}Ni(ai,Vr);var rF="",eG=/^https?$/i,tG=["POST","PUT"];function rG(n){return"content-type"==n.toLowerCase()}function iF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,sF(n),CI(n)}function sF(n){n.D||(n.D=!0,oi(n,"complete"),oi(n,"error"))}function oF(n){if(n.h&&void 0!==Hv&&(!n.C[1]||4!=Nc(n)||2!=n.ba()))if(n.v&&4==Nc(n))cI(n.Fa,0,n);else if(oi(n,"readystatechange"),4==Nc(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(ix)[1]||null;if(!i&&Ut.self&&Ut.self.location){var s=Ut.self.location.protocol;i=s.substr(0,s.length-1)}r=!eG.test(i?i.toLowerCase():"")}t=r}if(t)oi(n,"complete"),oi(n,"success");else{n.m=6;try{var u=2<Nc(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.ba()+"]",sF(n)}}finally{CI(n)}}}function CI(n,e){if(n.g){aF(n);const t=n.g,r=n.C[0]?Fg:null;n.g=null,n.C=null,e||oi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function aF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Nc(n){return n.g?n.g.readyState:0}function lF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ox(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return Ug(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):a(n,e,t))}function Ab(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function uF(n){this.za=0,this.l=[],this.h=new ip,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ab("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ab("baseRetryDelayMs",5e3,n),this.$a=Ab("retryDelaySeedMs",1e4,n),this.Ya=Ab("forwardChannelMaxRetries",2,n),this.ra=Ab("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Sn(n&&n.concurrentRequestLimit),this.Ca=new Eb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ax(n){if(cF(n),3==n.G){var e=n.V++,t=Eu(n.F);a(t,"SID",n.J),a(t,"RID",e),a(t,"TYPE","terminate"),Mb(n,t),(e=new Zd(n,n.h,e,void 0)).K=2,e.v=l(Eu(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=vF(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ap(e)}_F(n)}function II(n){n.g&&(cx(n),n.g.cancel(),n.g=null)}function cF(n){II(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),DI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function lx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&TI(n)}function TI(n){Cu(n.i)||n.m||(n.m=!0,Zg(n.Ha,n),n.C=0)}function dF(n,e){var t;t=e?e.m:n.V++;const r=Eu(n.F);a(r,"SID",n.J),a(r,"RID",t),a(r,"AID",n.U),Mb(n,r),n.o&&n.s&&ox(r,n.o,n.s),t=new Zd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=hF(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),dp(n.i,t),gb(t,r,e)}function Mb(n,e){n.j&&yb({},function(t,r){a(e,r,t)})}function hF(n,e,t){t=Math.min(n.l.length,t);var r=n.j?si(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let m=0;m<t;m++){let y=i[m].h;const C=i[m].g;if(y-=s,0>y)s=Math.max(0,i[m].h-100),h=!1;else try{Cb(C,u,"req"+y+"_")}catch(D){r&&r(C)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function fF(n){n.g||n.u||(n.Y=1,Zg(n.Ga,n),n.A=0)}function ux(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Qg(si(n.Ga,n),gF(n,n.A)),n.A++,0))}function cx(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function pF(n){n.g=new Zd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Eu(n.oa);a(e,"RID","rpc"),a(e,"SID",n.J),a(e,"CI",n.N?"0":"1"),a(e,"AID",n.U),Mb(n,e),a(e,"TYPE","xmlhttp"),n.o&&n.s&&ox(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=l(Eu(e)),t.s=null,t.U=!0,gI(t,n)}function DI(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function mF(n,e){var t=null;if(n.g==e){DI(n),cx(n),n.g=null;var r=2}else{if(!cp(n.i,e))return;t=e.D,i_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;oi(r=fb(),new tx(r,t,e,i)),TI(n)}else fF(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(r_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Qg(si(n.Ha,n,e),gF(n,n.C)),n.C++,0)))}(n,e)||2==r&&ux(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:fp(n,5);break;case 4:fp(n,10);break;case 3:fp(n,6);break;default:fp(n,2)}}function gF(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function fp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=si(n.jb,n);t||(t=new Rc("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||vb(t,"https"),l(t)),function(n,e){const t=new ip;if(Ut.Image){const r=new Image;r.onload=Gv(wI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Gv(wI,t,r,"TestLoadImage: error",!1,e),r.onabort=Gv(wI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gv(wI,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ws(2);n.G=0,n.j&&n.j.va(e),_F(n),cF(n)}function _F(n){n.G=0,n.I=-1,n.j&&((0!=s_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,JC(n.l),n.l.length=0),n.j.ua())}function yF(n,e,t){let r=function(n){return n instanceof Rc?Eu(n):new Rc(n,void 0)}(t);if(""!=r.i)e&&bb(r,e+"."+r.i),wb(r,r.m);else{const i=Ut.location;r=function(n,e,t,r){var i=new Rc(null,void 0);return n&&vb(i,n),e&&bb(i,e),t&&wb(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Ug(n.aa,function(i,s){a(r,s,i)}),t=n.sa,(e=n.D)&&t&&a(r,e,t),a(r,"VER",n.ma),Mb(n,r),r}function vF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ai(t&&n.Ba&&!n.qa?new Tb({ib:!0}):n.qa)).L=n.H,e}function bF(){}function SI(){if(ep&&!(10<=Number(Jv)))throw Error("Environmental error: no available transport.")}function Bo(n,e){Vr.call(this),this.g=new uF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Hd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new o_(this)}function wF(n){Jg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function EF(){Xg.call(this),this.status=1}function o_(n){this.g=n}(ht=ai.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mb.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:mb),this.g.onreadystatechange=si(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void iF(this,s)}n=t||"";const i=new up(this.headers);r&&yb(r,function(s,u){i.set(u,s)}),r=function(n){e:{var e=rG;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=BM(tG,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aF(this),0<this.B&&((this.K=function(n){return ep&&Yv()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=si(this.pa,this)):this.A=cI(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){iF(this,s)}},ht.pa=function(){void 0!==Hv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oi(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oi(this,"complete"),oi(this,"abort"),CI(this))},ht.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),CI(this,!0)),ai.Z.M.call(this)},ht.Fa=function(){this.s||(this.F||this.v||this.l?oF(this):this.cb())},ht.cb=function(){oF(this)},ht.ba=function(){try{return 2<Nc(this)?this.g.status:-1}catch(n){return-1}},ht.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ht.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),X3(e)}},ht.Da=function(){return this.m},ht.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=uF.prototype).ma=8,ht.G=1,ht.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ht.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Zd(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=Wv(s),qv(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=hF(this,i,e),a(t=Eu(this.F),"RID",n),a(t,"CVER",22),this.D&&a(t,"X-HTTP-Session-Id",this.D),Mb(this,t),this.o&&s&&ox(t,this.o,s),dp(this.i,i),this.Ra&&a(t,"TYPE","init"),this.ja?(a(t,"$req",e),a(t,"SID","null"),i.$=!0,gb(i,t,null)):gb(i,t,e),this.G=2}}else 3==this.G&&(n?dF(this,n):0==this.l.length||Cu(this.i)||dF(this))},ht.Ga=function(){if(this.u=null,pF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Qg(si(this.bb,this),n)}},ht.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ws(10),II(this),pF(this))},ht.ab=function(){null!=this.v&&(this.v=null,II(this),ux(this),ws(19))},ht.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ws(2)):(this.h.info("Failed to ping google.com"),ws(1))},(ht=bF.prototype).xa=function(){},ht.wa=function(){},ht.va=function(){},ht.ua=function(){},ht.Oa=function(){},SI.prototype.g=function(n,e){return new Bo(n,e)},Ni(Bo,Vr),Bo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Zg(si(n.hb,n,e))),ws(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=yF(n,null,n.W),TI(n)},Bo.prototype.close=function(){ax(this.g)},Bo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,lx(this.g,e)}else this.v?((e={}).__data__=qg(n),lx(this.g,e)):lx(this.g,n)},Bo.prototype.M=function(){this.g.j=null,delete this.j,ax(this.g),delete this.g,Bo.Z.M.call(this)},Ni(wF,Jg),Ni(EF,Xg),Ni(o_,bF),o_.prototype.xa=function(){oi(this.g,"a")},o_.prototype.wa=function(n){oi(this.g,new wF(n))},o_.prototype.va=function(n){oi(this.g,new EF(n))},o_.prototype.ua=function(){oi(this.g,"b")},SI.prototype.createWebChannel=SI.prototype.g,Bo.prototype.send=Bo.prototype.u,Bo.prototype.open=Bo.prototype.m,Bo.prototype.close=Bo.prototype.close,sp.NO_ERROR=0,sp.TIMEOUT=8,sp.HTTP_ERROR=6,fI.COMPLETE="complete",mI.EventType=qd,qd.OPEN="a",qd.CLOSE="b",qd.ERROR="c",qd.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,ai.prototype.listenOnce=ai.prototype.O,ai.prototype.getLastError=ai.prototype.La,ai.prototype.getLastErrorCode=ai.prototype.Da,ai.prototype.getStatus=ai.prototype.ba,ai.prototype.getResponseJson=ai.prototype.Qa,ai.prototype.getResponseText=ai.prototype.ga,ai.prototype.send=ai.prototype.ea;var oG=Aa.createWebChannelTransport=function(){return new SI},aG=Aa.getStatEventTarget=function(){return fb()},dx=Aa.ErrorCode=sp,lG=Aa.EventType=fI,uG=Aa.Event=wu,CF=Aa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cG=Aa.FetchXmlHttpFactory=Tb,AI=Aa.WebChannel=mI,dG=Aa.XhrIo=ai;const IF="@firebase/firestore";class ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let a_="9.8.0";const Yd=new Vo.Yd("@firebase/firestore");function hx(){return Yd.logLevel}function Ge(n,...e){if(Yd.logLevel<=Vo.in.DEBUG){const t=e.map(fx);Yd.debug(`Firestore (${a_}): ${n}`,...t)}}function li(n,...e){if(Yd.logLevel<=Vo.in.ERROR){const t=e.map(fx);Yd.error(`Firestore (${a_}): ${n}`,...t)}}function xb(n,...e){if(Yd.logLevel<=Vo.in.WARN){const t=e.map(fx);Yd.warn(`Firestore (${a_}): ${n}`,...t)}}function fx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function mt(n="Unexpected state"){const e=`FIRESTORE (${a_}) INTERNAL ASSERTION FAILED: `+n;throw li(e),new Error(e)}function Ht(n,e){n||mt()}function st(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class TF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ts.UNAUTHENTICATED))}shutdown(){}}class mG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gG{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Pi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},m=y=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Pi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ht("string"==typeof r.accessToken),new TF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ht(null===e||"string"==typeof e),new ts(e)}}class _G{constructor(e,t,r){this.type="FirstParty",this.user=ts.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class yG{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _G(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vG{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ht("string"==typeof t.token),this.p=t.token,new DF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Uo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bG(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Uo.A=-1;class SF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Jt(n,e){return n<e?-1:n>e?1:0}function l_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function AF(n){return n+"\0"}class Zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zr.fromMillis(Date.now())}static fromDate(e){return Zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Zr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Zr(0,0))}static max(){return new Lt(new Zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function MF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class kb{constructor(e,t,r){void 0===t?t=0:t>e.length&&mt(),void 0===r?r=e.length-t:r>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===kb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends kb{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const wG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends kb{construct(e,t,r){return new bi(e,t,r)}static isValidIdentifier(e){return wG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Pe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Pe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new Pe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bi(t)}static emptyPath(){return new bi([])}}class u_{constructor(e){this.fields=e,e.sort(bi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return l_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const CG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qd(n){if(Ht(!!n),"string"==typeof n){let e=0;const t=CG.exec(n);if(Ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mp(n){return"string"==typeof n?wi.fromBase64String(n):wi.fromUint8Array(n)}function px(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kF(n){const e=n.mapValue.fields.__previous_value__;return px(e)?kF(e):e}function Rb(n){const e=Qd(n.mapValue.fields.__local_write_time__.timestampValue);return new Zr(e.seconds,e.nanos)}class IG{constructor(e,t,r,i,s,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class Oc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}function Nb(n){return null==n}function Ob(n){return 0===n&&1/n==-1/0}function RF(n){return"number"==typeof n&&Number.isInteger(n)&&!Ob(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class nt{constructor(e){this.path=e}static fromPath(e){return new nt(In.fromString(e))}static fromName(e){return new nt(In.fromString(e).popFirst(5))}static empty(){return new nt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new In(e.slice()))}}const Jd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},MI={nullValue:"NULL_VALUE"};function gp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?px(n)?4:FF(n)?9007199254740991:10:mt()}function Iu(n,e){if(n===e)return!0;const t=gp(n);if(t!==gp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rb(n).isEqual(Rb(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Qd(r.timestampValue),u=Qd(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,mp(n.bytesValue).isEqual(mp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Br(r.doubleValue),u=Br(i.doubleValue);return s===u?Ob(s)===Ob(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return l_(n.arrayValue.values||[],e.arrayValue.values||[],Iu);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(MF(s)!==MF(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!Iu(s[h],u[h])))return!1;return!0}(n,e);default:return mt()}var i}function Pb(n,e){return void 0!==(n.values||[]).find(t=>Iu(t,e))}function Xd(n,e){if(n===e)return 0;const t=gp(n),r=gp(e);if(t!==r)return Jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Br(i.integerValue||i.doubleValue),h=Br(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return NF(n.timestampValue,e.timestampValue);case 4:return NF(Rb(n),Rb(e));case 5:return Jt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=mp(i),h=mp(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let m=0;m<u.length&&m<h.length;m++){const y=Jt(u[m],h[m]);if(0!==y)return y}return Jt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Jt(Br(i.latitude),Br(s.latitude));return 0!==u?u:Jt(Br(i.longitude),Br(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let m=0;m<u.length&&m<h.length;++m){const y=Xd(u[m],h[m]);if(y)return y}return Jt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Jd.mapValue&&s===Jd.mapValue)return 0;if(i===Jd.mapValue)return 1;if(s===Jd.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),m=s.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const D=Jt(h[C],y[C]);if(0!==D)return D;const R=Xd(u[h[C]],m[y[C]]);if(0!==R)return R}return Jt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw mt()}}function NF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Jt(n,e);const t=Qd(n),r=Qd(e),i=Jt(t.seconds,r.seconds);return 0!==i?i:Jt(t.nanos,r.nanos)}function c_(n){return mx(n)}function mx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Qd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mp(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=mx(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${mx(r.fields[h])}`;return s+"}"}(n.mapValue):mt();var e}function _p(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gx(n){return!!n&&"integerValue"in n}function Fb(n){return!!n&&"arrayValue"in n}function OF(n){return!!n&&"nullValue"in n}function PF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xI(n){return!!n&&"mapValue"in n}function Lb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TG(n){return"nullValue"in n?MI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_p(Oc.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function DG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_p(Oc.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jd:mt()}function LF(n,e){const t=Xd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VF(n,e){const t=Xd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lb(t)}setAll(e){let t=bi.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=Lb(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());xI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pp(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Es(Lb(this.value))}}function BF(n){const e=[];return pp(n.fields,(t,r)=>{const i=new bi([t]);if(xI(r)){const s=BF(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new u_(e)}class yr{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new yr(e,0,Lt.min(),Lt.min(),Es.empty(),0)}static newFoundDocument(e,t,r){return new yr(e,1,t,Lt.min(),r,0)}static newNoDocument(e,t){return new yr(e,2,t,Lt.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,Lt.min(),Es.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function _x(n){return n.fields.find(e=>2===e.kind)}function yp(n){return n.fields.filter(e=>2!==e.kind)}kI.UNKNOWN_ID=-1;class RI{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vb(0,fl.min())}}function UF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(1e9===r?new Zr(t+1,0):new Zr(t,r));return new fl(i,nt.empty(),e)}function SG(n){return new fl(n.readTime,n.key,-1)}class fl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fl(Lt.min(),nt.empty(),-1)}static max(){return new fl(Lt.max(),nt.empty(),-1)}}function jF(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=nt.comparator(n.documentKey,e.documentKey),0!==t?t:Jt(n.largestBatchId,e.largestBatchId))}class Kr{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new Kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NI(this.root,e,this.comparator,!1)}getReverseIterator(){return new NI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NI(this.root,e,this.comparator,!0)}}class NI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:ns.RED,this.left=null!=i?i:ns.EMPTY,this.right=null!=s?s:ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ns(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new Kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new HF(this.data.getIterator())}getIteratorFrom(e){return new HF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dr(this.comparator);return t.data=e,t}}class HF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function d_(n){return n.hasNext()?n.getNext():void 0}class AG{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function GF(n,e=null,t=[],r=[],i=null,s=null,u=null){return new AG(n,e,t,r,i,s,u)}function vp(n){const e=st(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+c_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Nb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>c_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>c_(r)).join(",")),e.P=t}return e.P}function Bb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!LG(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Iu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZF(n.startAt,e.startAt)&&ZF(n.endAt,e.endAt)}function OI(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function PI(n,e){return n.filters.filter(t=>t instanceof rs&&t.field.isEqual(e))}function $F(n,e,t){let r=MI,i=!0;for(const s of PI(n,e)){let u=MI,h=!0;switch(s.op){case"<":case"<=":u=TG(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=MI}LF({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];LF({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function zF(n,e,t){let r=Jd,i=!0;for(const s of PI(n,e)){let u=Jd,h=!0;switch(s.op){case">=":case">":u=DG(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=Jd}VF({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];VF({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class rs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new xG(e,t,r):"array-contains"===t?new NG(e,r):"in"===t?new OG(e,r):"not-in"===t?new PG(e,r):"array-contains-any"===t?new FG(e,r):new rs(e,t,r)}static V(e,t,r){return"in"===t?new kG(e,r):new RG(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xd(t,this.value)):null!==t&&gp(this.value)===gp(t)&&this.v(Xd(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xG extends rs{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){const t=nt.comparator(e.key,this.key);return this.v(t)}}class kG extends rs{constructor(e,t){super(e,"in",t),this.keys=WF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RG extends rs{constructor(e,t){super(e,"not-in",t),this.keys=WF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>nt.fromName(r.referenceValue))}class NG extends rs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fb(t)&&Pb(t.arrayValue,this.value)}}class OG extends rs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pb(this.value.arrayValue,t)}}class PG extends rs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pb(this.value.arrayValue,t)}}class FG extends rs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pb(this.value.arrayValue,r))}}class eh{constructor(e,t){this.position=e,this.inclusive=t}}class h_{constructor(e,t="asc"){this.field=e,this.dir=t}}function LG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function qF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?nt.comparator(nt.fromName(u.referenceValue),t.key):Xd(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ZF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Iu(n.position[t],e.position[t]))return!1;return!0}class Pc{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function KF(n,e,t,r,i,s,u,h){return new Pc(n,e,t,r,i,s,u,h)}function f_(n){return new Pc(n)}function yx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vx(n){for(const e of n.filters)if(e.S())return e.field;return null}function bx(n){return null!==n.collectionGroup}function p_(n){const e=st(n);if(null===e.D){e.D=[];const t=vx(e),r=yx(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new h_(t)),e.D.push(new h_(bi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new h_(bi.keyField(),s))}}}return e.D}function Ma(n){const e=st(n);if(!e.C)if("F"===e.limitType)e.C=GF(e.path,e.collectionGroup,p_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of p_(e))t.push(new h_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new eh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new eh(e.startAt.position,e.startAt.inclusive):null;e.C=GF(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function YF(n,e,t){return new Pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ub(n,e){return Bb(Ma(n),Ma(e))&&n.limitType===e.limitType}function QF(n){return`${vp(Ma(n))}|lt:${n.limitType}`}function wx(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${c_(r.value)}`;var r}).join(", ")}]`),Nb(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>c_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>c_(t)).join(",")),`Target(${e})`}(Ma(n))}; limitType=${n.limitType})`}function Ex(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):nt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=qF(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,p_(t),r)||t.endAt&&!function(i,s,u){const h=qF(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,p_(t),r)));var t,r}function JF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XF(n){return(e,t)=>{let r=!1;for(const i of p_(n)){const s=BG(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function BG(n,e,t){const r=n.field.isKeyField()?nt.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Xd(h,m):mt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}function eL(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ob(e)?"-0":e}}function tL(n){return{integerValue:""+n}}function nL(n,e){return RF(e)?tL(e):eL(n,e)}class FI{constructor(){this._=void 0}}function UG(n,e,t){return n instanceof m_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof bp?iL(n,e):n instanceof wp?sL(n,e):function(r,i){const s=rL(r,i),u=oL(s)+oL(r.k);return gx(s)&&gx(r.k)?tL(u):eL(r.M,u)}(n,e)}function jG(n,e,t){return n instanceof bp?iL(n,e):n instanceof wp?sL(n,e):t}function rL(n,e){return n instanceof g_?gx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class m_ extends FI{}class bp extends FI{constructor(e){super(),this.elements=e}}function iL(n,e){const t=aL(e);for(const r of n.elements)t.some(i=>Iu(i,r))||t.push(r);return{arrayValue:{values:t}}}class wp extends FI{constructor(e){super(),this.elements=e}}function sL(n,e){let t=aL(e);for(const r of n.elements)t=t.filter(i=>!Iu(i,r));return{arrayValue:{values:t}}}class g_ extends FI{constructor(e,t){super(),this.M=e,this.k=t}}function oL(n){return Br(n.integerValue||n.doubleValue)}function aL(n){return Fb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jb{constructor(e,t){this.field=e,this.transform=t}}class GG{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function LI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class VI{}function $G(n,e,t){n instanceof Hb?function(r,i,s){const u=r.value.clone(),h=dL(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Ep?function(r,i,s){if(!LI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=dL(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(cL(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cx(n,e,t){var i;n instanceof Hb?function(r,i,s){if(!LI(r.precondition,i))return;const u=r.value.clone(),h=hL(r.fieldTransforms,s,i);u.setAll(h),i.convertToFoundDocument(uL(i),u).setHasLocalMutations()}(n,e,t):n instanceof Ep?function(r,i,s){if(!LI(r.precondition,i))return;const u=hL(r.fieldTransforms,s,i),h=i.data;h.setAll(cL(r)),h.setAll(u),i.convertToFoundDocument(uL(i),h).setHasLocalMutations()}(n,e,t):LI(n.precondition,i=e)&&i.convertToNoDocument(Lt.min())}function zG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=rL(r.transform,i||null);null!=s&&(null==t&&(t=Es.empty()),t.set(r.field,s))}return t||null}function lL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&l_(t,r,(i,s)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof bp&&r instanceof bp||t instanceof wp&&r instanceof wp?l_(t.elements,r.elements,Iu):t instanceof g_&&r instanceof g_?Iu(t.k,r.k):t instanceof m_&&r instanceof m_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function uL(n){return n.isFoundDocument()?n.version:Lt.min()}class Hb extends VI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ep extends VI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function cL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dL(n,e,t){const r=new Map;Ht(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,jG(u,h,t[i]))}return r}function hL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,UG(s,u,e))}return r}class Gb extends VI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ix extends VI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class WG{constructor(e){this.count=e}}var ci,Tn;function fL(n){switch(n){default:return mt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function pL(n){if(void 0===n)return li("GRPC error has no .code"),pe.UNKNOWN;switch(n){case ci.OK:return pe.OK;case ci.CANCELLED:return pe.CANCELLED;case ci.UNKNOWN:return pe.UNKNOWN;case ci.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case ci.INTERNAL:return pe.INTERNAL;case ci.UNAVAILABLE:return pe.UNAVAILABLE;case ci.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case ci.NOT_FOUND:return pe.NOT_FOUND;case ci.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case ci.ABORTED:return pe.ABORTED;case ci.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case ci.DATA_LOSS:return pe.DATA_LOSS;default:return mt()}}(Tn=ci||(ci={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class th{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pp(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xF(this.inner)}size(){return this.innerSize}}const qG=new Kr(nt.comparator);function xa(){return qG}const ZG=new Kr(nt.comparator);function Tx(...n){let e=ZG;for(const t of n)e=e.insert(t.key,t);return e}function $b(){return new th(n=>n.toString(),(n,e)=>n.isEqual(e))}const KG=new Kr(nt.comparator),YG=new dr(nt.comparator);function Hn(...n){let e=YG;for(const t of n)e=e.add(t);return e}const QG=new dr(Jt);function BI(){return QG}class zb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Wb.createSynthesizedTargetChangeForCurrentChange(e,t)),new zb(Lt.min(),r,BI(),xa(),Hn())}}class Wb{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Wb(wi.EMPTY_BYTE_STRING,t,Hn(),Hn(),Hn())}}class UI{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class mL{constructor(e,t){this.targetId=e,this.$=t}}class gL{constructor(e,t,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class _L{constructor(){this.B=0,this.L=vL(),this.U=wi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Hn(),t=Hn(),r=Hn();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new Wb(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=vL()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class JG{constructor(e){this.nt=e,this.st=new Map,this.it=xa(),this.rt=yL(),this.ot=new dr(Jt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(OI(s))if(0===r){const u=new nt(s.path);this.ct(t,u,yr.newNoDocument(u,Lt.min()))}else Ht(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&OI(h.target)){const m=new nt(h.target.path);null!==this.it.get(m)||this.It(u,m)||this.ct(u,m,yr.newNoDocument(m,e))}s.j&&(t.set(u,s.H()),s.J())}});let r=Hn();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(m=>{const y=this.wt(m);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,u)=>u.setReadTime(e));const i=new zb(e,t,this.ot,this.it,r);return this.it=xa(),this.rt=yL(),this.ot=new dr(Jt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new _L,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new dr(Jt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new _L),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function yL(){return new Kr(nt.comparator)}function vL(){return new Kr(nt.comparator)}const XG={asc:"ASCENDING",desc:"DESCENDING"},e$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class t${constructor(e,t){this.databaseId=e,this.N=t}}function qb(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bL(n,e){return n.N?e.toBase64():e.toUint8Array()}function n$(n,e){return qb(n,e.toTimestamp())}function Fi(n){return Ht(!!n),Lt.fromTimestamp(function(e){const t=Qd(e);return new Zr(t.seconds,t.nanos)}(n))}function Dx(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wL(n){const e=In.fromString(n);return Ht(xL(e)),e}function Zb(n,e){return Dx(n.databaseId,e.path)}function Tu(n,e){const t=wL(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(CL(t))}function Sx(n,e){return Dx(n.databaseId,e)}function EL(n){const e=wL(n);return 4===e.length?In.emptyPath():CL(e)}function Kb(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CL(n){return Ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function IL(n,e,t){return{name:Zb(n,e),fields:t.value.mapValue.fields}}function TL(n,e,t){const r=Tu(n,e.name),i=Fi(e.updateTime),s=new Es({mapValue:{fields:e.fields}}),u=yr.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Yb(n,e){let t;if(e instanceof Hb)t={update:IL(n,e.key,e.value)};else if(e instanceof Gb)t={delete:Zb(n,e.key)};else if(e instanceof Ep)t={update:IL(n,e.key,e.data),updateMask:d$(e.fieldMask)};else{if(!(e instanceof Ix))return mt();t={verify:Zb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof m_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof bp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof wp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof g_)return{fieldPath:s.field.canonicalString(),increment:u.k};throw mt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:n$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:mt()),t;var i}function Ax(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ui.updateTime(Fi(i.updateTime)):void 0!==i.exists?ui.exists(i.exists):ui.none():ui.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(Ht("REQUEST_TIME"===u.setToServerValue),h=new m_):"appendMissingElements"in u?h=new bp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new wp(u.removeAllFromArray.values||[]):"increment"in u?h=new g_(s,u.increment):mt();const m=bi.fromServerFormat(u.fieldPath);return new jb(m,h)}(n,i)):[];var i;if(e.update){const i=Tu(n,e.update.name),s=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new u_((e.updateMask.fieldPaths||[]).map(y=>bi.fromServerFormat(y)));return new Ep(i,s,u,t,r)}return new Hb(i,s,t,r)}if(e.delete){const i=Tu(n,e.delete);return new Gb(i,t)}if(e.verify){const i=Tu(n,e.verify);return new Ix(i,t)}return mt()}function DL(n,e){return{documents:[Sx(n,e.path)]}}function SL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Sx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Sx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const y=m.map(C=>function(D){if("=="===D.op){if(PF(D.value))return{unaryFilter:{field:__(D.field),op:"IS_NAN"}};if(OF(D.value))return{unaryFilter:{field:__(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(PF(D.value))return{unaryFilter:{field:__(D.field),op:"IS_NOT_NAN"}};if(OF(D.value))return{unaryFilter:{field:__(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__(D.field),op:l$(D.op),value:D.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(m){if(0!==m.length)return m.map(y=>{return{field:__((C=y).field),direction:a$(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.N||Nb(y)?y:{value:y});var y,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function AL(n){let e=EL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ht(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=ML(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new h_(y_((D=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(C){let D;return D="object"==typeof C?C.value:C,Nb(D)?null:D}(t.limit));let m=null;var C;t.startAt&&(m=new eh((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new eh(C.values||[],!C.before)}(t.endAt)),KF(e,i,u,s,h,"F",m,y)}function ML(n){return n?void 0!==n.unaryFilter?[c$(n)]:void 0!==n.fieldFilter?[u$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ML(e)).reduce((e,t)=>e.concat(t)):mt():[]}function a$(n){return XG[n]}function l$(n){return e$[n]}function __(n){return{fieldPath:n.canonicalString()}}function y_(n){return bi.fromServerFormat(n.fieldPath)}function u$(n){return rs.create(y_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function c$(n){switch(n.unaryFilter.op){case"IS_NAN":const e=y_(n.unaryFilter.field);return rs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=y_(n.unaryFilter.field);return rs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=y_(n.unaryFilter.field);return rs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=y_(n.unaryFilter.field);return rs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}function d$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kL(e)),e=h$(n.get(t),e);return kL(e)}function h$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function kL(n){return n+"\x01\x01"}function Du(n){const e=n.length;if(Ht(e>=2),2===e)return Ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&mt(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:mt()}s=u+2}return new In(r)}const RL=["userId","batchId"];function jI(n,e){return[n,Vs(e)]}function NL(n,e,t){return[n,Vs(e),t]}const f$={},p$=["prefixPath","collectionGroup","readTime","documentId"],m$=["prefixPath","collectionGroup","documentId"],g$=["collectionGroup","readTime","prefixPath","documentId"],_$=["canonicalId","targetId"],y$=["targetId","path"],v$=["path","targetId"],b$=["collectionId","parent"],w$=["indexId","uid"],E$=["uid","sequenceNumber"],C$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],I$=["indexId","uid","orderedDocumentKey"],T$=["userId","collectionPath","documentId"],D$=["userId","collectionPath","largestBatchId"],S$=["userId","collectionGroup","largestBatchId"],OL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],A$=[...OL,"documentOverlays"],PL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],M$=[...PL,"indexConfiguration","indexState","indexEntries"],FL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},m=>r(m))}),u=!0,s===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class HI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Pi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Qb(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Mx(r.target.error);this.At.reject(new Qb(e,i))}}static open(e,t,r,i){try{return new HI(t,e.transaction(i,r))}catch(s){throw new Qb(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new k$(t)}}class pl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===pl.Vt((0,F.z$)())&&li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),Ip(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(pl.St())return!0;const e=(0,F.z$)(),t=pl.Vt(e),r=0<t&&t<10,i=pl.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Te.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Qb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Pe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Qb(e,h))},s.onupgradeneeded=u=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Te.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.Nt(e);const m=HI.open(s.db,e,u?"readonly":"readwrite",r),y=i(m).next(C=>(m.bt(),C)).catch(C=>(m.abort(C),me.reject(C))).toPromise();return y.catch(()=>{}),yield m.Rt,y}catch(m){const y="FirebaseError"!==m.name&&h<3;if(Ge("SimpleDb","Transaction failed with error:",m.message,"Retrying:",y),s.close(),!y)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class x${constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ip(this.Ft.delete())}}class Qb extends Pe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cp(n){return"IndexedDbTransactionError"===n.name}class k${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ip(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),Ip(this.store.add(e))}get(e){return Ip(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),Ip(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),Ip(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Kt(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new me((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,u,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=s=>{const u=Mx(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const m=new x$(h),y=t(h.primaryKey,h.value,m);if(y instanceof me){const C=y.catch(D=>(m.done(),me.reject(D)));r.push(C)}m.isDone?i():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ip(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Mx(r.target.error);t(i)}})}let VL=!1;function Mx(n){const e=pl.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VL||(VL=!0,setTimeout(()=>{throw r},0)),r}}return n}class BL extends LL{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Li(n,e){const t=st(n);return pl.xt(t.Ht,e)}class xx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$G(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Cx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Cx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Lt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Hn())}isEqual(e){return this.batchId===e.batchId&&l_(this.mutations,e.mutations,(t,r)=>lL(t,r))&&l_(this.baseMutations,e.baseMutations,(t,r)=>lL(t,r))}}class kx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ht(e.mutations.length===r.length);let i=KG;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new kx(e,t,r,i)}}class Rx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nh{constructor(e,t,r,i,s=Lt.min(),u=Lt.min(),h=wi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new nh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class UL{constructor(e){this.Jt=e}}function jL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:GI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zb(i=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:qb(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tp(e.version)};else{if(!e.isUnknownDocument())return mt();r.unknownDocument={path:t.path.toArray(),version:Tp(e.version)}}var i,s;return r}function GI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dp(n){const e=new Zr(n.seconds,n.nanoseconds);return Lt.fromTimestamp(e)}function v_(n,e){const t=(e.baseMutations||[]).map(s=>Ax(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>Ax(n.Jt,s)),i=Zr.fromMillis(e.localWriteTimeMs);return new xx(e.batchId,i,t,r)}function Jb(n){const e=Dp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Dp(n.lastLimboFreeSnapshotVersion):Lt.min();let r;var i;return void 0!==n.query.documents?(Ht(1===(i=n.query).documents.length),r=Ma(f_(EL(i.documents[0])))):r=Ma(AL(n.query)),new nh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wi.fromBase64String(n.resumeToken))}function HL(n,e){const t=Tp(e.snapshotVersion),r=Tp(e.lastLimboFreeSnapshotVersion);let i;i=OI(e.target)?DL(n.Jt,e.target):SL(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Nx(n){const e=AL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?YF(e,e.limit,"L"):e}function Ox(n,e){return new Rx(e.largestBatchId,Ax(n.Jt,e.overlayMutation))}function GL(n,e){const t=e.path.lastSegment();return[n,Vs(e.path.popLast()),t]}class N${getBundleMetadata(e,t){return $L(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Dp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return $L(e).put({bundleId:(r=t).id,createTime:Tp(Fi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Nx(i.bundledQuery),readTime:Dp(i.readTime)};var i})}saveNamedQuery(e,t){return zL(e).put({name:(r=t).name,readTime:Tp(Fi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $L(n){return Li(n,"bundles")}function zL(n){return Li(n,"namedQueries")}class Px{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Px(e,t.uid||"")}getOverlay(e,t){return Xb(e).get(GL(this.userId,t)).next(r=>r?Ox(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const h=new Rx(t,u);i.push(this.Xt(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Vs(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Xb(e).Qt("collectionPathOverlayIndex",h))}),me.waitFor(s)}getOverlaysForCollection(e,t,r){const i=$b(),s=Vs(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xb(e).qt("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const y=Ox(this.M,m);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=$b();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xb(e).Wt({index:"collectionGroupOverlayIndex",range:h},(m,y,C)=>{const D=Ox(this.M,y);s.size()<i||D.largestBatchId===u?(s.set(D.getKey(),D),u=D.largestBatchId):C.done()}).next(()=>s)}Xt(e,t){return Xb(e).put(function(r,i,s){const[u,h,m]=GL(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Yb(r.Jt,s.mutation)}}(this.M,this.userId,t))}}function Xb(n){return Li(n,"documentOverlays")}class Sp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ob(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(mp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?FF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):mt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),nt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function O$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function WL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=O$(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Sp.fe=new Sp;class P${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=WL(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=WL(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class F${constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class L${constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class e0{constructor(){this.De=new P$,this.Ce=new F$(this.De),this.xe=new L$(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ap{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ap(this.indexId,this.documentKey,this.arrayValue,r)}}function Mp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=qL(n.arrayValue,e.arrayValue),0!==t?t:(t=qL(n.directionalValue,e.directionalValue),0!==t?t:nt.comparator(n.documentKey,e.documentKey)))}function qL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class V${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=_x(e);if(void 0!==t&&!this.Be(t))return!1;const r=yp(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class B${constructor(){this.qe=new Fx}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(fl.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class Fx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dr(In.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(In.comparator)).toArray()}}const $I=new Uint8Array(0);class U${constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Fx,this.Ge=new th(r=>vp(r),(r,i)=>Bb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:r,parent:Vs(i)};return ZL(e).put(s)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[AF(t),""],!1,!0);return ZL(e).qt(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Du(u.parent))}return r})}addFieldIndex(e,t){const r=zI(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=zI(e),i=WI(e),s=t0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=t0(e);let i=!0;const s=new Map;return me.forEach(this.Qe(t),u=>this.je(e,u).next(h=>{i&&(i=!!h),s.set(u,h)})).next(()=>{if(i){let u=Hn();const h=[];return me.forEach(s,(m,y)=>{var C;Ge("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${vp(t)}`);const D=function(ft,lt){const Gt=_x(lt);if(void 0===Gt)return null;for(const Xt of PI(ft,Gt.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(y,m),R=function(ft,lt){const Gt=new Map;for(const Xt of yp(lt))for(const Pn of PI(ft,Xt.fieldPath))switch(Pn.op){case"==":case"in":Gt.set(Xt.fieldPath.canonicalString(),Pn.value);break;case"not-in":case"!=":return Gt.set(Xt.fieldPath.canonicalString(),Pn.value),Array.from(Gt.values())}return null}(y,m),L=function(ft,lt){const Gt=[];let Xt=!0;for(const Pn of yp(lt)){const $s=0===Pn.kind?$F(ft,Pn.fieldPath,ft.startAt):zF(ft,Pn.fieldPath,ft.startAt);Gt.push($s.value),Xt&&(Xt=$s.inclusive)}return new eh(Gt,Xt)}(y,m),B=function(ft,lt){const Gt=[];let Xt=!0;for(const Pn of yp(lt)){const $s=0===Pn.kind?zF(ft,Pn.fieldPath,ft.endAt):$F(ft,Pn.fieldPath,ft.endAt);Gt.push($s.value),Xt&&(Xt=$s.inclusive)}return new eh(Gt,Xt)}(y,m),ee=this.We(m,y,L),be=this.We(m,y,B),qe=this.ze(m,y,R),ot=this.He(m.indexId,D,ee,L.inclusive,be,B.inclusive,qe);return me.forEach(ot,ft=>r.Gt(ft,t.limit).next(lt=>{lt.forEach(Gt=>{const Xt=nt.fromSegments(Gt.documentKey);u.has(Xt)||(u=u.add(Xt),h.push(Xt))})}))}).next(()=>h)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,s,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,s.length),y=m/(null!=t?t.length:1),C=[];for(let D=0;D<m;++D){const R=t?this.Je(t[D/y]):$I,L=this.Ye(e,R,r[D%y],i),B=this.Xe(e,R,s[D%y],u),ee=h.map(be=>this.Ye(e,R,be,!0));C.push(...this.createRange(L,B,ee))}return C}Ye(e,t,r,i){const s=new Ap(e,nt.empty(),t,r);return i?s:s.ke()}Xe(e,t,r,i){const s=new Ap(e,nt.empty(),t,r);return i?s.ke():s}je(e,t){const r=new V$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const h of s)r.$e(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let h=new dr(bi.comparator),m=!1;for(const y of u.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:h=h.add(C.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new e0;for(const i of yp(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Ne(i.kind);Sp.fe.Zt(s,u)}return r.Se()}Je(e){const t=new e0;return Sp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new e0;return Sp.fe.Zt(_p(this.databaseId,t),r.Ne(function(i){const s=yp(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new e0);let s=0;for(const u of yp(e)){const h=r[s++];for(const m of i)if(this.en(t,u.fieldPath)&&Fb(h))i=this.nn(i,u,h);else{const y=m.Ne(u.kind);Sp.fe.Zt(h,y)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const h of i){const m=new e0;m.seed(h.Se()),Sp.fe.Zt(u,m.Ne(t.kind)),s.push(m)}return s}en(e,t){return!!e.filters.find(r=>r instanceof rs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zI(e),i=WI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const u=[];return me.forEach(s,h=>i.get([h.indexId,this.uid]).next(m=>{u.push(function(y,C){const D=C?new Vb(C.sequenceNumber,new fl(Dp(C.readTime),new nt(Du(C.documentKey)),C.largestBatchId)):Vb.empty(),R=y.fields.map(([L,B])=>new RI(bi.fromServerFormat(L),B));return new kI(y.indexId,y.collectionGroup,R,D)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zI(e),s=WI(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,m=>{return s.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Tp((R=r).readTime),documentKey:Vs(R.documentKey.path),largestBatchId:R.largestBatchId});var R})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?me.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,m=>this.on(e,i,m).next(y=>{const C=this.un(s,m);return y.isEqual(C)?me.resolve():this.an(e,s,m,y,C)}))))})}cn(e,t,r,i){return t0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return t0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=t0(e);let s=new dr(Mp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,h)=>{s=s.add(new Ap(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}un(e,t){let r=new dr(Mp);const i=this.Ze(t,e);if(null==i)return r;const s=_x(t);if(null!=s){const u=e.data.field(s.fieldPath);if(Fb(u))for(const h of u.arrayValue.values||[])r=r.add(new Ap(t.indexId,e.key,this.Je(h),i))}else r=r.add(new Ap(t.indexId,e.key,$I,i));return r}an(e,t,r,i,s){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,y,C,D){const R=h.getIterator(),L=m.getIterator();let B=d_(R),ee=d_(L);for(;B||ee;){let be=!1,qe=!1;if(B&&ee){const ot=y(B,ee);ot<0?qe=!0:ot>0&&(be=!0)}else null!=B?qe=!0:be=!0;be?(C(ee),ee=d_(L)):qe?(D(B),B=d_(R)):(B=d_(R),ee=d_(L))}}(i,s,Mp,h=>{u.push(this.cn(e,t,r,h))},h=>{u.push(this.hn(e,t,r,h))}),me.waitFor(u)}rn(e){let t=1;return WI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Mp(u,h)).filter((u,h,m)=>!h||0!==Mp(u,m[h-1]));const i=[];i.push(e);for(const u of r){const h=Mp(u,e),m=Mp(u,t);if(0===h)i[0]=e.ke();else if(h>0&&m<0)i.push(u),i.push(u.ke());else if(m>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,$I,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,$I,[]]));return s}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?(!r||jF(s.indexState.offset,r)<0)&&(r=s.indexState.offset):r=fl.min()})).next(()=>r)}}function ZL(n){return Li(n,"collectionParents")}function t0(n){return Li(n,"indexEntries")}function zI(n){return Li(n,"indexConfiguration")}function WI(n){return Li(n,"indexState")}const KL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function YL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.Wt({range:u},(C,D,R)=>(h++,R.delete()));s.push(m.next(()=>{Ht(1===h)}));const y=[];for(const C of t.mutations){const D=NL(e,C.key.path,t.batchId);s.push(i.delete(D)),y.push(C.key)}return me.waitFor(s).next(()=>y)}function qI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw mt();e=n.noDocument}return JSON.stringify(e).length}ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(41943040,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);class Lx{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ht(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Lx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).Wt({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=b_(e),u=rh(e);return u.add({}).next(h=>{Ht("number"==typeof h);const m=new xx(h,t,r,i),y=function(R,L,B){const ee=B.baseMutations.map(qe=>Yb(R.Jt,qe)),be=B.mutations.map(qe=>Yb(R.Jt,qe));return{userId:L,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:ee,mutations:be}}(this.M,this.userId,m),C=[];let D=new dr((R,L)=>Jt(R.canonicalString(),L.canonicalString()));for(const R of i){const L=NL(this.userId,R.key.path,h);D=D.add(R.key.path.popLast()),C.push(u.put(y)),C.push(s.put(L,f$))}return D.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.ln[h]=m.keys()}),me.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return rh(e).get(t).next(r=>r?(Ht(r.userId===this.userId),v_(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return rh(e).Wt({index:"userMutationsIndex",range:i},(u,h,m)=>{h.userId===this.userId&&(Ht(h.batchId>=r),s=v_(this.M,h)),m.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>v_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return b_(e).Wt({range:i},(u,h,m)=>{const[y,C,D]=u,R=Du(C);if(y===this.userId&&t.path.isEqual(R))return rh(e).get(D).next(L=>{if(!L)throw mt();Ht(L.userId===this.userId),s.push(v_(this.M,L))});m.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(Jt);const i=[];return t.forEach(s=>{const u=jI(this.userId,s.path),h=IDBKeyRange.lowerBound(u),m=b_(e).Wt({range:h},(y,C,D)=>{const[R,L,B]=y,ee=Du(L);R===this.userId&&s.path.isEqual(ee)?r=r.add(B):D.done()});i.push(m)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=jI(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new dr(Jt);return b_(e).Wt({range:u},(m,y,C)=>{const[D,R,L]=m,B=Du(R);D===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(L)):C.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(rh(e).get(s).next(u=>{if(null===u)throw mt();Ht(u.userId===this.userId),r.push(v_(this.M,u))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return YL(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return b_(e).Wt({range:r},(s,u,h)=>{if(s[0]===this.userId){const m=Du(s[1]);i.push(m)}else h.done()}).next(()=>{Ht(0===i.length)})})}containsKey(e,t){return QL(e,this.userId,t)}wn(e){return JL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function QL(n,e,t){const r=jI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return b_(n).Wt({range:s,jt:!0},(h,m,y)=>{const[C,D,R]=h;C===e&&D===i&&(u=!0),y.done()}).next(()=>u)}function rh(n){return Li(n,"mutations")}function b_(n){return Li(n,"documentMutations")}function JL(n){return Li(n,"mutationQueues")}class xp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new xp(0)}static yn(){return new xp(-1)}}class j${constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new xp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Lt.fromTimestamp(new Zr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>w_(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ht(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return w_(e).Wt((u,h)=>{const m=Jb(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,s.push(this.removeTargetData(e,m)))}).next(()=>me.waitFor(s)).next(()=>i)}forEachTarget(e,t){return w_(e).Wt((r,i)=>{const s=Jb(i);t(s)})}pn(e){return XL(e).get("targetGlobalKey").next(t=>(Ht(null!==t),t))}In(e,t){return XL(e).put("targetGlobalKey",t)}Tn(e,t){return w_(e).put(HL(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return w_(e).Wt({range:i,index:"queryTargetsIndex"},(u,h,m)=>{const y=Jb(h);Bb(t,y.target)&&(s=y,m.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ih(e);return t.forEach(u=>{const h=Vs(u.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=ih(e);return me.forEach(t,s=>{const u=Vs(s.path);return me.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ih(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ih(e);let s=Hn();return i.Wt({range:r,jt:!0},(u,h,m)=>{const y=Du(u[1]),C=new nt(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Vs(t.path),i=IDBKeyRange.bound([r],[AF(r)],!1,!0);let s=0;return ih(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,h],m,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return w_(e).get(t).next(r=>r?Jb(r):null)}}function w_(n){return Li(n,"targets")}function XL(n){return Li(n,"targetGlobal")}function ih(n){return Li(n,"targetDocuments")}function kp(n){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Te.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==FL)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),Vx.apply(this,arguments)}function eV([n,e],[t,r]){const i=Jt(n,t);return 0===i?Jt(e,r):i}class H${constructor(e){this.An=e,this.buffer=new dr(eV),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G${constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ge("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Te.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Cp(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield kp(i)}yield t.Sn(e)}))}}class $${constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Uo.A);const r=new H$(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(KL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KL):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,s,u,h,m,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),hx()<=Vo.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(m-h)+`ms\n\tRemoved ${D} documents in `+(y-m)+`ms\nTotal Duration: ${y-C}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class z${constructor(e,t){this.db=e,this.garbageCollector=new $$(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return ZI(e,r)}removeReference(e,t,r){return ZI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ZI(e,t)}On(e,t){return function(r,i){let s=!1;return JL(r).zt(u=>QL(r,u,i).next(h=>(h&&(s=!0),me.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(e,(u,h)=>{if(h<=t){const m=this.On(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Lt.min()),ih(e).delete([0,Vs(u.path)])))});i.push(m)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ZI(e,t)}Mn(e,t){const r=ih(e);let i,s=Uo.A;return r.Wt({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:y})=>{0===u?(s!==Uo.A&&t(new nt(Du(i)),s),s=y,i=m):s=Uo.A}).next(()=>{s!==Uo.A&&t(new nt(Du(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ZI(n,e){return ih(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vs(e.path),sequenceNumber:r}));var r}class tV{constructor(){this.changes=new th(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class W${constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rp(e).put(r)}removeEntry(e,t,r){return Rp(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],GI(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=yr.newInvalidDocument(t);return Rp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(n0(t))},(i,s)=>{r=this.$n(t,s)}).next(()=>r)}Bn(e,t){let r={size:0,document:yr.newInvalidDocument(t)};return Rp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(n0(t))},(i,s)=>{r={document:this.$n(t,s),size:qI(s)}}).next(()=>r)}getEntries(e,t){let r=xa();return this.Ln(e,t,(i,s)=>{const u=this.$n(i,s);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=xa(),i=new Kr(nt.comparator);return this.Ln(e,t,(s,u)=>{const h=this.$n(s,u);r=r.insert(s,h),i=i.insert(s,qI(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new dr(iV);t.forEach(m=>i=i.add(m));const s=IDBKeyRange.bound(n0(i.first()),n0(i.last())),u=i.getIterator();let h=u.getNext();return Rp(e).Wt({index:"documentKeyIndex",range:s},(m,y,C)=>{const D=nt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&iV(h,D)<0;)r(h,null),h=u.getNext();h&&h.isEqual(D)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?C.Ut(n0(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),GI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rp(e).qt(IDBKeyRange.bound(i,s,!0)).next(u=>{let h=xa();for(const m of u){const y=this.$n(nt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=xa();const u=rV(t,r),h=rV(t,fl.max());return Rp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,y,C)=>{const D=this.$n(nt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&C.done()}).next(()=>s)}newChangeBuffer(e){return new q$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return nV(e).get("remoteDocumentGlobalKey").next(t=>(Ht(!!t),t))}Fn(e,t){return nV(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=TL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=nt.fromSegments(e.noDocument.path),i=Dp(e.noDocument.readTime);t=yr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const r=nt.fromSegments(e.unknownDocument.path),i=Dp(e.unknownDocument.version);t=yr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Zr(r[0],r[1]);return Lt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Lt.min()))return r}return yr.newInvalidDocument(e)}}class q$ extends tV{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new th(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new dr((s,u)=>Jt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,h.readTime)),u.isValidDocument()){const m=jL(this.Kn.M,u);i=i.add(s.path.popLast()),r+=qI(m)-h.size,t.push(this.Kn.addEntry(e,s,m))}else if(r-=h.size,this.trackRemovals){const m=jL(this.Kn.M,u.convertToNoDocument(Lt.min()));t.push(this.Kn.addEntry(e,s,m))}}),i.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((s,u)=>{this.Gn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function nV(n){return Li(n,"remoteDocumentGlobal")}function Rp(n){return Li(n,"remoteDocumentsV14")}function n0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rV(n,e){const t=e.documentKey.path.toArray();return[n,GI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Jt(t[s],r[s]),i)return i;return i=Jt(t.length,r.length),i||(i=Jt(t[t.length-2],r[r.length-2]),i||Jt(t[t.length-1],r[r.length-1]))}class Z${constructor(e){this.M=e}kt(e,t,r,i){const s=new HI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RL,{unique:!0}),h.createObjectStore("documentMutations"),sV(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),sV(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RL,{unique:!0});const C=m.store("mutations"),D=y.map(R=>C.put(R));return me.waitFor(D)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(s))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:T$});m.createIndex("collectionPathOverlayIndex",D$,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",S$,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:p$});m.createIndex("documentKeyIndex",m$),m.createIndex("collectionGroupIndex",g$)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:w$}).createIndex("sequenceNumberIndex",E$,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:C$}).createIndex("documentKeyIndex",I$,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=qI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(h=>me.forEach(h,m=>{Ht(m.userId===s.userId);const y=v_(this.M,m);return YL(e,s.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((u,h)=>{const m=new In(u),y=[0,Vs(m)];s.push(t.get(y).next(C=>C?me.resolve():t.put({targetId:0,path:Vs(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:b$});const r=t.store("collectionParents"),i=new Fx,s=u=>{if(i.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:Vs(m)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,h)=>{const m=new In(u);return s(m.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,h,m],y)=>{const C=Du(h);return s(C.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const s=Jb(i),u=HL(this.M,s);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((s,u)=>{const h=t.store("remoteDocumentsV14"),m=(y=u,y.document?new nt(In.fromString(y.document.name).popFirst(5)):y.noDocument?nt.fromSegments(y.noDocument.path):y.unknownDocument?nt.fromSegments(y.unknownDocument.path):mt()).path.toArray();var y;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(C))}).next(()=>me.waitFor(i))}}function sV(n){n.createObjectStore("targetDocuments",{keyPath:y$}).createIndex("documentTargetsIndex",v$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_$,{unique:!0}),n.createObjectStore("targetGlobal")}const Bx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ux{constructor(e,t,r,i,s,u,h,m,y,C,D=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=s,this.window=u,this.document=h,this.Xn=y,this.Zn=C,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=R=>Promise.resolve(),!Ux.vt())throw new Pe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new z$(this,i),this.hs=t+"main",this.M=new UL(m),this.ls=new pl(this.hs,this.ts,new Z$(this.M)),this.fs=new j$(this.referenceDelegate,this.M),this.ds=new W$(this.M),this._s=new N$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(pe.FAILED_PRECONDITION,Bx);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Uo(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>KI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Cp(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return r0(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return KI(e).delete(this.clientId)}vs(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Li(r,"clientMetadata");return i.qt().next(s=>{const u=e.Ds(s,18e5),h=s.filter(m=>-1===u.indexOf(m));return me.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):r0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(pe.FAILED_PRECONDITION,Bx);return!1}}return!(!this.networkEnabled||!this.inForeground)||KI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new BL(t,Uo.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>KI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Lx.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new U$(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Px.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(u=this.ts)?M$:13===u?PL:12===u?A$:11===u?OL:void mt();var u;let h;return this.ls.runTransaction(e,i,s,m=>(h=new BL(m,this.es?this.es.next():Uo.A),"readwrite-primary"===t?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw li(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(pe.FAILED_PRECONDITION,FL);return r(h)}).next(y=>this.bs(h).next(()=>y)):this.$s(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}$s(e){return r0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(pe.FAILED_PRECONDITION,Bx)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return r0(e).put("owner",t)}static vt(){return pl.vt()}Rs(e){const t=r0(e);return t.get("owner").next(r=>this.Ps(r)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(li(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return li("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){li("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function r0(n){return Li(n,"owner")}function KI(n){return Li(n,"clientMetadata")}function jx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class K${constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return nt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):bx(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new nt(t)).next(r=>{let i=Tx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let s=Tx();return this.indexManager.getCollectionParents(e,i).next(u=>me.forEach(u,h=>{const m=(y=t,C=h.child(i),new Pc(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.zs(e,m,r).next(y=>{y.forEach((C,D)=>{s=s.insert(C,D)})})}).next(()=>s))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const u of s)for(const h of u.mutations){const m=h.key;let y=i.get(m);null==y&&(y=yr.newInvalidDocument(m),i=i.insert(m,y)),Cx(h,y,u.localWriteTime),y.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((s,u)=>{Ex(t,u)||(i=i.remove(s))}),i))}}class Hx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Hn(),i=Hn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hx(e,t.fromCache,r,i)}}class oV{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(s=>s||this.ei(e,t,i,r)).next(s=>s||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Lt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(s=>{const u=this.si(t,s);return this.ii(t,u,r,i)?this.ni(e,t):(hx()<=Vo.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wx(t)),this.ri(e,u,t,UF(i,-1)))})}si(e,t){let r=new dr(XF(e));return t.forEach((i,s)=>{Ex(e,s)&&(r=r.add(s))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,t){return hx()<=Vo.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",wx(t)),this.Zs.Qs(e,t,fl.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class Y${constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Kr(Jt),this.ai=new th(s=>vp(s),Bb),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new K$(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function aV(n,e,t,r){return new Y$(n,e,t,r)}function lV(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,Te.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(s=>(i=s,t.li(e),t.Bs.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let m=Hn();for(const y of i){u.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}return t.fi.Ks(r,m).next(y=>({di:y,removedBatchIds:u,addedBatchIds:h}))})})}),Gx.apply(this,arguments)}function Q$(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(u,h,m,y){const C=m.batch,D=C.keys();let R=me.resolve();return D.forEach(L=>{R=R.next(()=>y.getEntry(h,L)).next(B=>{const ee=m.docVersions.get(L);Ht(null!==ee),B.version.compareTo(ee)<0&&(C.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))})}),R.next(()=>u.Bs.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function uV(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function J$(n,e){const t=st(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((y,C)=>{const D=i.get(C);if(!D)return;h.push(t.fs.removeMatchingKeys(s,y.removedDocuments,C).next(()=>t.fs.addMatchingKeys(s,y.addedDocuments,C)));let R=D.withSequenceNumber(s.currentSequenceNumber);var L,B,ee;e.targetMismatches.has(C)?R=R.withResumeToken(wi.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),i=i.insert(C,R),B=R,ee=y,(0===(L=D).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(s,R))});let m=xa();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(cV(s,u,e.documentUpdates).next(y=>{m=y})),!r.isEqual(Lt.min())){const y=t.fs.getLastRemoteSnapshotVersion(s).next(C=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return me.waitFor(h).next(()=>u.apply(s)).next(()=>t.fi.Gs(s,m)).next(()=>m)}).then(s=>(t.ui=i,s))}function cV(n,e,t){let r=Hn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=xa();return t.forEach((u,h)=>{const m=i.get(u);h.isNoDocument()&&h.version.isEqual(Lt.min())?(e.removeEntry(u,h.readTime),s=s.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),s=s.insert(u,h)):Ge("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),s})}function X$(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function E_(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(s=>s?(i=s,me.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new nh(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function C_(n,e,t){return $x.apply(this,arguments)}function $x(){return $x=(0,Te.Z)(function*(n,e,t){const r=st(n),i=r.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Cp(u))throw u;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),$x.apply(this,arguments)}function YI(n,e,t){const r=st(n);let i=Lt.min(),s=Hn();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,y){const C=st(h),D=C.ai.get(y);return void 0!==D?me.resolve(C.ui.get(D)):C.fs.getTargetData(m,y)}(r,u,Ma(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{s=m})}).next(()=>r.oi.Qs(u,e,t?i:Lt.min(),t?s:Hn())).next(h=>(fV(r,JF(e),h),{documents:h,_i:s})))}function dV(n,e){const t=st(n),r=st(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(u=>u?u.target:null))}function hV(n,e){const t=st(n),r=t.ci.get(e)||Lt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,UF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fV(t,e,i),i))}function fV(n,e,t){let r=Lt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ci.set(e,r)}function zx(){return zx=(0,Te.Z)(function*(n,e,t,r){const i=st(n);let s=Hn(),u=xa();for(const y of t){const C=e.wi(y.metadata.name);y.document&&(s=s.add(C));const D=e.mi(y);D.setReadTime(e.gi(y.metadata.readTime)),u=u.insert(C,D)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),m=yield E_(i,(y=r,Ma(f_(In.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>cV(y,h,u).next(C=>(h.apply(y),C)).next(C=>i.fs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>i.fs.addMatchingKeys(y,s,m.targetId)).next(()=>i.fi.Gs(y,C)).next(()=>C)))}),zx.apply(this,arguments)}function tz(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,Te.Z)(function*(n,e,t=Hn()){const r=yield E_(n,Ma(Nx(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Fi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(s,e);const h=r.withResumeToken(wi.EMPTY_BYTE_STRING,u);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(s,h).next(()=>i.fs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.fs.addMatchingKeys(s,t,r.targetId)).next(()=>i._s.saveNamedQuery(s,e))})}),Wx.apply(this,arguments)}class nz{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Fi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Nx(r.bundledQuery),readTime:Fi(r.readTime)}),me.resolve();var r}}class rz{constructor(){this.overlays=new Kr(nt.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=$b(),s=t.length+1,u=new nt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&m.largestBatchId>r&&i.set(m.getKey(),m)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kr((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=$b(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=$b(),m=s.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=i)););return me.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Rx(t,r));let s=this.Ii.get(t);void 0===s&&(s=Hn(),this.Ii.set(t,s)),this.Ii.set(t,s.add(r.key))}}class qx{constructor(){this.Ti=new dr(Vi.Ei),this.Ai=new dr(Vi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Vi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Vi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new nt(new In([])),r=new Vi(t,e),i=new Vi(t,e+1),s=[];return this.Ai.forEachInRange([r,i],u=>{this.Pi(u),s.push(u.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new nt(new In([])),r=new Vi(t,e),i=new Vi(t,e+1);let s=Hn();return this.Ai.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Vi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return nt.comparator(e.key,t.key)||Jt(e.Ci,t.Ci)}static Ri(e,t){return Jt(e.Ci,t.Ci)||nt.comparator(e.key,t.key)}}class iz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new dr(Vi.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const s=this.xi;this.xi++;const u=new xx(s,t,r,i);this.Bs.push(u);for(const h of i)this.Ni=this.Ni.add(new Vi(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),s=i<0?0:i;return me.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vi(t,0),i=new Vi(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([r,i],u=>{const h=this.ki(u.Ci);s.push(h)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(Jt);return t.forEach(i=>{const s=new Vi(i,0),u=new Vi(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,u],h=>{r=r.add(h.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;nt.isDocumentKey(s)||(s=s.child(""));const u=new Vi(new nt(s),0);let h=new dr(Jt);return this.Ni.forEachWhile(m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(m.Ci)),!0)},u),me.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ht(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const s=new Vi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Vi(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class sz{constructor(e){this.$i=e,this.docs=new Kr(nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let r=xa();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yr.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=xa();const s=new nt(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||jF(SG(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){mt()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oz(this)}getSize(e){return me.resolve(this.size)}}class oz extends tV{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class az{constructor(e){this.persistence=e,this.Li=new th(t=>vp(t),Bb),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new qx,this.targetCount=0,this.Ki=xp.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new xp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Li.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(s).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class lz{constructor(e,t){this.Gi={},this.overlays={},this.es=new Uo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new az(this),this.indexManager=new B$,this.ds=new sz(r=>this.referenceDelegate.Qi(r)),this.M=new UL(t),this._s=new nz(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new iz(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new uz(this.es.next());return this.referenceDelegate.ji(),r(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class uz extends LL{constructor(e){super(),this.currentSequenceNumber=e}}class Zx{constructor(e){this.persistence=e,this.Hi=new qx,this.Ji=null}static Yi(e){return new Zx(e)}get Xi(){if(this.Ji)return this.Ji;throw mt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=nt.fromPath(r);return this.Zi(e,i).next(s=>{s||t.removeEntry(i,Lt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function pV(n,e){return`firestore_clients_${n}_${e}`}function mV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Kx(n,e){return`firestore_targets_${n}_${e}`}class QI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Pe(i.error.code,i.error.message))),u?new QI(e,t,i.state,s):(li("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new s0(e,r.state,i):(li("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=BI();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=RF(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new JI(e,s):(li("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yx{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yx(t.clientId,t.onlineState):(li("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Qx{constructor(){this.activeTargetIds=BI()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jx{constructor(e,t,r,i,s){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Kr(Jt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=pV(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Qx),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const s=e.getItem(pV(e.persistenceKey,i));if(s){const u=JI.tr(i,s);u&&(e.ar=e.ar.insert(u.clientId,u))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Kx(this.persistenceKey,e));if(r){const i=s0.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kx(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(s){let u=Uo.A;if(null!=s)try{const h=JSON.parse(s);Ht("number"==typeof h),u=h}catch(h){li("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==Uo.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new QI(this.currentUser,e,t,r),s=mV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.er())}Ar(e){const t=mV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=Kx(this.persistenceKey,e),s=new s0(e,t,r);this.setItem(i,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return JI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return QI.tr(new ts(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return s0.tr(i,t)}pr(e){return Yx.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),s=this.Tr(r),u=[],h=[];return s.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{s.has(m)||h.push(m)}),this.syncEngine.Lr(u,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=BI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class gV{constructor(){this.Ur=new Qx,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Qx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cz{Kr(e){}shutdown(){}}class _V{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const dz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class hz{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class fz extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const u=this.ho(e,t);Ge("RestConnection","Sending: ",u,r);const h={};return this.lo(h,i,s),this.fo(e,u,h,r).then(m=>(Ge("RestConnection","Received: ",m),m),m=>{throw xb("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}_o(e,t,r,i,s){return this.co(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+a_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.uo}/v1/${t}:${dz[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const h=new dG;h.listenOnce(lG.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case dx.NO_ERROR:const y=h.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(y)),s(y);break;case dx.TIMEOUT:Ge("Connection",'RPC "'+e+'" timed out'),u(new Pe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case dx.HTTP_ERROR:const C=h.getStatus();if(Ge("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const R=function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(B)>=0?B:pe.UNKNOWN}(D.status);u(new Pe(R,D.message))}else u(new Pe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Pe(pe.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{Ge("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=oG(),u=aG(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new cG({})),this.lo(h.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Ge("Connection","Creating WebChannel: "+m,h);const y=s.createWebChannel(m,h);let C=!1,D=!1;const R=new hz({Jr:B=>{D?Ge("Connection","Not sending because WebChannel is closed:",B):(C||(Ge("Connection","Opening WebChannel transport."),y.open(),C=!0),Ge("Connection","WebChannel sending:",B),y.send(B))},Yr:()=>y.close()}),L=(B,ee,be)=>{B.listen(ee,qe=>{try{be(qe)}catch(ot){setTimeout(()=>{throw ot},0)}})};return L(y,AI.EventType.OPEN,()=>{D||Ge("Connection","WebChannel transport opened.")}),L(y,AI.EventType.CLOSE,()=>{D||(D=!0,Ge("Connection","WebChannel transport closed"),R.ro())}),L(y,AI.EventType.ERROR,B=>{D||(D=!0,xb("Connection","WebChannel transport errored:",B),R.ro(new Pe(pe.UNAVAILABLE,"The operation could not be completed")))}),L(y,AI.EventType.MESSAGE,B=>{var ee;if(!D){const be=B.data[0];Ht(!!be);const qe=be,ot=qe.error||(null===(ee=qe[0])||void 0===ee?void 0:ee.error);if(ot){Ge("Connection","WebChannel received error:",ot);const ft=ot.status;let lt=function(Xt){const Pn=ci[Xt];if(void 0!==Pn)return pL(Pn)}(ft),Gt=ot.message;void 0===lt&&(lt=pe.INTERNAL,Gt="Unknown error status: "+ft+" with message "+ot.message),D=!0,R.ro(new Pe(lt,Gt)),y.close()}else Ge("Connection","WebChannel received:",be),R.oo(be)}}),L(u,uG.STAT_EVENT,B=>{B.stat===CF.PROXY?Ge("Connection","Detected buffering proxy"):B.stat===CF.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.io()},0),R}}function yV(){return"undefined"!=typeof window?window:null}function XI(){return"undefined"!=typeof document?document:null}function o0(n){return new t$(n,!0)}class Xx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class vV{constructor(e,t,r,i,s,u,h,m){this.Yn=e,this.Vo=r,this.vo=i,this.So=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Xx(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Te.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Te.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Pe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Te.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pz extends vV{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:mt(),i=e.targetChange.targetIds||[],s=function(m,y){return m.N?(Ht(void 0===y||"string"==typeof y),wi.fromBase64String(y||"")):(Ht(void 0===y||y instanceof Uint8Array),wi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const y=void 0===m.code?pe.UNKNOWN:pL(m.code);return new Pe(y,m.message||"")}(u);t=new gL(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Tu(n,r.document.name),s=Fi(r.document.updateTime),u=new Es({mapValue:{fields:r.document.fields}}),h=yr.newFoundDocument(i,s,u);t=new UI(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Tu(n,r.document),s=r.readTime?Fi(r.readTime):Lt.min(),u=yr.newNoDocument(i,s);t=new UI([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Tu(n,r.document);t=new UI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return mt();{const r=e.filter,s=new WG(r.count||0);t=new mL(r.targetId,s)}}var m;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Lt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Lt.min():s.readTime?Fi(s.readTime):Lt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Kb(this.M),t.addTarget=function(i,s){let u;const h=s.target;return u=OI(h)?{documents:DL(i,h)}:{query:SL(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=bL(i,s.resumeToken):s.snapshotVersion.compareTo(Lt.min())>0&&(u.readTime=qb(i,s.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Kb(this.M),t.removeTarget=e,this.Lo(t)}}class mz extends vV{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Ht(void 0!==e),n.map(t=>function(r,i){let s=Fi(r.updateTime?r.updateTime:i);return s.isEqual(Lt.min())&&(s=Fi(i)),new GG(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fi(e.commitTime);return this.listener.tu(r,t)}return Ht(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Kb(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yb(this.M,r))};this.Lo(t)}}class gz extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(pe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(pe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class _z{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(li(t),this.uu=!1):Ge("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class yz{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{r.enqueueAndForget((0,Te.Z)(function*(){var m;sh(u)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Te.Z)(function*(y){const C=st(y);C.wu.add(4),yield I_(C),C.yu.set("Unknown"),C.wu.delete(4),yield a0(C)}),function(y){return m.apply(this,arguments)})(u))}))}),this.yu=new _z(r,i)}}function a0(n){return ek.apply(this,arguments)}function ek(){return ek=(0,Te.Z)(function*(n){if(sh(n))for(const e of n.mu)yield e(!0)}),ek.apply(this,arguments)}function I_(n){return tk.apply(this,arguments)}function tk(){return tk=(0,Te.Z)(function*(n){for(const e of n.mu)yield e(!1)}),tk.apply(this,arguments)}function eT(n,e){const t=st(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),ik(t)?rk(t):D_(t).Mo()&&nk(t,e))}function l0(n,e){const t=st(n),r=D_(t);t._u.delete(e),r.Mo()&&bV(t,e),0===t._u.size&&(r.Mo()?r.$o():sh(t)&&t.yu.set("Unknown"))}function nk(n,e){n.pu.Z(e.targetId),D_(n).Ho(e)}function bV(n,e){n.pu.Z(e),D_(n).Jo(e)}function rk(n){n.pu=new JG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),D_(n).start(),n.yu.au()}function ik(n){return sh(n)&&!D_(n).ko()&&n._u.size>0}function sh(n){return 0===st(n).wu.size}function wV(n){n.pu=void 0}function vz(n){return sk.apply(this,arguments)}function sk(){return sk=(0,Te.Z)(function*(n){n._u.forEach((e,t)=>{nk(n,e)})}),sk.apply(this,arguments)}function bz(n,e){return ok.apply(this,arguments)}function ok(){return ok=(0,Te.Z)(function*(n,e){wV(n),ik(n)?(n.yu.lu(e),rk(n)):n.yu.set("Unknown")}),ok.apply(this,arguments)}function wz(n,e,t){return ak.apply(this,arguments)}function ak(){return ak=(0,Te.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof gL&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i._u.delete(h),i.pu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tT(n,r)}else if(e instanceof UI?n.pu.ut(e):e instanceof mL?n.pu._t(e):n.pu.ht(e),!t.isEqual(Lt.min()))try{const r=yield uV(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.pu.yt(s);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=i._u.get(m);y&&i._u.set(m,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const m=i._u.get(h);if(!m)return;i._u.set(h,m.withResumeToken(wi.EMPTY_BYTE_STRING,m.snapshotVersion)),bV(i,h);const y=new nh(m.target,h,1,m.sequenceNumber);nk(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield tT(n,r)}var r}),ak.apply(this,arguments)}function tT(n,e,t){return lk.apply(this,arguments)}function lk(){return lk=(0,Te.Z)(function*(n,e,t){if(!Cp(e))throw e;n.wu.add(1),yield I_(n),n.yu.set("Offline"),t||(t=()=>uV(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield a0(n)}))}),lk.apply(this,arguments)}function EV(n,e){return e().catch(t=>tT(n,t,e))}function T_(n){return uk.apply(this,arguments)}function uk(){return uk=(0,Te.Z)(function*(n){const e=st(n),t=oh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Ez(e);)try{const i=yield X$(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,Cz(e,i)}catch(i){yield tT(e,i)}CV(e)&&IV(e)}),uk.apply(this,arguments)}function Ez(n){return sh(n)&&n.du.length<10}function Cz(n,e){n.du.push(e);const t=oh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function CV(n){return sh(n)&&!oh(n).ko()&&n.du.length>0}function IV(n){oh(n).start()}function Iz(n){return ck.apply(this,arguments)}function ck(){return ck=(0,Te.Z)(function*(n){oh(n).nu()}),ck.apply(this,arguments)}function Tz(n){return dk.apply(this,arguments)}function dk(){return dk=(0,Te.Z)(function*(n){const e=oh(n);for(const t of n.du)e.Zo(t.mutations)}),dk.apply(this,arguments)}function Dz(n,e,t){return hk.apply(this,arguments)}function hk(){return hk=(0,Te.Z)(function*(n,e,t){const r=n.du.shift(),i=kx.from(r,e,t);yield EV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield T_(n)}),hk.apply(this,arguments)}function Sz(n,e){return fk.apply(this,arguments)}function fk(){return fk=(0,Te.Z)(function*(n,e){var t;e&&oh(n).Xo&&(yield(t=(0,Te.Z)(function*(r,i){if(fL(s=i.code)&&s!==pe.ABORTED){const u=r.du.shift();oh(r).Fo(),yield EV(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield T_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),CV(n)&&IV(n)}),fk.apply(this,arguments)}function TV(n,e){return pk.apply(this,arguments)}function pk(){return pk=(0,Te.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=sh(t);t.wu.add(3),yield I_(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield a0(t)}),pk.apply(this,arguments)}function mk(n,e){return gk.apply(this,arguments)}function gk(){return gk=(0,Te.Z)(function*(n,e){const t=st(n);e?(t.wu.delete(2),yield a0(t)):e||(t.wu.add(2),yield I_(t),t.yu.set("Unknown"))}),gk.apply(this,arguments)}function D_(n){return n.Iu||(n.Iu=function(e,t,r){const i=st(e);return i.iu(),new pz(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:vz.bind(null,n),eo:bz.bind(null,n),zo:wz.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Iu.Fo(),ik(n)?rk(n):n.yu.set("Unknown")):(yield n.Iu.stop(),wV(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function oh(n){return n.Tu||(n.Tu=function(e,t,r){const i=st(e);return i.iu(),new mz(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Iz.bind(null,n),eo:Sz.bind(null,n),eu:Tz.bind(null,n),tu:Dz.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Tu.Fo(),yield T_(n)):(yield n.Tu.stop(),n.du.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class _k{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new _k(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(n,e){if(li("AsyncQueue",`${e}: ${n}`),Cp(n))return new Pe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class A_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(t,r)=>nt.comparator(t.key,r.key),this.keyedMap=Tx(),this.sortedSet=new Kr(this.comparator)}static emptySet(e){return new A_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof A_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new A_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DV{constructor(){this.Eu=new Kr(nt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):mt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class M_{constructor(e,t,r,i,s,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new M_(e,t,A_.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ub(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Az{constructor(){this.Ru=void 0,this.listeners=[]}}class Mz{constructor(){this.queries=new th(e=>QF(e),Ub),this.onlineState="Unknown",this.bu=new Set}}function yk(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,Te.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Az),i)try{s.Ru=yield t.onListen(r)}catch(u){const h=S_(u,`Initialization of query '${wx(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&Ek(t)}),vk.apply(this,arguments)}function bk(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,Te.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wk.apply(this,arguments)}function xz(n,e){const t=st(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Vu(i)&&(r=!0);u.Ru=i}}r&&Ek(t)}function kz(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Ek(n){n.bu.forEach(e=>{e.next()})}class Ck{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new M_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=M_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Rz{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class SV{constructor(e){this.M=e}wi(e){return Tu(this.M,e)}mi(e){return e.metadata.exists?TL(this.M,e.document,!1):yr.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Fi(e)}}class Nz{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AV(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=In.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new SV(this.M);for(const i of e)if(i.metadata.queries){const s=r.wi(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Hn()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function(n,e,t,r){return zx.apply(this,arguments)}(e.localStore,new SV(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield tz(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function AV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MV{constructor(e){this.key=e}}class xV{constructor(e){this.key=e}}class kV{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Hn(),this.mutatedKeys=Hn(),this.Gu=XF(e),this.Qu=new A_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new DV,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const R=i.get(C),L=Ex(this.query,D)?D:null,B=!!R&&this.mutatedKeys.has(R.key),ee=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let be=!1;R&&L?R.data.isEqual(L.data)?B!==ee&&(r.track({type:3,doc:L}),be=!0):this.Hu(R,L)||(r.track({type:2,doc:L}),be=!0,(m&&this.Gu(L,m)>0||y&&this.Gu(L,y)<0)&&(h=!0)):!R&&L?(r.track({type:0,doc:L}),be=!0):R&&!L&&(r.track({type:1,doc:R}),be=!0,(m||y)&&(h=!0)),be&&(L?(u=u.add(L),s=ee?s.add(C):s.delete(C)):(u=u.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{Qu:u,zu:r,ii:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((y,C)=>function(D,R){const L=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return L(D)-L(R)}(y.type,C.type)||this.Gu(y.doc,C.doc)),this.Ju(r);const u=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,m=h!==this.qu;return this.qu=h,0!==s.length||m?{snapshot:new M_(this.query,e.Qu,i,s,e.mutatedKeys,0===h,m,!1),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new DV,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Hn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new xV(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new MV(r))}),t}ta(e){this.Uu=e._i,this.Ku=Hn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return M_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Oz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Pz{constructor(e){this.key=e,this.na=!1}}class Fz{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new th(h=>QF(h),Ub),this.ra=new Map,this.oa=new Set,this.ua=new Kr(nt.comparator),this.aa=new Map,this.ca=new qx,this.ha={},this.la=new Map,this.fa=xp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Lz(n,e){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,Te.Z)(function*(n,e){const t=qk(n);let r,i;const s=t.ia.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const u=yield E_(t.localStore,Ma(e));t.isPrimaryClient&&eT(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield Tk(t,e,r,"current"===h)}return i}),Ik.apply(this,arguments)}function Tk(n,e,t,r){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,Te.Z)(function*(n,e,t,r){n._a=(C,D,R)=>{return(L=(0,Te.Z)(function*(B,ee,be,qe){let ot=ee.view.Wu(be);ot.ii&&(ot=yield YI(B.localStore,ee.query,!1).then(({documents:Gt})=>ee.view.Wu(Gt,ot)));const ft=qe&&qe.targetChanges.get(ee.targetId),lt=ee.view.applyChanges(ot,B.isPrimaryClient,ft);return Fk(B,ee.targetId,lt.Xu),lt.snapshot}),function(B,ee,be,qe){return L.apply(this,arguments)})(n,C,D,R);var L};const i=yield YI(n.localStore,e,!0),s=new kV(e,i._i),u=s.Wu(i.documents),h=Wb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=s.applyChanges(u,n.isPrimaryClient,h);Fk(n,t,m.Xu);const y=new Oz(e,t,s);return n.ia.set(e,y),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),m.snapshot}),Dk.apply(this,arguments)}function Vz(n,e){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,Te.Z)(function*(n,e){const t=st(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(s=>!Ub(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield C_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),l0(t.remoteStore,r.targetId),x_(t,r.targetId)}).catch(kp))):(x_(t,r.targetId),yield C_(t.localStore,r.targetId,!0))}),Sk.apply(this,arguments)}function Ak(){return Ak=(0,Te.Z)(function*(n,e,t){const r=Zk(n);try{const i=yield function(s,u){const h=st(s),m=Zr.now(),y=u.reduce((D,R)=>D.add(R.key),Hn());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>h.fi.Ks(D,y).next(R=>{C=R;const L=[];for(const B of u){const ee=zG(B,C.get(B.key));null!=ee&&L.push(new Ep(B.key,ee,BF(ee.value.mapValue),ui.exists(!0)))}return h.Bs.addMutationBatch(D,m,L,u)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let m=s.ha[s.currentUser.toKey()];m||(m=new Kr(Jt)),m=m.insert(u,h),s.ha[s.currentUser.toKey()]=m}(r,i.batchId,t),yield Fc(r,i.changes),yield T_(r.remoteStore)}catch(i){const s=S_(i,"Failed to persist write");t.reject(s)}}),Ak.apply(this,arguments)}function RV(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,Te.Z)(function*(n,e){const t=st(n);try{const r=yield J$(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.aa.get(s);u&&(Ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.na=!0:i.modifiedDocuments.size>0?Ht(u.na):i.removedDocuments.size>0&&(Ht(u.na),u.na=!1))}),yield Fc(t,r,e)}catch(r){yield kp(r)}}),Mk.apply(this,arguments)}function NV(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((s,u)=>{const h=u.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=st(s);h.onlineState=u;let m=!1;h.queries.forEach((y,C)=>{for(const D of C.listeners)D.Pu(u)&&(m=!0)}),m&&Ek(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Uz(n,e,t){return xk.apply(this,arguments)}function xk(){return xk=(0,Te.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),s=i&&i.key;if(s){let u=new Kr(nt.comparator);u=u.insert(s,yr.newNoDocument(s,Lt.min()));const h=Hn().add(s),m=new zb(Lt.min(),new Map,new dr(Jt),u,h);yield RV(r,m),r.ua=r.ua.remove(s),r.aa.delete(e),Lk(r)}else yield C_(r.localStore,e,!1).then(()=>x_(r,e,t)).catch(kp)}),xk.apply(this,arguments)}function jz(n,e){return kk.apply(this,arguments)}function kk(){return kk=(0,Te.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield Q$(t.localStore,e);Pk(t,r,null),Ok(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield kp(i)}}),kk.apply(this,arguments)}function Hz(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,Te.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(s,u){const h=st(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.Bs.lookupMutationBatch(m,u).next(C=>(Ht(null!==C),y=C.keys(),h.Bs.removeMutationBatch(m,C))).next(()=>h.Bs.performConsistencyCheck(m)).next(()=>h.fi.Ks(m,y))})}(r.localStore,e);Pk(r,e,t),Ok(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield kp(i)}}),Rk.apply(this,arguments)}function Nk(){return Nk=(0,Te.Z)(function*(n,e){const t=st(n);sh(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=st(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=S_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Nk.apply(this,arguments)}function Ok(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Pk(n,e,t){const r=st(n);let i=r.ha[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function x_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||OV(n,r)})}function OV(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(l0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Lk(n))}function Fk(n,e,t){for(const r of t)r instanceof MV?(n.ca.addReference(r.key,e),$z(n,r)):r instanceof xV?(Ge("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||OV(n,r.key)):mt()}function $z(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ge("SyncEngine","New document in limbo: "+t),n.oa.add(r),Lk(n))}function Lk(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new nt(In.fromString(e)),r=n.fa.next();n.aa.set(r,new Pz(t)),n.ua=n.ua.insert(t,r),eT(n.remoteStore,new nh(Ma(f_(t.path)),r,2,Uo.A))}}function Fc(n,e,t){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,Te.Z)(function*(n,e,t){const r=st(n),i=[],s=[],u=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,m)=>{u.push(r._a(m,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=Hx.Ys(m.targetId,y);s.push(C)}}))}),yield Promise.all(u),r.sa.zo(i),yield(h=(0,Te.Z)(function*(m,y){const C=st(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(y,R=>me.forEach(R.Hs,L=>C.persistence.referenceDelegate.addReference(D,R.targetId,L)).next(()=>me.forEach(R.Js,L=>C.persistence.referenceDelegate.removeReference(D,R.targetId,L)))))}catch(D){if(!Cp(D))throw D;Ge("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const R=D.targetId;if(!D.fromCache){const L=C.ui.get(R),ee=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);C.ui=C.ui.insert(R,ee)}}}),function(m,y){return h.apply(this,arguments)})(r.localStore,s))}),Vk.apply(this,arguments)}function zz(n,e){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,Te.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield lV(t.localStore,e);t.currentUser=e,(i=t).la.forEach(u=>{u.forEach(h=>{h.reject(new Pe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.di)}var i}),Bk.apply(this,arguments)}function Wz(n,e){const t=st(n),r=t.aa.get(e);if(r&&r.na)return Hn().add(r.key);{let i=Hn();const s=t.ra.get(e);if(!s)return i;for(const u of s){const h=t.ia.get(u);i=i.unionWith(h.view.ju)}return i}}function qz(n,e){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,Te.Z)(function*(n,e){const t=st(n),r=yield YI(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&Fk(t,e.targetId,i.Xu),i}),Uk.apply(this,arguments)}function Zz(n,e){return jk.apply(this,arguments)}function jk(){return jk=(0,Te.Z)(function*(n,e){const t=st(n);return hV(t.localStore,e).then(r=>Fc(t,r))}),jk.apply(this,arguments)}function Kz(n,e,t,r){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,Te.Z)(function*(n,e,t,r){const i=st(n),s=yield function(u,h){const m=st(u),y=st(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.fn(C,h).next(D=>D?m.fi.Ks(C,D):me.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield T_(i.remoteStore):"acknowledged"===t||"rejected"===t?(Pk(i,e,r||null),Ok(i,e),h=e,st(st(i.localStore).Bs)._n(h)):mt(),yield Fc(i,s)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),Hk.apply(this,arguments)}function Gk(){return Gk=(0,Te.Z)(function*(n,e){const t=st(n);if(qk(t),Zk(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield PV(t,r.toArray());t.da=!0,yield mk(t.remoteStore,!0);for(const s of i)eT(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(x_(t,u),C_(t.localStore,u,!0))),l0(t.remoteStore,u)}),yield i,yield PV(t,r),function(s){const u=st(s);u.aa.forEach((h,m)=>{l0(u.remoteStore,m)}),u.ca.Si(),u.aa=new Map,u.ua=new Kr(nt.comparator)}(t),t.da=!1,yield mk(t.remoteStore,!1)}}),Gk.apply(this,arguments)}function PV(n,e,t){return $k.apply(this,arguments)}function $k(){return $k=(0,Te.Z)(function*(n,e,t){const r=st(n),i=[],s=[];for(const u of e){let h;const m=r.ra.get(u);if(m&&0!==m.length){h=yield E_(r.localStore,Ma(m[0]));for(const y of m){const C=r.ia.get(y),D=yield qz(r,C);D.snapshot&&s.push(D.snapshot)}}else{const y=yield dV(r.localStore,u);h=yield E_(r.localStore,y),yield Tk(r,FV(y),u,!1)}i.push(h)}return r.sa.zo(s),i}),$k.apply(this,arguments)}function FV(n){return KF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Qz(n){const e=st(n);return st(st(e.localStore).persistence).Fs()}function Jz(n,e,t,r){return zk.apply(this,arguments)}function zk(){return zk=(0,Te.Z)(function*(n,e,t,r){const i=st(n);if(i.da)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield hV(i.localStore,JF(s[0])),h=zb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fc(i,u,h);break}case"rejected":yield C_(i.localStore,e,!0),x_(i,e,r);break;default:mt()}}),zk.apply(this,arguments)}function Xz(n,e,t){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,Te.Z)(function*(n,e,t){const r=qk(n);if(r.da){for(const i of e){if(r.ra.has(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const s=yield dV(r.localStore,i),u=yield E_(r.localStore,s);yield Tk(r,FV(s),u.targetId,!1),eT(r.remoteStore,u)}for(const i of t)r.ra.has(i)&&(yield C_(r.localStore,i,!1).then(()=>{l0(r.remoteStore,i),x_(r,i)}).catch(kp))}}),Wk.apply(this,arguments)}function qk(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uz.bind(null,e),e.sa.zo=xz.bind(null,e.eventManager),e.sa.wa=kz.bind(null,e.eventManager),e}function Zk(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Hz.bind(null,e),e}class LV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.M=o0(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return aV(this.persistence,new oV,e.initialUser,this.M)}ya(e){return new lz(Zx.Yi,this.M)}ga(e){return new gV}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VV extends LV{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Zk(r.Ta.syncEngine),yield T_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return aV(this.persistence,new oV,e.initialUser,this.M)}pa(e){return new G$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new Ux(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yV(),XI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new gV}}class tW extends VV{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Jx&&(r.sharedClientState.syncEngine={$r:Kz.bind(null,i),Br:Jz.bind(null,i),Lr:Xz.bind(null,i),Fs:Qz.bind(null,i),Fr:Zz.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var s=(0,Te.Z)(function*(u){yield function(n,e){return Gk.apply(this,arguments)}(r.Ta.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}ga(e){const t=yV();if(!Jx.vt(t))throw new Pe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Kk{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>NV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zz.bind(null,r.syncEngine),yield mk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Mz}createDatastore(e){const t=o0(e.databaseInfo.databaseId),r=new fz(e.databaseInfo);return new gz(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>NV(this.syncEngine,h,0),u=_V.vt()?new _V:new cz,new yz(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,m,y){const C=new Fz(r,i,s,u,h,m);return y&&(C.da=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=st(t);Ge("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield I_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BV(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class nT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nW{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Pi,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const s=yield e.Sa(i);return new Rz(JSON.parse(s),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Te.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(s,u){const h=st(s),m=Kb(h.M)+"/documents",y={documents:u.map(L=>Zb(h.M,L))},C=yield h._o("BatchGetDocuments",m,y),D=new Map;C.forEach(L=>{const B=function(n,e){return"found"in e?function(t,r){Ht(!!r.found);const i=Tu(t,r.found.name),s=Fi(r.found.updateTime),u=new Es({mapValue:{fields:r.found.fields}});return yr.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Ht(!!r.missing),Ht(!!r.readTime);const i=Tu(t,r.missing),s=Fi(r.readTime);return yr.newNoDocument(i,s)}(n,e):mt()}(h.M,L);D.set(B.key.toString(),B)});const R=[];return u.forEach(L=>{const B=D.get(L.toString());Ht(!!B),R.push(B)}),R}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=nt.fromPath(i);e.mutations.push(new Ix(s,e.precondition(s)))}),yield(r=(0,Te.Z)(function*(i,s){const u=st(i),h=Kb(u.M)+"/documents",m={writes:s.map(y=>Yb(u.M,y))};yield u.co("Commit",h,m)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=Lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ui.updateTime(t):ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new Pe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ui.updateTime(t)}return ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iW{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.xa=r.maxAttempts,this.No=new Xx(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Te.Z)(function*(){const t=new rW(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ma(s)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Nb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!fL(t)}return!1}}class sW{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=SF.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Te.Z)(function*(h){Ge("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=S_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function UV(n,e){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(s){r.isEqual(s)||(yield lV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Yk.apply(this,arguments)}function jV(n,e){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Jk(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>TV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>TV(e.remoteStore,s)),n.onlineComponents=e}),Qk.apply(this,arguments)}function Jk(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,Te.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield UV(n,new LV)),n.offlineComponents}),Xk.apply(this,arguments)}function rT(n){return eR.apply(this,arguments)}function eR(){return eR=(0,Te.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield jV(n,new Kk)),n.onlineComponents}),eR.apply(this,arguments)}function HV(n){return Jk(n).then(e=>e.persistence)}function tR(n){return Jk(n).then(e=>e.localStore)}function GV(n){return rT(n).then(e=>e.remoteStore)}function nR(n){return rT(n).then(e=>e.syncEngine)}function k_(n){return rR.apply(this,arguments)}function rR(){return rR=(0,Te.Z)(function*(n){const e=yield rT(n),t=e.eventManager;return t.onListen=Lz.bind(null,e.syncEngine),t.onUnlisten=Vz.bind(null,e.syncEngine),t}),rR.apply(this,arguments)}function $V(n,e,t={}){const r=new Pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,u,h,m){const y=new nT({next:D=>{s.enqueueAndForget(()=>bk(i,C));const R=D.docs.has(u);!R&&D.fromCache?m.reject(new Pe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&h&&"server"===h.source?m.reject(new Pe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new Ck(f_(u.path),y,{includeMetadataChanges:!0,ku:!0});return yk(i,C)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}function zV(n,e,t={}){const r=new Pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,u,h,m){const y=new nT({next:D=>{s.enqueueAndForget(()=>bk(i,C)),D.fromCache&&"server"===h.source?m.reject(new Pe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new Ck(u,y,{includeMetadataChanges:!0,ku:!0});return yk(i,C)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}const WV=new Map;function iR(n,e,t){if(!t)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qV(n,e,t,r){if(!0===e&&!0===r)throw new Pe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZV(n){if(!nt.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KV(n){if(nt.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":mt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iT(n);throw new Pe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YV(n,e){if(e<=0)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class QV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,qV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QV({}),this._settingsFrozen=!1,e instanceof Oc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pG;switch(t.type){case"gapi":const r=t.client;return Ht(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new yG(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WV.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),WV.delete(e),t.terminate())}(this),Promise.resolve()}}class vr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class Cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cs(this.firestore,e,this._query)}}class Su extends Cs{constructor(e,t,r){super(e,t,f_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new nt(e))}withConverter(e){return new Su(this.firestore,e,this._path)}}function JV(n,e,...t){if(n=(0,F.m9)(n),iR("collection","path",e),n instanceof u0){const r=In.fromString(e,...t);return KV(r),new Su(n,null,r)}{if(!(n instanceof vr||n instanceof Su))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return KV(r),new Su(n.firestore,null,r)}}function sT(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=SF.R()),iR("doc","path",e),n instanceof u0){const r=In.fromString(e,...t);return ZV(r),new vr(n,null,new nt(r))}{if(!(n instanceof vr||n instanceof Su))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return ZV(r),new vr(n.firestore,n instanceof Su?n.converter:null,new nt(r))}}function XV(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof vr||n instanceof Su)&&(e instanceof vr||e instanceof Su)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eB(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Cs&&e instanceof Cs&&n.firestore===e.firestore&&Ub(n._query,e._query)&&n.converter===e.converter}class gW{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Xx(this,"async_queue_retry"),this.Qa=()=>{const t=XI();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=XI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=XI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Pi;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Te.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Cp(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,li("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=_k.createAndSchedule(this,e,t,r,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&mt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function sR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _W{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sr extends u0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new gW,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tB(this),this._firestoreClient.terminate()}}function di(n){return n._firestoreClient||tB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tB(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IG(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new sW(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nB(n,e,t){const r=new Pi;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield UV(n,t),yield jV(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function rB(n){if(n._initialized||n._terminated)throw new Pe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Au(wi.fromBase64String(e))}catch(t){throw new Pe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Au(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Np{constructor(e){this._methodName=e}}class oT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const SW=/^__.*__$/;class AW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ep(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hb(e,this.data,t,this.fieldTransforms)}}class iB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ep(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class aT{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new aT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return cT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(sB(this.ec)&&SW.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class MW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||o0(e)}lc(e,t,r,i=!1){return new aT({ec:e,methodName:t,hc:r,path:bi.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Op(n){const e=n._freezeSettings(),t=o0(n._databaseId);return new MW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lT(n,e,t,r,i,s={}){const u=n.lc(s.merge||s.mergeFields?2:0,e,t,i);uR("Data must be an object, but it was:",u,r);const h=lB(r,u);let m,y;if(s.merge)m=new u_(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const C=[];for(const D of s.mergeFields){const R=cR(e,D,t);if(!u.contains(R))throw new Pe(pe.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);cB(C,R)||C.push(R)}m=new u_(C),y=u.fieldTransforms.filter(D=>m.covers(D.field))}else m=null,y=u.fieldTransforms;return new AW(new Es(h),m,y)}class c0 extends Np{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof c0}}function oB(n,e,t){return new aT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class oR extends Np{_toFieldTransform(e){return new jb(e.path,new m_)}isEqual(e){return e instanceof oR}}class xW extends Np{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=oB(this,e,!0),r=this.fc.map(s=>Pp(s,t)),i=new bp(r);return new jb(e.path,i)}isEqual(e){return this===e}}class kW extends Np{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=oB(this,e,!0),r=this.fc.map(s=>Pp(s,t)),i=new wp(r);return new jb(e.path,i)}isEqual(e){return this===e}}class RW extends Np{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new g_(e.M,nL(e.M,this.dc));return new jb(e.path,t)}isEqual(e){return this===e}}function aR(n,e,t,r){const i=n.lc(1,e,t);uR("Data must be an object, but it was:",i,r);const s=[],u=Es.empty();pp(r,(m,y)=>{const C=uT(e,m,t);y=(0,F.m9)(y);const D=i.oc(C);if(y instanceof c0)s.push(C);else{const R=Pp(y,D);null!=R&&(s.push(C),u.set(C,R))}});const h=new u_(s);return new iB(u,h,i.fieldTransforms)}function lR(n,e,t,r,i,s){const u=n.lc(1,e,t),h=[cR(e,r,t)],m=[i];if(s.length%2!=0)throw new Pe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<s.length;R+=2)h.push(cR(e,s[R])),m.push(s[R+1]);const y=[],C=Es.empty();for(let R=h.length-1;R>=0;--R)if(!cB(y,h[R])){const L=h[R];let B=m[R];B=(0,F.m9)(B);const ee=u.oc(L);if(B instanceof c0)y.push(L);else{const be=Pp(B,ee);null!=be&&(y.push(L),C.set(L,be))}}const D=new u_(y);return new iB(C,D,u.fieldTransforms)}function aB(n,e,t,r=!1){return Pp(t,n.lc(r?4:3,e))}function Pp(n,e){if(uB(n=(0,F.m9)(n)))return uR("Unsupported field value:",e,n),lB(n,e);if(n instanceof Np)return function(t,r){if(!sB(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=Pp(u,r.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nL(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Zr.fromDate(t);return{timestampValue:qb(r.M,i)}}if(t instanceof Zr){const i=new Zr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qb(r.M,i)}}if(t instanceof oT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Au)return{bytesValue:bL(r.M,t._byteString)};if(t instanceof vr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${iT(t)}`)}(n,e)}function lB(n,e){const t={};return xF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pp(n,(r,i)=>{const s=Pp(i,e.sc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function uB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zr||n instanceof oT||n instanceof Au||n instanceof vr||n instanceof Np)}function uR(n,e,t){if(!uB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function cR(n,e,t){if((e=(0,F.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return uT(n,e);throw cT("Field path arguments must be of type string or ",n,!1,void 0,t)}const NW=new RegExp("[~\\*/\\[\\]]");function uT(n,e,t){if(e.search(NW)>=0)throw cT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch(r){throw cT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cT(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(s||u)&&(m+=" (found",s&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Pe(pe.INVALID_ARGUMENT,h+n+m)}function cB(n,e){return n.some(t=>t.isEqual(e))}class d0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OW extends d0{data(){return super.data()}}function dT(n,e){return"string"==typeof e?uT(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}class Fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends d0{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new h0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class h0 extends Vc{data(e={}){return super.data(e)}}class ah{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new h0(this._firestore,this._userDataWriter,r.key,r,new Fp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new h0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Fp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new h0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Fp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return 0!==u.type&&(m=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:PW(u.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function dB(n,e){return n instanceof Vc&&e instanceof Vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ah&&e instanceof ah&&n._firestore===e._firestore&&eB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f0{}function lh(n,...e){for(const t of e)n=t._apply(n);return n}class FW extends f0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Op(e.firestore),r=function(i,s,u,h,m,y,C){let D;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){yB(C,y);const L=[];for(const B of C)L.push(_B(h,i,B));D={arrayValue:{values:L}}}else D=_B(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||yB(C,y),D=aB(u,"where",C,"in"===y||"not-in"===y);const R=rs.create(m,y,D);return function(L,B){if(B.S()){const be=vx(L);if(null!==be&&!be.isEqual(B.field))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${B.field.toString()}'`);const qe=yx(L);null!==qe&&vB(0,B.field,qe)}const ee=function(be,qe){for(const ot of be.filters)if(qe.indexOf(ot.op)>=0)return ot.op;return null}(L,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==ee)throw new Pe(pe.INVALID_ARGUMENT,ee===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Cs(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class VW extends f0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new h_(i,s);return function(h,m){if(null===yx(h)){const y=vx(h);null!==y&&vB(0,y,m.field)}}(r,u),u}(e._query,this._c,this.gc);return new Cs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Pc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fB extends f0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Cs(e.firestore,e.converter,YF(e._query,this.yc,this.Ic))}}class pB extends f0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=gB(e,this.type,this.Tc,this.Ec);return new Cs(e.firestore,e.converter,(i=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class mB extends f0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=gB(e,this.type,this.Tc,this.Ec);return new Cs(e.firestore,e.converter,(i=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gB(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof d0)return function(i,s,u,h,m){if(!h)throw new Pe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of p_(i))if(C.field.isKeyField())y.push(_p(s,h.key));else{const D=h.data.field(C.field);if(px(D))throw new Pe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=C.field.canonicalString();throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(D)}return new eh(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Op(n.firestore);return function(s,u,h,m,y,C){const D=s.explicitOrderBy;if(y.length>D.length)throw new Pe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<y.length;L++){const B=y[L];if(D[L].field.isKeyField()){if("string"!=typeof B)throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof B}`);if(!bx(s)&&-1!==B.indexOf("/"))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${B}' contains a slash.`);const ee=s.path.child(In.fromString(B));if(!nt.isDocumentKey(ee))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const be=new nt(ee);R.push(_p(u,be))}else{const ee=aB(h,m,B);R.push(ee)}}return new eh(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _B(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bx(e)&&-1!==t.indexOf("/"))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!nt.isDocumentKey(r))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _p(n,new nt(r))}if(t instanceof vr)return _p(n,t._key);throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iT(t)}.`)}function yB(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vB(n,e,t){if(!t.isEqual(e))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const WW={maxAttempts:5};class dR{convertValue(e,t="none"){switch(gp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){const r={};return pp(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new oT(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rb(e));default:return null}}convertTimestamp(e){const t=Qd(e);return new Zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);Ht(xL(r));const i=new Oc(r.get(1),r.get(3)),s=new nt(r.popFirst(5));return i.isEqual(t)||li(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function hT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qW extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}class bB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Op(e)}set(e,t,r){this._verifyNotCommitted();const i=uh(e,this._firestore),s=hT(i.converter,t,r),u=lT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ui.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=uh(e,this._firestore);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof Lc?lR(this._dataReader,"WriteBatch.update",s._key,t,r,i):aR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uh(e,this._firestore);return this._mutations=this._mutations.concat(new Gb(t._key,ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uh(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Pe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Lp extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function wB(n,e,t){n=gn(n,vr);const r=gn(n.firestore,Sr),i=hT(n.converter,e,t);return R_(r,[lT(Op(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ui.none())])}function EB(n,e,t,...r){n=gn(n,vr);const i=gn(n.firestore,Sr),s=Op(i);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof Lc?lR(s,"updateDoc",n._key,e,t,r):aR(s,"updateDoc",n._key,e),R_(i,[u.toMutation(n._key,ui.exists(!0))])}function CB(n,...e){var t,r,i;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||sR(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(sR(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let m,y,C;if(n instanceof vr)y=gn(n.firestore,Sr),C=f_(n._key.path),m={next:D=>{e[u]&&e[u](hR(y,n,D))},error:e[u+1],complete:e[u+2]};else{const D=gn(n,Cs);y=gn(D.firestore,Sr),C=D._query;const R=new Lp(y);m={next:L=>{e[u]&&e[u](new ah(y,R,D,L))},error:e[u+1],complete:e[u+2]},hB(n._query)}return function(D,R,L,B){const ee=new nT(B),be=new Ck(R,ee,L);return D.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return yk(yield k_(D),be)})),()=>{ee.Aa(),D.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return bk(yield k_(D),be)}))}}(di(y),C,h,m)}function R_(n,e){return function(t,r){const i=new Pi;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(n,e,t){return Ak.apply(this,arguments)}(yield nR(t),r,i)})),i.promise}(di(n),e)}function hR(n,e,t){const r=t.docs.get(e._key),i=new Lp(n);return new Vc(n,i,e._key,r,new Fp(t.hasPendingWrites,t.fromCache),e.converter)}class rq extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Op(e)}get(e){const t=uh(e,this._firestore),r=new qW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return mt();const s=i[0];if(s.isFoundDocument())return new d0(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new d0(this._firestore,r,t._key,null,t.converter);throw mt()})}set(e,t,r){const i=uh(e,this._firestore),s=hT(i.converter,t,r),u=lT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=uh(e,this._firestore);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof Lc?lR(this._dataReader,"Transaction.update",s._key,t,r,i):aR(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uh(e,this._firestore),r=new Lp(this._firestore);return super.get(e).then(i=>new Vc(this._firestore,r,t._key,i._document,new Fp(!1,!1),t.converter))}}function fR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TB(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function DB(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){a_=Lo.SDK_VERSION,(0,Lo._registerComponent)(new dl.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Sr(i,new gG(t.getProvider("auth-internal")),new vG(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Lo.registerVersion)(IF,"3.4.9",n),(0,Lo.registerVersion)(IF,"3.4.9","esm2017")}();class p0{constructor(e){this._delegate=e}static fromBase64String(e){return DB(),new p0(Au.fromBase64String(e))}static fromUint8Array(e){return TB(),new p0(Au.fromUint8Array(e))}toBase64(){return DB(),this._delegate.toBase64()}toUint8Array(){return TB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pR(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class fq{enableIndexedDbPersistence(e,t){return function(n,e){rB(n=gn(n,Sr));const t=di(n),r=n._freezeSettings(),i=new Kk;return nB(t,i,new VV(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){rB(n=gn(n,Sr));const e=di(n),t=n._freezeSettings(),r=new Kk;return nB(e,r,new tW(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!pl.vt())return Promise.resolve();const i=r+"main";yield pl.delete(i)}),function(r){return t.apply(this,arguments)})(jx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class SB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const s=(n=gn(n,u0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&xb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=ts.MOCK_USER;else{u=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Pe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ts(m)}n._authCredentials=new mG(new TF(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield HV(n),t=yield GV(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i.wu.delete(0),a0(i)}(t)}))}(di(n=gn(n,Sr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield HV(n),t=yield GV(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const s=st(i);s.wu.add(0),yield I_(s),s.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(di(n=gn(n,Sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,qV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Pi;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(n,e){return Nk.apply(this,arguments)}(yield nR(e),t)})),t.promise}(di(n=gn(n,Sr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new nT(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield k_(n),i=t,st(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield k_(n),i=t,void st(r).bu.delete(i);var r,i}))}}(di(n=gn(n,Sr)),sR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new N_(this,JV(this._delegate,e))}catch(t){throw Bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ka(this,sT(this._delegate,e))}catch(t){throw Bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Us(this,function(n,e){if(n=gn(n,u0),iR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cs(n,null,(t=e,new Pc(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=gn(n,Sr);const r=Object.assign(Object.assign({},WW),t);return function(i){if(i.maxAttempts<1)throw new Pe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new Pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(s=n,rT(s).then(u=>u.datastore));var s;new iW(n.asyncQueue,i,t,e,r).run()})),r.promise}(di(n),i=>e(new rq(n,i)),r)}(this._delegate,t=>e(new AB(this,t)))}batch(){return di(this._delegate),new MB(new bB(this._delegate,e=>R_(this._delegate,e)))}loadBundle(e){return function(n,e){const t=di(n=gn(n,Sr)),r=new _W;return function(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,m=function(m,y){if(m instanceof Uint8Array)return BV(m,y);if(m instanceof ArrayBuffer)return BV(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new nW(m,u);var m}(t,o0(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function(n,e,t){const r=st(n);var i;(i=(0,Te.Z)(function*(s,u,h){try{const m=yield u.getMetadata();if(yield function(R,L){const B=st(R),ee=Fi(L.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",be=>B._s.getBundleMetadata(be,L.id)).then(be=>!!be&&be.createTime.compareTo(ee)>=0)}(s.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(AV(m));const y=new Nz(m,s.localStore,u.M);let C=yield u.ma();for(;C;){const R=yield y.Fu(C);R&&h._updateProgress(R),C=yield u.ma()}const D=yield y.complete();return yield Fc(s,D.Lu,void 0),yield function(R,L){const B=st(R);return B.persistence.runTransaction("Save bundle","readwrite",ee=>B._s.saveBundleMetadata(ee,L))}(s.localStore,m),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(m){return xb("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var R}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",s=>i._s.getNamedQuery(s,r))}(yield tR(n),e)}))}(di(n=gn(n,Sr)),e).then(t=>t?new Cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Us(this,t):null)}}class fT extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new p0(new Au(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ka.forKey(t,this.firestore,null)}}class AB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}get(e){const t=Bp(e);return this._delegate.get(t).then(r=>new m0(this._firestore,new Vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Bp(e);return r?(fR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Bp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}}class MB{constructor(e){this._delegate=e}set(e,t,r){const i=Bp(e);return r?(fR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Bp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new h0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new g0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Vp(e,new fT(e),t),i.set(t,s)),s}}Vp.INSTANCES=new WeakMap;class ka{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ka(t,new vr(t._delegate,r,new nt(e)))}static forKey(e,t,r){return new ka(t,new vr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new N_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new N_(this.firestore,JV(this._delegate,e))}catch(t){throw Bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof vr&&XV(this._delegate,e)}set(e,t){t=fR("DocumentReference.set",t);try{return t?wB(this._delegate,e,t):wB(this._delegate,e)}catch(r){throw Bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EB(this._delegate,e):EB(this._delegate,e,t,...r)}catch(i){throw Bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return R_(gn(n.firestore,Sr),[new Gb(n._key,ui.none())])}(this._delegate)}onSnapshot(...e){const t=xB(e),r=kB(e,i=>new m0(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CB(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,vr);const e=gn(n.firestore,Sr),t=di(e),r=new Lp(e);return function(n,e){const t=new Pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,u){try{const h=yield function(m,y){const C=st(m);return C.persistence.runTransaction("read document","readonly",D=>C.fi.Ls(D,y))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Pe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=S_(h,`Failed to get document '${s} from cache`);u.reject(m)}}),function(i,s,u){return r.apply(this,arguments)})(yield tR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vc(e,r,n._key,i,new Fp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,vr);const e=gn(n.firestore,Sr);return $V(di(e),n._key,{source:"server"}).then(t=>hR(e,n,t))}(this._delegate):function(n){n=gn(n,vr);const e=gn(n.firestore,Sr);return $V(di(e),n._key).then(t=>hR(e,n,t))}(this._delegate),t.then(r=>new m0(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ka(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function Bs(n,e,t){return n.message=n.message.replace(e,t),n}function xB(n){for(const e of n)if("object"==typeof e&&!pR(e))return e;return{}}function kB(n,e){var t,r;let i;return i=pR(n[0])?n[0]:pR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class m0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ka(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dB(this._delegate,e._delegate)}}class g0 extends m0{data(e){const t=this._delegate.data(e);return function(n,e){n||mt()}(void 0!==t),t}}class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}where(e,t,r){try{return new Us(this.firestore,lh(this._delegate,function(n,e,t){const r=e,i=dT("where",n);return new FW(i,r,t)}(e,t,r)))}catch(i){throw Bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Us(this.firestore,lh(this._delegate,function(n,e="asc"){const t=e,r=dT("orderBy",n);return new VW(r,t)}(e,t)))}catch(r){throw Bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Us(this.firestore,lh(this._delegate,function(n){return YV("limit",n),new fB("limit",n,"F")}(e)))}catch(t){throw Bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Us(this.firestore,lh(this._delegate,function(n){return YV("limitToLast",n),new fB("limitToLast",n,"L")}(e)))}catch(t){throw Bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Us(this.firestore,lh(this._delegate,function(...n){return new pB("startAt",n,!0)}(...e)))}catch(t){throw Bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Us(this.firestore,lh(this._delegate,function(...n){return new pB("startAfter",n,!1)}(...e)))}catch(t){throw Bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Us(this.firestore,lh(this._delegate,function(...n){return new mB("endBefore",n,!1)}(...e)))}catch(t){throw Bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Us(this.firestore,lh(this._delegate,function(...n){return new mB("endAt",n,!0)}(...e)))}catch(t){throw Bs(t,"endAt()","Query.endAt()")}}isEqual(e){return eB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,Cs);const e=gn(n.firestore,Sr),t=di(e),r=new Lp(e);return function(n,e){const t=new Pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,u){try{const h=yield YI(i,s,!0),m=new kV(s,h._i),y=m.Wu(h.documents),C=m.applyChanges(y,!1);u.resolve(C.snapshot)}catch(h){const m=S_(h,`Failed to execute query '${s} against cache`);u.reject(m)}}),function(i,s,u){return r.apply(this,arguments)})(yield tR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ah(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,Cs);const e=gn(n.firestore,Sr),t=di(e),r=new Lp(e);return zV(t,n._query,{source:"server"}).then(i=>new ah(e,r,n,i))}(this._delegate):function(n){n=gn(n,Cs);const e=gn(n.firestore,Sr),t=di(e),r=new Lp(e);return hB(n._query),zV(t,n._query).then(i=>new ah(e,r,n,i))}(this._delegate),t.then(r=>new mR(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xB(e),r=kB(e,i=>new mR(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CB(this._delegate,t,r)}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}class mq{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new g0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new g0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mq(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new g0(this._firestore,r))})}isEqual(e){return dB(this._delegate,e._delegate)}}class N_ extends Us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ka(this.firestore,e):null}doc(e){try{return new ka(this.firestore,void 0===e?sT(this._delegate):sT(this._delegate,e))}catch(t){throw Bs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=gn(n.firestore,Sr),r=sT(n),i=hT(n.converter,e);return R_(t,[lT(Op(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ui.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ka(this.firestore,t))}isEqual(e){return XV(this._delegate,e._delegate)}withConverter(e){return new N_(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function Bp(n){return gn(n,vr)}class gR{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new gR(bi.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=new oR("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=new c0("deleteField");return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function(...n){return new xW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function(...n){return new kW("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function(n){return new RW("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gq={Firestore:SB,GeoPoint:oT,Timestamp:Zr,Blob:p0,Transaction:AB,WriteBatch:MB,DocumentReference:ka,DocumentSnapshot:m0,Query:Us,QueryDocumentSnapshot:g0,QuerySnapshot:mR,CollectionReference:N_,FieldPath:gR,FieldValue:Up,setLogLevel:function(n){!function(n){Yd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new dl.wA("firestore-compat",t=>((e,t)=>new SB(e,t,new fq))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},gq)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(jv.Z);var pT=P(4763),vq=P(1733);class bq extends Bt.x{constructor(e=1/0,t=1/0,r=vq.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}var _R=P(3174);function RB(n,e,t){var r,i;let s,u=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,_R.B)({connector:()=>new bq(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function NB(n,e){return(0,Ai.m)(e)?$t(()=>n,e):$t(()=>n)}var yR=P(5222);const OB=new Map,wq={activated:!1,tokenObservers:[]},Eq={initialized:!1,enabled:!1};function Bi(n){return OB.get(n)||wq}function ml(n,e){OB.set(n,e)}function mT(){return Eq}class Sq{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const js=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FB(n){if(!Bi(n).activated)throw js.create("use-before-activation",{appName:n.name})}function wR(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,s)}catch(D){throw js.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==u.status)throw js.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(D){throw js.create("fetch-parse-error",{originalErrorMessage:D.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(m[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),ER.apply(this,arguments)}function Nq(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _0="firebase-app-check-store";let yT=null;function VB(){return yT||(yT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(js.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_0,{keyPath:"compositeKey"})}}catch(t){e(js.create("storage-open",{originalErrorMessage:t.message}))}}),yT)}function CR(){return CR=(0,Te.Z)(function*(n,e){const r=(yield VB()).transaction(_0,"readwrite"),s=r.objectStore(_0).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=m=>{u()},r.onerror=m=>{var y;h(js.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})}),CR.apply(this,arguments)}const y0=new Vo.Yd("@firebase/app-check");function HB(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return CR.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{y0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GB(){return mT().enabled}function $B(){return SR.apply(this,arguments)}function SR(){return SR=(0,Te.Z)(function*(){const n=mT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SR.apply(this,arguments)}const Gq={error:"UNKNOWN_ERROR"};function $q(n){return F.US.encodeString(JSON.stringify(n),!1)}function vT(n){return AR.apply(this,arguments)}function AR(){return AR=(0,Te.Z)(function*(n,e=!1){const t=n.app;FB(t);const r=Bi(t);let s,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&bT(m)&&(i=m)}if(!e&&i&&bT(i))return{token:i.token};let h,u=!1;if(GB()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wR(Nq(t,yield $B()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const m=yield r.exchangeTokenPromise;return yield HB(t,m),ml(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?y0.warn(m.message):y0.error(m),s=m}return i?(h={token:i.token},ml(t,Object.assign(Object.assign({},r),{token:i})),yield HB(t,i)):h=Wq(s),u&&WB(t,h),h}),AR.apply(this,arguments)}function xR(n,e){const t=Bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ml(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function zB(n){const{app:e}=n,t=Bi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new Sq((0,Te.Z)(function*(){let r;if(r=Bi(e).token?yield vT(n,!0):yield vT(n),r.error)throw r.error}),()=>!0,()=>{const t=Bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ml(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WB(n,e){const t=Bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function bT(n){return n.expireTimeMillis-Date.now()>0}function Wq(n){return{token:$q(Gq),error:n}}class qq{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Bi(this.app);for(const t of e)xR(this.app,t.next);return Promise.resolve()}}const eU="app-check-internal";(0,Lo._registerComponent)(new dl.wA("app-check",n=>function(n,e){return new qq(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eU).initialize()})),(0,Lo._registerComponent)(new dl.wA(eU,n=>function(n){return{getToken:e=>vT(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,s=Bi(i),u={next:t,error:r,type:e};if(ml(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&bT(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),zB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>zB(n))}(n,"INTERNAL",e),removeTokenListener:e=>xR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Lo.registerVersion)("@firebase/app-check","0.5.8");class ET{constructor(){return(0,Jn.vb)("app-check")}}"undefined"!=typeof window&&window;var h6=P(7892);const PR=new c.OlP("angularfire2.auth.use-emulator"),FR=new c.OlP("angularfire2.auth.settings"),LR=new c.OlP("angularfire2.auth.tenant-id"),VR=new c.OlP("angularfire2.auth.langugage-code"),BR=new c.OlP("angularfire2.auth.use-device-language"),UR=new c.OlP("angularfire.auth.persistence"),jR=(n,e,t,r,i,s,u,h)=>(0,Ri.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,s&&m.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))m.settings[y]=C;return h&&m.setPersistence(h),m},[t,r,i,s,u,h]);let CT=(()=>{class n{constructor(t,r,i,s,u,h,m,y,C,D,R,L){const B=new Bt.x,ee=Xe(void 0).pipe((0,pT.Q)(u.outsideAngular),$t(()=>s.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2115)))),(0,et.U)(()=>(0,Ri.on)(t,s,r)),(0,et.U)(be=>jR(be,s,h,y,C,D,m,R)),RB({bufferSize:1,refCount:!1}));if(gi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{ee.pipe(ua()).subscribe();const qe=ee.pipe($t(lt=>lt.getRedirectResult().then(Gt=>Gt,()=>null)),Jn.iC,RB({bufferSize:1,refCount:!1})),ot=ee.pipe($t(lt=>new Yn.y(Gt=>({unsubscribe:s.runOutsideAngular(()=>lt.onAuthStateChanged(Xt=>Gt.next(Xt),Xt=>Gt.error(Xt),()=>Gt.complete()))})))),ft=ee.pipe($t(lt=>new Yn.y(Gt=>({unsubscribe:s.runOutsideAngular(()=>lt.onIdTokenChanged(Xt=>Gt.next(Xt),Xt=>Gt.error(Xt),()=>Gt.complete()))}))));this.authState=qe.pipe(NB(ot),(0,yR.R)(u.outsideAngular),(0,pT.Q)(u.insideAngular)),this.user=qe.pipe(NB(ft),(0,yR.R)(u.outsideAngular),(0,pT.Q)(u.insideAngular)),this.idToken=this.user.pipe($t(lt=>lt?(0,xn.D)(lt.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe($t(lt=>lt?(0,xn.D)(lt.getIdTokenResult()):Xe(null))),this.credential=(0,co.T)(qe,B,this.authState.pipe(un(lt=>!lt))).pipe((0,et.U)(lt=>(null==lt?void 0:lt.user)?lt:null),(0,yR.R)(u.outsideAngular),(0,pT.Q)(u.insideAngular))}return(0,Ri.pX)(this,ee,s,{spy:{apply:(be,qe,ot)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&ot.then(ft=>B.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ri.Dh),c.LFG(Ri.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Jn.HU),c.LFG(PR,8),c.LFG(FR,8),c.LFG(LR,8),c.LFG(VR,8),c.LFG(BR,8),c.LFG(UR,8),c.LFG(ET,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function nU(n,e){return function(n,e=hu.z){return new Yn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function HR(n,e){return nU(n,e).pipe((0,et.U)(t=>({payload:t,type:"query"})))}function IT(n,e){return HR(n,e).pipe(Mr(void 0),Uv(),(0,et.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=i.find(C=>C.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function rU(n,e,t){return IT(n,t).pipe(ii((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),zm(),(0,et.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function GR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function iU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class sU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=IT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,et.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Mr(void 0),Uv(),un(([r,i])=>i.length>0||!r),(0,et.U)(([r,i])=>i),Jn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iU(e);return rU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}valueChanges(e={}){return HR(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Jn.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Jn.iC)}add(e){return this.ref.add(e)}doc(e){return new oU(this.ref.doc(e),this.afs)}}class oU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=aU(r,t);return new sU(i,s,this.afs)}snapshotChanges(){return function(n,e){return nU(n,e).pipe(Mr(void 0),Uv(),(0,et.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(Jn.iC)}}class y6{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?IT(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),un(t=>t.length>0),Jn.iC):IT(this.query,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iU(e);return rU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}valueChanges(e={}){return HR(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Jn.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Jn.iC)}}const v6=new c.OlP("angularfire2.enableFirestorePersistence"),b6=new c.OlP("angularfire2.firestore.persistenceSettings"),w6=new c.OlP("angularfire2.firestore.settings"),E6=new c.OlP("angularfire2.firestore.use-emulator");function aU(n,e=(t=>t)){return{query:e(n),ref:n}}let $R=(()=>{class n{constructor(t,r,i,s,u,h,m,y,C,D,R,L,B,ee,be,qe,ot){this.schedulers=m;const ft=(0,Ri.on)(t,h,r),lt=C;D&&jR(ft,h,R,B,ee,be,L,qe),[this.firestore,this.persistenceEnabled$]=(0,Ri.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Gt=h.runOutsideAngular(()=>ft.firestore());if(s&&Gt.settings(s),lt&&Gt.useEmulator(...lt),i&&!gi(u)){const Xt=()=>{try{return(0,xn.D)(Gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Pn){return"undefined"!=typeof console&&console.warn(Pn),Xe(!1)}};return[Gt,h.runOutsideAngular(Xt)]}return[Gt,Xe(!1)]},[s,lt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=aU(i,r),h=this.schedulers.ngZone.run(()=>s);return new sU(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new y6(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ri.Dh),c.LFG(Ri.xv,8),c.LFG(v6,8),c.LFG(w6,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Jn.HU),c.LFG(b6,8),c.LFG(E6,8),c.LFG(CT,8),c.LFG(PR,8),c.LFG(FR,8),c.LFG(LR,8),c.LFG(VR,8),c.LFG(BR,8),c.LFG(UR,8),c.LFG(ET,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TT=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signWithRedirectPromise(){const t=new vu.Q;t.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,vu.n)();return r.languageCode="fr",Vv(r,t)}signWithPopupPromise(){const t=new vu.Q;t.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,vu.n)();return r.languageCode="fr",(0,vu.c)(r,t)}signInWithGoogle(){this.signWithPopupPromise().then(t=>{vu.Q.credentialFromResult(t),this.setUserData(t.user).then(()=>{this.router.navigate(["tracker"])}),this.router.navigate(["tracker"])}).catch(t=>{const r=t.code,i=t.message;vu.Q.credentialFromError(t),console.log("Code :"+r+"/ Message :"+i)})}setUserData(t){const r=this.afs.doc(`users/${t.uid}`);return this.userData={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified,targetIntake:0},r.set(this.userData,{merge:!0})}setPersonData(t){this.afs.doc(`person/${t}`).set({uid:t},{merge:!0})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["tracker"])})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($R),c.LFG(CT),c.LFG(ki),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DT=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn||this.router.navigate(["authentication"]),!0}isUserLoggedIn(){return!!this.authService.isLoggedIn}disconnect(){this.authService.signOut().then(()=>{this.router.navigate(["authentication"])})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TT),c.LFG(ki))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var lU=P(2869);const v0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=v0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new ks.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=v0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=v0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var uU=P(8843);new class extends uU.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends lU.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=v0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(v0.cancelAnimationFrame(t),e._scheduled=void 0)}});let zR,D6=1;const ST={};function cU(n){return n in ST&&(delete ST[n],!0)}const S6={setImmediate(n){const e=D6++;return ST[e]=!0,zR||(zR=Promise.resolve()),zR.then(()=>cU(e)&&n()),e},clearImmediate(n){cU(n)}},{setImmediate:A6,clearImmediate:M6}=S6,AT={setImmediate(...n){const{delegate:e}=AT;return((null==e?void 0:e.setImmediate)||A6)(...n)},clearImmediate(n){const{delegate:e}=AT;return((null==e?void 0:e.clearImmediate)||M6)(n)},delegate:void 0};new class extends uU.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends lU.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=AT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(AT.clearImmediate(t),e._scheduled=void 0)}});function dU(n,e=hu.P){return function(n){return(0,rr.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}u&&t.complete()},m=()=>{s=null,u&&t.complete()};e.subscribe(new kn.Q(t,y=>{r=!0,i=y,s||(0,Fr.Xf)(n()).subscribe(s=new kn.Q(t,h,m))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>Ag(n,e))}let hU=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Bt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Yn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(dU(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Xe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(un(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=ol(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Sa(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(_s),c.LFG(ie,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WR=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new Bt.x,this._elementScrolled=new Yn.y(u=>this.ngZone.runOutsideAngular(()=>Sa(this.elementRef.nativeElement,"scroll").pipe(Rr(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Bm()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Bm()?t.left=t.right:1==Bm()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;!function(){if(null==Ed){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ed=!1,Ed;if("scrollBehavior"in document.documentElement.style)Ed=!0;else{const n=Element.prototype.scrollTo;Ed=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ed}()?(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left)):r.scrollTo(t)}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==t?t=u?i:r:"end"==t&&(t=u?r:i),u&&2==Bm()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:u&&1==Bm()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(hU),c.Y36(c.R0b),c.Y36(cf,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),fU=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Bt.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(dU(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_s),c.LFG(c.R0b),c.LFG(ie,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const mU=["*"],F6=["content"];function L6(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",2),c.NdJ("click",function(){return c.CHM(t),c.oxw()._onBackdropClicked()}),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function V6(n,e){1&n&&(c.TgZ(0,"mat-drawer-content"),c.Hsn(1,2),c.qZA())}const B6=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],U6=["mat-drawer","mat-drawer-content","*"],j6={transformDrawer:zy("transform",[Jm("open, open-instant",Td({transform:"none",visibility:"visible"})),Jm("void",Td({"box-shadow":"none",visibility:"hidden"})),qy("void => open-instant",Qm("0ms")),qy("void <=> open, open-instant => void",Qm("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},H6=new c.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),gU=new c.OlP("MAT_DRAWER_CONTAINER");let qR=(()=>{class n extends WR{constructor(t,r,i,s,u){super(i,s,u),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO),c.Y36((0,c.Gpc)(()=>yU)),c.Y36(c.SBq),c.Y36(hU),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&c.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[c._Bn([{provide:WR,useExisting:n}]),c.qOj],ngContentSelectors:mU,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),_U=(()=>{class n{constructor(t,r,i,s,u,h,m,y){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=u,this._interactivityChecker=h,this._doc=m,this._container=y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Bt.x,this._animationEnd=new Bt.x,this._animationState="void",this.openedChange=new c.vpe(!0),this._openedStream=this.openedChange.pipe(un(C=>C),(0,et.U)(()=>{})),this.openedStart=this._animationStarted.pipe(un(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),RC(void 0)),this._closedStream=this.openedChange.pipe(un(C=>!C),(0,et.U)(()=>{})),this.closedStart=this._animationStarted.pipe(un(C=>C.fromState!==C.toState&&"void"===C.toState),RC(void 0)),this._destroyed=new Bt.x,this.onPositionChanged=new c.vpe,this._modeChanged=new Bt.x,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Sa(this._elementRef.nativeElement,"keydown").pipe(un(C=>27===C.keyCode&&!this.disableClose&&!vf(C)),Rr(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(zm((C,D)=>C.fromState===D.fromState&&C.toState===D.toState)).subscribe(C=>{const{fromState:D,toState:R}=C;(0===R.indexOf("open")&&"void"===D||"void"===R&&0===D.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=sr(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=sr(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(sr(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null==(t=this._anchor)||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe((0,Xn.q)(1)).subscribe(u=>s(u?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(XS),c.Y36(fu),c.Y36(_s),c.Y36(c.R0b),c.Y36(qS),c.Y36(ie,8),c.Y36(gU,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&c.Gf(F6,5),2&t){let i;c.iGM(i=c.CRH())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&c.WFA("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(c.uIk("align",null),c.d8E("@transform",r._animationState),c.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:mU,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0,1),c.Hsn(2),c.qZA())},directives:[WR],encapsulation:2,data:{animation:[j6.transformDrawer]},changeDetection:0}),n})(),yU=(()=>{class n{constructor(t,r,i,s,u,h=!1,m){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=m,this._drawers=new c.n_E,this.backdropClick=new c.vpe,this._destroyed=new Bt.x,this._doCheckSubject=new Bt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Bt.x,t&&t.change.pipe(Rr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),u.change().pipe(Rr(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=sr(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:sr(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Mr(this._allDrawers),Rr(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Mr(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe($m(10),Rr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(un(r=>r.fromState!==r.toState),Rr(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Rr(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Rr(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Xn.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Rr((0,co.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(cf,8),c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(c.sBO),c.Y36(fU),c.Y36(H6),c.Y36(Fo,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,qR,5),c.Suo(i,_U,5)),2&t){let s;c.iGM(s=c.CRH())&&(r._content=s.first),c.iGM(s=c.CRH())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&c.Gf(qR,5),2&t){let i;c.iGM(i=c.CRH())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[c._Bn([{provide:gU,useExisting:n}])],ngContentSelectors:U6,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(c.F$t(B6),c.YNc(0,L6,1,2,"div",0),c.Hsn(1),c.Hsn(2,1),c.YNc(3,V6,2,0,"mat-drawer-content",1)),2&t&&(c.Q6J("ngIf",r.hasBackdrop),c.xp6(3),c.Q6J("ngIf",!r._content))},directives:[ei,qR],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),$6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Hr,Dr,pU],pU,Dr]}),n})();const vU=["mat-button",""],bU=["*"],q6=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Z6=Tc(fC(pC(class{constructor(n){this._elementRef=n}})));let O_=(()=>{class n extends Z6{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of q6)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(fu),c.Y36(Fo,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&c.Gf(Iv,5),2&t){let i;c.iGM(i=c.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:vU,ngContentSelectors:bU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1),c._UZ(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Iv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),wU=(()=>{class n extends O_{constructor(t,r,i,s){super(r,t,i),this._ngZone=s,this._haltDisabledEvents=u=>{this.disabled&&(u.preventDefault(),u.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(fu),c.Y36(c.SBq),c.Y36(Fo,8),c.Y36(c.R0b,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("tabindex",r.disabled?-1:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[c.qOj],attrs:vU,ngContentSelectors:bU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1),c._UZ(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Iv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),EU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[YA,Dr],Dr]}),n})();function CU(...n){const e=(0,Js.jO)(n),{args:t,keys:r}=ql(n),i=new Yn.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let m=u,y=u;for(let C=0;C<u;C++){let D=!1;(0,Fr.Xf)(t[C]).subscribe(new kn.Q(s,R=>{D||(D=!0,y--),h[C]=R},()=>m--,void 0,()=>{(!m||!D)&&(y||s.next(r?Zl(r,h):h),s.complete())}))}});return e?i.pipe(To(e)):i}class IU{}class TU{}class Bc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===s.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class K6{encodeKey(e){return DU(e)}encodeValue(e){return DU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Q6=/%(\d[a-f0-9])/gi,J6={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function DU(n){return encodeURIComponent(n).replace(Q6,(e,t)=>{var r;return null!=(r=J6[t])?r:e})}function SU(n){return`${n}`}class ch{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new K6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],m=t.get(u)||[];m.push(h),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ch({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(SU(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(SU(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class X6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function AU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function MU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function xU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class b0{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Bc),this.context||(this.context=new X6),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new ch,this.urlWithParams=t}serializeBody(){return null===this.body?null:AU(this.body)||MU(this.body)||xU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ch?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xU(this.body)?null:MU(this.body)?this.body.type||null:AU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ch?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var D;const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,y=e.params||this.params;const C=null!=(D=e.context)?D:this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((R,L)=>R.set(L,e.setHeaders[L]),m)),e.setParams&&(y=Object.keys(e.setParams).reduce((R,L)=>R.set(L,e.setParams[L]),y)),new b0(t,r,s,{params:y,headers:m,context:C,reportProgress:h,responseType:i,withCredentials:u})}}var hi=(()=>((hi=hi||{})[hi.Sent=0]="Sent",hi[hi.UploadProgress=1]="UploadProgress",hi[hi.ResponseHeader=2]="ResponseHeader",hi[hi.DownloadProgress=3]="DownloadProgress",hi[hi.Response=4]="Response",hi[hi.User=5]="User",hi))();class ZR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Bc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class KR extends ZR{constructor(e={}){super(e),this.type=hi.ResponseHeader}clone(e={}){return new KR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class MT extends ZR{constructor(e={}){super(e),this.type=hi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new MT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kU extends ZR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function YR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let QR=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof b0)s=t;else{let m,y;m=i.headers instanceof Bc?i.headers:new Bc(i.headers),i.params&&(y=i.params instanceof ch?i.params:new ch({fromObject:i.params})),s=new b0(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=Xe(s).pipe(Rs(m=>this.handler.handle(m)));if(t instanceof b0||"events"===i.observe)return u;const h=u.pipe(un(m=>m instanceof MT));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,et.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,et.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,et.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,et.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ch).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,YR(i,r))}post(t,r,i={}){return this.request("POST",t,YR(i,r))}put(t,r,i={}){return this.request("PUT",t,YR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(IU))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class RU{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const NU=new c.OlP("HTTP_INTERCEPTORS");let n8=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const r8=/^\)\]\}',?\n/;let OU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Yn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,B)=>i.setRequestHeader(L,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const s=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const L=1223===i.status?204:i.status,B=i.statusText||"OK",ee=new Bc(i.getAllResponseHeaders()),be=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new KR({headers:ee,status:L,statusText:B,url:be}),u},m=()=>{let{headers:L,status:B,statusText:ee,url:be}=h(),qe=null;204!==B&&(qe=void 0===i.response?i.responseText:i.response),0===B&&(B=qe?200:0);let ot=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof qe){const ft=qe;qe=qe.replace(r8,"");try{qe=""!==qe?JSON.parse(qe):null}catch(lt){qe=ft,ot&&(ot=!1,qe={error:lt,text:qe})}}ot?(r.next(new MT({body:qe,headers:L,status:B,statusText:ee,url:be||void 0})),r.complete()):r.error(new kU({error:qe,headers:L,status:B,statusText:ee,url:be||void 0}))},y=L=>{const{url:B}=h(),ee=new kU({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(ee)};let C=!1;const D=L=>{C||(r.next(h()),C=!0);let B={type:hi.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(B.total=L.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},R=L=>{let B={type:hi.UploadProgress,loaded:L.loaded};L.lengthComputable&&(B.total=L.total),r.next(B)};return i.addEventListener("load",m),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",D),null!==s&&i.upload&&i.upload.addEventListener("progress",R)),i.send(s),r.next({type:hi.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",m),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",D),null!==s&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Al))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const JR=new c.OlP("XSRF_COOKIE_NAME"),XR=new c.OlP("XSRF_HEADER_NAME");class PU{}let s8=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=As(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(c.Lbi),c.LFG(JR))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),eN=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(PU),c.LFG(XR))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),o8=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(NU,[]);this.chain=r.reduceRight((i,s)=>new RU(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TU),c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),a8=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:eN,useClass:n8}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:JR,useValue:t.cookieName}:[],t.headerName?{provide:XR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[eN,{provide:NU,useExisting:eN,multi:!0},{provide:PU,useClass:s8},{provide:JR,useValue:"XSRF-TOKEN"},{provide:XR,useValue:"X-XSRF-TOKEN"}]}),n})(),FU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[QR,{provide:IU,useClass:o8},OU,{provide:TU,useExisting:OU}],imports:[[a8.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const l8=["*"];let xT;function w0(n){var e;return(null==(e=function(){if(void 0===xT&&(xT=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(xT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return xT}())?void 0:e.createHTML(n))||n}function LU(n){return Error(`Unable to find icon with the name "${n}"`)}function VU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function BU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class jp{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let kT=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new jp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const u=this._sanitizer.sanitize(c.q3G.HTML,i);if(!u)throw BU(i);const h=w0(u);return this._addSvgIconConfig(t,r,new jp("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new jp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(c.q3G.HTML,r);if(!s)throw BU(r);const u=w0(s);return this._addSvgIconSetConfig(t,new jp("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!r)throw VU(t);const i=this._cachedIconsByUrl.get(r);return i?Xe(RT(i)):this._loadSvgIconFromConfig(new jp(t,null)).pipe((0,gr.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,et.U)(s=>RT(s)))}getNamedSvgIcon(t,r=""){const i=UU(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):Sv(LU(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Xe(RT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,et.U)(r=>RT(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Xe(i):CU(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(qi(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),Xe(null)})))).pipe((0,et.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw LU(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(u,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,gr.b)(r=>t.svgText=r),(0,et.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Xe(null):this._fetchIcon(t).pipe((0,gr.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(w0("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(w0("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:u,value:h}=i[s];"id"!==u&&r.setAttribute(u,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var y;const{url:r,options:i}=t,s=null!=(y=null==i?void 0:i.withCredentials)&&y;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const u=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,r);if(!u)throw VU(r);const h=this._inProgressUrlFetches.get(u);if(h)return h;const m=this._httpClient.get(u,{responseType:"text",withCredentials:s}).pipe((0,et.U)(C=>w0(C)),sd(()=>this._inProgressUrlFetches.delete(u)),(0,_R.B)());return this._inProgressUrlFetches.set(u,m),m}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(UU(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return h8(s)?new jp(s.url,null,s.options):new jp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(QR,8),c.LFG(Xu),c.LFG(ie,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RT(n){return n.cloneNode(!0)}function UU(n,e){return n+":"+e}function h8(n){return!(!n.url||!n.options)}const f8=Tc(class{constructor(n){this._elementRef=n}}),p8=new c.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,c.f3M)(ie),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),jU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],g8=jU.map(n=>`[${n}]`).join(", "),_8=/^url\(['"]?#(.*?)['"]?\)$/;let E0=(()=>{class n extends f8{constructor(t,r,i,s,u){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=u,this._inline=!1,this._currentIconFetch=ks.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=sr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(u=>{s.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(g8),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)jU.forEach(u=>{const h=r[s],m=h.getAttribute(u),y=m?m.match(_8):null;if(y){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:u,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,Xn.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(kT),c.$8M("aria-hidden"),c.Y36(p8),c.Y36(c.qLn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:l8,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Dr],Dr]}),n})();const y8=["*",[["mat-toolbar-row"]]],v8=["*","mat-toolbar-row"],b8=Tc(class{constructor(n){this._elementRef=n}});let w8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),E8=(()=>{class n extends b8{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(_s),c.Y36(ie))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,w8,5),2&t){let s;c.iGM(s=c.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&c.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[c.qOj],ngContentSelectors:v8,decls:2,vars:0,template:function(t,r){1&t&&(c.F$t(y8),c.Hsn(0),c.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),C8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Dr],Dr]}),n})(),I8=(()=>{class n{constructor(){this.menuButtonClicked=new c.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-topbar"]],outputs:{menuButtonClicked:"menuButtonClicked"},decls:8,vars:0,consts:[["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"click"],[1,"appTitle"],[1,"example-spacer"]],template:function(t,r){1&t&&(c.TgZ(0,"mat-toolbar"),c.TgZ(1,"button",0),c.NdJ("click",function(){return r.menuButtonClicked.emit(!0)}),c.TgZ(2,"mat-icon"),c._uU(3,"menu"),c.qZA(),c.qZA(),c.TgZ(4,"div",1),c.TgZ(5,"h1"),c._uU(6,"Minou Tracker"),c.qZA(),c.qZA(),c._UZ(7,"span",2),c.qZA())},directives:[E8,O_,E0],styles:[".appTitle[_ngcontent-%COMP%]{margin:auto}.buttonMenu[_ngcontent-%COMP%]{position:fixed}  .menuCloseButton{border-radius:10px;float:right}"]}),n})();function T8(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"img",14),c._UZ(2,"br"),c._uU(3),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",null==t.connectedUser?null:t.connectedUser.photoURL,c.LSH),c.xp6(2),c.hij(" Hello ",null==t.connectedUser?null:t.connectedUser.displayName," ! ")}}function D8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",15),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(),s=c.MAs(2);return i.disconnect(),s.toggle()}),c._uU(1,"Se d\xe9connecter"),c.qZA()}}const S8=function(){return["authentication"]};function A8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",16),c.NdJ("click",function(){return c.CHM(t),c.oxw(),c.MAs(2).toggle()}),c._uU(1,"Se connecter"),c.qZA()}2&n&&c.Q6J("routerLink",c.DdM(1,S8))}function M8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-tree-node",20),c._UZ(1,"button",21),c.TgZ(2,"a",22),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw(2),h=c.MAs(2);return u.menuButtonClicked(s),h.toggle()}),c._uU(3),c.qZA(),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t.name," ")}}function x8(n,e){if(1&n&&(c.TgZ(0,"mat-tree-node",23),c.TgZ(1,"button",24),c.TgZ(2,"mat-icon",25),c._uU(3),c.qZA(),c.qZA(),c._uU(4),c.qZA()),2&n){const t=e.$implicit,r=c.oxw(2);c.xp6(1),c.uIk("aria-label","Toggle "+t.name),c.xp6(2),c.hij(" ",r.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),c.xp6(1),c.hij(" ",t.name," ")}}function k8(n,e){if(1&n&&(c.TgZ(0,"mat-tree",17),c.YNc(1,M8,4,1,"mat-tree-node",18),c.YNc(2,x8,5,3,"mat-tree-node",19),c.qZA()),2&n){const t=c.oxw();c.Q6J("dataSource",t.dataSource)("treeControl",t.treeControl),c.xp6(2),c.Q6J("matTreeNodeDefWhen",t.hasChild)}}let R8=(()=>{class n{constructor(t,r,i){this.authGuard=r,this.title="foodTrackingApp",this._transformer=(s,u)=>({expandable:!!s.children&&s.children.length>0,name:s.name,isPerson:s.isPerson,navigateUrl:s.navigateUrl,level:u}),this.menuContent=[{name:"Tracker",children:[{name:"Tracking du jour",navigateUrl:"tracker"},{name:"Team tracking",navigateUrl:"teamTracking"}]},{name:"Historique",children:[{name:"Tracking du jour",navigateUrl:"history"}]},{name:"Statistiques",children:[{name:"Evolution poids",navigateUrl:"statistiques"}]}],this.treeControl=new Ew(s=>s.level,s=>s.expandable),this.treeFlattener=new Kf(this._transformer,s=>s.level,s=>s.expandable,s=>s.children),this.dataSource=new nM(this.treeControl,this.treeFlattener),this.hasChild=(s,u)=>u.expandable,this.selectedPerson=void 0,t.available.subscribe(s=>{t.activateUpdate().then(u=>{document.location.reload()})}),this.dataSource.data=this.menuContent,this.routing=i}ngOnInit(){this.authGuard.isUserLoggedIn()||this.routing.navigate(["authentication"]),this.setUserIfNotSet()}setUserIfNotSet(){if(this.authGuard.isUserLoggedIn()&&void 0===this.connectedUser&&void 0!==localStorage.getItem("user")){const t=JSON.parse(localStorage.getItem("user"));this.connectedUser={uid:null==t?void 0:t.uid,email:null==t?void 0:t.email,displayName:null==t?void 0:t.displayName,photoURL:null==t?void 0:t.photoURL,emailVerified:null==t?void 0:t.emailVerified}}}disconnect(){this.authGuard.disconnect()}menuButtonClicked(t){t.isPerson?(this.selectedPerson=t.name,this.routing.navigate([`${t.navigateUrl}`])):this.routing.navigate([`${t.navigateUrl}`])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(kv),c.Y36(DT),c.Y36(ki))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:19,vars:5,consts:[["autosize","",1,"example-container"],["mode","side",1,"sidenavMenu"],["drawer",""],[1,"topMenuContainer"],["mat-button","",1,"menuCloseButton",3,"disableRipple","click"],[1,"userNameButtonMenu"],[4,"ngIf"],[1,"loginLogoutButton"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"routerLink","click",4,"ngIf"],[3,"dataSource","treeControl",4,"ngIf"],[1,"globalContainer"],[3,"menuButtonClicked"],[1,"spacingToolbar"],[1,"imageLoggedUser",3,"src"],["mat-button","",3,"click"],["mat-button","",3,"routerLink","click"],[3,"dataSource","treeControl"],["matTreeNodePadding","1",4,"matTreeNodeDef"],["matTreeNodePadding","0",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","1"],["mat-icon-button","","disabled",""],["mat-raised-button","",3,"click"],["matTreeNodePadding","0"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(t,r){if(1&t){const i=c.EpF();c.TgZ(0,"mat-drawer-container",0),c.TgZ(1,"mat-drawer",1,2),c.TgZ(3,"div",3),c.TgZ(4,"h2"),c._uU(5,"\u{1f63a}MIOUNU"),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",function(){return c.CHM(i),c.MAs(2).toggle()}),c.TgZ(7,"mat-icon"),c._uU(8,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",5),c.YNc(10,T8,4,2,"div",6),c.TgZ(11,"div",7),c.YNc(12,D8,2,0,"a",8),c.YNc(13,A8,2,2,"a",9),c.qZA(),c.qZA(),c.YNc(14,k8,3,3,"mat-tree",10),c.qZA(),c.TgZ(15,"div",11),c.TgZ(16,"app-topbar",12),c.NdJ("menuButtonClicked",function(){return c.CHM(i),c.MAs(2).toggle()}),c.qZA(),c._UZ(17,"div",13),c._UZ(18,"router-outlet"),c.qZA(),c.qZA()}2&t&&(c.xp6(6),c.Q6J("disableRipple",!0),c.xp6(4),c.Q6J("ngIf",r.authGuard.isUserLoggedIn()),c.xp6(2),c.Q6J("ngIf",r.authGuard.isUserLoggedIn()),c.xp6(1),c.Q6J("ngIf",!r.authGuard.isUserLoggedIn()),c.xp6(1),c.Q6J("ngIf",r.authGuard.isUserLoggedIn()))},directives:[yU,_U,O_,E0,ei,I8,dc,wU,Mm,MC,Tv,SC,Dv,Pd],styles:[".globalContainer[_ngcontent-%COMP%]{width:100vw;height:100vh}.spacingToolbar[_ngcontent-%COMP%]{height:64px;width:100vw}app-topbar[_ngcontent-%COMP%]{position:fixed!important;width:100vw;z-index:99}.appContent[_ngcontent-%COMP%]{display:flex}.sidenavMenu[_ngcontent-%COMP%]{padding:20px;width:250px}.topMenuContainer[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .topMenuContainer[_ngcontent-%COMP%] > .menuCloseButton[_ngcontent-%COMP%]{display:inline-block}.topMenuContainer[_ngcontent-%COMP%]{width:100%;height:50px}.userNameButtonMenu[_ngcontent-%COMP%]{background-color:#0000004d;text-align:center;padding:10px 0;border-radius:5px;margin-bottom:20px}.imageLoggedUser[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:30px;margin-bottom:5px}.loginLogoutButton[_ngcontent-%COMP%]{color:#ffffffb3}"]}),n})();const GU=Vm({passive:!0});let N8=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return to.E;const r=ol(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new Bt.x,u="cdk-text-field-autofilled",h=m=>{"cdk-text-field-autofill-start"!==m.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===m.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>s.next({target:m.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>s.next({target:m.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,GU),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,GU)}}),s}stopMonitoring(t){const r=ol(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_s),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),zU=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Hp=(()=>{class n extends zU{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Mu=new c.OlP("NgValueAccessor"),P8={provide:Mu,useExisting:(0,c.Gpc)(()=>C0),multi:!0},L8=new c.OlP("CompositionEventMode");let C0=(()=>{class n extends zU{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(L8,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([P8]),c.qOj]}),n})();function dh(n){return null==n||0===n.length}function qU(n){return null!=n&&"number"==typeof n.length}const Is=new c.OlP("NgValidators"),hh=new c.OlP("NgAsyncValidators"),V8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class P_{static min(e){return function(n){return e=>{if(dh(e.value)||dh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(dh(e.value)||dh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return dh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return dh(n.value)||V8.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>dh(e.value)||!qU(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>qU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return I0;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(dh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return l2(e)}static composeAsync(e){return u2(e)}}function I0(n){return null}function n2(n){return null!=n}function r2(n){const e=(0,c.QGY)(n)?(0,xn.D)(n):n;return(0,c.CqO)(e),e}function s2(n){let e={};return n.forEach(t=>{e=null!=t?ut(ut({},e),t):e}),0===Object.keys(e).length?null:e}function o2(n,e){return e.map(t=>t(n))}function a2(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function l2(n){if(!n)return null;const e=n.filter(n2);return 0==e.length?null:function(t){return s2(o2(t,e))}}function nN(n){return null!=n?l2(a2(n)):null}function u2(n){if(!n)return null;const e=n.filter(n2);return 0==e.length?null:function(t){return CU(o2(t,e).map(r2)).pipe((0,et.U)(s2))}}function rN(n){return null!=n?u2(a2(n)):null}function c2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function d2(n){return n._rawValidators}function h2(n){return n._rawAsyncValidators}function iN(n){return n?Array.isArray(n)?n:[n]:[]}function NT(n,e){return Array.isArray(n)?n.includes(e):n===e}function f2(n,e){const t=iN(e);return iN(n).forEach(i=>{NT(t,i)||t.push(i)}),t}function p2(n,e){return iN(e).filter(t=>!NT(n,t))}class m2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Hs extends m2{get formDirective(){return null}get path(){return null}}class xu extends m2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class g2{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}let sN=(()=>{class n extends g2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xu,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),oN=(()=>{class n extends g2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Hs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function T0(n,e){uN(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_2(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),VT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function LT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uN(n,e){const t=d2(n);null!==e.validator?n.setValidators(c2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=h2(n);null!==e.asyncValidator?n.setAsyncValidators(c2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();LT(e._rawValidators,i),LT(e._rawAsyncValidators,i)}function VT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=d2(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=h2(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return LT(e._rawValidators,r),LT(e._rawAsyncValidators,r),t}function _2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function y2(n,e){uN(n,e)}function v2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const D0="VALID",UT="INVALID",F_="PENDING",S0="DISABLED";function hN(n){return(pN(n)?n.validators:n)||null}function b2(n){return Array.isArray(n)?nN(n):n||null}function fN(n,e){return(pN(e)?e.asyncValidators:n)||null}function w2(n){return Array.isArray(n)?rN(n):n||null}function pN(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class mN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=b2(this._rawValidators),this._composedAsyncValidatorFn=w2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===D0}get invalid(){return this.status===UT}get pending(){return this.status==F_}get disabled(){return this.status===S0}get enabled(){return this.status!==S0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=b2(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=w2(e)}addValidators(e){this.setValidators(f2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(f2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(p2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(p2(e,this._rawAsyncValidators))}hasValidator(e){return NT(this._rawValidators,e)}hasAsyncValidator(e){return NT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=F_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=S0,this.errors=null,this._forEachChild(r=>{r.disable(Ei(ut({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ei(ut({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D0,this._forEachChild(r=>{r.enable(Ei(ut({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ei(ut({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===D0||this.status===F_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?S0:D0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=F_,this._hasOwnPendingAsyncValidator=!0;const t=r2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof L_?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof Q8&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?S0:this.errors?UT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(F_)?F_:this._anyControlsHaveStatus(UT)?UT:D0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pN(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fh extends mN{constructor(e=null,t,r){super(hN(t),fN(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class L_ extends mN{constructor(e,t,r){super(hN(t),fN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof fh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Q8 extends mN{constructor(e,t,r){super(hN(t),fN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof fh?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const J8={provide:Hs,useExisting:(0,c.Gpc)(()=>M0)},A0=(()=>Promise.resolve(null))();let M0=(()=>{class n extends Hs{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new c.vpe,this.form=new L_({},nN(t),rN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){A0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),T0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){A0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),BT(this._directives,t)})}addFormGroup(t){A0.then(()=>{const r=this._findContainer(t.path),i=new L_({});y2(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){A0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){A0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,v2(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Is,10),c.Y36(hh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([J8]),c.qOj]}),n})(),gN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const t4={provide:Mu,useExisting:(0,c.Gpc)(()=>_N),multi:!0};let _N=(()=>{class n extends Hp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([t4]),c.qOj]}),n})(),D2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const yN=new c.OlP("NgModelWithFormControlWarning"),o4={provide:Hs,useExisting:(0,c.Gpc)(()=>Gp)};let Gp=(()=>{class n extends Hs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(VT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return T0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){FT(t.control||null,t,!1),BT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,v2(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(FT(r||null,t),i instanceof fh&&(T0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);y2(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return VT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uN(this.form,this),this._oldForm&&VT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Is,10),c.Y36(hh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([o4]),c.qOj,c.TTD]}),n})();const u4={provide:xu,useExisting:(0,c.Gpc)(()=>jT)};let jT=(()=>{class n extends xu{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===C0?t=s:function(n){return Object.getPrototypeOf(n.constructor)===Hp}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Hs,13),c.Y36(Is,10),c.Y36(hh,10),c.Y36(Mu,10),c.Y36(yN,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([u4]),c.qOj,c.TTD]}),n})(),H2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[D2]]}),n})(),I4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[H2]}),n})(),T4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yN,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[H2]}),n})(),G2=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D4=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=ol(t);return new Yn.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Bt.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(G2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S4=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=sr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Wr(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe($m(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(D4),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),A4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[G2]}),n})();const M4=["connectionContainer"],x4=["inputContainer"],k4=["label"];function R4(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15),c._UZ(3,"div",16),c._UZ(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15),c._UZ(7,"div",16),c._UZ(8,"div",17),c.qZA(),c.BQk())}function N4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function O4(n,e){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(t._control.placeholder)}}function P4(n,e){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function F4(n,e){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function L4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.YNc(2,O4,4,1,"ng-container",12),c.YNc(3,P4,1,0,"ng-content",12),c.YNc(4,F4,2,0,"span",22),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),c.uIk("for",t._control.id)("aria-owns",t._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function V4(n,e){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function B4(n,e){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function U4(n,e){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function j4(n,e){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function H4(n,e){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,j4,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const G4=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],$4=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],z4=new c.OlP("MatError"),W4={transitionMessages:zy("transitionMessages",[Jm("enter",Td({opacity:1,transform:"translateY(0%)"})),qy("void => enter",[Td({opacity:0,transform:"translateY(-5px)"}),Qm("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let GT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})();const q4=new c.OlP("MatHint");let $T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),Z4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const K4=new c.OlP("MatPrefix"),$2=new c.OlP("MatSuffix");let Y4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSuffix",""]],features:[c._Bn([{provide:$2,useExisting:n}])]}),n})(),z2=0;const J4=Tc(class{constructor(n){this._elementRef=n}},"primary"),X4=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),q2=new c.OlP("MatFormField");let Z2=(()=>{class n extends J4{constructor(t,r,i,s,u,h,m){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=u,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Bt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+z2++,this._labelId="mat-form-field-label-"+z2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==m,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=sr(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Mr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Rr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Rr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,co.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Mr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Mr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Rr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Sa(this._label.nativeElement,"transitionend").pipe((0,Xn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let D=0;D<C.length;D++)C[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,h=0;const m=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(C),R=t.children,L=this._getStartEnd(R[0].getBoundingClientRect());let B=0;for(let ee=0;ee<R.length;ee++)B+=R[ee].offsetWidth;u=Math.abs(L-D)-5,h=B>0?.75*B+10:0}for(let C=0;C<m.length;C++)m[C].style.width=`${u}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(cf,8),c.Y36(X4,8),c.Y36(_s),c.Y36(c.R0b),c.Y36(Fo,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,GT,5),c.Suo(i,GT,7),c.Suo(i,$T,5),c.Suo(i,$T,7),c.Suo(i,Z4,5),c.Suo(i,z4,5),c.Suo(i,q4,5),c.Suo(i,K4,5),c.Suo(i,$2,5)),2&t){let s;c.iGM(s=c.CRH())&&(r._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(r._controlStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(r._placeholderChild=s.first),c.iGM(s=c.CRH())&&(r._errorChildren=s),c.iGM(s=c.CRH())&&(r._hintChildren=s),c.iGM(s=c.CRH())&&(r._prefixChildren=s),c.iGM(s=c.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(c.Gf(M4,7),c.Gf(x4,5),c.Gf(k4,5)),2&t){let i;c.iGM(i=c.CRH())&&(r._connectionContainerRef=i.first),c.iGM(i=c.CRH())&&(r._inputContainerRef=i.first),c.iGM(i=c.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&c.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:q2,useExisting:n}]),c.qOj],ngContentSelectors:$4,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(c.F$t(G4),c.TgZ(0,"div",0),c.TgZ(1,"div",1,2),c.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),c.YNc(3,R4,9,0,"ng-container",3),c.YNc(4,N4,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,L4,5,16,"label",8),c.qZA(),c.qZA(),c.YNc(10,V4,2,0,"div",9),c.qZA(),c.YNc(11,B4,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,U4,2,1,"div",12),c.YNc(14,H4,5,2,"div",13),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf","outline"==r.appearance),c.xp6(1),c.Q6J("ngIf",r._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",r._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",r._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=r.appearance),c.xp6(1),c.Q6J("ngSwitch",r._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[ei,El,Ti,S4],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[W4.transitionMessages]},changeDetection:0}),n})(),IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Hr,Dr,A4],Dr]}),n})();const e5=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),t5=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let n5=0;const r5=gC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let K2=(()=>{class n extends r5{constructor(t,r,i,s,u,h,m,y,C,D){super(h,s,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+n5++,this.focused=!1,this.stateChanges=new Bt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>cS().has(B)),this._iOSKeyupListener=B=>{const ee=B.target;!ee.value&&0===ee.selectionStart&&0===ee.selectionEnd&&(ee.setSelectionRange(1,1),ee.setSelectionRange(0,0))};const R=this._elementRef.nativeElement,L=R.nodeName.toLowerCase();this._inputValueAccessor=m||R,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===L,this._isTextarea="textarea"===L,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=sr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(P_.required))&&s}set required(t){this._required=sr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&cS().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=sr(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,i;const t=(null==(i=null==(r=this._formField)?void 0:r._hideControlPlaceholder)?void 0:i.call(r))?null:this.placeholder;if(t!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=t,t?s.setAttribute("placeholder",t):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){t5.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(_s),c.Y36(xu,10),c.Y36(M0,8),c.Y36(Gp,8),c.Y36(Ig),c.Y36(e5,10),c.Y36(N8),c.Y36(c.R0b),c.Y36(q2,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&c.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(c.Ikx("disabled",r.disabled)("required",r.required),c.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),c.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:GT,useExisting:n}]),c.qOj,c.TTD]}),n})(),Y2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ig],imports:[[$U,IN,Dr],$U,IN]}),n})();function s5(n,e){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const t=c.oxw(),r=c.MAs(1);c.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),c.uIk("r",t._getCircleRadius())}}function o5(n,e){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const t=c.oxw(),r=c.MAs(1);c.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),c.uIk("r",t._getCircleRadius())}}const l5=Tc(class{constructor(n){this._elementRef=n}},"primary"),u5=new c.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Uc extends l5{constructor(e,t,r,i,s,u,h,m){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=ks.w0.EMPTY,this.mode="determinate";const y=Uc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),y.has(r.head)||y.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&h&&u&&m&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&m.run(()=>u.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Wr(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Wr(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Wr(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=dS(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var r;const t=50*(null!=(r=e.currentScale)?r:1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=Uc._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Uc._diameters=new WeakMap,Uc.\u0275fac=function(e){return new(e||Uc)(c.Y36(c.SBq),c.Y36(_s),c.Y36(ie,8),c.Y36(Fo,8),c.Y36(u5),c.Y36(c.sBO),c.Y36(fU),c.Y36(c.R0b))},Uc.\u0275cmp=c.Xpm({type:Uc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(c.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),c.Udp("width",t.diameter,"px")("height",t.diameter,"px"),c.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[c.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(c.O4$(),c.TgZ(0,"svg",0,1),c.YNc(2,s5,1,11,"circle",2),c.YNc(3,o5,1,9,"circle",3),c.qZA()),2&e&&(c.Udp("width",t.diameter,"px")("height",t.diameter,"px"),c.Q6J("ngSwitch","indeterminate"===t.mode),c.uIk("viewBox",t._getViewBox()),c.xp6(2),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1))},directives:[El,Ti],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Q2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Dr,Hr],Dr]}),n})();const J2="@firebase/database";let DN="";function ej(n){DN=n}class p5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class m5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tj=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p5(e)}}catch(e){}return new m5},$p=tj("localStorage"),SN=tj("sessionStorage"),V_=new Vo.Yd("@firebase/database"),nj=function(){let n=1;return function(){return n++}}(),rj=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},x0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=x0.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let zp=null,ij=!0;const sj=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(V_.logLevel=Vo.in.VERBOSE,zp=V_.log.bind(V_),e&&SN.set("logging_enabled",!0)):"function"==typeof n?zp=n:(zp=null,SN.remove("logging_enabled"))},Ui=function(...n){if(!0===ij&&(ij=!1,null===zp&&!0===SN.get("logging_enabled")&&sj(!0)),zp){const e=x0.apply(null,n);zp(e)}},k0=function(n){return function(...e){Ui(n,...e)}},AN=function(...n){const e="FIREBASE INTERNAL ERROR: "+x0(...n);V_.error(e)},ku=function(...n){const e=`FIREBASE FATAL ERROR: ${x0(...n)}`;throw V_.error(e),new Error(e)},Ts=function(...n){const e="FIREBASE WARNING: "+x0(...n);V_.warn(e)},zT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},jc="[MIN_NAME]",Ru="[MAX_NAME]",Wp=function(n,e){if(n===e)return 0;if(n===jc||e===Ru)return-1;if(e===jc||n===Ru)return 1;{const t=WT(n),r=WT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},y5=function(n,e){return n===e?0:n<e?-1:1},R0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},MN=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=MN(n[e[r]]);return t+="}",t},oj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const aj=function(n){(0,F.hu)(!zT(n),"Invalid JSON number");const r=1023;let i,s,u,h,m;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let D="";for(m=0;m<64;m+=8){let R=parseInt(C.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},E5=new RegExp("^-?(0*)\\d{1,10}$"),lj=-2147483648,xN=2147483647,WT=function(n){if(E5.test(n)){const e=Number(n);if(e>=lj&&e<=xN)return e}return null},B_=function(n){try{n()}catch(e){setTimeout(()=>{throw Ts("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},N0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class I5{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ts(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class T5{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ts(e)}}let O0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const fj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gj="websocket",_j="long_polling";class RN{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$p.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yj(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===gj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==_j)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ji(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class S5{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const NN={},ON={};function PN(n){const e=n.toString();return NN[e]||(NN[e]=new S5),NN[e]}class M5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&B_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ph{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k0(e),this.stats_=PN(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),yj(t,_j,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new M5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FN((...s)=>{const[u,h,m,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&fj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ph.forceAllow_=!0}static forceDisallow(){ph.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!ph.forceAllow_&&(ph.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=oj(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class FN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=nj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=FN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Ui("frame writing exception"),h.stack&&Ui(h.stack),Ui(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ui("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ui("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let ZT=null;"undefined"!=typeof MozWebSocket?ZT=MozWebSocket:"undefined"!=typeof WebSocket&&(ZT=WebSocket);let U_=(()=>{class n{constructor(t,r,i,s,u,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k0(this.connId),this.stats_=PN(r),this.connURL=n.connectionURL_(r,h,m,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const h={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&fj.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),u&&(h.p=u),yj(t,gj,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$p.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${DN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(u.proxy={origin:m})}this.mySock=new ZT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ZT&&!n.forceDisallow_}static previouslyFailed(){return $p.isInMemoryStorage||!0===$p.get("previous_websocket_failure")}markConnectionHealthy(){$p.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=oj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Tj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ph,U_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=U_&&U_.isAvailable();let i=r&&!U_.previouslyFailed();if(t.webSocketOnly&&(r||Ts("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[U_];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Rj{constructor(e,t,r,i,s,u,h,m,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k0("c:"+this.id+":"),this.transportManager_=new Tj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=N0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=R0("t",e),r=R0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=R0("t",e),r=R0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=R0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?AN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ts("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),N0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):N0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Nj{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Oj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class KT extends Oj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new KT}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function On(){return new Gn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function mh(n){return n.pieces_.length-n.pieceNum_}function or(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function VN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function P0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Lj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function Ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function Gs(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return Gs(or(n),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Q5(n,e){const t=P0(n,0),r=P0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Wp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function BN(n,e){if(mh(n)!==mh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ra(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(mh(n)>mh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class J5{constructor(e,t){this.errorPrefix_=t,this.parts_=P0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);Vj(this)}}function Vj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qp(n))}function qp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class UN extends Oj{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new UN}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const F0=1e3;let QT,Zp=(()=>{class n extends Nj{constructor(t,r,i,s,u,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=k0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=F0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&KT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,F.Pz)(u)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const y=m.d,C=m.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ts(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):AN("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=F0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const C=function(){y?y.close():(m=!0,s())};t.realtime_={close:C,sendRequest:function(L){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,B]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?Ui("getToken() completed but was canceled"):(Ui("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=B&&B.token,y=new Rj(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,ee=>{Ts(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),m||(t.repoInfo_.nodeAdmin&&Ts(L),C())}}})()}interrupt(t){Ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>MN(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ui("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ui("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+DN.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=KT.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class YT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(jc,e),i=new cn(jc,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class jj extends YT{static get __EMPTY_NODE(){return QT}static set __EMPTY_NODE(e){QT=e}compare(e,t){return Wp(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(Ru,QT)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,QT)}toString(){return".key"}}const Nu=new jj;class JT{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let HN,gl=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:fo.EMPTY_NODE,this.right=null!=u?u:fo.EMPTY_NODE}copy(t,r,i,s,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return fo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return fo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fo{constructor(e,t=fo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gl.BLACK,null,null))}remove(e){return new fo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new JT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new JT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new JT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new JT(this.root_,null,this.comparator_,!0,e)}}function aZ(n,e){return Wp(n.name,e.name)}function jN(n,e){return Wp(n,e)}fo.EMPTY_NODE=new class{copy(e,t,r,i,s){return this}insert(e,t,r){return new gl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Hj=function(n){return"number"==typeof n?"number:"+aj(n):"string:"+n},Gj=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===HN||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===HN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $j,zj,Wj,j_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Gj(this.priorityNode_)}static set __childrenNodeConstructor(t){$j=t}static get __childrenNodeConstructor(){return $j}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===mh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Hj(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?aj(this.value_):this.value_,this.lazyHash_=rj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(s>=0,"Unknown leaf type: "+r),(0,F.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const hr=new class extends YT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Wp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(Ru,new j_("[PRIORITY-POST]",Wj))}makePost(e,t){const r=zj(e);return new cn(t,new j_("[PRIORITY-POST]",r))}toString(){return".priority"}},hZ=Math.log(2);class fZ{constructor(e){this.count=parseInt(Math.log(e+1)/hZ,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XT=function(n,e,t,r){n.sort(e);const i=function(m,y){const C=y-m;let D,R;if(0===C)return null;if(1===C)return D=n[m],R=t?t(D):D,new gl(R,D.node,gl.BLACK,null,null);{const L=parseInt(C/2,10)+m,B=i(m,L),ee=i(L+1,y);return D=n[L],R=t?t(D):D,new gl(R,D.node,gl.BLACK,B,ee)}},h=function(m){let y=null,C=null,D=n.length;const R=function(B,ee){const be=D-B,qe=D;D-=B;const ot=i(be+1,qe),ft=n[be],lt=t?t(ft):ft;L(new gl(lt,ft.node,ee,null,ot))},L=function(B){y?(y.left=B,y=B):(C=B,y=B)};for(let B=0;B<m.count;++B){const ee=m.nextBitIsOne(),be=Math.pow(2,m.count-(B+1));ee?R(be,gl.BLACK):(R(be,gl.BLACK),R(be,gl.RED))}return C}(new fZ(n.length));return new fo(r||e,h)};let GN;const H_={};class Hc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(H_&&hr,"ChildrenNode.ts has not been loaded"),GN=GN||new Hc({".priority":H_},{".priority":hr}),GN}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fo?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Nu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(cn.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?XT(r,e.getCompare()):H_;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Hc(C,y)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,s)=>{const u=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(u,"Missing index implementation for "+s),i===H_){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(cn.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),XT(h,u.getCompare())}return H_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new cn(e.name,h))),m.insert(e,e.node)}});return new Hc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===H_)return i;{const s=t.get(e.name);return s?i.remove(new cn(e.name,s)):i}});return new Hc(r,this.indexSet_)}}let L0,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Gj(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return L0||(L0=new n(new fo(jN),null,Hc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||L0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?L0:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(or(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?L0:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,F.hu)(".priority"!==an(t)||1===mh(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(or(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(hr,(h,m)=>{r[h]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Hj(this.getPriority().val())+":"),this.forEachChild(hr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":rj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new cn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,cn.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===V0?-1:0}withIndex(t){if(t===Nu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Nu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(hr),s=r.getIterator(hr);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===Nu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const V0=new class extends Yt{constructor(){super(new fo(jN),Yt.EMPTY_NODE,Hc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};function Nr(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new j_(n,Nr(e));if(n instanceof Array){let t=Yt.EMPTY_NODE;return ji(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const s=Nr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Nr(e))}{const t=[];let r=!1;if(ji(n,(u,h)=>{if("."!==u.substring(0,1)){const m=Nr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new cn(u,m)))}}),0===t.length)return Yt.EMPTY_NODE;const s=XT(t,aZ,u=>u.name,jN);if(r){const u=XT(t,hr.getCompare());return new Yt(s,Nr(e),new Hc({".priority":u},{".priority":hr}))}return new Yt(s,Nr(e),Hc.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(jc,Yt.EMPTY_NODE)},MAX:{value:new cn(Ru,V0)}}),jj.__EMPTY_NODE=Yt.EMPTY_NODE,j_.__childrenNodeConstructor=Yt,function(n){HN=n}(V0),function(n){Wj=n}(V0),function(n){zj=n}(Nr);class $N extends YT{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!ln(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Wp(e.name,t.name):s}makePost(e,t){const r=Nr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,V0);return new cn(Ru,e)}toString(){return P0(this.indexPath_,0).join("/")}}const zN=new class extends YT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Wp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Nr(e);return new cn(t,r)}toString(){return".value"}},G_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_Z=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=G_.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=G_.charAt(e[i]);return(0,F.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Kj=function(n){if(n===""+xN)return"-";const e=WT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ru;const s=G_.charAt(G_.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},Yj=function(n){if(n===""+lj)return jc;const e=WT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+xN:(delete t[t.length-1],t.join("")):(t[t.length-1]=G_.charAt(G_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Qj(n){return{type:"value",snapshotNode:n}}function $_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function B0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function U0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class qN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(B0(t,h)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange($_(t,r)):u.trackChildChange(U0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(hr,(i,s)=>{t.hasChild(i)||r.trackChildChange(B0(i,s))}),t.isLeafNode()||t.forEachChild(hr,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(U0(i,s,u))}else r.trackChildChange($_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class j0{constructor(e){this.indexedFilter_=new qN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=j0.getStartPost_(e),this.endPost_=j0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new cn(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const s=this;return t.forEachChild(hr,(u,h)=>{s.matches(new cn(u,h))||(i=i.updateImmediateChild(u,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class vZ{constructor(e){this.rangedFilter_=new j0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new cn(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Yt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(R,L)=>D(L,R)}else m=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;m.hasNext();){const D=m.getNext();!C&&h(s,D)<=0&&(C=!0),C&&y<this.limit_&&h(D,u)<=0?y++:i=i.updateImmediateChild(D.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const D=this.index_.getCompare();u=(R,L)=>D(L,R)}else u=this.index_.getCompare();const h=e;(0,F.hu)(h.numChildren()===this.limit_,"");const m=new cn(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const D=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const L=null==R?1:u(R,m);if(C&&!r.isEmpty()&&L>=0)return null!=s&&s.trackChildChange(U0(t,r,D)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(B0(t,D));const ee=h.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=s&&s.trackChildChange($_(R.name,R.node)),ee.updateImmediateChild(R.name,R.node)):ee}}return r.isEmpty()?e:C&&u(y,m)>=0?(null!=s&&(s.trackChildChange(B0(y.name,y.node)),s.trackChildChange($_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Yt.EMPTY_NODE)):e}}class eD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ru}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hr}copy(){const e=new eD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ZN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function KN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function tD(n,e){const t=n.copy();return t.index_=e,t}function Jj(n){const e={};if(n.isDefault())return e;let t;return n.index_===hr?t="$priority":n.index_===zN?t="$value":n.index_===Nu?t="$key":((0,F.hu)(n.index_ instanceof $N,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Xj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==hr&&(e.i=n.index_.toString()),e}class nD extends Nj{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=k0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=nD.getListenId_(e,r),h={};this.listens_[u]=h;const m=Jj(e._queryParams);this.restRequest_(s+".json",m,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,F.DV)(this.listens_,u)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=nD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Jj(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,F.cI)(h.responseText)}catch(y){Ts("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Ts("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class TZ{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function rD(){return{value:null,children:new Map}}function z_(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,rD()),z_(n.children.get(r),e=or(e),t)}}function YN(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(hr,(r,i)=>{z_(n,new Gn(r),i)}),YN(n,e)}}if(n.children.size>0){const t=an(e);return e=or(e),n.children.has(t)&&YN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function QN(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{QN(i,new Gn(e.toString()+"/"+r),t)})}class SZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ji(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class xZ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new SZ(e);const r=1e4+2e4*Math.random();N0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ji(e,(i,s)=>{s>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),N0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Na=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Na||(Na={})),Na))();function eO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Na.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new iD(On(),t,this.revert)}}return(0,F.hu)(an(this.path)===e,"operationForChild called for unrelated child."),new iD(or(this.path),this.affectedTree,this.revert)}}class H0{constructor(e,t){this.source=e,this.path=t,this.type=Na.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new H0(this.source,On()):new H0(this.source,or(this.path))}}class Kp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Na.OVERWRITE}operationForChild(e){return ln(this.path)?new Kp(this.source,On(),this.snap.getImmediateChild(e)):new Kp(this.source,or(this.path),this.snap)}}class W_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Na.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new Kp(this.source,On(),t.value):new W_(this.source,On(),t)}return(0,F.hu)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new W_(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class kZ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function G0(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),u.forEach(h=>{const m=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function sD(n,e){return{eventCache:n,serverCache:e}}function $0(n,e,t,r){return sD(new gh(e,t,r),n.serverCache)}function tH(n,e,t,r){return sD(n.eventCache,new gh(e,t,r))}function oD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let tO;class fr{constructor(e,t=(()=>(tO||(tO=new fo(y5)),tO))()){this.value=e,this.children=t}static fromObject(e){let t=new fr(null);return ji(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:On(),value:this.value};if(ln(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(or(e),t);return null!=s?{path:Ar(new Gn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(or(e)):new fr(null)}}set(e,t){if(ln(e))return new fr(t,this.children);{const r=an(e),s=(this.children.get(r)||new fr(null)).set(or(e),t),u=this.children.insert(r,s);return new fr(this.value,u)}}remove(e){if(ln(e))return this.children.isEmpty()?new fr(null):new fr(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(or(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new fr(null):new fr(this.value,s)}return this}}get(e){if(ln(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(or(e)):null}}setTree(e,t){if(ln(e))return t;{const r=an(e),s=(this.children.get(r)||new fr(null)).setTree(or(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new fr(this.value,u)}}fold(e){return this.fold_(On(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,On(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const s=an(e),u=this.children.get(s);return u?u.findOnPath_(or(e),Ar(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,On(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=an(e),s=this.children.get(i);return s?s.foreachOnPath_(or(e),Ar(t,i),r):new fr(null)}}foreach(e){this.foreach_(On(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _l{constructor(e){this.writeTree_=e}static empty(){return new _l(new fr(null))}}function z0(n,e,t){if(ln(e))return new _l(new fr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=Gs(i,e);return s=s.updateChild(u,t),new _l(n.writeTree_.set(i,s))}{const i=new fr(t),s=n.writeTree_.setTree(e,i);return new _l(s)}}}function nO(n,e,t){let r=n;return ji(t,(i,s)=>{r=z0(r,Ar(e,i),s)}),r}function nH(n,e){if(ln(e))return _l.empty();{const t=n.writeTree_.setTree(e,new fr(null));return new _l(t)}}function rO(n,e){return null!=Qp(n,e)}function Qp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Gs(t.path,e)):null}function rH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(hr,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function _h(n,e){if(ln(e))return n;{const t=Qp(n,e);return new _l(null!=t?new fr(t):n.writeTree_.subtree(e))}}function iO(n){return n.writeTree_.isEmpty()}function q_(n,e){return iH(On(),n.writeTree_,e)}function iH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=iH(Ar(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ar(n,".priority"),r)),t}}function aD(n,e){return uH(e,n)}function UZ(n,e){if(n.snap)return Ra(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ra(Ar(n.path,t),e))return!0;return!1}function HZ(n){return n.visible}function sH(n,e,t){let r=_l.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)Ra(t,u)?(h=Gs(t,u),r=z0(r,h,s.snap)):Ra(u,t)&&(h=Gs(u,t),r=z0(r,On(),s.snap.getChild(h)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Ra(t,u))h=Gs(t,u),r=nO(r,h,s.children);else if(Ra(u,t))if(h=Gs(u,t),ln(h))r=nO(r,On(),s.children);else{const m=(0,F.DV)(s.children,an(h));if(m){const y=m.getChild(or(h));r=z0(r,On(),y)}}}}}return r}function oH(n,e,t,r,i){if(r||i){const s=_h(n.visibleWrites,e);return!i&&iO(s)?t:i||null!=t||rO(s,On())?q_(sH(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ra(y.path,e)||Ra(e,y.path))},e),t||Yt.EMPTY_NODE):null}{const s=Qp(n.visibleWrites,e);if(null!=s)return s;{const u=_h(n.visibleWrites,e);return iO(u)?t:null!=t||rO(u,On())?q_(u,t||Yt.EMPTY_NODE):null}}}function lD(n,e,t,r){return oH(n.writeTree,n.treePath,e,t,r)}function sO(n,e){return function(n,e,t){let r=Yt.EMPTY_NODE;const i=Qp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(hr,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=_h(n.visibleWrites,e);return t.forEachChild(hr,(u,h)=>{const m=q_(_h(s,new Gn(u)),h);r=r.updateImmediateChild(u,m)}),rH(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return rH(_h(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function aH(n,e,t,r){return function(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ar(e,t);if(rO(n.visibleWrites,s))return null;{const u=_h(n.visibleWrites,s);return iO(u)?i.getChild(t):q_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function uD(n,e){return function(n,e){return Qp(n.visibleWrites,e)}(n.writeTree,Ar(n.treePath,e))}function oO(n,e,t){return function(n,e,t,r){const i=Ar(e,t),s=Qp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?q_(_h(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function lH(n,e){return uH(Ar(n.treePath,e),n.writeTree)}function uH(n,e){return{treePath:n,writeTree:e}}class YZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,U0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,B0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,$_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,U0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cH=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class aO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yp(this.viewCache_),s=function(n,e,t,r,i,s){return function(n,e,t,r,i,s,u){let h;const m=_h(n.visibleWrites,e),y=Qp(m,On());if(null!=y)h=y;else{if(null==t)return[];h=q_(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],D=u.getCompare(),R=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let L=R.getNext();for(;L&&C.length<i;)0!==D(L,r)&&C.push(L),L=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function dH(n,e,t,r,i,s){const u=e.eventCache;if(null!=uD(r,t))return e;{let h,m;if(ln(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Yp(e),D=sO(r,y instanceof Yt?y:Yt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=lD(r,Yp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=an(t);if(".priority"===y){(0,F.hu)(1===mh(t),"Can't have a priority with additional path components");const C=u.getNode();m=e.serverCache.getNode();const D=aH(r,t,C,m);h=null!=D?n.filter.updatePriority(C,D):u.getNode()}else{const C=or(t);let D;if(u.isCompleteForChild(y)){m=e.serverCache.getNode();const R=aH(r,t,u.getNode(),m);D=null!=R?u.getNode().getImmediateChild(y).updateChild(C,R):u.getNode().getImmediateChild(y)}else D=oO(r,y,e.serverCache);h=null!=D?n.filter.updateChild(u.getNode(),y,D,C,i,s):u.getNode()}}return $0(e,h,u.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function cD(n,e,t,r,i,s,u,h){const m=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(ln(t))y=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const L=m.getNode().updateChild(t,r);y=C.updateFullNode(m.getNode(),L,null)}else{const L=an(t);if(!m.isCompleteForPath(t)&&mh(t)>1)return e;const B=or(t),be=m.getNode().getImmediateChild(L).updateChild(B,r);y=".priority"===L?C.updatePriority(m.getNode(),be):C.updateChild(m.getNode(),L,be,B,cH,null)}const D=tH(e,y,m.isFullyInitialized()||ln(t),C.filtersNodes());return dH(n,D,t,i,new aO(i,D,s),h)}function lO(n,e,t,r,i,s,u){const h=e.eventCache;let m,y;const C=new aO(i,e,s);if(ln(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=$0(e,y,!0,n.filter.filtersNodes());else{const D=an(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),m=$0(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=or(t),L=h.getNode().getImmediateChild(D);let B;if(ln(R))B=r;else{const ee=C.getCompleteChild(D);B=null!=ee?".priority"===VN(R)&&ee.getChild(Lj(R)).isEmpty()?ee:ee.updateChild(R,r):Yt.EMPTY_NODE}m=L.equals(B)?e:$0(e,n.filter.updateChild(h.getNode(),D,B,R,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function hH(n,e){return n.eventCache.isCompleteForChild(e)}function fH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function uO(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=ln(t)?r:new fr(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((D,R)=>{if(C.hasChild(D)){const B=fH(0,e.serverCache.getNode().getImmediateChild(D),R);m=cD(n,m,new Gn(D),B,i,s,u,h)}}),y.children.inorderTraversal((D,R)=>{const L=!e.serverCache.isCompleteForChild(D)&&void 0===R.value;if(!C.hasChild(D)&&!L){const ee=fH(0,e.serverCache.getNode().getImmediateChild(D),R);m=cD(n,m,new Gn(D),ee,i,s,u,h)}}),m}class oK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new qN(r.getIndex()),s=function(n){return n.loadsAllData()?new qN(n.getIndex()):n.hasLimit()?new vZ(n):new j0(n)}(r);this.processor_=function(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,m=i.updateFullNode(Yt.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),C=new gh(m,u.isFullyInitialized(),i.filtersNodes()),D=new gh(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=sD(D,C),this.eventGenerator_=new kZ(this.query_)}get query(){return this.query_}}function uK(n,e){const t=Yp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function pH(n){return 0===n.eventRegistrations_.length}function mH(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function gH(n,e,t,r){e.type===Na.MERGE&&null!==e.source.queryId&&((0,F.hu)(Yp(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(oD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function(n,e,t,r,i){const s=new YZ;let u,h;if(t.type===Na.OVERWRITE){const y=t;y.source.fromUser?u=lO(n,e,y.path,y.snap,r,i,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!ln(y.path),u=cD(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Na.MERGE){const y=t;y.source.fromUser?u=function(n,e,t,r,i,s,u){let h=e;return r.foreach((m,y)=>{const C=Ar(t,m);hH(e,an(C))&&(h=lO(n,h,C,y,i,s,u))}),r.foreach((m,y)=>{const C=Ar(t,m);hH(e,an(C))||(h=lO(n,h,C,y,i,s,u))}),h}(n,e,y.path,y.children,r,i,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=uO(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Na.ACK_USER_WRITE){const y=t;u=y.revert?function(n,e,t,r,i,s){let u;if(null!=uD(r,t))return e;{const h=new aO(r,e,i),m=e.eventCache.getNode();let y;if(ln(t)||".priority"===an(t)){let C;if(e.serverCache.isFullyInitialized())C=lD(r,Yp(e));else{const D=e.serverCache.getNode();(0,F.hu)(D instanceof Yt,"serverChildren would be complete if leaf node"),C=sO(r,D)}C=C,y=n.filter.updateFullNode(m,C,s)}else{const C=an(t);let D=oO(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=m.getImmediateChild(C)),y=null!=D?n.filter.updateChild(m,C,D,or(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Yt.EMPTY_NODE,or(t),h,s):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=lD(r,Yp(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=uD(r,On()),$0(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function(n,e,t,r,i,s,u){if(null!=uD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(ln(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return cD(n,e,t,m.getNode().getChild(t),i,s,h,u);if(ln(t)){let y=new fr(null);return m.getNode().forEachChild(Nu,(C,D)=>{y=y.set(new Gn(C),D)}),uO(n,e,t,y,i,s,h,u)}return e}{let y=new fr(null);return r.foreach((C,D)=>{const R=Ar(t,C);m.isCompleteForPath(R)&&(y=y.set(C,m.getNode().getChild(R)))}),uO(n,e,t,y,i,s,h,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Na.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);u=function(n,e,t,r,i){const s=e.serverCache;return dH(n,tH(e,s.getNode(),s.isFullyInitialized()||ln(t),s.isFiltered()),t,r,cH,i)}(n,e,t.path,r,s)}const m=s.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Qj(oD(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,_H(n,s.changes,s.viewCache.eventCache.getNode(),null)}function _H(n,e,t,r){return function(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),G0(n,i,"child_removed",e,r,t),G0(n,i,"child_added",e,r,t),G0(n,i,"child_moved",s,r,t),G0(n,i,"child_changed",e,r,t),G0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dD,fD;class yH{constructor(){this.views=new Map}}function cO(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),gH(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(gH(u,e,t,r));return s}}function vH(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=lD(t,i?r:null),m=!1;h?m=!0:r instanceof Yt?(h=sO(t,r),m=!1):(h=Yt.EMPTY_NODE,m=!1);const y=sD(new gh(h,m,!1),new gh(r,i,!1));return new oK(e,y)}return u}function bH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yh(n,e){let t=null;for(const r of n.views.values())t=t||uK(r,e);return t}function wH(n,e){return e._queryParams.loadsAllData()?hD(n):n.views.get(e._queryIdentifier)}function EH(n,e){return null!=wH(n,e)}function vh(n){return null!=hD(n)}function hD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let vK=1;class CH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fr(null),this.pendingWriteTree_={visibleWrites:_l.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dO(n,e,t,r,i){return function(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=z0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Z_(n,new Kp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function bh(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&UZ(h,r.path)?i=!1:Ra(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function(n){n.visibleWrites=sH(n.allWrites,HZ,On()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=nH(n.visibleWrites,r.path):ji(r.children,m=>{n.visibleWrites=nH(n.visibleWrites,Ar(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let s=new fr(null);return null!=r.snap?s=s.set(On(),!0):ji(r.children,u=>{s=s.set(new Gn(u),!0)}),Z_(n,new iD(r.path,s,t))}return[]}function W0(n,e,t){return Z_(n,new Kp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function hO(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let u=[];if(s&&("default"===e._queryIdentifier||EH(s,e))){const h=function(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=vh(n);if("default"===i)for(const[m,y]of n.views.entries())u=u.concat(mH(y,t,r)),pH(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||s.push(y.query));else{const m=n.views.get(i);m&&(u=u.concat(mH(m,t,r)),pH(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||s.push(m.query)))}return h&&!vh(n)&&s.push(new((0,F.hu)(dD,"Reference.ts has not been loaded"),dD)(e._repo,e._path)),{removed:s,events:u}}(s,e,t,r);(function(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;u=h.events;const y=-1!==m.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(D,R)=>vh(R));if(y&&!C){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const R=function(n){return n.fold((e,t,r)=>{if(t&&vh(t))return[hD(t)];{let i=[];return t&&(i=bH(t)),ji(r,(s,u)=>{i=i.concat(u)}),i}})}(D);for(let L=0;L<R.length;++L){const B=R[L],ee=B.query,be=SH(n,B);n.listenProvider_.startListening(q0(ee),mD(n,ee),be.hashFn,be.onComplete)}}}if(!C&&m.length>0&&!r)if(y){const D=null;n.listenProvider_.stopListening(q0(e),D)}else m.forEach(D=>{const R=n.queryToTagMap.get(gD(D));n.listenProvider_.stopListening(q0(D),R)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=gD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,m)}return u}function IH(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(D,R)=>{const L=Gs(D,r);i=i||yh(R,L),s=s||vh(R)});let h,u=n.syncPointTree_.get(r);u?(s=s||vh(u),i=i||yh(u,On())):(u=new yH,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=Yt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((R,L)=>{const B=yh(L,On());B&&(i=i.updateImmediateChild(R,B))}));const m=EH(u,e);if(!m&&!e._queryParams.loadsAllData()){const D=gD(e);(0,F.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const R=vK++;n.queryToTagMap.set(D,R),n.tagToQueryMap.set(R,D)}let C=function(n,e,t,r,i,s){const u=vH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(hr,(s,u)=>{r.push($_(s,u))}),t.isFullyInitialized()&&r.push(Qj(t.getNode())),_H(n,r,t.getNode(),e)}(u,t)}(u,e,t,aD(n.pendingWriteTree_,r),i,h);if(!m&&!s){const D=wH(u,e);C=C.concat(function(n,e,t){const r=e._path,i=mD(n,e),s=SH(n,t),u=n.listenProvider_.startListening(q0(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!vh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,C,D)=>{if(!ln(y)&&C&&vh(C))return[hD(C).query];{let R=[];return C&&(R=R.concat(bH(C).map(L=>L.query))),ji(D,(L,B)=>{R=R.concat(B)}),R}});for(let y=0;y<m.length;++y){const C=m[y];n.listenProvider_.stopListening(q0(C),mD(n,C))}}return u}(n,e,D))}return C}function pD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=yh(h,Gs(u,e));if(y)return y});return oH(i,e,s,t,!0)}function Z_(n,e){return TH(e,n.syncPointTree_,null,aD(n.pendingWriteTree_,On()))}function TH(n,e,t,r){if(ln(n.path))return DH(n,e,t,r);{const i=e.get(On());null==t&&null!=i&&(t=yh(i,On()));let s=[];const u=an(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const y=t?t.getImmediateChild(u):null,C=lH(r,u);s=s.concat(TH(h,m,y,C))}return i&&(s=s.concat(cO(i,n,r,t))),s}}function DH(n,e,t,r){const i=e.get(On());null==t&&null!=i&&(t=yh(i,On()));let s=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,y=lH(r,u),C=n.operationForChild(u);C&&(s=s.concat(DH(C,h,m,y)))}),i&&(s=s.concat(cO(i,n,r,t))),s}function SH(n,e){const t=e.query,r=mD(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=fO(n,t);if(r){const i=pO(r),s=i.path,u=i.queryId,h=Gs(s,e);return mO(n,s,new H0(eO(u),h))}return[]}(n,t._path,r):function(n,e){return Z_(n,new H0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return hO(n,t,null,s)}}}}function mD(n,e){const t=gD(e);return n.queryToTagMap.get(t)}function gD(n){return n._path.toString()+"$"+n._queryIdentifier}function fO(n,e){return n.tagToQueryMap.get(e)}function pO(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function mO(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),cO(r,t,aD(n.pendingWriteTree_,e),null)}function q0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(fD,"Reference.ts has not been loaded"),fD)(n._repo,n._path):n}class gO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new gO(t)}node(){return this.node_}}class _O{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ar(this.path_,e);return new _O(this.syncTree_,t)}node(){return pD(this.syncTree_,this.path_)}}const AH=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?RK(n[".sv"],e,t):"object"==typeof n[".sv"]?NK(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},RK=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},NK=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},MH=function(n,e,t,r){return vO(e,new _O(t,n),r)},yO=function(n,e,t){return vO(n,new gO(e),t)};function vO(n,e,t){const r=n.getPriority().val(),i=AH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=AH(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new j_(h,Nr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new j_(i))),u.forEachChild(hr,(h,m)=>{const y=vO(m,e.getImmediateChild(h),t);y!==m&&(s=s.updateImmediateChild(h,y))}),s}}class bO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function _D(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=an(t);for(;null!==i;){const s=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new bO(i,r,s),t=or(t),i=an(t)}return r}function Jp(n){return n.node.value}function wO(n,e){n.node.value=e,EO(n)}function xH(n){return n.node.childCount>0}function yD(n,e){ji(n.node.children,(t,r)=>{e(new bO(t,n,r))})}function kH(n,e,t,r){t&&!r&&e(n),yD(n,i=>{kH(i,e,!0,r)}),t&&r&&e(n)}function Z0(n){return new Gn(null===n.parent?n.name:Z0(n.parent)+"/"+n.name)}function EO(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Jp(n)&&!xH(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,EO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,EO(n))}(n.parent,n.name,n)}const LK=/[\[\].#$\/\u0000-\u001F\u007F]/,VK=/[\[\].#$\u0000-\u001F\u007F]/,CO=10485760,vD=function(n){return"string"==typeof n&&0!==n.length&&!LK.test(n)},RH=function(n){return"string"==typeof n&&0!==n.length&&!VK.test(n)},K0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!zT(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Ou=function(n,e,t,r){r&&void 0===e||Y0((0,F.gK)(n,"value"),e,t)},Y0=function(n,e,t){const r=t instanceof Gn?new J5(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+qp(r));if("function"==typeof e)throw new Error(n+"contains a function "+qp(r)+" with contents = "+e.toString());if(zT(e))throw new Error(n+"contains "+e.toString()+" "+qp(r));if("string"==typeof e&&e.length>CO/3&&(0,F.ug)(e)>CO)throw new Error(n+"contains a string greater than "+CO+" utf8 bytes "+qp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ji(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!vD(u)))throw new Error(n+" contains an invalid key ("+u+") "+qp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),Vj(n)})(r,u),Y0(n,h,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+qp(r)+" in addition to actual children.")}},NH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ji(e,(u,h)=>{const m=new Gn(u);if(Y0(i,h,Ar(t,m)),".priority"===VN(m)&&!K0(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=P0(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!vD(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Q5);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ra(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},IO=function(n,e,t){if(!t||void 0!==e){if(zT(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!K0(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Q0=function(n,e,t,r){if(!(r&&void 0===t||vD(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},J0=function(n,e,t,r){if(!(r&&void 0===t||RH(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oa=function(n,e){if(".info"===an(e))throw new Error(n+" failed = Can't modify data under /.info/")},OH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RH(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class HK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!BN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function TO(n,e,t){bD(n,t),PH(n,r=>BN(r,e))}function Pa(n,e,t){bD(n,t),PH(n,r=>Ra(r,e)||Ra(e,r))}function PH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(GK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function GK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();zp&&Ui("event: "+t.toString()),B_(r)}}}const FH="repo_interrupt";class zK{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rD(),this.transactionQueueTree_=new bO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LH(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function X0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:LH(n)})}function VH(n,e,t,r,i){n.dataUpdateCount++;const s=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,F.UI)(t,y=>Nr(y));u=function(n,e,t,r){const i=fO(n,r);if(i){const s=pO(i),u=s.path,h=s.queryId,m=Gs(u,e),y=fr.fromObject(t);return mO(n,u,new W_(eO(h),m,y))}return[]}(n.serverSyncTree_,s,m,i)}else{const m=Nr(t);u=function(n,e,t,r){const i=fO(n,r);if(null!=i){const s=pO(i),u=s.path,h=s.queryId,m=Gs(u,e);return mO(n,u,new Kp(eO(h),m,t))}return[]}(n.serverSyncTree_,s,m,i)}else if(r){const m=(0,F.UI)(t,y=>Nr(y));u=function(n,e,t){const r=fr.fromObject(t);return Z_(n,new W_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,m)}else{const m=Nr(t);u=W0(n.serverSyncTree_,s,m)}let h=s;u.length>0&&(h=Y_(n,s)),Pa(n.eventQueue_,h,u)}function BH(n,e){DO(n,"connected",e),!1===e&&function(n){K_(n,"onDisconnectEvents");const e=X0(n),t=rD();QN(n.onDisconnect_,On(),(i,s)=>{const u=MH(i,s,n.serverSyncTree_,e);z_(t,i,u)});let r=[];QN(t,On(),(i,s)=>{r=r.concat(W0(n.serverSyncTree_,i,s));const u=xO(n,i);Y_(n,u)}),n.onDisconnect_=rD(),Pa(n.eventQueue_,On(),r)}(n)}function DO(n,e,t){const r=new Gn("/.info/"+e),i=Nr(t);n.infoData_.updateSnapshot(r,i);const s=W0(n.infoSyncTree_,r,i);Pa(n.eventQueue_,r,s)}function wD(n){return n.nextWriteId_++}function SO(n,e,t,r,i){K_(n,"set",{path:e.toString(),value:t,priority:r});const s=X0(n),u=Nr(t,r),h=pD(n.serverSyncTree_,e),m=yO(u,h,s),y=wD(n),C=dO(n.serverSyncTree_,e,m,y,!0);bD(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(R,L)=>{const B="ok"===R;B||Ts("set at "+e+" failed: "+R);const ee=bh(n.serverSyncTree_,y,!B);Pa(n.eventQueue_,e,ee),wh(0,i,R,L)});const D=xO(n,e);Y_(n,D),Pa(n.eventQueue_,D,[])}function QK(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&YN(n.onDisconnect_,e),wh(0,t,r,i)})}function UH(n,e,t,r){const i=Nr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&z_(n.onDisconnect_,e,i),wh(0,r,s,u)})}function AO(n,e,t){let r;r=".info"===an(e._path)?hO(n.infoSyncTree_,e,t):hO(n.serverSyncTree_,e,t),TO(n.eventQueue_,e._path,r)}function jH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FH)}function K_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ui(t,...e)}function wh(n,e,t,r){e&&B_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function MO(n,e,t){return pD(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function ED(n,e=n.transactionQueueTree_){if(e||CD(n,e),Jp(e)){const t=GH(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(y=>y.currentWriteId),i=MO(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,F.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Gs(e,C.path);s=s.updateChild(D,C.currentOutputSnapshotRaw)}const h=s.val(!0),m=e;n.server_.put(m.toString(),h,y=>{K_(n,"transaction put response",{path:m.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(bh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();CD(n,_D(n.transactionQueueTree_,e)),ED(n,n.transactionQueueTree_),Pa(n.eventQueue_,e,C);for(let R=0;R<D.length;R++)B_(D[R])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Ts("transaction at "+m.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}Y_(n,e)}},u)}(n,Z0(e),t)}else xH(e)&&yD(e,t=>{ED(n,t)})}function Y_(n,e){const t=HH(n,e),r=Z0(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=Gs(t,m.path);let D,C=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,D=m.abortReason,i=i.concat(bh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,D="maxretry",i=i.concat(bh(n.serverSyncTree_,m.currentWriteId,!0));else{const R=MO(n,m.path,u);m.currentInputSnapshot=R;const L=e[h].update(R.val());if(void 0!==L){Y0("transaction failed: Data returned ",L,m.path);let B=Nr(L);"object"==typeof L&&null!=L&&(0,F.r3)(L,".priority")||(B=B.updatePriority(R.getPriority()));const be=m.currentWriteId,qe=X0(n),ot=yO(B,R,qe);m.currentOutputSnapshotRaw=B,m.currentOutputSnapshotResolved=ot,m.currentWriteId=wD(n),u.splice(u.indexOf(be),1),i=i.concat(dO(n.serverSyncTree_,m.path,ot,m.currentWriteId,m.applyLocally)),i=i.concat(bh(n.serverSyncTree_,be,!0))}else C=!0,D="nodata",i=i.concat(bh(n.serverSyncTree_,m.currentWriteId,!0))}Pa(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}CD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)B_(r[h]);ED(n,n.transactionQueueTree_)}(n,GH(n,t),r),r}function HH(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===Jp(r);)r=_D(r,t),t=an(e=or(e));return r}function GH(n,e){const t=[];return $H(n,e,t),t.sort((r,i)=>r.order-i.order),t}function $H(n,e,t){const r=Jp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yD(e,i=>{$H(n,i,t)})}function CD(n,e){const t=Jp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,wO(e,t.length>0?t:void 0)}yD(e,r=>{CD(n,r)})}function xO(n,e){const t=Z0(HH(n,e)),r=_D(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{kO(n,i)}),kO(n,r),kH(r,i=>{kO(n,i)}),t}function kO(n,e){const t=Jp(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,F.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,F.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(bh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?wO(e,void 0):t.length=s+1,Pa(n.eventQueue_,Z0(e),i);for(let u=0;u<r.length;u++)B_(r[u])}}const RO=function(n,e){const t=aY(n),r=t.namespace;return"firebase.com"===t.domain&&ku(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ku("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ts("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new RN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},aY=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(C,D)));const R=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ts(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),s=r}"ns"in R&&(s=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class zH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class WH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ZH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return QK(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Oa("OnDisconnect.remove",this._path);const e=new F.BH;return UH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Oa("OnDisconnect.set",this._path),Ou("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return UH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Oa("OnDisconnect.setWithPriority",this._path),Ou("OnDisconnect.setWithPriority",e,this._path,!1),IO("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,i){const s=Nr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&z_(n.onDisconnect_,e,s),wh(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Oa("OnDisconnect.update",this._path),NH("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return Ui("onDisconnect().update() called with empty data.  Don't do anything."),void wh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ji(t,(u,h)=>{const m=Nr(h);z_(n.onDisconnect_,Ar(e,u),m)}),wh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class po{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:VN(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const e=Xj(this._queryParams),t=MN(e);return"{}"===t?"default":t}get _queryObject(){return Xj(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof po))return!1;const t=this._repo===e._repo,r=BN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ID(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Eh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Nu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==jc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ru)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===hr){if(null!=e&&!K0(e)||null!=t&&!K0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof $N||n.getIndex()===zN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function TD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fa extends po{constructor(e,t){super(e,t,new eD,!1)}get parent(){const e=Lj(this._path);return null===e?null:new Fa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Xp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gn(e),r=em(this.ref,e);return new Xp(this._node.getChild(t),r,hr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Xp(i,em(this.ref,r),hr)))}hasChild(e){const t=new Gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function KH(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?em(n._root,e):n._root}function YH(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=RO(e,n._repo.repoInfo_.nodeAdmin);OH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ku("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),KH(n,t.path.toString())}function em(n,e){return null===an((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),J0("child","path",t,!1)):J0("child","path",e,!1),new Fa(n._repo,Ar(n._path,e));var t}function NO(n,e){n=(0,F.m9)(n),Oa("set",n._path),Ou("set",e,n._path,!1);const t=new F.BH;return SO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function hY(n,e){NH("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){K_(n,"update",{path:e.toString(),value:t});let i=!0;const s=X0(n),u={};if(ji(t,(h,m)=>{i=!1,u[h]=MH(Ar(e,h),Nr(m),n.serverSyncTree_,s)}),i)Ui("update() called with empty data.  Don't do anything."),wh(0,r,"ok",void 0);else{const h=wD(n),m=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=nO(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=fr.fromObject(t);return Z_(n,new W_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);bD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,C)=>{const D="ok"===y;D||Ts("update at "+e+" failed: "+y);const R=bh(n.serverSyncTree_,h,!D),L=R.length>0?Y_(n,e):e;Pa(n.eventQueue_,L,R),wh(0,r,y,C)}),ji(t,y=>{const C=xO(n,Ar(e,y));Y_(n,C)}),Pa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function fY(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const D=Gs(y,t);r=r||yh(C,D)});let i=n.syncPointTree_.get(t);i?r=r||yh(i,On()):(i=new yH,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new gh(r,!0,!1):null;return function(n){return oD(n.viewCache_)}(vH(i,e,aD(n.pendingWriteTree_,e._path),s?u.getNode():Yt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Nr(r).withIndex(e._queryParams.getIndex()),s=W0(n.serverSyncTree_,e._path,i);return TO(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(K_(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new Xp(e,new Fa(n._repo,n._path),n._queryParams.getIndex()))}class DD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new zH("value",this,new Xp(e.snapshotNode,new Fa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WH(this,e,t):null}matches(e){return e instanceof DD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class SD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WH(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=em(new Fa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new zH(e.type,this,new Xp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof SD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ew(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const m=t,y=(C,D)=>{AO(n._repo,n,h),m(C,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new qH(t,s||void 0),h="value"===e?new DD(u):new SD(e,u);return function(n,e,t){let r;r=".info"===an(e._path)?IH(n.infoSyncTree_,e,t):IH(n.serverSyncTree_,e,t),TO(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>AO(n._repo,n,h)}function OO(n,e,t,r){return ew(n,"value",e,t,r)}function QH(n,e,t,r){return ew(n,"child_added",e,t,r)}function JH(n,e,t,r){return ew(n,"child_changed",e,t,r)}function XH(n,e,t,r){return ew(n,"child_moved",e,t,r)}function e3(n,e,t,r){return ew(n,"child_removed",e,t,r)}function t3(n,e,t){let r=null;const i=t?new qH(t):null;"value"===e?r=new DD(i):e&&(r=new SD(e,i)),AO(n._repo,n,r)}class yl{}class n3 extends yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ou("endAt",this._value,e._path,!0);const t=KN(e._queryParams,this._value,this._key);if(TD(t),Eh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class mY extends yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ou("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===Nu?("string"==typeof e&&(e=Yj(e)),i=KN(n,e,t)):(r=null==t?jc:Yj(t),i=KN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(TD(t),Eh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class r3 extends yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ou("startAt",this._value,e._path,!0);const t=ZN(e._queryParams,this._value,this._key);if(TD(t),Eh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class yY extends yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ou("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Nu)"string"==typeof e&&(e=Kj(e)),r=ZN(n,e,t);else{let i;i=null==t?Ru:Kj(t),r=ZN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(TD(t),Eh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class bY extends yl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new po(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class EY extends yl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new po(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class IY extends yl{constructor(e){super(),this._path=e}_apply(e){ID(e,"orderByChild");const t=new Gn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new $N(t),i=tD(e._queryParams,r);return Eh(i),new po(e._repo,e._path,i,!0)}}class DY extends yl{_apply(e){ID(e,"orderByKey");const t=tD(e._queryParams,Nu);return Eh(t),new po(e._repo,e._path,t,!0)}}class AY extends yl{_apply(e){ID(e,"orderByPriority");const t=tD(e._queryParams,hr);return Eh(t),new po(e._repo,e._path,t,!0)}}class xY extends yl{_apply(e){ID(e,"orderByValue");const t=tD(e._queryParams,zN);return Eh(t),new po(e._repo,e._path,t,!0)}}class RY extends yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ou("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new n3(this._value,this._key)._apply(new r3(this._value,this._key)._apply(e))}}function vl(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!dD,"__referenceConstructor has already been defined"),dD=n})(Fa),function(n){(0,F.hu)(!fD,"__referenceConstructor has already been defined"),fD=n}(Fa);const PO={};function o3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ku("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ui("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,u=RO(s,i),h=u.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(m=!0,s=`http://${y}?ns=${h.namespace}`,u=RO(s,i),h=u.repoInfo):m=!u.repoInfo.secure;const C=i&&m?new O0(O0.OWNER):new T5(n.name,n.options,e);OH("Invalid Firebase Database URL",u),ln(u.path)||ku("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function(n,e,t,r){let i=PO[e.name];i||(i={},PO[e.name]=i);let s=i[n.toURLString()];return s&&ku("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new zK(n,false,t,r),i[n.toURLString()]=s,s}(h,n,C,new I5(n.name,t));return new BY(D,n)}class BY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=PN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new nD(n.repoInfo_,(r,i,s,u)=>{VH(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>BH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zp(n.repoInfo_,e,(r,i,s,u)=>{VH(n,r,i,s,u)},r=>{BH(n,r)},r=>{!function(n,e){ji(e,(t,r)=>{DO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return ON[t]||(ON[t]=e()),ON[t]}(n.repoInfo_,()=>new xZ(n.stats_,n.server_)),n.infoData_=new TZ,n.infoSyncTree_=new CH({startListening:(r,i,s,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=W0(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),DO(n,"connected",!1),n.serverSyncTree_=new CH({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,m)=>{const y=u(h,m);Pa(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,On())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=PO[e];(!t||t[n.key]!==n)&&ku(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ku("Cannot call "+e+" on a deleted database.")}}function a3(){Tj.IS_TRANSPORT_INITIALIZED&&Ts("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function UY(){a3(),ph.forceDisallow()}function jY(){a3(),U_.forceDisallow(),ph.forceAllow()}function zY(n,e){sj(n,e)}class YY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},ej(Lo.SDK_VERSION),(0,Lo._registerComponent)(new dl.wA("database",(e,{instanceIdentifier:t})=>o3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Lo.registerVersion)(J2,"0.13.0",void 0),(0,Lo.registerVersion)(J2,"0.13.0","esm2017");const e7=new Vo.Yd("@firebase/database-compat"),l3=function(n){e7.warn("FIREBASE WARNING: "+n)};class r7{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,l3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class i7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ch{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),J0("DataSnapshot.child","path",e,!1),new Ch(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),J0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ch(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new jo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class is{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const u=is.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(u.context,new Ch(this.database,y),C)};h.userCallback=t,h.context=u.context;const m=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return OO(this._delegate,h,m),t;case"child_added":return QH(this._delegate,h,m),t;case"child_removed":return e3(this._delegate,h,m),t;case"child_changed":return JH(this._delegate,h,m),t;case"child_moved":return XH(this._delegate,h,m),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,t3(this._delegate,e,i)}else t3(this._delegate,e)}get(){return fY(this._delegate).then(e=>new Ch(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const s=is.getCancelAndContextArgs_("Query.once",r,i),u=new F.BH,h=(y,C)=>{const D=new Ch(this.database,y);t&&t.call(s.context,D,C),u.resolve(D)};h.userCallback=t,h.context=s.context;const m=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":OO(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":QH(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":e3(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":JH(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":XH(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new is(this.database,vl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bY(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new is(this.database,vl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new EY(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new is(this.database,vl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return J0("orderByChild","path",n,!1),new IY(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new is(this.database,vl(this._delegate,new DY))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new is(this.database,vl(this._delegate,new AY))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new is(this.database,vl(this._delegate,new xY))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new is(this.database,vl(this._delegate,function(n=null,e){return Q0("startAt","key",e,!0),new r3(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new is(this.database,vl(this._delegate,function(n,e){return Q0("startAfter","key",e,!0),new yY(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new is(this.database,vl(this._delegate,function(n,e){return Q0("endAt","key",e,!0),new n3(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new is(this.database,vl(this._delegate,function(n,e){return Q0("endBefore","key",e,!0),new mY(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new is(this.database,vl(this._delegate,function(n,e){return Q0("equalTo","key",e,!0),new RY(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof is))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new jo(this.database,new Fa(this._delegate._repo,this._delegate._path))}}class jo extends is{constructor(e,t){super(e,new po(t._repo,t._path,new eD,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new jo(this.database,em(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new jo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new jo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=NO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,l3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oa("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=hY(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Oa("setWithPriority",n._path),Ou("setWithPriority",e,n._path,!1),IO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return SO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Oa("remove",n._path),NO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,F.m9)(n),Oa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new F.BH,h=OO(n,()=>{});return function(n,e,t,r,i,s){K_(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:nj(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=MO(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Y0("transaction failed: Data returned ",m,u.path),u.status=0;const y=_D(n.transactionQueueTree_,e),C=Jp(y)||[];let D;C.push(u),wO(y,C),"object"==typeof m&&null!==m&&(0,F.r3)(m,".priority")?(D=(0,F.DV)(m,".priority"),(0,F.hu)(K0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(pD(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const R=X0(n),L=Nr(m,D),B=yO(L,h,R);u.currentOutputSnapshotRaw=L,u.currentOutputSnapshotResolved=B,u.currentWriteId=wD(n);const ee=dO(n.serverSyncTree_,e,B,u.currentWriteId,u.applyLocally);Pa(n.eventQueue_,e,ee),ED(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,C)=>{let D=null;m?s.reject(m):(D=new Xp(C,new Fa(n._repo,n._path),hr),s.resolve(new YY(y,D)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new i7(s.committed,new Ch(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),Oa("setPriority",n._path),IO("setPriority",e,!1);const t=new F.BH;return SO(n._repo,Ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),Oa("push",n._path),Ou("push",e,n._path,!0);const t=LH(n._repo),r=_Z(t),i=em(n,r),s=em(n,r);let u;return u=null!=e?NO(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new jo(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new jo(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Oa("Reference.onDisconnect",this._delegate._path),new r7(new ZH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class tw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:UY,forceLongPolling:jY}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ku("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ku('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new O0(O0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);s=new O0(u)}!function(n,e,t,r){n.repoInfo_=new RN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof jo){const t=YH(this._delegate,e.toString());return new jo(this,t)}{const t=KH(this._delegate,e);return new jo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=YH(this._delegate,e);return new jo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),jH(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(FH)}(n._repo)}(this._delegate)}}tw.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var o7=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){ej(t);const u=new dl.zt("auth-internal",new dl.H0("database-standalone"));return u.setComponent(new dl.wA("auth-internal",()=>r,"PRIVATE")),{instance:new tw(o3(n,u,void 0,e,s),n),namespace:i}}});const a7=tw.ServerValue;function u3(n){return null==n}function c3(n){return"function"==typeof n.set}function d3(n,e){return c3(e)?e:n.ref(e)}function h3(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(c3(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function nw(n,e,t="on",r=hu.z){return new Yn.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,et.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,_R.B)())}function f3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function f7(n,e){const{payload:t,prevKey:r,key:i}=e,s=f3(n,i),u=function(n,e){if(u3(e))return 0;{const t=f3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function p3(n){return(u3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function m3(n,e,t){return function(n,e,t){return nw(n,"value","once",t).pipe($t(r=>{const i=[Xe(r)];return e.forEach(s=>i.push(nw(n,s,"on",t))),(0,co.T)(...i).pipe(ii(f7,[]))}),zm())}(n,e=p3(e),t)}function g3(n,e,t){const r=(e=p3(e)).map(i=>nw(n,i,"on",t));return(0,co.T)(...r)}function _3(n,e){return function(r,i){return h3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function _7(n){return function(t){return t?h3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function y3(n,e){return function(){return nw(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new dl.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new tw(i,r)},"PUBLIC").setServiceProps({Reference:jo,Query:is,Database:tw,DataSnapshot:Ch,enableLogging:zY,INTERNAL:o7,ServerValue:a7}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(jv.Z);const b7=new c.OlP("angularfire2.realtimeDatabaseURL"),w7=new c.OlP("angularfire2.database.use-emulator");let E7=(()=>{class n{constructor(t,r,i,s,u,h,m,y,C,D,R,L,B,ee,be){this.schedulers=h;const qe=m,ot=(0,Ri.on)(t,u,r);y&&jR(ot,u,C,R,L,B,D,ee),this.database=(0,Ri.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const ft=u.runOutsideAngular(()=>ot.database(i||void 0));return qe&&ft.useEmulator(...qe),ft},[qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>d3(this.database,t));let s=i;return r&&(s=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:_3(r,"update"),set:_3(r,"set"),push:i=>r.push(i),remove:_7(r),snapshotChanges:i=>m3(n,i,t).pipe(Jn.iC),stateChanges:i=>g3(n,i,t).pipe(Jn.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return nw(n,"value","on",e).pipe((0,et.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,Js.jO)(n);return(0,rr.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Fr.Xf)(n[m]).subscribe(new kn.Q(r,y=>{s[m]=y,!h&&!u[m]&&(u[m]=!0,(h=u.every(hs.y))&&(u=null))},uf.Z));t.subscribe(new kn.Q(r,m=>{if(h){const y=[m,...s];r.next(e?e(...y):y)}}))})}(e),(0,et.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(m=>m.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,s=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(s)))&&t.next(s)))}),(0,et.U)(i=>i.actions))}(n,g3(n,e).pipe(ii((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Jn.iC),valueChanges:(i,s)=>m3(n,i,t).pipe((0,et.U)(h=>h.map(m=>s&&s.idField?Object.assign(Object.assign({},m.payload.val()),{[s.idField]:m.key}):m.payload.val())),Jn.iC)}}(s,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>y3(n,e.schedulers.outsideAngular)().pipe(Jn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>y3(n,e.schedulers.outsideAngular)().pipe(Jn.iC,(0,et.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>d3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ri.Dh),c.LFG(Ri.xv,8),c.LFG(b7,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Jn.HU),c.LFG(w7,8),c.LFG(CT,8),c.LFG(PR,8),c.LFG(FR,8),c.LFG(LR,8),c.LFG(VR,8),c.LFG(BR,8),c.LFG(UR,8),c.LFG(ET,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),C7=(()=>{class n{constructor(){h6.Z.registerVersion("angularfire",Jn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[E7]}),n})(),I7=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-page-not-found"]],decls:4,vars:0,consts:[["routerLink","/home"]],template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"Page non trouv\xe9e"),c.qZA(),c.TgZ(2,"li",0),c._uU(3,"Aller \xe0 la page d'accueil"),c.qZA())},directives:[md],styles:[""]}),n})(),T7=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-history"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"history works!"),c.qZA())},styles:[""]}),n})(),D7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Hr,_d.forChild([{path:"history",component:T7}])]]}),n})(),FO=(()=>{class n{constructor(t,r){this.authService=r,this.database=t}addIntakes(t,r,i){this.authService.userData.uid&&this.database.collection("intakes").add({nickname:t,intakeValue:r,titleIntake:i,date:new Date,uid:this.authService.userData.uid})}addTargetIntake(t){if(JSON.parse(localStorage.getItem("user")).uid){const r=this.database.doc(`person/${this.authService.userData.uid}`),i=JSON.parse(localStorage.getItem("user"));r.set({uid:i.uid,nickname:i.displayName,targetIntake:t},{merge:!0}),this.database.doc(`person/${this.authService.userData.uid}`).update({targetIntake:t}),this.database.doc(`users/${this.authService.userData.uid}`).update({targetIntake:t})}}addNewTeam(t){JSON.parse(localStorage.getItem("user")).uid&&this.database.collection("teams").add({teamName:t,ownerUid:this.authService.userData.uid}).then(r=>{this.database.collection("teamMembers").add({teamId:r.id,memberUid:this.authService.userData.uid,ownerUid:this.authService.userData.uid})})}getAllTeamsForUser(){if(JSON.parse(localStorage.getItem("user")).uid)return this.database.collection("teamMembers",t=>t.where("memberUid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamFromOwnerId(t){if(JSON.parse(localStorage.getItem("user")).uid)return this.database.collection("teams",r=>r.where("ownerUid","==",t)).valueChanges({idField:"eventId"})}getAllIntakesDocuments(){if(void 0!==localStorage.getItem("user"))return this.database.collection("intakes",t=>t.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getPersonConnectedInfos(){if(void 0!==localStorage.getItem("user"))return this.database.collection("person",t=>t.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamMembersWithTeamId(t){return this.database.collection("teamMembers",r=>r.where("teamId","==",t)).valueChanges()}getUserByUid(t){return this.database.collection("users",r=>r.where("uid","==",t)).valueChanges()}getAllIntakesDocumentsByUid(t){return this.database.collection("intakes",r=>r.where("uid","==",t)).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($R),c.LFG(TT))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A7=["*"],v3=new c.OlP("MatChipRemove"),b3=new c.OlP("MatChipAvatar"),w3=new c.OlP("MatChipTrailingIcon");class M7{constructor(e){this._elementRef=e}}const x7=mC(Tc(pC(M7),"primary"),-1);let AD=(()=>{class n extends x7{constructor(t,r,i,s,u,h,m,y){super(t),this._ngZone=r,this._changeDetectorRef=u,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new Bt.x,this._onBlur=new Bt.x,this.selectionChange=new c.vpe,this.destroyed=new c.vpe,this.removed=new c.vpe,this._addHostClassName(),this._chipRippleTarget=h.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new bC(this,r,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===m,this.tabIndex=null!=y&&parseInt(y)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const r=sr(t);r!==this._selected&&(this._selected=r,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=sr(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=sr(t)}get removable(){return this._removable}set removable(t){this._removable=sr(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",r=this._elementRef.nativeElement;r.hasAttribute(t)||r.tagName.toLowerCase()===t?r.classList.add(t):r.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled&&t.preventDefault()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(_s),c.Y36(wC,8),c.Y36(c.sBO),c.Y36(ie),c.Y36(Fo,8),c.$8M("tabindex"))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,b3,5),c.Suo(i,w3,5),c.Suo(i,v3,5)),2&t){let s;c.iGM(s=c.CRH())&&(r.avatar=s.first),c.iGM(s=c.CRH())&&(r.trailingIcon=s.first),c.iGM(s=c.CRH())&&(r.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&t&&(c.uIk("tabindex",r.disabled?null:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString())("aria-selected",r.ariaSelected),c.ekj("mat-chip-selected",r.selected)("mat-chip-with-avatar",r.avatar)("mat-chip-with-trailing-icon",r.trailingIcon||r.removeIcon)("mat-chip-disabled",r.disabled)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[c.qOj]}),n})(),E3=(()=>{class n{constructor(t,r){this._parentChip=t,"BUTTON"===r.nativeElement.nodeName&&r.nativeElement.setAttribute("type","button")}_handleClick(t){const r=this._parentChip;r.removable&&!r.disabled&&r.remove(),t.stopPropagation(),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(AD),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._handleClick(s)})},features:[c._Bn([{provide:v3,useExisting:n}])]}),n})();const C3=new c.OlP("mat-chips-default-options"),N7=gC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let O7=0;class P7{constructor(e,t){this.source=e,this.value=t}}let I3=(()=>{class n extends N7{constructor(t,r,i,s,u,h,m){super(h,s,u,m),this._elementRef=t,this._changeDetectorRef=r,this._dir=i,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new Bt.x,this._uid="mat-chip-list-"+O7++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(y,C)=>y===C,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new c.vpe,this.valueChange=new c.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var t,r;return this.multiple?(null==(t=this._selectionModel)?void 0:t.selected)||[]:null==(r=this._selectionModel)?void 0:r.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=sr(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(P_.required))&&s}set required(t){this._required=sr(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=sr(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=sr(t),this.chips&&this.chips.forEach(r=>r.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return(0,co.T)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return(0,co.T)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return(0,co.T)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return(0,co.T)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new No(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Rr(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Rr(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Mr(null),Rr(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new Pm(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const r=t.target;r&&r.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,r=!0){if(this._clearSelection(),this.chips.forEach(i=>i.deselect()),Array.isArray(t))t.forEach(i=>this._selectValue(i,r)),this._sortValues();else{const i=this._selectValue(t,r);i&&r&&this._keyManager.setActiveItem(i)}}_selectValue(t,r=!0){const i=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,t));return i&&(r?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(r=>{r!==t&&r.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let r=null;r=Array.isArray(this.selected)?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.change.emit(new P7(this,r)),this.valueChange.emit(r),this._onChange(r),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(r=>{!this._selectionModel.isSelected(r)&&r.selected&&r.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let r=this.chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&this._keyManager.updateActiveItem(r),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const r=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&r._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let r=t.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-chip"))return!0;r=r.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(cf,8),c.Y36(M0,8),c.Y36(Gp,8),c.Y36(Ig),c.Y36(xu,10))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,AD,5),2&t){let s;c.iGM(s=c.CRH())&&(r.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,r){1&t&&c.NdJ("focus",function(){return r.focus()})("blur",function(){return r._blur()})("keydown",function(s){return r._keydown(s)}),2&t&&(c.Ikx("id",r._uid),c.uIk("tabindex",r.disabled?null:r._tabIndex)("aria-describedby",r._ariaDescribedby||null)("aria-required",r.role?r.required:null)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-multiselectable",r.multiple)("role",r.role)("aria-orientation",r.ariaOrientation),c.ekj("mat-chip-list-disabled",r.disabled)("mat-chip-list-invalid",r.errorState)("mat-chip-list-required",r.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[c._Bn([{provide:GT,useExisting:n}]),c.qOj],ngContentSelectors:A7,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),V7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ig,{provide:C3,useValue:{separatorKeyCodes:[13]}}],imports:[[Dr]]}),n})();function B7(n,e){1&n&&(c.TgZ(0,"div"),c.TgZ(1,"div",3),c._uU(2,"\u{1f914}"),c.qZA(),c.qZA())}function U7(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"div",4),c.TgZ(2,"b"),c._uU(3),c.qZA(),c._uU(4," total calories"),c.qZA(),c.qZA()),2&n){const t=c.oxw();c.xp6(3),c.Oqu(t.calculateTotalCalories())}}function j7(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"mat-chip-list",5),c.TgZ(2,"mat-chip"),c._uU(3),c.TgZ(4,"button",6),c.TgZ(5,"mat-icon"),c._uU(6,"cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&n){const t=e.$implicit;c.xp6(3),c.AsE(" ",t.titleIntake," | ",t.intakeValue," cal. ")}}let H7=(()=>{class n{constructor(){this.currentIntakes=[],this.totalIntakes=0}ngOnInit(){}calculateTotalCalories(){return this.totalIntakes=0,this.currentIntakes.length>0&&this.currentIntakes.forEach(t=>{this.totalIntakes+=t.intakeValue}),this.totalIntakes}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-intakes-history"]],inputs:{currentIntakes:"currentIntakes"},decls:6,vars:3,consts:[[1,"historiqueContainer"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"textVide"],[1,"totalCaloriesText"],["aria-label","Intakes"],["matChipRemove",""]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h2"),c._uU(2,"Historique journalier"),c.qZA(),c.YNc(3,B7,3,0,"div",1),c.YNc(4,U7,5,1,"div",1),c.YNc(5,j7,7,2,"div",2),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf",0===r.currentIntakes.length),c.xp6(1),c.Q6J("ngIf",r.currentIntakes.length>0),c.xp6(1),c.Q6J("ngForOf",r.currentIntakes))},directives:[ei,_o,I3,AD,E3,E0],styles:["h2[_ngcontent-%COMP%]{margin:20px 0}.textVide[_ngcontent-%COMP%]{font-size:25px}.totalCaloriesText[_ngcontent-%COMP%]{margin:10px 0 20px;font-size:18px}.historiqueContainer[_ngcontent-%COMP%]{margin:40px 0 0;padding:0 0 40px}"]}),n})();function G7(n,e){1&n&&(c.TgZ(0,"h1"),c._uU(1,"OW ! STOP MANGER GROS PORC"),c.qZA())}function $7(n,e){if(1&n&&(c.TgZ(0,"div",15),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("ngStyle",t.getSpinnerTextStyle()),c.xp6(1),c.AsE(" ",t.getTotalCurrentIntakesFromSelectedUser()," / ",null==t.selectedPerson?null:t.selectedPerson.targetIntake," ")}}function z7(n,e){if(1&n&&(c.TgZ(0,"div",16),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("ngStyle",t.getSpinnerTextStyle()),c.xp6(1),c.hij(" ",t.getCurrentSmiley()," ")}}function W7(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",1),c.TgZ(2,"div"),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",2),c.TgZ(5,"form",3),c.YNc(6,G7,2,0,"h1",0),c.TgZ(7,"div",4),c._UZ(8,"mat-progress-spinner",5),c._UZ(9,"mat-progress-spinner",6),c.qZA(),c.YNc(10,$7,2,3,"div",7),c.YNc(11,z7,2,2,"div",8),c.TgZ(12,"mat-form-field",9),c.TgZ(13,"mat-label"),c._uU(14,"Titre de l'apport calorique"),c.qZA(),c._UZ(15,"input",10),c.TgZ(16,"button",11),c.NdJ("click",function(){return c.CHM(t),c.oxw().resetTitleIntake()}),c.TgZ(17,"mat-icon"),c._uU(18,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"mat-form-field",9),c.TgZ(20,"mat-label"),c._uU(21,"Montant calorique"),c.qZA(),c._UZ(22,"input",12),c.TgZ(23,"button",11),c.NdJ("click",function(){return c.CHM(t),c.oxw().resetIntakeValue()}),c.TgZ(24,"mat-icon"),c._uU(25,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().ajouterApport()}),c._uU(27," Ajouter l'apport "),c.qZA(),c.qZA(),c._UZ(28,"app-intakes-history",14),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.xp6(3),c.Oqu(t.getSelectedPerson().displayName),c.xp6(2),c.Q6J("formGroup",t.intakeFormGroup),c.xp6(1),c.Q6J("ngIf",t.isOverMaxIntake()),c.xp6(2),c.Q6J("color","warn")("diameter",t.spinnerDiameter)("strokeWidth",14)("mode","determinate")("value",100),c.xp6(1),c.Q6J("color",t.getColorStateOfSpinner())("diameter",t.spinnerDiameter)("strokeWidth",15)("mode","determinate")("value",t.getSpinnerProgressValue()),c.xp6(1),c.Q6J("ngIf",t.getTargetIntakeOfSelectedUser()>0),c.xp6(1),c.Q6J("ngIf",0===t.getTargetIntakeOfSelectedUser()),c.xp6(17),c.Q6J("currentIntakes",t.selectedUserIntakes)}}function q7(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",17),c.TgZ(2,"p",18),c._uU(3,"Il semblerait que vous n'ayez pas d'objectif calorique journalier ..."),c.qZA(),c.TgZ(4,"div",19),c._uU(5,"\u{1f914}"),c.qZA(),c.TgZ(6,"p",20),c._uU(7,"Fixez-vous en un pour commencer \xe0 utiliser le tracker !"),c.qZA(),c.TgZ(8,"form",3),c.TgZ(9,"mat-form-field",9),c.TgZ(10,"mat-label"),c._uU(11,"Objectif calorique journalier"),c.qZA(),c._UZ(12,"input",21),c.qZA(),c.TgZ(13,"button",22),c.NdJ("click",function(){return c.CHM(t),c.oxw().ajouterObjectif()}),c._uU(14," Confirmer cet objectif (YOLO) "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.xp6(8),c.Q6J("formGroup",t.targetIntakeSetupFormGroup)}}let Z7=(()=>{class n{constructor(t,r){var i,s;this.selectedPerson=void 0,this.lastPersonSelected=void 0,this.currentIntakeValue=1200,this.maxIntakeForTheDay=1300,this.spinnerDiameter=250,this.items=[],this.itemForSelectedUser={nickname:"",currentIntake:"",targetIntake:""},this.selectedUserIntakes=[],this.sportiveSmileyAnimation=["\u{1f975}","\u{1f919}","\u{1f957}","\u{1f346}","\u{1f34c}","\u{1f345}","\u{1f680}","\u{1f3c6}","\u{1f947}","\u{1f6bf}","\u{1f373}","\u{1f3c3}","\u{1f938}"],this.indexRandomIcon=0,this.emojiSubscription=new ks.w0,this.intakeFormGroup=new L_({titleIntake:new fh("",P_.minLength(1)),intakeValue:new fh("",P_.min(1))}),this.targetIntakeSetupFormGroup=new L_({targetIntake:new fh("",P_.minLength(1))}),this.serviceIntake=r,null===(i=this.serviceIntake.getAllIntakesDocuments())||void 0===i||i.subscribe(u=>{this.items=u}),null===(s=this.serviceIntake.getPersonConnectedInfos())||void 0===s||s.subscribe(u=>{this.selectedPerson=u.length>0?u[0]:{displayName:"",targetIntake:0}})}ngOnInit(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0});const t=function(n=0,e=hu.z){return n<0&&(n=0),Ag(n,n,e)}(2e3);this.emojiSubscription=t.subscribe(r=>{this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1)}),this.setIntakesFromSelectedUser()}resetTitleIntake(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{titleIntake:""}))}resetIntakeValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{intakeValue:void 0}))}resetAllForm(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0}),this.targetIntakeSetupFormGroup.reset({targetIntake:void 0})}getSpinnerProgressValue(){var t;return this.selectedPerson?this.getTotalCurrentIntakesFromSelectedUser()/(null===(t=this.selectedPerson)||void 0===t?void 0:t.targetIntake)*100:0}getColorStateOfSpinner(){return this.isOverMaxIntake()?"warn":"primary"}getSpinnerTextStyle(){return{"margin-top":"-"+(this.spinnerDiameter/2+16)+"px","padding-bottom":this.spinnerDiameter/2+26+"px"}}isOverMaxIntake(){return this.getTotalCurrentIntakesFromSelectedUser()>this.maxIntakeForTheDay}ajouterApport(){this.intakeFormGroup.value.intakeValue&&this.intakeFormGroup.value.titleIntake&&(this.serviceIntake.addIntakes(this.itemForSelectedUser.nickname,this.intakeFormGroup.value.intakeValue,this.intakeFormGroup.value.titleIntake),this.setItemsForSelectedUser(),this.resetAllForm())}ajouterObjectif(){this.targetIntakeSetupFormGroup.value.targetIntake&&(this.serviceIntake.addTargetIntake(this.targetIntakeSetupFormGroup.value.targetIntake),this.setItemsForSelectedUser(),this.resetAllForm())}getTotalCurrentIntakesFromSelectedUser(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.intakeValue}),t}getSelectedPerson(){return JSON.parse(localStorage.getItem("user"))||{}}getTargetIntakeOfSelectedUser(){var t;return(null===(t=this.selectedPerson)||void 0===t?void 0:t.targetIntake)?this.selectedPerson.targetIntake:0}isUserLoggedAndWithoutTargetIntake(){return!!this.selectedPerson&&(void 0===this.selectedPerson.targetIntake||this.selectedPerson.targetIntake<=0)}getSmileyAnimation(){return this.sportiveSmileyAnimation[this.indexRandomIcon]}getCurrentSmiley(){return this.getSmileyAnimation()}setIntakesFromSelectedUser(){this.serviceIntake.getAllIntakesDocuments().subscribe(t=>{this.selectedUserIntakes=[],t.forEach(r=>{r.dateFormatted=r.date.toDate(),r.dateFormatted.getDate()===(new Date).getDate()&&r.dateFormatted.getMonth()===(new Date).getMonth()&&r.dateFormatted.getFullYear()===(new Date).getFullYear()&&this.selectedUserIntakes.push(r)})})}setItemsForSelectedUser(){this.items.forEach(t=>{t.nickname===this.selectedPerson&&(this.itemForSelectedUser=t)}),this.setIntakesFromSelectedUser()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($R),c.Y36(FO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"selectionButtonContainer"],[1,"formIntake"],[3,"formGroup"],[1,"spinnerContainer"],[1,"progressSpinnerBackground",3,"color","diameter","strokeWidth","mode","value"],[1,"progressSpinner",3,"color","diameter","strokeWidth","mode","value"],["class","textInSpinner",3,"ngStyle",4,"ngIf"],["class","textInSpinnerNotSelected",3,"ngStyle",4,"ngIf"],["appearance","standard"],["matInput","","type","text","formControlName","titleIntake"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","number","formControlName","intakeValue"],["mat-raised-button","","aria-label","Ajouter cet apport",3,"click"],[3,"currentIntakes"],[1,"textInSpinner",3,"ngStyle"],[1,"textInSpinnerNotSelected",3,"ngStyle"],[1,"setTargetIntakeContainer"],[2,"font-size","20px"],[1,"textVide",2,"padding","20px 0 50px 0"],[2,"font-size","15px"],["matInput","","type","number","formControlName","targetIntake"],["mat-raised-button","","aria-label","Confirmer cet objectif (YOLO)",3,"click"]],template:function(t,r){1&t&&(c.YNc(0,W7,29,16,"div",0),c.YNc(1,q7,15,1,"div",0)),2&t&&(c.Q6J("ngIf",!r.isUserLoggedAndWithoutTargetIntake()),c.xp6(1),c.Q6J("ngIf",r.isUserLoggedAndWithoutTargetIntake()))},directives:[ei,gN,oN,Gp,Uc,Z2,$T,K2,C0,sN,jT,O_,Y4,E0,_N,H7,mi],styles:["@keyframes circleAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.formIntake[_ngcontent-%COMP%]{margin:auto;width:min-content;text-align:center}.formIntake[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.spinnerContainer[_ngcontent-%COMP%]{margin:35px 0 10px}.textInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center}.textInSpinnerNotSelected[_ngcontent-%COMP%]{margin:auto;width:80%;font-size:50px;text-align:center}.topButton[_ngcontent-%COMP%]{margin:10px}.progressSpinnerBackground[_ngcontent-%COMP%]{animation:circleAnimation linear 30s infinite;position:absolute}.selectionButtonContainer[_ngcontent-%COMP%]{margin:15px 0 2px;text-align:center;font-size:20px}  .spinnerContainer>.progressSpinnerBackground>svg>.mat-progress-spinner.mat-warn circle,   .mat-spinner.mat-warn circle{stroke:#0000004d;stroke-dasharray:17.9!important;overflow-x:hidden}.setTargetIntakeContainer[_ngcontent-%COMP%]{text-align:center;margin:auto;width:80vw}.setTargetIntakeContainer[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){padding:10px 0}.textVide[_ngcontent-%COMP%]{font-size:40px}"]}),n})();const K7=["*",[["mat-card-footer"]]],Y7=["*","mat-card-footer"],Q7=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],J7=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let X7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),eQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),tQ=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),nQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),rQ=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fo,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:Y7,decls:2,vars:0,template:function(t,r){1&t&&(c.F$t(K7),c.Hsn(0),c.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),iQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:J7,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,r){1&t&&(c.F$t(Q7),c.Hsn(0),c.TgZ(1,"div",0),c.Hsn(2,1),c.qZA(),c.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),sQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Dr],Dr]}),n})();function oQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div"),c._uU(1," Il semblerait que vous ne soyez dans aucune \xe9quipe. "),c._UZ(2,"br"),c._uU(3," Vous pouvez cr\xe9er la votre si vous le souhaitez "),c.TgZ(4,"form",2),c.TgZ(5,"mat-form-field",3),c.TgZ(6,"mat-label"),c._uU(7,"Nom de l'\xe9quipe"),c.qZA(),c._UZ(8,"input",4),c.qZA(),c.TgZ(9,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().ajouterEquipe()}),c._uU(10," Cr\xe9er l'\xe9quipe "),c.qZA(),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.xp6(4),c.Q6J("formGroup",t.createTeamFormGroup)}}const aQ=function(n){return[n]};function lQ(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"mat-card"),c.TgZ(2,"mat-card-header"),c.TgZ(3,"mat-card-title"),c._uU(4),c.qZA(),c.TgZ(5,"mat-card-subtitle"),c._uU(6,"Mon incroyable \xe9quipe"),c.qZA(),c.qZA(),c._UZ(7,"img",8),c.TgZ(8,"mat-card-actions"),c.TgZ(9,"button",9),c._uU(10,"Membres"),c.qZA(),c.TgZ(11,"button",10),c._uU(12,"Modifier"),c.qZA(),c.qZA(),c.qZA(),c._UZ(13,"div",11),c.qZA()),2&n){const t=e.$implicit;c.xp6(4),c.Oqu(t.teamName),c.xp6(5),c.Q6J("routerLink",c.VKq(4,aQ,t.eventId))("color","primary"),c.xp6(2),c.Q6J("disabled",!0)}}function uQ(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"h2"),c._uU(2,"Vos \xe9quipes"),c.qZA(),c.TgZ(3,"div",6),c.TgZ(4,"i"),c._uU(5,"C'est toujours mieux d'avancer ensemble"),c.qZA(),c.qZA(),c.YNc(6,lQ,14,6,"div",7),c.qZA()),2&n){const t=c.oxw();c.xp6(6),c.Q6J("ngForOf",t.teams)}}let cQ=(()=>{class n{constructor(t){this.serviceIntakes=t,this.userTeams=void 0,this.teams=[],this.createTeamFormGroup=new L_({teamName:new fh("",P_.minLength(1))})}ngOnInit(){this.getTeamsFromConnectedUser()}resetAllForms(){this.createTeamFormGroup.reset({teamName:""})}ajouterEquipe(){this.createTeamFormGroup.invalid||(this.serviceIntakes.addNewTeam(this.createTeamFormGroup.value.teamName),this.getTeamsFromConnectedUser(),this.resetAllForms())}getTeamsFromConnectedUser(){var t;null===(t=this.serviceIntakes.getAllTeamsForUser())||void 0===t||t.subscribe(r=>{r.forEach(i=>{var s;console.log(i),null===(s=this.serviceIntakes.getTeamFromOwnerId(i.ownerUid))||void 0===s||s.subscribe(u=>{this.teams=u,console.log(this.teams)})}),this.userTeams=r})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(FO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"teamTrackerContainer"],[4,"ngIf"],[3,"formGroup"],["appearance","standard"],["matInput","","type","text","formControlName","teamName"],["mat-raised-button","","aria-label","Cr\xe9er l'\xe9quipe",3,"click"],[1,"subtitleTeam"],[4,"ngFor","ngForOf"],["mat-card-image","","src","https://www.signupgenius.com/images/new-landing/sports/get-started-background.jpg","alt","Happy smiling team"],["mat-raised-button","",3,"routerLink","color"],["mat-button","",3,"disabled"],[1,"card-separator"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,oQ,11,1,"div",1),c.YNc(2,uQ,7,1,"div",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",void 0!==r.userTeams&&0===r.userTeams.length),c.xp6(1),c.Q6J("ngIf",r.teams.length>0))},directives:[ei,gN,oN,Gp,Z2,$T,K2,C0,sN,jT,O_,_o,rQ,iQ,X7,eQ,nQ,tQ,md],styles:[".teamTrackerContainer[_ngcontent-%COMP%]{margin:auto}.card-separator[_ngcontent-%COMP%]{width:100%;height:30px}h2[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{width:80vw;margin:auto}.subtitleTeam[_ngcontent-%COMP%]{width:100vw;text-align:center;margin-bottom:10px}"]}),n})();const dQ=["primaryValueBar"],hQ=Tc(class{constructor(n){this._elementRef=n}},"primary"),fQ=new c.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const n=(0,c.f3M)(ie),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),mQ=new c.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let gQ=0,_Q=(()=>{class n extends hQ{constructor(t,r,i,s,u,h){super(t),this._ngZone=r,this._animationMode=i,this._changeDetectorRef=h,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new c.vpe,this._animationEndSubscription=ks.w0.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+gQ++;const m=s?s.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${m}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===i,u&&(u.color&&(this.color=this.defaultColor=u.color),this.mode=u.mode||this.mode)}get value(){return this._value}set value(t){var r;this._value=T3(Wr(t)||0),null==(r=this._changeDetectorRef)||r.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(t){var r;this._bufferValue=T3(t||0),null==(r=this._changeDetectorRef)||r.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=Sa(t,"transitionend").pipe(un(r=>r.target===t)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Fo,8),c.Y36(fQ,8),c.Y36(mQ,8),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(t,r){if(1&t&&c.Gf(dQ,5),2&t){let i;c.iGM(i=c.CRH())&&(r._primaryValueBar=i.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,r){2&t&&(c.uIk("aria-valuenow","indeterminate"===r.mode||"query"===r.mode?null:r.value)("mode",r.mode),c.ekj("_mat-animation-noopable",r._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[c.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.O4$(),c.TgZ(1,"svg",1),c.TgZ(2,"defs"),c.TgZ(3,"pattern",2),c._UZ(4,"circle",3),c.qZA(),c.qZA(),c._UZ(5,"rect",4),c.qZA(),c.kcU(),c._UZ(6,"div",5),c._UZ(7,"div",6,7),c._UZ(9,"div",8),c.qZA()),2&t&&(c.xp6(3),c.Q6J("id",r.progressbarId),c.xp6(2),c.uIk("fill",r._rectangleFillValue),c.xp6(1),c.Q6J("ngStyle",r._bufferTransform()),c.xp6(1),c.Q6J("ngStyle",r._primaryTransform()))},directives:[mi],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),n})();function T3(n,e=0,t=100){return Math.max(e,Math.min(t,n))}let yQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Hr,Dr],Dr]}),n})();function vQ(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"mat-progress-bar",6),c.qZA()),2&n){const t=c.oxw().$implicit,r=c.oxw();c.xp6(1),c.Q6J("value",r.getValueForUser(t))}}function bQ(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"mat-progress-bar",7),c.qZA()),2&n){const t=c.oxw().$implicit,r=c.oxw();c.xp6(1),c.Q6J("value",r.getValueForUser(t))("color","warn")}}function wQ(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"h3"),c._uU(2),c.qZA(),c.YNc(3,vQ,2,1,"div",4),c.YNc(4,bQ,2,2,"div",4),c.TgZ(5,"div",5),c._uU(6),c.qZA(),c.qZA()),2&n){const t=e.$implicit,r=c.oxw();c.xp6(2),c.Oqu(t.displayName),c.xp6(1),c.Q6J("ngIf",r.getValueForUser(t)<=100),c.xp6(1),c.Q6J("ngIf",r.getValueForUser(t)>100),c.xp6(2),c.AsE(" ",r.getTotalCurrentIntakesFromSelectedUser(t.intakes)," / ",t.targetIntake," ")}}let EQ=(()=>{class n{constructor(t,r){this.serviceIntake=t,this.route=r,this.teamId=void 0,this.teamMembers=[]}ngOnInit(){this.teamId=this.route.snapshot.paramMap.get("id"),this.serviceIntake.getTeamMembersWithTeamId(this.teamId).subscribe(t=>{t.forEach(r=>{this.serviceIntake.getUserByUid(r.memberUid).subscribe(i=>{const s=i[0];this.serviceIntake.getAllIntakesDocumentsByUid(r.memberUid).subscribe(u=>{const h=[];u.forEach(y=>{y.dateFormatted=y.date.toDate(),y.dateFormatted.getDate()===(new Date).getDate()&&y.dateFormatted.getMonth()===(new Date).getMonth()&&y.dateFormatted.getFullYear()===(new Date).getFullYear()&&h.push(y)});let m=-1;for(let y=0;y<this.teamMembers.length;y++)this.teamMembers[y].uid===s.uid&&(m=y);-1!==m?this.teamMembers[m]=Object.assign(Object.assign({},s),{intakes:h}):this.teamMembers.push(Object.assign(Object.assign({},s),{intakes:h}))})})})})}getTotalCurrentIntakesFromSelectedUser(t){if(t){let r=0;return t.forEach(i=>{r+=i.intakeValue}),r}return 0}getValueForUser(t){return this.getTotalCurrentIntakesFromSelectedUser(t.intakes)/t.targetIntake*100}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(FO),c.Y36(ma))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-team-tracker-progress"]],decls:10,vars:2,consts:[[1,"goBackArrow"],["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"routerLink"],[1,"membersContainer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"membersContainer","statusBarNumber"],["mode","determinate",3,"value"],["mode","determinate",3,"value","color"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"button",1),c.TgZ(2,"mat-icon"),c._uU(3," keyboard_arrow_left "),c.qZA(),c.TgZ(4,"mat-icon"),c._uU(5," keyboard_arrow_left "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",2),c.TgZ(7,"h2"),c._uU(8,"Progression de l'\xe9quipe"),c.qZA(),c.YNc(9,wQ,7,5,"div",3),c.qZA()),2&t&&(c.xp6(1),c.Q6J("routerLink","/teamTracking"),c.xp6(8),c.Q6J("ngForOf",r.teamMembers))},directives:[O_,md,E0,_o,ei,_Q],styles:[".goBackArrow[_ngcontent-%COMP%]{position:absolute}mat-icon[_ngcontent-%COMP%]{width:10px}.membersContainer[_ngcontent-%COMP%]{width:95vw;margin:auto}h2[_ngcontent-%COMP%]{text-align:center}h3[_ngcontent-%COMP%]{margin:0}.statusBarNumber[_ngcontent-%COMP%]{text-align:right}"]}),n})(),CQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Hr,_d.forChild([{path:"tracker",component:Z7,canActivate:[DT]},{path:"teamTracking",component:cQ,canActivate:[DT]},{path:"teamTracking/:id",component:EQ,canActivate:[DT]}]),Q2,IN,tN,V7,I4,T4,Ga,FU,Cv,EU,Y2,tN,sQ,yQ]]}),n})();const IQ=[{path:"authentication",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}connectWithGoogle(){this.authService.signInWithGoogle()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-authentication"]],decls:2,vars:0,consts:[["mat-button","",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"a",0),c.NdJ("click",function(){return r.connectWithGoogle()}),c._uU(1,"Connect with GOOGLE"),c.qZA())},directives:[wU],styles:[""]}),n})()},{path:"",redirectTo:"tracker",pathMatch:"full"},{path:"**",component:I7}];let TQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[R8]}),n.\u0275inj=c.cJS({providers:[TT],imports:[[Ga,FU,lf,Cv,Y2,tN,EU,C8,Q2,fM.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),Ri.hO.initializeApp({apiKey:"AIzaSyDwY0ustgrbdUrkt0FXwseq89vcH_zirJo",authDomain:"personnaltrack.firebaseapp.com",projectId:"personnaltrack",storageBucket:"personnaltrack.appspot.com",messagingSenderId:"588509586658",appId:"1:588509586658:web:334cb1ed45319ff2592abb",measurementId:"G-G9PZNFDF99"}),C7,$6,Fd,_d.forRoot(IQ),D7,CQ]]}),n})();(0,c.G48)(),Vl().bootstrapModule(TQ).catch(n=>console.error(n))},9162:(it,Ce,P)=>{function ue(K,ne,fe,ye){return new(fe||(fe=Promise))(function(ce,wt){function zt(Kt){try{Et(ye.next(Kt))}catch(Pt){wt(Pt)}}function er(Kt){try{Et(ye.throw(Kt))}catch(Pt){wt(Pt)}}function Et(Kt){Kt.done?ce(Kt.value):function(ce){return ce instanceof fe?ce:new fe(function(wt){wt(ce)})}(Kt.value).then(zt,er)}Et((ye=ye.apply(K,ne||[])).next())})}function Ue(K){return this instanceof Ue?(this.v=K,this):new Ue(K)}function se(K,ne,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,ye=fe.apply(K,ne||[]),ce=[];return Ne={},wt("next"),wt("throw"),wt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function wt(dn){ye[dn]&&(Ne[dn]=function(br){return new Promise(function(Yr,nn){ce.push([dn,br,Yr,nn])>1||zt(dn,br)})})}function zt(dn,br){try{!function(dn){dn.value instanceof Ue?Promise.resolve(dn.value.v).then(Et,Kt):Pt(ce[0][2],dn)}(ye[dn](br))}catch(Yr){Pt(ce[0][3],Yr)}}function Et(dn){zt("next",dn)}function Kt(dn){zt("throw",dn)}function Pt(dn,br){dn(br),ce.shift(),ce.length&&zt(ce[0][0],ce[0][1])}}function Be(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ne=K[Symbol.asyncIterator];return ne?ne.call(K):(K=function(K){var ne="function"==typeof Symbol&&Symbol.iterator,fe=ne&&K[ne],ye=0;if(fe)return fe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ye>=K.length&&(K=void 0),{value:K&&K[ye++],done:!K}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),fe={},ye("next"),ye("throw"),ye("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ye(ce){fe[ce]=K[ce]&&function(wt){return new Promise(function(zt,er){!function(ce,wt,zt,er){Promise.resolve(er).then(function(Et){ce({value:Et,done:zt})},wt)}(zt,er,(wt=K[ce](wt)).done,wt.value)})}}}P.d(Ce,{mG:()=>ue,qq:()=>Ue,FC:()=>se,KL:()=>Be})},3668:(it,Ce,P)=>{P.d(Ce,{deG:()=>ro,tb:()=>Wv,AFp:()=>Oi,ip1:()=>Hd,CZH:()=>Ac,hGG:()=>yb,z2F:()=>Mc,sBO:()=>ib,Sil:()=>jg,_Vd:()=>Pd,EJc:()=>XC,SBq:()=>Kf,qLn:()=>rf,vpe:()=>hl,tBr:()=>_r,XFs:()=>vt,OlP:()=>Vn,zs3:()=>Ro,ZZ4:()=>op,aQg:()=>xc,soG:()=>Gd,YKP:()=>Ag,h0i:()=>Ld,PXZ:()=>rI,R0b:()=>es,FiY:()=>mn,Lbi:()=>Ug,g9A:()=>zv,n_E:()=>Qf,Qsj:()=>rM,FYo:()=>Sv,JOm:()=>ya,q3G:()=>ir,tp0:()=>_i,Rgc:()=>Dc,dDg:()=>nI,q4F:()=>Av,GfV:()=>Sa,s_b:()=>Og,ifc:()=>at,eFA:()=>sI,G48:()=>lI,Gpc:()=>q,f3M:()=>Le,X6Q:()=>YM,_c5:()=>ap,VLi:()=>qM,c2e:()=>qv,zSh:()=>Ww,wAp:()=>At,vHH:()=>$e,EiD:()=>hd,mCW:()=>il,qzn:()=>ou,JVY:()=>nl,pB0:()=>sy,eBb:()=>fm,L6k:()=>Kh,LAX:()=>Yh,cg1:()=>Hf,kL8:()=>Gf,yhl:()=>lc,dqk:()=>St,sIi:()=>qm,CqO:()=>bE,QGY:()=>cl,F4k:()=>Ad,RDi:()=>xh,AaK:()=>ue,z3N:()=>Mo,qOj:()=>Uy,TTD:()=>$o,_Bn:()=>DC,xp6:()=>My,uIk:()=>Hy,ekj:()=>Vf,Suo:()=>IM,Xpm:()=>Rt,lG2:()=>Ke,Yz7:()=>nn,cJS:()=>Bn,oAB:()=>J,Yjl:()=>Vt,Y36:()=>mu,_UZ:()=>yE,GkF:()=>sv,BQk:()=>rg,ynx:()=>Ia,qZA:()=>Sd,TgZ:()=>xf,EpF:()=>Po,n5z:()=>Ka,Ikx:()=>_g,LFG:()=>G,$8M:()=>Xn,$Z:()=>Af,NdJ:()=>Rf,CRH:()=>TM,kcU:()=>om,O4$:()=>Hl,oxw:()=>EE,Hsn:()=>ys,F$t:()=>ov,Q6J:()=>ng,DdM:()=>Ov,VKq:()=>Pv,iGM:()=>EM,MAs:()=>Jm,CHM:()=>Ms,LSH:()=>p,Udp:()=>kd,WFA:()=>ig,d8E:()=>bv,YNc:()=>Wy,_uU:()=>VE,Oqu:()=>hg,hij:()=>Uf,AsE:()=>fv,Gf:()=>CM});var c=P(273),j=P(7908),O=P(8305),oe=P(3719),he=P(3174);function we(o){for(let a in o)if(o[a]===we)return a;throw Error("Could not find renamed property on target object.")}function ie(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function ue(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ue).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ge(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=we({__forward_ref__:we});function q(o){return o.__forward_ref__=q,o.toString=function(){return ue(this())},o}function ae(o){return We(o)?o():o}function We(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===q}class $e extends Error{constructor(a,l){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,l)),this.code=a}}function se(o){return"string"==typeof o?o:null==o?"":String(o)}function De(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():se(o)}function Fe(o,a){const l=a?` in ${a}`:"";throw new $e("201",`No provider for ${De(o)} found${l}`)}function Kt(o,a){null==o&&function(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function nn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Bn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Qr(o){return _n(o,Xr)||_n(o,ar)}function _n(o,a){return o.hasOwnProperty(a)?o[a]:null}function Jr(o){return o&&(o.hasOwnProperty(Oe)||o.hasOwnProperty(wr))?o[Oe]:null}const Xr=we({\u0275prov:we}),Oe=we({\u0275inj:we}),ar=we({ngInjectableDef:we}),wr=we({ngInjectorDef:we});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let en;function lr(o){const a=en;return en=o,a}function ur(o,a,l){const d=Qr(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&vt.Optional?null:void 0!==a?a:void Fe(ue(o),"Injector")}function $n(o){return{toString:o}.toString()}var vn=(()=>((vn=vn||{})[vn.OnPush=0]="OnPush",vn[vn.Default=1]="Default",vn))(),at=(()=>{return(o=at||(at={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",at;var o})();const pt="undefined"!=typeof globalThis&&globalThis,ss="undefined"!=typeof window&&window,fi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,St=pt||"undefined"!=typeof global&&global||ss||fi,W={},H=[],Q=we({\u0275cmp:we}),Ee=we({\u0275dir:we}),$=we({\u0275pipe:we}),re=we({\u0275mod:we}),ke=we({\u0275fac:we}),rt=we({__NG_ELEMENT_ID__:we});let Mt=0;function Rt(o){return $n(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||H,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||at.Emulated,id:"c",styles:o.styles||H,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,g=o.features,v=o.pipes;return d.id+=Mt++,d.inputs=Se(o.inputs,l),d.outputs=Se(o.outputs),g&&g.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Nt):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(Er):null,d})}function Nt(o){return gt(o)||function(o){return o[Ee]||null}(o)}function Er(o){return function(o){return o[$]||null}(o)}const de={};function J(o){return $n(()=>{const a={type:o.type,bootstrap:o.bootstrap||H,declarations:o.declarations||H,imports:o.imports||H,exports:o.exports||H,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(de[o.id]=o.type),a})}function Se(o,a){if(null==o)return W;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=d,a&&(a[f]=g)}return l}const Ke=Rt;function Vt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function gt(o){return o[Q]||null}function bn(o,a){const l=o[re]||null;if(!l&&!0===a)throw new Error(`Type ${ue(o)} does not have '\u0275mod' property.`);return l}function Ti(o){return Array.isArray(o)&&"object"==typeof o[1]}function as(o){return Array.isArray(o)&&!0===o[1]}function Th(o){return 0!=(8&o.flags)}function qn(o){return 2==(2&o.flags)}function Cl(o){return 1==(1&o.flags)}function mi(o){return null!==o.template}function zc(o){return 0!=(512&o[2])}function Zs(o,a){return o.hasOwnProperty(ke)?o[ke]:null}class ja{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function $o(){return Il}function Il(o){return o.type.prototype.ngOnChanges&&(o.setInput=Hr),Tl}function Tl(){const o=vo(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===W)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Hr(o,a,l,d){const f=vo(o)||function(o,a){return o[Dl]=a}(o,{previous:W,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[l],I=v[E];g[E]=new ja(I&&I.currentValue,a,v===W),o[d]=a}$o.ngInherit=!0;const Dl="__ngSimpleChanges__";function vo(o){return o[Dl]||null}const Sl="http://www.w3.org/2000/svg";let zo;function xh(o){zo=o}function tn(o){return!!o.listen}const $u={createRenderer:(o,a)=>void 0!==zo?zo:"undefined"!=typeof document?document:void 0};function Ln(o){for(;Array.isArray(o);)o=o[0];return o}function ti(o,a){return Ln(a[o])}function cr(o,a){return Ln(a[o.index])}function Wo(o,a){return o.data[a]}function pn(o,a){const l=a[o];return Ti(l)?l:l[0]}function xl(o){return 4==(4&o[2])}function ls(o){return 128==(128&o[2])}function Or(o,a){return null==a?null:o[a]}function Rl(o){o[18]=0}function Eo(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const bt={lFrame:za(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ko(){return bt.bindingsEnabled}function Re(){return bt.lFrame.lView}function Qt(){return bt.lFrame.tView}function Ms(o){return bt.lFrame.contextLView=o,o[8]}function Zn(){let o=Yo();for(;null!==o&&64===o.type;)o=o.parent;return o}function Yo(){return bt.lFrame.currentTNode}function Gr(o,a){const l=bt.lFrame;l.currentTNode=o,l.isParent=a}function Ha(){return bt.lFrame.isParent}function Qo(){bt.lFrame.isParent=!1}function Jo(){return bt.isInCheckNoChangesMode}function Xo(o){bt.isInCheckNoChangesMode=o}function Ir(){const o=bt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ea(){return bt.lFrame.bindingIndex++}function Si(o){const a=bt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function ta(o,a){const l=bt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Ys(a)}function Ys(o){bt.lFrame.currentDirectiveIndex=o}function Vl(o){const a=bt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function na(){return bt.lFrame.currentQueryIndex}function Ga(o){bt.lFrame.currentQueryIndex=o}function Bl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Xc(o,a,l){if(l&vt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&vt.Host||(f=Bl(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=bt.lFrame=Ul();return d.currentTNode=a,d.lView=o,!0}function $a(o){const a=Ul(),l=o[1];bt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Ul(){const o=bt.lFrame,a=null===o?null:o.child;return null===a?za(o):a}function za(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Zu(){const o=bt.lFrame;return bt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const jl=Zu;function Ku(){const o=Zu();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Un(){return bt.lFrame.selectedIndex}function ds(o){bt.lFrame.selectedIndex=o}function jn(){const o=bt.lFrame;return Wo(o.tView,o.selectedIndex)}function Hl(){bt.lFrame.currentNamespace=Sl}function om(){bt.lFrame.currentNamespace=null}function ra(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),E&&((o.contentHooks||(o.contentHooks=[])).push(l,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,E)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),A&&((o.viewHooks||(o.viewHooks=[])).push(l,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,A)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(l,x)}}function ia(o,a,l){kh(o,a,3,l)}function Ju(o,a,l,d){(3&o[2])===l&&kh(o,a,l,d)}function $l(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function kh(o,a,l,d){const g=null!=d?d:-1,v=a.length-1;let E=0;for(let I=void 0!==d?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(o[18]+=65536),(E<g||-1==g)&&(zl(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function zl(o,a,l,d){const f=l[d]<0,g=l[d+1],E=o[f?-l[d]:l[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Io{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function xn(o,a,l){const d=tn(o);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const v=l[f++],E=l[f++],I=l[f++];d?o.setAttribute(a,E,I,v):a.setAttributeNS(v,E,I)}else{const v=g,E=l[++f];Xe(v)?d&&o.setProperty(a,v,E):d?o.setAttribute(a,v,E):a.setAttribute(v,E),f++}}return f}function Js(o){return 3===o||4===o||6===o}function Xe(o){return 64===o.charCodeAt(0)}function Bt(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||Pr(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function Pr(o,a,l,d,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const E=o[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<o.length;){const E=o[g];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function Yn(o){return-1!==o}function oa(o){return 32767&o}function qa(o,a){let l=function(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let Wl=!0;function ql(o){const a=Wl;return Wl=o,a}let ec=0;function To(o,a){const l=kn(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Zl(d.data,o),Zl(a,null),Zl(d.blueprint,null));const f=aa(o,a),g=o.injectorIndex;if(Yn(f)){const v=oa(f),E=qa(f,a),I=E[1].data;for(let A=0;A<8;A++)a[g+A]=E[v+A]|I[v+A]}return a[g+8]=f,g}function Zl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function kn(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function aa(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const g=f[1],v=g.type;if(d=2===v?g.declTNode:1===v?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Xs(o,a,l){!function(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(rt)&&(d=l[rt]),null==d&&(d=l[rt]=ec++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function ri(o,a,l){if(l&vt.Optional)return o;Fe(a,"NodeInjector")}function Kl(o,a,l,d){if(l&vt.Optional&&void 0===d&&(d=null),0==(l&(vt.Self|vt.Host))){const f=o[9],g=lr(void 0);try{return f?f.get(a,d,l&vt.Optional):ur(a,d,l&vt.Optional)}finally{lr(g)}}return ri(d,a,l)}function la(o,a,l,d=vt.Default,f){if(null!==o){const g=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(rt)?o[rt]:void 0;return"number"==typeof a?a>=0?255&a:rd:a}(l);if("function"==typeof g){if(!Xc(a,o,d))return d&vt.Host?ri(f,l,d):Kl(a,l,d,f);try{const v=g(d);if(null!=v||d&vt.Optional)return v;Fe(l)}finally{jl()}}else if("number"==typeof g){let v=null,E=kn(o,a),I=-1,A=d&vt.Host?a[16][6]:null;for((-1===E||d&vt.SkipSelf)&&(I=-1===E?aa(o,a):a[E+8],-1!==I&&rr(d,!1)?(v=a[1],E=oa(I),a=qa(I,a)):E=-1);-1!==E;){const x=a[1];if(ks(g,E,x.data)){const V=Za(E,a,l,v,d,A);if(V!==eo)return V}I=a[E+8],-1!==I&&rr(d,a[1].data[E+8]===A)&&ks(g,E,a)?(v=x,E=oa(I),a=qa(I,a)):E=-1}}}return Kl(a,l,d,f)}const eo={};function rd(){return new Wi(Zn(),Re())}function Za(o,a,l,d,f,g){const v=a[1],E=v.data[o+8],x=Fr(E,v,l,null==d?qn(E)&&Wl:d!=v&&0!=(3&E.type),f&vt.Host&&g===E);return null!==x?xs(a,v,x,E):eo}function Fr(o,a,l,d,f){const g=o.providerIndexes,v=a.data,E=1048575&g,I=o.directiveStart,x=g>>20,Z=f?E+x:o.directiveEnd;for(let te=d?E:E+x;te<Z;te++){const _e=v[te];if(te<I&&l===_e||te>=I&&_e.type===l)return te}if(f){const te=v[I];if(te&&mi(te)&&te.type===l)return I}return null}function xs(o,a,l,d){let f=o[l];const g=a.data;if(function(o){return o instanceof Io}(f)){const v=f;v.resolving&&function(o,a){throw new $e("200",`Circular dependency in DI detected for ${o}`)}(De(g[l]));const E=ql(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?lr(v.injectImpl):null;Xc(o,d,vt.Default);try{f=o[l]=v.factory(void 0,g,o,d),a.firstCreatePass&&l>=d.directiveStart&&function(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=Il(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==I&&lr(I),ql(E),v.resolving=!1,jl()}}return f}function ks(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function rr(o,a){return!(o&vt.Self||o&vt.Host&&a)}class Wi{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return la(this._tNode,this._lView,a,d,l)}}function Ka(o){return $n(()=>{const a=o.prototype.constructor,l=a[ke]||$t(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[ke]||$t(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function $t(o){return We(o)?()=>{const a=$t(ae(o));return a&&a()}:Zs(o)}function Xn(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const g=l[f];if(Js(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(Zn(),o)}const no="__parameters__";function Rn(o,a,l){return $n(()=>{const d=function(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(I,A,x){const V=I.hasOwnProperty(no)?I[no]:Object.defineProperty(I,no,{value:[]})[no];for(;V.length<=x;)V.push(null);return(V[x]=V[x]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Vn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=nn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ro=new Vn("AnalyzeForEntryComponents");function Zi(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),Zi(d,a)):a!==o&&a.push(d)}return a}function fs(o,a){o.forEach(l=>Array.isArray(l)?fs(l,a):a(l))}function Ya(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Qa(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function io(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}function $r(o,a,l){let d=Ns(o,a);return d>=0?o[1|d]=l:(d=~d,function(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function Mi(o,a){const l=Ns(o,a);if(l>=0)return o[1|l]}function Ns(o,a){return function(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const g=d+(f-d>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:d=g+1}return~(f<<l)}(o,a,1)}const Qi={},eu="__NG_DI_FLAG__",tu="ngTempTokenPath",nu=/\n/gm,od="__source",T=we({provide:String,useValue:we});let S;function k(o){const a=S;return S=o,a}function U(o,a=vt.Default){if(void 0===S)throw new Error("inject() must be called from an injection context");return null===S?ur(o,void 0,a):S.get(o,a&vt.Optional?null:void 0,a)}function G(o,a=vt.Default){return(en||U)(ae(o),a)}const Le=G;function tt(o){const a=[];for(let l=0;l<o.length;l++){const d=ae(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,g=vt.Default;for(let v=0;v<d.length;v++){const E=d[v],I=Ot(E);"number"==typeof I?-1===I?f=E.token:g|=I:f=E}a.push(G(f,g))}else a.push(G(d))}return a}function Tt(o,a){return o[eu]=a,o.prototype[eu]=a,o}function Ot(o){return o[eu]}const _r=Tt(Rn("Inject",o=>({token:o})),-1),mn=Tt(Rn("Optional"),8),_i=Tt(Rn("SkipSelf"),4);let xi;function el(o){var a;return(null==(a=function(){if(void 0===xi&&(xi=null,St.trustedTypes))try{xi=St.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return xi}())?void 0:a.createHTML(o))||o}class Ao{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class cd extends Ao{getTypeName(){return"HTML"}}class dd extends Ao{getTypeName(){return"Style"}}class iy extends Ao{getTypeName(){return"Script"}}class su extends Ao{getTypeName(){return"URL"}}class Zh extends Ao{getTypeName(){return"ResourceURL"}}function Mo(o){return o instanceof Ao?o.changingThisBreaksApplicationSecurity:o}function ou(o,a){const l=lc(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function lc(o){return o instanceof Ao&&o.getTypeName()||null}function nl(o){return new cd(o)}function Kh(o){return new dd(o)}function fm(o){return new iy(o)}function Yh(o){return new su(o)}function sy(o){return new Zh(o)}class oy{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(el(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class ay{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=el(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=el(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const pm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,uy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function il(o){return(o=String(o)).match(pm)||o.match(uy)?o:"unsafe:"+o}function Ji(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function au(...o){const a={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const gm=Ji("area,br,col,hr,img,wbr"),_m=Ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ym=Ji("rp,rt"),xo=au(gm,au(_m,Ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),au(ym,Ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),au(ym,_m)),Jh=Ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xh=Ji("srcset"),_a=au(Jh,Xh,Ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),uc=Ji("script,style,template");class wm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!xo.hasOwnProperty(l))return this.sanitizedSomething=!0,!uc.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),v=g.name,E=v.toLowerCase();if(!_a.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=g.value;Jh[E]&&(I=il(I)),Xh[E]&&(o=I,I=(o=String(o)).split(",").map(a=>il(a.trim())).join(", ")),this.buf.push(" ",v,'="',Em(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();xo.hasOwnProperty(l)&&!gm.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Em(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const cc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dc=/([^\#-~ |!])/g;function Em(o){return o.replace(/&/g,"&amp;").replace(cc,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(dc,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lu;function hd(o,a){let l=null;try{lu=lu||function(o){const a=new ay(o);return function(){try{return!!(new window.DOMParser).parseFromString(el(""),"text/html")}catch(o){return!1}}()?new oy(a):a}(o);let d=a?String(a):"";l=lu.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=l.innerHTML,l=lu.getInertBodyElement(d)}while(d!==g);return el((new wm).sanitizeChildren(ef(l)||l))}finally{if(l){const d=ef(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function ef(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function p(o){const a=function(){const o=Re();return o&&o[12]}();return a?a.sanitize(ir.URL,o)||"":ou(o,"URL")?Mo(o):il(se(o))}const so="__ngContext__";function kr(o,a){o[so]=a}function fd(o){const a=function(o){return o[so]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function dy(o){return o.ngOriginalError}function OD(o,...a){o.error(...a)}class rf{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=(o=a)&&o.ngErrorLogger||OD;var o;d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&dy(a);for(;l&&dy(l);)l=dy(l);return l||null}}const lw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(St))();function ko(o){return o instanceof Function?o():o}var ya=(()=>((ya=ya||{})[ya.Important=1]="Important",ya[ya.DashCase=2]="DashCase",ya))();function sf(o,a){return undefined(o,a)}function af(o){const a=o[3];return as(a)?a[3]:a}function my(o){return fw(o[13])}function gy(o){return fw(o[4])}function fw(o){for(;null!==o&&!as(o);)o=o[4];return o}function _c(o,a,l,d,f){if(null!=d){let g,v=!1;as(d)?g=d:Ti(d)&&(v=!0,d=d[0]);const E=Ln(d);0===o&&null!==l?null==f?mw(a,l,E):yc(a,l,E,f||null,!0):1===o&&null!==l?yc(a,l,E,f||null,!0):2===o?function(o,a,l){const d=km(o,a);d&&function(o,a,l,d){tn(o)?o.removeChild(a,l,d):a.removeChild(l)}(o,d,a,l)}(a,E,v):3===o&&a.destroyNode(E),null!=g&&function(o,a,l,d,f){const g=l[7];g!==Ln(l)&&_c(a,o,d,g,f);for(let E=10;E<l.length;E++){const I=l[E];lf(I[1],I,o,a,d,g)}}(a,o,g,l,f)}}function yy(o,a,l){return tn(o)?o.createElement(a,l):null===l?o.createElement(a):o.createElementNS(l,a)}function vy(o,a){const l=o[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Eo(f,-1)),l.splice(d,1)}function by(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const f=d[17];null!==f&&f!==o&&vy(f,d),a>0&&(o[l-1][4]=d[4]);const g=Qa(o,10+a);!function(o,a){lf(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function wy(o,a){if(!(256&a[2])){const l=a[11];tn(l)&&l.destroyNode&&lf(o,a,l,3,null,null),function(o){let a=o[13];if(!a)return xm(o[1],o);for(;a;){let l=null;if(Ti(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)Ti(a)&&xm(a[1],a),a=a[3];null===a&&(a=o),Ti(a)&&xm(a[1],a),l=a&&a[4]}a=l}}(a)}}function xm(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof Io)){const g=l[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],I=g[v+1];try{I.call(E)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function(o,a){const l=o.cleanup,d=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(a):Ln(a[v]),I=d[f=l[g+2]],A=l[g+3];"boolean"==typeof A?E.removeEventListener(l[g],I,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),g+=2}else{const v=d[f=l[g+1]];l[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();a[7]=null}}(o,a),1===a[1].type&&tn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&as(a[3])){l!==a[3]&&vy(l,a);const d=a[19];null!==d&&d.detachView(o)}}}function uu(o,a,l){return function(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===at.None||f===at.Emulated)return null}return cr(d,l)}(o,a.parent,l)}function yc(o,a,l,d,f){tn(o)?o.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function mw(o,a,l){tn(o)?o.appendChild(a,l):a.appendChild(l)}function _d(o,a,l,d,f){null!==d?yc(o,a,l,d,f):mw(o,a,l)}function km(o,a){return tn(o)?o.parentNode(a):a.parentNode}function Iy(o,a,l){return _w(o,a,l)}let _w=function(o,a,l){return 40&o.type?cr(o,l):null};function Nm(o,a,l,d){const f=uu(o,d,a),g=a[11],E=Iy(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)_d(g,f,l[I],E,!1);else _d(g,f,l,E,!1)}function Om(o,a){if(null!==a){const l=a.type;if(3&l)return cr(a,o);if(4&l)return Sy(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return Om(o,d);{const f=o[a.index];return as(f)?Sy(-1,f):Ln(f)}}if(32&l)return sf(a,o)()||Ln(o[a.index]);{const d=Dy(o,a);return null!==d?Array.isArray(d)?d[0]:Om(af(o[16]),d):Om(o,a.next)}}return null}function Dy(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Sy(o,a){const l=10+o+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return Om(d,f)}return a[7]}function Ay(o,a,l,d,f,g,v){for(;null!=l;){const E=d[l.index],I=l.type;if(v&&0===a&&(E&&kr(Ln(E),d),l.flags|=4),64!=(64&l.flags))if(8&I)Ay(o,a,l.child,d,f,g,!1),_c(a,o,f,E,g);else if(32&I){const A=sf(l,d);let x;for(;x=A();)_c(a,o,f,x,g);_c(a,o,f,E,g)}else 16&I?yw(o,a,d,l,f,g):_c(a,o,f,E,g);l=v?l.projectionNext:l.next}}function lf(o,a,l,d,f,g){Ay(l,d,o.firstChild,a,f,g,!1)}function yw(o,a,l,d,f,g){const v=l[16],I=v[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)_c(a,o,f,I[A],g);else Ay(o,a,I,v[3],f,g,!0)}function JD(o,a,l){tn(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function Pm(o,a,l){tn(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function XD(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}l=f+1}}const eS="ng-template";function vw(o,a,l){let d=0;for(;d<o.length;){let f=o[d++];if(l&&"class"===f){if(f=o[d],-1!==XD(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function uf(o){return 4===o.type&&o.value!==eS}function Rr(o,a,l){return a===(4!==o.type||l?o.value:eS)}function sr(o,a,l){let d=4;const f=o.attrs||[],g=function(o){for(let a=0;a<o.length;a++)if(Js(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!Rr(o,I,l)||""===I&&1===a.length){if(Wr(d))return!1;v=!0}}else{const A=8&d?I:a[++E];if(8&d&&null!==o.attrs){if(!vw(o.attrs,A,l)){if(Wr(d))return!1;v=!0}continue}const V=tS(8&d?"class":I,f,uf(o),l);if(-1===V){if(Wr(d))return!1;v=!0;continue}if(""!==A){let Z;Z=V>g?"":f[V+1].toLowerCase();const te=8&d?Z:null;if(te&&-1!==XD(te,A,0)||2&d&&A!==Z){if(Wr(d))return!1;v=!0}}}}else{if(!v&&!Wr(d)&&!Wr(I))return!1;if(v&&Wr(I))continue;v=!1,d=I|1&d}}return Wr(d)||v}function Wr(o){return 0==(1&o)}function tS(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function nS(o,a,l=!1){for(let d=0;d<a.length;d++)if(sr(o,a[d],l))return!0;return!1}function rS(o,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function bw(o,a){return o?":not("+a.trim()+")":a}function iS(o){let a=o[0],l=1,d=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&d){const E=o[++l];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Wr(v)&&(a+=bw(g,f),f=""),d=v,g=g||!Wr(d);l++}return""!==f&&(a+=bw(g,f)),a}const Wt={};function My(o){ww(Qt(),Re(),Un()+o,Jo())}function ww(o,a,l,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&ia(a,g,l)}else{const g=o.preOrderHooks;null!==g&&Ju(a,g,0,l)}ds(l)}function xy(o,a){return o<<17|a<<2}function gs(o){return o>>17&32767}function vd(o){return 2|o}function cu(o){return(131068&o)>>2}function Cw(o,a){return-131069&o|a<<2}function Iw(o){return 1|o}function Nw(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],g=l[d+1];if(-1!==g){const v=o.data[g];Ga(f),v.contentQueries(2,a[g],g)}}}function pf(o,a,l,d,f,g,v,E,I,A){const x=a.blueprint.slice();return x[0]=f,x[2]=140|d,Rl(x),x[3]=x[15]=o,x[8]=l,x[10]=v||o&&o[10],x[11]=E||o&&o[11],x[12]=I||o&&o[12]||null,x[9]=A||o&&o[9]||null,x[6]=g,x[16]=2==a.type?o[16]:x,x}function Cd(o,a,l,d,f){let g=o.data[a];if(null===g)g=function(o,a,l,d,f){const g=Yo(),v=Ha(),I=o.data[a]=function(o,a,l,d,f,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,l,d,f),bt.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=f;const v=function(){const o=bt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Gr(g,!0),g}function mf(o,a,l,d){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Hm(o,a,l){$a(a);try{const d=o.viewQuery;null!==d&&$w(1,d,l);const f=o.template;null!==f&&Ow(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Nw(o,a),o.staticViewQueries&&$w(2,o.viewQuery,l);const g=o.components;null!==g&&function(o,a){for(let l=0;l<a.length;l++)v1(o,a[l])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Ku()}}function gf(o,a,l,d){const f=a[2];if(256==(256&f))return;$a(a);const g=Jo();try{Rl(a),function(o){bt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&Ow(o,a,l,2,d);const v=3==(3&f);if(!g)if(v){const A=o.preOrderCheckHooks;null!==A&&ia(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Ju(a,A,0,null),$l(a,0)}if(function(o){for(let a=my(o);null!==a;a=gy(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],g=f[3];0==(1024&f[2])&&Eo(g,1),f[2]|=1024}}}(a),function(o){for(let a=my(o);null!==a;a=gy(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];ls(d)&&gf(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&Nw(o,a),!g)if(v){const A=o.contentCheckHooks;null!==A&&ia(a,A)}else{const A=o.contentHooks;null!==A&&Ju(a,A,1),$l(a,1)}!function(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)ds(~f);else{const g=f,v=l[++d],E=l[++d];ta(v,g),E(2,a[g])}}}finally{ds(-1)}}(o,a);const E=o.components;null!==E&&function(o,a){for(let l=0;l<a.length;l++)y1(o,a[l])}(a,E);const I=o.viewQuery;if(null!==I&&$w(2,I,d),!g)if(v){const A=o.viewCheckHooks;null!==A&&ia(a,A)}else{const A=o.viewHooks;null!==A&&Ju(a,A,2),$l(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Eo(a[3],-1))}finally{Ku()}}function mS(o,a,l,d){const f=a[10],g=!Jo(),v=xl(a);try{g&&!v&&f.begin&&f.begin(),v&&Hm(o,a,d),gf(o,a,l,d)}finally{g&&!v&&f.end&&f.end()}}function Ow(o,a,l,d,f){const g=Un(),v=2&d;try{ds(-1),v&&a.length>20&&ww(o,a,20,Jo()),l(d,f)}finally{ds(g)}}function gS(o,a,l){if(Th(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function Pw(o,a,l){!Ko()||(function(o,a,l,d){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||To(l,a),kr(d,a);const v=l.initialInputs;for(let E=f;E<g;E++){const I=o.data[E],A=mi(I);A&&f1(a,l,I);const x=xs(a,o,E,l);kr(x,a),null!==v&&p1(0,E-f,x,I,0,v),A&&(pn(l.index,a)[8]=x)}}(o,a,l,cr(l,a)),128==(128&l.flags)&&function(o,a,l){const d=l.directiveStart,f=l.directiveEnd,v=l.index,E=bt.lFrame.currentDirectiveIndex;try{ds(v);for(let I=d;I<f;I++){const A=o.data[I],x=a[I];Ys(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&IS(A,x)}}finally{ds(-1),Ys(E)}}(o,a,l))}function Fw(o,a,l=cr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],E=-1===v?l(a,o):o[v];o[f++]=E}}}function _S(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Fy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Fy(o,a,l,d,f,g,v,E,I,A){const x=20+d,V=x+f,Z=function(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Wt);return l}(x,V),te="function"==typeof A?A():A;return Z[1]={type:o,blueprint:Z,template:l,queries:null,viewQuery:E,declTNode:a,data:Z.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function vS(o,a,l,d){const f=kS(a);null===l?f.push(d):(f.push(l),o.firstCreatePass&&RS(o).push(d,f.length-1))}function bS(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function oo(o,a,l,d,f,g,v,E){const I=cr(a,l);let x,A=a.inputs;!E&&null!=A&&(x=A[d])?(PS(o,l,x,d,f),qn(a)&&function(o,a){const l=pn(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,tn(g)?g.setProperty(I,d,f):Xe(d)||(I.setProperty?I.setProperty(d,f):I[d]=f))}function Vw(o,a,l,d){let f=!1;if(Ko()){const g=function(o,a,l){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];nS(l,v.selectors,!1)&&(f||(f=[]),Xs(To(l,a),o,v.type),mi(v)?(TS(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===d?null:{"":-1};if(null!==g){f=!0,DS(l,o.data.length,g.length);for(let x=0;x<g.length;x++){const V=g[x];V.providersResolver&&V.providersResolver(V)}let E=!1,I=!1,A=mf(o,a,g.length,null);for(let x=0;x<g.length;x++){const V=g[x];l.mergedAttrs=Bt(l.mergedAttrs,V.hostAttrs),SS(o,l,a,A,V),h1(A,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const Z=V.type.prototype;!E&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),E=!0),!I&&(Z.ngOnChanges||Z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),A++}!function(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,v=[];let E=null,I=null;for(let A=a.directiveStart;A<d;A++){const x=f[A],V=x.inputs,Z=null===g||uf(a)?null:AS(V,g);v.push(Z),E=bS(V,A,E),I=bS(x.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=E,a.outputs=I}(o,l)}v&&function(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new $e("301",`Export of name '${a[f+1]}' not found!`);d.push(a[f],g)}}}(l,d,v)}return l.mergedAttrs=Bt(l.mergedAttrs,l.attrs),f}function CS(o,a,l,d,f,g){const v=g.hostBindings;if(v){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const I=~a.index;(function(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(d,f,v)}}function IS(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function TS(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function h1(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;mi(a)&&(l[""]=o)}}function DS(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function SS(o,a,l,d,f){o.data[d]=f;const g=f.factory||(f.factory=Zs(f.type)),v=new Io(g,mi(f),null);o.blueprint[d]=v,l[d]=v,CS(o,a,0,d,mf(o,l,f.hostVars,Wt),f)}function f1(o,a,l){const d=cr(a,o),f=_S(l),g=o[10],v=Ly(o,pf(o,f,null,l.onPush?64:16,d,a,g,g.createRenderer(d,l),null,null));o[a.index]=v}function ll(o,a,l,d,f,g){const v=cr(o,a);!function(o,a,l,d,f,g,v){if(null==g)tn(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const E=null==v?se(g):v(g,d||"",f);tn(o)?o.setAttribute(a,f,E,l):l?a.setAttributeNS(l,f,E):a.setAttribute(f,E)}}(a[11],v,g,o.value,l,d,f)}function p1(o,a,l,d,f,g){const v=g[a];if(null!==v){const E=d.setInput;for(let I=0;I<v.length;){const A=v[I++],x=v[I++],V=v[I++];null!==E?d.setInput(l,V,A,x):l[x]=V}}}function AS(o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function MS(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function y1(o,a){const l=pn(a,o);if(ls(l)){const d=l[1];80&l[2]?gf(d,l,d.template,l[8]):l[5]>0&&Uw(l)}}function Uw(o){for(let d=my(o);null!==d;d=gy(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const v=g[1];gf(v,g,v.template,g[8])}else g[5]>0&&Uw(g)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=pn(l[d],o);ls(f)&&f[5]>0&&Uw(f)}}function v1(o,a){const l=pn(a,o),d=l[1];(function(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),Hm(d,l,l[8])}function Ly(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function jw(o){for(;o;){o[2]|=64;const a=af(o);if(zc(o)&&!a)return o;o=a}return null}function Gw(o,a,l){const d=a[10];d.begin&&d.begin();try{gf(o,a,o.template,l)}catch(f){throw OS(a,f),f}finally{d.end&&d.end()}}function xS(o){!function(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],d=fd(l),f=d[1];mS(f,d,f.template,l)}}(o[8])}function $w(o,a,l){Ga(0),a(o,l)}const I1=(()=>Promise.resolve(null))();function kS(o){return o[7]||(o[7]=[])}function RS(o){return o.cleanup||(o.cleanup=[])}function NS(o,a,l){return(null===o||mi(o))&&(l=function(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}function OS(o,a){const l=o[9],d=l?l.get(rf,null):null;d&&d.handleError(a)}function PS(o,a,l,d,f){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],I=a[v],A=o.data[v];null!==A.setInput?A.setInput(I,f,d,E):I[E]=f}}function du(o,a,l){const d=ti(a,o);!function(o,a,l){tn(o)?o.setValue(a,l):a.textContent=l}(o[11],d,l)}function Vy(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=ge(f,E):2==g&&(d=ge(d,E+": "+a[++v]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}const zw=new Vn("INJECTOR",-1);class FS{get(a,l=Qi){if(l===Qi){const d=new Error(`NullInjectorError: No provider for ${ue(a)}!`);throw d.name="NullInjectorError",d}return l}}const Ww=new Vn("Set Injector scope."),Gm={},S1={};let qw;function LS(){return void 0===qw&&(qw=new FS),qw}function VS(o,a=null,l=null,d){const f=BS(o,a,l,d);return f._resolveInjectorDefTypes(),f}function BS(o,a=null,l=null,d){return new A1(o,l,a||LS(),d)}class A1{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&fs(l,E=>this.processProvider(E,a,l)),fs([a],E=>this.processInjectorType(E,[],g)),this.records.set(zw,_f(void 0,this));const v=this.records.get(Ww);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof a?null:ue(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=Qi,d=vt.Default){this.assertNotDestroyed();const f=k(this),g=lr(void 0);try{if(!(d&vt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=("function"==typeof(o=a)||"object"==typeof o&&o instanceof Vn)&&Qr(a);E=I&&this.injectableDefInScope(I)?_f(Zw(a),Gm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&vt.Self?LS():this.parent).get(a,l=d&vt.Optional&&l===Qi?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[tu]=v[tu]||[]).unshift(ue(a)),f)throw v;return function(o,a,l,d){const f=o[tu];throw a[od]&&f.unshift(a[od]),o.message=function(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ue(a);if(Array.isArray(a))f=a.map(ue).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}f=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(nu,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[tu]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{lr(g),k(f)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(ue(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,l,d){if(!(a=ae(a)))return!1;let f=Jr(a);const g=null==f&&a.ngModule||void 0,v=void 0===g?a:g,E=-1!==d.indexOf(v);if(void 0!==g&&(f=Jr(g)),null==f)return!1;if(null!=f.imports&&!E){let x;d.push(v);try{fs(f.imports,V=>{this.processInjectorType(V,l,d)&&(void 0===x&&(x=[]),x.push(V))})}finally{}if(void 0!==x)for(let V=0;V<x.length;V++){const{ngModule:Z,providers:te}=x[V];fs(te,_e=>this.processProvider(_e,Z,te||H))}}this.injectorDefTypes.add(v);const I=Zs(v)||(()=>new v);this.records.set(v,_f(I,Gm));const A=f.providers;if(null!=A&&!E){const x=a;fs(A,V=>this.processProvider(V,x,A))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,d){let f=yf(a=ae(a))?a:ae(a&&a.provide);const g=(o=a,jS(o)?_f(void 0,o.useValue):_f(US(o),Gm));var o;if(yf(a)||!0!==a.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=_f(void 0,Gm,!0),v.factory=()=>tt(v.multi),this.records.set(f,v)),f=a,v.multi.push(a)}this.records.set(f,g)}hydrate(a,l){return l.value===Gm&&(l.value=S1,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(o=l.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ae(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Zw(o){const a=Qr(o),l=null!==a?a.factory:Zs(o);if(null!==l)return l;if(o instanceof Vn)throw new Error(`Token ${ue(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const d=io(a,"?");throw new Error(`Can't resolve all parameters for ${ue(o)}: (${d.join(", ")}).`)}const l=function(o){const a=o&&(o[Xr]||o[ar]);if(a){const l=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Error("unreachable")}function US(o,a,l){let d;if(yf(o)){const f=ae(o);return Zs(f)||Zw(f)}if(jS(o))d=()=>ae(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...tt(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))d=()=>G(ae(o.useExisting));else{const f=ae(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Zs(f)||Zw(f);d=()=>new f(...tt(o.deps))}return d}function _f(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function jS(o){return null!==o&&"object"==typeof o&&T in o}function yf(o){return"function"==typeof o}let Ro=(()=>{class o{static create(l,d){var f;if(Array.isArray(l))return VS({name:""},d,l,"");{const g=null!=(f=l.name)?f:"";return VS({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=Qi,o.NULL=new FS,o.\u0275prov=nn({token:o,providedIn:"any",factory:()=>G(zw)}),o.__NG_ELEMENT_ID__=-1,o})();function ZS(o,a){ra(fd(o)[1],Zn())}function Uy(o){let a=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(mi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");f=a.\u0275dir}if(f){if(l){d.push(f);const v=o;v.inputs=Wm(o.inputs),v.declaredInputs=Wm(o.declaredInputs),v.outputs=Wm(o.outputs);const E=f.hostBindings;E&&QS(o,E);const I=f.viewQuery,A=f.contentQueries;if(I&&KS(o,I),A&&YS(o,A),ie(o.inputs,f.inputs),ie(o.declaredInputs,f.declaredInputs),ie(o.outputs,f.outputs),mi(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(o),E===Uy&&(l=!1)}}a=Object.getPrototypeOf(a)}!function(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Bt(f.hostAttrs,l=Bt(l,f.hostAttrs))}}(d)}function Wm(o){return o===W?{}:o===H?[]:o}function KS(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function YS(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,g)=>{a(d,f,g),l(d,f,g)}:a}function QS(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let jy=null;function bf(){if(!jy){const o=St.Symbol;if(o&&o.iterator)jy=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(jy=d)}}}return jy}function qm(o){return!!Zm(o)&&(Array.isArray(o)||!(o instanceof Map)&&bf()in o)}function Zm(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function wa(o,a,l){return o[a]=l}function yi(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Hy(o,a,l,d){const f=Re();return yi(f,ea(),a)&&(Qt(),ll(jn(),f,o,a,l,d)),Hy}function If(o,a,l,d,f,g){const E=function(o,a,l,d){const f=yi(o,a,l);return yi(o,a+1,d)||f}(o,bt.lFrame.bindingIndex,l,f);return Si(2),E?a+se(l)+d+se(f)+g:Wt}function Wy(o,a,l,d,f,g,v,E){const I=Re(),A=Qt(),x=o+20,V=A.firstCreatePass?function(o,a,l,d,f,g,v,E,I){const A=a.consts,x=Cd(a,o,4,v||null,Or(A,E));Vw(a,l,x,Or(A,I)),ra(a,x);const V=x.tViews=Fy(2,x,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,x),V.queries=a.queries.embeddedTView(x)),x}(x,A,I,a,l,d,f,g,v):A.data[x];Gr(V,!1);const Z=I[11].createComment("");Nm(A,I,Z,V),kr(Z,I),Ly(I,I[x]=MS(Z,I,Z,V)),Cl(V)&&Pw(A,I,V),null!=v&&Fw(I,V,E)}function Jm(o){return function(o,a){return o[a]}(bt.lFrame.contextLView,20+o)}function mu(o,a=vt.Default){const l=Re();return null===l?G(o,a):la(Zn(),l,ae(o),a)}function Af(){throw new Error("invalid")}function ng(o,a,l){const d=Re();return yi(d,ea(),a)&&oo(Qt(),jn(),d,o,a,d[11],l,!1),ng}function Mf(o,a,l,d,f){const v=f?"class":"style";PS(o,l,a.inputs[v],v,d)}function xf(o,a,l,d){const f=Re(),g=Qt(),v=20+o,E=f[11],I=f[v]=yy(E,a,bt.lFrame.currentNamespace),A=g.firstCreatePass?function(o,a,l,d,f,g,v){const E=a.consts,A=Cd(a,o,2,f,Or(E,g));return Vw(a,l,A,Or(E,v)),null!==A.attrs&&Vy(A,A.attrs,!1),null!==A.mergedAttrs&&Vy(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,l,d):g.data[v];Gr(A,!0);const x=A.mergedAttrs;null!==x&&xn(E,I,x);const V=A.classes;null!==V&&Pm(E,I,V);const Z=A.styles;null!==Z&&JD(E,I,Z),64!=(64&A.flags)&&Nm(g,f,I,A),0===bt.lFrame.elementDepthCount&&kr(I,f),bt.lFrame.elementDepthCount++,Cl(A)&&(Pw(g,f,A),gS(g,A,f)),null!==d&&Fw(f,A)}function Sd(){let o=Zn();Ha()?Qo():(o=o.parent,Gr(o,!1));const a=o;bt.lFrame.elementDepthCount--;const l=Qt();l.firstCreatePass&&(ra(l,o),Th(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&Mf(l,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&Mf(l,a,Re(),a.stylesWithoutHost,!1)}function yE(o,a,l,d){xf(o,a,l,d),Sd()}function Ia(o,a,l){const d=Re(),f=Qt(),g=o+20,v=f.firstCreatePass?function(o,a,l,d,f){const g=a.consts,v=Or(g,d),E=Cd(a,o,8,"ng-container",v);return null!==v&&Vy(E,v,!0),Vw(a,l,E,Or(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,d,a,l):f.data[g];Gr(v,!0);const E=d[g]=d[11].createComment("");Nm(f,d,E,v),kr(E,d),Cl(v)&&(Pw(f,d,v),gS(f,v,d)),null!=l&&Fw(d,v)}function rg(){let o=Zn();const a=Qt();Ha()?Qo():(o=o.parent,Gr(o,!1)),a.firstCreatePass&&(ra(a,o),Th(o)&&a.queries.elementEnd(o))}function sv(o,a,l){Ia(o,a,l),rg()}function Po(){return Re()}function cl(o){return!!o&&"function"==typeof o.then}function Ad(o){return!!o&&"function"==typeof o.subscribe}const bE=Ad;function Rf(o,a,l,d){const f=Re(),g=Qt(),v=Zn();return Nf(g,f,f[11],v,o,a,!!l,d),Rf}function ig(o,a){const l=Zn(),d=Re(),f=Qt();return Nf(f,d,NS(Vl(f.data),l,d),l,o,a,!1),ig}function Nf(o,a,l,d,f,g,v,E){const I=Cl(d),x=o.firstCreatePass&&RS(o),V=a[8],Z=kS(a);let te=!0;if(3&d.type||E){const Qe=cr(d,a),dt=E?E(Qe):Qe,Ae=Z.length,Ct=E?on=>E(Ln(on[d.index])):d.index;if(tn(l)){let on=null;if(!E&&I&&(on=function(o,a,l,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===d){const E=a[7],I=f[g+2];return E.length>I?E[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,d.index)),null!==on)(on.__ngLastListenerFn__||on).__ngNextListenerFn__=g,on.__ngLastListenerFn__=g,te=!1;else{g=Of(d,a,V,g,!1);const Sn=l.listen(dt,f,g);Z.push(g,Sn),x&&x.push(f,Ct,Ae,Ae+1)}}else g=Of(d,a,V,g,!0),dt.addEventListener(f,g,v),Z.push(g),x&&x.push(f,Ct,Ae,v)}else g=Of(d,a,V,g,!1);const _e=d.outputs;let He;if(te&&null!==_e&&(He=_e[f])){const Qe=He.length;if(Qe)for(let dt=0;dt<Qe;dt+=2){const Ls=a[He[dt]][He[dt+1]].subscribe(g),Cu=Z.length;Z.push(g,Ls),x&&x.push(f,d.index,Cu,-(Cu+1))}}}function wE(o,a,l,d){try{return!1!==l(d)}catch(f){return OS(o,f),!1}}function Of(o,a,l,d,f){return function g(v){if(v===Function)return d;const E=2&o.flags?pn(o.index,a):a;0==(32&a[2])&&jw(E);let I=wE(a,0,d,v),A=g.__ngNextListenerFn__;for(;A;)I=wE(a,0,A,v)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function EE(o=1){return function(o){return(bt.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,bt.lFrame.contextLView))[8]}(o)}function CE(o,a){let l=null;const d=function(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?nS(o,g,!0):rS(d,g))return f}else l=f}return l}function ov(o){const a=Re()[16][6];if(!a.projection){const d=a.projection=io(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const v=o?CE(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function ys(o,a=0,l){const d=Re(),f=Qt(),g=Cd(f,20+o,16,null,l||null);null===g.projection&&(g.projection=a),Qo(),64!=(64&g.flags)&&function(o,a,l){yw(a[11],0,a,l,uu(o,l,a),Iy(l.parent||a[6],l,a))}(f,d,g)}function xE(o,a,l,d,f){const g=o[l+1],v=null===a;let E=d?gs(g):cu(g),I=!1;for(;0!==E&&(!1===I||v);){const x=o[E+1];aA(o[E],a)&&(I=!0,o[E+1]=d?Iw(x):vd(x)),E=d?gs(x):cu(x)}I&&(o[l+1]=d?vd(g):Iw(g))}function aA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ns(o,a)>=0}function kd(o,a,l){return Da(o,a,l,!1),kd}function Vf(o,a){return Da(o,a,null,!0),Vf}function Da(o,a,l,d){const f=Re(),g=Qt(),v=Si(2);g.firstUpdatePass&&function(o,a,l,d){const f=o.data;if(null===f[l+1]){const g=f[Un()],v=function(o,a){return a>=o.expandoStartIndex}(o,l);(function(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!v&&(a=!1),a=function(o,a,l,d){const f=Vl(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=Bf(l=cg(null,o,a,l,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=cg(f,o,a,l,d),null===g){let I=function(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==cu(d))return o[gs(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=cg(null,o,a,I[1],d),I=Bf(I,a.attrs,d),function(o,a,l,d){o[gs(l?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function(o,a,l){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=Bf(d,o[g].hostAttrs,l);return Bf(d,a.attrs,l)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,d),function(o,a,l,d,f,g){let v=g?a.classBindings:a.styleBindings,E=gs(v),I=cu(v);o[d]=l;let x,A=!1;if(Array.isArray(l)){const V=l;x=V[1],(null===x||Ns(V,x)>0)&&(A=!0)}else x=l;if(f)if(0!==I){const Z=gs(o[E+1]);o[d+1]=xy(Z,E),0!==Z&&(o[Z+1]=Cw(o[Z+1],d)),o[E+1]=function(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=xy(E,0),0!==E&&(o[E+1]=Cw(o[E+1],d)),E=d;else o[d+1]=xy(I,0),0===E?E=d:o[I+1]=Cw(o[I+1],d),I=d;A&&(o[d+1]=vd(o[d+1])),xE(o,x,d,!0),xE(o,x,d,!1),function(o,a,l,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Ns(g,a)>=0&&(l[d+1]=Iw(l[d+1]))}(a,x,o,d,g),v=xy(E,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,d)}}(g,o,v,d),a!==Wt&&yi(f,v,a)&&function(o,a,l,d,f,g,v,E){if(!(3&a.type))return;const I=o.data,A=I[E+1];dg(function(o){return 1==(1&o)}(A)?dv(I,a,l,f,cu(A),v):void 0)||(dg(g)||function(o){return 2==(2&o)}(A)&&(g=dv(I,null,l,f,E,v)),function(o,a,l,d,f){const g=tn(o);if(a)f?g?o.addClass(l,d):l.classList.add(d):g?o.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:ya.DashCase;if(null==f)g?o.removeStyle(l,d,v):l.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),v|=ya.Important),g?o.setStyle(l,d,f,v):l.style.setProperty(d,f,E?"important":"")}}}(d,v,ti(Un(),l),f,g))}(g,g.data[Un()],f,f[11],o,f[v+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ue(Mo(o)))),o}(a,l),d,v)}function cg(o,a,l,d,f){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=a[E],d=Bf(d,g.hostAttrs,f),g!==o);)E++;return null!==o&&(l.directiveStylingLast=E),d}function Bf(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),$r(o,v,!!l||a[++g]))}return void 0===o?null:o}function dv(o,a,l,d,f,g){const v=null===a;let E;for(;f>0;){const I=o[f],A=Array.isArray(I),x=A?I[1]:I,V=null===x;let Z=l[f+1];Z===Wt&&(Z=V?H:void 0);let te=V?Mi(Z,d):x===d?Z:void 0;if(A&&!dg(te)&&(te=Mi(I,d)),dg(te)&&(E=te,v))return E;const _e=o[f+1];f=v?gs(_e):cu(_e)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=Mi(I,d))}return E}function dg(o){return void 0!==o}function VE(o,a=""){const l=Re(),d=Qt(),f=o+20,g=d.firstCreatePass?Cd(d,f,1,a,null):d.data[f],v=l[f]=function(o,a){return tn(o)?o.createText(a):o.createTextNode(a)}(l[11],a);Nm(d,l,v,g),Gr(g,!1)}function hg(o){return Uf("",o,""),hg}function Uf(o,a,l){const d=Re(),f=function(o,a,l,d){return yi(o,ea(),l)?a+se(l)+d:Wt}(d,o,a,l);return f!==Wt&&du(d,Un(),f),Uf}function fv(o,a,l,d,f){const g=Re(),v=If(g,o,a,l,d,f);return v!==Wt&&du(g,Un(),v),fv}function _g(o,a,l){const d=Re();return yi(d,ea(),a)&&oo(Qt(),jn(),d,o,a,d[11],l,!0),_g}function bv(o,a,l){const d=Re();if(yi(d,ea(),a)){const g=Qt(),v=jn();oo(g,v,d,o,a,NS(Vl(g.data),v,d),l,!0)}return bv}const Ic=void 0;var DA=["en",[["a","p"],["AM","PM"],Ic],[["AM","PM"],Ic,Ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ic,"{1} 'at' {0}",Ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Od={};function Hf(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=yg(a);if(l)return l;const d=a.split("-")[0];if(l=yg(d),l)return l;if("en"===d)return DA;throw new Error(`Missing locale data for the locale "${o}".`)}function Gf(o){return Hf(o)[At.PluralCase]}function yg(o){return o in Od||(Od[o]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[o]),Od[o]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const vg="en-US";let wv=vg;function EC(o,a,l,d,f){if(o=ae(o),Array.isArray(o))for(let g=0;g<o.length;g++)EC(o[g],a,l,d,f);else{const g=Qt(),v=Re();let E=yf(o)?o:ae(o.provide),I=US(o);const A=Zn(),x=1048575&A.providerIndexes,V=A.directiveStart,Z=A.providerIndexes>>20;if(yf(o)||!o.multi){const te=new Io(I,f,mu),_e=IC(E,a,f?x:x+Z,V);-1===_e?(Xs(To(A,v),g,E),CC(g,o,a.length),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(te),v.push(te)):(l[_e]=te,v[_e]=te)}else{const te=IC(E,a,x+Z,V),_e=IC(E,a,x,x+Z),He=te>=0&&l[te],Qe=_e>=0&&l[_e];if(f&&!Qe||!f&&!He){Xs(To(A,v),g,E);const dt=function(o,a,l,d,f){const g=new Io(o,l,mu);return g.multi=[],g.index=a,g.componentProviders=0,eM(g,f,d&&!l),g}(f?gP:mP,l.length,f,d,I);!f&&Qe&&(l[_e].providerFactory=dt),CC(g,o,a.length,0),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(dt),v.push(dt)}else CC(g,o,te>-1?te:_e,eM(l[f?_e:te],I,!f&&d));!f&&d&&Qe&&l[_e].componentProviders++}}}function CC(o,a,l,d){const f=yf(a),g=function(o){return!!o.useClass}(a);if(f||g){const I=(g?ae(a.useClass):a).prototype.ngOnDestroy;if(I){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=A.indexOf(l);-1===x?A.push(l,[d,I]):A[x+1].push(d,I)}else A.push(l,I)}}}function eM(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function IC(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function mP(o,a,l,d){return TC(this.multi,[])}function gP(o,a,l,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=xs(l,l[1],this.providerFactory.index,d);g=E.slice(0,v),TC(f,g);for(let I=v;I<E.length;I++)g.push(E[I])}else g=[],TC(f,g);return g}function TC(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function DC(o,a=[]){return l=>{l.providersResolver=(d,f)=>function(o,a,l){const d=Qt();if(d.firstCreatePass){const f=mi(o);EC(l,d.data,d.blueprint,f,!0),EC(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Tv{}class MC{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${ue(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Pd=(()=>{class o{}return o.NULL=new MC,o})();function _P(){return Fd(Zn(),Re())}function Fd(o,a){return new Kf(cr(o,a))}let Kf=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=_P,o})();function nM(o){return o instanceof Kf?o.nativeElement:o}class Sv{}let rM=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function(){const o=Re(),l=pn(Zn().index,o);return function(o){return o[11]}(Ti(l)?l:o)}(),o})(),oM=(()=>{class o{}return o.\u0275prov=nn({token:o,providedIn:"root",factory:()=>null}),o})();class Sa{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Av=new Sa("13.0.3"),Mv={};function Sg(o,a,l,d,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(Ln(g)),as(g))for(let E=10;E<g.length;E++){const I=g[E],A=I[1].firstChild;null!==A&&Sg(I[1],I,A,d)}const v=l.type;if(8&v)Sg(o,a,l.child,d);else if(32&v){const E=sf(l,a);let I;for(;I=E();)d.push(I)}else if(16&v){const E=Dy(a,l);if(Array.isArray(E))d.push(...E);else{const I=af(a[16]);Sg(I[1],I,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class Yf{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Sg(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(as(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(by(a,d),Qa(l,d))}this._attachedToViewContainer=!1}wy(this._lView[1],this._lView)}onDestroy(a){vS(this._lView[1],this._lView,null,a)}markForCheck(){jw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,l){Xo(!0);try{Gw(o,a,l)}finally{Xo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,lf(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class yu extends Yf{constructor(a){super(a),this._view=a}detectChanges(){xS(this._view)}checkNoChanges(){!function(o){Xo(!0);try{xS(o)}finally{Xo(!1)}}(this._view)}get context(){return null}}class aM extends Pd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=gt(a);return new xv(l,this.ngModule)}}function xC(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const kC=new Vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>lw});class xv extends Tv{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=a.selectors.map(iS).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return xC(this.componentDef.inputs)}get outputs(){return xC(this.componentDef.outputs)}create(a,l,d,f){const g=(f=f||this.ngModule)?function(o,a){return{get:(l,d,f)=>{const g=o.get(l,Mv,f);return g!==Mv||d===Mv?g:a.get(l,d,f)}}}(a,f.injector):a,v=g.get(Sv,$u),E=g.get(oM,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=d?function(o,a,l){if(tn(o))return o.selectRootElement(a,l===at.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(I,d,this.componentDef.encapsulation):yy(v.createRenderer(null,this.componentDef),A,function(o){const a=o.toLowerCase();return"svg"===a?Sl:"math"===a?"http://www.w3.org/1998/MathML/":null}(A)),V=this.componentDef.onPush?576:528,Z=function(o,a){return{components:[],scheduler:o||lw,clean:I1,playerHandler:a||null,flags:0}}(),te=Fy(0,null,null,1,0,null,null,null,null,null),_e=pf(null,te,Z,V,null,null,v,I,E,g);let He,Qe;$a(_e);try{const dt=function(o,a,l,d,f,g){const v=l[1];l[20]=o;const I=Cd(v,20,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&(Vy(I,A,!0),null!==o&&(xn(f,o,A),null!==I.classes&&Pm(f,o,I.classes),null!==I.styles&&JD(f,o,I.styles)));const x=d.createRenderer(o,a),V=pf(l,_S(a),null,a.onPush?64:16,l[20],I,d,x,g||null,null);return v.firstCreatePass&&(Xs(To(I,l),v,a.type),TS(v,I),DS(I,l.length,1)),Ly(l,V),l[20]=V}(x,this.componentDef,_e,v,I);if(x)if(d)xn(I,x,["ng-version",Av.full]);else{const{attrs:Ae,classes:Ct}=function(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&l.push(g);else{if(!Wr(f))break;f=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Ae&&xn(I,x,Ae),Ct&&Ct.length>0&&Pm(I,x,Ct.join(" "))}if(Qe=Wo(te,20),void 0!==l){const Ae=Qe.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const on=l[Ct];Ae.push(null!=on?Array.from(on):null)}}He=function(o,a,l,d,f){const g=l[1],v=function(o,a,l){const d=Zn();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),SS(o,d,a,mf(o,a,1,null),l));const f=xs(a,o,d.directiveStart,d);kr(f,a);const g=cr(d,a);return g&&kr(g,a),f}(g,l,a);if(d.components.push(v),o[8]=v,f&&f.forEach(I=>I(v,a)),a.contentQueries){const I=Zn();a.contentQueries(1,v,I.directiveStart)}const E=Zn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ds(E.index),CS(l[1],E,0,E.directiveStart,E.directiveEnd,a),IS(a,v)),v}(dt,this.componentDef,_e,Z,[ZS]),Hm(te,_e,null)}finally{Ku()}return new NC(this.componentType,He,Fd(Qe,_e),_e,Qe)}}class NC extends class{}{constructor(a,l,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new yu(f),this.componentType=a}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Ld{}class Ag{}const Vd=new Map;class Rv extends Ld{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new aM(this);const d=bn(a);this._bootstrapComponents=ko(d.bootstrap),this._r3Injector=BS(a,l,[{provide:Ld,useValue:this},{provide:Pd,useValue:this.componentFactoryResolver}],ue(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=Ro.THROW_IF_NOT_FOUND,d=vt.Default){return a===Ro||a===Ld||a===zw?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Nv extends Ag{constructor(a){super(),this.moduleType=a,null!==bn(a)&&function(o){const a=new Set;!function l(d){const f=bn(d,!0),g=f.id;null!==g&&(function(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${ue(a)} vs ${ue(a.name)}`)}(g,Vd.get(g),d),Vd.set(g,d));const v=ko(f.imports);for(const E of v)a.has(E)||(a.add(E),l(E))}(o)}(a)}create(a){return new Rv(this.moduleType,a)}}function Ov(o,a,l){const d=Ir()+o,f=Re();return f[d]===Wt?wa(f,d,l?a.call(l):a()):function(o,a){return o[a]}(f,d)}function Pv(o,a,l,d){return function(o,a,l,d,f,g){const v=a+l;return yi(o,v,f)?wa(o,v+1,g?d.call(g,f):d(f)):function(o,a){const l=o[a];return l===Wt?void 0:l}(o,v+1)}(Re(),Ir(),o,a,l,d)}function VC(o){return a=>{setTimeout(o,void 0,a)}}const hl=class extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var I,A,x;let f=a,g=l||(()=>null),v=d;if(a&&"object"==typeof a){const V=a;f=null==(I=V.next)?void 0:I.bind(V),g=null==(A=V.error)?void 0:A.bind(V),v=null==(x=V.complete)?void 0:x.bind(V)}this.__isAsync&&(g=VC(g),f&&(f=VC(f)),v&&(v=VC(v)));const E=super.subscribe({next:f,error:g,complete:v});return a instanceof j.w0&&a.add(E),E}};function TP(){return this._results[bf()]()}class Qf{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=bf(),d=Qf.prototype;d[l]||(d[l]=TP)}get changes(){return this._changes||(this._changes=new hl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=Zi(a);(this._changesDetected=!function(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dc=(()=>{class o{}return o.__NG_ELEMENT_ID__=Fv,o})();const _M=Dc,DP=class extends _M{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=pf(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(l)),Hm(l,d,a),new Yf(d)}};function Fv(){return Ng(Zn(),Re())}function Ng(o,a){return 4&o.type?new DP(a,o,Fd(o,a)):null}let Og=(()=>{class o{}return o.__NG_ELEMENT_ID__=SP,o})();function SP(){return vM(Zn(),Re())}const AP=Og,BC=class extends AP{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){const a=aa(this._hostTNode,this._hostLView);if(Yn(a)){const l=qa(a,this._hostLView),d=oa(a);return new Wi(l[1].data[d+8],l)}return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=yM(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,g){const v=a&&!("function"==typeof a);let E;if(v)E=l;else{const V=l||{};E=V.index,d=V.injector,f=V.projectableNodes,g=V.ngModuleRef}const I=v?a:new xv(gt(a)),A=d||this.parentInjector;if(!g&&null==I.ngModule&&A){const V=A.get(Ld,null);V&&(g=V)}const x=I.create(A,f,void 0,g);return this.insert(x.hostView,E),x}insert(a,l){const d=a._lView,f=d[1];if(as(d[3])){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const V=d[3],Z=new BC(V,V[6],V[3]);Z.detach(Z.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function(o,a,l,d){const f=10+d,g=l.length;d>0&&(l[f-1][4]=a),d<g-10?(a[4]=l[f],Ya(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,d,v,g);const E=Sy(g,v),I=d[11],A=km(I,v[7]);return null!==A&&function(o,a,l,d,f,g){d[0]=f,d[6]=a,lf(o,d,l,1,f,g)}(f,v[6],I,d,A,E),a.attachToViewContainerRef(),Ya(UC(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=yM(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=by(this._lContainer,l);d&&(Qa(UC(this._lContainer),l),wy(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=by(this._lContainer,l);return d&&null!=Qa(UC(this._lContainer),l)?new Yf(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function yM(o){return o[8]}function UC(o){return o[8]||(o[8]=[])}function vM(o,a){let l;const d=a[o.index];if(as(d))l=d;else{let f;if(8&o.type)f=Ln(d);else{const g=a[11];f=g.createComment("");const v=cr(o,a);yc(g,km(g,v),f,function(o,a){return tn(o)?o.nextSibling(a):a.nextSibling}(g,v),!1)}a[o.index]=l=MS(d,a,f,o),Ly(a,l)}return new BC(l,o,a)}class jC{constructor(a){this.queryList=a,this.matches=null}clone(){return new jC(this.queryList)}setDirty(){this.queryList.setDirty()}}class HC{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<d;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new HC(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==AM(a,l).matches&&this.queries[l].setDirty()}}class bM{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class GC{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new GC(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class $C{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new $C(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,l,kP(l,g)),this.matchTNodeWithReadOption(a,l,Fr(l,a,g,!1,!1))}else d===Dc?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Fr(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Kf||f===Og||f===Dc&&4&l.type)this.addMatch(l.index,-2);else{const g=Fr(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function kP(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function NP(o,a,l,d){return-1===l?function(o,a){return 11&o.type?Fd(o,a):4&o.type?Ng(o,a):null}(a,o):-2===l?function(o,a,l){return l===Kf?Fd(a,o):l===Dc?Ng(a,o):l===Og?vM(a,o):void 0}(o,a,d):xs(o,o[1],l,a)}function wM(o,a,l,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,v=l.matches,E=[];for(let I=0;I<v.length;I+=2){const A=v[I];E.push(A<0?null:NP(a,g[A],v[I+1],l.metadata.read))}f.matches=E}return f.matches}function zC(o,a,l,d){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=wM(o,a,f,l);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)d.push(v[E/2]);else{const A=g[E+1],x=a[-I];for(let V=10;V<x.length;V++){const Z=x[V];Z[17]===Z[3]&&zC(Z[1],Z,A,d)}if(null!==x[9]){const V=x[9];for(let Z=0;Z<V.length;Z++){const te=V[Z];zC(te[1],te,A,d)}}}}}return d}function EM(o){const a=Re(),l=Qt(),d=na();Ga(d+1);const f=AM(l,d);if(o.dirty&&xl(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?zC(l,a,d,[]):wM(l,a,f,d);o.reset(g,nM),o.notifyOnChanges()}return!0}return!1}function CM(o,a,l){const d=Qt();d.firstCreatePass&&(SM(d,new bM(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),DM(d,Re(),a)}function IM(o,a,l,d){const f=Qt();if(f.firstCreatePass){const g=Zn();SM(f,new bM(a,l,d),g.index),function(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}DM(f,Re(),l)}function TM(){return o=Re(),a=na(),o[19].queries[a].queryList;var o,a}function DM(o,a,l){const d=new Qf(4==(4&l));vS(o,a,d,d.destroy),null===a[19]&&(a[19]=new HC),a[19].queries.push(new jC(d))}function SM(o,a,l){null===o.queries&&(o.queries=new GC),o.queries.track(new $C(a,l))}function AM(o,a){return o.queries.getByIndex(a)}function Xf(...o){}const Hd=new Vn("Application Initializer");let Ac=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Xf,this.reject=Xf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(cl(g))l.push(g);else if(bE(g)){const v=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(G(Hd,8))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const Oi=new Vn("AppId"),Xi={provide:Oi,useFactory:function(){return`${Bg()}${Bg()}${Bg()}`},deps:[]};function Bg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zv=new Vn("Platform Initializer"),Ug=new Vn("Platform ID"),Wv=new Vn("appBootstrapListener");let qv=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const Gd=new Vn("LocaleId"),XC=new Vn("DefaultCurrencyCode");class Zv{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let jg=(()=>{class o{compileModuleSync(l){return new Nv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=ko(bn(l).declarations).reduce((v,E)=>{const I=gt(E);return I&&v.push(new xv(I)),v},[]);return new Zv(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const Hg=(()=>Promise.resolve(0))();function tp(o){"undefined"==typeof Zone?Hg.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class es{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hl(!1),this.onMicrotaskEmpty=new hl(!1),this.onStable=new hl(!1),this.onError=new hl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let o=St.requestAnimationFrame,a=St.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(St,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Jv(o),o.isCheckStableRunning=!0,Yv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Jv(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,g,v,E)=>{try{return tI(o),l.invokeTask(f,g,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),vi(o)}},onInvoke:(l,d,f,g,v,E,I)=>{try{return tI(o),l.invoke(f,g,v,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),vi(o)}},onHasTask:(l,d,f,g)=>{l.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Jv(o),Yv(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(es.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,zM,Xf,Xf);try{return g.runTask(v,l,d)}finally{g.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const zM={};function Yv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Jv(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function tI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function vi(o){o._nesting--,Yv(o)}class np{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hl,this.onMicrotaskEmpty=new hl,this.onStable=new hl,this.onError=new hl}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let nI=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),tp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tp(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(G(es))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})(),$d=(()=>{class o{constructor(){this._applications=new Map,zd.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return zd.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();class WM{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function qM(o){zd=o}let bs,zd=new WM;const Gg=new Vn("AllowMultipleToken");class rI{constructor(a,l){this.name=a,this.token=l}}function sI(o,a,l=[]){const d=`Platform: ${a}`,f=new Vn(d);return(g=[])=>{let v=$g();if(!v||v.injector.get(Gg,!1))if(o)o(l.concat(g).concat({provide:f,useValue:!0}));else{const E=l.concat(g).concat({provide:f,useValue:!0},{provide:Ww,useValue:"platform"});!function(o){if(bs&&!bs.destroyed&&!bs.injector.get(Gg,!1))throw new $e("400","");bs=o.get(nb);const a=o.get(zv,null);a&&a.forEach(l=>l())}(Ro.create({providers:E,name:d}))}return function(o){const a=$g();if(!a)throw new $e("401","");return a}()}}function $g(){return bs&&!bs.destroyed?bs:null}let nb=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function(o,a){let l;return l="noop"===o?new np:("zone.js"===o?void 0:o)||new es({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:es,useValue:E}];return E.run(()=>{const A=Ro.create({providers:I,parent:this.injector,name:l.moduleType.name}),x=l.create(A),V=x.injector.get(rf,null);if(!V)throw new $e("402","");return E.runOutsideAngular(()=>{const Z=E.onError.subscribe({next:te=>{V.handleError(te)}});x.onDestroy(()=>{Vr(this._modules,x),Z.unsubscribe()})}),function(o,a,l){try{const d=l();return cl(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(V,E,()=>{const Z=x.injector.get(Ac);return Z.runInitializers(),Z.donePromise.then(()=>(function(o){Kt(o,"Expected localeId to be defined"),"string"==typeof o&&(wv=o.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Gd,vg)||vg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(l,d=[]){const f=zg({},d);return function(o,a,l){const d=new Nv(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const d=l.injector.get(Mc);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new $e("403","");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(G(Ro))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();function zg(o,a){return Array.isArray(a)?a.reduce(zg,o):ut(ut({},o),a)}let Mc=(()=>{class o{constructor(l,d,f,g,v){this._zone=l,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{es.assertNotInAngularZone(),tp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),V.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,he.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new $e("405","");let f;f=l instanceof Tv?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Ld),E=f.create(Ro.NULL,[],d||f.selector,g),I=E.location.nativeElement,A=E.injector.get(nI,null),x=A&&E.injector.get($d);return A&&x&&x.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Vr(this.components,E),x&&x.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new $e("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Vr(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Wv,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(G(es),G(Ro),G(rf),G(Pd),G(Ac))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();function Vr(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let qg=!0,aI=!1;function YM(){return aI=!0,qg}function lI(){if(aI)throw new Error("Cannot enable prod mode after platform setup.");qg=!1}let ib=(()=>{class o{}return o.__NG_ELEMENT_ID__=QM,o})();function QM(o){return function(o,a,l){if(qn(o)&&!l){const d=pn(o.index,a);return new Yf(d,d)}return 47&o.type?new Yf(a[16],a):null}(Zn(),Re(),16==(16&o))}class sp{constructor(){}supports(a){return qm(a)}create(a){return new pb(a)}}const fI=(o,a)=>a;class pb{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||fI}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,g=null;for(;l||d;){const v=!d||l&&l.currentIndex<Jg(d,f,g)?l:d,E=Jg(v,f,g),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const A=E-f,x=I-f;if(A!=x){for(let Z=0;Z<A;Z++){const te=Z<g.length?g[Z]:g[Z]=0,_e=te+Z;x<=_e&&_e<A&&(g[Z]=te+1)}g[v.previousIndex]=x-A}}E!==I&&a(v,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!qm(a))throw new Error(`Error trying to diff '${ue(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),d=!0),l=l._next}else f=0,function(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[bf()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{v=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,E,v,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new pI(l,d),g,f),a}_verifyReinsertion(a,l,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new qd),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qd),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class pI{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class qd{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new mI,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jg(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class Xg{constructor(){}supports(a){return a instanceof Map||Zm(a)}create(){return new mb}}class mb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Zm(a)))throw new Error(`Error trying to diff '${ue(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new e_(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class e_{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zd(){return new op([new sp])}let op=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Zd()),deps:[[o,new _i,new mn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(o){return o.name||typeof o}(l)}'`)}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:Zd}),o})();function t_(){return new xc([new Xg])}let xc=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||t_()),deps:[[o,new _i,new mn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:t_}),o})();const gb=[new Xg],_I=new op([new sp]),yI=new xc(gb),ap=sI(null,"core",[{provide:Ug,useValue:"unknown"},{provide:nb,deps:[Ro]},{provide:$d,deps:[]},{provide:qv,deps:[]}]),_b=[{provide:Mc,useClass:Mc,deps:[es,Ro,rf,Pd,Ac]},{provide:kC,deps:[es],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:Ac,useClass:Ac,deps:[[new mn,Hd]]},{provide:jg,useClass:jg,deps:[]},Xi,{provide:op,useFactory:function(){return _I},deps:[]},{provide:xc,useFactory:function(){return yI},deps:[]},{provide:Gd,useFactory:function(o){return o||"undefined"!=typeof $localize&&$localize.locale||vg},deps:[[new _r(Gd),new mn,new _i]]},{provide:XC,useValue:"USD"}];let yb=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(G(Mc))},o.\u0275mod=J({type:o}),o.\u0275inj=Bn({providers:_b}),o})()},6293:(it,Ce,P)=>{P.d(Ce,{Z:()=>$e});var c=P(4213),j=P(1177),O=P(1572),oe=P(3855);class he{constructor(Ue,se){this._delegate=Ue,this.firebase=se,(0,O._addComponent)(Ue,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ue,se=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(Ue);return!Be.isInitialized()&&"EXPLICIT"===(null===(De=Be.getComponent())||void 0===De?void 0:De.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:se})}_removeServiceInstance(Ue,se=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(se)}_addComponent(Ue){(0,O._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,O._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const ze=function(ze){const Ue={},se={__esModule:!0,initializeApp:function(Je,Ie={}){const K=O.initializeApp(Je,Ie);if((0,c.r3)(Ue,K.name))return Ue[K.name];const ne=new ze(K,se);return Ue[K.name]=ne,ne},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(Je){const Ie=Je.name,K=Ie.replace("-compat","");if(O._registerComponent(Je)&&"PUBLIC"===Je.type){const ne=(fe=Be())=>{if("function"!=typeof fe[K])throw ie.create("invalid-app-argument",{appName:Ie});return fe[K]()};void 0!==Je.serviceProps&&(0,c.ZB)(ne,Je.serviceProps),se[K]=ne,ze.prototype[K]=function(...fe){return this._getService.bind(this,Ie).apply(this,Je.multipleInstances?fe:[])}}return"PUBLIC"===Je.type?se[K]:null},removeApp:function(Je){delete Ue[Je]},useAsService:function(Je,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:O}};function Be(Je){if(!(0,c.r3)(Ue,Je=Je||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Je});return Ue[Je]}return se.default=se,Object.defineProperty(se,"apps",{get:function(){return Object.keys(Ue).map(Je=>Ue[Je])}}),Be.App=ze,se}(he);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function(se){(0,c.ZB)(ze,se)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),ze}(),q=new oe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=z;(0,O.registerVersion)("@firebase/app-compat","0.1.25",undefined)},1572:(it,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Jr,_DEFAULT_ENTRY_NAME:()=>Et,_addComponent:()=>br,_addOrOverwriteComponent:()=>Yr,_apps:()=>Pt,_clearComponents:()=>Qr,_components:()=>dn,_getProvider:()=>Ds,_registerComponent:()=>nn,_removeServiceInstance:()=>Bn,deleteApp:()=>wr,getApp:()=>Oe,getApps:()=>ar,initializeApp:()=>Xr,onLog:()=>Fn,registerVersion:()=>en,setLogLevel:()=>lr});var c=P(8239),j=P(1177),O=P(3855),oe=P(4213),he=P(5600);class we{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function($){const re=$.getComponent();return"VERSION"===(null==re?void 0:re.type)}(ke)){const rt=ke.getImmediate();return`${rt.library}/${rt.version}`}return null}).filter(ke=>ke).join(" ")}}const ue="@firebase/app",z=new O.Yd("@firebase/app"),Et="[DEFAULT]",Kt={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pt=new Map,dn=new Map;function br($,re){try{$.container.addComponent(re)}catch(ke){z.debug(`Component ${re.name} failed to register with FirebaseApp ${$.name}`,ke)}}function Yr($,re){$.container.addOrOverwriteComponent(re)}function nn($){const re=$.name;if(dn.has(re))return z.debug(`There were multiple attempts to register component ${re}.`),!1;dn.set(re,$);for(const ke of Pt.values())br(ke,$);return!0}function Ds($,re){const ke=$.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),$.container.getProvider(re)}function Bn($,re,ke=Et){Ds($,re).clearInstance(ke)}function Qr(){dn.clear()}const yn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class zs{constructor(re,ke,rt){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=rt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const Jr="9.8.1";function Xr($,re={}){"object"!=typeof re&&(re={name:re});const ke=Object.assign({name:Et,automaticDataCollectionEnabled:!1},re),rt=ke.name;if("string"!=typeof rt||!rt)throw yn.create("bad-app-name",{appName:String(rt)});const Mt=Pt.get(rt);if(Mt){if((0,oe.vZ)($,Mt.options)&&(0,oe.vZ)(ke,Mt.config))return Mt;throw yn.create("duplicate-app",{appName:rt})}const Rt=new j.H0(rt);for(const Nt of dn.values())Rt.addComponent(Nt);const Mn=new zs($,ke,Rt);return Pt.set(rt,Mn),Mn}function Oe($=Et){const re=Pt.get($);if(!re)throw yn.create("no-app",{appName:$});return re}function ar(){return Array.from(Pt.values())}function wr($){return vt.apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*($){const re=$.name;Pt.has(re)&&(Pt.delete(re),yield Promise.all($.container.getProviders().map(ke=>ke.delete())),$.isDeleted=!0)})).apply(this,arguments)}function en($,re,ke){var rt;let Mt=null!==(rt=Kt[$])&&void 0!==rt?rt:$;ke&&(Mt+=`-${ke}`);const Rt=Mt.match(/\s|\//),Mn=re.match(/\s|\//);if(Rt||Mn){const Nt=[`Unable to register library "${Mt}" with version "${re}":`];return Rt&&Nt.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Rt&&Mn&&Nt.push("and"),Mn&&Nt.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void z.warn(Nt.join(" "))}nn(new j.wA(`${Mt}-version`,()=>({library:Mt,version:re}),"VERSION"))}function Fn($,re){if(null!==$&&"function"!=typeof $)throw yn.create("invalid-log-argument");(0,O.Am)($,re)}function lr($){(0,O.Ub)($)}const $n="firebase-heartbeat-store";let vn=null;function mo(){return vn||(vn=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:($,re)=>{0===re&&$.createObjectStore($n)}}).catch($=>{throw yn.create("storage-open",{originalErrorMessage:$.message})})),vn}function at(){return(at=(0,c.Z)(function*($){try{return(yield mo()).transaction($n).objectStore($n).get(fi($))}catch(re){throw yn.create("storage-get",{originalErrorMessage:re.message})}})).apply(this,arguments)}function pt($,re){return ss.apply(this,arguments)}function ss(){return(ss=(0,c.Z)(function*($,re){try{const rt=(yield mo()).transaction($n,"readwrite");return yield rt.objectStore($n).put(re,fi($)),rt.done}catch(ke){throw yn.create("storage-set",{originalErrorMessage:ke.message})}})).apply(this,arguments)}function fi($){return`${$.name}!${$.options.appId}`}class pr{constructor(re){this.container=re,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new H(ke),this._heartbeatsCachePromise=this._storage.read().then(rt=>(this._heartbeatsCache=rt,rt))}triggerHeartbeat(){var re=this;return(0,c.Z)(function*(){const rt=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=tr();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!re._heartbeatsCache.heartbeats.some(Rt=>Rt.date===Mt))return re._heartbeatsCache.heartbeats.push({date:Mt,agent:rt}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(Rt=>{const Mn=new Date(Rt.date).valueOf();return Date.now()-Mn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,c.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const ke=tr(),{heartbeatsToSend:rt,unsentEntries:Mt}=function($,re=1024){const ke=[];let rt=$.slice();for(const Mt of $){const Rt=ke.find(Mn=>Mn.agent===Mt.agent);if(Rt){if(Rt.dates.push(Mt.date),Q(ke)>re){Rt.dates.pop();break}}else if(ke.push({agent:Mt.agent,dates:[Mt.date]}),Q(ke)>re){ke.pop();break}rt=rt.slice(1)}return{heartbeatsToSend:ke,unsentEntries:rt}}(re._heartbeatsCache.heartbeats),Rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:rt}));return re._heartbeatsCache.lastSentHeartbeatDate=ke,Mt.length>0?(re._heartbeatsCache.heartbeats=Mt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),Rt})()}}function tr(){return(new Date).toISOString().substring(0,10)}class H{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,c.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function($){return at.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var ke=this;return(0,c.Z)(function*(){var rt;if(yield ke._canUseIndexedDBPromise){const Rt=yield ke.read();return pt(ke.app,{lastSentHeartbeatDate:null!==(rt=re.lastSentHeartbeatDate)&&void 0!==rt?rt:Rt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var ke=this;return(0,c.Z)(function*(){var rt;if(yield ke._canUseIndexedDBPromise){const Rt=yield ke.read();return pt(ke.app,{lastSentHeartbeatDate:null!==(rt=re.lastSentHeartbeatDate)&&void 0!==rt?rt:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...re.heartbeats]})}})()}}function Q($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}nn(new j.wA("platform-logger",re=>new we(re),"PRIVATE")),nn(new j.wA("heartbeat",re=>new pr(re),"PRIVATE")),en(ue,"0.7.24",""),en(ue,"0.7.24","esm2017"),en("fire-js","")},1177:(it,Ce,P)=>{P.d(Ce,{wA:()=>O,H0:()=>ue,zt:()=>he});var c=P(8239),j=P(4213);class O{constructor(z,q,ae){this.name=z,this.instanceFactory=q,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const oe="[DEFAULT]";class he{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ae=new j.BH;if(this.instancesDeferred.set(q,ae),this.isInitialized(q)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:q});We&&ae.resolve(We)}catch(We){}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ae=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),We=null!==(q=null==z?void 0:z.optional)&&void 0!==q&&q;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if("EAGER"===z.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:oe})}catch(q){}for(const[q,ae]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(q);try{const xe=this.getOrInitializeService({instanceIdentifier:We});ae.resolve(xe)}catch(xe){}}}}clearInstance(z=oe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,c.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...q.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=oe){return this.instances.has(z)}getOptions(z=oe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ae=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ae,options:q});for(const[xe,$e]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(xe)&&$e.resolve(We);return We}onInit(z,q){var ae;const We=this.normalizeInstanceIdentifier(q),xe=null!==(ae=this.onInitCallbacks.get(We))&&void 0!==ae?ae:new Set;xe.add(z),this.onInitCallbacks.set(We,xe);const $e=this.instances.get(We);return $e&&z($e,We),()=>{xe.delete(z)}}invokeOnInitCallbacks(z,q){const ae=this.onInitCallbacks.get(q);if(ae)for(const We of ae)try{We(z,q)}catch(xe){}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ae=this.instances.get(z);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===oe?void 0:ge),options:q}),this.instances.set(z,ae),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ae,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ae)}catch(We){}var ge;return ae||null}normalizeInstanceIdentifier(z=oe){return this.component?this.component.multipleInstances?z:oe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new he(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},3855:(it,Ce,P)=>{P.d(Ce,{in:()=>j,Yd:()=>ie,Ub:()=>ue,Am:()=>ge});const c=[];var j=(()=>{return(z=j||(j={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",j;var z})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},oe=j.INFO,he={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},we=(z,q,...ae)=>{if(q<z.logLevel)return;const We=(new Date).toISOString(),xe=he[q];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[xe](`[${We}]  ${z.name}:`,...ae)};class ie{constructor(q){this.name=q,this._logLevel=oe,this._logHandler=we,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in j))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?O[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...q),this._logHandler(this,j.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...q),this._logHandler(this,j.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,j.INFO,...q),this._logHandler(this,j.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,j.WARN,...q),this._logHandler(this,j.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...q),this._logHandler(this,j.ERROR,...q)}}function ue(z){c.forEach(q=>{q.setLogLevel(z)})}function ge(z,q){for(const ae of c){let We=null;q&&q.level&&(We=O[q.level]),ae.userLogHandler=null===z?null:(xe,$e,...ze)=>{const Ue=ze.map(se=>{if(null==se)return null;if("string"==typeof se)return se;if("number"==typeof se||"boolean"==typeof se)return se.toString();if(se instanceof Error)return se.message;try{return JSON.stringify(se)}catch(De){return null}}).filter(se=>se).join(" ");$e>=(null!=We?We:xe.logLevel)&&z({level:j[$e].toLowerCase(),message:Ue,args:ze,type:xe.name})}}}},5600:(it,Ce,P)=>{P.d(Ce,{Lj:()=>je,X3:()=>Be});var c=P(8239);let O,oe;const ie=new WeakMap,ue=new WeakMap,ge=new WeakMap,z=new WeakMap,q=new WeakMap;let xe={get(Ie,K,ne){if(Ie instanceof IDBTransaction){if("done"===K)return ue.get(Ie);if("objectStoreNames"===K)return Ie.objectStoreNames||ge.get(Ie);if("store"===K)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return se(Ie[K])},set:(Ie,K,ne)=>(Ie[K]=ne,!0),has:(Ie,K)=>Ie instanceof IDBTransaction&&("done"===K||"store"===K)||K in Ie};function Ue(Ie){return"function"==typeof Ie?function(Ie){return Ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Ie)?function(...K){return Ie.apply(De(this),K),se(ie.get(this))}:function(...K){return se(Ie.apply(De(this),K))}:function(K,...ne){const fe=Ie.call(De(this),K,...ne);return ge.set(fe,K.sort?K.sort():[K]),se(fe)}}(Ie):(Ie instanceof IDBTransaction&&function(Ie){if(ue.has(Ie))return;const K=new Promise((ne,fe)=>{const ye=()=>{Ie.removeEventListener("complete",Ne),Ie.removeEventListener("error",ce),Ie.removeEventListener("abort",ce)},Ne=()=>{ne(),ye()},ce=()=>{fe(Ie.error||new DOMException("AbortError","AbortError")),ye()};Ie.addEventListener("complete",Ne),Ie.addEventListener("error",ce),Ie.addEventListener("abort",ce)});ue.set(Ie,K)}(Ie),((Ie,K)=>K.some(ne=>Ie instanceof ne))(Ie,O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Ie,xe):Ie)}function se(Ie){if(Ie instanceof IDBRequest)return function(Ie){const K=new Promise((ne,fe)=>{const ye=()=>{Ie.removeEventListener("success",Ne),Ie.removeEventListener("error",ce)},Ne=()=>{ne(se(Ie.result)),ye()},ce=()=>{fe(Ie.error),ye()};Ie.addEventListener("success",Ne),Ie.addEventListener("error",ce)});return K.then(ne=>{ne instanceof IDBCursor&&ie.set(ne,Ie)}).catch(()=>{}),q.set(K,Ie),K}(Ie);if(z.has(Ie))return z.get(Ie);const K=Ue(Ie);return K!==Ie&&(z.set(Ie,K),q.set(K,Ie)),K}const De=Ie=>q.get(Ie);function Be(Ie,K,{blocked:ne,upgrade:fe,blocking:ye,terminated:Ne}={}){const ce=indexedDB.open(Ie,K),wt=se(ce);return fe&&ce.addEventListener("upgradeneeded",zt=>{fe(se(ce.result),zt.oldVersion,zt.newVersion,se(ce.transaction))}),ne&&ce.addEventListener("blocked",()=>ne()),wt.then(zt=>{Ne&&zt.addEventListener("close",()=>Ne()),ye&&zt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),wt}function je(Ie,{blocked:K}={}){const ne=indexedDB.deleteDatabase(Ie);return K&&ne.addEventListener("blocked",()=>K()),se(ne).then(()=>{})}const ct=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],Ze=new Map;function Je(Ie,K){if(!(Ie instanceof IDBDatabase)||K in Ie||"string"!=typeof K)return;if(Ze.get(K))return Ze.get(K);const ne=K.replace(/FromIndex$/,""),fe=K!==ne,ye=Fe.includes(ne);if(!(ne in(fe?IDBIndex:IDBObjectStore).prototype)||!ye&&!ct.includes(ne))return;const Ne=function(){var ce=(0,c.Z)(function*(wt,...zt){const er=this.transaction(wt,ye?"readwrite":"readonly");let Et=er.store;return fe&&(Et=Et.index(zt.shift())),(yield Promise.all([Et[ne](...zt),ye&&er.done]))[0]});return function(zt){return ce.apply(this,arguments)}}();return Ze.set(K,Ne),Ne}var Ie;xe=Ei(ut({},Ie=xe),{get:(K,ne,fe)=>Je(K,ne)||Ie.get(K,ne,fe),has:(K,ne)=>!!Je(K,ne)||Ie.has(K,ne)})},8239:(it,Ce,P)=>{function c(O,oe,he,we,ie,ue,ge){try{var z=O[ue](ge),q=z.value}catch(ae){return void he(ae)}z.done?oe(q):Promise.resolve(q).then(we,ie)}function j(O){return function(){var oe=this,he=arguments;return new Promise(function(we,ie){var ue=O.apply(oe,he);function ge(q){c(ue,we,ie,ge,z,"next",q)}function z(q){c(ue,we,ie,ge,z,"throw",q)}ge(void 0)})}}P.d(Ce,{Z:()=>j})}},it=>{it(it.s=2458)}]);