"use strict";var F9=Object.defineProperty,L9=Object.defineProperties,V9=Object.getOwnPropertyDescriptors,oG=Object.getOwnPropertySymbols,B9=Object.prototype.hasOwnProperty,U9=Object.prototype.propertyIsEnumerable,aG=(st,Ce,P)=>Ce in st?F9(st,Ce,{enumerable:!0,configurable:!0,writable:!0,value:P}):st[Ce]=P,nt=(st,Ce)=>{for(var P in Ce||(Ce={}))B9.call(Ce,P)&&aG(st,P,Ce[P]);if(oG)for(var P of oG(Ce))U9.call(Ce,P)&&aG(st,P,Ce[P]);return st},mi=(st,Ce)=>L9(st,V9(Ce));(self.webpackChunkfoodTrackingApp=self.webpackChunkfoodTrackingApp||[]).push([[179],{7905:(st,Ce,P)=>{P.d(Ce,{hO:()=>We,xv:()=>ge,Dh:()=>ce,GT:()=>we,cc:()=>xe,on:()=>z,pX:()=>he});var u=P(3668),j=P(7892),N=P(7233);st=P.hmd(st);const oe=["ngOnDestroy"],he=(se,Se,Be,je={})=>new Proxy(se,{get:(ut,Fe)=>Be.runOutsideAngular(()=>{var Ze;if(se[Fe])return(null===(Ze=null==je?void 0:je.spy)||void 0===Ze?void 0:Ze.get)&&je.spy.get(Fe,se[Fe]),se[Fe];if(oe.indexOf(Fe)>-1)return()=>{};const Xe=Se.toPromise().then(Ie=>{const K=Ie&&Ie[Fe];return"function"==typeof K?K.bind(Ie):K&&K.then?K.then(ne=>Be.run(()=>ne)):Be.run(()=>K)});return new Proxy(()=>{},{get:(Ie,K)=>Xe[K],apply:(Ie,K,ne)=>Xe.then(fe=>{var ve;const Oe=fe&&fe(...ne);return(null===(ve=null==je?void 0:je.spy)||void 0===ve?void 0:ve.apply)&&je.spy.apply(Fe,ne,Oe),Oe})})})}),we=(se,Se)=>{Se.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(je=>{Object.defineProperty(se.prototype,je,Object.getOwnPropertyDescriptor(Be.prototype||Be,je))})})};class re{constructor(Se){return Se}}const ce=new u.OlP("angularfire2.app.options"),ge=new u.OlP("angularfire2.app.name");function z(se,Se,Be){const ut="object"==typeof Be&&Be||{};ut.name=ut.name||"string"==typeof Be&&Be||"[DEFAULT]";const Ze=j.Z.apps.filter(Xe=>Xe&&Xe.name===ut.name)[0]||Se.runOutsideAngular(()=>j.Z.initializeApp(se,ut));try{JSON.stringify(se)!==JSON.stringify(Ze.options)&&q("error",`${Ze.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Xe){}return new re(Ze)}const q=(se,...Se)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[se](...Se)},ae={provide:re,useFactory:z,deps:[ce,u.R0b,[new u.FiY,ge]]};let We=(()=>{class se{constructor(Be){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",u.q4F.full,Be.toString())}static initializeApp(Be,je){return{ngModule:se,providers:[{provide:ce,useValue:Be},{provide:ge,useValue:je}]}}}return se.\u0275fac=function(Be){return new(Be||se)(u.LFG(u.Lbi))},se.\u0275mod=u.oAB({type:se}),se.\u0275inj=u.cJS({providers:[ae]}),se})();function xe(se,Se,Be,je,ut){const[,Fe,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===se)||[];if(Fe)return function(se,Se){try{return se.toString()===Se.toString()}catch(Be){return se===Se}}(ut,Ze)||(Ue("error",`${Se} was already initialized on the ${Be} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:ut,was:Ze})),Fe;{const Xe=je();return globalThis.\u0275AngularfireInstanceCache.push([se,Xe,ut]),Xe}}const ze=!!st.hot,Ue=(se,...Se)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[se](...Se)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(st,Ce,P)=>{P.d(Ce,{q4:()=>Wh,iC:()=>el,HU:()=>tc,vb:()=>Ji,JM:()=>Kh,u3:()=>cd});var u=P(3668),j=P(7713),N=P(8239),oe=P(1572),he=P(4213),we=P(1177),re=P(3855),ce=P(5600);const ge="@firebase/installations",z="0.5.9",ae=`w:${z}`,We="FIS_v2",Se=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(T){return T instanceof he.ZR&&T.code.includes("request-failed")}function je({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function ut(T){return{token:T.token,requestStatus:2,expiresIn:fe(T.expiresIn),creationTime:Date.now()}}function Fe(T,D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,N.Z)(function*(T,D){const U=(yield D.json()).error;return Se.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Xe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ie(T,{refreshToken:D}){const R=Xe(T);return R.append("Authorization",function(T){return`${We} ${T}`}(D)),R}function K(T){return ne.apply(this,arguments)}function ne(){return(ne=(0,N.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function fe(T){return Number(T.replace("s","000"))}function Oe(T,D){return ue.apply(this,arguments)}function ue(){return(ue=(0,N.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:R}){const U=je(T),G=Xe(T),le=D.getImmediate({optional:!0});if(le){const Pt=yield le.getHeartbeatsHeader();Pt&&G.append("x-firebase-client",Pt)}const tt={method:"POST",headers:G,body:JSON.stringify({fid:R,authVersion:We,appId:T.appId,sdkVersion:ae})},St=yield K(()=>fetch(U,tt));if(St.ok){const Pt=yield St.json();return{fid:Pt.fid||R,registrationStatus:2,refreshToken:Pt.refreshToken,authToken:ut(Pt.authToken)}}throw yield Fe("Create Installation",St)})).apply(this,arguments)}function Et(T){return new Promise(D=>{setTimeout(D,T)})}const er=/^[cdef][\w-]{21}$/;function Kt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return er.test(R)?R:""}catch(T){return""}}function dn(T){return`${T.appName}!${T.appId}`}const Er=new Map;function Xr(T,D){const R=dn(T);Un(R,D),function(T,D){const R=(!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=T=>{Un(T.data.key,T.data.fid)}),_n);R&&R.postMessage({key:T,fid:D}),0===Er.size&&_n&&(_n.close(),_n=null)}(R,D)}function Un(T,D){const R=Er.get(T);if(R)for(const U of R)U(D)}let _n=null;const Ne="firebase-installations-store";let ar=null;function Cr(){return ar||(ar=(0,ce.X3)("firebase-installations-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Ne)}})),ar}function bt(T,D){return en.apply(this,arguments)}function en(){return(en=(0,N.Z)(function*(T,D){const R=dn(T),G=(yield Cr()).transaction(Ne,"readwrite"),le=G.objectStore(Ne),Le=yield le.get(R);return yield le.put(D,R),yield G.done,(!Le||Le.fid!==D.fid)&&Xr(T,D.fid),D})).apply(this,arguments)}function Fn(T){return lr.apply(this,arguments)}function lr(){return(lr=(0,N.Z)(function*(T){const D=dn(T),U=(yield Cr()).transaction(Ne,"readwrite");yield U.objectStore(Ne).delete(D),yield U.done})).apply(this,arguments)}function cr(T,D){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(T,D){const R=dn(T),G=(yield Cr()).transaction(Ne,"readwrite"),le=G.objectStore(Ne),Le=yield le.get(R),tt=D(Le);return void 0===tt?yield le.delete(R):yield le.put(tt,R),yield G.done,tt&&(!Le||Le.fid!==tt.fid)&&Xr(T,tt.fid),tt})).apply(this,arguments)}function Wn(T){return vn.apply(this,arguments)}function vn(){return(vn=(0,N.Z)(function*(T){let D;const R=yield cr(T.appConfig,U=>{const G=_o(U),le=hn(T,G);return D=le.registrationPromise,le.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function _o(T){return At(T||{fid:Kt(),registrationStatus:0})}function hn(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Se.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function(T,D){return pt.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:ls(T)}:{installationEntry:D}}function pt(){return(pt=(0,N.Z)(function*(T,D){try{const R=yield Oe(T,D);return bt(T.appConfig,R)}catch(R){throw Be(R)&&409===R.customData.serverCode?yield Fn(T.appConfig):yield bt(T.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function ls(T){return gi.apply(this,arguments)}function gi(){return(gi=(0,N.Z)(function*(T){let D=yield rn(T.appConfig);for(;1===D.registrationStatus;)yield Et(100),D=yield rn(T.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Wn(T);return U||R}return D})).apply(this,arguments)}function rn(T){return cr(T,D=>{if(!D)throw Se.create("installation-not-found");return At(D)})}function At(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function tr(T,D){return W.apply(this,arguments)}function W(){return(W=(0,N.Z)(function*({appConfig:T,heartbeatServiceProvider:D},R){const U=H(T,R),G=Ie(T,R),le=D.getImmediate({optional:!0});if(le){const Pt=yield le.getHeartbeatsHeader();Pt&&G.append("x-firebase-client",Pt)}const tt={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:ae,appId:T.appId}})},St=yield K(()=>fetch(U,tt));if(St.ok)return ut(yield St.json());throw yield Fe("Generate Auth Token",St)})).apply(this,arguments)}function H(T,{fid:D}){return`${je(T)}/${D}/authTokens:generate`}function Q(T){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(T,D=!1){let R;const U=yield cr(T.appConfig,le=>{if(!Ot(le))throw Se.create("not-registered");const Le=le.authToken;if(!D&&Mn(Le))return le;if(1===Le.requestStatus)return R=$(T,D),le;{if(!navigator.onLine)throw Se.create("app-offline");const tt=Ir(le);return R=it(T,tt),tt}});return R?yield R:U.authToken})).apply(this,arguments)}function $(T,D){return ie.apply(this,arguments)}function ie(){return(ie=(0,N.Z)(function*(T,D){let R=yield ke(T.appConfig);for(;1===R.authToken.requestStatus;)yield Et(100),R=yield ke(T.appConfig);const U=R.authToken;return 0===U.requestStatus?Q(T,D):U})).apply(this,arguments)}function ke(T){return cr(T,D=>{if(!Ot(D))throw Se.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function it(T,D){return xt.apply(this,arguments)}function xt(){return(xt=(0,N.Z)(function*(T,D){try{const R=yield tr(T,D),U=Object.assign(Object.assign({},D),{authToken:R});return yield bt(T.appConfig,U),R}catch(R){if(!Be(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield bt(T.appConfig,U)}else yield Fn(T.appConfig);throw R}})).apply(this,arguments)}function Ot(T){return void 0!==T&&2===T.registrationStatus}function Mn(T){return 2===T.requestStatus&&!function(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function Ir(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function Y(){return(Y=(0,N.Z)(function*(T){const D=T,{installationEntry:R,registrationPromise:U}=yield Wn(D);return U?U.catch(console.error):Q(D).catch(console.error),R.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(T,D=!1){const R=T;return yield Bt(R),(yield Q(R,D)).token})).apply(this,arguments)}function Bt(T){return gt.apply(this,arguments)}function gt(){return(gt=(0,N.Z)(function*(T){const{registrationPromise:D}=yield Wn(T);D&&(yield D)})).apply(this,arguments)}function zi(T){return Se.create("missing-app-config-values",{valueName:T})}const _r="installations";(0,oe._registerComponent)(new we.wA(_r,T=>{const D=T.getProvider("app").getImmediate(),R=function(T){if(!T||!T.options)throw zi("App Configuration");if(!T.name)throw zi("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!T.options[R])throw zi(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,oe._registerComponent)(new we.wA("installations-internal",T=>{const D=T.getProvider("app").getImmediate(),R=(0,oe._getProvider)(D,_r).getImmediate();return{getId:()=>function(T){return Y.apply(this,arguments)}(R),getToken:G=>function(T){return Ke.apply(this,arguments)}(R,G)}},"PRIVATE")),(0,oe.registerVersion)(ge,z),(0,oe.registerVersion)(ge,z,"esm2017");const Dt="@firebase/remote-config",wn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zu{constructor(D,R,U,G){this.client=D,this.storage=R,this.storageCache=U,this.logger=G}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,G=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${G}.`),G}fetch(D){var R=this;return(0,N.Z)(function*(){const[U,G]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(G&&R.isCachedDataFresh(D.cacheMaxAgeMillis,U))return G;D.eTag=G&&G.eTag;const le=yield R.client.fetch(D),Le=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Le.push(R.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Le),le})()}}function iy(T=navigator){return T.languages&&T.languages[0]||T.language}class Ai{constructor(D,R,U,G,le,Le){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=U,this.projectId=G,this.apiKey=le,this.appId=Le}fetch(D){var R=this;return(0,N.Z)(function*(){const[U,G]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},St={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:G,app_id:R.appId,language_code:iy()},Pt={method:"POST",headers:tt,body:JSON.stringify(St)},sn=fetch(Le,Pt),Lt=new Promise((_s,qr)=>{D.signal.addEventListener(()=>{const fa=new Error("The operation was aborted.");fa.name="AbortError",qr(fa)})});let vr;try{yield Promise.race([sn,Lt]),vr=yield sn}catch(_s){let qr="fetch-client-network";throw"AbortError"===_s.name&&(qr="fetch-timeout"),wn.create(qr,{originalErrorMessage:_s.message})}let mn=vr.status;const ha=vr.headers.get("ETag")||void 0;let bi,Mo;if(200===vr.status){let _s;try{_s=yield vr.json()}catch(qr){throw wn.create("fetch-client-parse",{originalErrorMessage:qr.message})}bi=_s.entries,Mo=_s.state}if("INSTANCE_STATE_UNSPECIFIED"===Mo?mn=500:"NO_CHANGE"===Mo?mn=304:("NO_TEMPLATE"===Mo||"EMPTY_CONFIG"===Mo)&&(bi={}),304!==mn&&200!==mn)throw wn.create("fetch-status",{httpStatus:mn});return{status:mn,eTag:ha,config:bi}})()}}class Ph{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,N.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:U}){var G=this;return(0,N.Z)(function*(){yield function(T,D){return new Promise((R,U)=>{const G=Math.max(D-Date.now(),0),le=setTimeout(R,G);T.addEventListener(()=>{clearTimeout(le),U(wn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const le=yield G.client.fetch(D);return yield G.storage.deleteThrottleMetadata(),le}catch(le){if(!function(T){if(!(T instanceof he.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(le))throw le;const Le={throttleEndTimeMillis:Date.now()+(0,he.$s)(U),backoffCount:U+1};return yield G.storage.setThrottleMetadata(Le),G.attemptFetch(D,Le)}})()}}class Yu{constructor(D,R,U,G,le){this.app=D,this._client=R,this._storageCache=U,this._storage=G,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Uc(T,D){const R=T.target.error||void 0;return wn.create(D,{originalErrorMessage:R&&R.message})}const Ys="app_namespace_store";class Ju{constructor(D,R,U,G=function(){return new Promise((T,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{D(Uc(U,"storage-open"))},R.onsuccess=U=>{T(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Ys,{keyPath:"compositeKey"})}}catch(R){D(wn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=U,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((G,le)=>{const tt=U.transaction([Ys],"readonly").objectStore(Ys),St=R.createCompositeKey(D);try{const Pt=tt.get(St);Pt.onerror=sn=>{le(Uc(sn,"storage-get"))},Pt.onsuccess=sn=>{const Lt=sn.target.result;G(Lt?Lt.value:void 0)}}catch(Pt){le(wn.create("storage-get",{originalErrorMessage:Pt&&Pt.message}))}})})()}set(D,R){var U=this;return(0,N.Z)(function*(){const G=yield U.openDbPromise;return new Promise((le,Le)=>{const St=G.transaction([Ys],"readwrite").objectStore(Ys),Pt=U.createCompositeKey(D);try{const sn=St.put({compositeKey:Pt,value:R});sn.onerror=Lt=>{Le(Uc(Lt,"storage-set"))},sn.onsuccess=()=>{le()}}catch(sn){Le(wn.create("storage-set",{originalErrorMessage:sn&&sn.message}))}})})()}delete(D){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((G,le)=>{const tt=U.transaction([Ys],"readwrite").objectStore(Ys),St=R.createCompositeKey(D);try{const Pt=tt.delete(St);Pt.onerror=sn=>{le(Uc(sn,"storage-delete"))},Pt.onsuccess=()=>{G()}}catch(Pt){le(wn.create("storage-delete",{originalErrorMessage:Pt&&Pt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class pm{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const R=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),G=D.storage.getActiveConfig(),le=yield R;le&&(D.lastFetchStatus=le);const Le=yield U;Le&&(D.lastSuccessfulFetchTimestampMillis=Le);const tt=yield G;tt&&(D.activeConfig=tt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Hc(){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,N.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,oe._registerComponent)(new we.wA("remote-config",function(D,{instanceIdentifier:R}){const U=D.getProvider("app").getImmediate(),G=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw wn.create("registration-window");if(!(0,he.hl)())throw wn.create("indexed-db-unavailable");const{projectId:le,apiKey:Le,appId:tt}=U.options;if(!le)throw wn.create("registration-project-id");if(!Le)throw wn.create("registration-api-key");if(!tt)throw wn.create("registration-app-id");const St=new Ju(tt,U.name,R=R||"firebase"),Pt=new pm(St),sn=new re.Yd(Dt);sn.logLevel=re.in.ERROR;const Lt=new Ai(G,oe.SDK_VERSION,R,le,Le,tt),vr=new Ph(Lt,St),mn=new Zu(vr,St,Pt,sn),ha=new Yu(U,mn,Pt,St,sn);return function(T){const D=(0,he.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ha),ha},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Dt,"0.3.8"),(0,oe.registerVersion)(Dt,"0.3.8","esm2017");const mm="/firebase-messaging-sw.js",ed="/firebase-cloud-messaging-push-scope",Qs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zo="google.c.a.c_id",Sl="google.c.a.c_l",Dl="google.c.a.ts",Nr="google.c.a.e";var wo=(()=>{return(T=wo||(wo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",wo;var T})();function Tr(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gc(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),G=new Uint8Array(U.length);for(let le=0;le<U.length;++le)G[le]=U.charCodeAt(le);return G}const Eo="fcm_token_details_db",Ml="fcm_token_object_Store";function Lh(T){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,N.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Eo))return null;let D=null;return(yield(0,ce.X3)(Eo,5,{upgrade:(U=(0,N.Z)(function*(G,le,Le,tt){var St;if(le<2||!G.objectStoreNames.contains(Ml))return;const Pt=tt.objectStore(Ml),sn=yield Pt.index("fcmSenderId").get(T);if(yield Pt.clear(),sn)if(2===le){const Lt=sn;if(!Lt.auth||!Lt.p256dh||!Lt.endpoint)return;D={token:Lt.fcmToken,createTime:null!==(St=Lt.createTime)&&void 0!==St?St:Date.now(),subscriptionOptions:{auth:Lt.auth,p256dh:Lt.p256dh,endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:"string"==typeof Lt.vapidKey?Lt.vapidKey:Tr(Lt.vapidKey)}}}else if(3===le){const Lt=sn;D={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Tr(Lt.auth),p256dh:Tr(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Tr(Lt.vapidKey)}}}else if(4===le){const Lt=sn;D={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Tr(Lt.auth),p256dh:Tr(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Tr(Lt.vapidKey)}}}}),function(le,Le,tt,St){return U.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Eo),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),Vh(D)?D:null;var U}),Wo.apply(this,arguments)}function Vh(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const tn="firebase-messaging-store";let Wc=null;function xl(){return Wc||(Wc=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(tn)}})),Wc}function Ln(T){return kl.apply(this,arguments)}function kl(){return(kl=(0,N.Z)(function*(T){const D=qo(T),U=yield(yield xl()).transaction(tn).objectStore(tn).get(D);if(U)return U;{const G=yield Lh(T.appConfig.senderId);if(G)return yield Js(T,G),G}})).apply(this,arguments)}function Js(T,D){return ri.apply(this,arguments)}function ri(){return(ri=(0,N.Z)(function*(T,D){const R=qo(T),G=(yield xl()).transaction(tn,"readwrite");return yield G.objectStore(tn).put(D,R),yield G.done,D})).apply(this,arguments)}function ur(T){return Co.apply(this,arguments)}function Co(){return(Co=(0,N.Z)(function*(T){const D=qo(T),U=(yield xl()).transaction(tn,"readwrite");yield U.objectStore(tn).delete(D),yield U.done})).apply(this,arguments)}function qo({appConfig:T}){return T.appId}const pn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rl(T,D){return ds.apply(this,arguments)}function ds(){return(ds=(0,N.Z)(function*(T,D){const R=yield ii(T),U=Pl(D),G={method:"POST",headers:R,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(wt(T.appConfig),G)).json()}catch(Le){throw pn.create("token-subscribe-failed",{errorInfo:Le})}if(le.error)throw pn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw pn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function Ol(T,D){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,N.Z)(function*(T,D){const R=yield ii(T),U=Pl(D.subscriptionOptions),G={method:"PATCH",headers:R,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(`${wt(T.appConfig)}/${D.token}`,G)).json()}catch(Le){throw pn.create("token-update-failed",{errorInfo:Le})}if(le.error)throw pn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw pn.create("token-update-no-token");return le.token})).apply(this,arguments)}function Nl(T,D){return Io.apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(T,D){const U={method:"DELETE",headers:yield ii(T)};try{const le=yield(yield fetch(`${wt(T.appConfig)}/${D}`,U)).json();if(le.error)throw pn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(G){throw pn.create("token-unsubscribe-failed",{errorInfo:G})}})).apply(this,arguments)}function wt({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function ii(T){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,N.Z)(function*({appConfig:T,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Pl({p256dh:T,auth:D,endpoint:R,vapidKey:U}){const G={web:{endpoint:R,auth:D,p256dh:T}};return U!==Qs&&(G.web.applicationPubKey=U),G}const Fl=6048e5;function Yo(T){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,N.Z)(function*(T){const D=yield hs(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:Tr(D.getKey("auth")),p256dh:Tr(D.getKey("p256dh"))},U=yield Ln(T.firebaseDependencies);if(U){if($a(U.subscriptionOptions,R))return Date.now()>=U.createTime+Fl?Qt(T,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Nl(T.firebaseDependencies,U.token)}catch(G){console.warn(G)}return Yn(T.firebaseDependencies,R)}return Yn(T.firebaseDependencies,R)})).apply(this,arguments)}function qc(T){return Re.apply(this,arguments)}function Re(){return(Re=(0,N.Z)(function*(T){const D=yield Ln(T.firebaseDependencies);D&&(yield Nl(T.firebaseDependencies,D.token),yield ur(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Qt(T,D){return ks.apply(this,arguments)}function ks(){return(ks=(0,N.Z)(function*(T,D){try{const R=yield Ol(T.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield Js(T.firebaseDependencies,U),R}catch(R){throw yield qc(T),R}})).apply(this,arguments)}function Yn(T,D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(T,D){const U={token:yield Rl(T,D),createTime:Date.now(),subscriptionOptions:D};return yield Js(T,U),U.token})).apply(this,arguments)}function hs(T,D){return zr.apply(this,arguments)}function zr(){return(zr=(0,N.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gc(D)})})).apply(this,arguments)}function $a(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function Jo(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,D){if(!D.notification)return;T.notification={};const R=D.notification.title;R&&(T.notification.title=R);const U=D.notification.body;U&&(T.notification.body=U);const G=D.notification.image;G&&(T.notification.image=G)}(D,T),function(T,D){!D.data||(T.data=D.data)}(D,T),function(T,D){if(!D.fcmOptions)return;T.fcmOptions={};const R=D.fcmOptions.link;R&&(T.fcmOptions.link=R);const U=D.fcmOptions.analytics_label;U&&(T.fcmOptions.analyticsLabel=U)}(D,T),D}function ea(T){return"object"==typeof T&&!!T&&zo in T}function Sr(T,D){const R=[];for(let U=0;U<T.length;U++)R.push(T.charAt(U)),U<D.length&&R.push(D.charAt(U));return R.join("")}function To(T){return pn.create("missing-app-config-values",{valueName:T})}Sr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ta{constructor(D,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function(T){if(!T||!T.options)throw To("App Configuration Object");if(!T.name)throw To("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const U of D)if(!R[U])throw To(U);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:G,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Mi(T){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,N.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(mm,{scope:ed}),T.swRegistration.update().catch(()=>{})}catch(D){throw pn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Bl(T,D){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield Mi(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw pn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function Kc(T,D){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,N.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=Qs)})).apply(this,arguments)}function ra(){return(ra=(0,N.Z)(function*(T,D){if(!navigator)throw pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pn.create("permission-blocked");return yield Kc(T,null==D?void 0:D.vapidKey),yield Bl(T,null==D?void 0:D.serviceWorkerRegistration),Yo(T)})).apply(this,arguments)}function za(T,D,R){return jl.apply(this,arguments)}function jl(){return(jl=(0,N.Z)(function*(T,D,R){const U=nd(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[zo],message_name:R[Sl],message_time:R[Dl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nd(T){switch(T){case wo.NOTIFICATION_CLICKED:return"notification_open";case wo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Hl(){return(Hl=(0,N.Z)(function*(T,D){const R=D.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===wo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Jo(R)):T.onMessageHandler.next(Jo(R)));const U=R.data;ea(U)&&"1"===U[Nr]&&(yield za(T,R.messageType,U))})).apply(this,arguments)}const qa="@firebase/messaging";function Jc(){return jn.apply(this,arguments)}function jn(){return(jn=(0,N.Z)(function*(){try{yield(0,he.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,oe._registerComponent)(new we.wA("messaging",T=>{const D=new ta(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(T,D){return Hl.apply(this,arguments)}(D,R)),D},"PUBLIC")),(0,oe._registerComponent)(new we.wA("messaging-internal",T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:U=>function(T,D){return ra.apply(this,arguments)}(D,U)}},"PRIVATE")),(0,oe.registerVersion)(qa,"0.9.13"),(0,oe.registerVersion)(qa,"0.9.13","esm2017");const ia="analytics",sa="firebase_id",Bh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ql="https://www.googletagmanager.com/gtag/js",Qn=new re.Yd("@firebase/analytics");function So(T){return Promise.all(T.map(D=>D.catch(R=>R)))}function _m(T,D){const R=document.createElement("script");R.src=`${ql}?l=${T}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Za(T,D,R,U,G,le){return oa.apply(this,arguments)}function oa(){return(oa=(0,N.Z)(function*(T,D,R,U,G,le){const Le=U[G];try{if(Le)yield D[Le];else{const St=(yield So(R)).find(Pt=>Pt.measurementId===G);St&&(yield D[St.appId])}}catch(tt){Qn.error(tt)}T("config",G,le)})).apply(this,arguments)}function tu(T,D,R,U,G){return eo.apply(this,arguments)}function eo(){return(eo=(0,N.Z)(function*(T,D,R,U,G){try{let le=[];if(G&&G.send_to){let Le=G.send_to;Array.isArray(Le)||(Le=[Le]);const tt=yield So(R);for(const St of Le){const Pt=tt.find(Lt=>Lt.measurementId===St),sn=Pt&&D[Pt.appId];if(!sn){le=[];break}le.push(sn)}}0===le.length&&(le=Object.values(D)),yield Promise.all(le),T("event",U,G||{})}catch(le){Qn.error(le)}})).apply(this,arguments)}function xn(){const T=window.document.getElementsByTagName("script");for(const D of Object.values(T))if(D.src&&D.src.includes(ql))return D;return null}const et=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),aa=new class{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function vm(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ka(T){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,N.Z)(function*(T){var D;const{appId:R,apiKey:U}=T,G={method:"GET",headers:vm(U)},le=Bh.replace("{app-id}",R),Le=yield fetch(le,G);if(200!==Le.status&&304!==Le.status){let tt="";try{const St=yield Le.json();(null===(D=St.error)||void 0===D?void 0:D.message)&&(tt=St.error.message)}catch(St){}throw et.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:tt})}return Le.json()})).apply(this,arguments)}function Kl(T){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,N.Z)(function*(T,D=aa,R){const{appId:U,apiKey:G,measurementId:le}=T.options;if(!U)throw et.create("no-app-id");if(!G){if(le)return{measurementId:le,appId:U};throw et.create("no-api-key")}const Le=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Do;return setTimeout((0,N.Z)(function*(){tt.abort()}),void 0!==R?R:6e4),ms({appId:U,apiKey:G,measurementId:le},Le,tt,D)})).apply(this,arguments)}function ms(T,D,R){return Je.apply(this,arguments)}function Je(){return(Je=(0,N.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:R},U,G=aa){const{appId:le,measurementId:Le}=T;try{yield nu(U,D)}catch(tt){if(Le)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:le,measurementId:Le};throw tt}try{const tt=yield Ka(T);return G.deleteThrottleMetadata(le),tt}catch(tt){if(!jh(tt)){if(G.deleteThrottleMetadata(le),Le)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:le,measurementId:Le};throw tt}const St=503===Number(tt.customData.httpStatus)?(0,he.$s)(R,G.intervalMillis,30):(0,he.$s)(R,G.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+St,backoffCount:R+1};return G.setThrottleMetadata(le,Pt),Qn.debug(`Calling attemptFetch again in ${St} millis`),ms(T,Pt,U,G)}})).apply(this,arguments)}function nu(T,D){return new Promise((R,U)=>{const G=Math.max(D-Date.now(),0),le=setTimeout(R,G);T.addEventListener(()=>{clearTimeout(le),U(et.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function jh(T){if(!(T instanceof he.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Do{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Yl(){return kn.apply(this,arguments)}function kn(){return(kn=(0,N.Z)(function*(){if(!(0,he.hl)())return Qn.warn(et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(T){return Qn.warn(et.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Rs(){return(Rs=(0,N.Z)(function*(T,D,R,U,G,le,Le){var tt;const St=Kl(T);St.then(mn=>{R[mn.measurementId]=mn.appId,T.options.measurementId&&mn.measurementId!==T.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mn=>Qn.error(mn)),D.push(St);const Pt=Yl().then(mn=>{if(mn)return U.getId()}),[sn,Lt]=yield Promise.all([St,Pt]);xn()||_m(le,sn.measurementId),G("js",new Date);const vr=null!==(tt=null==Le?void 0:Le.config)&&void 0!==tt?tt:{};return vr.origin="firebase",vr.update=!0,null!=Lt&&(vr[sa]=Lt),G("config",sn.measurementId,vr),sn.measurementId})).apply(this,arguments)}class Hh{constructor(D){this.app=D}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},Ql=[];const ca={};let ua,Lr,no="dataLayer",Os=!1;function rr(T,D,R){!function(){const T=[];if((0,he.ru)()&&T.push("This is a browser extension environment."),(0,he.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((U,G)=>`(${G+1}) ${U}`).join(" "),R=et.create("invalid-analytics-context",{errorInfo:D});Qn.warn(R.message)}}();const U=T.options.appId;if(!U)throw et.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw et.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=si[U])throw et.create("already-exists",{id:U});if(!Os){!function(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(no);const{wrappedGtag:le,gtagCore:Le}=function(T,D,R,U,G){let le=function(...Le){window[U].push(arguments)};return window[G]&&"function"==typeof window[G]&&(le=window[G]),window[G]=function(T,D,R,U){function le(){return(le=(0,N.Z)(function*(Le,tt,St){try{"event"===Le?yield tu(T,D,R,tt,St):"config"===Le?yield Za(T,D,R,U,tt,St):T("set",tt)}catch(Pt){Qn.error(Pt)}})).apply(this,arguments)}return function(Le,tt,St){return le.apply(this,arguments)}}(le,T,D,R),{gtagCore:le,wrappedGtag:window[G]}}(si,Ql,ca,no,"gtag");Lr=le,ua=Le,Os=!0}return si[U]=function(T,D,R,U,G,le,Le){return Rs.apply(this,arguments)}(T,Ql,ca,D,ua,no,R),new Hh(T)}function Ya(){return(Ya=(0,N.Z)(function*(T,D,R,U,G){if(G&&G.global)T("event",R,U);else{const le=yield D;T("event",R,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function Bn(){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}const ld="@firebase/analytics";(0,oe._registerComponent)(new we.wA(ia,(D,{options:R})=>rr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,oe._registerComponent)(new we.wA("analytics-internal",function(D){try{const R=D.getProvider(ia).getImmediate();return{logEvent:(U,G,le)=>function(T,D,R,U){T=(0,he.m9)(T),function(T,D,R,U,G){return Ya.apply(this,arguments)}(Lr,si[T.app.options.appId],D,R,U).catch(G=>Qn.error(G))}(R,U,G,le)}}catch(R){throw et.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,oe.registerVersion)(ld,"0.7.9"),(0,oe.registerVersion)(ld,"0.7.9","esm2017");var Jn=P(2869),Xl=P(8843);const zh=new class extends Xl.v{}(class extends Jn.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,R,U):D.flush(this)}});var gs=P(2210),Qa=P(8305),Ja=P(7384),oo=P(5222),ec=P(4763);const Wh=new u.GfV("7.3.0"),iu="__angularfire_symbol__analyticsIsSupportedValue",Xa="__angularfire_symbol__analyticsIsSupported",su="__angularfire_symbol__remoteConfigIsSupportedValue",jt="__angularfire_symbol__remoteConfigIsSupported",Wr="__angularfire_symbol__messagingIsSupportedValue",ki="__angularfire_symbol__messagingIsSupported";function Kh(T,D,R){if(D){if(1===D.length)return D[0];const le=D.filter(Le=>Le.app===R);if(1===le.length)return le[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[Xa]||(globalThis[Xa]=Bn().then(T=>globalThis[iu]=T).catch(()=>globalThis[iu]=!1)),globalThis[ki]||(globalThis[ki]=Jc().then(T=>globalThis[Wr]=T).catch(()=>globalThis[Wr]=!1)),globalThis[jt]||(globalThis[jt]=Hc().then(T=>globalThis[su]=T).catch(()=>globalThis[su]=!1));const Ji=(T,D)=>{const R=D?[D]:(0,j.C6)(),U=[];return R.forEach(G=>{G.container.getProvider(T).instances.forEach(Le=>{U.includes(Le)||U.push(Le)})}),U};function Ao(){}class ou{constructor(D,R=zh){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,U){const G=this.zone;return this.delegate.schedule(function(Le){G.runGuarded(()=>{D.apply(this,[Le])})},R,U)}}class au{constructor(D){this.zone=D,this.task=null}call(D,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)),R.pipe((0,Ja.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tc=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ou(Zone.current)),this.insideAngular=R.run(()=>new ou(Zone.current,gs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function On(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Xi(T){return On().ngZone.runOutsideAngular(()=>T())}function es(T){return On().ngZone.run(()=>T())}function el(T){return On(),function(T){return function(R){return(R=R.lift(new au(T.ngZone))).pipe((0,oo.R)(T.outsideAngular),(0,ec.Q)(T.insideAngular))}}(On())(T)}const sc=(T,D)=>{const R=void 0;return function(){const U=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),es(()=>T.apply(R,U))}},cd=(T,D)=>function(){let R;const U=arguments;for(let le=0;le<arguments.length;le++)"function"==typeof U[le]&&(D&&(R||(R=es(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)))),U[le]=sc(U[le],R));const G=Xi(()=>T.apply(this,U));if(!D){if(G instanceof Qa.y){const le=On();return G.pipe((0,oo.R)(le.outsideAngular),(0,ec.Q)(le.insideAngular))}return es(()=>G)}return G instanceof Qa.y?G.pipe(el):G instanceof Promise?es(()=>new Promise((le,Le)=>G.then(tt=>es(()=>le(tt)),tt=>es(()=>Le(tt))))):"function"==typeof G&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),G.apply(this,arguments)}:es(()=>G)}},3533:(st,Ce,P)=>{P.d(Ce,{$:()=>Zc,A:()=>Kt,B:()=>Er,G:()=>yi,H:()=>ja,J:()=>Tr,L:()=>cs,M:()=>Js,N:()=>qo,P:()=>D,Q:()=>Zo,R:()=>ou,T:()=>pn,U:()=>Co,V:()=>Pr,W:()=>Nl,X:()=>Pl,Y:()=>Vl,Z:()=>ea,_:()=>fs,a:()=>ro,a0:()=>Ul,a1:()=>za,a2:()=>nd,a3:()=>Hl,a4:()=>Yc,a5:()=>Qc,a6:()=>Jc,a7:()=>jn,a8:()=>Hn,a9:()=>$l,aA:()=>xo,aB:()=>nl,aC:()=>Em,aD:()=>ma,aE:()=>Kn,aI:()=>Ki,aL:()=>ds,aa:()=>oy,ab:()=>ia,ac:()=>eu,af:()=>Qn,ag:()=>_m,ah:()=>ym,ak:()=>Re,al:()=>vt,an:()=>jh,ao:()=>Hh,ap:()=>$r,aq:()=>Cr,ar:()=>bo,as:()=>Bc,at:()=>_n,au:()=>xm,av:()=>ac,aw:()=>yn,ax:()=>Ne,ay:()=>en,az:()=>qi,b:()=>Lr,c:()=>sn,d:()=>ha,e:()=>vr,f:()=>cy,g:()=>ga,h:()=>ef,i:()=>$h,j:()=>uy,k:()=>km,l:()=>es,m:()=>Rm,n:()=>ys,o:()=>zt,r:()=>rc,s:()=>On,u:()=>cd});var u=P(8239),j=P(4213),N=P(1572);function re(b,m){var _={};for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&m.indexOf(w)<0&&(_[w]=b[w]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var M=0;for(w=Object.getOwnPropertySymbols(b);M<w.length;M++)m.indexOf(w[M])<0&&Object.prototype.propertyIsEnumerable.call(b,w[M])&&(_[w[M]]=b[w[M]])}return _}var Oe=P(3855),ue=P(1177);const zt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Kt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Er=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nn=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Un=new Oe.Yd("@firebase/auth");function ei(b,...m){Un.logLevel<=Oe.in.ERROR&&Un.error(`Auth (${N.SDK_VERSION}): ${b}`,...m)}function _n(b,...m){throw ni(b,...m)}function yn(b,...m){return ni(b,...m)}function Zs(b,m,_){const w=Object.assign(Object.assign({},Xr()),{[m]:_});return new j.LL("auth","Firebase",w).create(m,{appName:b.name})}function ti(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&_n(b,"argument-error"),Zs(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ni(b,...m){if("string"!=typeof b){const _=m[0],w=[...m.slice(1)];return w[0]&&(w[0].appName=b.name),b._errorFactory.create(_,...w)}return nn.create(b,...m)}function Ne(b,m,..._){if(!b)throw ni(m,..._)}function ar(b){const m="INTERNAL ASSERTION FAILED: "+b;throw ei(m),new Error(m)}function Cr(b,m){b||ar(m)}const bt=new Map;function en(b){Cr(b instanceof Function,"Expected a class definition");let m=bt.get(b);return m?(Cr(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,bt.set(b,m),m)}function cr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Ms(){return"http:"===Wn()||"https:"===Wn()}function Wn(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class hn{constructor(m,_){this.shortDelay=m,this.longDelay=_,Cr(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ms()||(0,j.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function lt(b,m){Cr(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class pt{static initialize(m,_,w){this.fetchImpl=m,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ls={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},gi=new hn(3e4,6e4);function rn(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function At(b,m,_,w){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(b,m,_,w,M={}){return tr(b,M,(0,u.Z)(function*(){let O={},X={};w&&("GET"===m?X=w:O={body:JSON.stringify(w)});const be=(0,j.xO)(Object.assign({key:b.config.apiKey},X)).slice(1),Ye=yield b._getAdditionalHeaders();return Ye["Content-Type"]="application/json",b.languageCode&&(Ye["X-Firebase-Locale"]=b.languageCode),pt.fetch()(Ee(b,b.config.apiHost,_,be),Object.assign({method:m,headers:Ye,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function tr(b,m,_){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(b,m,_){b._canInitEmulator=!1;const w=Object.assign(Object.assign({},ls),m);try{const M=new $(b),O=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const X=yield O.json();if("needConfirmation"in X)throw ie(b,"account-exists-with-different-credential",X);if(O.ok&&!("errorMessage"in X))return X;{const be=O.ok?X.errorMessage:X.error.message,[Ye,Ve]=be.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw ie(b,"credential-already-in-use",X);if("EMAIL_EXISTS"===Ye)throw ie(b,"email-already-in-use",X);const _t=w[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw Zs(b,_t,Ve);_n(b,_t)}}catch(M){if(M instanceof j.ZR)throw M;_n(b,"network-request-failed")}})).apply(this,arguments)}function H(b,m,_,w){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(function*(b,m,_,w,M={}){const O=yield At(b,m,_,w,M);return"mfaPendingCredential"in O&&_n(b,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ee(b,m,_,w){const M=`${m}${_}?${w}`;return b.config.emulator?lt(b.config,M):`${b.config.apiScheme}://${M}`}class ${constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(yn(this.auth,"network-request-failed")),gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ie(b,m,_){const w={appName:b.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=yn(b,m,w);return M.customData._tokenResponse=_,M}function it(){return(it=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function xt(b,m){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Mn(b,m){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ir(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Y(){return(Y=(0,u.Z)(function*(b,m=!1){const _=(0,j.m9)(b),w=yield _.getIdToken(m),M=Ke(w);Ne(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,X=null==O?void 0:O.sign_in_provider;return{claims:M,token:w,authTime:Ir(De(M.auth_time)),issuedAtTime:Ir(De(M.iat)),expirationTime:Ir(De(M.exp)),signInProvider:X||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function De(b){return 1e3*Number(b)}function Ke(b){const[m,_,w]=b.split(".");if(void 0===m||void 0===_||void 0===w)return ei("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,j.tV)(_);return M?JSON.parse(M):(ei("Failed to decode base64 JWT payload"),null)}catch(M){return ei("Caught error parsing JWT payload as JSON",M),null}}function gt(b,m){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(w){throw w instanceof j.ZR&&fn(w)&&b.auth.currentUser===b&&(yield b.auth.signOut()),w}})).apply(this,arguments)}function fn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class bn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),w)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class qn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ir(this.lastLoginAt),this.creationTime=Ir(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Me(b){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(b){var m;const _=b.auth,w=yield b.getIdToken(),M=yield gt(b,Mn(_,{idToken:w}));Ne(null==M?void 0:M.users.length,_,"internal-error");const O=M.users[0];b._notifyReloadListener(O);const X=(null===(m=O.providerUserInfo)||void 0===m?void 0:m.length)?_r(O.providerUserInfo):[],be=zi(b.providerData,X),_t=!!b.isAnonymous&&!(b.email&&O.passwordHash||(null==be?void 0:be.length)),kt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:be,metadata:new qn(O.createdAt,O.lastLoginAt),isAnonymous:_t};Object.assign(b,kt)})).apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(function*(b){const m=(0,j.m9)(b);yield Me(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function zi(b,m){return[...b.filter(w=>!m.some(M=>M.providerId===w.providerId)),...m]}function _r(b){return b.map(m=>{var{providerId:_}=m,w=re(m,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Zn(){return(Zn=(0,u.Z)(function*(b,m){const _=yield tr(b,{},(0,u.Z)(function*(){const w=(0,j.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:O}=b.config,X=Ee(b,M,"/v1/token",`key=${O}`),be=yield b._getAdditionalHeaders();return be["Content-Type"]="application/x-www-form-urlencoded",pt.fetch()(X,{method:"POST",headers:be,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Ne(m.idToken,"internal-error"),Ne(void 0!==m.idToken,"internal-error"),Ne(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(b){const m=Ke(b);return Ne(m,"internal-error"),Ne(void 0!==m.exp,"internal-error"),Ne(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var w=this;return(0,u.Z)(function*(){return Ne(!w.accessToken||w.refreshToken,m,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(m,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var w=this;return(0,u.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:X}=yield function(b,m){return Zn.apply(this,arguments)}(m,_);w.updateTokensAndExpiration(M,O,Number(X))})()}updateTokensAndExpiration(m,_,w){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(m,_){const{refreshToken:w,accessToken:M,expirationTime:O}=_,X=new Wi;return w&&(Ne("string"==typeof w,"internal-error",{appName:m}),X.refreshToken=w),M&&(Ne("string"==typeof M,"internal-error",{appName:m}),X.accessToken=M),O&&(Ne("number"==typeof O,"internal-error",{appName:m}),X.expirationTime=O),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Wi,this.toJSON())}_performRefresh(){return ar("not implemented")}}function _i(b,m){Ne("string"==typeof b||void 0===b,"internal-error",{appName:m})}class Dt{constructor(m){var{uid:_,auth:w,stsTokenManager:M}=m,O=re(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new qn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const w=yield gt(_,_.stsTokenManager.getToken(_.auth,m));return Ne(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(m){return function(b){return Y.apply(this,arguments)}(this,m)}reload(){return function(b){return Gr.apply(this,arguments)}(this)}_assign(m){this!==m&&(Ne(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Dt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var w=this;return(0,u.Z)(function*(){let M=!1;m.idToken&&m.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield Me(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield gt(m,function(b,m){return it.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var w,M,O,X,be,Ye,Ve,_t;const kt=null!==(w=_.displayName)&&void 0!==w?w:void 0,Cn=null!==(M=_.email)&&void 0!==M?M:void 0,kr=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,ao=null!==(X=_.photoURL)&&void 0!==X?X:void 0,Rr=null!==(be=_.tenantId)&&void 0!==be?be:void 0,ol=null!==(Ye=_._redirectEventId)&&void 0!==Ye?Ye:void 0,gd=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,Om=null!==(_t=_.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:df,emailVerified:pu,isAnonymous:Nm,providerData:mu,stsTokenManager:gu}=_;Ne(df&&gu,m,"internal-error");const Pm=Wi.fromJSON(this.name,gu);Ne("string"==typeof df,m,"internal-error"),_i(kt,m.name),_i(Cn,m.name),Ne("boolean"==typeof pu,m,"internal-error"),Ne("boolean"==typeof Nm,m,"internal-error"),_i(kr,m.name),_i(ao,m.name),_i(Rr,m.name),_i(ol,m.name),_i(gd,m.name),_i(Om,m.name);const hf=new Dt({uid:df,auth:m,email:Cn,emailVerified:pu,displayName:kt,isAnonymous:Nm,photoURL:ao,phoneNumber:kr,tenantId:Rr,stsTokenManager:Pm,createdAt:gd,lastLoginAt:Om});return mu&&Array.isArray(mu)&&(hf.providerData=mu.map(_d=>Object.assign({},_d))),ol&&(hf._redirectEventId=ol),hf}static _fromIdTokenResponse(m,_,w=!1){return(0,u.Z)(function*(){const M=new Wi;M.updateFromServerResponse(_);const O=new Dt({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:w});return yield Me(O),O})()}}const cs=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,u.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,u.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,u.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return b.type="NONE",b})();function qi(b,m,_){return`firebase:${b}:${m}:${_}`}class Ti{constructor(m,_,w){this.persistence=m,this.auth=_,this.userKey=w;const{config:M,name:O}=this.auth;this.fullUserKey=qi(this.userKey,M.apiKey,O),this.fullPersistenceKey=qi("persistence",M.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Dt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,w="authUser"){return(0,u.Z)(function*(){if(!_.length)return new Ti(en(cs),m,w);const M=(yield Promise.all(_.map(function(){var Ve=(0,u.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let O=M[0]||en(cs);const X=qi(w,m.config.apiKey,m.name);let be=null;for(const Ve of _)try{const _t=yield Ve._get(X);if(_t){const kt=Dt._fromJSON(m,_t);Ve!==O&&(be=kt),O=Ve;break}}catch(_t){}const Ye=M.filter(Ve=>Ve._shouldAllowMigration);return O._shouldAllowMigration&&Ye.length?(O=Ye[0],be&&(yield O._set(X,be.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,u.Z)(function*(_t){if(_t!==O)try{yield _t._remove(X)}catch(kt){}});return function(_t){return Ve.apply(this,arguments)}}())),new Ti(O,m,w)):new Ti(O,m,w)})()}}function wn(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(En(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Ba(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(vo(m))return"Blackberry";if(Ua(m))return"Webos";if(xs(m))return"Safari";if((m.includes("chrome/")||Si(m))&&!m.includes("edge/"))return"Chrome";if(Bc(m))return"Android";{const w=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ba(b=(0,j.z$)()){return/firefox\//i.test(b)}function xs(b=(0,j.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Si(b=(0,j.z$)()){return/crios\//i.test(b)}function En(b=(0,j.z$)()){return/iemobile/i.test(b)}function Bc(b=(0,j.z$)()){return/android/i.test(b)}function vo(b=(0,j.z$)()){return/blackberry/i.test(b)}function Ua(b=(0,j.z$)()){return/webos/i.test(b)}function bo(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)}function $r(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function nr(b=(0,j.z$)()){return bo(b)||Bc(b)||Ua(b)||vo(b)||/windows phone/i.test(b)||En(b)}function Di(b,m=[]){let _;switch(b){case"Browser":_=wn((0,j.z$)());break;case"Worker":_=`${wn((0,j.z$)())}-${b}`;break;default:_=b}const w=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${w}`}class us{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const w=O=>new Promise((X,be)=>{try{X(m(O))}catch(Ye){be(Ye)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===m)return;const w=[];try{for(const M of _.queue)yield M(m),M.onAbort&&w.push(M.onAbort)}catch(M){w.reverse();for(const O of w)try{O()}catch(X){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M.message})}})()}}class Oh{constructor(m,_,w){this.app=m,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tl(this),this.idTokenSubscription=new Tl(this),this.beforeStateQueue=new us(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(m,_){var w=this;return _&&(this._popupRedirectResolver=en(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var M,O;if(!w._deleted&&(w.persistenceManager=yield Ti.create(w,m),!w._deleted)){if(null===(M=w._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(X){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let O=M,X=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const be=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Ye=null==O?void 0:O._redirectEventId,Ve=yield _.tryRedirectSignIn(m);(!be||be===Ye)&&(null==Ve?void 0:Ve.user)&&(O=Ve.user,X=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(O)}catch(be){O=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(be))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return Ne(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(M){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){try{yield Me(m)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const w=m?(0,j.m9)(m):null;return w&&Ne(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(m,_=!1){var w=this;return(0,u.Z)(function*(){if(!w._deleted)return m&&Ne(w.tenantId===m.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(m)),w.queue((0,u.Z)(function*(){yield w.directlySetCurrentUser(m),w.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(en(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new j.LL("auth","Firebase",m())}onAuthStateChanged(m,_,w){return this.registerStateListener(this.authStateSubscription,m,_,w)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,w){return this.registerStateListener(this.idTokenSubscription,m,_,w)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var w=this;return(0,u.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const w=m&&en(m)||_._popupRedirectResolver;Ne(w,_,"argument-error"),_.redirectPersistenceManager=yield Ti.create(_,[en(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,w,M){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(X,this,"internal-error"),X.then(()=>O(this.currentUser)),"function"==typeof _?m.addObserver(_,w,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const w={"X-Client-Version":m.clientVersion};m.app.options.appId&&(w["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function Kn(b){return(0,j.m9)(b)}class Tl{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yi(b,m,_){const w=Kn(b);Ne(w._canInitEmulator,w,"emulator-config-failed"),Ne(/^https?:\/\//.test(m),w,"invalid-emulator-scheme");const M=!!(null==_?void 0:_.disableWarnings),O=Zu(m),{host:X,port:be}=function(b){const m=Zu(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const O=M[1];return{host:O,port:Ai(w.substr(O.length+1))}}{const[O,X]=w.split(":");return{host:O,port:Ai(X)}}}(m);w.config.emulator={url:`${O}//${X}${null===be?"":`:${be}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:X,port:be,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Zu(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function Ai(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class ja{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return ar("not implemented")}_getIdTokenResponse(m){return ar("not implemented")}_linkToIdToken(m,_){return ar("not implemented")}_getReauthenticationResolver(m){return ar("not implemented")}}function Ph(b,m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:resetPassword",rn(b,m))})).apply(this,arguments)}function Fh(b,m){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Uc(b,m){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:update",rn(b,m))})).apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithPassword",rn(b,m))})).apply(this,arguments)}function jc(b,m){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:sendOobCode",rn(b,m))})).apply(this,arguments)}function pm(b,m){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,u.Z)(function*(b,m){return jc(b,m)})).apply(this,arguments)}function sy(b,m){return $o.apply(this,arguments)}function $o(){return($o=(0,u.Z)(function*(b,m){return jc(b,m)})).apply(this,arguments)}function Hc(b,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,u.Z)(function*(b,m){return jc(b,m)})).apply(this,arguments)}function mm(b,m){return ed.apply(this,arguments)}function ed(){return(ed=(0,u.Z)(function*(b,m){return jc(b,m)})).apply(this,arguments)}function Ga(){return(Ga=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,m))})).apply(this,arguments)}function Sl(){return(Sl=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,m))})).apply(this,arguments)}class Dl extends ja{constructor(m,_,w,M=null){super("password",w),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new Dl(m,_,"password")}static _fromEmailAndCode(m,_,w=null){return new Dl(m,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function(b,m){return Qu.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(b,m){return Ga.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:_n(m,"internal-error")}})()}_linkToIdToken(m,_){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return Fh(m,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(b,m){return Sl.apply(this,arguments)}(m,{idToken:_,email:w._email,oobCode:w._password});default:_n(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Nr(b,m){return Al.apply(this,arguments)}function Al(){return(Al=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithIdp",rn(b,m))})).apply(this,arguments)}class Tr extends ja{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Tr(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):_n("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M}=_,O=re(_,["providerId","signInMethod"]);if(!w||!M)return null;const X=new Tr(w,M);return X.idToken=O.idToken||void 0,X.accessToken=O.accessToken||void 0,X.secret=O.secret,X.nonce=O.nonce,X.pendingToken=O.pendingToken||null,X}_getIdTokenResponse(m){return Nr(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,Nr(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Nr(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,j.xO)(_)}return m}}function Gc(b,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:sendVerificationCode",rn(b,m))})).apply(this,arguments)}function Ml(){return(Ml=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,m))})).apply(this,arguments)}function Wo(){return(Wo=(0,u.Z)(function*(b,m){const _=yield H(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,m));if(_.temporaryProof)throw ie(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Vh={USER_NOT_FOUND:"user-not-found"};function zc(){return(zc=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Vh)})).apply(this,arguments)}class tn extends ja{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new tn({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new tn({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function(b,m){return Ml.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function(b,m){return Wo.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(b,m){return zc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:O}=m;return w||_||M||O?new tn({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:O}):null}}class Ln{constructor(m){var _,w,M,O,X,be;const Ye=(0,j.zd)((0,j.pd)(m)),Ve=null!==(_=Ye.apiKey)&&void 0!==_?_:null,_t=null!==(w=Ye.oobCode)&&void 0!==w?w:null,kt=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ye.mode)&&void 0!==M?M:null);Ne(Ve&&_t&&kt,"argument-error"),this.apiKey=Ve,this.operation=kt,this.code=_t,this.continueUrl=null!==(O=Ye.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(X=Ye.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(be=Ye.tenantId)&&void 0!==be?be:null}static parseLink(m){const _=function(b){const m=(0,j.zd)((0,j.pd)(b)).link,_=m?(0,j.zd)((0,j.pd)(m)).deep_link_id:null,w=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(w?(0,j.zd)((0,j.pd)(w)).link:null)||w||_||m||b}(m);try{return new Ln(_)}catch(w){return null}}}let Js=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,w){return Dl._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=Ln.parseLink(w);return Ne(M,"argument-error"),Dl._fromEmailAndCode(_,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class ri{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class ur extends ri{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Co extends ur{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return Ne("providerId"in _&&"signInMethod"in _,"argument-error"),Tr._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Ne(m.idToken||m.accessToken,"argument-error"),Tr._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Co.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Co.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:O,nonce:X,providerId:be}=m;if(!w&&!M&&!_&&!O||!be)return null;try{return new Co(be)._credential({idToken:_,accessToken:w,nonce:X,pendingToken:O})}catch(Ye){return null}}}let qo=(()=>{class b extends ur{constructor(){super("facebook.com")}static credential(_){return Tr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(w){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Zo=(()=>{class b extends ur{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Tr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return b.credential(w,M)}catch(O){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),pn=(()=>{class b extends ur{constructor(){super("github.com")}static credential(_){return Tr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(w){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ds extends ja{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Nr(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,Nr(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Nr(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M,pendingToken:O}=_;return w&&M&&O&&w===M?new ds(w,O):null}static _create(m,_){return new ds(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends ri{constructor(m){Ne(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Pr.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Pr.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=ds.fromJSON(m);return Ne(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:w}=m;if(!_||!w)return null;try{return ds._create(w,_)}catch(M){return null}}}let Nl=(()=>{class b extends ur{constructor(){super("twitter.com")}static credential(_,w){return Tr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return b.credential(w,M)}catch(O){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Io(b,m){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signUp",rn(b,m))})).apply(this,arguments)}class ii{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,w,M=!1){return(0,u.Z)(function*(){const O=yield Dt._fromIdTokenResponse(m,w,M),X=Ko(w);return new ii({user:O,providerId:X,_tokenResponse:w,operationType:_})})()}static _forOperation(m,_,w){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(w,!0);const M=Ko(w);return new ii({user:m,providerId:M,_tokenResponse:w,operationType:_})})()}}function Ko(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Pl(b){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,u.Z)(function*(b){var m;const _=Kn(b);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new ii({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Io(_,{returnSecureToken:!0}),M=yield ii._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Yo extends j.ZR{constructor(m,_,w,M){var O;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Yo.prototype),this.customData={appName:m.name,tenantId:null!==(O=m.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(m,_,w,M){return new Yo(m,_,w,M)}}function Ll(b,m,_,w){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Yo._fromErrorAndOperation(b,O,m,w):O})}function qc(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Re(b,m){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,u.Z)(function*(b,m){const _=(0,j.m9)(b);yield Qo(!0,_,m);const{providerUserInfo:w}=yield xt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=qc(w||[]);return _.providerData=_.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ks(b,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,u.Z)(function*(b,m,_=!1){const w=yield gt(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return ii._forOperation(b,"link",w)})).apply(this,arguments)}function Qo(b,m,_){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(b,m,_){yield Me(m);const M=!1===b?"provider-already-linked":"no-such-provider";Ne(qc(m.providerData).has(_)===b,m.auth,M)})).apply(this,arguments)}function zr(b,m){return $a.apply(this,arguments)}function $a(){return($a=(0,u.Z)(function*(b,m,_=!1){const{auth:w}=b,M="reauthenticate";try{const O=yield gt(b,Ll(w,M,m,b),_);Ne(O.idToken,w,"internal-error");const X=Ke(O.idToken);Ne(X,w,"internal-error");const{sub:be}=X;return Ne(b.uid===be,w,"user-mismatch"),ii._forOperation(b,M,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&_n(w,"user-mismatch"),O}})).apply(this,arguments)}function Jo(b,m){return td.apply(this,arguments)}function td(){return(td=(0,u.Z)(function*(b,m,_=!1){const w="signIn",M=yield Ll(b,w,m),O=yield ii._fromIdTokenResponse(b,w,M);return _||(yield b._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Vl(b,m){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,u.Z)(function*(b,m){return Jo(Kn(b),m)})).apply(this,arguments)}function ea(b,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(b,m){const _=(0,j.m9)(b);return yield Qo(!1,_,m.providerId),ks(_,m)})).apply(this,arguments)}function fs(b,m){return To.apply(this,arguments)}function To(){return(To=(0,u.Z)(function*(b,m){return zr((0,j.m9)(b),m)})).apply(this,arguments)}function ta(b,m){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,u.Z)(function*(b,m){return H(b,"POST","/v1/accounts:signInWithCustomToken",rn(b,m))})).apply(this,arguments)}function Zc(b,m){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,u.Z)(function*(b,m){const _=Kn(b),w=yield ta(_,{token:m,returnSecureToken:!0}),M=yield ii._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class na{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Kc._fromServerResponse(m,_):_n(m,"internal-error")}}class Kc extends na{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Kc(_)}}function Xs(b,m,_){var w;Ne((null===(w=_.url)||void 0===w?void 0:w.length)>0,b,"invalid-continue-uri"),Ne(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ne(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(Ne(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Ul(b,m,_){return ra.apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b),M={requestType:"PASSWORD_RESET",email:m};_&&Xs(w,M,_),yield sy(w,M)})).apply(this,arguments)}function za(b,m,_){return jl.apply(this,arguments)}function jl(){return(jl=(0,u.Z)(function*(b,m,_){yield Ph((0,j.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function nd(b,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(b,m){yield Uc((0,j.m9)(b),{oobCode:m})})).apply(this,arguments)}function Hl(b,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,u.Z)(function*(b,m){const _=(0,j.m9)(b),w=yield Ph(_,{oobCode:m}),M=w.requestType;switch(Ne(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(w.mfaInfo,_,"internal-error");default:Ne(w.email,_,"internal-error")}let O=null;return w.mfaInfo&&(O=na._fromServerResponse(Kn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Yc(b,m){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,u.Z)(function*(b,m){const{data:_}=yield Hl((0,j.m9)(b),m);return _.email})).apply(this,arguments)}function Qc(b,m,_){return rd.apply(this,arguments)}function rd(){return(rd=(0,u.Z)(function*(b,m,_){const w=Kn(b),M=yield Io(w,{returnSecureToken:!0,email:m,password:_}),O=yield ii._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Jc(b,m,_){return Vl((0,j.m9)(b),Js.credential(m,_))}function jn(b,m,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b),M={requestType:"EMAIL_SIGNIN",email:m};Ne(_.handleCodeInApp,w,"argument-error"),_&&Xs(w,M,_),yield Hc(w,M)})).apply(this,arguments)}function Hn(b,m){const _=Ln.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function $l(b,m,_){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b),M=Js.credentialWithLink(m,_||cr());return Ne(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Vl(w,M)})).apply(this,arguments)}function gm(b,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:createAuthUri",rn(b,m))})).apply(this,arguments)}function oy(b,m){return id.apply(this,arguments)}function id(){return(id=(0,u.Z)(function*(b,m){const w={identifier:m,continueUri:Ms()?cr():"http://localhost"},{signinMethods:M}=yield gm((0,j.m9)(b),w);return M||[]})).apply(this,arguments)}function ia(b,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(b,m){const _=(0,j.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Xs(_.auth,M,m);const{email:O}=yield pm(_.auth,M);O!==b.email&&(yield b.reload())})).apply(this,arguments)}function eu(b,m,_){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&Xs(w.auth,O,_);const{email:X}=yield mm(w.auth,O);X!==b.email&&(yield b.reload())})).apply(this,arguments)}function Bh(b,m){return ql.apply(this,arguments)}function ql(){return(ql=(0,u.Z)(function*(b,m){return At(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Qn(b,m){return So.apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const w=(0,j.m9)(b),O={idToken:yield w.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},X=yield gt(w,Bh(w.auth,O));w.displayName=X.displayName||null,w.photoURL=X.photoUrl||null;const be=w.providerData.find(({providerId:Ye})=>"password"===Ye);be&&(be.displayName=w.displayName,be.photoURL=w.photoURL),yield w._updateTokensIfNecessary(X)})).apply(this,arguments)}function _m(b,m){return Za((0,j.m9)(b),m,null)}function ym(b,m){return Za((0,j.m9)(b),null,m)}function Za(b,m,_){return oa.apply(this,arguments)}function oa(){return(oa=(0,u.Z)(function*(b,m,_){const{auth:w}=b,O={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(O.email=m),_&&(O.password=_);const X=yield gt(b,Fh(w,O));yield b._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class eo{constructor(m,_,w={}){this.isNewUser=m,this.providerId=_,this.profile=w}}class sd extends eo{constructor(m,_,w,M){super(m,_,w),this.username=M}}class ay extends eo{constructor(m,_){super(m,"facebook.com",_)}}class xn extends sd{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class to extends eo{constructor(m,_){super(m,"google.com",_)}}class et extends sd{constructor(m,_,w){super(m,"twitter.com",_,w)}}function vt(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(b){var m,_;if(!b)return null;const{providerId:w}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},O=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!w&&(null==b?void 0:b.idToken)){const X=null===(_=null===(m=Ke(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new eo(O,"anonymous"!==X&&"custom"!==X?X:null)}if(!w)return null;switch(w){case"facebook.com":return new ay(O,M);case"github.com":return new xn(O,M);case"google.com":return new to(O,M);case"twitter.com":return new et(O,M,b.screenName||null);case"custom":case"anonymous":return new eo(O,null);default:return new eo(O,w,M)}}(_)}class Je{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new Je("enroll",m)}static _fromMfaPendingCredential(m){return new Je("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,w;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Je._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(w=m.multiFactorSession)||void 0===w?void 0:w.idToken)return Je._fromIdtoken(m.multiFactorSession.idToken)}return null}}class nu{constructor(m,_,w){this.session=m,this.hints=_,this.signInResolver=w}static _fromError(m,_){const w=Kn(m),M=_.customData._serverResponse,O=(M.mfaInfo||[]).map(be=>na._fromServerResponse(w,be));Ne(M.mfaPendingCredential,w,"internal-error");const X=Je._fromMfaPendingCredential(M.mfaPendingCredential);return new nu(X,O,function(){var be=(0,u.Z)(function*(Ye){const Ve=yield Ye._process(w,X);delete M.mfaInfo,delete M.mfaPendingCredential;const _t=Object.assign(Object.assign({},M),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const kt=yield ii._fromIdTokenResponse(w,_.operationType,_t);return yield w._updateCurrentUser(kt.user),kt;case"reauthenticate":return Ne(_.user,w,"internal-error"),ii._forOperation(_.user,_.operationType,_t);default:_n(w,"internal-error")}});return function(Ye){return be.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function jh(b,m){var _;const w=(0,j.m9)(b),M=m;return Ne(m.customData.operationType,w,"argument-error"),Ne(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),nu._fromError(w,M)}function Do(b,m){return At(b,"POST","/v2/accounts/mfaEnrollment:start",rn(b,m))}class la{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>na._fromServerResponse(m.auth,w)))})}static _fromUser(m){return new la(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Je._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var w=this;return(0,u.Z)(function*(){const M=m,O=yield w.getSession(),X=yield gt(w.user,M._process(w.user.auth,O,_));return yield w.user._updateTokensIfNecessary(X),w.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){const w="string"==typeof m?m:m.uid,M=yield _.user.getIdToken(),O=yield gt(_.user,function(b,m){return At(b,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(b,m))}(_.user.auth,{idToken:M,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:X})=>X!==w),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(X){if("auth/user-token-expired"!==X.code)throw X}})()}}const Rs=new WeakMap;function Hh(b){const m=(0,j.m9)(b);return Rs.has(m)||Rs.set(m,la._fromUser(m)),Rs.get(m)}const si="__sak";class Ql{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(si,"1"),this.storage.removeItem(si),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lr=(()=>{class b extends Ql{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,j.z$)();return xs(b)||bo(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=nr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),O=this.localCache[w];M!==O&&_(w,O,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((be,Ye,Ve)=>{this.notifyListeners(be,Ve)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const be=this.storage.getItem(M);if(_.newValue!==be)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const O=()=>{const be=this.storage.getItem(M);!w&&this.localCache[M]===be||this.notifyListeners(M,be)},X=this.storage.getItem(M);(0,j.w1)()&&10===document.documentMode&&X!==_.newValue&&_.newValue!==_.oldValue?setTimeout(O,10):O()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const O of Array.from(M))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,O=this;return(0,u.Z)(function*(){yield M().call(O,_,w),O.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,u.Z)(function*(){const O=yield w().call(M,_);return M.localCache[_]=JSON.stringify(O),O})()}_remove(_){var w=()=>super._remove,M=this;return(0,u.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return b.type="LOCAL",b})(),ro=(()=>{class b extends Ql{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return b.type="SESSION",b})();let rr=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(O=>O.isListeningto(_));if(w)return w;const M=new b(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,u.Z)(function*(){const M=_,{eventId:O,eventType:X,data:be}=M.data,Ye=w.handlersMap[X];if(!(null==Ye?void 0:Ye.size))return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:X});const Ve=Array.from(Ye).map(function(){var kt=(0,u.Z)(function*(Cn){return Cn(M.origin,be)});return function(Cn){return kt.apply(this,arguments)}}()),_t=yield function(b){return Promise.all(b.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return m.apply(this,arguments)}}()))}(Ve);M.ports[0].postMessage({status:"done",eventId:O,eventType:X,response:_t})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Ki(b="",m=10){let _="";for(let w=0;w<m;w++)_+=Math.floor(10*Math.random());return b+_}class Ya{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,w=50){var M=this;return(0,u.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let X,be;return new Promise((Ye,Ve)=>{const _t=Ki("",20);O.port1.start();const kt=setTimeout(()=>{Ve(new Error("unsupported_event"))},w);be={messageChannel:O,onMessage(Cn){const kr=Cn;if(kr.data.eventId===_t)switch(kr.data.status){case"ack":clearTimeout(kt),X=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Ye(kr.data.response);break;default:clearTimeout(kt),clearTimeout(X),Ve(new Error("invalid_response"))}}},M.handlers.add(be),O.port1.addEventListener("message",be.onMessage),M.target.postMessage({eventType:m,eventId:_t,data:_},[O.port2])}).finally(()=>{be&&M.removeMessageHandler(be)})})()}}function $t(){return window}function Dr(){return void 0!==$t().WorkerGlobalScope&&"function"==typeof $t().importScripts}function oi(){return(oi=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Rn="firebaseLocalStorageDb",Ns="firebaseLocalStorage",Bn="fbase_key";class so{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ad(b,m){return b.transaction([Ns],m?"readwrite":"readonly").objectStore(Ns)}function Gh(){const b=indexedDB.open(Rn,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const w=b.result;try{w.createObjectStore(Ns,{keyPath:Bn})}catch(M){_(M)}}),b.addEventListener("success",(0,u.Z)(function*(){const w=b.result;w.objectStoreNames.contains(Ns)?m(w):(w.close(),yield function(){const b=indexedDB.deleteDatabase(Rn);return new so(b).toPromise()}(),m(yield Gh()))}))})}function da(b,m,_){return yr.apply(this,arguments)}function yr(){return(yr=(0,u.Z)(function*(b,m,_){const w=ad(b,!0).put({[Bn]:m,value:_});return new so(w).toPromise()})).apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(b,m){const _=ad(b,!1).get(m),w=yield new so(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ru(b,m){const _=ad(b,!0).delete(m);return new so(_).toPromise()}const $h=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Gh()),_.db})()}_withRetries(_){var w=this;return(0,u.Z)(function*(){let M=0;for(;;)try{const O=yield w._openDb();return yield _(O)}catch(O){if(M++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return Dr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=rr._getInstance(Dr()?self:null),_.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(M,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(M,O){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function(){return oi.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ya(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Gh();return yield da(_,si,"1"),yield ru(_,si),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(O=>da(O,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,u.Z)(function*(){const M=yield w._withRetries(O=>function(b,m){return Vr.apply(this,arguments)}(O,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(M=>ru(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const w=yield _._withRetries(X=>{const be=ad(X,!1).getAll();return new so(be).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:X,value:be}of w)O.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(be)&&(_.notifyListeners(X,be),M.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!O.has(X)&&(_.notifyListeners(X,null),M.push(X));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const O of Array.from(M))O(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function zh(b,m){return At(b,"POST","/v2/accounts/mfaSignIn:start",rn(b,m))}function Qa(){return(Qa=(0,u.Z)(function*(b){return(yield At(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oo(b){return new Promise((m,_)=>{const w=document.createElement("script");w.setAttribute("src",b),w.onload=m,w.onerror=M=>{const O=yn("internal-error");O.customData=M,_(O)},w.type="text/javascript",w.charset="UTF-8",function(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(w)})}function ec(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Xa=1e12;class su{constructor(m){this.auth=m,this.counter=Xa,this._widgets=new Map}render(m,_){const w=this.counter;return this._widgets.set(w,new jt(m,this.auth.name,_||{})),this.counter++,w}reset(m){var _;const w=m||Xa;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Xa))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var w;return null===(w=_._widgets.get(m||Xa))||void 0===w||w.execute(),""})()}}class jt{constructor(m,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;Ne(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}();const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ki=ec("rcb"),Ps=new hn(3e4,6e4);class Zh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!$t().grecaptcha}load(m,_=""){return Ne((b=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($t().grecaptcha):new Promise((w,M)=>{const O=$t().setTimeout(()=>{M(yn(m,"network-request-failed"))},Ps.get());$t()[ki]=()=>{$t().clearTimeout(O),delete $t()[ki];const be=$t().grecaptcha;if(!be)return void M(yn(m,"internal-error"));const Ye=be.render;be.render=(Ve,_t)=>{const kt=Ye(Ve,_t);return this.counter++,kt},this.hostLanguage=_,w(be)},oo(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ki,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),M(yn(m,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!$t().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Kh{load(m){return(0,u.Z)(function*(){return new su(m)})()}clearedOneInstance(){}}const Ji="recaptcha",Ao={theme:"light",type:"image"};class ou{constructor(m,_=Object.assign({},Ao),w){this.parameters=_,this.type=Ji,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kn(w),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;Ne(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Kh:new Zh,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),w=m.getAssertedRecaptcha();return w.getResponse(_)||new Promise(O=>{const X=be=>{!be||(m.tokenChangeListeners.delete(X),O(be))};m.tokenChangeListeners.add(X),m.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof m)m(_);else if("string"==typeof m){const w=$t()[m];"function"==typeof w&&w(_)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){Ne(Ms()&&!Dr(),m.auth,"internal-error"),yield function(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function(b){return Qa.apply(this,arguments)}(m.auth);Ne(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tc{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=tn._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function On(b,m,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,u.Z)(function*(b,m,_){const w=Kn(b),M=yield ic(w,m,(0,j.m9)(_));return new tc(M,O=>Vl(w,O))})).apply(this,arguments)}function es(b,m,_){return nc.apply(this,arguments)}function nc(){return(nc=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b);yield Qo(!1,w,"phone");const M=yield ic(w.auth,m,(0,j.m9)(_));return new tc(M,O=>ea(w,O))})).apply(this,arguments)}function rc(b,m,_){return el.apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b),M=yield ic(w.auth,m,(0,j.m9)(_));return new tc(M,O=>fs(w,O))})).apply(this,arguments)}function ic(b,m,_){return sc.apply(this,arguments)}function sc(){return(sc=(0,u.Z)(function*(b,m,_){var w;const M=yield _.verify();try{let O;if(Ne("string"==typeof M,b,"argument-error"),Ne(_.type===Ji,b,"argument-error"),O="string"==typeof m?{phoneNumber:m}:m,"session"in O){const X=O.session;if("phoneNumber"in O)return Ne("enroll"===X.type,b,"internal-error"),(yield Do(b,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Ne("signin"===X.type,b,"internal-error");const be=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return Ne(be,b,"missing-multi-factor-info"),(yield zh(b,{mfaPendingCredential:X.credential,mfaEnrollmentId:be,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Gc(b,{phoneNumber:O.phoneNumber,recaptchaToken:M});return X}}finally{_._reset()}})).apply(this,arguments)}function cd(b,m){return T.apply(this,arguments)}function T(){return(T=(0,u.Z)(function*(b,m){yield ks((0,j.m9)(b),m)})).apply(this,arguments)}let D=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Kn(_)}verifyPhoneNumber(_,w){return ic(this.auth,_,(0,j.m9)(w))}static credential(_,w){return tn._fromVerification(_,w)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?tn._fromTokenResponse(w,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function R(b,m){return m?en(m):(Ne(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class U extends ja{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Nr(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Nr(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Nr(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function G(b){return Jo(b.auth,new U(b),b.bypassAuthState)}function le(b){const{auth:m,user:_}=b;return Ne(_,m,"internal-error"),zr(_,new U(b),b.bypassAuthState)}function Le(b){return tt.apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(b){const{auth:m,user:_}=b;return Ne(_,m,"internal-error"),ks(_,new U(b),b.bypassAuthState)})).apply(this,arguments)}class St{constructor(m,_,w,M,O=!1){this.auth=m,this.resolver=w,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(w,M){m.pendingPromise={resolve:w,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(O){m.reject(O)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:O,tenantId:X,error:be,type:Ye}=m;if(be)return void _.reject(be);const Ve={auth:_.auth,requestUri:w,sessionId:M,tenantId:X||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ye)(Ve))}catch(_t){_.reject(_t)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return G;case"linkViaPopup":case"linkViaRedirect":return Le;case"reauthViaPopup":case"reauthViaRedirect":return le;default:_n(this.auth,"internal-error")}}resolve(m){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pt=new hn(2e3,1e4);function sn(b,m,_){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,u.Z)(function*(b,m,_){const w=Kn(b);ti(b,m,ri);const M=R(w,_);return new Mo(w,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function vr(b,m,_){return mn.apply(this,arguments)}function mn(){return(mn=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b);ti(w.auth,m,ri);const M=R(w.auth,_);return new Mo(w.auth,"reauthViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}function ha(b,m,_){return bi.apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b);ti(w.auth,m,ri);const M=R(w.auth,_);return new Mo(w.auth,"linkViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}let Mo=(()=>{class b extends St{constructor(_,w,M,O,X){super(_,w,O,X),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const w=yield _.execute();return Ne(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,u.Z)(function*(){Cr(1===_.filter.length,"Popup operations only handle one event");const w=Ki();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(yn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=(null===(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Pt.get())};_()}}return b.currentPopupAction=null,b})();const qr=new Map;class fa extends St{constructor(m,_,w=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let w=qr.get(_.auth._key());if(!w){try{const O=(yield function(b,m){return Qh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;w=()=>Promise.resolve(O)}catch(M){w=()=>Promise.reject(M)}qr.set(_.auth._key(),w)}return _.bypassAuthState||qr.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(w,m);if("unknown"!==m.type){if(m.eventId){const M=yield w.auth._redirectUserForId(m.eventId);if(M)return w.user=M,_().call(w,m);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Qh(){return(Qh=(0,u.Z)(function*(b,m){const _=Xh(m),w=ly(b);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function Jh(b,m){return pa.apply(this,arguments)}function pa(){return(pa=(0,u.Z)(function*(b,m){return ly(b)._set(Xh(m),"true")})).apply(this,arguments)}function ma(){qr.clear()}function Em(b,m){qr.set(b._key(),m)}function ly(b){return en(b._redirectPersistence)}function Xh(b){return qi("pendingRedirect",b.config.apiKey,b.name)}function cy(b,m,_){return function(b,m,_){return ud.apply(this,arguments)}(b,m,_)}function ud(){return(ud=(0,u.Z)(function*(b,m,_){const w=Kn(b);ti(b,m,ri);const M=R(w,_);return yield Jh(M,w),M._openRedirect(w,m,"signInViaRedirect")})).apply(this,arguments)}function ef(b,m,_){return function(b,m,_){return Ri.apply(this,arguments)}(b,m,_)}function Ri(){return(Ri=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b);ti(w.auth,m,ri);const M=R(w.auth,_);yield Jh(M,w.auth);const O=yield oc(w);return M._openRedirect(w.auth,m,"reauthViaRedirect",O)})).apply(this,arguments)}function ga(b,m,_){return function(b,m,_){return dd.apply(this,arguments)}(b,m,_)}function dd(){return(dd=(0,u.Z)(function*(b,m,_){const w=(0,j.m9)(b);ti(w.auth,m,ri);const M=R(w.auth,_);yield Qo(!1,w,m.providerId),yield Jh(M,w.auth);const O=yield oc(w);return M._openRedirect(w.auth,m,"linkViaRedirect",O)})).apply(this,arguments)}function uy(b,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(b,m){return yield Kn(b)._initializationPromise,nl(b,m,!1)})).apply(this,arguments)}function nl(b,m){return lu.apply(this,arguments)}function lu(){return(lu=(0,u.Z)(function*(b,m,_=!1){const w=Kn(b),M=R(w,m),X=yield new fa(w,M,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield w._persistUserIfCurrent(X.user),yield w._setRedirectUser(null,m)),X})).apply(this,arguments)}function oc(b){return cu.apply(this,arguments)}function cu(){return(cu=(0,u.Z)(function*(b){const m=Ki(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class xo{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(m,w)&&(_=!0,this.sendToConsumer(m,w),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pd(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var w;if(m.error&&!pd(m)){const M=(null===(w=m.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(yn(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const w=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&w}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fd(m))}saveEventToCache(m){this.cachedEventUids.add(fd(m)),this.lastProcessedEventTime=Date.now()}}function fd(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function pd({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===(null==m?void 0:m.code)}function ac(b){return nf.apply(this,arguments)}function nf(){return(nf=(0,u.Z)(function*(b,m={}){return At(b,"GET","/v1/projects",m)})).apply(this,arguments)}const ko=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lc=/^https?/;function rl(){return(rl=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield ac(b);for(const _ of m)try{if(rf(_))return}catch(w){}_n(b,"unauthorized-domain")})).apply(this,arguments)}function rf(b){const m=cr(),{protocol:_,hostname:w}=new URL(m);if(b.startsWith("chrome-extension://")){const X=new URL(b);return""===X.hostname&&""===w?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===w}if(!lc.test(_))return!1;if(ko.test(b))return w===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const Cm=new hn(3e4,6e4);function sf(){const b=$t().___jsl;if(null==b?void 0:b.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let il=null;function fy(b){return il=il||function(b){return new Promise((m,_)=>{var w,M,O;function X(){sf(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{sf(),_(yn(b,"network-request-failed"))},timeout:Cm.get()})}if(null===(M=null===(w=$t().gapi)||void 0===w?void 0:w.iframes)||void 0===M?void 0:M.Iframe)m(gapi.iframes.getContext());else{if(!(null===(O=$t().gapi)||void 0===O?void 0:O.load)){const be=ec("iframefcb");return $t()[be]=()=>{gapi.load?X():_(yn(b,"network-request-failed"))},oo(`https://apis.google.com/js/api.js?onload=${be}`).catch(Ye=>_(Ye))}X()}}).catch(m=>{throw il=null,m})}(b),il}const py=new hn(5e3,15e3),af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sl(b){const m=b.config;Ne(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?lt(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,w={apiKey:m.apiKey,appName:b.name,v:N.SDK_VERSION},M=gy.get(b.config.apiHost);M&&(w.eid=M);const O=b._getFrameworks();return O.length&&(w.fw=O.join(",")),`${_}?${(0,j.xO)(w).slice(1)}`}function ts(){return ts=(0,u.Z)(function*(b){const m=yield fy(b),_=$t().gapi;return Ne(_,b,"internal-error"),m.open({where:document.body,url:sl(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},w=>new Promise(function(){var M=(0,u.Z)(function*(O,X){yield w.restyle({setHideOnLeave:!1});const be=yn(b,"network-request-failed"),Ye=$t().setTimeout(()=>{X(be)},py.get());function Ve(){$t().clearTimeout(Ye),O(w)}w.ping(Ve).then(Ve,()=>{X(be)})});return function(O,X){return M.apply(this,arguments)}}()))}),ts.apply(this,arguments)}const cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ya{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function xm(b,m,_,w,M,O){Ne(b.config.authDomain,b,"auth-domain-config-required"),Ne(b.config.apiKey,b,"invalid-api-key");const X={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:w,v:N.SDK_VERSION,eventId:M};if(m instanceof ri){m.setDefaultLanguage(b.languageCode),X.providerId=m.providerId||"",(0,j.xb)(m.getCustomParameters())||(X.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Ye,Ve]of Object.entries(O||{}))X[Ye]=Ve}if(m instanceof ur){const Ye=m.getScopes().filter(Ve=>""!==Ve);Ye.length>0&&(X.scopes=Ye.join(","))}b.tenantId&&(X.tid=b.tenantId);const be=X;for(const Ye of Object.keys(be))void 0===be[Ye]&&delete be[Ye];return`${function({config:b}){return b.emulator?lt(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(be).slice(1)}`}const va="webStorageSupport",km=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=nl,this._overrideRedirectResult=Em}_openPopup(m,_,w,M){var O=this;return(0,u.Z)(function*(){var X;Cr(null===(X=O.eventManagers[m._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const be=xm(m,_,w,cr(),M);return function(b,m,_,w=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),X=Math.max((window.screen.availWidth-w)/2,0).toString();let be="";const Ye=Object.assign(Object.assign({},cc),{width:w.toString(),height:M.toString(),top:O,left:X}),Ve=(0,j.z$)().toLowerCase();_&&(be=Si(Ve)?"_blank":_),Ba(Ve)&&(m=m||"http://localhost",Ye.scrollbars="yes");const _t=Object.entries(Ye).reduce((Cn,[kr,ao])=>`${Cn}${kr}=${ao},`,"");if(function(b=(0,j.z$)()){var m;return bo(b)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Ve)&&"_self"!==be)return function(b,m){const _=document.createElement("a");_.href=b,_.target=m;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(m||"",be),new ya(null);const kt=window.open(m||"",be,_t);Ne(kt,b,"popup-blocked");try{kt.focus()}catch(Cn){}return new ya(kt)}(m,be,Ki())})()}_openRedirect(m,_,w,M){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(m),b=xm(m,_,w,cr(),M),$t().location.href=b,new Promise(()=>{});var b})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:O}=this.eventManagers[_];return M?Promise.resolve(M):(Cr(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(m);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const w=yield function(b){return ts.apply(this,arguments)}(m),M=new xo(m);return w.register("authEvent",O=>(Ne(null==O?void 0:O.authEvent,m,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=w,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(va,{type:va},M=>{var O;const X=null===(O=null==M?void 0:M[0])||void 0===O?void 0:O[va];void 0!==X&&_(!!X),_n(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(b){return rl.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return nr()||xs()||bo()}};class fu extends class{constructor(m){this.factorId=m}_process(m,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,w);case"signin":return this._finalizeSignIn(m,_.credential);default:return ar("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new fu(m)}_finalizeEnroll(m,_,w){return function(b,m){return At(b,"POST","/v2/accounts/mfaEnrollment:finalize",rn(b,m))}(m,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function(b,m){return At(b,"POST","/v2/accounts/mfaSignIn:finalize",rn(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rm=(()=>{class b{constructor(){}static assertion(_){return fu._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var b,uc="@firebase/auth";class uf{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(w=>{var M;m((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ys(b=(0,N.getApp)()){const m=(0,N._getProvider)(b,"auth");return m.isInitialized()?m.getImmediate():function(b,m){const _=(0,N._getProvider)(b,"auth");if(_.isInitialized()){const M=_.getImmediate(),O=_.getOptions();if((0,j.vZ)(O,null!=m?m:{}))return M;_n(M,"already-initialized")}return _.initialize({options:m})}(b,{popupRedirectResolver:km,persistence:[$h,Lr,ro]})}b="Browser",(0,N._registerComponent)(new ue.wA("auth",(m,{options:_})=>{const w=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:O,authDomain:X}=w.options;return((be,Ye)=>{Ne(O&&!O.includes(":"),"invalid-api-key",{appName:be.name}),Ne(!(null==X?void 0:X.includes(":")),"argument-error",{appName:be.name});const Ve={apiKey:O,authDomain:X,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Di(b)},_t=new Oh(be,Ye,Ve);return function(b,m){const _=(null==m?void 0:m.persistence)||[],w=(Array.isArray(_)?_:[_]).map(en);(null==m?void 0:m.errorMap)&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(w,null==m?void 0:m.popupRedirectResolver)}(_t,_),_t})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,w)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ue.wA("auth-internal",m=>{const _=Kn(m.getProvider("auth").getImmediate());return new uf(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(uc,"0.20.1",void 0),(0,N.registerVersion)(uc,"0.20.1","esm2017")},4213:(st,Ce,P)=>{P.d(Ce,{BH:()=>We,LL:()=>ue,ZR:()=>Oe,gQ:()=>Ne,zI:()=>ne,hu:()=>j,g5:()=>N,US:()=>we,tV:()=>ge,h$:()=>re,L:()=>ce,$s:()=>rn,r3:()=>nn,Sg:()=>xe,ne:()=>ar,p$:()=>z,vZ:()=>_n,ZB:()=>q,gK:()=>cr,pd:()=>ni,m9:()=>tr,z$:()=>$e,GJ:()=>Xr,jU:()=>se,ru:()=>Se,d:()=>je,xb:()=>Un,w1:()=>ut,hl:()=>Ie,uI:()=>ze,UG:()=>Ue,Yr:()=>Ze,b$:()=>Be,G6:()=>Xe,Mn:()=>Fe,w9:()=>Er,cI:()=>er,UI:()=>ei,xO:()=>Zs,zd:()=>ti,DV:()=>As,ug:()=>hn,dS:()=>_o,Pz:()=>Ct,Dv:()=>lr,Wj:()=>Wn,lb:()=>vn,eu:()=>K});const j=function(W,H){if(!W)throw N(H)},N=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},oe=function(W){const H=[];let Q=0;for(let Ee=0;Ee<W.length;Ee++){let $=W.charCodeAt(Ee);$<128?H[Q++]=$:$<2048?(H[Q++]=$>>6|192,H[Q++]=63&$|128):55296==(64512&$)&&Ee+1<W.length&&56320==(64512&W.charCodeAt(Ee+1))?($=65536+((1023&$)<<10)+(1023&W.charCodeAt(++Ee)),H[Q++]=$>>18|240,H[Q++]=$>>12&63|128,H[Q++]=$>>6&63|128,H[Q++]=63&$|128):(H[Q++]=$>>12|224,H[Q++]=$>>6&63|128,H[Q++]=63&$|128)}return H},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,H){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let $=0;$<W.length;$+=3){const ie=W[$],ke=$+1<W.length,it=ke?W[$+1]:0,xt=$+2<W.length,Ot=xt?W[$+2]:0;let Ir=(15&it)<<2|Ot>>6,de=63&Ot;xt||(de=64,ke||(Ir=64)),Ee.push(Q[ie>>2],Q[(3&ie)<<4|it>>4],Q[Ir],Q[de])}return Ee.join("")},encodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(W):this.encodeByteArray(oe(W),H)},decodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(W):function(W){const H=[];let Q=0,Ee=0;for(;Q<W.length;){const $=W[Q++];if($<128)H[Ee++]=String.fromCharCode($);else if($>191&&$<224){const ie=W[Q++];H[Ee++]=String.fromCharCode((31&$)<<6|63&ie)}else if($>239&&$<365){const xt=((7&$)<<18|(63&W[Q++])<<12|(63&W[Q++])<<6|63&W[Q++])-65536;H[Ee++]=String.fromCharCode(55296+(xt>>10)),H[Ee++]=String.fromCharCode(56320+(1023&xt))}else{const ie=W[Q++],ke=W[Q++];H[Ee++]=String.fromCharCode((15&$)<<12|(63&ie)<<6|63&ke)}}return H.join("")}(this.decodeStringToByteArray(W,H))},decodeStringToByteArray(W,H){this.init_();const Q=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let $=0;$<W.length;){const ie=Q[W.charAt($++)],it=$<W.length?Q[W.charAt($)]:0;++$;const Ot=$<W.length?Q[W.charAt($)]:64;++$;const Nt=$<W.length?Q[W.charAt($)]:64;if(++$,null==ie||null==it||null==Ot||null==Nt)throw Error();Ee.push(ie<<2|it>>4),64!==Ot&&(Ee.push(it<<4&240|Ot>>2),64!==Nt&&Ee.push(Ot<<6&192|Nt))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},re=function(W){const H=oe(W);return we.encodeByteArray(H,!0)},ce=function(W){return re(W).replace(/\./g,"")},ge=function(W){try{return we.decodeString(W,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z(W){return q(void 0,W)}function q(W,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return H}for(const Q in H)!H.hasOwnProperty(Q)||!ae(Q)||(W[Q]=q(W[Q],H[Q]));return W}function ae(W){return"__proto__"!==W}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Q)=>{this.resolve=H,this.reject=Q})}wrapCallback(H){return(Q,Ee)=>{Q?this.reject(Q):this.resolve(Ee),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Q):H(Q,Ee))}}}function xe(W,H){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=H||"demo-project",$=W.iat||0,ie=W.sub||W.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:$,exp:$+3600,auth_time:$,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},W);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(ke)),""].join(".")}function $e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function se(){return"object"==typeof self&&self.self===self}function Se(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return $e().indexOf("Electron/")>=0}function ut(){const W=$e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Fe(){return $e().indexOf("MSAppHost/")>=0}function Ze(){return!1}function Xe(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ie(){return"object"==typeof indexedDB}function K(){return new Promise((W,H)=>{try{let Q=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(Ee);$.onsuccess=()=>{$.result.close(),Q||self.indexedDB.deleteDatabase(Ee),W(!0)},$.onupgradeneeded=()=>{Q=!1},$.onerror=()=>{var ie;H((null===(ie=$.error)||void 0===ie?void 0:ie.message)||"")}}catch(Q){H(Q)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(H,Q,Ee){super(Q),this.code=H,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(H,Q,Ee){this.service=H,this.serviceName=Q,this.errors=Ee}create(H,...Q){const Ee=Q[0]||{},$=`${this.service}/${H}`,ie=this.errors[H],ke=ie?function(W,H){return W.replace(zt,(Q,Ee)=>{const $=H[Ee];return null!=$?String($):`<${Ee}?>`})}(ie,Ee):"Error";return new Oe($,`${this.serviceName}: ${ke} (${$}).`,Ee)}}const zt=/\{\$([^}]+)}/g;function er(W){return JSON.parse(W)}function Ct(W){return JSON.stringify(W)}const Kt=function(W){let H={},Q={},Ee={},$="";try{const ie=W.split(".");H=er(ge(ie[0])||""),Q=er(ge(ie[1])||""),$=ie[2],Ee=Q.d||{},delete Q.d}catch(ie){}return{header:H,claims:Q,data:Ee,signature:$}},Er=function(W){const Q=Kt(W).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Xr=function(W){const H=Kt(W).claims;return"object"==typeof H&&!0===H.admin};function nn(W,H){return Object.prototype.hasOwnProperty.call(W,H)}function As(W,H){if(Object.prototype.hasOwnProperty.call(W,H))return W[H]}function Un(W){for(const H in W)if(Object.prototype.hasOwnProperty.call(W,H))return!1;return!0}function ei(W,H,Q){const Ee={};for(const $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(Ee[$]=H.call(Q,W[$],$,W));return Ee}function _n(W,H){if(W===H)return!0;const Q=Object.keys(W),Ee=Object.keys(H);for(const $ of Q){if(!Ee.includes($))return!1;const ie=W[$],ke=H[$];if(yn(ie)&&yn(ke)){if(!_n(ie,ke))return!1}else if(ie!==ke)return!1}for(const $ of Ee)if(!Q.includes($))return!1;return!0}function yn(W){return null!==W&&"object"==typeof W}function Zs(W){const H=[];for(const[Q,Ee]of Object.entries(W))Array.isArray(Ee)?Ee.forEach($=>{H.push(encodeURIComponent(Q)+"="+encodeURIComponent($))}):H.push(encodeURIComponent(Q)+"="+encodeURIComponent(Ee));return H.length?"&"+H.join("&"):""}function ti(W){const H={};return W.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[$,ie]=Ee.split("=");H[decodeURIComponent($)]=decodeURIComponent(ie)}}),H}function ni(W){const H=W.indexOf("?");if(!H)return"";const Q=W.indexOf("#",H);return W.substring(H,Q>0?Q:void 0)}class Ne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Q){Q||(Q=0);const Ee=this.W_;if("string"==typeof H)for(let Nt=0;Nt<16;Nt++)Ee[Nt]=H.charCodeAt(Q)<<24|H.charCodeAt(Q+1)<<16|H.charCodeAt(Q+2)<<8|H.charCodeAt(Q+3),Q+=4;else for(let Nt=0;Nt<16;Nt++)Ee[Nt]=H[Q]<<24|H[Q+1]<<16|H[Q+2]<<8|H[Q+3],Q+=4;for(let Nt=16;Nt<80;Nt++){const Ir=Ee[Nt-3]^Ee[Nt-8]^Ee[Nt-14]^Ee[Nt-16];Ee[Nt]=4294967295&(Ir<<1|Ir>>>31)}let Ot,Mn,$=this.chain_[0],ie=this.chain_[1],ke=this.chain_[2],it=this.chain_[3],xt=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(Ot=it^ie&(ke^it),Mn=1518500249):(Ot=ie^ke^it,Mn=1859775393):Nt<60?(Ot=ie&ke|it&(ie|ke),Mn=2400959708):(Ot=ie^ke^it,Mn=3395469782);const Ir=($<<5|$>>>27)+Ot+xt+Mn+Ee[Nt]&4294967295;xt=it,it=ke,ke=4294967295&(ie<<30|ie>>>2),ie=$,$=Ir}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+it&4294967295,this.chain_[4]=this.chain_[4]+xt&4294967295}update(H,Q){if(null==H)return;void 0===Q&&(Q=H.length);const Ee=Q-this.blockSize;let $=0;const ie=this.buf_;let ke=this.inbuf_;for(;$<Q;){if(0===ke)for(;$<=Ee;)this.compress_(H,$),$+=this.blockSize;if("string"==typeof H){for(;$<Q;)if(ie[ke]=H.charCodeAt($),++ke,++$,ke===this.blockSize){this.compress_(ie),ke=0;break}}else for(;$<Q;)if(ie[ke]=H[$],++ke,++$,ke===this.blockSize){this.compress_(ie),ke=0;break}}this.inbuf_=ke,this.total_+=Q}digest(){const H=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&Q,Q/=256;this.compress_(this.buf_);let Ee=0;for(let $=0;$<5;$++)for(let ie=24;ie>=0;ie-=8)H[Ee]=this.chain_[$]>>ie&255,++Ee;return H}}function ar(W,H){const Q=new Cr(W,H);return Q.subscribe.bind(Q)}class Cr{constructor(H,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{H(this)}).catch(Ee=>{this.error(Ee)})}next(H){this.forEachObserver(Q=>{Q.next(H)})}error(H){this.forEachObserver(Q=>{Q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Q,Ee){let $;if(void 0===H&&void 0===Q&&void 0===Ee)throw new Error("Missing Observer.");$=function(W,H){if("object"!=typeof W||null===W)return!1;for(const Q of["next","error","complete"])if(Q in W&&"function"==typeof W[Q])return!0;return!1}(H)?H:{next:H,error:Q,complete:Ee},void 0===$.next&&($.next=Fn),void 0===$.error&&($.error=Fn),void 0===$.complete&&($.complete=Fn);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(ke){}}),this.observers.push($),ie}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,H)}sendOne(H,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Q(this.observers[H])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fn(){}const lr=function(W,H,Q,Ee){let $;if(Ee<H?$="at least "+H:Ee>Q&&($=0===Q?"none":"no more than "+Q),$)throw new Error(W+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+$+".")};function cr(W,H){return`${W} failed: ${H} argument `}function Wn(W,H,Q,Ee){if((!Ee||Q)&&"function"!=typeof Q)throw new Error(cr(W,H)+"must be a valid function.")}function vn(W,H,Q,Ee){if((!Ee||Q)&&("object"!=typeof Q||null===Q))throw new Error(cr(W,H)+"must be a valid context object.")}const _o=function(W){const H=[];let Q=0;for(let Ee=0;Ee<W.length;Ee++){let $=W.charCodeAt(Ee);if($>=55296&&$<=56319){const ie=$-55296;Ee++,j(Ee<W.length,"Surrogate pair missing trail surrogate."),$=65536+(ie<<10)+(W.charCodeAt(Ee)-56320)}$<128?H[Q++]=$:$<2048?(H[Q++]=$>>6|192,H[Q++]=63&$|128):$<65536?(H[Q++]=$>>12|224,H[Q++]=$>>6&63|128,H[Q++]=63&$|128):(H[Q++]=$>>18|240,H[Q++]=$>>12&63|128,H[Q++]=$>>6&63|128,H[Q++]=63&$|128)}return H},hn=function(W){let H=0;for(let Q=0;Q<W.length;Q++){const Ee=W.charCodeAt(Q);Ee<128?H++:Ee<2048?H+=2:Ee>=55296&&Ee<=56319?(H+=4,Q++):H+=3}return H};function rn(W,H=1e3,Q=2){const Ee=H*Math.pow(Q,W),$=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+$)}function tr(W){return W&&W._delegate?W._delegate:W}},7713:(st,Ce,P)=>{P.d(Ce,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=P(1572);(0,u.registerVersion)("firebase","9.8.1","app")},7892:(st,Ce,P)=>{P.d(Ce,{Z:()=>u.Z});var u=P(6293);u.Z.registerVersion("firebase","9.8.1","app-compat")},2115:(st,Ce,P)=>{P.r(Ce);var u=P(8239),j=P(6293),N=P(3533),oe=P(4213),re=(P(1572),P(3855),P(1177));function ce(){return window}function q(){return(q=(0,u.Z)(function*(de,J,Y){var De;const{BuildInfo:Ke}=ce();(0,N.aq)(J.sessionId,"AuthEvent did not contain a session ID");const Bt=yield se(J.sessionId),gt={};return(0,N.ar)()?gt.ibi=Ke.packageName:(0,N.as)()?gt.apn=Ke.packageName:(0,N.at)(de,"operation-not-supported-in-this-environment"),Ke.displayName&&(gt.appDisplayName=Ke.displayName),gt.sessionId=Bt,(0,N.au)(de,Y,J.type,void 0,null!==(De=J.eventId)&&void 0!==De?De:void 0,gt)})).apply(this,arguments)}function We(){return(We=(0,u.Z)(function*(de){const{BuildInfo:J}=ce(),Y={};(0,N.ar)()?Y.iosBundleId=J.packageName:(0,N.as)()?Y.androidPackageName=J.packageName:(0,N.at)(de,"operation-not-supported-in-this-environment"),yield(0,N.av)(de,Y)})).apply(this,arguments)}function ze(){return(ze=(0,u.Z)(function*(de,J,Y){const{cordova:De}=ce();let Ke=()=>{};try{yield new Promise((Bt,gt)=>{let Zt=null;function fn(){var Me;Bt();const Tt=null===(Me=De.plugins.browsertab)||void 0===Me?void 0:Me.close;"function"==typeof Tt&&Tt(),"function"==typeof(null==Y?void 0:Y.close)&&Y.close()}function bn(){Zt||(Zt=window.setTimeout(()=>{gt((0,N.aw)(de,"redirect-cancelled-by-user"))},2e3))}function qn(){"visible"===(null==document?void 0:document.visibilityState)&&bn()}J.addPassiveListener(fn),document.addEventListener("resume",bn,!1),(0,N.as)()&&document.addEventListener("visibilitychange",qn,!1),Ke=()=>{J.removePassiveListener(fn),document.removeEventListener("resume",bn,!1),document.removeEventListener("visibilitychange",qn,!1),Zt&&window.clearTimeout(Zt)}})}finally{Ke()}})).apply(this,arguments)}function se(de){return Se.apply(this,arguments)}function Se(){return(Se=(0,u.Z)(function*(de){const J=Be(de),Y=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(Y)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Be(de){if((0,N.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const J=new ArrayBuffer(de.length),Y=new Uint8Array(J);for(let De=0;De<de.length;De++)Y[De]=de.charCodeAt(De);return Y}class ut extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(J)),super.onEvent(J)}initialized(){var J=this;return(0,u.Z)(function*(){yield J.initPromise})()}}function Xe(de){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,u.Z)(function*(de){const J=yield fe()._get(ve(de));return J&&(yield fe()._remove(ve(de))),J})).apply(this,arguments)}function ne(){const de=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Y=0;Y<20;Y++){const De=Math.floor(Math.random()*J.length);de.push(J.charAt(De))}return de.join("")}function fe(){return(0,N.ay)(N.b)}function ve(de){return(0,N.az)("authEvent",de.config.apiKey,de.name)}function Et(de){if(!(null==de?void 0:de.includes("?")))return{};const[J,...Y]=de.split("?");return(0,oe.zd)(Y.join("?"))}function Kt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function nn(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Un(de=(0,oe.z$)()){return!("file:"!==nn()&&"ionic:"!==nn()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function ti(){try{const de=self.localStorage,J=N.aI();if(de)return de.setItem(J,"1"),de.removeItem(J),!function(de=(0,oe.z$)()){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)||function(de=(0,oe.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,oe.hl)()}catch(de){return ni()&&(0,oe.hl)()}return!1}function ni(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ne(){return("http:"===nn()||"https:"===nn()||(0,oe.ru)()||Un())&&!((0,oe.b$)()||(0,oe.UG)())&&ti()&&!ni()}function ar(){return Un()&&"undefined"!=typeof document}function bt(){return(bt=(0,u.Z)(function*(){return!!ar()&&new Promise(de=>{const J=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),de(!0)})})})).apply(this,arguments)}const Fn={LOCAL:"local",NONE:"none",SESSION:"session"},lr=N.ax,cr="persistence";function Wn(de){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(de){yield de._initializationPromise;const J=hn(),Y=N.az(cr,de.config.apiKey,de.name);J&&J.setItem(Y,de._getPersistence())})).apply(this,arguments)}function hn(){var de;try{return(null===(de="undefined"!=typeof window?window:null)||void 0===de?void 0:de.sessionStorage)||null}catch(J){return null}}const lt=N.ax;class pt{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(J){var Y=this;return(0,u.Z)(function*(){const De=J._key();let Ke=Y.eventManagers.get(De);return Ke||(Ke=new ut(J),Y.eventManagers.set(De,Ke),Y.attachCallbackListeners(J,Ke)),Ke})()}_openPopup(J){(0,N.at)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,Y,De,Ke){var Bt=this;return(0,u.Z)(function*(){!function(de){var J,Y,De,Ke,Bt,gt,Zt,fn,bn,qn;const Me=ce();(0,N.ax)("function"==typeof(null===(J=null==Me?void 0:Me.universalLinks)||void 0===J?void 0:J.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(Y=null==Me?void 0:Me.BuildInfo)||void 0===Y?void 0:Y.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(Bt=null===(Ke=null===(De=null==Me?void 0:Me.cordova)||void 0===De?void 0:De.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Bt?void 0:Bt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(fn=null===(Zt=null===(gt=null==Me?void 0:Me.cordova)||void 0===gt?void 0:gt.plugins)||void 0===Zt?void 0:Zt.browsertab)||void 0===fn?void 0:fn.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(qn=null===(bn=null==Me?void 0:Me.cordova)||void 0===bn?void 0:bn.InAppBrowser)||void 0===qn?void 0:qn.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const gt=yield Bt._initialize(J);yield gt.initialized(),gt.resetRedirect(),(0,N.aD)(),yield Bt._originValidation(J);const Zt=function(de,J,Y=null){return{type:J,eventId:Y,urlResponse:null,sessionId:ne(),postBody:null,tenantId:de.tenantId,error:(0,N.aw)(de,"no-auth-event")}}(J,De,Ke);yield function(de,J){return fe()._set(ve(de),J)}(J,Zt);const fn=yield function(de,J,Y){return q.apply(this,arguments)}(J,Zt,Y),bn=yield function(de){const{cordova:J}=ce();return new Promise(Y=>{J.plugins.browsertab.isAvailable(De=>{let Ke=null;De?J.plugins.browsertab.openUrl(de):Ke=J.InAppBrowser.open(de,(0,N.ap)()?"_blank":"_system","location=yes"),Y(Ke)})})}(fn);return function(de,J,Y){return ze.apply(this,arguments)}(J,gt,bn)})()}_isIframeWebStorageSupported(J,Y){throw new Error("Method not implemented.")}_originValidation(J){const Y=J._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function(de){return We.apply(this,arguments)}(J)),this.originValidationPromises[Y]}attachCallbackListeners(J,Y){const{universalLinks:De,handleOpenURL:Ke,BuildInfo:Bt}=ce(),gt=setTimeout((0,u.Z)(function*(){yield Xe(J),Y.onEvent(Kt())}),500),Zt=function(){var qn=(0,u.Z)(function*(Me){clearTimeout(gt);const Tt=yield Xe(J);let Sn=null;Tt&&(null==Me?void 0:Me.url)&&(Sn=function(de,J){var Y,De;const Ke=function(de){const J=Et(de),Y=J.link?decodeURIComponent(J.link):void 0,De=Et(Y).link,Ke=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return Et(Ke).link||Ke||De||Y||de}(J);if(Ke.includes("/__/auth/callback")){const Bt=Et(Ke),gt=Bt.firebaseError?function(de){try{return JSON.parse(de)}catch(J){return null}}(decodeURIComponent(Bt.firebaseError)):null,Zt=null===(De=null===(Y=null==gt?void 0:gt.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===De?void 0:De[1],fn=Zt?(0,N.aw)(Zt):null;return fn?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:fn,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:Ke,postBody:null}}return null}(Tt,Me.url)),Y.onEvent(Sn||Kt())});return function(Tt){return qn.apply(this,arguments)}}();void 0!==De&&"function"==typeof De.subscribe&&De.subscribe(null,Zt);const fn=Ke,bn=`${Bt.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var qn=(0,u.Z)(function*(Me){if(Me.toLowerCase().startsWith(bn)&&Zt({url:Me}),"function"==typeof fn)try{fn(Me)}catch(Tt){console.error(Tt)}});return function(Me){return qn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(J){var Y=this;return(0,u.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,Y,De,Ke){var Bt=this;return(0,u.Z)(function*(){return yield Bt.selectUnderlyingResolver(),Bt.assertedUnderlyingResolver._openPopup(J,Y,De,Ke)})()}_openRedirect(J,Y,De,Ke){var Bt=this;return(0,u.Z)(function*(){return yield Bt.selectUnderlyingResolver(),Bt.assertedUnderlyingResolver._openRedirect(J,Y,De,Ke)})()}_isIframeWebStorageSupported(J,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,Y)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return ar()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,u.Z)(function*(){if(J.underlyingResolver)return;const Y=yield function(){return bt.apply(this,arguments)}();J.underlyingResolver=Y?J.cordovaResolver:J.browserResolver})()}}function ls(de){return de.unwrap()}function rn(de){return gr(de)}function gr(de){const{_tokenResponse:J}=de instanceof oe.ZR?de.customData:de;if(!J)return null;if(!(de instanceof oe.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return N.P.credentialFromResult(de);const Y=J.providerId;if(!Y||Y===N.o.PASSWORD)return null;let De;switch(Y){case N.o.GOOGLE:De=N.Q;break;case N.o.FACEBOOK:De=N.N;break;case N.o.GITHUB:De=N.T;break;case N.o.TWITTER:De=N.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:Bt,oauthTokenSecret:gt,pendingToken:Zt,nonce:fn}=J;return Bt||gt||Ke||Zt?Zt?Y.startsWith("saml.")?N.aL._create(Y,Zt):N.J._fromParams({providerId:Y,signInMethod:Y,pendingToken:Zt,idToken:Ke,accessToken:Bt}):new N.U(Y).credential({idToken:Ke,accessToken:Bt,rawNonce:fn}):null}return de instanceof oe.ZR?De.credentialFromError(de):De.credentialFromResult(de)}function tr(de,J){return J.catch(Y=>{throw Y instanceof oe.ZR&&function(de,J){var Y;const De=null===(Y=J.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===J.code)J.resolver=new Q(de,N.an(de,J));else if(De){const Ke=gr(J),Bt=J;Ke&&(Bt.credential=Ke,Bt.tenantId=De.tenantId||void 0,Bt.email=De.email||void 0,Bt.phoneNumber=De.phoneNumber||void 0)}}(de,Y),Y}).then(Y=>{const Ke=Y.user;return{operationType:Y.operationType,credential:rn(Y),additionalUserInfo:N.al(Y),user:Ee.getOrCreate(Ke)}})}function W(de,J){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(de,J){const Y=yield J;return{verificationId:Y.verificationId,confirm:De=>tr(de,Y.confirm(De))}})).apply(this,arguments)}class Q{constructor(J,Y){this.resolver=Y,this.auth=J.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return tr(ls(this.auth),this.resolver.resolveSignIn(J))}}class Ee{constructor(J){this._delegate=J,this.multiFactor=N.ao(J)}static getOrCreate(J){return Ee.USER_MAP.has(J)||Ee.USER_MAP.set(J,new Ee(J)),Ee.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var Y=this;return(0,u.Z)(function*(){return tr(Y.auth,N.Z(Y._delegate,J))})()}linkWithPhoneNumber(J,Y){var De=this;return(0,u.Z)(function*(){return W(De.auth,N.l(De._delegate,J,Y))})()}linkWithPopup(J){var Y=this;return(0,u.Z)(function*(){return tr(Y.auth,N.d(Y._delegate,J,pt))})()}linkWithRedirect(J){var Y=this;return(0,u.Z)(function*(){return yield Wn(N.aE(Y.auth)),N.g(Y._delegate,J,pt)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var Y=this;return(0,u.Z)(function*(){return tr(Y.auth,N._(Y._delegate,J))})()}reauthenticateWithPhoneNumber(J,Y){return W(this.auth,N.r(this._delegate,J,Y))}reauthenticateWithPopup(J){return tr(this.auth,N.e(this._delegate,J,pt))}reauthenticateWithRedirect(J){var Y=this;return(0,u.Z)(function*(){return yield Wn(N.aE(Y.auth)),N.h(Y._delegate,J,pt)})()}sendEmailVerification(J){return N.ab(this._delegate,J)}unlink(J){var Y=this;return(0,u.Z)(function*(){return yield N.ak(Y._delegate,J),Y})()}updateEmail(J){return N.ag(this._delegate,J)}updatePassword(J){return N.ah(this._delegate,J)}updatePhoneNumber(J){return N.u(this._delegate,J)}updateProfile(J){return N.af(this._delegate,J)}verifyBeforeUpdateEmail(J,Y){return N.ac(this._delegate,J,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ee.USER_MAP=new WeakMap;const $=N.ax;let ie=(()=>{class de{constructor(Y,De){if(this.app=Y,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=Y.options;$(Ke,"invalid-api-key",{appName:Y.name}),$(Ke,"invalid-api-key",{appName:Y.name});const Bt="undefined"!=typeof window?pt:void 0;this._delegate=De.initialize({options:{persistence:it(Ke,Y.name),popupRedirectResolver:Bt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ee.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,De){N.G(this._delegate,Y,De)}applyActionCode(Y){return N.a2(this._delegate,Y)}checkActionCode(Y){return N.a3(this._delegate,Y)}confirmPasswordReset(Y,De){return N.a1(this._delegate,Y,De)}createUserWithEmailAndPassword(Y,De){var Ke=this;return(0,u.Z)(function*(){return tr(Ke._delegate,N.a5(Ke._delegate,Y,De))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return N.aa(this._delegate,Y)}isSignInWithEmailLink(Y){return N.a8(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,u.Z)(function*(){$(Ne(),Y._delegate,"operation-not-supported-in-this-environment");const De=yield N.j(Y._delegate,pt);return De?tr(Y._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function(de,J){(0,N.aE)(de)._logFramework(J)}(this._delegate,Y)}onAuthStateChanged(Y,De,Ke){const{next:Bt,error:gt,complete:Zt}=ke(Y,De,Ke);return this._delegate.onAuthStateChanged(Bt,gt,Zt)}onIdTokenChanged(Y,De,Ke){const{next:Bt,error:gt,complete:Zt}=ke(Y,De,Ke);return this._delegate.onIdTokenChanged(Bt,gt,Zt)}sendSignInLinkToEmail(Y,De){return N.a7(this._delegate,Y,De)}sendPasswordResetEmail(Y,De){return N.a0(this._delegate,Y,De||void 0)}setPersistence(Y){var De=this;return(0,u.Z)(function*(){let Ke;switch(function(de,J){lr(Object.values(Fn).includes(J),de,"invalid-persistence-type"),(0,oe.b$)()?lr(J!==Fn.SESSION,de,"unsupported-persistence-type"):(0,oe.UG)()?lr(J===Fn.NONE,de,"unsupported-persistence-type"):ni()?lr(J===Fn.NONE||J===Fn.LOCAL&&(0,oe.hl)(),de,"unsupported-persistence-type"):lr(J===Fn.NONE||ti(),de,"unsupported-persistence-type")}(De._delegate,Y),Y){case Fn.SESSION:Ke=N.a;break;case Fn.LOCAL:Ke=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case Fn.NONE:Ke=N.L;break;default:return N.at("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return tr(this._delegate,N.X(this._delegate))}signInWithCredential(Y){return tr(this._delegate,N.Y(this._delegate,Y))}signInWithCustomToken(Y){return tr(this._delegate,N.$(this._delegate,Y))}signInWithEmailAndPassword(Y,De){return tr(this._delegate,N.a6(this._delegate,Y,De))}signInWithEmailLink(Y,De){return tr(this._delegate,N.a9(this._delegate,Y,De))}signInWithPhoneNumber(Y,De){return W(this._delegate,N.s(this._delegate,Y,De))}signInWithPopup(Y){var De=this;return(0,u.Z)(function*(){return $(Ne(),De._delegate,"operation-not-supported-in-this-environment"),tr(De._delegate,N.c(De._delegate,Y,pt))})()}signInWithRedirect(Y){var De=this;return(0,u.Z)(function*(){return $(Ne(),De._delegate,"operation-not-supported-in-this-environment"),yield Wn(De._delegate),N.f(De._delegate,Y,pt)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return N.a4(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=Fn,de})();function ke(de,J,Y){let De=de;"function"!=typeof de&&({next:De,error:J,complete:Y}=de);const Ke=De;return{next:gt=>Ke(gt&&Ee.getOrCreate(gt)),error:J,complete:Y}}function it(de,J){const Y=function(de,J){const Y=hn();if(!Y)return[];const De=N.az(cr,de,J);switch(Y.getItem(De)){case Fn.NONE:return[N.L];case Fn.LOCAL:return[N.i,N.a];case Fn.SESSION:return[N.a];default:return[]}}(de,J);if("undefined"!=typeof self&&!Y.includes(N.i)&&Y.push(N.i),"undefined"!=typeof window)for(const De of[N.b,N.a])Y.includes(De)||Y.push(De);return Y.includes(N.L)||Y.push(N.L),Y}class xt{constructor(){this.providerId="phone",this._delegate=new N.P(ls(j.Z.auth()))}static credential(J,Y){return N.P.credential(J,Y)}verifyPhoneNumber(J,Y){return this._delegate.verifyPhoneNumber(J,Y)}unwrap(){return this._delegate}}xt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,xt.PROVIDER_ID=N.P.PROVIDER_ID;const Ot=N.ax;var de;(de=j.Z).INTERNAL.registerComponent(new re.wA("auth-compat",J=>{const Y=J.getProvider("app-compat").getImmediate(),De=J.getProvider("auth");return new ie(Y,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:xt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:class{constructor(J,Y,De=j.Z.app()){var Ke;Ot(null===(Ke=De.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new N.R(J,Y,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:N.W,Auth:ie,AuthCredential:N.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.14")},8305:(st,Ce,P)=>{P.d(Ce,{y:()=>z});var u=P(584),j=P(7908),N=P(4816),oe=P(4623);var re=P(5367),ce=P(5044),ge=P(8706);let z=(()=>{class xe{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const Ue=new xe;return Ue.source=this,Ue.operator=ze,Ue}subscribe(ze,Ue,se){const Se=function(xe){return xe&&xe instanceof u.Lv||function(xe){return xe&&(0,ce.m)(xe.next)&&(0,ce.m)(xe.error)&&(0,ce.m)(xe.complete)}(xe)&&(0,j.Nn)(xe)}(ze)?ze:new u.Hp(ze,Ue,se);return(0,ge.x)(()=>{const{operator:Be,source:je}=this;Se.add(Be?Be.call(Se,je):je?this._subscribe(Se):this._trySubscribe(Se))}),Se}_trySubscribe(ze){try{return this._subscribe(ze)}catch(Ue){ze.error(Ue)}}forEach(ze,Ue){return new(Ue=q(Ue))((se,Se)=>{let Be;Be=this.subscribe(je=>{try{ze(je)}catch(ut){Se(ut),null==Be||Be.unsubscribe()}},Se,se)})}_subscribe(ze){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(ze)}[N.L](){return this}pipe(...ze){return function(xe){return 0===xe.length?oe.y:1===xe.length?xe[0]:function(ze){return xe.reduce((Ue,se)=>se(Ue),ze)}}(ze)(this)}toPromise(ze){return new(ze=q(ze))((Ue,se)=>{let Se;this.subscribe(Be=>Se=Be,Be=>se(Be),()=>Ue(Se))})}}return xe.create=$e=>new xe($e),xe})();function q(xe){var $e;return null!==($e=null!=xe?xe:re.v.Promise)&&void 0!==$e?$e:Promise}},273:(st,Ce,P)=>{P.d(Ce,{x:()=>re});var u=P(8305),j=P(7908);const oe=(0,P(4893).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=P(3980),we=P(8706);let re=(()=>{class ge extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ae=new ce(this,this);return ae.operator=q,ae}_throwIfClosed(){if(this.closed)throw new oe}next(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ae=this.observers.slice();for(const We of ae)We.next(q)}})}error(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ae}=this;for(;ae.length;)ae.shift().error(q)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ae,isStopped:We,observers:xe}=this;return ae||We?j.Lc:(xe.push(q),new j.w0(()=>(0,he.P)(xe,q)))}_checkFinalizedStatuses(q){const{hasError:ae,thrownError:We,isStopped:xe}=this;ae?q.error(We):xe&&q.complete()}asObservable(){const q=new u.y;return q.source=this,q}}return ge.create=(z,q)=>new ce(z,q),ge})();class ce extends re{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ae;null===(ae=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ae||ae.call(q,z)}error(z){var q,ae;null===(ae=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ae||ae.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ae;return null!==(ae=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ae?ae:j.Lc}}},584:(st,Ce,P)=>{P.d(Ce,{Hp:()=>We,Lv:()=>ae});var u=P(5044),j=P(7908),N=P(5367),oe=P(5160),he=P(6921);const we=ge("C",void 0,void 0);function ge(se,Se,Be){return{kind:se,value:Se,error:Be}}var z=P(2496),q=P(8706);class ae extends j.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,j.Nn)(Se)&&Se.add(this)):this.destination=Ue}static create(Se,Be,je){return new We(Se,Be,je)}next(Se){this.isStopped?ze(ge("N",Se,void 0),this):this._next(Se)}error(Se){this.isStopped?ze(ge("E",void 0,Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?ze(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class We extends ae{constructor(Se,Be,je){let ut;if(super(),(0,u.m)(Se))ut=Se;else if(Se){let Fe;({next:ut,error:Be,complete:je}=Se),this&&N.v.useDeprecatedNextContext?(Fe=Object.create(Se),Fe.unsubscribe=()=>this.unsubscribe()):Fe=Se,ut=null==ut?void 0:ut.bind(Fe),Be=null==Be?void 0:Be.bind(Fe),je=null==je?void 0:je.bind(Fe)}this.destination={next:ut?xe(ut):he.Z,error:xe(null!=Be?Be:$e),complete:je?xe(je):he.Z}}}function xe(se,Se){return(...Be)=>{try{se(...Be)}catch(je){N.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(je):(0,oe.h)(je)}}}function $e(se){throw se}function ze(se,Se){const{onStoppedNotification:Be}=N.v;Be&&z.z.setTimeout(()=>Be(se,Se))}const Ue={closed:!0,next:he.Z,error:$e,complete:he.Z}},7908:(st,Ce,P)=>{P.d(Ce,{Lc:()=>we,w0:()=>he,Nn:()=>re});var u=P(5044);const N=(0,P(4893).d)(ge=>function(q){ge(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ae,We)=>`${We+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var oe=P(3980);class he{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const xe of q)xe.remove(this);else q.remove(this);const{initialTeardown:ae}=this;if((0,u.m)(ae))try{ae()}catch(xe){z=xe instanceof N?xe.errors:[xe]}const{_teardowns:We}=this;if(We){this._teardowns=null;for(const xe of We)try{ce(xe)}catch($e){z=null!=z?z:[],$e instanceof N?z=[...z,...$e.errors]:z.push($e)}}if(z)throw new N(z)}}add(z){var q;if(z&&z!==this)if(this.closed)ce(z);else{if(z instanceof he){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._teardowns=null!==(q=this._teardowns)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,oe.P)(q,z)}remove(z){const{_teardowns:q}=this;q&&(0,oe.P)(q,z),z instanceof he&&z._removeParent(this)}}he.EMPTY=(()=>{const ge=new he;return ge.closed=!0,ge})();const we=he.EMPTY;function re(ge){return ge instanceof he||ge&&"closed"in ge&&(0,u.m)(ge.remove)&&(0,u.m)(ge.add)&&(0,u.m)(ge.unsubscribe)}function ce(ge){(0,u.m)(ge)?ge():ge.unsubscribe()}},5367:(st,Ce,P)=>{P.d(Ce,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(st,Ce,P)=>{P.d(Ce,{E:()=>j});const j=new(P(8305).y)(he=>he.complete())},5947:(st,Ce,P)=>{P.d(Ce,{D:()=>ut});var u=P(9985),j=P(4763),N=P(5222),we=P(8305),ce=P(5497),ge=P(5044),z=P(8395);function ae(Fe,Ze){if(!Fe)throw new Error("Iterable cannot be null");return new we.y(Xe=>{(0,z.f)(Xe,Ze,()=>{const Ie=Fe[Symbol.asyncIterator]();(0,z.f)(Xe,Ze,()=>{Ie.next().then(K=>{K.done?Xe.complete():Xe.next(K.value)})},0,!0)})})}var We=P(1073),xe=P(2442),$e=P(1537),ze=P(2317),Ue=P(9908),se=P(3754),Se=P(7751);function ut(Fe,Ze){return Ze?function(Fe,Ze){if(null!=Fe){if((0,We.c)(Fe))return function(Fe,Ze){return(0,u.Xf)(Fe).pipe((0,N.R)(Ze),(0,j.Q)(Ze))}(Fe,Ze);if((0,$e.z)(Fe))return function(Fe,Ze){return new we.y(Xe=>{let Ie=0;return Ze.schedule(function(){Ie===Fe.length?Xe.complete():(Xe.next(Fe[Ie++]),Xe.closed||this.schedule())})})}(Fe,Ze);if((0,xe.t)(Fe))return function(Fe,Ze){return(0,u.Xf)(Fe).pipe((0,N.R)(Ze),(0,j.Q)(Ze))}(Fe,Ze);if((0,Ue.D)(Fe))return ae(Fe,Ze);if((0,ze.T)(Fe))return function(Fe,Ze){return new we.y(Xe=>{let Ie;return(0,z.f)(Xe,Ze,()=>{Ie=Fe[ce.h](),(0,z.f)(Xe,Ze,()=>{let K,ne;try{({value:K,done:ne}=Ie.next())}catch(fe){return void Xe.error(fe)}ne?Xe.complete():Xe.next(K)},0,!0)}),()=>(0,ge.m)(null==Ie?void 0:Ie.return)&&Ie.return()})}(Fe,Ze);if((0,Se.L)(Fe))return function(Fe,Ze){return ae((0,Se.Q)(Fe),Ze)}(Fe,Ze)}throw(0,se.z)(Fe)}(Fe,Ze):(0,u.Xf)(Fe)}},9985:(st,Ce,P)=>{P.d(Ce,{Xf:()=>We});var u=P(9162),j=P(1537),N=P(2442),oe=P(8305),he=P(1073),we=P(9908),re=P(3754),ce=P(2317),ge=P(7751),z=P(5044),q=P(5160),ae=P(4816);function We(je){if(je instanceof oe.y)return je;if(null!=je){if((0,he.c)(je))return function(je){return new oe.y(ut=>{const Fe=je[ae.L]();if((0,z.m)(Fe.subscribe))return Fe.subscribe(ut);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(je);if((0,j.z)(je))return function(je){return new oe.y(ut=>{for(let Fe=0;Fe<je.length&&!ut.closed;Fe++)ut.next(je[Fe]);ut.complete()})}(je);if((0,N.t)(je))return function(je){return new oe.y(ut=>{je.then(Fe=>{ut.closed||(ut.next(Fe),ut.complete())},Fe=>ut.error(Fe)).then(null,q.h)})}(je);if((0,we.D)(je))return se(je);if((0,ce.T)(je))return function(je){return new oe.y(ut=>{for(const Fe of je)if(ut.next(Fe),ut.closed)return;ut.complete()})}(je);if((0,ge.L)(je))return function(je){return se((0,ge.Q)(je))}(je)}throw(0,re.z)(je)}function se(je){return new oe.y(ut=>{(function(je,ut){var Fe,Ze,Xe,Ie;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Fe=(0,u.KL)(je);!(Ze=yield Fe.next()).done;)if(ut.next(Ze.value),ut.closed)return}catch(K){Xe={error:K}}finally{try{Ze&&!Ze.done&&(Ie=Fe.return)&&(yield Ie.call(Fe))}finally{if(Xe)throw Xe.error}}ut.complete()})})(je,ut).catch(Fe=>ut.error(Fe))})}},3719:(st,Ce,P)=>{P.d(Ce,{T:()=>we});var u=P(5373),j=P(9985),N=P(5583),oe=P(7613),he=P(5947);function we(...re){const ce=(0,oe.yG)(re),ge=(0,oe._6)(re,1/0),z=re;return z.length?1===z.length?(0,j.Xf)(z[0]):(0,u.J)(ge)((0,he.D)(z,ce)):N.E}},8889:(st,Ce,P)=>{P.d(Ce,{Q:()=>j});var u=P(584);class j extends u.Lv{constructor(oe,he,we,re,ce){super(oe),this.onFinalize=ce,this._next=he?function(ge){try{he(ge)}catch(z){oe.error(z)}}:super._next,this._error=re?function(ge){try{re(ge)}catch(z){oe.error(z)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(ge){oe.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;const{closed:he}=this;super.unsubscribe(),!he&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}},4753:(st,Ce,P)=>{P.d(Ce,{U:()=>N});var u=P(9947),j=P(8889);function N(oe,he){return(0,u.e)((we,re)=>{let ce=0;we.subscribe(new j.Q(re,ge=>{re.next(oe.call(he,ge,ce++))}))})}},5373:(st,Ce,P)=>{P.d(Ce,{J:()=>N});var u=P(5724),j=P(4623);function N(oe=1/0){return(0,u.z)(j.y,oe)}},5724:(st,Ce,P)=>{P.d(Ce,{z:()=>ce});var u=P(4753),j=P(9985),N=P(9947),he=(P(8395),P(8889)),re=P(5044);function ce(ge,z,q=1/0){return(0,re.m)(z)?ce((ae,We)=>(0,u.U)((xe,$e)=>z(ae,xe,We,$e))((0,j.Xf)(ge(ae,We))),q):("number"==typeof z&&(q=z),(0,N.e)((ae,We)=>function(ge,z,q,ae,We,xe,$e,ze){const Ue=[];let se=0,Se=0,Be=!1;const je=()=>{Be&&!Ue.length&&!se&&z.complete()},ut=Ze=>se<ae?Fe(Ze):Ue.push(Ze),Fe=Ze=>{se++;let Xe=!1;(0,j.Xf)(q(Ze,Se++)).subscribe(new he.Q(z,Ie=>{z.next(Ie)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(se--;Ue.length&&se<ae;){const Ie=Ue.shift();Fe(Ie)}je()}catch(Ie){z.error(Ie)}}))};return ge.subscribe(new he.Q(z,ut,()=>{Be=!0,je()})),()=>{}}(ae,We,ge,q)))}},4763:(st,Ce,P)=>{P.d(Ce,{Q:()=>oe});var u=P(8395),j=P(9947),N=P(8889);function oe(he,we=0){return(0,j.e)((re,ce)=>{re.subscribe(new N.Q(ce,ge=>(0,u.f)(ce,he,()=>ce.next(ge),we),()=>(0,u.f)(ce,he,()=>ce.complete(),we),ge=>(0,u.f)(ce,he,()=>ce.error(ge),we)))})}},3174:(st,Ce,P)=>{P.d(Ce,{B:()=>we});var u=P(5947),j=P(9468),N=P(273),oe=P(584),he=P(9947);function we(ce={}){const{connector:ge=(()=>new N.x),resetOnError:z=!0,resetOnComplete:q=!0,resetOnRefCountZero:ae=!0}=ce;return We=>{let xe=null,$e=null,ze=null,Ue=0,se=!1,Se=!1;const Be=()=>{null==$e||$e.unsubscribe(),$e=null},je=()=>{Be(),xe=ze=null,se=Se=!1},ut=()=>{const Fe=xe;je(),null==Fe||Fe.unsubscribe()};return(0,he.e)((Fe,Ze)=>{Ue++,!Se&&!se&&Be();const Xe=ze=null!=ze?ze:ge();Ze.add(()=>{Ue--,0===Ue&&!Se&&!se&&($e=re(ut,ae))}),Xe.subscribe(Ze),xe||(xe=new oe.Hp({next:Ie=>Xe.next(Ie),error:Ie=>{Se=!0,Be(),$e=re(je,z,Ie),Xe.error(Ie)},complete:()=>{se=!0,Be(),$e=re(je,q),Xe.complete()}}),(0,u.D)(Fe).subscribe(xe))})(We)}}function re(ce,ge,...z){return!0===ge?(ce(),null):!1===ge?null:ge(...z).pipe((0,j.q)(1)).subscribe(()=>ce())}},5222:(st,Ce,P)=>{P.d(Ce,{R:()=>j});var u=P(9947);function j(N,oe=0){return(0,u.e)((he,we)=>{we.add(N.schedule(()=>he.subscribe(we),oe))})}},9468:(st,Ce,P)=>{P.d(Ce,{q:()=>oe});var u=P(5583),j=P(9947),N=P(8889);function oe(he){return he<=0?()=>u.E:(0,j.e)((we,re)=>{let ce=0;we.subscribe(new N.Q(re,ge=>{++ce<=he&&(re.next(ge),he<=ce&&re.complete())}))})}},7384:(st,Ce,P)=>{P.d(Ce,{b:()=>he});var u=P(5044),j=P(9947),N=P(8889),oe=P(4623);function he(we,re,ce){const ge=(0,u.m)(we)||re||ce?{next:we,error:re,complete:ce}:we;return ge?(0,j.e)((z,q)=>{var ae;null===(ae=ge.subscribe)||void 0===ae||ae.call(ge);let We=!0;z.subscribe(new N.Q(q,xe=>{var $e;null===($e=ge.next)||void 0===$e||$e.call(ge,xe),q.next(xe)},()=>{var xe;We=!1,null===(xe=ge.complete)||void 0===xe||xe.call(ge),q.complete()},xe=>{var $e;We=!1,null===($e=ge.error)||void 0===$e||$e.call(ge,xe),q.error(xe)},()=>{var xe,$e;We&&(null===(xe=ge.unsubscribe)||void 0===xe||xe.call(ge)),null===($e=ge.finalize)||void 0===$e||$e.call(ge)}))}):oe.y}},2869:(st,Ce,P)=>{P.d(Ce,{o:()=>he});var u=P(7908);class j extends u.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const N={setInterval(...we){const{delegate:re}=N;return((null==re?void 0:re.setInterval)||setInterval)(...we)},clearInterval(we){const{delegate:re}=N;return((null==re?void 0:re.clearInterval)||clearInterval)(we)},delegate:void 0};var oe=P(3980);class he extends j{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const ge=this.id,z=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(z,ge,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(z,this.id,ce),this}requestAsyncId(re,ce,ge=0){return N.setInterval(re.flush.bind(re,this),ge)}recycleAsyncId(re,ce,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ce;N.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(re,ce);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let z,ge=!1;try{this.work(re)}catch(q){ge=!0,z=q||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:ge}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ge,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},8843:(st,Ce,P)=>{P.d(Ce,{v:()=>N});var u=P(1733);class j{constructor(he,we=j.now){this.schedulerActionCtor=he,this.now=we}schedule(he,we=0,re){return new this.schedulerActionCtor(this,he).schedule(re,we)}}j.now=u.l.now;class N extends j{constructor(he,we=j.now){super(he,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:we}=this;if(this._active)return void we.push(he);let re;this._active=!0;do{if(re=he.execute(he.state,he.delay))break}while(he=we.shift());if(this._active=!1,re){for(;he=we.shift();)he.unsubscribe();throw re}}}},2210:(st,Ce,P)=>{P.d(Ce,{z:()=>N,P:()=>oe});var u=P(2869);const N=new(P(8843).v)(u.o),oe=N},1733:(st,Ce,P)=>{P.d(Ce,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},2496:(st,Ce,P)=>{P.d(Ce,{z:()=>u});const u={setTimeout(...j){const{delegate:N}=u;return((null==N?void 0:N.setTimeout)||setTimeout)(...j)},clearTimeout(j){const{delegate:N}=u;return((null==N?void 0:N.clearTimeout)||clearTimeout)(j)},delegate:void 0}},5497:(st,Ce,P)=>{P.d(Ce,{h:()=>j});const j="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(st,Ce,P)=>{P.d(Ce,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(st,Ce,P)=>{P.d(Ce,{jO:()=>oe,yG:()=>he,_6:()=>we});var u=P(5044),j=P(7398);function N(re){return re[re.length-1]}function oe(re){return(0,u.m)(N(re))?re.pop():void 0}function he(re){return(0,j.K)(N(re))?re.pop():void 0}function we(re,ce){return"number"==typeof N(re)?re.pop():ce}},3980:(st,Ce,P)=>{function u(j,N){if(j){const oe=j.indexOf(N);0<=oe&&j.splice(oe,1)}}P.d(Ce,{P:()=>u})},4893:(st,Ce,P)=>{function u(j){const oe=j(he=>{Error.call(he),he.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Ce,{d:()=>u})},8706:(st,Ce,P)=>{P.d(Ce,{x:()=>N,O:()=>oe});var u=P(5367);let j=null;function N(he){if(u.v.useDeprecatedSynchronousErrorHandling){const we=!j;if(we&&(j={errorThrown:!1,error:null}),he(),we){const{errorThrown:re,error:ce}=j;if(j=null,re)throw ce}}else he()}function oe(he){u.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=he)}},8395:(st,Ce,P)=>{function u(j,N,oe,he=0,we=!1){const re=N.schedule(function(){oe(),we?j.add(this.schedule(null,he)):this.unsubscribe()},he);if(j.add(re),!we)return re}P.d(Ce,{f:()=>u})},4623:(st,Ce,P)=>{function u(j){return j}P.d(Ce,{y:()=>u})},1537:(st,Ce,P)=>{P.d(Ce,{z:()=>u});const u=j=>j&&"number"==typeof j.length&&"function"!=typeof j},9908:(st,Ce,P)=>{P.d(Ce,{D:()=>j});var u=P(5044);function j(N){return Symbol.asyncIterator&&(0,u.m)(null==N?void 0:N[Symbol.asyncIterator])}},5044:(st,Ce,P)=>{function u(j){return"function"==typeof j}P.d(Ce,{m:()=>u})},1073:(st,Ce,P)=>{P.d(Ce,{c:()=>N});var u=P(4816),j=P(5044);function N(oe){return(0,j.m)(oe[u.L])}},2317:(st,Ce,P)=>{P.d(Ce,{T:()=>N});var u=P(5497),j=P(5044);function N(oe){return(0,j.m)(null==oe?void 0:oe[u.h])}},2442:(st,Ce,P)=>{P.d(Ce,{t:()=>j});var u=P(5044);function j(N){return(0,u.m)(null==N?void 0:N.then)}},7751:(st,Ce,P)=>{P.d(Ce,{Q:()=>N,L:()=>oe});var u=P(9162),j=P(5044);function N(he){return(0,u.FC)(this,arguments,function*(){const re=he.getReader();try{for(;;){const{value:ce,done:ge}=yield(0,u.qq)(re.read());if(ge)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ce)}}finally{re.releaseLock()}})}function oe(he){return(0,j.m)(null==he?void 0:he.getReader)}},7398:(st,Ce,P)=>{P.d(Ce,{K:()=>j});var u=P(5044);function j(N){return N&&(0,u.m)(N.schedule)}},9947:(st,Ce,P)=>{P.d(Ce,{A:()=>j,e:()=>N});var u=P(5044);function j(oe){return(0,u.m)(null==oe?void 0:oe.lift)}function N(oe){return he=>{if(j(he))return he.lift(function(we){try{return oe(we,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(st,Ce,P)=>{function u(){}P.d(Ce,{Z:()=>u})},5160:(st,Ce,P)=>{P.d(Ce,{h:()=>N});var u=P(5367),j=P(2496);function N(oe){j.z.setTimeout(()=>{const{onUnhandledError:he}=u.v;if(!he)throw oe;he(oe)})}},3754:(st,Ce,P)=>{function u(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>u})},2746:(st,Ce,P)=>{var u=P(3668);let j=null;function N(){return j}const re=new u.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.LFG)(q)},providedIn:"platform"}),n})();const z=new u.OlP("Location Initialized");let q=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ae()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ae()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(){return new q((0,u.LFG)(re))},providedIn:"platform"}),n})();function ae(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function(n){const e=(0,u.LFG)(re).location;return new Be((0,u.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Se=new u.OlP("appBaseHref");let Be=(()=>{class n extends Ue{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+ze(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+ze(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(Se,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+ze(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+ze(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(Se,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ut=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=$e(Xe(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Xe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ze,n.joinWithSlash=xe,n.stripTrailingSlash=$e,n.\u0275fac=function(t){return new(t||n)(u.LFG(Ue),u.LFG(ce))},n.\u0275prov=u.Yz7({token:n,factory:function(){return new ut((0,u.LFG)(Ue),(0,u.LFG)(ce))},providedIn:"root"}),n})();function Xe(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Zero=0]="Zero",ne[ne.One=1]="One",ne[ne.Two=2]="Two",ne[ne.Few=3]="Few",ne[ne.Many=4]="Many",ne[ne.Other=5]="Other",ne))();const ni=u.kL8;class qi{}let wn=(()=>{class n extends qi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ni(r||this.locale)(t)){case ne.Zero:return"zero";case ne.One:return"one";case ne.Two:return"two";case ne.Few:return"few";case ne.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function xs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Bc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vo=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,c)=>{if(null==i.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new Bc(null,this._ngForOf,-1,-1),null===c?void 0:c),p=new Ua(i,h);r.push(p)}else if(null==c)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const h=this._viewContainer.get(s);this._viewContainer.move(h,c);const p=new Ua(i,h);r.push(p)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const c=this._viewContainer.get(i);c.context.index=i,c.context.count=s,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ua{constructor(e,t){this.record=e,this.view=t}}let $r=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Cl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ks("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ks("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Cl{constructor(){this.$implicit=null,this.ngIf=null}}function Ks(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class nr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Il=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Di=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new nr(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Il,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),yi=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.aQg),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Nr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:qi,useClass:wn}]}),n})();const Al="browser";function Eo(n){return n===Al}function vi(n){return"server"===n}let Vh=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new $c((0,u.LFG)(re),window)}),n})();class $c{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=zc(this.window.history)||zc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function zc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xl{}class kl extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new kl,j||(j=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Js=Js||document.querySelector("base"),Js?Js.getAttribute("href"):null);return null==t?null:function(n){ur=ur||document.createElement("a"),ur.setAttribute("href",n);const e=ur.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xs(document.cookie,e)}}let ur,Js=null;const qo=new u.OlP("TRANSITION_ID"),pn=[{provide:u.ip1,useFactory:function(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[qo,re,u.zs3],multi:!0}];class Rl{static init(){(0,u.VLi)(new Rl)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ds=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ol=new u.OlP("EventManagerPlugins");let Pr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ol),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Nl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Io=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),wt=(()=>{class n extends Io{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ii),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ii))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function ii(n){N().remove(n)}const Ko={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Pl=/%COMP%/g;function ks(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ks(n,i,t):(i=i.replace(Pl,n),t.push(i))}return t}function Yn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hs=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new td(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Vl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ks(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Pr),u.LFG(wt),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class zr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ko[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ko[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ko[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Yn(r)):this.eventManager.addEventListener(e,t,Yn(r))}}class td extends zr{constructor(e,t,r,i){super(e),this.component=r;const s=ks(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(Pl,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Pl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Vl extends zr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ks(i.id,i.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Xo=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ea=["alt","control","meta","shift"],fs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},To={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ta={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mi=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="";if(ea.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),c+=p+".")}),c+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&To.hasOwnProperty(e)&&(e=To[e]))}return fs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ea.forEach(s=>{s!=i&&ta[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ul=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Al},{provide:u.g9A,useValue:function(){kl.makeCurrent(),Rl.init()},multi:!0},{provide:re,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),ra=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:Ol,useClass:Xo,multi:!0,deps:[re,u.R0b,u.Lbi]},{provide:Ol,useClass:Mi,multi:!0,deps:[re]},{provide:hs,useClass:hs,deps:[Pr,wt,u.AFp]},{provide:u.FYo,useExisting:hs},{provide:Io,useExisting:wt},{provide:wt,useClass:wt,deps:[re]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:Pr,useClass:Pr,deps:[Ol,u.R0b]},{provide:xl,useClass:ds,deps:[]}];let za=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:qo,useExisting:u.AFp},pn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:ra,imports:[Nr,u.hGG]}),n})();"undefined"!=typeof window&&window;let tu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):u.LFG(sd),r},providedIn:"root"}),n})(),sd=(()=>{class n extends tu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case u.q3G.NONE:return r;case u.q3G.HTML:return(0,u.qzn)(r,"HTML")?(0,u.z3N)(r):(0,u.EiD)(this._doc,String(r)).toString();case u.q3G.STYLE:return(0,u.qzn)(r,"Style")?(0,u.z3N)(r):r;case u.q3G.SCRIPT:if((0,u.qzn)(r,"Script"))return(0,u.z3N)(r);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(r),(0,u.qzn)(r,"URL")?(0,u.z3N)(r):(0,u.mCW)(String(r));case u.q3G.RESOURCE_URL:if((0,u.qzn)(r,"ResourceURL"))return(0,u.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function(n){return new sd(n.get(re))}(u.LFG(u.zs3)),r},providedIn:"root"}),n})();var xn=P(5947),to=P(7613);function et(...n){const e=(0,to.yG)(n);return(0,xn.D)(n,e)}var vt=P(273);class Fr extends vt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Gn=P(8305);const{isArray:aa}=Array,{getPrototypeOf:vm,prototype:Ka,keys:Zl}=Object;function Kl(n){if(1===n.length){const e=n[0];if(aa(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&vm(n)===Ka}(e)){const t=Zl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ms=P(4623),Je=P(4753);const{isArray:nu}=Array;function Do(n){return(0,Je.U)(e=>function(n,e){return nu(e)?n(...e):n(e)}(n,e))}function Yl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var kn=P(8889),la=P(8395);function Rs(...n){const e=(0,to.yG)(n),t=(0,to.jO)(n),{args:r,keys:i}=Kl(n);if(0===r.length)return(0,xn.D)([],e);const s=new Gn.y(function(n,e,t=ms.y){return r=>{si(e,()=>{const{length:i}=n,s=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)si(e,()=>{const y=(0,xn.D)(n[p],e);let C=!1;y.subscribe(new kn.Q(r,S=>{s[p]=S,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Yl(i,c):ms.y));return t?s.pipe(Do(t)):s}function si(n,e,t){n?(0,la.f)(t,n,e):e()}const ca=(0,P(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var no=P(5373);function ua(...n){return(0,no.J)(1)((0,xn.D)(n,(0,to.yG)(n)))}var Lr=P(9985);function Os(n){return new Gn.y(e=>{(0,Lr.Xf)(n()).subscribe(e)})}var ro=P(5583),Zi=P(7908),rr=P(9947);function Ki(){return(0,rr.e)((n,e)=>{let t=null;n._refCount++;const r=new kn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ya extends Gn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zi.w0;const t=this.getSubject();e.add(this.source.subscribe(new kn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zi.w0.EMPTY)}return e}refCount(){return Ki()(this)}}function $t(n,e){return(0,rr.e)((t,r)=>{let i=null,s=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe(new kn.Q(r,p=>{null==i||i.unsubscribe();let y=0;const C=s++;(0,Lr.Xf)(n(p,C)).subscribe(i=new kn.Q(r,S=>r.next(e?e(p,S,C,y++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Vn=P(9468);function Dr(...n){const e=(0,to.yG)(n);return(0,rr.e)((t,r)=>{(e?ua(n,t,e):ua(n,t)).subscribe(r)})}function io(n,e,t,r,i){return(s,c)=>{let h=t,p=e,y=0;s.subscribe(new kn.Q(c,C=>{const S=y++;p=h?n(p,C,S):(h=!0,C),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function oi(n,e){return(0,rr.e)(io(n,e,arguments.length>=2,!0))}function cn(n,e){return(0,rr.e)((t,r)=>{let i=0;t.subscribe(new kn.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Yi(n){return(0,rr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new kn.Q(t,void 0,void 0,c=>{s=(0,Lr.Xf)(n(c,Yi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var Rn=P(5724),xi=P(5044);function Ns(n,e){return(0,xi.m)(e)?(0,Rn.z)(n,e,1):(0,Rn.z)(n,1)}function Bn(n){return n<=0?()=>ro.E:(0,rr.e)((e,t)=>{let r=[];e.subscribe(new kn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function so(n=ad){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ad(){return new ca}function bm(n){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function da(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cn((i,s)=>n(i,s,r)):ms.y,(0,Vn.q)(1),t?bm(e):so(()=>new ca))}var yr=P(7384);function ld(n){return(0,rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Vr{constructor(e,t){this.id=e,this.url=t}}class ru extends Vr{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jn extends Vr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jl extends Vr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xl extends Vr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $h extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zh extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qi extends Vr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gs extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qa extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ja{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ec{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xa{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class su{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class Wr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ki(n){return new Wr(n)}const Ps="ngNavigationCancelingError";function qh(n){const e=Error("NavigationCancelingError: "+n);return e[Ps]=!0,e}function wm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ji(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Ao(n[i],e[i]))return!1;return!0}function Ao(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function ou(n){return Array.prototype.concat.apply([],n)}function au(n){return n.length>0?n[n.length-1]:null}function On(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xi(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,xn.D)(Promise.resolve(n)):et(n)}const nc={exact:function sc(n,e,t){if(!tt(n.segments,e.segments)||!R(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!sc(n.children[r],e.children[r],t))return!1;return!0},subset:T},rc={exact:function(n,e){return Ji(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ao(n[t],e[t]))},ignored:()=>!0};function el(n,e,t){return nc[t.paths](n.root,e.root,t.matrixParams)&&rc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return D(n,e,e.segments,t)}function D(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!tt(i,t)||e.hasChildren()||!R(i,t,r))}if(n.segments.length===t.length){if(!tt(n.segments,t)||!R(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(tt(n.segments,i)&&R(n.segments,i,r)&&n.children[jt])&&D(n.children[jt],e,s,r)}}function R(n,e,t){return e.every((r,i)=>rc[t](n[i].parameters,r.parameters))}class U{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return Lt.serialize(this)}}class G{constructor(e,t){this.segments=e,this.children=t,this.parent=null,On(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vr(this)}}class le{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ki(this.parameters)),this._parameterMap}toString(){return Yh(this)}}function tt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Pt{}class sn{parse(e){const t=new c0(e);return new U(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${mn(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${bi(t)}=${bi(i)}`).join("&"):`${bi(t)}=${bi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Lt=new sn;function vr(n){return n.segments.map(e=>Yh(e)).join("/")}function mn(n,e){if(!n.hasChildren())return vr(n);if(e){const t=n.children[jt]?mn(n.children[jt],!1):"",r=[];return On(n.children,(i,s)=>{s!==jt&&r.push(`${s}:${mn(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return On(n.children,(r,i)=>{i===jt&&(t=t.concat(e(r,i)))}),On(n.children,(r,i)=>{i!==jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===jt?[mn(n.children[jt],!1)]:[`${i}:${mn(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${vr(n)}/${t[0]}`:`${vr(n)}/(${t.join("//")})`}}function ha(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bi(n){return ha(n).replace(/%3B/gi,";")}function _s(n){return ha(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qr(n){return decodeURIComponent(n)}function fa(n){return qr(n.replace(/\+/g,"%20"))}function Yh(n){return`${_s(n.path)}${function(n){return Object.keys(n).map(e=>`;${_s(e)}=${_s(n[e])}`).join("")}(n.parameters)}`}const pa=/^[^\/()?;=#]+/;function ma(n){const e=n.match(pa);return e?e[0]:""}const Em=/^[^=?&#]+/,Xh=/^[^&#]+/;class c0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new G([],{}):new G([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new G(e,t)),r}parseSegment(){const e=ma(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new le(qr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ma(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ma(this.remaining);i&&(r=i,this.capture(r))}e[qr(t)]=qr(r)}parseQueryParam(e){const t=function(n){const e=n.match(Em);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(Xh);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=fa(t),s=fa(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ma(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=jt);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[jt]:new G([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ud{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ef(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ef(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tf(e,this._root).map(t=>t.value)}}function ef(n,e){if(n===e.value)return e;for(const t of e.children){const r=ef(n,t);if(r)return r}return null}function tf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tf(n,t);if(r.length)return r.unshift(e),r}return[]}class Ri{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ga(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tl extends ud{constructor(e,t){super(e),this.snapshot=t,hd(this,e)}toString(){return this.snapshot.toString()}}function dd(n,e){const t=function(n,e){const c=new oc([],{},{},"",{},jt,e,null,n.root,-1,{});return new cu("",new Ri(c,[]))}(n,e),r=new Fr([new le("",{})]),i=new Fr({}),s=new Fr({}),c=new Fr({}),h=new Fr(""),p=new _a(r,i,c,h,s,jt,e,t.root);return p.snapshot=t.root,new tl(new Ri(p,[]),t)}class _a{constructor(e,t,r,i,s,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Je.U)(e=>ki(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Je.U)(e=>ki(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:nt(nt({},e.params),t.params),data:nt(nt({},e.data),t.data),resolve:nt(nt({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class oc{constructor(e,t,r,i,s,c,h,p,y,C,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cu extends ud{constructor(e,t){super(t),this.url=e,hd(this,t)}toString(){return xo(this._root)}}function hd(n,e){e.value._routerState=n,e.children.forEach(t=>hd(n,t))}function xo(n){const e=n.children.length>0?` { ${n.children.map(xo).join(", ")} } `:"";return`${n.value}${e}`}function fd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ji(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ji(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ji(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ji(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pd(n,e){const t=Ji(n.params,e.params)&&function(n,e){return tt(n,e)&&n.every((t,r)=>Ji(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pd(n.parent,e.parent))}function ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ac(n,r,i);return ac(n,r)})}(n,e,t);return new Ri(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>ac(n,h)),c}}const r=function(n){return new _a(new Fr(n.url),new Fr(n.params),new Fr(n.queryParams),new Fr(n.fragment),new Fr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ac(n,s));return new Ri(r,i)}}function uu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rl(n){return"object"==typeof n&&null!=n&&n.outlets}function rf(n,e,t,r,i){let s={};return r&&On(r,(c,h)=>{s[h]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),new U(t.root===n?e:Cm(t.root,n,e),s,i)}function Cm(n,e,t){const r={};return On(n.children,(i,s)=>{r[s]=i===e?t:Cm(i,e,t)}),new G(n.segments,r)}class sf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&uu(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(rl);if(i&&i!==au(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class il{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Im(n,e,t){if(n||(n=new G([],{})),0===n.segments.length&&n.hasChildren())return af(n,e,t);const r=function(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(rl(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!cc(p,y,c))return s;r+=2}else{if(!cc(p,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new G(n.segments.slice(0,r.pathIndex),{});return s.children[jt]=new G(n.segments.slice(r.pathIndex),n.children),af(s,0,i)}return r.match&&0===i.length?new G(n.segments,{}):r.match&&!n.hasChildren()?sl(n,e,t):r.match?af(n,0,i):sl(n,e,t)}function af(n,e,t){if(0===t.length)return new G(n.segments,{});{const r=function(n){return rl(n[0])?n[0].outlets:{[jt]:n}}(t),i={};return On(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=Im(n.children[c],e,s))}),On(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new G(n.segments,i)}}function sl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(rl(s)){const p=Tm(s.outlets);return new G(r,p)}if(0===i&&uu(t[0])){r.push(new le(n.segments[e].path,ts(t[0]))),i++;continue}const c=rl(s)?s.outlets[jt]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&uu(h)?(r.push(new le(c,ts(h))),i+=2):(r.push(new le(c,{})),i++)}return new G(r,{})}function Tm(n){const e={};return On(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=sl(new G([],{}),0,t))}),e}function ts(n){const e={};return On(n,(t,r)=>e[r]=`${t}`),e}function cc(n,e,t){return n==t.path&&Ji(e,t.parameters)}class Dm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ga(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),On(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ga(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ga(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ga(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Xa(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Wh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(fd(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),fd(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=p,c.outlet&&c.outlet.activateWith(i,p),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Mm{constructor(e,t){this.routes=e,this.module=t}}function ya(n){return"function"==typeof n}function Ro(n){return n instanceof U}const va=Symbol("INITIAL_VALUE");function du(){return $t(n=>Rs(n.map(e=>e.pipe((0,Vn.q)(1),Dr(va)))).pipe(oi((e,t)=>{let r=!1;return t.reduce((i,s,c)=>i!==va?i:(s===va&&(r=!0),r||!1!==s&&c!==t.length-1&&!Ro(s)?i:s),e)},va),cn(e=>e!==va),(0,Je.U)(e=>Ro(e)?e:!0===e),(0,Vn.q)(1)))}class km{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hu,this.attachRef=null}}class hu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new km,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let fu=(()=>{class n{constructor(t,r,i,s,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=s||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new Rm(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hu),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Rm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_a?this.route:e===hu?this.childContexts:this.parent.get(e,t)}}let uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[fu],encapsulation:2}),n})();function md(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];uf(r,_y(e,r))}}function uf(n,e){n.children&&md(n.children,e)}function _y(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ir(n){const e=n.children&&n.children.map(ir),t=e?mi(nt({},n),{children:e}):nt({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=uc),t}function ys(n){return n.outlet||jt}function b(n,e){const t=n.filter(r=>ys(r)===e);return t.push(...n.filter(r=>ys(r)!==e)),t}const m={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _(n,e,t){var h;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?nt({},m):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wm)(t,n,e);if(!i)return nt({},m);const s={};On(i.posParams,(p,y)=>{s[y]=p.path});const c=i.consumed.length>0?nt(nt({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:c,positionalParamSegments:null!=(h=i.posParams)?h:{}}}function w(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ye(n,e,r)&&ys(r)!==jt)}(n,t,r)){const c=new G(e,function(n,e,t,r){const i={};i[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ys(s)!==jt){const c=new G([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ys(s)]=c}return i}(n,e,r,new G(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ye(n,e,r))}(n,t,r)){const c=new G(n.segments,function(n,e,t,r,i,s){const c={};for(const h of r)if(Ye(n,t,h)&&!i[ys(h)]){const p=new G([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[ys(h)]=p}return nt(nt({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new G(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Ye(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ve(n,e,t,r){return!!(ys(n)===r||r!==jt&&Ye(e,t,n))&&("**"===n.path||_(e,n,t).matched)}function _t(n,e,t){return 0===e.length&&!n.children[t]}class kt{constructor(e){this.segmentGroup=e||null}}class Cn{constructor(e){this.urlTree=e}}function kr(n){return new Gn.y(e=>e.error(new kt(n)))}function ao(n){return new Gn.y(e=>e.error(new Cn(n)))}function Rr(n){return new Gn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Om{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=w(this.urlTree.root,[],[],this.config).segmentGroup,t=new G(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,jt).pipe((0,Je.U)(s=>this.createUrlTree(pu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yi(s=>{if(s instanceof Cn)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof kt?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,jt).pipe((0,Je.U)(i=>this.createUrlTree(pu(i),e.queryParams,e.fragment))).pipe(Yi(i=>{throw i instanceof kt?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new G([],{[jt]:e}):e;return new U(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Je.U)(s=>new G([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,xn.D)(i).pipe(Ns(s=>{const c=r.children[s],h=b(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,Je.U)(p=>({segment:p,outlet:s})))}),oi((s,c)=>(s[c.outlet]=c.segment,s),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cn((i,s)=>n(i,s,r)):ms.y,Bn(1),t?bm(e):so(()=>new ca))}())}expandSegment(e,t,r,i,s,c){return(0,xn.D)(r).pipe(Ns(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,c).pipe(Yi(y=>{if(y instanceof kt)return et(null);throw y}))),da(h=>!!h),Yi((h,p)=>{if(h instanceof ca||"EmptyError"===h.name){if(_t(t,i,s))return et(new G([],{}));throw new kt(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,c,h){return Ve(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):kr(t):kr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ao(s):this.lineralizeSegments(r,s).pipe((0,Rn.z)(c=>{const h=new G(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:p,lastChild:y,positionalParamSegments:C}=_(t,i,s);if(!h)return kr(t);const S=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?ao(S):this.lineralizeSegments(i,S).pipe((0,Rn.z)(k=>this.expandSegment(e,t,r,k.concat(s.slice(y)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Je.U)(k=>(r._loadedConfig=k,new G(i,{})))):et(new G(i,{}));const{matched:c,consumedSegments:h,lastChild:p}=_(t,r,i);if(!c)return kr(t);const y=i.slice(p);return this.getChildConfig(e,r,i).pipe((0,Rn.z)(S=>{const k=S.module,F=S.routes,{segmentGroup:B,slicedSegments:ee}=w(t,h,y,F),_e=new G(B.segments,B.children);if(0===ee.length&&_e.hasChildren())return this.expandChildren(k,F,_e).pipe((0,Je.U)(ct=>new G(h,ct)));if(0===F.length&&0===ee.length)return et(new G(h,{}));const qe=ys(r)===s;return this.expandSegment(k,_e,F,ee,qe?jt:s,!0).pipe((0,Je.U)(ft=>new G(h.concat(ft.segments),ft.children)))}))}getChildConfig(e,t,r){return t.children?et(new Mm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Rn.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,Je.U)(s=>(t._loadedConfig=s,s))):(n=t,new Gn.y(e=>e.error(qh(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):et(new Mm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?et(i.map(c=>{const h=e.get(c);let p;if((n=h)&&ya(n.canLoad))p=h.canLoad(t,r);else{if(!ya(h))throw new Error("Invalid CanLoad guard");p=h(t,r)}var n;return Xi(p)})).pipe(du(),(0,yr.b)(c=>{if(!Ro(c))return;const h=qh(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,Je.U)(c=>!0===c)):et(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return et(r);if(i.numberOfChildren>1||!i.children[jt])return Rr(e.redirectTo);i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new U(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return On(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return On(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new G(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function pu(n){const e={};for(const r of Object.keys(n.children)){const s=pu(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new G(n.segments.concat(e.segments),e.children)}return n}(new G(n.segments,e))}class mu{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gu{constructor(e,t){this.component=e,this.route=t}}function Pm(n,e,t){const r=n._root;return _u(r,e?e._root:null,t,[r.value])}function _d(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function _u(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ga(e);return n.children.forEach(c=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tt(n.url,e.url)||!Ji(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pd(n,e)||!Ji(n.queryParams,e.queryParams);default:return!pd(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new mu(r)):(s.data=c.data,s._resolvedData=c._resolvedData),_u(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new gu(h.outlet.component,c))}else c&&Fm(e,h,i),i.canActivateChecks.push(new mu(r)),_u(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),On(s,(c,h)=>Fm(c,t.getContext(h),i)),i}function Fm(n,e,t){const r=ga(n),i=n.value;On(r,(s,c)=>{Fm(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new gu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class YS{}function vy(n){return new Gn.y(e=>e.error(n))}class JS{constructor(e,t,r,i,s,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const e=w(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,jt);if(null===t)return null;const r=new oc([],Object.freeze({}),Object.freeze(nt({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ri(r,t),s=new cu(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=nl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const c=t.children[s],h=b(e,s),p=this.processSegmentGroup(h,c,s);if(null===p)return null;r.push(...p)}const i=f0(r);return i.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const s of e){const c=this.processSegmentAgainstRoute(s,t,r,i);if(null!==c)return c}return _t(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ve(e,t,r,i))return null;let s,c=[],h=[];if("**"===e.path){const F=r.length>0?au(r).parameters:{};s=new oc(r,F,Object.freeze(nt({},this.urlTree.queryParams)),this.urlTree.fragment,Oo(e),ys(e),e.component,e,p0(t),yu(t)+r.length,tD(e))}else{const F=_(t,e,r);if(!F.matched)return null;c=F.consumedSegments,h=r.slice(F.lastChild),s=new oc(c,F.parameters,Object.freeze(nt({},this.urlTree.queryParams)),this.urlTree.fragment,Oo(e),ys(e),e.component,e,p0(t),yu(t)+c.length,tD(e))}const p=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:y,slicedSegments:C}=w(t,c,h,p.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);var n;if(0===C.length&&y.hasChildren()){const F=this.processChildren(p,y);return null===F?null:[new Ri(s,F)]}if(0===p.length&&0===C.length)return[new Ri(s,[])];const S=ys(e)===i,k=this.processSegment(p,y,C,S?jt:i);return null===k?null:[new Ri(s,k)]}}function h0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function f0(n){const e=[],t=new Set;for(const r of n){if(!h0(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=f0(r.children);e.push(new Ri(r.value,i))}return e.filter(r=>!t.has(r))}function p0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yu(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Oo(n){return n.data||{}}function tD(n){return n.resolve||{}}function pf(n){return $t(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,Je.U)(()=>e)):et(e)})}class mf extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Lm=new u.OlP("ROUTES");class wy{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Je.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=s.create(e);return new Mm(ou(c.injector.get(Lm,void 0,u.XFs.Self|u.XFs.Optional)).map(ir),c)}),Yi(s=>{throw t._loader$=void 0,s}));return t._loader$=new Ya(i,()=>new vt.x).pipe(Ki()),t._loader$}loadModuleFactory(e){return Xi(e()).pipe((0,Rn.z)(t=>t instanceof u.YKP?et(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class Cy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _0(n){throw n}function iP(n,e,t){return e.parse("/")}function vu(n,e){return et(null)}const Iy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},y0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oi=(()=>{class n{constructor(t,r,i,s,c,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vt.x,this.errorHandler=_0,this.malformedUriErrorHandler=iP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vu,afterPreactivation:vu},this.urlHandlingStrategy=new Cy,this.routeReuseStrategy=new mf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const S=c.get(u.R0b);this.isNgZoneEnabled=S instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=new U(new G([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wy(c,h,k=>this.triggerEvent(new Ja(k)),k=>this.triggerEvent(new oo(k))),this.routerState=dd(this.currentUrlTree,this.rootComponentType),this.transitions=new Fr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(cn(i=>0!==i.id),(0,Je.U)(i=>mi(nt({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$t(i=>{let s=!1,c=!1;return et(i).pipe((0,yr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?mi(nt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$t(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Vm(h.source)&&(this.browserUrlTree=h.extractedUrl),et(h).pipe($t(S=>{const k=this.transitions.getValue();return r.next(new ru(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?ro.E:Promise.resolve(S)}),function(n,e,t,r){return $t(i=>function(n,e,t,r,i){return new Om(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Je.U)(s=>mi(nt({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yr.b)(S=>{this.currentNavigation=mi(nt({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Rn.z)(s=>function(n,e,t,r,i="emptyOnly",s="legacy"){try{const c=new JS(n,e,t,r,i,s).recognize();return null===c?vy(new YS):et(c)}catch(c){return vy(c)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,Je.U)(c=>mi(nt({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(F,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new $h(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:F,source:B,restoredState:ee,extras:_e}=h,qe=new ru(k,this.serializeUrl(F),B,ee);r.next(qe);const at=dd(F,this.rootComponentType).snapshot;return et(mi(nt({},h),{targetSnapshot:at,urlAfterRedirects:F,extras:mi(nt({},_e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),ro.E}),pf(h=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:F}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!F})}),(0,yr.b)(h=>{const p=new zh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,Je.U)(h=>mi(nt({},h),{guards:Pm(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Rn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?et(mi(nt({},t),{guardsResult:!0})):function(n,e,t,r){return(0,xn.D)(n).pipe((0,Rn.z)(i=>function(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?et(s.map(h=>{const p=_d(h,e,i);let y;if(function(n){return n&&ya(n.canDeactivate)}(p))y=Xi(p.canDeactivate(n,e,t,r));else{if(!ya(p))throw new Error("Invalid CanDeactivate guard");y=Xi(p(n,e,t,r))}return y.pipe(da())})).pipe(du()):et(!0)}(i.component,i.route,t,e,r)),da(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Rn.z)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,e,t,r){return(0,xn.D)(e).pipe(Ns(i=>ua(function(n,e){return null!==n&&e&&e(new ec(n)),et(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new iu(n)),et(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Os(()=>et(c.guards.map(p=>{const y=_d(p,c.node,t);let C;if(function(n){return n&&ya(n.canActivateChild)}(y))C=Xi(y.canActivateChild(r,n));else{if(!ya(y))throw new Error("Invalid CanActivateChild guard");C=Xi(y(r,n))}return C.pipe(da())})).pipe(du())));return et(s).pipe(du())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const i=r.map(s=>Os(()=>{const c=_d(s,e,t);let h;if(function(n){return n&&ya(n.canActivate)}(c))h=Xi(c.canActivate(e,n));else{if(!ya(c))throw new Error("Invalid CanActivate guard");h=Xi(c(e,n))}return h.pipe(da())}));return et(i).pipe(du())}(n,i.route,t))),da(i=>!0!==i,!0))}(r,s,n,e):et(h)),(0,Je.U)(h=>mi(nt({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,yr.b)(h=>{if(Ro(h.guardsResult)){const y=qh(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new Qi(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),cn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),pf(h=>{if(h.guards.canActivateChecks.length)return et(h).pipe((0,yr.b)(p=>{const y=new gs(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),$t(p=>{let y=!1;return et(p).pipe(function(n,e){return(0,Rn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return et(t);let s=0;return(0,xn.D)(i).pipe(Ns(c=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return et({});const s={};return(0,xn.D)(i).pipe((0,Rn.z)(c=>function(n,e,t,r){const i=_d(n,e,r);return Xi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,yr.b)(h=>{s[c]=h}))),Bn(1),(0,Rn.z)(()=>Object.keys(s).length===i.length?et(s):ro.E))}(n._resolve,n,e,r).pipe((0,Je.U)(s=>(n._resolvedData=s,n.data=nt(nt({},n.data),nl(n,t).resolve),null)))}(c.route,r,n,e)),(0,yr.b)(()=>s++),Bn(1),(0,Rn.z)(c=>s===i.length?et(t):ro.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,yr.b)(p=>{const y=new Qa(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),pf(h=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:F}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!F})}),(0,Je.U)(h=>{const p=function(n,e,t){const r=ac(n,e._root,t?t._root:void 0);return new tl(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return mi(nt({},h),{targetRouterState:p})}),(0,yr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Je.U)(r=>(new Dm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,yr.b)({next(){s=!0},complete(){s=!0}}),ld(()=>{var h;s||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(h=this.currentNavigation)?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Yi(h=>{if(c=!0,function(n){return n&&n[Ps]}(h)){const p=Ro(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Jl(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),p?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Vm(i.source)};this.scheduleNavigation(C,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Xl(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return ro.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(nt(nt({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var h;const i={replaceUrl:!0},s=(null==(h=t.state)?void 0:h.navigationId)?t.state:null;if(s){const p=nt({},s);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){md(t),this.config=t.map(ir),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S=nt(nt({},this.currentUrlTree.queryParams),s);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=s||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,i){if(0===t.length)return rf(e.root,e.root,e,r,i);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return On(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new sf(t,e,r)}(t);if(s.toRoot())return rf(e.root,new G([],{}),e,r,i);const c=function(n,e,t){if(n.isAbsolute)return new il(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new il(s,s===e.root,0)}const r=uu(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new il(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=c.processChildren?af(c.segmentGroup,c.index,s.commands):Im(c.segmentGroup,c.index,s.commands);return rf(c.segmentGroup,h,e,r,i)}(y,this.currentUrlTree,t,S,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ro(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?nt({},Iy):!1===r?nt({},y0):r,Ro(t))return el(this.currentUrlTree,t,i);const s=this.parseUrl(t);return el(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,c){var qe,at,ft;if(this.disposed)return Promise.resolve(!1);const h=this.transitions.value,p=Vm(r)&&h&&!Vm(h.source),y=h.rawUrl.toString()===t.toString(),C=h.id===(null==(qe=this.currentNavigation)?void 0:qe.id);if(p&&y&&C)return Promise.resolve(!0);let k,F,B;c?(k=c.resolve,F=c.reject,B=c.promise):B=new Promise((ct,Gt)=>{k=ct,F=Gt});const ee=++this.navigationId;let _e;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),_e=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(at=this.browserPageId)?at:0:(null!=(ft=this.browserPageId)?ft:0)+1):_e=0,this.setTransition({id:ee,targetPageId:_e,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:k,reject:F,promise:B,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),B.catch(ct=>Promise.reject(ct))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=nt(nt({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Jl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Vm(n){return"imperative"!==n}let yd=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new vt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:vd(this.skipLocationChange),replaceUrl:vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Oi),u.Y36(_a),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),Bm=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new vt.x,this.subscription=t.events.subscribe(s=>{s instanceof Jn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,c){if(0!==t||r||i||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:vd(this.skipLocationChange),replaceUrl:vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Oi),u.Y36(_a),u.Y36(Ue))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function vd(n){return""===n||!!n}class Sy{}class Ay{preload(e,t){return et(null)}}let Um=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new wy(i,r,p=>t.triggerEvent(new Ja(p)),p=>t.triggerEvent(new oo(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(cn(t=>t instanceof Jn),Ns(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,xn.D)(i).pipe((0,no.J)(),(0,Je.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Rn.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Oi),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Sy))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),My=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ru?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof su&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new su(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const dc=new u.OlP("ROUTER_CONFIGURATION"),xy=new u.OlP("ROUTER_FORROOT_GUARD"),bu=[ut,{provide:Pt,useClass:sn},{provide:Oi,useFactory:function(n,e,t,r,i,s,c={},h,p){const y=new Oi(null,n,e,t,r,i,ou(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(C=>{var S,k;null==(S=console.group)||S.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null==(k=console.groupEnd)||k.call(console)}),y},deps:[Pt,hu,ut,u.zs3,u.Sil,Lm,dc,[class{},new u.FiY],[class{},new u.FiY]]},hu,{provide:_a,useFactory:function(n){return n.routerState.root},deps:[Oi]},Um,Ay,class{preload(e,t){return t().pipe(Yi(()=>et(null)))}},{provide:dc,useValue:{enableTracing:!1}}];function v0(){return new u.PXZ("Router",Oi)}let bd=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[bu,ky(t),{provide:xy,useFactory:oD,deps:[[Oi,new u.FiY,new u.tp0]]},{provide:dc,useValue:r||{}},{provide:Ue,useFactory:jm,deps:[ce,[new u.tBr(Se),new u.FiY],dc]},{provide:My,useFactory:sD,deps:[Oi,Vh,dc]},{provide:Sy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Ay},{provide:u.PXZ,multi:!0,useFactory:v0},[Hm,{provide:u.ip1,multi:!0,useFactory:Gm,deps:[Hm]},{provide:Oy,useFactory:$m,deps:[Hm]},{provide:u.tb,multi:!0,useExisting:Oy}]]}}static forChild(t){return{ngModule:n,providers:[ky(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xy,8),u.LFG(Oi,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function sD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new My(n,e,t)}function jm(n,e,t={}){return t.useHash?new je(n,e):new Be(n,e)}function oD(n){return"guarded"}function ky(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Lm,multi:!0,useValue:n}]}let Hm=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vt.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(Oi),c=this.injector.get(dc);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(dc),i=this.injector.get(Um),s=this.injector.get(My),c=this.injector.get(Oi),h=this.injector.get(u.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),s.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Gm(n){return n.appInitializer.bind(n)}function $m(n){return n.bootstrapListener.bind(n)}const Oy=new u.OlP("Router Initializer"),Py=[];let gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[bd.forRoot(Py)],bd]}),n})();class zm{constructor(e=!1,t,r=!0){this._multiple=e,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new vt.x,t&&t.length&&(e?t.forEach(i=>this._markSelected(i)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}var _f=P(6921);function dr(n){return(0,rr.e)((e,t)=>{(0,Lr.Xf)(n).subscribe(new kn.Q(t,()=>t.complete(),_f.Z)),!t.closed&&e.subscribe(t)})}function sr(n){return null!=n&&"false"!=`${n}`}function Zr(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function yf(n){return Array.isArray(n)?n:[n]}function Br(n){return null==n?"":"string"==typeof n?n:`${n}px`}function al(n){return n instanceof u.SBq?n.nativeElement:n}const fD=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,u.f3M)(re)}}),pD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let wd=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?pD.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fD,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ed=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class S0 extends class{constructor(){this.expansionModel=new zm(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(r=>this._trackByValue(r)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(r=>this._trackByValue(r)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}{constructor(e,t,r){super(),this.getLevel=e,this.isExpandable=t,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const r=[];for(let i=this.dataNodes.indexOf(e)+1;i<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[i]);i++)r.push(this.dataNodes[i]);return r}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}const vs=new u.OlP("CDK_TREE_NODE_OUTLET_NODE");let Cd=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(vs,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class gD{constructor(e){this.$implicit=e}}let Id=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),wa=(()=>{class n{constructor(t,r){this._differs=t,this._changeDetectorRef=r,this._onDestroy=new vt.x,this._levels=new Map,this.viewChange=new Fr({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(r=>!r.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;!function(n){return n&&"function"==typeof n.connect}(this._dataSource)?function(n){return!!n&&(n instanceof Gn.y||(0,xi.m)(n.lift)&&(0,xi.m)(n.subscribe))}(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=et(this._dataSource)):t=this._dataSource.connect(this),t&&(this._dataSubscription=t.pipe(dr(this._onDestroy)).subscribe(r=>this.renderNodeChanges(r)))}renderNodeChanges(t,r=this._dataDiffer,i=this._nodeOutlet.viewContainer,s){const c=r.diff(t);!c||(c.forEachOperation((h,p,y)=>{if(null==h.previousIndex)this.insertNode(t[y],y,i,s);else if(null==y)i.remove(p),this._levels.delete(h.item);else{const C=i.get(p);i.move(C,y)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,r){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(r,t))||this._defaultNodeDef}insertNode(t,r,i,s){const c=this._getNodeDef(t,r),h=new gD(t);h.level=this.treeControl.getLevel?this.treeControl.getLevel(t):void 0!==s&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,h.level),(i||this._nodeOutlet.viewContainer).createEmbeddedView(c.template,h,r),ll.mostRecentTreeNode&&(ll.mostRecentTreeNode.data=t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,Id,5),2&t){let s;u.iGM(s=u.CRH())&&(r._nodeDefs=s)}},viewQuery:function(t,r){if(1&t&&u.Gf(Cd,7),2&t){let i;u.iGM(i=u.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,r){1&t&&u.GkF(0,0)},directives:[Cd],encapsulation:2}),n})(),ll=(()=>{class n{constructor(t,r){this._elementRef=t,this._tree=r,this._destroyed=new vt.x,this._dataChanges=new vt.x,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(n){let e=n.parentElement;for(;e&&!qm(e);)e=e.parentElement;return e?e.classList.contains("cdk-nested-tree-node")?Zr(e.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(wa))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("aria-expanded",r.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();function qm(n){const e=n.classList;return!(!(null==e?void 0:e.contains("cdk-nested-tree-node"))&&!(null==e?void 0:e.contains("cdk-tree")))}const Ly=/([A-Za-z%]+)$/;let Vy,bf=(()=>{class n{constructor(t,r,i,s){this._treeNode=t,this._tree=r,this._element=i,this._dir=s,this._destroyed=new vt.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe(dr(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,r=null==this._level?t:this._level;return"number"==typeof r?`${r*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const r=this._paddingIndent();if(r!==this._currentPadding||t){const i=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",c="paddingLeft"===s?"paddingRight":"paddingLeft";i.style[s]=r||"",i.style[c]="",this._currentPadding=r}}_setLevelInput(t){this._level=Zr(t,null),this._setPadding()}_setIndentInput(t){let r=t,i="px";if("string"==typeof t){const s=t.split(Ly);r=s[0],i=s[1]||i}this.indentUnits=i,this._indent=Zr(r),this._setPadding()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ll),u.Y36(wa),u.Y36(u.SBq),u.Y36(wd,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),M0=(()=>{class n{constructor(t,r){this._tree=t,this._treeNode=r,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=sr(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wa),u.Y36(ll))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),yD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();try{Vy="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Vy=!1}let wf,Kr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Eo(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Vy)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x0=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function bD(){if(wf)return wf;if("object"!=typeof document||!document)return wf=new Set(x0),wf;let n=document.createElement("input");return wf=new Set(x0.filter(e=>(n.setAttribute("type",e),n.type===e))),wf}let Td,Sd,Dd,R0;function Zm(n){return function(){if(null==Td&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Td=!0}))}finally{Td=Td||!1}return Td}()?n:!!n.capture}function wD(){if(null==Dd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Dd=!1,Dd;if("scrollBehavior"in document.documentElement.style)Dd=!0;else{const n=Element.prototype.scrollTo;Dd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Dd}function Km(){if("object"!=typeof document||!document)return 0;if(null==Sd){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),Sd=0,0===n.scrollLeft&&(n.scrollLeft=1,Sd=0===n.scrollLeft?1:2),n.remove()}return Sd}function ED(n){if(function(){if(null==R0){const n="undefined"!=typeof document?document.head:null;R0=!(!n||!n.createShadowRoot&&!n.attachShadow)}return R0}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ad(n){return n.composedPath?n.composedPath()[0]:n.target}function O0(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Df(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var pc=P(2210);function Af(n,e=pc.z){return(0,rr.e)((t,r)=>{let i=null,s=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=c+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe(new kn.Q(r,y=>{s=y,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}function nE(n){return cn((e,t)=>n<=t)}function Xm(n,e=ms.y){return n=null!=n?n:XD,(0,rr.e)((t,r)=>{let i,s=!0;t.subscribe(new kn.Q(r,c=>{const h=e(c);(s||!n(i,h))&&(s=!1,i=h,r.next(c))}))})}function XD(n,e){return n===e}class Po extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new vt.x,this._typeaheadSubscription=Zi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new vt.x,this.change=new vt.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,yr.b)(t=>this._pressedLetters.push(t)),Af(e),cn(()=>this._pressedLetters.length>0),(0,Je.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,c=r[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Df(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let rA=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===eg(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=eg(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||uE(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function eg(n){if(!uE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class lA{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(e)}}let cA=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new lA(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(rA),u.LFG(u.R0b),u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function ng(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Ca=new u.OlP("cdk-input-modality-detector-options"),xf={ignoreKeys:[18,17,224,91,16]},co=Zm({passive:!0,capture:!0});let rg=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Fr(null),this._lastTouchMs=0,this._onKeydown=c=>{var h,p;(null==(p=null==(h=this._options)?void 0:h.ignoreKeys)?void 0:p.some(y=>y===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ad(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dE(c)?"keyboard":"mouse"),this._mostRecentTarget=Ad(c))},this._onTouchstart=c=>{ng(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ad(c))},this._options=nt(nt({},xf),s),this.modalityDetected=this._modality.pipe(nE(1)),this.modalityChanged=this.modalityDetected.pipe(Xm()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,co),i.addEventListener("mousedown",this._onMousedown,co),i.addEventListener("touchstart",this._onTouchstart,co)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,co),document.removeEventListener("mousedown",this._onMousedown,co),document.removeEventListener("touchstart",this._onTouchstart,co))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr),u.LFG(u.R0b),u.LFG(re),u.LFG(Ca,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uo=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),xd=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Eu=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,c;return 1===r.length&&"number"==typeof r[0]?c=r[0]:[s,c]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==c&&i&&(c=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,r;clearTimeout(this._previousTimeout),null==(t=this._liveElement)||t.remove(),this._liveElement=null,null==(r=this._currentResolve)||r.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(uo,8),u.LFG(u.R0b),u.LFG(re),u.LFG(xd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kd=new u.OlP("cdk-focus-monitor-default-options"),ul=Zm({passive:!0,capture:!0});let mc=(()=>{class n{constructor(t,r,i,s,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new vt.x,this._rootNodeFocusAndBlurListener=h=>{const p=Ad(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let C=p;C;C=C.parentElement)y.call(this,h,C)},this._document=s,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(t,r=!1){const i=al(t);if(!this._platform.isBrowser||1!==i.nodeType)return et(null);const s=ED(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new vt.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=al(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=al(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Ad(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ul),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ul)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ul),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ul),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(Kr),u.LFG(rg),u.LFG(re,8),u.LFG(kd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cu="cdk-high-contrast-black-on-white",Iu="cdk-high-contrast-white-on-black",ig="cdk-high-contrast-active";let hE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ig),t.remove(Cu),t.remove(Iu),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(ig),t.add(Cu)):2===r&&(t.add(ig),t.add(Iu))}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr),u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yy{}const Ia="*";function sg(n,e){return{type:7,name:n,definitions:e,options:{}}}function Rd(n,e=null){return{type:4,styles:e,timings:n}}function Qy(n,e=null){return{type:2,steps:n,options:e}}function dl(n){return{type:6,styles:n,offset:null}}function Od(n,e,t){return{type:0,name:n,styles:e,options:t}}function Of(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function pE(n){Promise.resolve(null).then(n)}class Nf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class mE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?pE(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function og(){return"undefined"!=typeof window&&void 0!==window.document}function Jy(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Tu(n){switch(n.length){case 0:return new Nf;case 1:return n[0];default:return new mE(n)}}function pA(n,e,t,r,i={},s={}){const c=[],h=[];let p=-1,y=null;if(r.forEach(C=>{const S=C.offset,k=S==p,F=k&&y||{};Object.keys(C).forEach(B=>{let ee=B,_e=C[B];if("offset"!==B)switch(ee=e.normalizePropertyName(ee,c),_e){case"!":_e=i[B];break;case Ia:_e=s[B];break;default:_e=e.normalizeStyleValue(B,ee,_e,c)}F[ee]=_e}),k||h.push(F),y=F,p=S}),c.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${c.join(C)}`)}return h}function gE(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Xy(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Xy(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Xy(t,"destroy",n)))}}function Xy(n,e,t){const r=t.totalTime,s=ag(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function ag(n,e,t,r,i="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!c}}function ho(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function _E(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let gc=(n,e)=>!1,ev=(n,e)=>!1,tv=(n,e,t)=>[];const yE=Jy();(yE||"undefined"!=typeof Element)&&(gc=og()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),ev=(()=>{if(yE||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):ev}})(),tv=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let Ta=null,bE=!1;function lg(n){Ta||(Ta=("undefined"!=typeof document?document.body:null)||{},bE=!!Ta.style&&"WebkitAppearance"in Ta.style);let e=!0;return Ta.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ta.style,!e&&bE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ta.style)),e}const nv=ev,rv=gc,iv=tv;function wE(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let sv=(()=>{class n{validateStyleProperty(t){return lg(t)}matchesElement(t,r){return nv(t,r)}containsElement(t,r){return rv(t,r)}query(t,r,i){return iv(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,c,h=[],p){return new Nf(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ov=(()=>{class n{}return n.NOOP=new sv,n})();const CE="ng-enter",Nd="ng-leave",_c="ng-trigger",Ff=".ng-trigger",cg="ng-animating",Lf=".ng-animating";function Su(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Vf(parseFloat(e[1]),e[2])}function Vf(n,e){return"s"===e?1e3*n:n}function Pd(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,s=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=Vf(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=Vf(parseFloat(p),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:c}}(n,e,t)}function Bf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Sa(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Bf(n,t);return t}function ug(n,e,t){return t?e+":"+t+";":""}function cv(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=ug(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ug(0,AE(t),n.style[t]));n.setAttribute("style",e)}function Fo(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Hf(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Jy()&&cv(n))}function hl(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Hf(t);n.style[r]=""}),Jy()&&cv(n))}function Fd(n){return Array.isArray(n)?1==n.length?n[0]:Qy(n):n}const Uf=new RegExp("{{\\s*(.+?)\\s*}}","g");function dg(n){let e=[];if("string"==typeof n){let t;for(;t=Uf.exec(n);)e.push(t[1]);Uf.lastIndex=0}return e}function hg(n,e,t){const r=n.toString(),i=r.replace(Uf,(s,c)=>{let h=e[c];return e.hasOwnProperty(c)||(t.push(`Please provide a value for the animation param ${c}`),h=""),h.toString()});return i==r?n:i}function jf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const DE=/-+([a-z0-9])/g;function Hf(n){return n.replace(DE,(...e)=>e[1].toUpperCase())}function AE(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ME(n,e){return 0===n||0===e}function uv(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],c=[];if(r.forEach(h=>{s.hasOwnProperty(h)||c.push(h),s[h]=t[h]}),c.length)for(var i=1;i<e.length;i++){let h=e[i];c.forEach(function(p){h[p]=fg(n,p)})}}return e}function bs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function fg(n,e){return window.getComputedStyle(n)[e]}function xE(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const p=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],c=r[3];e.push(dv(i,c));"<"==s[0]&&!("*"==i&&"*"==c)&&e.push(dv(c,i))}(r,t,e)):t.push(n),t}const Gf=new Set(["true","1"]),$f=new Set(["false","0"]);function dv(n,e){const t=Gf.has(n)||$f.has(n),r=Gf.has(e)||$f.has(e);return(i,s)=>{let c="*"==n||n==i,h="*"==e||e==s;return!c&&t&&"boolean"==typeof i&&(c=i?Gf.has(n):$f.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?Gf.has(e):$f.has(e)),c&&h}}const OE=new RegExp("s*:selfs*,?","g");function NE(n,e,t){return new gA(n).build(e,t)}class gA{constructor(e){this._driver=e}build(e,t){const r=new Yr(t);return this._resetContextStyleTimingState(r),bs(this,Fd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,c.push(p)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=i||{};if(r.styles.forEach(h=>{if(pg(h)){const p=h;Object.keys(p).forEach(y=>{dg(p[y]).forEach(C=>{c.hasOwnProperty(C)||s.add(C)})})}}),s.size){const h=jf(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=bs(this,Fd(e.animation),t);return{type:1,matchers:xE(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:yc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>bs(this,r,t)),options:yc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(c=>{t.currentTime=r;const h=bs(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:yc(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return fv(Pd(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=fv(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||Pd(r,e),fv(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:dl({});if(5==s.type)i=this.visitKeyframes(s,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=dl(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Ia?r.push(c):t.errors.push(`The provided style string value ${c} is not allowed.`):r.push(c)}):r.push(e.styles);let i=!1,s=null;return r.forEach(c=>{if(pg(c)){const h=c,p=h.easing;if(p&&(s=p,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const p=t.collectedStyles[t.currentQuerySelector],y=p[h];let C=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),C=!1),s=y.startTime),C&&(p[h]={startTime:s,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=dg(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(c[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const c=[];let h=!1,p=!1,y=0;const C=e.steps.map(qe=>{const at=this._makeStyleAst(qe,t);let ft=null!=at.offset?at.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(pg(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(pg(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(at.styles),ct=0;return null!=ft&&(s++,ct=at.offset=ft),p=p||ct<0||ct>1,h=h||ct<y,y=ct,c.push(ct),at});p&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const S=e.steps.length;let k=0;s>0&&s<S?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(k=1/(S-1));const F=S-1,B=t.currentTime,ee=t.currentAnimateTimings,_e=ee.duration;return C.forEach((qe,at)=>{const ft=k>0?at==F?1:k*at:c[at],ct=ft*_e;t.currentTime=B+ee.delay+ct,ee.duration=ct,this._validateStyleAst(qe,t),qe.offset=ft,r.styles.push(qe)}),r}visitReference(e,t){return{type:8,animation:bs(this,Fd(e.animation),t),options:yc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:yc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:yc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(OE,"")),n=n.replace(/@\*/g,Ff).replace(/@\w+/g,t=>Ff+"-"+t.substr(1)).replace(/:animating/g,Lf),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ho(t.collectedStyles,t.currentQuerySelector,{});const h=bs(this,Fd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:yc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Pd(e.timings,t.errors,!0);return{type:12,animation:bs(this,Fd(e.animation),t),timings:r,options:null}}}class Yr{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function pg(n){return!Array.isArray(n)&&"object"==typeof n}function yc(n){return n?(n=Bf(n)).params&&(n.params=function(n){return n?Bf(n):null}(n.params)):n={},n}function fv(n,e,t){return{duration:n,delay:e,easing:t}}function mg(n,e,t,r,i,s,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:c,subTimeline:h}}class zf{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const bA=new RegExp(":enter","g"),wA=new RegExp(":leave","g");function gg(n,e,t,r,i,s={},c={},h,p,y=[]){return(new c1).buildKeyframes(n,e,t,r,i,s,c,h,p,y)}class c1{buildKeyframes(e,t,r,i,s,c,h,p,y,C=[]){y=y||new zf;const S=new Wf(e,t,y,i,s,C,[]);S.options=p,S.currentTimeline.setStyles([c],null,S.errors,p),bs(this,r,S);const k=S.timelines.filter(F=>F.containsAnimation());if(k.length&&Object.keys(h).length){const F=k[k.length-1];F.allowOnlyTimelineStyles()||F.setStyles([h],null,S.errors,p)}return k.length?k.map(F=>F.buildKeyframes()):[mg(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const c=null!=r.duration?Su(r.duration):null,h=null!=r.delay?Su(r.delay):null;return 0!==c&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,c,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),bs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Bd);const c=Su(s.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>bs(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Su(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),bs(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Pd(t.params?hg(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Su(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Bd);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(e.options,y);s&&S.delayNextStep(s),y===t.element&&(p=S.currentTimeline),bs(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),h=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const S=C.currentTime;bs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const Bd={};class Wf{constructor(e,t,r,i,s,c,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Fs(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Su(r.duration)),null!=r.delay&&(i.delay=Su(r.delay));const s=r.params;if(s){let c=i.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=hg(s[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Wf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Bd,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new EA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(bA,"."+this._enterClassName)).replace(wA,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&c.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class Fs{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Fs(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ia,this._currentKeyframe[t]=Ia}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},c=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Ia})):Sa(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const p=hg(c[h],s,r);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Ia),this._updateStyle(h,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=Sa(h,!0);Object.keys(y).forEach(C=>{const S=y[C];"!"==S?e.add(C):S==Ia&&t.add(C)}),r||(y.offset=p/this.duration),i.push(y)});const s=e.size?jf(e.values()):[],c=t.size?jf(t.values()):[];if(r){const h=i[0],p=Bf(h);h.offset=0,p.offset=1,i=[h,p]}return mg(this.element,i,s,c,this.duration,this.startTime,this.easing,!1)}}class EA extends Fs{constructor(e,t,r,i,s,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=r+t,h=t/c,p=Sa(e[0],!1);p.offset=0,s.push(p);const y=Sa(e[0],!1);y.offset=BE(h),s.push(y);const C=e.length-1;for(let S=1;S<=C;S++){let k=Sa(e[S],!1);k.offset=BE((t+k.offset*r)/c),s.push(k)}r=c,t=0,i="",e=s}return mg(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function BE(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Ls{}class UE extends Ls{normalizePropertyName(e,t){return Hf(e)}normalizeStyleValue(e,t,r,i){let s="";const c=r.toString().trim();if(IA[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return c+s}}const IA=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function jE(n,e,t,r,i,s,c,h,p,y,C,S,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:S,errors:k}}const pv={};class _g{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):c}build(e,t,r,i,s,c,h,p,y,C){const S=[],k=this.ast.options&&this.ast.options.params||pv,B=this.buildStyles(r,h&&h.params||pv,S),ee=p&&p.params||pv,_e=this.buildStyles(i,ee,S),qe=new Set,at=new Map,ft=new Map,ct="void"===i,Gt={params:nt(nt({},k),ee)},Xt=C?[]:gg(e,t,this.ast.animation,s,c,B,_e,Gt,y,S);let Pn=0;if(Xt.forEach(Wu=>{Pn=Math.max(Wu.duration+Wu.delay,Pn)}),S.length)return jE(t,this._triggerName,r,i,ct,B,_e,[],[],at,ft,Pn,S);Xt.forEach(Wu=>{const qu=Wu.element,rG=ho(at,qu,{});Wu.preStyleProps.forEach(dm=>rG[dm]=!0);const a0=ho(ft,qu,{});Wu.postStyleProps.forEach(dm=>a0[dm]=!0),qu!==t&&qe.add(qu)});const qs=jf(qe.values());return jE(t,this._triggerName,r,i,ct,B,_e,Xt,qs,at,ft,Pn)}}class SA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Bf(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!=c&&(i[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(h=>{let p=c[h];p.length>1&&(p=hg(p,i,t));const y=this.normalizer.normalizePropertyName(h,t);p=this.normalizer.normalizeStyleValue(h,y,p,t),r[y]=p})}}),r}}class DA{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new SA(i.style,i.options&&i.options.params||{},r)}),mv(this.states,"true","1"),mv(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new _g(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new _g(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function mv(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const yg=new zf;class AA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=NE(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=pA(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let c;const h=new Map;if(s?(c=gg(this._driver,t,s,CE,Nd,{},{},r,yg,i),c.forEach(C=>{const S=ho(h,C.element,{});C.postStyleProps.forEach(k=>S[k]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),c=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((C,S)=>{Object.keys(C).forEach(k=>{C[k]=this._driver.computeStyle(S,k,Ia)})});const y=Tu(c.map(C=>{const S=h.get(C.element);return this._buildPlayer(C,{},S)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=ag(t,"","","");return gE(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const gv="ng-animate-queued",vg="ng-animate-disabled",Zf=".ng-animate-disabled",WE=[],yv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vs="__ng_removed";class bg{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const s=Bf(e);delete s.value,this.options=s}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ud="void",vv=new bg(Ud);class MA{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,fo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const s=ho(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};s.push(c);const h=ho(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(fo(e,_c),fo(e,_c+"-"+t),h[t]=vv),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),c=new bv(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(fo(e,_c),fo(e,_c+"-"+t),this._engine.statesByElement.set(e,h={}));let p=h[t];const y=new bg(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[t]=y,p||(p=vv),y.value!==Ud&&p.value===y.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const ee=[],_e=s.matchStyles(p.value,p.params,ee),qe=s.matchStyles(y.value,y.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{hl(e,_e),Fo(e,qe)})}return}const k=ho(this._engine.playersByElement,e,[]);k.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let F=s.matchTransition(p.value,y.value,e,y.params),B=!1;if(!F){if(!i)return;F=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:p,toState:y,player:c,isFallbackTransition:B}),B||(fo(e,gv),c.onStart(()=>{jd(e,gv)})),c.onDone(()=>{let ee=this.players.indexOf(c);ee>=0&&this.players.splice(ee,1);const _e=this._engine.playersByElement.get(e);if(_e){let qe=_e.indexOf(c);qe>=0&&_e.splice(qe,1)}}),this.players.push(c),k.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Ff,!0);r.forEach(i=>{if(i[Vs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e);if(s){const c=[];if(Object.keys(s).forEach(h=>{if(this._triggers[h]){const p=this.trigger(e,h,Ud,i);p&&c.push(p)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Tu(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const c=s.name;if(i.has(c))return;i.add(c);const p=this._triggers[c].fallbackTransition,y=r[c]||vv,C=new bg(Ud),S=new bv(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:y,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Vs];(!s||s===yv)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){fo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=ag(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,gE(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class xA{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new MA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const c=r[i[s]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(wg(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!wg(t))return;const s=t[Vs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),fo(e,vg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),jd(e,vg))}removeNode(e,t,r,i){if(wg(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[Vs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,s){return wg(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Ff,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Lf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Tu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Vs];if(t&&t.setForRemoval){if(e[Vs]=yv,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Zf)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Zf,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)fo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Tu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new zf,i=[],s=new Map,c=[],h=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(yt=>{C.add(yt);const Rt=this.driver.query(yt,".ng-animate-queued",!0);for(let qt=0;qt<Rt.length;qt++)C.add(Rt[qt])});const S=this.bodyNode,k=Array.from(this.statesByElement.keys()),F=YE(k,this.collectedEnterElements),B=new Map;let ee=0;F.forEach((yt,Rt)=>{const qt=CE+ee++;B.set(Rt,qt),yt.forEach(An=>fo(An,qt))});const _e=[],qe=new Set,at=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const Rt=this.collectedLeaveElements[yt],qt=Rt[Vs];qt&&qt.setForRemoval&&(_e.push(Rt),qe.add(Rt),qt.hasAnimation?this.driver.query(Rt,".ng-star-inserted",!0).forEach(An=>qe.add(An)):at.add(Rt))}const ft=new Map,ct=YE(k,Array.from(qe));ct.forEach((yt,Rt)=>{const qt=Nd+ee++;ft.set(Rt,qt),yt.forEach(An=>fo(An,qt))}),e.push(()=>{F.forEach((yt,Rt)=>{const qt=B.get(Rt);yt.forEach(An=>jd(An,qt))}),ct.forEach((yt,Rt)=>{const qt=ft.get(Rt);yt.forEach(An=>jd(An,qt))}),_e.forEach(yt=>{this.processLeaveNode(yt)})});const Gt=[],Xt=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(qt=>{const An=qt.player,$i=qt.element;if(Gt.push(An),this.collectedEnterElements.length){const Vc=$i[Vs];if(Vc&&Vc.setForMove)return void An.destroy()}const Lc=!S||!this.driver.containsElement(S,$i),Go=ft.get($i),Rh=B.get($i),Hr=this._buildInstruction(qt,r,Rh,Go,Lc);if(Hr.errors&&Hr.errors.length)Xt.push(Hr);else{if(Lc)return An.onStart(()=>hl($i,Hr.fromStyles)),An.onDestroy(()=>Fo($i,Hr.toStyles)),void i.push(An);if(qt.isFallbackTransition)return An.onStart(()=>hl($i,Hr.fromStyles)),An.onDestroy(()=>Fo($i,Hr.toStyles)),void i.push(An);Hr.timelines.forEach(Vc=>Vc.stretchStartingKeyframe=!0),r.append($i,Hr.timelines),c.push({instruction:Hr,player:An,element:$i}),Hr.queriedElements.forEach(Vc=>ho(h,Vc,[]).push(An)),Hr.preStyleProps.forEach((Vc,l0)=>{const US=Object.keys(Vc);if(US.length){let hm=p.get(l0);hm||p.set(l0,hm=new Set),US.forEach(eP=>hm.add(eP))}}),Hr.postStyleProps.forEach((Vc,l0)=>{const US=Object.keys(Vc);let hm=y.get(l0);hm||y.set(l0,hm=new Set),US.forEach(eP=>hm.add(eP))})}});if(Xt.length){const yt=[];Xt.forEach(Rt=>{yt.push(`@${Rt.triggerName} has failed due to:\n`),Rt.errors.forEach(qt=>yt.push(`- ${qt}\n`))}),Gt.forEach(Rt=>Rt.destroy()),this.reportError(yt)}const Pn=new Map,qs=new Map;c.forEach(yt=>{const Rt=yt.element;r.has(Rt)&&(qs.set(Rt,Rt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,Pn))}),i.forEach(yt=>{const Rt=yt.element;this._getPreviousPlayers(Rt,!1,yt.namespaceId,yt.triggerName,null).forEach(An=>{ho(Pn,Rt,[]).push(An),An.destroy()})});const Wu=_e.filter(yt=>wv(yt,p,y)),qu=new Map;KE(qu,this.driver,at,y,Ia).forEach(yt=>{wv(yt,p,y)&&Wu.push(yt)});const a0=new Map;F.forEach((yt,Rt)=>{KE(a0,this.driver,new Set(yt),p,"!")}),Wu.forEach(yt=>{const Rt=qu.get(yt),qt=a0.get(yt);qu.set(yt,nt(nt({},Rt),qt))});const dm=[],iG=[],sG={};c.forEach(yt=>{const{element:Rt,player:qt,instruction:An}=yt;if(r.has(Rt)){if(C.has(Rt))return qt.onDestroy(()=>Fo(Rt,An.toStyles)),qt.disabled=!0,qt.overrideTotalTime(An.totalTime),void i.push(qt);let $i=sG;if(qs.size>1){let Go=Rt;const Rh=[];for(;Go=Go.parentNode;){const Hr=qs.get(Go);if(Hr){$i=Hr;break}Rh.push(Go)}Rh.forEach(Hr=>qs.set(Hr,$i))}const Lc=this._buildAnimation(qt.namespaceId,An,Pn,s,a0,qu);if(qt.setRealPlayer(Lc),$i===sG)dm.push(qt);else{const Go=this.playersByElement.get($i);Go&&Go.length&&(qt.parentPlayer=Tu(Go)),i.push(qt)}}else hl(Rt,An.fromStyles),qt.onDestroy(()=>Fo(Rt,An.toStyles)),iG.push(qt),C.has(Rt)&&i.push(qt)}),iG.forEach(yt=>{const Rt=s.get(yt.element);if(Rt&&Rt.length){const qt=Tu(Rt);yt.setRealPlayer(qt)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<_e.length;yt++){const Rt=_e[yt],qt=Rt[Vs];if(jd(Rt,Nd),qt&&qt.hasAnimation)continue;let An=[];if(h.size){let Lc=h.get(Rt);Lc&&Lc.length&&An.push(...Lc);let Go=this.driver.query(Rt,Lf,!0);for(let Rh=0;Rh<Go.length;Rh++){let Hr=h.get(Go[Rh]);Hr&&Hr.length&&An.push(...Hr)}}const $i=An.filter(Lc=>!Lc.destroyed);$i.length?NA(this,Rt,$i):this.processLeaveNode(Rt)}return _e.length=0,dm.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const Rt=this.players.indexOf(yt);this.players.splice(Rt,1)}),yt.play()}),dm}elementContainsData(e,t){let r=!1;const i=t[Vs];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==Ud;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const s=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==s,S=ho(r,y,[]);this._getPreviousPlayers(y,C,c,h,t.toState).forEach(F=>{const B=F.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),F.destroy(),S.push(F)})}hl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,c){const h=t.triggerName,p=t.element,y=[],C=new Set,S=new Set,k=t.timelines.map(B=>{const ee=B.element;C.add(ee);const _e=ee[Vs];if(_e&&_e.removedBeforeQueried)return new Nf(B.duration,B.delay);const qe=ee!==p,at=function(n){const e=[];return QE(n,e),e}((r.get(ee)||WE).map(Pn=>Pn.getRealPlayer())).filter(Pn=>!!Pn.element&&Pn.element===ee),ft=s.get(ee),ct=c.get(ee),Gt=pA(0,this._normalizer,0,B.keyframes,ft,ct),Xt=this._buildPlayer(B,Gt,at);if(B.subTimeline&&i&&S.add(ee),qe){const Pn=new bv(e,h,ee);Pn.setRealPlayer(Xt),y.push(Pn)}return Xt});y.forEach(B=>{ho(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>fo(B,cg));const F=Tu(k);return F.onDestroy(()=>{C.forEach(B=>jd(B,cg)),Fo(p,t.toStyles)}),S.forEach(B=>{ho(i,B,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Nf(e.duration,e.delay)}}class bv{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Nf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>gE(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ho(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function wg(n){return n&&1===n.nodeType}function ZE(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function KE(n,e,t,r,i){const s=[];t.forEach(p=>s.push(ZE(p)));const c=[];r.forEach((p,y)=>{const C={};p.forEach(S=>{const k=C[S]=e.computeStyle(y,S,i);(!k||0==k.length)&&(y[Vs]=qE,c.push(y))}),n.set(y,C)});let h=0;return t.forEach(p=>ZE(p,s[h++])),c}function YE(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function c(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:c(y),s.set(h,p),p}return e.forEach(h=>{const p=c(h);1!==p&&t.get(p).push(h)}),t}const Eg="$$classes";function fo(n,e){if(n.classList)n.classList.add(e);else{let t=n[Eg];t||(t=n[Eg]={}),t[e]=!0}}function jd(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Eg];t&&delete t[e]}}function NA(n,e,t){Tu(t).onDone(()=>n.processLeaveNode(e))}function QE(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof mE?QE(r.players,e):e.push(r)}}function wv(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Kf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new xA(e,t,r),this._timelineEngine=new AA(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const p=[],y=NE(this._driver,s,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);h=function(n,e,t){return new DA(n,e,t)}(i,y,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,c]=_E(r);this._timelineEngine.command(s,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[c,h]=_E(r);return this._timelineEngine.listen(c,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Ev(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Cg(e[0]),e.length>1&&(r=Cg(e[e.length-1]))):e&&(t=Cg(e)),t||r?new XE(n,t,r):null}let XE=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Fo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fo(this._element,this._initialStyles),this._endStyles&&(Fo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(hl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hl(this._element,this._endStyles),this._endStyles=null),Fo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Cg(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];eC(i)&&(e=e||{},e[i]=n[i])}return e}function eC(n){return"display"===n||"position"===n}const Cv="animation",Ig="animationend";class Du{constructor(e,t,r,i,s,c,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=c,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function(n,e){const t=Tg(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Qf(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),VA(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nC(this._element,this._name,"paused")}resume(){nC(this._element,this._name,"running")}setPosition(e){const t=LA(this._element,this._name);this._position=e*this._duration,Qf(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),VA(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=Tg(n,"").split(","),i=Yf(r,e);i>=0&&(r.splice(i,1),Qf(n,"",r.join(",")))}(this._element,this._name))}}function nC(n,e,t){Qf(n,"PlayState",t,LA(n,e))}function LA(n,e){const t=Tg(n,"");return t.indexOf(",")>0?Yf(t.split(","),e):Yf([t],e)}function Yf(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function VA(n,e,t){t?n.removeEventListener(Ig,e):n.addEventListener(Ig,e)}function Qf(n,e,t,r){const i=Cv+e;if(null!=r){const s=n.style[i];if(s.length){const c=s.split(",");c[r]=t,t=c.join(",")}}n.style[i]=t}function Tg(n,e){return n.style[Cv+e]||""}class rC{constructor(e,t,r,i,s,c,h,p){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=h,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=c||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Du(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:fg(this.element,r))})}this.currentSnapshot=e}}class UA extends Nf{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=wE(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Jf{constructor(){this._count=0}validateStyleProperty(e){return lg(e)}matchesElement(e,t){return nv(e,t)}containsElement(e,t){return rv(e,t)}query(e,t,r){return iv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>wE(h));let i=`@keyframes ${t} {\n`,s="";r.forEach(h=>{s=" ";const p=parseFloat(h.offset);i+=`${s}${100*p}% {\n`,s+=" ",Object.keys(h).forEach(y=>{const C=h[y];switch(y){case"offset":return;case"easing":return void(C&&(i+=`${s}animation-timing-function: ${C};\n`));default:return void(i+=`${s}${y}: ${C};\n`)}}),i+=`${s}}\n`}),i+="}\n";const c=document.createElement("style");return c.textContent=i,c}animate(e,t,r,i,s,c=[],h){const p=c.filter(_e=>_e instanceof rC),y={};ME(r,i)&&p.forEach(_e=>{let qe=_e.currentSnapshot;Object.keys(qe).forEach(at=>y[at]=qe[at])});const C=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=uv(e,t,y));if(0==r)return new UA(e,C);const S="gen_css_kf_"+this._count++,k=this.buildKeyframeElement(e,S,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(k);const B=Ev(e,t),ee=new rC(e,t,S,r,i,s,C,B);return ee.onDestroy(()=>{var n;(n=k).parentNode.removeChild(n)}),ee}}class sC{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:fg(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class oC{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Sv().toString()),this._cssKeyframesDriver=new Jf}validateStyleProperty(e){return lg(e)}matchesElement(e,t){return nv(e,t)}containsElement(e,t){return rv(e,t)}query(e,t,r){return iv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,c=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,c);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(C.easing=s);const S={},k=c.filter(B=>B instanceof sC);ME(r,i)&&k.forEach(B=>{let ee=B.currentSnapshot;Object.keys(ee).forEach(_e=>S[_e]=ee[_e])});const F=Ev(e,t=uv(e,t=t.map(B=>Sa(B,!1)),S));return new sC(e,t,C,F)}}function Sv(){return og()&&Element.prototype.animate||{}}let lC=(()=>{class n extends Yy{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Qy(t):t;return cC(this._renderer,null,r,"register",[i]),new jA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class jA extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new HA(this._id,e,t||{},this._renderer)}}class HA{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return cC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function cC(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const uC="@.disabled";let GA=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const h=null==c?void 0:c.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new dC("",s,this.engine),this._rendererCache.set(s,C)),C}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(c,h,t,C.name,C)};return r.data.animation.forEach(p),new Ag(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(Kf),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class dC{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==uC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ag extends dC{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==uC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let pC=(()=>{class n extends Kf{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re),u.LFG(ov),u.LFG(Ls))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Lo=new u.OlP("AnimationModuleType"),mC=[{provide:Yy,useClass:lC},{provide:Ls,useFactory:function(){return new UE}},{provide:Kf,useClass:pC},{provide:u.FYo,useFactory:function(n,e,t){return new GA(n,e,t)},deps:[hs,Kf,u.R0b]}],gC=[{provide:ov,useFactory:function(){return"function"==typeof Sv()?new oC:new Jf}},{provide:Lo,useValue:"BrowserAnimations"},...mC],_C=[{provide:ov,useClass:sv},{provide:Lo,useValue:"NoopAnimations"},...mC];let Dv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?_C:gC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:gC,imports:[za]}),n})();const Mg=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let hr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!O0()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(hE),u.LFG(Mg,8),u.LFG(re))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ed],Ed]}),n})();function vC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=sr(e)}}}function Au(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function bC(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=sr(e)}}}function wC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Zr(t):this.defaultTabIndex}}}function EC(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new vt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let kg=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nM{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Rg={enterDuration:225,exitDuration:150},Og=Zm({passive:!0}),IC=["mousedown","touchstart"],TC=["mouseup","mouseleave","touchend","touchcancel"];class SC{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=al(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=nt(nt({},Rg),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-c+"px",C.style.top=p-c+"px",C.style.height=2*c+"px",C.style.width=2*c+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),window.getComputedStyle(C).getPropertyValue("opacity"),C.style.transform="scale(1)";const S=new nM(this,C,r);return S.state=0,this._activeRipples.add(S),r.persistent||(this._mostRecentTransientRipple=S),this._runTimeoutOutsideZone(()=>{const k=S===this._mostRecentTransientRipple;S.state=1,!r.persistent&&(!k||!this._isPointerDown)&&S.fadeOut()},y),S}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=nt(nt({},Rg),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=al(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(IC))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(TC),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=dE(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ng(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Og)})})}_removeTriggerEvents(){this._triggerElement&&(IC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Og)}),this._pointerUpEventsRegistered&&TC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Og)}))}}const DC=new u.OlP("mat-ripple-global-options");let Av=(()=>{class n{constructor(t,r,i,s,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new SC(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:nt(nt(nt({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,nt(nt({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,nt(nt({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Kr),u.Y36(DC,8),u.Y36(Lo,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hr],hr]}),n})();var Bs=P(3719);const RC=wC(vC(ll));let OC=(()=>{class n extends RC{constructor(t,r,i){super(t,r),this.tabIndex=Number(i)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(wa),u.$8M("tabindex"))},n.\u0275dir=u.lG2({type:n,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[u._Bn([{provide:ll,useExisting:n}]),u.qOj]}),n})(),Mv=(()=>{class n extends Id{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[u._Bn([{provide:Id,useExisting:n}]),u.qOj]}),n})(),xv=(()=>{class n extends bf{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[u._Bn([{provide:bf,useExisting:n}]),u.qOj]}),n})(),NC=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(vs,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[u._Bn([{provide:Cd,useExisting:n}])]}),n})(),PC=(()=>{class n extends wa{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-tree"]],viewQuery:function(t,r){if(1&t&&u.Gf(NC,7),2&t){let i;u.iGM(i=u.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[u._Bn([{provide:wa,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,r){1&t&&u.GkF(0,0)},directives:[NC],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),Gd=(()=>{class n extends M0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[u._Bn([{provide:M0,useExisting:n}]),u.qOj]}),n})(),$d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[yD,hr],hr]}),n})();class rp{constructor(e,t,r,i){this.transformFunction=e,this.getLevel=t,this.isExpandable=r,this.getChildren=i}_flattenNode(e,t,r,i){const s=this.transformFunction(e,t);if(r.push(s),this.isExpandable(s)){const c=this.getChildren(e);c&&(Array.isArray(c)?this._flattenChildren(c,t,r,i):c.pipe((0,Vn.q)(1)).subscribe(h=>{this._flattenChildren(h,t,r,i)}))}return r}_flattenChildren(e,t,r,i){e.forEach((s,c)=>{let h=i.slice();h.push(c!=e.length-1),this._flattenNode(s,t+1,r,h)})}flattenNodes(e){let t=[];return e.forEach(r=>this._flattenNode(r,0,t,[])),t}expandFlattenedNodes(e,t){let r=[],i=[];return i[0]=!0,e.forEach(s=>{let c=!0;for(let h=0;h<=this.getLevel(s);h++)c=c&&i[h];c&&r.push(s),this.isExpandable(s)&&(i[this.getLevel(s)+1]=t.isExpanded(s))}),r}}class hM extends class{}{constructor(e,t,r){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new Fr([]),this._expandedData=new Fr([]),this._data=new Fr([]),r&&(this.data=r)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){return(0,Bs.T)(e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,Je.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function kv(n,e){const t=(0,xi.m)(n)?n:()=>n,r=i=>i.error(t());return new Gn.y(e?i=>e.schedule(r,0,i):r)}var fM=P(1537);const pM=["addListener","removeListener"],mM=["addEventListener","removeEventListener"],gM=["on","off"];function Ma(n,e,t,r){if((0,xi.m)(t)&&(r=t,t=void 0),r)return Ma(n,e,t).pipe(Do(r));const[i,s]=function(n){return(0,xi.m)(n.addEventListener)&&(0,xi.m)(n.removeEventListener)}(n)?mM.map(c=>h=>n[c](e,h,t)):function(n){return(0,xi.m)(n.addListener)&&(0,xi.m)(n.removeListener)}(n)?pM.map(Rv(n,e)):function(n){return(0,xi.m)(n.on)&&(0,xi.m)(n.off)}(n)?gM.map(Rv(n,e)):[];if(!i&&(0,fM.z)(n))return(0,Rn.z)(c=>Ma(c,e,t))((0,Lr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Gn.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function Rv(n,e){return t=>r=>n[t](e,r)}const bc=new Gn.y(_f.Z),yM={connector:()=>new vt.x};function LC(n,e=yM){const{connector:t}=e;return(0,rr.e)((r,i)=>{const s=t();(0,xn.D)(n(function(n){return new Gn.y(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function VC(n){return(0,Je.U)(()=>n)}function BC(n,e){return e?t=>ua(e.pipe((0,Vn.q)(1),(0,rr.e)((n,e)=>{n.subscribe(new kn.Q(e,_f.Z))})),t.pipe(BC(n))):(0,Rn.z)((t,r)=>n(t,r).pipe((0,Vn.q)(1),VC(t)))}var wM=P(7398);function Pg(n=0,e,t=pc.P){let r=-1;return null!=e&&((0,wM.K)(e)?t=e:r=e),new Gn.y(i=>{let s=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const Fg="Service workers are disabled or not supported by this browser";class Lg{constructor(e){if(this.serviceWorker=e,e){const r=Ma(e,"controllerchange").pipe((0,Je.U)(()=>e.controller)),s=ua(Os(()=>et(e.controller)),r);this.worker=s.pipe(cn(C=>!!C)),this.registration=this.worker.pipe($t(()=>e.getRegistration()));const y=Ma(e,"message").pipe((0,Je.U)(C=>C.data)).pipe(cn(C=>C&&C.type)).pipe(function(n){return n?e=>LC(n)(e):e=>function(n,e){const t=(0,xi.m)(n)?n:()=>n;return(0,xi.m)(e)?LC(e,{connector:t}):r=>new Ya(r,t)}(new vt.x)(e)}());y.connect(),this.events=y}else this.worker=this.events=this.registration=(Fg,Os(()=>kv(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe((0,Vn.q)(1),(0,yr.b)(r=>{r.postMessage(nt({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(cn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Vn.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(cn(t=>t.nonce===e),(0,Vn.q)(1),(0,Je.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let R1=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new vt.x,!t.isEnabled)return this.messages=bc,this.notificationClicks=bc,void(this.subscription=bc);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Je.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Je.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,Je.U)(i=>i.pushManager));const r=this.pushManager.pipe($t(i=>i.getSubscription()));this.subscription=(0,Bs.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Fg));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c++)s[c]=i.charCodeAt(c);return r.applicationServerKey=s,this.pushManager.pipe($t(c=>c.subscribe(r)),(0,Vn.q)(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Vn.q)(1),$t(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Fg))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Pv=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=bc,this.available=bc,this.activated=bc,void(this.unrecoverable=bc);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(cn(r=>"VERSION_READY"===r.type),(0,Je.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Fg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Fg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class jC{}const Fv=new u.OlP("NGSW_REGISTER_SCRIPT");function Lv(n,e,t,r){return()=>{if(!Eo(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[h,...p]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":s=et(null);break;case"registerWithDelay":s=Vv(+p[0]||0);break;case"registerWhenStable":s=p[0]?(0,Bs.T)(Bv(n),Vv(+p[0])):Bv(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(u.R0b).runOutsideAngular(()=>s.pipe((0,Vn.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function Vv(n){return et(null).pipe(function(n,e=pc.z){const t=Pg(n,e);return BC(()=>t)}(n))}function Bv(n){return n.get(u.z2F).isStable.pipe(cn(t=>t))}function EM(n,e){return new Lg(Eo(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let CM=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:Fv,useValue:t},{provide:jC,useValue:r},{provide:Lg,useFactory:EM,deps:[jC,u.Lbi]},{provide:u.ip1,useFactory:Lv,deps:[u.zs3,Fv,jC,u.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[R1,Pv]}),n})();var wc=P(3533),L=P(4213),Vo=P(1572),Bo=P(3855),fl=P(1177),Xn=P(7233);P(7713);const Hv=(0,Xn.u3)(wc.f,!0);function $v(){return(0,rr.e)((n,e)=>{let t,r=!1;n.subscribe(new kn.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ht,Ni=P(7905),zv=(P(2115),P(6293)),Te=P(8239),nI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xa={},Wv=Wv||{},Ut=nI||self;function Gg(){}function $g(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zg="closure_uid_"+(1e9*Math.random()>>>0),WM=0;function qM(n,e,t){return n.call.apply(n.bind,arguments)}function ZM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qM:ZM).apply(null,arguments)}function qv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function xu(){this.s=this.s,this.o=this.o}var lF={};xu.prototype.s=!1,xu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,zg)&&n[zg]||(n[zg]=++WM)}(this);delete lF[n]}},xu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const KM=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},YM=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function ap(n){return Array.prototype.concat.apply([],arguments)}function iI(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Yd(n){return/^[\s\xa0]*$/.test(n)}var ns,ku=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fi(n,e){return-1!=n.indexOf(e)}function Zv(n,e){return n<e?-1:n>e?1:0}e:{var Wg=Ut.navigator;if(Wg){var Kv=Wg.userAgent;if(Kv){ns=Kv;break e}}ns=""}function qg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yv(n){const e={};for(const t in n)e[t]=n[t];return e}var QM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<QM.length;s++)t=QM[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qd(n){return Qd[" "](n),n}Qd[" "]=Gg;var Kg,n,uF=Fi(ns,"Opera"),lp=Fi(ns,"Trident")||Fi(ns,"MSIE"),JM=Fi(ns,"Edge"),Jv=JM||lp,Zg=Fi(ns,"Gecko")&&!(Fi(ns.toLowerCase(),"webkit")&&!Fi(ns,"Edge"))&&!(Fi(ns,"Trident")||Fi(ns,"MSIE"))&&!Fi(ns,"Edge"),XM=Fi(ns.toLowerCase(),"webkit")&&!Fi(ns,"Edge");function ex(){var n=Ut.document;return n?n.documentMode:void 0}e:{var cp="",Xv=(n=ns,Zg?/rv:([^\);]+)(\)|;)/.exec(n):JM?/Edge\/([\d\.]+)/.exec(n):lp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):XM?/WebKit\/(\S+)/.exec(n):uF?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Xv&&(cp=Xv?Xv[1]:""),lp){var rs=ex();if(null!=rs&&rs>parseFloat(cp)){Kg=String(rs);break e}}Kg=cp}var tx={};function eb(){return e=tx,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=ku(String(Kg)).split("."),t=ku("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Zv(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Zv(0==i[2].length,0==s[2].length)||Zv(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n}();var e}var nb=Ut.document&&lp&&(ex()||parseInt(Kg,10))||void 0,aI=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",Gg,e),Ut.removeEventListener("test",Gg,e)}catch(t){}return n}();function Ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function up(n,e){if(Ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Zg){e:{try{Qd(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:lI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&up.Z.h.call(this)}}Ei.prototype.h=function(){this.defaultPrevented=!0},Pi(up,Ei);var lI={2:"touch",3:"pen",4:"mouse"};up.prototype.h=function(){up.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jd="closure_listenable_"+(1e6*Math.random()|0),nx=0;function rx(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++nx,this.ca=this.fa=!1}function Xd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Es(n){this.src=n,this.g={},this.h=0}function rb(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=KM(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Xd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ib(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}Es.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=ib(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new rx(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var sb="closure_lm_"+(1e6*Math.random()|0),Yg={};function cI(n,e,t,r,i){if(r&&r.once)return hI(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)cI(n,e[s],t,r,i);return null}return t=Ru(t),n&&n[Jd]?n.N(e,t,Kd(r)?!!r.capture:!!r,i):uI(n,e,t,!1,r,i)}function uI(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=Kd(i)?!!i.capture:!!i,h=ab(n);if(h||(n[sb]=h=new Es(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function(){var e=sx;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)aI||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ob(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hI(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)hI(n,e[s],t,r,i);return null}return t=Ru(t),n&&n[Jd]?n.O(e,t,Kd(r)?!!r.capture:!!r,i):uI(n,e,t,!0,r,i)}function ix(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ix(n,e[s],t,r,i);else r=Kd(r)?!!r.capture:!!r,t=Ru(t),n&&n[Jd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ib(s=n.g[e],t,r,i))&&(Xd(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=ab(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ib(e,t,r,i)),(t=-1<n?e[n]:null)&&Qg(t))}function Qg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Jd])rb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ob(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ab(e))?(rb(t,n),0==t.h&&(t.src=null,e[sb]=null)):Xd(n)}}}function ob(n){return n in Yg?Yg[n]:Yg[n]="on"+n}function sx(n,e){if(n.ca)n=!0;else{e=new up(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Qg(n),n=t.call(r,e)}return n}function ab(n){return(n=n[sb])instanceof Es?n:null}var Jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ru(n){return"function"==typeof n?n:(n[Jg]||(n[Jg]=function(e){return n.handleEvent(e)}),n[Jg])}function Ur(){xu.call(this),this.i=new Es(this),this.P=this,this.I=null}function li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ei(e,n);else if(e instanceof Ei)e.target=e.target||n;else{var i=e;Qv(e=new Ei(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=Xg(c,r,!0,e)&&i}if(i=Xg(c=e.g=n,r,!0,e)&&i,i=Xg(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Xg(c=e.g=t[s],r,!1,e)&&i}function Xg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var h=c.listener,p=c.ia||c.src;c.fa&&rb(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Pi(Ur,xu),Ur.prototype[Jd]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){ix(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Xd(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var e_=Ut.JSON.stringify;function fI(){var n=lx;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lb,pI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new dF,n=>n.reset());class dF{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hF(n){Ut.setTimeout(()=>{throw n},0)}function t_(n,e){lb||function(){var n=Ut.Promise.resolve(void 0);lb=function(){n.then(fF)}}(),cb||(lb(),cb=!0),lx.add(n,e)}var cb=!1,lx=new class{constructor(){this.h=this.g=null}add(e,t){const r=pI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fF(){for(var n;n=fI();){try{n.h.call(n.g)}catch(t){hF(t)}var e=pI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cb=!1}function ub(n,e){Ur.call(this),this.h=n||1,this.g=e||Ut,this.j=ai(this.kb,this),this.l=Date.now()}function mI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function gI(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function _I(n){n.g=gI(()=>{n.g=null,n.i&&(n.i=!1,_I(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(ub,Ur),(ht=ub.prototype).da=!1,ht.S=null,ht.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),li(this,"tick"),this.da&&(mI(this),this.start()))}},ht.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.M=function(){ub.Z.M.call(this),mI(this),delete this.g};class n_ extends xu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_I(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dp(n){xu.call(this),this.h=n,this.g={}}Pi(dp,xu);var yI=[];function db(n,e,t,r){Array.isArray(t)||(t&&(yI[0]=t.toString()),t=yI);for(var i=0;i<t.length;i++){var s=cI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Ec(n){qg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qg(e)},n),n.g={}}function hp(){this.g=!0}function eh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return e_(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}dp.prototype.M=function(){dp.Z.M.call(this),Ec(this)},dp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hp.prototype.Aa=function(){this.g=!1},hp.prototype.info=function(){};var Cc={},gb=null;function _b(){return gb=gb||new Ur}function cx(n){Ei.call(this,Cc.Ma,n)}function r_(n){const e=_b();li(e,new cx(e,n))}function ux(n,e){Ei.call(this,Cc.STAT_EVENT,n),this.stat=e}function Cs(n){const e=_b();li(e,new ux(e,n))}function dx(n,e){Ei.call(this,Cc.Na,n),this.size=e}function i_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Cc.Ma="serverreachability",Pi(cx,Ei),Cc.STAT_EVENT="statevent",Pi(ux,Ei),Cc.Na="timingevent",Pi(dx,Ei);var fp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yb(){}function wI(){}yb.prototype.h=null;var vb,th={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function s_(){Ei.call(this,"d")}function o_(){Ei.call(this,"c")}function a_(){}function nh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new dp(this),this.P=hx,this.W=new ub(n=Jv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pp}function pp(){this.i=null,this.g="",this.h=!1}Pi(s_,Ei),Pi(o_,Ei),Pi(a_,yb),a_.prototype.g=function(){return new XMLHttpRequest},a_.prototype.i=function(){return{}},vb=new a_;var hx=45e3,l_={},Ou={};function bb(n,e,t){n.K=1,n.v=l(Ic(e)),n.s=t,n.U=!0,EI(n,null)}function EI(n,e){n.F=Date.now(),mp(n),n.A=Ic(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),dt(t.h,"t",r),n.C=0,t=n.l.H,n.h=new pp,n.g=OF(n.l,t?e:null,!n.s),0<n.O&&(n.L=new n_(ai(n.Ia,n,n.g),n.O)),db(n.V,n.g,"readystatechange",n.gb),e=n.H?Yv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),r_(1),function(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var C=y[0];y=y[1];var S=C.split("_");c=2<=S.length&&"type"==S[1]?c+(C+"=")+y+"&":c+(C+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function CI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function II(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=pF(n,t),i==Ou){4==e&&(n.o=4,Cs(14),r=!1),eh(n.j,n.m,null,"[Incomplete Response]");break}if(i==l_){n.o=4,Cs(15),eh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}eh(n.j,n.m,i,null),wb(n,i)}CI(n)&&i!=Ou&&i!=l_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),bx(e),e.L=!0,Cs(11))):(eh(n.j,n.m,t,"[Invalid Chunked Response]"),Nu(n),gp(n))}function pF(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ou:(t=Number(e.substring(t,r)),isNaN(t)?l_:(r+=1)+t>e.length?Ou:(e=e.substr(r,t),n.C=r+t,e))}function mp(n){n.Y=Date.now()+n.P,TI(n,n.P)}function TI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=i_(ai(n.eb,n),e)}function c_(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function gp(n){0==n.l.G||n.I||MF(n.l,n)}function Nu(n){c_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mI(n.W),Ec(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wb(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||yp(t.i,n)))if(t.I=n.N,!n.J&&yp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=i_(ai(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;RI(t),xI(t)}vx(t),Cs(18)}if(1>=u_(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else wp(t,11)}else if((n.J||t.g==n)&&RI(t),!Yd(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const S=y[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const k=y[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const B=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;!s.g&&(Fi(B,"spdy")||Fi(B,"quic")||Fi(B,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(vp(s,s.h),s.h=null))}if(r.D){const ee=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.sa=ee,a(r.F,r.D,ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=RF(r,r.H?r.la:null,r.W),c.J){d_(r.i,c);var h=c,p=r.K;p&&h.setTimeout(p),h.B&&(c_(h),mp(h)),r.g=c}else DF(r);0<t.l.length&&kI(t)}else"stop"!=y[0]&&"close"!=y[0]||wp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?wp(t,7):_x(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}r_(4)}catch(y){}}function Eb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if($g(n)||"string"==typeof n)YM(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if($g(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if($g(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function _p(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof _p)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function SI(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];rh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)rh(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function rh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ht=nh.prototype).setTimeout=function(n){this.P=n},ht.gb=function(n){n=n.target;const e=this.L;e&&3==Fu(n)?e.l():this.Ia(n)},ht.Ia=function(n){try{if(n==this.g)e:{const C=Fu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>C)&&(3!=C||Jv||this.g&&(this.h.h||this.g.ga()||EF(this.g)))){this.I||4!=C||7==e||r_(8==e||0>=S?3:2),c_(this);var t=this.g.ba();this.N=t;t:if(CI(this)){var r=EF(this.g);n="";var i=r.length,s=4==Fu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nu(this),gp(this);var c="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yd(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Cs(12),Nu(this),gp(this);break e}eh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wb(this,t)}this.U?(II(this,C,c),Jv&&this.i&&3==C&&(db(this.V,this.W,"tick",this.fb),this.W.start())):(eh(this.j,this.m,c,null),wb(this,c)),4==C&&Nu(this),this.i&&!this.I&&(4==C?MF(this.l,this):(this.i=!1,mp(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),Nu(this),gp(this)}}}catch(C){}},ht.fb=function(){if(this.g){var n=Fu(this.g),e=this.g.ga();this.C<e.length&&(c_(this),II(this,n,e),this.i&&4!=n&&mp(this))}},ht.cancel=function(){this.I=!0,Nu(this)},ht.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(r_(3),Cs(17)),Nu(this),this.o=2,gp(this)):TI(this,this.Y-n)},(ht=_p.prototype).R=function(){SI(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ht.T=function(){return SI(this),this.g.concat()},ht.get=function(n,e){return rh(this.h,n)?this.h[n]:e},ht.set=function(n,e){rh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ht.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var px=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pu){this.g=void 0!==e?e:n.g,Cb(this,n.j),this.s=n.s,Ib(this,n.i),Tb(this,n.m),this.l=n.l,e=n.h;var t=new te;t.i=e.i,e.g&&(t.g=new _p(e.g),t.h=e.h),o(this,t),this.o=n.o}else n&&(t=String(n).match(px))?(this.g=!!e,Cb(this,t[1]||"",!0),this.s=g(t[2]||""),Ib(this,t[3]||"",!0),Tb(this,t[4]),this.l=g(t[5]||"",!0),o(this,t[6]||"",!0),this.o=g(t[7]||"")):(this.g=!!e,this.h=new te(null,this.g))}function Ic(n){return new Pu(n)}function Cb(n,e,t){n.j=t?g(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ib(n,e,t){n.i=t?g(e,!0):e}function Tb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function o(n,e,t){e instanceof te?(n.h=e,function(n,e){e&&!n.j&&(ye(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(He(this,r),dt(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=v(e,V)),n.h=new te(e,n.g))}function a(n,e,t){n.h.set(e,t)}function l(n){return a(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function g(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function v(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,E),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function E(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(v(e,I,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(v(e,I,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(v(t,"/"==t.charAt(0)?x:A,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",v(t,Z)),n.join("")};var I=/[#\/\?@]/g,A=/[#\?:]/g,x=/[#\?]/g,V=/[#\?@]/g,Z=/#/g;function te(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ye(n){n.g||(n.g=new _p,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function He(n,e){ye(n),e=Ae(n,e),rh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,rh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&SI(n)))}function Qe(n,e){return ye(n),e=Ae(n,e),rh(n.g.h,e)}function dt(n,e,t){He(n,e),0<t.length&&(n.i=null,n.g.set(Ae(n,e),iI(t)),n.h+=t.length)}function Ae(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Dn(n){this.l=n||Us,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=te.prototype).add=function(n,e){ye(this),this.i=null,n=Ae(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){ye(this),this.g.forEach(function(t,r){YM(t,function(i){n.call(e,i,r,this)},this)},this)},ht.T=function(){ye(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},ht.R=function(n){ye(this);var e=[];if("string"==typeof n)Qe(this,n)&&(e=ap(e,this.g.get(Ae(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ap(e,n[t])}return e},ht.set=function(n,e){return ye(this),this.i=null,Qe(this,n=Ae(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var c=i;""!==r[s]&&(c+="="+encodeURIComponent(String(r[s]))),n.push(c)}}return this.i=n.join("&")};var Us=10;function Tc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function u_(n){return n.h?1:n.g?n.g.size:0}function yp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vp(n,e){n.g?n.g.add(e):n.h=e}function d_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function h_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return iI(n.i)}function bp(){}function Sb(){this.g=new bp}function Db(n,e,t){const r=t||"";try{Eb(n,function(i,s){let c=i;Kd(i)&&(c=e_(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function DI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Mb(n){this.l=n.$b||null,this.j=n.ib||!1}function AI(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=mx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Dn.prototype.cancel=function(){if(this.i=h_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},bp.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},bp.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Pi(Mb,yb),Mb.prototype.g=function(){return new AI(this.l,this.j)},Mb.prototype.i=function(n){return function(){return n}}({}),Pi(AI,Ur);var mx=0;function gF(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function xb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kb(n)}function kb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=AI.prototype).open=function(n,e){if(this.readyState!=mx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kb(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xb(this)),this.readyState=mx},ht.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kb(this)),this.g&&(this.readyState=3,kb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gF(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ht.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xb(this):kb(this),3==this.readyState&&gF(this)}},ht.Ua=function(n){this.g&&(this.response=this.responseText=n,xb(this))},ht.Ta=function(n){this.g&&(this.response=n,xb(this))},ht.ha=function(){this.g&&xb(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(AI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xG=Ut.JSON.parse;function ci(n){Ur.call(this),this.headers=new _p,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_F,this.K=this.L=!1}Pi(ci,Ur);var _F="",kG=/^https?$/i,RG=["POST","PUT"];function NG(n){return"content-type"==n.toLowerCase()}function yF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vF(n),MI(n)}function vF(n){n.D||(n.D=!0,li(n,"complete"),li(n,"error"))}function bF(n){if(n.h&&void 0!==Wv&&(!n.C[1]||4!=Fu(n)||2!=n.ba()))if(n.v&&4==Fu(n))gI(n.Fa,0,n);else if(li(n,"readystatechange"),4==Fu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(px)[1]||null;if(!i&&Ut.self&&Ut.self.location){var s=Ut.self.location.protocol;i=s.substr(0,s.length-1)}r=!kG.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var c=2<Fu(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",vF(n)}}finally{MI(n)}}}function MI(n,e){if(n.g){wF(n);const t=n.g,r=n.C[0]?Gg:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function wF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Fu(n){return n.g?n.g.readyState:0}function EF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case _F:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return qg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):a(n,e,t))}function Rb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function CF(n){this.za=0,this.l=[],this.h=new hp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rb("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rb("baseRetryDelayMs",5e3,n),this.$a=Rb("retryDelaySeedMs",1e4,n),this.Ya=Rb("forwardChannelMaxRetries",2,n),this.ra=Rb("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Dn(n&&n.concurrentRequestLimit),this.Ca=new Sb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function _x(n){if(IF(n),3==n.G){var e=n.V++,t=Ic(n.F);a(t,"SID",n.J),a(t,"RID",e),a(t,"TYPE","terminate"),Ob(n,t),(e=new nh(n,n.h,e,void 0)).K=2,e.v=l(Ic(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=OF(e.l,null),e.g.ea(e.v)),e.F=Date.now(),mp(e)}kF(n)}function xI(n){n.g&&(bx(n),n.g.cancel(),n.g=null)}function IF(n){xI(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),RI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function yx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&kI(n)}function kI(n){Tc(n.i)||n.m||(n.m=!0,t_(n.Ha,n),n.C=0)}function TF(n,e){var t;t=e?e.m:n.V++;const r=Ic(n.F);a(r,"SID",n.J),a(r,"RID",t),a(r,"AID",n.U),Ob(n,r),n.o&&n.s&&gx(r,n.o,n.s),t=new nh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=SF(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),vp(n.i,t),bb(t,r,e)}function Ob(n,e){n.j&&Eb({},function(t,r){a(e,r,t)})}function SF(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ai(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),h=!1;else try{Db(C,c,"req"+y+"_")}catch(S){r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function DF(n){n.g||n.u||(n.Y=1,t_(n.Ga,n),n.A=0)}function vx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=i_(ai(n.Ga,n),xF(n,n.A)),n.A++,0))}function bx(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function AF(n){n.g=new nh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ic(n.oa);a(e,"RID","rpc"),a(e,"SID",n.J),a(e,"CI",n.N?"0":"1"),a(e,"AID",n.U),Ob(n,e),a(e,"TYPE","xmlhttp"),n.o&&n.s&&gx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=l(Ic(e)),t.s=null,t.U=!0,EI(t,n)}function RI(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function MF(n,e){var t=null;if(n.g==e){RI(n),bx(n),n.g=null;var r=2}else{if(!yp(n.i,e))return;t=e.D,d_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;li(r=_b(),new dx(r,t,e,i)),kI(n)}else DF(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(u_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=i_(ai(n.Ha,n,e),xF(n,n.C)),n.C++,0)))}(n,e)||2==r&&vx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:wp(n,5);break;case 4:wp(n,10);break;case 3:wp(n,6);break;default:wp(n,2)}}function xF(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function wp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ai(n.jb,n);t||(t=new Pu("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Cb(t,"https"),l(t)),function(n,e){const t=new hp;if(Ut.Image){const r=new Image;r.onload=qv(DI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qv(DI,t,r,"TestLoadImage: error",!1,e),r.onabort=qv(DI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qv(DI,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cs(2);n.G=0,n.j&&n.j.va(e),kF(n),IF(n)}function kF(n){n.G=0,n.I=-1,n.j&&((0!=h_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,iI(n.l),n.l.length=0),n.j.ua())}function RF(n,e,t){let r=function(n){return n instanceof Pu?Ic(n):new Pu(n,void 0)}(t);if(""!=r.i)e&&Ib(r,e+"."+r.i),Tb(r,r.m);else{const i=Ut.location;r=function(n,e,t,r){var i=new Pu(null,void 0);return n&&Cb(i,n),e&&Ib(i,e),t&&Tb(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&qg(n.aa,function(i,s){a(r,s,i)}),t=n.sa,(e=n.D)&&t&&a(r,e,t),a(r,"VER",n.ma),Ob(n,r),r}function OF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ci(t&&n.Ba&&!n.qa?new Mb({ib:!0}):n.qa)).L=n.H,e}function NF(){}function OI(){if(lp&&!(10<=Number(nb)))throw Error("Environmental error: no available transport.")}function Uo(n,e){Ur.call(this),this.g=new CF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Yd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new f_(this)}function PF(n){s_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function FF(){o_.call(this),this.status=1}function f_(n){this.g=n}(ht=ci.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vb.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:vb),this.g.onreadystatechange=ai(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void yF(this,s)}n=t||"";const i=new _p(this.headers);r&&Eb(r,function(s,c){i.set(c,s)}),r=function(n){e:{var e=NG;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=KM(RG,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wF(this),0<this.B&&((this.K=function(n){return lp&&eb()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.pa,this)):this.A=gI(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){yF(this,s)}},ht.pa=function(){void 0!==Wv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),MI(this))},ht.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),MI(this,!0)),ci.Z.M.call(this)},ht.Fa=function(){this.s||(this.F||this.v||this.l?bF(this):this.cb())},ht.cb=function(){bF(this)},ht.ba=function(){try{return 2<Fu(this)?this.g.status:-1}catch(n){return-1}},ht.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ht.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xG(e)}},ht.Da=function(){return this.m},ht.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=CF.prototype).ma=8,ht.G=1,ht.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ht.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new nh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=Yv(s),Qv(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=SF(this,i,e),a(t=Ic(this.F),"RID",n),a(t,"CVER",22),this.D&&a(t,"X-HTTP-Session-Id",this.D),Ob(this,t),this.o&&s&&gx(t,this.o,s),vp(this.i,i),this.Ra&&a(t,"TYPE","init"),this.ja?(a(t,"$req",e),a(t,"SID","null"),i.$=!0,bb(i,t,null)):bb(i,t,e),this.G=2}}else 3==this.G&&(n?TF(this,n):0==this.l.length||Tc(this.i)||TF(this))},ht.Ga=function(){if(this.u=null,AF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=i_(ai(this.bb,this),n)}},ht.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cs(10),xI(this),AF(this))},ht.ab=function(){null!=this.v&&(this.v=null,xI(this),vx(this),Cs(19))},ht.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Cs(2)):(this.h.info("Failed to ping google.com"),Cs(1))},(ht=NF.prototype).xa=function(){},ht.wa=function(){},ht.va=function(){},ht.ua=function(){},ht.Oa=function(){},OI.prototype.g=function(n,e){return new Uo(n,e)},Pi(Uo,Ur),Uo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),t_(ai(n.hb,n,e))),Cs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=RF(n,null,n.W),kI(n)},Uo.prototype.close=function(){_x(this.g)},Uo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,yx(this.g,e)}else this.v?((e={}).__data__=e_(n),yx(this.g,e)):yx(this.g,n)},Uo.prototype.M=function(){this.g.j=null,delete this.j,_x(this.g),delete this.g,Uo.Z.M.call(this)},Pi(PF,s_),Pi(FF,o_),Pi(f_,NF),f_.prototype.xa=function(){li(this.g,"a")},f_.prototype.wa=function(n){li(this.g,new PF(n))},f_.prototype.va=function(n){li(this.g,new FF(n))},f_.prototype.ua=function(){li(this.g,"b")},OI.prototype.createWebChannel=OI.prototype.g,Uo.prototype.send=Uo.prototype.u,Uo.prototype.open=Uo.prototype.m,Uo.prototype.close=Uo.prototype.close,fp.NO_ERROR=0,fp.TIMEOUT=8,fp.HTTP_ERROR=6,vI.COMPLETE="complete",wI.EventType=th,th.OPEN="a",th.CLOSE="b",th.ERROR="c",th.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,ci.prototype.listenOnce=ci.prototype.O,ci.prototype.getLastError=ci.prototype.La,ci.prototype.getLastErrorCode=ci.prototype.Da,ci.prototype.getStatus=ci.prototype.ba,ci.prototype.getResponseJson=ci.prototype.Qa,ci.prototype.getResponseText=ci.prototype.ga,ci.prototype.send=ci.prototype.ea;var LG=xa.createWebChannelTransport=function(){return new OI},VG=xa.getStatEventTarget=function(){return _b()},wx=xa.ErrorCode=fp,BG=xa.EventType=vI,UG=xa.Event=Cc,LF=xa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jG=xa.FetchXmlHttpFactory=Mb,NI=xa.WebChannel=wI,HG=xa.XhrIo=ci;const VF="@firebase/firestore";class is{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");let p_="9.8.0";const ih=new Bo.Yd("@firebase/firestore");function Ex(){return ih.logLevel}function Ge(n,...e){if(ih.logLevel<=Bo.in.DEBUG){const t=e.map(Cx);ih.debug(`Firestore (${p_}): ${n}`,...t)}}function ui(n,...e){if(ih.logLevel<=Bo.in.ERROR){const t=e.map(Cx);ih.error(`Firestore (${p_}): ${n}`,...t)}}function Nb(n,...e){if(ih.logLevel<=Bo.in.WARN){const t=e.map(Cx);ih.warn(`Firestore (${p_}): ${n}`,...t)}}function Cx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function mt(n="Unexpected state"){const e=`FIRESTORE (${p_}) INTERNAL ASSERTION FAILED: `+n;throw ui(e),new Error(e)}function Ht(n,e){n||mt()}function ot(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(is.UNAUTHENTICATED))}shutdown(){}}class WG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qG{constructor(e){this.t=e,this.currentUser=is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Li,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Li)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ht("string"==typeof r.accessToken),new BF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ht(null===e||"string"==typeof e),new is(e)}}class ZG{constructor(e,t,r){this.type="FirstParty",this.user=is.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class KG{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ZG(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YG{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ht("string"==typeof t.token),this.p=t.token,new UF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class jo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function QG(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}jo.A=-1;class jF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=QG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Jt(n,e){return n<e?-1:n>e?1:0}function m_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function HF(n){return n+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new Qr(0,0))}static max(){return new Vt(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function GF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ep(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $F(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pb{constructor(e,t,r){void 0===t?t=0:t>e.length&&mt(),void 0===r?r=e.length-t:r>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends Pb{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const JG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends Pb{construct(e,t,r){return new Ci(e,t,r)}static isValidIdentifier(e){return JG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ci(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Pe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Pe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new Pe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ci(t)}static emptyPath(){return new Ci([])}}class g_{constructor(e){this.fields=e,e.sort(Ci.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return m_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ii(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const e$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sh(n){if(Ht(!!n),"string"==typeof n){let e=0;const t=e$.exec(n);if(Ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jr(n.seconds),nanos:jr(n.nanos)}}function jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cp(n){return"string"==typeof n?Ii.fromBase64String(n):Ii.fromUint8Array(n)}function Ix(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zF(n){const e=n.mapValue.fields.__previous_value__;return Ix(e)?zF(e):e}function Fb(n){const e=sh(n.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}class t${constructor(e,t,r,i,s,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}function Lb(n){return null==n}function Vb(n){return 0===n&&1/n==-1/0}function WF(n){return"number"==typeof n&&Number.isInteger(n)&&!Vb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(In.fromString(e))}static fromName(e){return new rt(In.fromString(e).popFirst(5))}static empty(){return new rt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new In(e.slice()))}}const oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},PI={nullValue:"NULL_VALUE"};function Ip(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ix(n)?4:YF(n)?9007199254740991:10:mt()}function Sc(n,e){if(n===e)return!0;const t=Ip(n);if(t!==Ip(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fb(n).isEqual(Fb(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=sh(r.timestampValue),c=sh(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Cp(n.bytesValue).isEqual(Cp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return jr(r.geoPointValue.latitude)===jr(i.geoPointValue.latitude)&&jr(r.geoPointValue.longitude)===jr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jr(r.integerValue)===jr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=jr(r.doubleValue),c=jr(i.doubleValue);return s===c?Vb(s)===Vb(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return m_(n.arrayValue.values||[],e.arrayValue.values||[],Sc);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(GF(s)!==GF(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Sc(s[h],c[h])))return!1;return!0}(n,e);default:return mt()}var i}function Bb(n,e){return void 0!==(n.values||[]).find(t=>Sc(t,e))}function ah(n,e){if(n===e)return 0;const t=Ip(n),r=Ip(e);if(t!==r)return Jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=jr(i.integerValue||i.doubleValue),h=jr(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return qF(n.timestampValue,e.timestampValue);case 4:return qF(Fb(n),Fb(e));case 5:return Jt(n.stringValue,e.stringValue);case 6:return function(i,s){const c=Cp(i),h=Cp(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Jt(c[p],h[p]);if(0!==y)return y}return Jt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=Jt(jr(i.latitude),jr(s.latitude));return 0!==c?c:Jt(jr(i.longitude),jr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const y=ah(c[p],h[p]);if(y)return y}return Jt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===oh.mapValue&&s===oh.mapValue)return 0;if(i===oh.mapValue)return 1;if(s===oh.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const S=Jt(h[C],y[C]);if(0!==S)return S;const k=ah(c[h[C]],p[y[C]]);if(0!==k)return k}return Jt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw mt()}}function qF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Jt(n,e);const t=sh(n),r=sh(e),i=Jt(t.seconds,r.seconds);return 0!==i?i:Jt(t.nanos,r.nanos)}function __(n){return Tx(n)}function Tx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=sh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cp(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=Tx(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${Tx(r.fields[h])}`;return s+"}"}(n.mapValue):mt();var e}function Tp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sx(n){return!!n&&"integerValue"in n}function Ub(n){return!!n&&"arrayValue"in n}function ZF(n){return!!n&&"nullValue"in n}function KF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function FI(n){return!!n&&"mapValue"in n}function jb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ep(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function n$(n){return"nullValue"in n?PI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tp(Lu.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function r$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tp(Lu.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oh:mt()}function QF(n,e){const t=ah(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function JF(n,e){const t=ah(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Is{constructor(e){this.value=e}static empty(){return new Is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!FI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jb(t)}setAll(e){let t=Ci.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=jb(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());FI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];FI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ep(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Is(jb(this.value))}}function XF(n){const e=[];return Ep(n.fields,(t,r)=>{const i=new Ci([t]);if(FI(r)){const s=XF(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new g_(e)}class br{constructor(e,t,r,i,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new br(e,0,Vt.min(),Vt.min(),Is.empty(),0)}static newFoundDocument(e,t,r){return new br(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new br(e,2,t,Vt.min(),Is.empty(),0)}static newUnknownDocument(e,t){return new br(e,3,t,Vt.min(),Is.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class LI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Dx(n){return n.fields.find(e=>2===e.kind)}function Sp(n){return n.fields.filter(e=>2!==e.kind)}LI.UNKNOWN_ID=-1;class VI{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hb(0,ml.min())}}function eL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new Qr(t+1,0):new Qr(t,r));return new ml(i,rt.empty(),e)}function i$(n){return new ml(n.readTime,n.key,-1)}class ml{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ml(Vt.min(),rt.empty(),-1)}static max(){return new ml(Vt.max(),rt.empty(),-1)}}function tL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Jt(n.largestBatchId,e.largestBatchId))}class Jr{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new Jr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new Jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new BI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new BI(this.root,e,this.comparator,!1)}getReverseIterator(){return new BI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new BI(this.root,e,this.comparator,!0)}}class BI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:ss.RED,this.left=null!=i?i:ss.EMPTY,this.right=null!=s?s:ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ss(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ss.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ss(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new Jr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nL(this.data.getIterator())}getIteratorFrom(e){return new nL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class nL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function y_(n){return n.hasNext()?n.getNext():void 0}class s${constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.P=null}}function rL(n,e=null,t=[],r=[],i=null,s=null,c=null){return new s$(n,e,t,r,i,s,c)}function Dp(n){const e=ot(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+__(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Lb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>__(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>__(r)).join(",")),e.P=t}return e.P}function Gb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!p$(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Sc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lL(n.startAt,e.startAt)&&lL(n.endAt,e.endAt)}function UI(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jI(n,e){return n.filters.filter(t=>t instanceof os&&t.field.isEqual(e))}function iL(n,e,t){let r=PI,i=!0;for(const s of jI(n,e)){let c=PI,h=!0;switch(s.op){case"<":case"<=":c=n$(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=PI}QF({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];QF({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function sL(n,e,t){let r=oh,i=!0;for(const s of jI(n,e)){let c=oh,h=!0;switch(s.op){case">=":case">":c=r$(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=oh}JF({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];JF({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class os extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new a$(e,t,r):"array-contains"===t?new u$(e,r):"in"===t?new d$(e,r):"not-in"===t?new h$(e,r):"array-contains-any"===t?new f$(e,r):new os(e,t,r)}static V(e,t,r){return"in"===t?new l$(e,r):new c$(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ah(t,this.value)):null!==t&&Ip(this.value)===Ip(t)&&this.v(ah(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class a$ extends os{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.v(t)}}class l$ extends os{constructor(e,t){super(e,"in",t),this.keys=oL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class c$ extends os{constructor(e,t){super(e,"not-in",t),this.keys=oL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class u$ extends os{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ub(t)&&Bb(t.arrayValue,this.value)}}class d$ extends os{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bb(this.value.arrayValue,t)}}class h$ extends os{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bb(this.value.arrayValue,t)}}class f$ extends os{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ub(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bb(this.value.arrayValue,r))}}class lh{constructor(e,t){this.position=e,this.inclusive=t}}class v_{constructor(e,t="asc"){this.field=e,this.dir=t}}function p$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function aL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),t.key):ah(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function lL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sc(n.position[t],e.position[t]))return!1;return!0}class Vu{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function cL(n,e,t,r,i,s,c,h){return new Vu(n,e,t,r,i,s,c,h)}function b_(n){return new Vu(n)}function Ax(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Mx(n){for(const e of n.filters)if(e.S())return e.field;return null}function xx(n){return null!==n.collectionGroup}function w_(n){const e=ot(n);if(null===e.D){e.D=[];const t=Mx(e),r=Ax(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new v_(t)),e.D.push(new v_(Ci.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new v_(Ci.keyField(),s))}}}return e.D}function ka(n){const e=ot(n);if(!e.C)if("F"===e.limitType)e.C=rL(e.path,e.collectionGroup,w_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of w_(e))t.push(new v_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new lh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lh(e.startAt.position,e.startAt.inclusive):null;e.C=rL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function uL(n,e,t){return new Vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $b(n,e){return Gb(ka(n),ka(e))&&n.limitType===e.limitType}function dL(n){return`${Dp(ka(n))}|lt:${n.limitType}`}function kx(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${__(r.value)}`;var r}).join(", ")}]`),Lb(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>__(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>__(t)).join(",")),`Target(${e})`}(ka(n))}; limitType=${n.limitType})`}function Rx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=aL(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,w_(t),r)||t.endAt&&!function(i,s,c){const h=aL(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,w_(t),r)));var t,r}function hL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fL(n){return(e,t)=>{let r=!1;for(const i of w_(n)){const s=g$(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function g$(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),p=c.data.field(i);return null!==h&&null!==p?ah(h,p):mt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}function pL(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vb(e)?"-0":e}}function mL(n){return{integerValue:""+n}}function gL(n,e){return WF(e)?mL(e):pL(n,e)}class HI{constructor(){this._=void 0}}function _$(n,e,t){return n instanceof E_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Ap?yL(n,e):n instanceof Mp?vL(n,e):function(r,i){const s=_L(r,i),c=bL(s)+bL(r.k);return Sx(s)&&Sx(r.k)?mL(c):pL(r.M,c)}(n,e)}function y$(n,e,t){return n instanceof Ap?yL(n,e):n instanceof Mp?vL(n,e):t}function _L(n,e){return n instanceof C_?Sx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class E_ extends HI{}class Ap extends HI{constructor(e){super(),this.elements=e}}function yL(n,e){const t=wL(e);for(const r of n.elements)t.some(i=>Sc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mp extends HI{constructor(e){super(),this.elements=e}}function vL(n,e){let t=wL(e);for(const r of n.elements)t=t.filter(i=>!Sc(i,r));return{arrayValue:{values:t}}}class C_ extends HI{constructor(e,t){super(),this.M=e,this.k=t}}function bL(n){return jr(n.integerValue||n.doubleValue)}function wL(n){return Ub(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zb{constructor(e,t){this.field=e,this.transform=t}}class b${constructor(e,t){this.version=e,this.transformResults=t}}class di{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function GI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class $I{}function w$(n,e,t){n instanceof Wb?function(r,i,s){const c=r.value.clone(),h=TL(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof xp?function(r,i,s){if(!GI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=TL(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(IL(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ox(n,e,t){var i;n instanceof Wb?function(r,i,s){if(!GI(r.precondition,i))return;const c=r.value.clone(),h=SL(r.fieldTransforms,s,i);c.setAll(h),i.convertToFoundDocument(CL(i),c).setHasLocalMutations()}(n,e,t):n instanceof xp?function(r,i,s){if(!GI(r.precondition,i))return;const c=SL(r.fieldTransforms,s,i),h=i.data;h.setAll(IL(r)),h.setAll(c),i.convertToFoundDocument(CL(i),h).setHasLocalMutations()}(n,e,t):GI(n.precondition,i=e)&&i.convertToNoDocument(Vt.min())}function E$(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=_L(r.transform,i||null);null!=s&&(null==t&&(t=Is.empty()),t.set(r.field,s))}return t||null}function EL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&m_(t,r,(i,s)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ap&&r instanceof Ap||t instanceof Mp&&r instanceof Mp?m_(t.elements,r.elements,Sc):t instanceof C_&&r instanceof C_?Sc(t.k,r.k):t instanceof E_&&r instanceof E_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function CL(n){return n.isFoundDocument()?n.version:Vt.min()}class Wb extends $I{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class xp extends $I{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function IL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function TL(n,e,t){const r=new Map;Ht(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,y$(c,h,t[i]))}return r}function SL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,_$(s,c,e))}return r}class qb extends $I{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Nx extends $I{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class C${constructor(e){this.count=e}}var hi,Tn;function DL(n){switch(n){default:return mt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function AL(n){if(void 0===n)return ui("GRPC error has no .code"),pe.UNKNOWN;switch(n){case hi.OK:return pe.OK;case hi.CANCELLED:return pe.CANCELLED;case hi.UNKNOWN:return pe.UNKNOWN;case hi.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case hi.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case hi.INTERNAL:return pe.INTERNAL;case hi.UNAVAILABLE:return pe.UNAVAILABLE;case hi.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case hi.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case hi.NOT_FOUND:return pe.NOT_FOUND;case hi.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case hi.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case hi.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case hi.ABORTED:return pe.ABORTED;case hi.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case hi.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case hi.DATA_LOSS:return pe.DATA_LOSS;default:return mt()}}(Tn=hi||(hi={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class ch{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ep(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return $F(this.inner)}size(){return this.innerSize}}const I$=new Jr(rt.comparator);function Ra(){return I$}const T$=new Jr(rt.comparator);function Px(...n){let e=T$;for(const t of n)e=e.insert(t.key,t);return e}function Zb(){return new ch(n=>n.toString(),(n,e)=>n.isEqual(e))}const S$=new Jr(rt.comparator),D$=new fr(rt.comparator);function $n(...n){let e=D$;for(const t of n)e=e.add(t);return e}const A$=new fr(Jt);function zI(){return A$}class Kb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yb.createSynthesizedTargetChangeForCurrentChange(e,t)),new Kb(Vt.min(),r,zI(),Ra(),$n())}}class Yb{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yb(Ii.EMPTY_BYTE_STRING,t,$n(),$n(),$n())}}class WI{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class ML{constructor(e,t){this.targetId=e,this.$=t}}class xL{constructor(e,t,r=Ii.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kL{constructor(){this.B=0,this.L=OL(),this.U=Ii.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=$n(),t=$n(),r=$n();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new Yb(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=OL()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class M${constructor(e){this.nt=e,this.st=new Map,this.it=Ra(),this.rt=RL(),this.ot=new fr(Jt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(UI(s))if(0===r){const c=new rt(s.path);this.ct(t,c,br.newNoDocument(c,Vt.min()))}else Ht(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,c)=>{const h=this.wt(c);if(h){if(s.current&&UI(h.target)){const p=new rt(h.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,br.newNoDocument(p,e))}s.j&&(t.set(c,s.H()),s.J())}});let r=$n();this.rt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,c)=>c.setReadTime(e));const i=new Kb(e,t,this.ot,this.it,r);return this.it=Ra(),this.rt=RL(),this.ot=new fr(Jt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new kL,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new fr(Jt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new kL),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function RL(){return new Jr(rt.comparator)}function OL(){return new Jr(rt.comparator)}const x$={asc:"ASCENDING",desc:"DESCENDING"},k$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class R${constructor(e,t){this.databaseId=e,this.N=t}}function Qb(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NL(n,e){return n.N?e.toBase64():e.toUint8Array()}function O$(n,e){return Qb(n,e.toTimestamp())}function Vi(n){return Ht(!!n),Vt.fromTimestamp(function(e){const t=sh(e);return new Qr(t.seconds,t.nanos)}(n))}function Fx(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function PL(n){const e=In.fromString(n);return Ht($L(e)),e}function Jb(n,e){return Fx(n.databaseId,e.path)}function Dc(n,e){const t=PL(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(LL(t))}function Lx(n,e){return Fx(n.databaseId,e)}function FL(n){const e=PL(n);return 4===e.length?In.emptyPath():LL(e)}function Xb(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LL(n){return Ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VL(n,e,t){return{name:Jb(n,e),fields:t.value.mapValue.fields}}function BL(n,e,t){const r=Dc(n,e.name),i=Vi(e.updateTime),s=new Is({mapValue:{fields:e.fields}}),c=br.newFoundDocument(r,i,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ew(n,e){let t;if(e instanceof Wb)t={update:VL(n,e.key,e.value)};else if(e instanceof qb)t={delete:Jb(n,e.key)};else if(e instanceof xp)t={update:VL(n,e.key,e.data),updateMask:H$(e.fieldMask)};else{if(!(e instanceof Nx))return mt();t={verify:Jb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof E_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ap)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof C_)return{fieldPath:s.field.canonicalString(),increment:c.k};throw mt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:O$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:mt()),t;var i}function Vx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?di.updateTime(Vi(i.updateTime)):void 0!==i.exists?di.exists(i.exists):di.none():di.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let h=null;"setToServerValue"in c?(Ht("REQUEST_TIME"===c.setToServerValue),h=new E_):"appendMissingElements"in c?h=new Ap(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Mp(c.removeAllFromArray.values||[]):"increment"in c?h=new C_(s,c.increment):mt();const p=Ci.fromServerFormat(c.fieldPath);return new zb(p,h)}(n,i)):[];var i;if(e.update){const i=Dc(n,e.update.name),s=new Is({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new g_((e.updateMask.fieldPaths||[]).map(y=>Ci.fromServerFormat(y)));return new xp(i,s,c,t,r)}return new Wb(i,s,t,r)}if(e.delete){const i=Dc(n,e.delete);return new qb(i,t)}if(e.verify){const i=Dc(n,e.verify);return new Nx(i,t)}return mt()}function UL(n,e){return{documents:[Lx(n,e.path)]}}function jL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Lx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(S){if("=="===S.op){if(KF(S.value))return{unaryFilter:{field:I_(S.field),op:"IS_NAN"}};if(ZF(S.value))return{unaryFilter:{field:I_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(KF(S.value))return{unaryFilter:{field:I_(S.field),op:"IS_NOT_NAN"}};if(ZF(S.value))return{unaryFilter:{field:I_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:I_(S.field),op:B$(S.op),value:S.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:I_((C=y).field),direction:V$(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.N||Lb(y)?y:{value:y});var y,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function HL(n){let e=FL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ht(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=GL(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new v_(T_((S=C).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(C){let S;return S="object"==typeof C?C.value:C,Lb(S)?null:S}(t.limit));let p=null;var C;t.startAt&&(p=new lh((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new lh(C.values||[],!C.before)}(t.endAt)),cL(e,i,c,s,h,"F",p,y)}function GL(n){return n?void 0!==n.unaryFilter?[j$(n)]:void 0!==n.fieldFilter?[U$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>GL(e)).reduce((e,t)=>e.concat(t)):mt():[]}function V$(n){return x$[n]}function B$(n){return k$[n]}function I_(n){return{fieldPath:n.canonicalString()}}function T_(n){return Ci.fromServerFormat(n.fieldPath)}function U$(n){return os.create(T_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function j$(n){switch(n.unaryFilter.op){case"IS_NAN":const e=T_(n.unaryFilter.field);return os.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=T_(n.unaryFilter.field);return os.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=T_(n.unaryFilter.field);return os.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=T_(n.unaryFilter.field);return os.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}function H$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $L(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zL(e)),e=G$(n.get(t),e);return zL(e)}function G$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function zL(n){return n+"\x01\x01"}function Ac(n){const e=n.length;if(Ht(e>=2),2===e)return Ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&mt(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:mt()}s=c+2}return new In(r)}const WL=["userId","batchId"];function qI(n,e){return[n,js(e)]}function qL(n,e,t){return[n,js(e),t]}const $$={},z$=["prefixPath","collectionGroup","readTime","documentId"],W$=["prefixPath","collectionGroup","documentId"],q$=["collectionGroup","readTime","prefixPath","documentId"],Z$=["canonicalId","targetId"],K$=["targetId","path"],Y$=["path","targetId"],Q$=["collectionId","parent"],J$=["indexId","uid"],X$=["uid","sequenceNumber"],ez=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tz=["indexId","uid","orderedDocumentKey"],nz=["userId","collectionPath","documentId"],rz=["userId","collectionPath","largestBatchId"],iz=["userId","collectionGroup","largestBatchId"],ZL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sz=[...ZL,"documentOverlays"],KL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oz=[...KL,"indexConfiguration","indexState","indexEntries"],YL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},p=>r(p))}),c=!0,s===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class ZI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Li,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new tw(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Bx(r.target.error);this.At.reject(new tw(e,i))}}static open(e,t,r,i){try{return new ZI(t,e.transaction(i,r))}catch(s){throw new tw(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lz(t)}}class gl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===gl.Vt((0,L.z$)())&&ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),Rp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,L.hl)())return!1;if(gl.St())return!0;const e=(0,L.z$)(),t=gl.Vt(e),r=0<t&&t<10,i=gl.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Te.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new tw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Pe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new tw(e,h))},s.onupgradeneeded=c=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Te.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.Nt(e);const p=ZI.open(s.db,e,c?"readonly":"readwrite",r),y=i(p).next(C=>(p.bt(),C)).catch(C=>(p.abort(C),me.reject(C))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(Ge("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class az{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Rp(this.Ft.delete())}}class tw extends Pe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function kp(n){return"IndexedDbTransactionError"===n.name}class lz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rp(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),Rp(this.store.add(e))}get(e){return Rp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),Rp(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),Rp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Kt(i,(c,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new me((s,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,c,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=s=>{const c=Bx(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new az(h),y=t(h.primaryKey,h.value,p);if(y instanceof me){const C=y.catch(S=>(p.done(),me.reject(S)));r.push(C)}p.isDone?i():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rp(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Bx(r.target.error);t(i)}})}let JL=!1;function Bx(n){const e=gl.Vt((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JL||(JL=!0,setTimeout(()=>{throw r},0)),r}}return n}class XL extends QL{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Bi(n,e){const t=ot(n);return gl.xt(t.Ht,e)}class Ux{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&w$(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ox(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ox(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$n())}isEqual(e){return this.batchId===e.batchId&&m_(this.mutations,e.mutations,(t,r)=>EL(t,r))&&m_(this.baseMutations,e.baseMutations,(t,r)=>EL(t,r))}}class jx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ht(e.mutations.length===r.length);let i=S$;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new jx(e,t,r,i)}}class Hx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uh{constructor(e,t,r,i,s=Vt.min(),c=Vt.min(),h=Ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eV{constructor(e){this.Jt=e}}function tV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:KI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jb(i=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Qb(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Op(e.version)};else{if(!e.isUnknownDocument())return mt();r.unknownDocument={path:t.path.toArray(),version:Op(e.version)}}var i,s;return r}function KI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Op(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Np(n){const e=new Qr(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function S_(n,e){const t=(e.baseMutations||[]).map(s=>Vx(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>Vx(n.Jt,s)),i=Qr.fromMillis(e.localWriteTimeMs);return new Ux(e.batchId,i,t,r)}function nw(n){const e=Np(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Np(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var i;return void 0!==n.query.documents?(Ht(1===(i=n.query).documents.length),r=ka(b_(FL(i.documents[0])))):r=ka(HL(n.query)),new uh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ii.fromBase64String(n.resumeToken))}function nV(n,e){const t=Op(e.snapshotVersion),r=Op(e.lastLimboFreeSnapshotVersion);let i;i=UI(e.target)?UL(n.Jt,e.target):jL(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Gx(n){const e=HL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?uL(e,e.limit,"L"):e}function $x(n,e){return new Hx(e.largestBatchId,Vx(n.Jt,e.overlayMutation))}function rV(n,e){const t=e.path.lastSegment();return[n,js(e.path.popLast()),t]}class uz{getBundleMetadata(e,t){return iV(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Np(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return iV(e).put({bundleId:(r=t).id,createTime:Op(Vi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sV(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Gx(i.bundledQuery),readTime:Np(i.readTime)};var i})}saveNamedQuery(e,t){return sV(e).put({name:(r=t).name,readTime:Op(Vi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function iV(n){return Bi(n,"bundles")}function sV(n){return Bi(n,"namedQueries")}class zx{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new zx(e,t.uid||"")}getOverlay(e,t){return rw(e).get(rV(this.userId,t)).next(r=>r?$x(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const h=new Hx(t,c);i.push(this.Xt(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(js(c.getCollectionPath())));const s=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(rw(e).Qt("collectionPathOverlayIndex",h))}),me.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Zb(),s=js(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return rw(e).qt("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const y=$x(this.M,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Zb();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rw(e).Wt({index:"collectionGroupOverlayIndex",range:h},(p,y,C)=>{const S=$x(this.M,y);s.size()<i||S.largestBatchId===c?(s.set(S.getKey(),S),c=S.largestBatchId):C.done()}).next(()=>s)}Xt(e,t){return rw(e).put(function(r,i,s){const[c,h,p]=rV(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ew(r.Jt,s.mutation)}}(this.M,this.userId,t))}}function rw(n){return Bi(n,"documentOverlays")}class Pp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(jr(e.integerValue));else if("doubleValue"in e){const r=jr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Vb(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Cp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?YF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):mt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),rt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function dz(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function oV(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=dz(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Pp.fe=new Pp;class hz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=oV(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=oV(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class fz{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class pz{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class iw{constructor(){this.De=new hz,this.Ce=new fz(this.De),this.xe=new pz(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fp(this.indexId,this.documentKey,this.arrayValue,r)}}function Lp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=aV(n.arrayValue,e.arrayValue),0!==t?t:(t=aV(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function aV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class mz{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Dx(e);if(void 0!==t&&!this.Be(t))return!1;const r=Sp(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[s++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gz{constructor(){this.qe=new Wx}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ml.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class Wx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fr(In.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fr(In.comparator)).toArray()}}const YI=new Uint8Array(0);class _z{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Wx,this.Ge=new ch(r=>Dp(r),(r,i)=>Gb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:r,parent:js(i)};return lV(e).put(s)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[HF(t),""],!1,!0);return lV(e).qt(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(Ac(c.parent))}return r})}addFieldIndex(e,t){const r=QI(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=QI(e),i=JI(e),s=sw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sw(e);let i=!0;const s=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(h=>{i&&(i=!!h),s.set(c,h)})).next(()=>{if(i){let c=$n();const h=[];return me.forEach(s,(p,y)=>{var C;Ge("IndexedDbIndexManager",`Using index ${C=p,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${Dp(t)}`);const S=function(ft,ct){const Gt=Dx(ct);if(void 0===Gt)return null;for(const Xt of jI(ft,Gt.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(y,p),k=function(ft,ct){const Gt=new Map;for(const Xt of Sp(ct))for(const Pn of jI(ft,Xt.fieldPath))switch(Pn.op){case"==":case"in":Gt.set(Xt.fieldPath.canonicalString(),Pn.value);break;case"not-in":case"!=":return Gt.set(Xt.fieldPath.canonicalString(),Pn.value),Array.from(Gt.values())}return null}(y,p),F=function(ft,ct){const Gt=[];let Xt=!0;for(const Pn of Sp(ct)){const qs=0===Pn.kind?iL(ft,Pn.fieldPath,ft.startAt):sL(ft,Pn.fieldPath,ft.startAt);Gt.push(qs.value),Xt&&(Xt=qs.inclusive)}return new lh(Gt,Xt)}(y,p),B=function(ft,ct){const Gt=[];let Xt=!0;for(const Pn of Sp(ct)){const qs=0===Pn.kind?sL(ft,Pn.fieldPath,ft.endAt):iL(ft,Pn.fieldPath,ft.endAt);Gt.push(qs.value),Xt&&(Xt=qs.inclusive)}return new lh(Gt,Xt)}(y,p),ee=this.We(p,y,F),_e=this.We(p,y,B),qe=this.ze(p,y,k),at=this.He(p.indexId,S,ee,F.inclusive,_e,B.inclusive,qe);return me.forEach(at,ft=>r.Gt(ft,t.limit).next(ct=>{ct.forEach(Gt=>{const Xt=rt.fromSegments(Gt.documentKey);c.has(Xt)||(c=c.add(Xt),h.push(Xt))})}))}).next(()=>h)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,s,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),C=[];for(let S=0;S<p;++S){const k=t?this.Je(t[S/y]):YI,F=this.Ye(e,k,r[S%y],i),B=this.Xe(e,k,s[S%y],c),ee=h.map(_e=>this.Ye(e,k,_e,!0));C.push(...this.createRange(F,B,ee))}return C}Ye(e,t,r,i){const s=new Fp(e,rt.empty(),t,r);return i?s:s.ke()}Xe(e,t,r,i){const s=new Fp(e,rt.empty(),t,r);return i?s.ke():s}je(e,t){const r=new mz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const h of s)r.$e(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?0!==r&&s.fields.length<function(c){let h=new fr(Ci.comparator),p=!1;for(const y of c.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?p=!0:h=h.add(C.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new iw;for(const i of Sp(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.Ne(i.kind);Pp.fe.Zt(s,c)}return r.Se()}Je(e){const t=new iw;return Pp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new iw;return Pp.fe.Zt(Tp(this.databaseId,t),r.Ne(function(i){const s=Sp(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new iw);let s=0;for(const c of Sp(e)){const h=r[s++];for(const p of i)if(this.en(t,c.fieldPath)&&Ub(h))i=this.nn(i,c,h);else{const y=p.Ne(c.kind);Pp.fe.Zt(h,y)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new iw;p.seed(h.Se()),Pp.fe.Zt(c,p.Ne(t.kind)),s.push(p)}return s}en(e,t){return!!e.filters.find(r=>r instanceof os&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=QI(e),i=JI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const c=[];return me.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(y,C){const S=C?new Hb(C.sequenceNumber,new ml(Np(C.readTime),new rt(Ac(C.documentKey)),C.largestBatchId)):Hb.empty(),k=y.fields.map(([F,B])=>new VI(Ci.fromServerFormat(F),B));return new LI(y.indexId,y.collectionGroup,k,S)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=QI(e),s=JI(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Op((k=r).readTime),documentKey:js(k.documentKey.path),largestBatchId:k.largestBatchId});var k})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,p=>this.on(e,i,p).next(y=>{const C=this.un(s,p);return y.isEqual(C)?me.resolve():this.an(e,s,p,y,C)}))))})}cn(e,t,r,i){return sw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return sw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=sw(e);let s=new fr(Lp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,h)=>{s=s.add(new Fp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}un(e,t){let r=new fr(Lp);const i=this.Ze(t,e);if(null==i)return r;const s=Dx(t);if(null!=s){const c=e.data.field(s.fieldPath);if(Ub(c))for(const h of c.arrayValue.values||[])r=r.add(new Fp(t.indexId,e.key,this.Je(h),i))}else r=r.add(new Fp(t.indexId,e.key,YI,i));return r}an(e,t,r,i,s){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,y,C,S){const k=h.getIterator(),F=p.getIterator();let B=y_(k),ee=y_(F);for(;B||ee;){let _e=!1,qe=!1;if(B&&ee){const at=y(B,ee);at<0?qe=!0:at>0&&(_e=!0)}else null!=B?qe=!0:_e=!0;_e?(C(ee),ee=y_(F)):qe?(S(B),B=y_(k)):(B=y_(k),ee=y_(F))}}(i,s,Lp,h=>{c.push(this.cn(e,t,r,h))},h=>{c.push(this.hn(e,t,r,h))}),me.waitFor(c)}rn(e){let t=1;return JI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Lp(c,h)).filter((c,h,p)=>!h||0!==Lp(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=Lp(c,e),p=Lp(c,t);if(0===h)i[0]=e.ke();else if(h>0&&p<0)i.push(c),i.push(c.ke());else if(p>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2)s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,YI,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,YI,[]]));return s}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?(!r||tL(s.indexState.offset,r)<0)&&(r=s.indexState.offset):r=ml.min()})).next(()=>r)}}function lV(n){return Bi(n,"collectionParents")}function sw(n){return Bi(n,"indexEntries")}function QI(n){return Bi(n,"indexConfiguration")}function JI(n){return Bi(n,"indexState")}const cV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class po{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new po(e,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.Wt({range:c},(C,S,k)=>(h++,k.delete()));s.push(p.next(()=>{Ht(1===h)}));const y=[];for(const C of t.mutations){const S=qL(e,C.key.path,t.batchId);s.push(i.delete(S)),y.push(C.key)}return me.waitFor(s).next(()=>y)}function XI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw mt();e=n.noDocument}return JSON.stringify(e).length}po.DEFAULT_COLLECTION_PERCENTILE=10,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,po.DEFAULT=new po(41943040,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),po.DISABLED=new po(-1,0,0);class qx{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ht(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new qx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).Wt({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=D_(e),c=dh(e);return c.add({}).next(h=>{Ht("number"==typeof h);const p=new Ux(h,t,r,i),y=function(k,F,B){const ee=B.baseMutations.map(qe=>ew(k.Jt,qe)),_e=B.mutations.map(qe=>ew(k.Jt,qe));return{userId:F,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:ee,mutations:_e}}(this.M,this.userId,p),C=[];let S=new fr((k,F)=>Jt(k.canonicalString(),F.canonicalString()));for(const k of i){const F=qL(this.userId,k.key.path,h);S=S.add(k.key.path.popLast()),C.push(c.put(y)),C.push(s.put(F,$$))}return S.forEach(k=>{C.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.ln[h]=p.keys()}),me.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return dh(e).get(t).next(r=>r?(Ht(r.userId===this.userId),S_(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return dh(e).Wt({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Ht(h.batchId>=r),s=S_(this.M,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>S_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return D_(e).Wt({range:i},(c,h,p)=>{const[y,C,S]=c,k=Ac(C);if(y===this.userId&&t.path.isEqual(k))return dh(e).get(S).next(F=>{if(!F)throw mt();Ht(F.userId===this.userId),s.push(S_(this.M,F))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(Jt);const i=[];return t.forEach(s=>{const c=qI(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=D_(e).Wt({range:h},(y,C,S)=>{const[k,F,B]=y,ee=Ac(F);k===this.userId&&s.path.isEqual(ee)?r=r.add(B):S.done()});i.push(p)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=qI(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new fr(Jt);return D_(e).Wt({range:c},(p,y,C)=>{const[S,k,F]=p,B=Ac(k);S===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(F)):C.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(dh(e).get(s).next(c=>{if(null===c)throw mt();Ht(c.userId===this.userId),r.push(S_(this.M,c))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return uV(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return D_(e).Wt({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=Ac(s[1]);i.push(p)}else h.done()}).next(()=>{Ht(0===i.length)})})}containsKey(e,t){return dV(e,this.userId,t)}wn(e){return hV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dV(n,e,t){const r=qI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return D_(n).Wt({range:s,jt:!0},(h,p,y)=>{const[C,S,k]=h;C===e&&S===i&&(c=!0),y.done()}).next(()=>c)}function dh(n){return Bi(n,"mutations")}function D_(n){return Bi(n,"documentMutations")}function hV(n){return Bi(n,"mutationQueues")}class Vp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Vp(0)}static yn(){return new Vp(-1)}}class yz{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Vp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Vt.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>A_(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ht(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return A_(e).Wt((c,h)=>{const p=nw(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(s)).next(()=>i)}forEachTarget(e,t){return A_(e).Wt((r,i)=>{const s=nw(i);t(s)})}pn(e){return fV(e).get("targetGlobalKey").next(t=>(Ht(null!==t),t))}In(e,t){return fV(e).put("targetGlobalKey",t)}Tn(e,t){return A_(e).put(nV(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return A_(e).Wt({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const y=nw(h);Gb(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=hh(e);return t.forEach(c=>{const h=js(c.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=hh(e);return me.forEach(t,s=>{const c=js(s.path);return me.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=hh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hh(e);let s=$n();return i.Wt({range:r,jt:!0},(c,h,p)=>{const y=Ac(c[1]),C=new rt(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=js(t.path),i=IDBKeyRange.bound([r],[HF(r)],!1,!0);let s=0;return hh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return A_(e).get(t).next(r=>r?nw(r):null)}}function A_(n){return Bi(n,"targets")}function fV(n){return Bi(n,"targetGlobal")}function hh(n){return Bi(n,"targetDocuments")}function Bp(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Te.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==YL)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),Zx.apply(this,arguments)}function pV([n,e],[t,r]){const i=Jt(n,t);return 0===i?Jt(e,r):i}class vz{constructor(e){this.An=e,this.buffer=new fr(pV),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bz{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ge("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Te.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){kp(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Bp(i)}yield t.Sn(e)}))}}class wz{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(jo.A);const r=new vz(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(cV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cV):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,s,c,h,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(s=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),Ex()<=Bo.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:S})))}}class Ez{constructor(e,t){this.db=e,this.garbageCollector=new wz(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return eT(e,r)}removeReference(e,t,r){return eT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return eT(e,t)}On(e,t){return function(r,i){let s=!1;return hV(r).zt(c=>dV(r,c,i).next(h=>(h&&(s=!0),me.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(e,(c,h)=>{if(h<=t){const p=this.On(e,c).next(y=>{if(!y)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Vt.min()),hh(e).delete([0,js(c.path)])))});i.push(p)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return eT(e,t)}Mn(e,t){const r=hh(e);let i,s=jo.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:y})=>{0===c?(s!==jo.A&&t(new rt(Ac(i)),s),s=y,i=p):s=jo.A}).next(()=>{s!==jo.A&&t(new rt(Ac(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function eT(n,e){return hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:js(e.path),sequenceNumber:r}));var r}class mV{constructor(){this.changes=new ch(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cz{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Up(e).put(r)}removeEntry(e,t,r){return Up(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],KI(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=br.newInvalidDocument(t);return Up(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ow(t))},(i,s)=>{r=this.$n(t,s)}).next(()=>r)}Bn(e,t){let r={size:0,document:br.newInvalidDocument(t)};return Up(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ow(t))},(i,s)=>{r={document:this.$n(t,s),size:XI(s)}}).next(()=>r)}getEntries(e,t){let r=Ra();return this.Ln(e,t,(i,s)=>{const c=this.$n(i,s);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=Ra(),i=new Jr(rt.comparator);return this.Ln(e,t,(s,c)=>{const h=this.$n(s,c);r=r.insert(s,h),i=i.insert(s,XI(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new fr(yV);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(ow(i.first()),ow(i.last())),c=i.getIterator();let h=c.getNext();return Up(e).Wt({index:"documentKeyIndex",range:s},(p,y,C)=>{const S=rt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&yV(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?C.Ut(ow(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),KI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Up(e).qt(IDBKeyRange.bound(i,s,!0)).next(c=>{let h=Ra();for(const p of c){const y=this.$n(rt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Ra();const c=_V(t,r),h=_V(t,ml.max());return Up(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,y,C)=>{const S=this.$n(rt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(S.key,S),s.size===i&&C.done()}).next(()=>s)}newChangeBuffer(e){return new Iz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gV(e).get("remoteDocumentGlobalKey").next(t=>(Ht(!!t),t))}Fn(e,t){return gV(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=BL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=Np(e.noDocument.readTime);t=br.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const r=rt.fromSegments(e.unknownDocument.path),i=Np(e.unknownDocument.version);t=br.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qr(r[0],r[1]);return Vt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return br.newInvalidDocument(e)}}class Iz extends mV{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ch(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new fr((s,c)=>Jt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,h.readTime)),c.isValidDocument()){const p=tV(this.Kn.M,c);i=i.add(s.path.popLast()),r+=XI(p)-h.size,t.push(this.Kn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=tV(this.Kn.M,c.convertToNoDocument(Vt.min()));t.push(this.Kn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((s,c)=>{this.Gn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function gV(n){return Bi(n,"remoteDocumentGlobal")}function Up(n){return Bi(n,"remoteDocumentsV14")}function ow(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _V(n,e){const t=e.documentKey.path.toArray();return[n,KI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Jt(t[s],r[s]),i)return i;return i=Jt(t.length,r.length),i||(i=Jt(t[t.length-2],r[r.length-2]),i||Jt(t[t.length-1],r[r.length-1]))}class Tz{constructor(e){this.M=e}kt(e,t,r,i){const s=new ZI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WL,{unique:!0}),h.createObjectStore("documentMutations"),vV(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),vV(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WL,{unique:!0});const C=p.store("mutations"),S=y.map(k=>C.put(k));return me.waitFor(S)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(s))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(s))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(s))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:nz});p.createIndex("collectionPathOverlayIndex",rz,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",iz,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:z$});p.createIndex("documentKeyIndex",W$),p.createIndex("collectionGroupIndex",q$)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:J$}).createIndex("sequenceNumberIndex",X$,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:ez}).createIndex("documentKeyIndex",tz,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=XI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>me.forEach(h,p=>{Ht(p.userId===s.userId);const y=S_(this.M,p);return uV(e,s.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((c,h)=>{const p=new In(c),y=[0,js(p)];s.push(t.get(y).next(C=>C?me.resolve():t.put({targetId:0,path:js(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Q$});const r=t.store("collectionParents"),i=new Wx,s=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:js(p)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const p=new In(c);return s(p.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,h,p],y)=>{const C=Ac(h);return s(C.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const s=nw(i),c=nV(this.M,s);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((s,c)=>{const h=t.store("remoteDocumentsV14"),p=(y=c,y.document?new rt(In.fromString(y.document.name).popFirst(5)):y.noDocument?rt.fromSegments(y.noDocument.path):y.unknownDocument?rt.fromSegments(y.unknownDocument.path):mt()).path.toArray();var y;const C={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>me.waitFor(i))}}function vV(n){n.createObjectStore("targetDocuments",{keyPath:K$}).createIndex("documentTargetsIndex",Y$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Z$,{unique:!0}),n.createObjectStore("targetGlobal")}const Kx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yx{constructor(e,t,r,i,s,c,h,p,y,C,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=s,this.window=c,this.document=h,this.Xn=y,this.Zn=C,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=k=>Promise.resolve(),!Yx.vt())throw new Pe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ez(this,i),this.hs=t+"main",this.M=new eV(p),this.ls=new gl(this.hs,this.ts,new Tz(this.M)),this.fs=new yz(this.referenceDelegate,this.M),this.ds=new Cz(this.M),this._s=new uz,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(pe.FAILED_PRECONDITION,Kx);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new jo(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(kp(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return aw(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return tT(e).delete(this.clientId)}vs(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Bi(r,"clientMetadata");return i.qt().next(s=>{const c=e.Ds(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return me.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):aw(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(pe.FAILED_PRECONDITION,Kx);return!1}}return!(!this.networkEnabled||!this.inForeground)||tT(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new XL(t,jo.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>tT(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return qx.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new _z(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return zx.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(c=this.ts)?oz:13===c?KL:12===c?sz:11===c?ZL:void mt();var c;let h;return this.ls.runTransaction(e,i,s,p=>(h=new XL(p,this.es?this.es.next():jo.A),"readwrite-primary"===t?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(pe.FAILED_PRECONDITION,YL);return r(h)}).next(y=>this.bs(h).next(()=>y)):this.$s(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}$s(e){return aw(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(pe.FAILED_PRECONDITION,Kx)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return aw(e).put("owner",t)}static vt(){return gl.vt()}Rs(e){const t=aw(e);return t.get("owner").next(r=>this.Ps(r)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ui(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ui("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ui("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function aw(n){return Bi(n,"owner")}function tT(n){return Bi(n,"clientMetadata")}function Qx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Sz{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):xx(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new rt(t)).next(r=>{let i=Px();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let s=Px();return this.indexManager.getCollectionParents(e,i).next(c=>me.forEach(c,h=>{const p=(y=t,C=h.child(i),new Vu(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.zs(e,p,r).next(y=>{y.forEach((C,S)=>{s=s.insert(C,S)})})}).next(()=>s))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const c of s)for(const h of c.mutations){const p=h.key;let y=i.get(p);null==y&&(y=br.newInvalidDocument(p),i=i.insert(p,y)),Ox(h,y,c.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((s,c)=>{Rx(t,c)||(i=i.remove(s))}),i))}}class Jx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=$n(),i=$n();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Jx(e,t.fromCache,r,i)}}class bV{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(s=>s||this.ei(e,t,i,r)).next(s=>s||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Vt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(s=>{const c=this.si(t,s);return this.ii(t,c,r,i)?this.ni(e,t):(Ex()<=Bo.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kx(t)),this.ri(e,c,t,eL(i,-1)))})}si(e,t){let r=new fr(fL(e));return t.forEach((i,s)=>{Rx(e,s)&&(r=r.add(s))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,t){return Ex()<=Bo.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",kx(t)),this.Zs.Qs(e,t,ml.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class Dz{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Jr(Jt),this.ai=new ch(s=>Dp(s),Gb),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Sz(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function wV(n,e,t,r){return new Dz(n,e,t,r)}function EV(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,Te.Z)(function*(n,e){const t=ot(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(s=>(i=s,t.li(e),t.Bs.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=$n();for(const y of i){c.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.fi.Ks(r,p).next(y=>({di:y,removedBatchIds:c,addedBatchIds:h}))})})}),Xx.apply(this,arguments)}function Az(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const C=p.batch,S=C.keys();let k=me.resolve();return S.forEach(F=>{k=k.next(()=>y.getEntry(h,F)).next(B=>{const ee=p.docVersions.get(F);Ht(null!==ee),B.version.compareTo(ee)<0&&(C.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),k.next(()=>c.Bs.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function CV(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Mz(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((y,C)=>{const S=i.get(C);if(!S)return;h.push(t.fs.removeMatchingKeys(s,y.removedDocuments,C).next(()=>t.fs.addMatchingKeys(s,y.addedDocuments,C)));let k=S.withSequenceNumber(s.currentSequenceNumber);var F,B,ee;e.targetMismatches.has(C)?k=k.withResumeToken(Ii.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),i=i.insert(C,k),B=k,ee=y,(0===(F=S).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(s,k))});let p=Ra();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(IV(s,c,e.documentUpdates).next(y=>{p=y})),!r.isEqual(Vt.min())){const y=t.fs.getLastRemoteSnapshotVersion(s).next(C=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return me.waitFor(h).next(()=>c.apply(s)).next(()=>t.fi.Gs(s,p)).next(()=>p)}).then(s=>(t.ui=i,s))}function IV(n,e,t){let r=$n();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=Ra();return t.forEach((c,h)=>{const p=i.get(c);h.isNoDocument()&&h.version.isEqual(Vt.min())?(e.removeEntry(c,h.readTime),s=s.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),s=s.insert(c,h)):Ge("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),s})}function xz(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function M_(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(s=>s?(i=s,me.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new uh(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function x_(n,e,t){return ek.apply(this,arguments)}function ek(){return ek=(0,Te.Z)(function*(n,e,t){const r=ot(n),i=r.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!kp(c))throw c;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),ek.apply(this,arguments)}function nT(n,e,t){const r=ot(n);let i=Vt.min(),s=$n();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,y){const C=ot(h),S=C.ai.get(y);return void 0!==S?me.resolve(C.ui.get(S)):C.fs.getTargetData(p,y)}(r,c,ka(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.oi.Qs(c,e,t?i:Vt.min(),t?s:$n())).next(h=>(DV(r,hL(e),h),{documents:h,_i:s})))}function TV(n,e){const t=ot(n),r=ot(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(c=>c?c.target:null))}function SV(n,e){const t=ot(n),r=t.ci.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,eL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(DV(t,e,i),i))}function DV(n,e,t){let r=Vt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ci.set(e,r)}function tk(){return tk=(0,Te.Z)(function*(n,e,t,r){const i=ot(n);let s=$n(),c=Ra();for(const y of t){const C=e.wi(y.metadata.name);y.document&&(s=s.add(C));const S=e.mi(y);S.setReadTime(e.gi(y.metadata.readTime)),c=c.insert(C,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),p=yield M_(i,(y=r,ka(b_(In.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>IV(y,h,c).next(C=>(h.apply(y),C)).next(C=>i.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.fs.addMatchingKeys(y,s,p.targetId)).next(()=>i.fi.Gs(y,C)).next(()=>C)))}),tk.apply(this,arguments)}function Rz(n,e){return nk.apply(this,arguments)}function nk(){return nk=(0,Te.Z)(function*(n,e,t=$n()){const r=yield M_(n,ka(Gx(e.bundledQuery))),i=ot(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=Vi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(s,e);const h=r.withResumeToken(Ii.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(s,h).next(()=>i.fs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.fs.addMatchingKeys(s,t,r.targetId)).next(()=>i._s.saveNamedQuery(s,e))})}),nk.apply(this,arguments)}class Oz{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Vi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Gx(r.bundledQuery),readTime:Vi(r.readTime)}),me.resolve();var r}}class Nz{constructor(){this.overlays=new Jr(rt.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=Zb(),s=t.length+1,c=new rt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Jr((y,C)=>y-C);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=Zb(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=Zb(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=i)););return me.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Hx(t,r));let s=this.Ii.get(t);void 0===s&&(s=$n(),this.Ii.set(t,s)),this.Ii.set(t,s.add(r.key))}}class rk{constructor(){this.Ti=new fr(Ui.Ei),this.Ai=new fr(Ui.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ui(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new rt(new In([])),r=new Ui(t,e),i=new Ui(t,e+1),s=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),s.push(c.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new rt(new In([])),r=new Ui(t,e),i=new Ui(t,e+1);let s=$n();return this.Ai.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new Ui(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return rt.comparator(e.key,t.key)||Jt(e.Ci,t.Ci)}static Ri(e,t){return Jt(e.Ci,t.Ci)||rt.comparator(e.key,t.key)}}class Pz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new fr(Ui.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const s=this.xi;this.xi++;const c=new Ux(s,t,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new Ui(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),s=i<0?0:i;return me.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);s.push(h)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(Jt);return t.forEach(i=>{const s=new Ui(i,0),c=new Ui(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,c],h=>{r=r.add(h.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;rt.isDocumentKey(s)||(s=s.child(""));const c=new Ui(new rt(s),0);let h=new fr(Jt);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.Ci)),!0)},c),me.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ht(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const s=new Ui(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ui(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Fz{constructor(e){this.$i=e,this.docs=new Jr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():br.newInvalidDocument(t))}getEntries(e,t){let r=Ra();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():br.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=Ra();const s=new rt(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||tL(i$(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){mt()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Lz(this)}getSize(e){return me.resolve(this.size)}}class Lz extends mV{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Vz{constructor(e){this.persistence=e,this.Li=new ch(t=>Dp(t),Gb),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new rk,this.targetCount=0,this.Ki=Vp.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Vp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(s).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class Bz{constructor(e,t){this.Gi={},this.overlays={},this.es=new jo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Vz(this),this.indexManager=new gz,this.ds=new Fz(r=>this.referenceDelegate.Qi(r)),this.M=new eV(t),this._s=new Oz(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Pz(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new Uz(this.es.next());return this.referenceDelegate.ji(),r(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class Uz extends QL{constructor(e){super(),this.currentSequenceNumber=e}}class ik{constructor(e){this.persistence=e,this.Hi=new rk,this.Ji=null}static Yi(e){return new ik(e)}get Xi(){if(this.Ji)return this.Ji;throw mt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=rt.fromPath(r);return this.Zi(e,i).next(s=>{s||t.removeEntry(i,Vt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function AV(n,e){return`firestore_clients_${n}_${e}`}function MV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sk(n,e){return`firestore_targets_${n}_${e}`}class rT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new Pe(i.error.code,i.error.message))),c?new rT(e,t,i.state,s):(ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new lw(e,r.state,i):(ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=zI();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=WF(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new iT(e,s):(ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ok{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ok(t.clientId,t.onlineState):(ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ak{constructor(){this.activeTargetIds=zI()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lk{constructor(e,t,r,i,s){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Jr(Jt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=AV(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ak),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const s=e.getItem(AV(e.persistenceKey,i));if(s){const c=iT.tr(i,s);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sk(this.persistenceKey,e));if(r){const i=lw.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sk(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(s){let c=jo.A;if(null!=s)try{const h=JSON.parse(s);Ht("number"==typeof h),c=h}catch(h){ui("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==jo.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new rT(this.currentUser,e,t,r),s=MV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.er())}Ar(e){const t=MV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=sk(this.persistenceKey,e),s=new lw(e,t,r);this.setItem(i,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return iT.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return rT.tr(new is(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return lw.tr(i,t)}pr(e){return ok.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),s=this.Tr(r),c=[],h=[];return s.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Lr(c,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=zI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class xV{constructor(){this.Ur=new ak,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ak,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jz{Kr(e){}shutdown(){}}class kV{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Gz{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class $z extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const c=this.ho(e,t);Ge("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,s),this.fo(e,c,h,r).then(p=>(Ge("RestConnection","Received: ",p),p),p=>{throw Nb("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}_o(e,t,r,i,s){return this.co(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+p_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.uo}/v1/${t}:${Hz[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,c)=>{const h=new HG;h.listenOnce(BG.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wx.NO_ERROR:const y=h.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(y)),s(y);break;case wx.TIMEOUT:Ge("Connection",'RPC "'+e+'" timed out'),c(new Pe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case wx.HTTP_ERROR:const C=h.getStatus();if(Ge("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const k=function(F){const B=F.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(B)>=0?B:pe.UNKNOWN}(S.status);c(new Pe(k,S.message))}else c(new Pe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Pe(pe.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{Ge("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=LG(),c=VG(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new jG({})),this.lo(h.initMessageHeaders,t,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Ge("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let C=!1,S=!1;const k=new Gz({Jr:B=>{S?Ge("Connection","Not sending because WebChannel is closed:",B):(C||(Ge("Connection","Opening WebChannel transport."),y.open(),C=!0),Ge("Connection","WebChannel sending:",B),y.send(B))},Yr:()=>y.close()}),F=(B,ee,_e)=>{B.listen(ee,qe=>{try{_e(qe)}catch(at){setTimeout(()=>{throw at},0)}})};return F(y,NI.EventType.OPEN,()=>{S||Ge("Connection","WebChannel transport opened.")}),F(y,NI.EventType.CLOSE,()=>{S||(S=!0,Ge("Connection","WebChannel transport closed"),k.ro())}),F(y,NI.EventType.ERROR,B=>{S||(S=!0,Nb("Connection","WebChannel transport errored:",B),k.ro(new Pe(pe.UNAVAILABLE,"The operation could not be completed")))}),F(y,NI.EventType.MESSAGE,B=>{var ee;if(!S){const _e=B.data[0];Ht(!!_e);const qe=_e,at=qe.error||(null===(ee=qe[0])||void 0===ee?void 0:ee.error);if(at){Ge("Connection","WebChannel received error:",at);const ft=at.status;let ct=function(Xt){const Pn=hi[Xt];if(void 0!==Pn)return AL(Pn)}(ft),Gt=at.message;void 0===ct&&(ct=pe.INTERNAL,Gt="Unknown error status: "+ft+" with message "+at.message),S=!0,k.ro(new Pe(ct,Gt)),y.close()}else Ge("Connection","WebChannel received:",_e),k.oo(_e)}}),F(c,UG.STAT_EVENT,B=>{B.stat===LF.PROXY?Ge("Connection","Detected buffering proxy"):B.stat===LF.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.io()},0),k}}function RV(){return"undefined"!=typeof window?window:null}function sT(){return"undefined"!=typeof document?document:null}function cw(n){return new R$(n,!0)}class ck{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class OV{constructor(e,t,r,i,s,c,h,p){this.Yn=e,this.Vo=r,this.vo=i,this.So=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new ck(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Te.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Te.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Pe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Te.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zz extends OV{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:mt(),i=e.targetChange.targetIds||[],s=function(p,y){return p.N?(Ht(void 0===y||"string"==typeof y),Ii.fromBase64String(y||"")):(Ht(void 0===y||y instanceof Uint8Array),Ii.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const y=void 0===p.code?pe.UNKNOWN:AL(p.code);return new Pe(y,p.message||"")}(c);t=new xL(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Dc(n,r.document.name),s=Vi(r.document.updateTime),c=new Is({mapValue:{fields:r.document.fields}}),h=br.newFoundDocument(i,s,c);t=new WI(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Dc(n,r.document),s=r.readTime?Vi(r.readTime):Vt.min(),c=br.newNoDocument(i,s);t=new WI([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Dc(n,r.document);t=new WI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return mt();{const r=e.filter,s=new C$(r.count||0);t=new ML(r.targetId,s)}}var p;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Vt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Vt.min():s.readTime?Vi(s.readTime):Vt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Xb(this.M),t.addTarget=function(i,s){let c;const h=s.target;return c=UI(h)?{documents:UL(i,h)}:{query:jL(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=NL(i,s.resumeToken):s.snapshotVersion.compareTo(Vt.min())>0&&(c.readTime=Qb(i,s.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Xb(this.M),t.removeTarget=e,this.Lo(t)}}class Wz extends OV{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Ht(void 0!==e),n.map(t=>function(r,i){let s=Vi(r.updateTime?r.updateTime:i);return s.isEqual(Vt.min())&&(s=Vi(i)),new b$(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.tu(r,t)}return Ht(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Xb(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ew(this.M,r))};this.Lo(t)}}class qz extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(pe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(pe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class Zz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ui(t),this.uu=!1):Ge("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Kz{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{r.enqueueAndForget((0,Te.Z)(function*(){var p;fh(c)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Te.Z)(function*(y){const C=ot(y);C.wu.add(4),yield k_(C),C.yu.set("Unknown"),C.wu.delete(4),yield uw(C)}),function(y){return p.apply(this,arguments)})(c))}))}),this.yu=new Zz(r,i)}}function uw(n){return uk.apply(this,arguments)}function uk(){return uk=(0,Te.Z)(function*(n){if(fh(n))for(const e of n.mu)yield e(!0)}),uk.apply(this,arguments)}function k_(n){return dk.apply(this,arguments)}function dk(){return dk=(0,Te.Z)(function*(n){for(const e of n.mu)yield e(!1)}),dk.apply(this,arguments)}function oT(n,e){const t=ot(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),pk(t)?fk(t):O_(t).Mo()&&hk(t,e))}function dw(n,e){const t=ot(n),r=O_(t);t._u.delete(e),r.Mo()&&NV(t,e),0===t._u.size&&(r.Mo()?r.$o():fh(t)&&t.yu.set("Unknown"))}function hk(n,e){n.pu.Z(e.targetId),O_(n).Ho(e)}function NV(n,e){n.pu.Z(e),O_(n).Jo(e)}function fk(n){n.pu=new M$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),O_(n).start(),n.yu.au()}function pk(n){return fh(n)&&!O_(n).ko()&&n._u.size>0}function fh(n){return 0===ot(n).wu.size}function PV(n){n.pu=void 0}function Yz(n){return mk.apply(this,arguments)}function mk(){return mk=(0,Te.Z)(function*(n){n._u.forEach((e,t)=>{hk(n,e)})}),mk.apply(this,arguments)}function Qz(n,e){return gk.apply(this,arguments)}function gk(){return gk=(0,Te.Z)(function*(n,e){PV(n),pk(n)?(n.yu.lu(e),fk(n)):n.yu.set("Unknown")}),gk.apply(this,arguments)}function Jz(n,e,t){return _k.apply(this,arguments)}function _k(){return _k=(0,Te.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof xL&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aT(n,r)}else if(e instanceof WI?n.pu.ut(e):e instanceof ML?n.pu._t(e):n.pu.ht(e),!t.isEqual(Vt.min()))try{const r=yield CV(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.pu.yt(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i._u.get(p);y&&i._u.set(p,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const p=i._u.get(h);if(!p)return;i._u.set(h,p.withResumeToken(Ii.EMPTY_BYTE_STRING,p.snapshotVersion)),NV(i,h);const y=new uh(p.target,h,1,p.sequenceNumber);hk(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield aT(n,r)}var r}),_k.apply(this,arguments)}function aT(n,e,t){return yk.apply(this,arguments)}function yk(){return yk=(0,Te.Z)(function*(n,e,t){if(!kp(e))throw e;n.wu.add(1),yield k_(n),n.yu.set("Offline"),t||(t=()=>CV(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield uw(n)}))}),yk.apply(this,arguments)}function FV(n,e){return e().catch(t=>aT(n,t,e))}function R_(n){return vk.apply(this,arguments)}function vk(){return vk=(0,Te.Z)(function*(n){const e=ot(n),t=ph(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Xz(e);)try{const i=yield xz(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,eW(e,i)}catch(i){yield aT(e,i)}LV(e)&&VV(e)}),vk.apply(this,arguments)}function Xz(n){return fh(n)&&n.du.length<10}function eW(n,e){n.du.push(e);const t=ph(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function LV(n){return fh(n)&&!ph(n).ko()&&n.du.length>0}function VV(n){ph(n).start()}function tW(n){return bk.apply(this,arguments)}function bk(){return bk=(0,Te.Z)(function*(n){ph(n).nu()}),bk.apply(this,arguments)}function nW(n){return wk.apply(this,arguments)}function wk(){return wk=(0,Te.Z)(function*(n){const e=ph(n);for(const t of n.du)e.Zo(t.mutations)}),wk.apply(this,arguments)}function rW(n,e,t){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,Te.Z)(function*(n,e,t){const r=n.du.shift(),i=jx.from(r,e,t);yield FV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield R_(n)}),Ek.apply(this,arguments)}function iW(n,e){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,Te.Z)(function*(n,e){var t;e&&ph(n).Xo&&(yield(t=(0,Te.Z)(function*(r,i){if(DL(s=i.code)&&s!==pe.ABORTED){const c=r.du.shift();ph(r).Fo(),yield FV(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield R_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),LV(n)&&VV(n)}),Ck.apply(this,arguments)}function BV(n,e){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,Te.Z)(function*(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=fh(t);t.wu.add(3),yield k_(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield uw(t)}),Ik.apply(this,arguments)}function Tk(n,e){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,Te.Z)(function*(n,e){const t=ot(n);e?(t.wu.delete(2),yield uw(t)):e||(t.wu.add(2),yield k_(t),t.yu.set("Unknown"))}),Sk.apply(this,arguments)}function O_(n){return n.Iu||(n.Iu=function(e,t,r){const i=ot(e);return i.iu(),new zz(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Yz.bind(null,n),eo:Qz.bind(null,n),zo:Jz.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Iu.Fo(),pk(n)?fk(n):n.yu.set("Unknown")):(yield n.Iu.stop(),PV(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ph(n){return n.Tu||(n.Tu=function(e,t,r){const i=ot(e);return i.iu(),new Wz(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:tW.bind(null,n),eo:iW.bind(null,n),eu:nW.bind(null,n),tu:rW.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Tu.Fo(),yield R_(n)):(yield n.Tu.stop(),n.du.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Dk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new Dk(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(n,e){if(ui("AsyncQueue",`${e}: ${n}`),kp(n))return new Pe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class P_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=Px(),this.sortedSet=new Jr(this.comparator)}static emptySet(e){return new P_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof P_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new P_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UV{constructor(){this.Eu=new Jr(rt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):mt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class F_{constructor(e,t,r,i,s,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new F_(e,t,P_.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$b(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class sW{constructor(){this.Ru=void 0,this.listeners=[]}}class oW{constructor(){this.queries=new ch(e=>dL(e),$b),this.onlineState="Unknown",this.bu=new Set}}function Ak(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,Te.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new sW),i)try{s.Ru=yield t.onListen(r)}catch(c){const h=N_(c,`Initialization of query '${kx(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&Rk(t)}),Mk.apply(this,arguments)}function xk(n,e){return kk.apply(this,arguments)}function kk(){return kk=(0,Te.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kk.apply(this,arguments)}function aW(n,e){const t=ot(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&Rk(t)}function lW(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Rk(n){n.bu.forEach(e=>{e.next()})}class Ok{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new F_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=F_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class cW{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class jV{constructor(e){this.M=e}wi(e){return Dc(this.M,e)}mi(e){return e.metadata.exists?BL(this.M,e.document,!1):br.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Vi(e)}}class uW{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HV(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=In.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new jV(this.M);for(const i of e)if(i.metadata.queries){const s=r.wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||$n()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function(n,e,t,r){return tk.apply(this,arguments)}(e.localStore,new jV(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield Rz(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function HV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GV{constructor(e){this.key=e}}class $V{constructor(e){this.key=e}}class zV{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=$n(),this.mutatedKeys=$n(),this.Gu=fL(e),this.Qu=new P_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new UV,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const k=i.get(C),F=Rx(this.query,S)?S:null,B=!!k&&this.mutatedKeys.has(k.key),ee=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let _e=!1;k&&F?k.data.isEqual(F.data)?B!==ee&&(r.track({type:3,doc:F}),_e=!0):this.Hu(k,F)||(r.track({type:2,doc:F}),_e=!0,(p&&this.Gu(F,p)>0||y&&this.Gu(F,y)<0)&&(h=!0)):!k&&F?(r.track({type:0,doc:F}),_e=!0):k&&!F&&(r.track({type:1,doc:k}),_e=!0,(p||y)&&(h=!0)),_e&&(F?(c=c.add(F),s=ee?s.add(C):s.delete(C)):(c=c.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{Qu:c,zu:r,ii:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((y,C)=>function(S,k){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return F(S)-F(k)}(y.type,C.type)||this.Gu(y.doc,C.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new F_(this.query,e.Qu,i,s,e.mutatedKeys,0===h,p,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new UV,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=$n(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new $V(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new GV(r))}),t}ta(e){this.Uu=e._i,this.Ku=$n();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return F_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class dW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hW{constructor(e){this.key=e,this.na=!1}}class fW{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new ch(h=>dL(h),$b),this.ra=new Map,this.oa=new Set,this.ua=new Jr(rt.comparator),this.aa=new Map,this.ca=new rk,this.ha={},this.la=new Map,this.fa=Vp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function pW(n,e){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,Te.Z)(function*(n,e){const t=rR(n);let r,i;const s=t.ia.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const c=yield M_(t.localStore,ka(e));t.isPrimaryClient&&oT(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Pk(t,e,r,"current"===h)}return i}),Nk.apply(this,arguments)}function Pk(n,e,t,r){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,Te.Z)(function*(n,e,t,r){n._a=(C,S,k)=>{return(F=(0,Te.Z)(function*(B,ee,_e,qe){let at=ee.view.Wu(_e);at.ii&&(at=yield nT(B.localStore,ee.query,!1).then(({documents:Gt})=>ee.view.Wu(Gt,at)));const ft=qe&&qe.targetChanges.get(ee.targetId),ct=ee.view.applyChanges(at,B.isPrimaryClient,ft);return Wk(B,ee.targetId,ct.Xu),ct.snapshot}),function(B,ee,_e,qe){return F.apply(this,arguments)})(n,C,S,k);var F};const i=yield nT(n.localStore,e,!0),s=new zV(e,i._i),c=s.Wu(i.documents),h=Yb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,h);Wk(n,t,p.Xu);const y=new dW(e,t,s);return n.ia.set(e,y),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),p.snapshot}),Fk.apply(this,arguments)}function mW(n,e){return Lk.apply(this,arguments)}function Lk(){return Lk=(0,Te.Z)(function*(n,e){const t=ot(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(s=>!$b(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield x_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dw(t.remoteStore,r.targetId),L_(t,r.targetId)}).catch(Bp))):(L_(t,r.targetId),yield x_(t.localStore,r.targetId,!0))}),Lk.apply(this,arguments)}function Vk(){return Vk=(0,Te.Z)(function*(n,e,t){const r=iR(n);try{const i=yield function(s,c){const h=ot(s),p=Qr.now(),y=c.reduce((S,k)=>S.add(k.key),$n());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,y).next(k=>{C=k;const F=[];for(const B of c){const ee=E$(B,C.get(B.key));null!=ee&&F.push(new xp(B.key,ee,XF(ee.value.mapValue),di.exists(!0)))}return h.Bs.addMutationBatch(S,p,F,c)})).then(S=>(S.applyToLocalDocumentSet(C),{batchId:S.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let p=s.ha[s.currentUser.toKey()];p||(p=new Jr(Jt)),p=p.insert(c,h),s.ha[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Bu(r,i.changes),yield R_(r.remoteStore)}catch(i){const s=N_(i,"Failed to persist write");t.reject(s)}}),Vk.apply(this,arguments)}function WV(n,e){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,Te.Z)(function*(n,e){const t=ot(n);try{const r=yield Mz(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.aa.get(s);c&&(Ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Ht(c.na):i.removedDocuments.size>0&&(Ht(c.na),c.na=!1))}),yield Bu(t,r,e)}catch(r){yield Bp(r)}}),Bk.apply(this,arguments)}function qV(n,e,t){const r=ot(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((s,c)=>{const h=c.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=ot(s);h.onlineState=c;let p=!1;h.queries.forEach((y,C)=>{for(const S of C.listeners)S.Pu(c)&&(p=!0)}),p&&Rk(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _W(n,e,t){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,Te.Z)(function*(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),s=i&&i.key;if(s){let c=new Jr(rt.comparator);c=c.insert(s,br.newNoDocument(s,Vt.min()));const h=$n().add(s),p=new Kb(Vt.min(),new Map,new fr(Jt),c,h);yield WV(r,p),r.ua=r.ua.remove(s),r.aa.delete(e),qk(r)}else yield x_(r.localStore,e,!1).then(()=>L_(r,e,t)).catch(Bp)}),Uk.apply(this,arguments)}function yW(n,e){return jk.apply(this,arguments)}function jk(){return jk=(0,Te.Z)(function*(n,e){const t=ot(n),r=e.batch.batchId;try{const i=yield Az(t.localStore,e);zk(t,r,null),$k(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bu(t,i)}catch(i){yield Bp(i)}}),jk.apply(this,arguments)}function vW(n,e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,Te.Z)(function*(n,e,t){const r=ot(n);try{const i=yield function(s,c){const h=ot(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.Bs.lookupMutationBatch(p,c).next(C=>(Ht(null!==C),y=C.keys(),h.Bs.removeMutationBatch(p,C))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,y))})}(r.localStore,e);zk(r,e,t),$k(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(r,i)}catch(i){yield Bp(i)}}),Hk.apply(this,arguments)}function Gk(){return Gk=(0,Te.Z)(function*(n,e){const t=ot(n);fh(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=ot(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=N_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Gk.apply(this,arguments)}function $k(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function zk(n,e,t){const r=ot(n);let i=r.ha[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function L_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||ZV(n,r)})}function ZV(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(dw(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),qk(n))}function Wk(n,e,t){for(const r of t)r instanceof GV?(n.ca.addReference(r.key,e),wW(n,r)):r instanceof $V?(Ge("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||ZV(n,r.key)):mt()}function wW(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ge("SyncEngine","New document in limbo: "+t),n.oa.add(r),qk(n))}function qk(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new rt(In.fromString(e)),r=n.fa.next();n.aa.set(r,new hW(t)),n.ua=n.ua.insert(t,r),oT(n.remoteStore,new uh(ka(b_(t.path)),r,2,jo.A))}}function Bu(n,e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,Te.Z)(function*(n,e,t){const r=ot(n),i=[],s=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,p)=>{c.push(r._a(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=Jx.Ys(p.targetId,y);s.push(C)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,Te.Z)(function*(p,y){const C=ot(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(y,k=>me.forEach(k.Hs,F=>C.persistence.referenceDelegate.addReference(S,k.targetId,F)).next(()=>me.forEach(k.Js,F=>C.persistence.referenceDelegate.removeReference(S,k.targetId,F)))))}catch(S){if(!kp(S))throw S;Ge("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const k=S.targetId;if(!S.fromCache){const F=C.ui.get(k),ee=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);C.ui=C.ui.insert(k,ee)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),Zk.apply(this,arguments)}function EW(n,e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,Te.Z)(function*(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield EV(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(h=>{h.reject(new Pe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bu(t,r.di)}var i}),Kk.apply(this,arguments)}function CW(n,e){const t=ot(n),r=t.aa.get(e);if(r&&r.na)return $n().add(r.key);{let i=$n();const s=t.ra.get(e);if(!s)return i;for(const c of s){const h=t.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function IW(n,e){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,Te.Z)(function*(n,e){const t=ot(n),r=yield nT(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&Wk(t,e.targetId,i.Xu),i}),Yk.apply(this,arguments)}function TW(n,e){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,Te.Z)(function*(n,e){const t=ot(n);return SV(t.localStore,e).then(r=>Bu(t,r))}),Qk.apply(this,arguments)}function SW(n,e,t,r){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,Te.Z)(function*(n,e,t,r){const i=ot(n),s=yield function(c,h){const p=ot(c),y=ot(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.fn(C,h).next(S=>S?p.fi.Ks(C,S):me.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield R_(i.remoteStore):"acknowledged"===t||"rejected"===t?(zk(i,e,r||null),$k(i,e),h=e,ot(ot(i.localStore).Bs)._n(h)):mt(),yield Bu(i,s)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),Jk.apply(this,arguments)}function Xk(){return Xk=(0,Te.Z)(function*(n,e){const t=ot(n);if(rR(t),iR(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield KV(t,r.toArray());t.da=!0,yield Tk(t.remoteStore,!0);for(const s of i)oT(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(L_(t,c),x_(t.localStore,c,!0))),dw(t.remoteStore,c)}),yield i,yield KV(t,r),function(s){const c=ot(s);c.aa.forEach((h,p)=>{dw(c.remoteStore,p)}),c.ca.Si(),c.aa=new Map,c.ua=new Jr(rt.comparator)}(t),t.da=!1,yield Tk(t.remoteStore,!1)}}),Xk.apply(this,arguments)}function KV(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,Te.Z)(function*(n,e,t){const r=ot(n),i=[],s=[];for(const c of e){let h;const p=r.ra.get(c);if(p&&0!==p.length){h=yield M_(r.localStore,ka(p[0]));for(const y of p){const C=r.ia.get(y),S=yield IW(r,C);S.snapshot&&s.push(S.snapshot)}}else{const y=yield TV(r.localStore,c);h=yield M_(r.localStore,y),yield Pk(r,YV(y),c,!1)}i.push(h)}return r.sa.zo(s),i}),eR.apply(this,arguments)}function YV(n){return cL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AW(n){const e=ot(n);return ot(ot(e.localStore).persistence).Fs()}function MW(n,e,t,r){return tR.apply(this,arguments)}function tR(){return tR=(0,Te.Z)(function*(n,e,t,r){const i=ot(n);if(i.da)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield SV(i.localStore,hL(s[0])),h=Kb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Bu(i,c,h);break}case"rejected":yield x_(i.localStore,e,!0),L_(i,e,r);break;default:mt()}}),tR.apply(this,arguments)}function xW(n,e,t){return nR.apply(this,arguments)}function nR(){return nR=(0,Te.Z)(function*(n,e,t){const r=rR(n);if(r.da){for(const i of e){if(r.ra.has(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const s=yield TV(r.localStore,i),c=yield M_(r.localStore,s);yield Pk(r,YV(s),c.targetId,!1),oT(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield x_(r.localStore,i,!1).then(()=>{dw(r.remoteStore,i),L_(r,i)}).catch(Bp))}}),nR.apply(this,arguments)}function rR(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_W.bind(null,e),e.sa.zo=aW.bind(null,e.eventManager),e.sa.wa=lW.bind(null,e.eventManager),e}function iR(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vW.bind(null,e),e}class QV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.M=cw(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return wV(this.persistence,new bV,e.initialUser,this.M)}ya(e){return new Bz(ik.Yi,this.M)}ga(e){return new xV}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class JV extends QV{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield iR(r.Ta.syncEngine),yield R_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return wV(this.persistence,new bV,e.initialUser,this.M)}pa(e){return new bz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Qx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?po.withCacheSize(this.cacheSizeBytes):po.DEFAULT;return new Yx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RV(),sT(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new xV}}class RW extends JV{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof lk&&(r.sharedClientState.syncEngine={$r:SW.bind(null,i),Br:MW.bind(null,i),Lr:xW.bind(null,i),Fs:AW.bind(null,i),Fr:TW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var s=(0,Te.Z)(function*(c){yield function(n,e){return Xk.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}ga(e){const t=RV();if(!lk.vt(t))throw new Pe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Qx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lk(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sR{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=EW.bind(null,r.syncEngine),yield Tk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new oW}createDatastore(e){const t=cw(e.databaseInfo.databaseId),r=new $z(e.databaseInfo);return new qz(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>qV(this.syncEngine,h,0),c=kV.vt()?new kV:new jz,new Kz(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,p,y){const C=new fW(r,i,s,c,h,p);return y&&(C.da=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=ot(t);Ge("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield k_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function XV(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class lT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OW{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Li,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const s=yield e.Sa(i);return new cW(JSON.parse(s),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Te.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class NW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(s,c){const h=ot(s),p=Xb(h.M)+"/documents",y={documents:c.map(F=>Jb(h.M,F))},C=yield h._o("BatchGetDocuments",p,y),S=new Map;C.forEach(F=>{const B=function(n,e){return"found"in e?function(t,r){Ht(!!r.found);const i=Dc(t,r.found.name),s=Vi(r.found.updateTime),c=new Is({mapValue:{fields:r.found.fields}});return br.newFoundDocument(i,s,c)}(n,e):"missing"in e?function(t,r){Ht(!!r.missing),Ht(!!r.readTime);const i=Dc(t,r.missing),s=Vi(r.readTime);return br.newNoDocument(i,s)}(n,e):mt()}(h.M,F);S.set(B.key.toString(),B)});const k=[];return c.forEach(F=>{const B=S.get(F.toString());Ht(!!B),k.push(B)}),k}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=rt.fromPath(i);e.mutations.push(new Nx(s,e.precondition(s)))}),yield(r=(0,Te.Z)(function*(i,s){const c=ot(i),h=Xb(c.M)+"/documents",p={writes:s.map(y=>ew(c.M,y))};yield c.co("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?di.updateTime(t):di.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new Pe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return di.updateTime(t)}return di.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PW{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.xa=r.maxAttempts,this.No=new ck(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Te.Z)(function*(){const t=new NW(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ma(s)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Lb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!DL(t)}return!1}}class FW{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=is.UNAUTHENTICATED,this.clientId=jF.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(h){Ge("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ge("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=N_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function eB(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(s){r.isEqual(s)||(yield EV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),oR.apply(this,arguments)}function tB(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lR(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>BV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>BV(e.remoteStore,s)),n.onlineComponents=e}),aR.apply(this,arguments)}function lR(n){return cR.apply(this,arguments)}function cR(){return cR=(0,Te.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield eB(n,new QV)),n.offlineComponents}),cR.apply(this,arguments)}function cT(n){return uR.apply(this,arguments)}function uR(){return uR=(0,Te.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield tB(n,new sR)),n.onlineComponents}),uR.apply(this,arguments)}function nB(n){return lR(n).then(e=>e.persistence)}function dR(n){return lR(n).then(e=>e.localStore)}function rB(n){return cT(n).then(e=>e.remoteStore)}function hR(n){return cT(n).then(e=>e.syncEngine)}function V_(n){return fR.apply(this,arguments)}function fR(){return fR=(0,Te.Z)(function*(n){const e=yield cT(n),t=e.eventManager;return t.onListen=pW.bind(null,e.syncEngine),t.onUnlisten=mW.bind(null,e.syncEngine),t}),fR.apply(this,arguments)}function iB(n,e,t={}){const r=new Li;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,c,h,p){const y=new lT({next:S=>{s.enqueueAndForget(()=>xk(i,C));const k=S.docs.has(c);!k&&S.fromCache?p.reject(new Pe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&h&&"server"===h.source?p.reject(new Pe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),C=new Ok(b_(c.path),y,{includeMetadataChanges:!0,ku:!0});return Ak(i,C)}(yield V_(n),n.asyncQueue,e,t,r)})),r.promise}function sB(n,e,t={}){const r=new Li;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,c,h,p){const y=new lT({next:S=>{s.enqueueAndForget(()=>xk(i,C)),S.fromCache&&"server"===h.source?p.reject(new Pe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),C=new Ok(c,y,{includeMetadataChanges:!0,ku:!0});return Ak(i,C)}(yield V_(n),n.asyncQueue,e,t,r)})),r.promise}const oB=new Map;function pR(n,e,t){if(!t)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aB(n,e,t,r){if(!0===e&&!0===r)throw new Pe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lB(n){if(!rt.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cB(n){if(rt.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":mt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uT(n);throw new Pe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uB(n,e){if(e<=0)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class dB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,aB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dB({}),this._settingsFrozen=!1,e instanceof Lu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zG;switch(t.type){case"gapi":const r=t.client;return Ht(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new KG(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oB.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),oB.delete(e),t.terminate())}(this),Promise.resolve()}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class Ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Mc extends Ts{constructor(e,t,r){super(e,t,b_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new rt(e))}withConverter(e){return new Mc(this.firestore,e,this._path)}}function hB(n,e,...t){if(n=(0,L.m9)(n),pR("collection","path",e),n instanceof hw){const r=In.fromString(e,...t);return cB(r),new Mc(n,null,r)}{if(!(n instanceof wr||n instanceof Mc))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return cB(r),new Mc(n.firestore,null,r)}}function dT(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=jF.R()),pR("doc","path",e),n instanceof hw){const r=In.fromString(e,...t);return lB(r),new wr(n,null,new rt(r))}{if(!(n instanceof wr||n instanceof Mc))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return lB(r),new wr(n.firestore,n instanceof Mc?n.converter:null,new rt(r))}}function fB(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof wr||n instanceof Mc)&&(e instanceof wr||e instanceof Mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function pB(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Ts&&e instanceof Ts&&n.firestore===e.firestore&&$b(n._query,e._query)&&n.converter===e.converter}class qW{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new ck(this,"async_queue_retry"),this.Qa=()=>{const t=sT();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=sT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=sT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Li;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Te.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!kp(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,ui("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=Dk.createAndSchedule(this,e,t,r,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&mt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function mR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ZW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Li,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mr extends hw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new qW,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||mB(this),this._firestoreClient.terminate()}}function fi(n){return n._firestoreClient||mB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mB(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new t$(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new FW(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gB(n,e,t){const r=new Li;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield eB(n,t),yield tB(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function _B(n){if(n._initialized||n._terminated)throw new Pe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xc(Ii.fromBase64String(e))}catch(t){throw new Pe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xc(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jp{constructor(e){this._methodName=e}}class hT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const iq=/^__.*__$/;class sq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wb(e,this.data,t,this.fieldTransforms)}}class yB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class fT{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new fT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return gT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(vB(this.ec)&&iq.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class oq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||cw(e)}lc(e,t,r,i=!1){return new fT({ec:e,methodName:t,hc:r,path:Ci.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Hp(n){const e=n._freezeSettings(),t=cw(n._databaseId);return new oq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pT(n,e,t,r,i,s={}){const c=n.lc(s.merge||s.mergeFields?2:0,e,t,i);vR("Data must be an object, but it was:",c,r);const h=EB(r,c);let p,y;if(s.merge)p=new g_(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const C=[];for(const S of s.mergeFields){const k=bR(e,S,t);if(!c.contains(k))throw new Pe(pe.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);IB(C,k)||C.push(k)}p=new g_(C),y=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,y=c.fieldTransforms;return new sq(new Is(h),p,y)}class fw extends jp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function bB(n,e,t){return new fT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class gR extends jp{_toFieldTransform(e){return new zb(e.path,new E_)}isEqual(e){return e instanceof gR}}class aq extends jp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=bB(this,e,!0),r=this.fc.map(s=>Gp(s,t)),i=new Ap(r);return new zb(e.path,i)}isEqual(e){return this===e}}class lq extends jp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=bB(this,e,!0),r=this.fc.map(s=>Gp(s,t)),i=new Mp(r);return new zb(e.path,i)}isEqual(e){return this===e}}class cq extends jp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new C_(e.M,gL(e.M,this.dc));return new zb(e.path,t)}isEqual(e){return this===e}}function _R(n,e,t,r){const i=n.lc(1,e,t);vR("Data must be an object, but it was:",i,r);const s=[],c=Is.empty();Ep(r,(p,y)=>{const C=mT(e,p,t);y=(0,L.m9)(y);const S=i.oc(C);if(y instanceof fw)s.push(C);else{const k=Gp(y,S);null!=k&&(s.push(C),c.set(C,k))}});const h=new g_(s);return new yB(c,h,i.fieldTransforms)}function yR(n,e,t,r,i,s){const c=n.lc(1,e,t),h=[bR(e,r,t)],p=[i];if(s.length%2!=0)throw new Pe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<s.length;k+=2)h.push(bR(e,s[k])),p.push(s[k+1]);const y=[],C=Is.empty();for(let k=h.length-1;k>=0;--k)if(!IB(y,h[k])){const F=h[k];let B=p[k];B=(0,L.m9)(B);const ee=c.oc(F);if(B instanceof fw)y.push(F);else{const _e=Gp(B,ee);null!=_e&&(y.push(F),C.set(F,_e))}}const S=new g_(y);return new yB(C,S,c.fieldTransforms)}function wB(n,e,t,r=!1){return Gp(t,n.lc(r?4:3,e))}function Gp(n,e){if(CB(n=(0,L.m9)(n)))return vR("Unsupported field value:",e,n),EB(n,e);if(n instanceof jp)return function(t,r){if(!vB(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=Gp(c,r.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gL(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qr.fromDate(t);return{timestampValue:Qb(r.M,i)}}if(t instanceof Qr){const i=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qb(r.M,i)}}if(t instanceof hT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xc)return{bytesValue:NL(r.M,t._byteString)};if(t instanceof wr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${uT(t)}`)}(n,e)}function EB(n,e){const t={};return $F(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ep(n,(r,i)=>{const s=Gp(i,e.sc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function CB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qr||n instanceof hT||n instanceof xc||n instanceof wr||n instanceof jp)}function vR(n,e,t){if(!CB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=uT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function bR(n,e,t){if((e=(0,L.m9)(e))instanceof Uu)return e._internalPath;if("string"==typeof e)return mT(n,e);throw gT("Field path arguments must be of type string or ",n,!1,void 0,t)}const uq=new RegExp("[~\\*/\\[\\]]");function mT(n,e,t){if(e.search(uq)>=0)throw gT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uu(...e.split("."))._internalPath}catch(r){throw gT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gT(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Pe(pe.INVALID_ARGUMENT,h+n+p)}function IB(n,e){return n.some(t=>t.isEqual(e))}class pw{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_T("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dq extends pw{data(){return super.data()}}function _T(n,e){return"string"==typeof e?mT(n,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}class $p{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ju extends pw{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_T("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mw extends ju{data(e={}){return super.data(e)}}class mh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $p(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new mw(this._firestore,this._userDataWriter,r.key,r,new $p(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new mw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $p(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new mw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $p(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:hq(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function TB(n,e){return n instanceof ju&&e instanceof ju?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mh&&e instanceof mh&&n._firestore===e._firestore&&pB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function SB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gw{}function gh(n,...e){for(const t of e)n=t._apply(n);return n}class fq extends gw{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Hp(e.firestore),r=function(i,s,c,h,p,y,C){let S;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){RB(C,y);const F=[];for(const B of C)F.push(kB(h,i,B));S={arrayValue:{values:F}}}else S=kB(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||RB(C,y),S=wB(c,"where",C,"in"===y||"not-in"===y);const k=os.create(p,y,S);return function(F,B){if(B.S()){const _e=Mx(F);if(null!==_e&&!_e.isEqual(B.field))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_e.toString()}' and '${B.field.toString()}'`);const qe=Ax(F);null!==qe&&OB(0,B.field,qe)}const ee=function(_e,qe){for(const at of _e.filters)if(qe.indexOf(at.op)>=0)return at.op;return null}(F,function(_e){switch(_e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==ee)throw new Pe(pe.INVALID_ARGUMENT,ee===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Ts(e.firestore,e.converter,function(i,s){const c=i.filters.concat([s]);return new Vu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class mq extends gw{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new v_(i,s);return function(h,p){if(null===Ax(h)){const y=Mx(h);null!==y&&OB(0,y,p.field)}}(r,c),c}(e._query,this._c,this.gc);return new Ts(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Vu(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DB extends gw{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Ts(e.firestore,e.converter,uL(e._query,this.yc,this.Ic))}}class AB extends gw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=xB(e,this.type,this.Tc,this.Ec);return new Ts(e.firestore,e.converter,(i=t,new Vu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class MB extends gw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=xB(e,this.type,this.Tc,this.Ec);return new Ts(e.firestore,e.converter,(i=t,new Vu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function xB(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof pw)return function(i,s,c,h,p){if(!h)throw new Pe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const C of w_(i))if(C.field.isKeyField())y.push(Tp(s,h.key));else{const S=h.data.field(C.field);if(Ix(S))throw new Pe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=C.field.canonicalString();throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(S)}return new lh(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hp(n.firestore);return function(s,c,h,p,y,C){const S=s.explicitOrderBy;if(y.length>S.length)throw new Pe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let F=0;F<y.length;F++){const B=y[F];if(S[F].field.isKeyField()){if("string"!=typeof B)throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!xx(s)&&-1!==B.indexOf("/"))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const ee=s.path.child(In.fromString(B));if(!rt.isDocumentKey(ee))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const _e=new rt(ee);k.push(Tp(c,_e))}else{const ee=wB(h,p,B);k.push(ee)}}return new lh(k,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kB(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xx(e)&&-1!==t.indexOf("/"))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!rt.isDocumentKey(r))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tp(n,new rt(r))}if(t instanceof wr)return Tp(n,t._key);throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uT(t)}.`)}function RB(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function OB(n,e,t){if(!t.isEqual(e))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Cq={maxAttempts:5};class wR{convertValue(e,t="none"){switch(Ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){const r={};return Ep(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new hT(jr(e.latitude),jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fb(e));default:return null}}convertTimestamp(e){const t=sh(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);Ht($L(r));const i=new Lu(r.get(1),r.get(3)),s=new rt(r.popFirst(5));return i.isEqual(t)||ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function yT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Iq extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class NB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hp(e)}set(e,t,r){this._verifyNotCommitted();const i=_h(e,this._firestore),s=yT(i.converter,t,r),c=pT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,di.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=_h(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof Uu?yR(this._dataReader,"WriteBatch.update",s._key,t,r,i):_R(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,di.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_h(e,this._firestore);return this._mutations=this._mutations.concat(new qb(t._key,di.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Pe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zp extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function PB(n,e,t){n=gn(n,wr);const r=gn(n.firestore,Mr),i=yT(n.converter,e,t);return B_(r,[pT(Hp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,di.none())])}function FB(n,e,t,...r){n=gn(n,wr);const i=gn(n.firestore,Mr),s=Hp(i);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof Uu?yR(s,"updateDoc",n._key,e,t,r):_R(s,"updateDoc",n._key,e),B_(i,[c.toMutation(n._key,di.exists(!0))])}function LB(n,...e){var t,r,i;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||mR(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(mR(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let p,y,C;if(n instanceof wr)y=gn(n.firestore,Mr),C=b_(n._key.path),p={next:S=>{e[c]&&e[c](ER(y,n,S))},error:e[c+1],complete:e[c+2]};else{const S=gn(n,Ts);y=gn(S.firestore,Mr),C=S._query;const k=new zp(y);p={next:F=>{e[c]&&e[c](new mh(y,k,S,F))},error:e[c+1],complete:e[c+2]},SB(n._query)}return function(S,k,F,B){const ee=new lT(B),_e=new Ok(k,ee,F);return S.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return Ak(yield V_(S),_e)})),()=>{ee.Aa(),S.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return xk(yield V_(S),_e)}))}}(fi(y),C,h,p)}function B_(n,e){return function(t,r){const i=new Li;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(n,e,t){return Vk.apply(this,arguments)}(yield hR(t),r,i)})),i.promise}(fi(n),e)}function ER(n,e,t){const r=t.docs.get(e._key),i=new zp(n);return new ju(n,i,e._key,r,new $p(t.hasPendingWrites,t.fromCache),e.converter)}class Nq extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hp(e)}get(e){const t=_h(e,this._firestore),r=new Iq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return mt();const s=i[0];if(s.isFoundDocument())return new pw(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new pw(this._firestore,r,t._key,null,t.converter);throw mt()})}set(e,t,r){const i=_h(e,this._firestore),s=yT(i.converter,t,r),c=pT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=_h(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof Uu?yR(this._dataReader,"Transaction.update",s._key,t,r,i):_R(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=_h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_h(e,this._firestore),r=new zp(this._firestore);return super.get(e).then(i=>new ju(this._firestore,r,t._key,i._document,new $p(!1,!1),t.converter))}}function CR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BB(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function UB(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){p_=Vo.SDK_VERSION,(0,Vo._registerComponent)(new fl.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Mr(i,new qG(t.getProvider("auth-internal")),new YG(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Vo.registerVersion)(VF,"3.4.9",n),(0,Vo.registerVersion)(VF,"3.4.9","esm2017")}();class _w{constructor(e){this._delegate=e}static fromBase64String(e){return UB(),new _w(xc.fromBase64String(e))}static fromUint8Array(e){return BB(),new _w(xc.fromUint8Array(e))}toBase64(){return UB(),this._delegate.toBase64()}toUint8Array(){return BB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IR(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class $q{enableIndexedDbPersistence(e,t){return function(n,e){_B(n=gn(n,Mr));const t=fi(n),r=n._freezeSettings(),i=new sR;return gB(t,i,new JV(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){_B(n=gn(n,Mr));const e=fi(n),t=n._freezeSettings(),r=new sR;return gB(e,r,new RW(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Li;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!gl.vt())return Promise.resolve();const i=r+"main";yield gl.delete(i)}),function(r){return t.apply(this,arguments)})(Qx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const s=(n=gn(n,hw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Nb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=is.MOCK_USER;else{c=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Pe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new is(p)}n._authCredentials=new WG(new BF(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield nB(n),t=yield rB(n);return e.setNetworkEnabled(!0),function(r){const i=ot(r);return i.wu.delete(0),uw(i)}(t)}))}(fi(n=gn(n,Mr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield nB(n),t=yield rB(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const s=ot(i);s.wu.add(0),yield k_(s),s.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(fi(n=gn(n,Mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Li;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(n,e){return Gk.apply(this,arguments)}(yield hR(e),t)})),t.promise}(fi(n=gn(n,Mr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new lT(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield V_(n),i=t,ot(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield V_(n),i=t,void ot(r).bu.delete(i);var r,i}))}}(fi(n=gn(n,Mr)),mR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new U_(this,hB(this._delegate,e))}catch(t){throw Hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,dT(this._delegate,e))}catch(t){throw Hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gs(this,function(n,e){if(n=gn(n,hw),pR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ts(n,null,(t=e,new Vu(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=gn(n,Mr);const r=Object.assign(Object.assign({},Cq),t);return function(i){if(i.maxAttempts<1)throw new Pe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new Li;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(s=n,cT(s).then(c=>c.datastore));var s;new PW(n.asyncQueue,i,t,e,r).run()})),r.promise}(fi(n),i=>e(new Nq(n,i)),r)}(this._delegate,t=>e(new HB(this,t)))}batch(){return fi(this._delegate),new GB(new NB(this._delegate,e=>B_(this._delegate,e)))}loadBundle(e){return function(n,e){const t=fi(n=gn(n,Mr)),r=new ZW;return function(n,e,t,r){const i=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return XV(p,y);if(p instanceof ArrayBuffer)return XV(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new OW(p,c);var p}(t,cw(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function(n,e,t){const r=ot(n);var i;(i=(0,Te.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(k,F){const B=ot(k),ee=Vi(F.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",_e=>B._s.getBundleMetadata(_e,F.id)).then(_e=>!!_e&&_e.createTime.compareTo(ee)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=p).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(HV(p));const y=new uW(p,s.localStore,c.M);let C=yield c.ma();for(;C;){const k=yield y.Fu(C);k&&h._updateProgress(k),C=yield c.ma()}const S=yield y.complete();return yield Bu(s,S.Lu,void 0),yield function(k,F){const B=ot(k);return B.persistence.runTransaction("Save bundle","readwrite",ee=>B._s.saveBundleMetadata(ee,F))}(s.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(p){return Nb("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var k}),function(s,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield hR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=ot(t);return i.persistence.runTransaction("Get named query","readonly",s=>i._s.getNamedQuery(s,r))}(yield dR(n),e)}))}(fi(n=gn(n,Mr)),e).then(t=>t?new Ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Gs(this,t):null)}}class vT extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _w(new xc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class HB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vT(e)}get(e){const t=qp(e);return this._delegate.get(t).then(r=>new yw(this._firestore,new ju(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=qp(e);return r?(CR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=qp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=qp(e);return this._delegate.delete(t),this}}class GB{constructor(e){this._delegate=e}set(e,t,r){const i=qp(e);return r?(CR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=qp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=qp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new mw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Wp(e,new vT(e),t),i.set(t,s)),s}}Wp.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new wr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new Oa(t,new wr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new U_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new U_(this.firestore,hB(this._delegate,e))}catch(t){throw Hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof wr&&fB(this._delegate,e)}set(e,t){t=CR("DocumentReference.set",t);try{return t?PB(this._delegate,e,t):PB(this._delegate,e)}catch(r){throw Hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?FB(this._delegate,e):FB(this._delegate,e,t,...r)}catch(i){throw Hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return B_(gn(n.firestore,Mr),[new qb(n._key,di.none())])}(this._delegate)}onSnapshot(...e){const t=$B(e),r=zB(e,i=>new yw(this.firestore,new ju(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LB(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,wr);const e=gn(n.firestore,Mr),t=fi(e),r=new zp(e);return function(n,e){const t=new Li;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,c){try{const h=yield function(p,y){const C=ot(p);return C.persistence.runTransaction("read document","readonly",S=>C.fi.Ls(S,y))}(i,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Pe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=N_(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield dR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ju(e,r,n._key,i,new $p(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,wr);const e=gn(n.firestore,Mr);return iB(fi(e),n._key,{source:"server"}).then(t=>ER(e,n,t))}(this._delegate):function(n){n=gn(n,wr);const e=gn(n.firestore,Mr);return iB(fi(e),n._key).then(t=>ER(e,n,t))}(this._delegate),t.then(r=>new yw(this.firestore,new ju(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function Hs(n,e,t){return n.message=n.message.replace(e,t),n}function $B(n){for(const e of n)if("object"==typeof e&&!IR(e))return e;return{}}function zB(n,e){var t,r;let i;return i=IR(n[0])?n[0]:IR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return TB(this._delegate,e._delegate)}}class vw extends yw{data(e){const t=this._delegate.data(e);return function(n,e){n||mt()}(void 0!==t),t}}class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vT(e)}where(e,t,r){try{return new Gs(this.firestore,gh(this._delegate,function(n,e,t){const r=e,i=_T("where",n);return new fq(i,r,t)}(e,t,r)))}catch(i){throw Hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gs(this.firestore,gh(this._delegate,function(n,e="asc"){const t=e,r=_T("orderBy",n);return new mq(r,t)}(e,t)))}catch(r){throw Hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gs(this.firestore,gh(this._delegate,function(n){return uB("limit",n),new DB("limit",n,"F")}(e)))}catch(t){throw Hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gs(this.firestore,gh(this._delegate,function(n){return uB("limitToLast",n),new DB("limitToLast",n,"L")}(e)))}catch(t){throw Hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gs(this.firestore,gh(this._delegate,function(...n){return new AB("startAt",n,!0)}(...e)))}catch(t){throw Hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gs(this.firestore,gh(this._delegate,function(...n){return new AB("startAfter",n,!1)}(...e)))}catch(t){throw Hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gs(this.firestore,gh(this._delegate,function(...n){return new MB("endBefore",n,!1)}(...e)))}catch(t){throw Hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gs(this.firestore,gh(this._delegate,function(...n){return new MB("endAt",n,!0)}(...e)))}catch(t){throw Hs(t,"endAt()","Query.endAt()")}}isEqual(e){return pB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,Ts);const e=gn(n.firestore,Mr),t=fi(e),r=new zp(e);return function(n,e){const t=new Li;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,c){try{const h=yield nT(i,s,!0),p=new zV(s,h._i),y=p.Wu(h.documents),C=p.applyChanges(y,!1);c.resolve(C.snapshot)}catch(h){const p=N_(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield dR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,Ts);const e=gn(n.firestore,Mr),t=fi(e),r=new zp(e);return sB(t,n._query,{source:"server"}).then(i=>new mh(e,r,n,i))}(this._delegate):function(n){n=gn(n,Ts);const e=gn(n.firestore,Mr),t=fi(e),r=new zp(e);return SB(n._query),sB(t,n._query).then(i=>new mh(e,r,n,i))}(this._delegate),t.then(r=>new TR(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$B(e),r=zB(e,i=>new TR(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LB(this._delegate,t,r)}withConverter(e){return new Gs(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}class Wq{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Wq(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vw(this._firestore,r))})}isEqual(e){return TB(this._delegate,e._delegate)}}class U_ extends Gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?dT(this._delegate):dT(this._delegate,e))}catch(t){throw Hs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=gn(n.firestore,Mr),r=dT(n),i=yT(n.converter,e);return B_(t,[pT(Hp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,di.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return fB(this._delegate,e._delegate)}withConverter(e){return new U_(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function qp(n){return gn(n,wr)}class SR{constructor(...e){this._delegate=new Uu(...e)}static documentId(){return new SR(Ci.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Uu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zp{constructor(e){this._delegate=e}static serverTimestamp(){const e=new gR("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Zp(e)}static delete(){const e=new fw("deleteField");return e._methodName="FieldValue.delete",new Zp(e)}static arrayUnion(...e){const t=function(...n){return new aq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zp(t)}static arrayRemove(...e){const t=function(...n){return new lq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zp(t)}static increment(e){const t=function(n){return new cq("increment",n)}(e);return t._methodName="FieldValue.increment",new Zp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qq={Firestore:jB,GeoPoint:hT,Timestamp:Qr,Blob:_w,Transaction:HB,WriteBatch:GB,DocumentReference:Oa,DocumentSnapshot:yw,Query:Gs,QueryDocumentSnapshot:vw,QuerySnapshot:TR,CollectionReference:U_,FieldPath:SR,FieldValue:Zp,setLogLevel:function(n){!function(n){ih.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new fl.wA("firestore-compat",t=>((e,t)=>new jB(e,t,new $q))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},qq)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(zv.Z);var bT=P(4763),Yq=P(1733);class Qq extends vt.x{constructor(e=1/0,t=1/0,r=Yq.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;t||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var DR=P(3174);function WB(n,e,t){var r,i;let s,c=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,DR.B)({connector:()=>new Qq(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function qB(n,e){return(0,xi.m)(e)?$t(()=>n,e):$t(()=>n)}var AR=P(5222);const ZB=new Map,Jq={activated:!1,tokenObservers:[]},Xq={initialized:!1,enabled:!1};function ji(n){return ZB.get(n)||Jq}function _l(n,e){ZB.set(n,e)}function wT(){return Xq}class i6{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $s=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function YB(n){if(!ji(n).activated)throw $s.create("use-before-activation",{appName:n.name})}function kR(n,e){return RR.apply(this,arguments)}function RR(){return RR=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const s={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,s)}catch(S){throw $s.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw $s.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw $s.create("fetch-parse-error",{originalErrorMessage:S.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw $s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),RR.apply(this,arguments)}function u6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const bw="firebase-app-check-store";let IT=null;function JB(){return IT||(IT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($s.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(bw,{keyPath:"compositeKey"})}}catch(t){e($s.create("storage-open",{originalErrorMessage:t.message}))}}),IT)}function OR(){return OR=(0,Te.Z)(function*(n,e){const r=(yield JB()).transaction(bw,"readwrite"),s=r.objectStore(bw).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var y;h($s.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),OR.apply(this,arguments)}const ww=new Bo.Yd("@firebase/app-check");function nU(n,e){return(0,L.hl)()?function(n,e){return function(n,e){return OR.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ww.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rU(){return wT().enabled}function iU(){return LR.apply(this,arguments)}function LR(){return LR=(0,Te.Z)(function*(){const n=wT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),LR.apply(this,arguments)}const b6={error:"UNKNOWN_ERROR"};function w6(n){return L.US.encodeString(JSON.stringify(n),!1)}function TT(n){return VR.apply(this,arguments)}function VR(){return VR=(0,Te.Z)(function*(n,e=!1){const t=n.app;YB(t);const r=ji(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&ST(p)&&(i=p)}if(!e&&i&&ST(i))return{token:i.token};let h,c=!1;if(rU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=kR(u6(t,yield iU()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const p=yield r.exchangeTokenPromise;return yield nU(t,p),_l(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),c=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?ww.warn(p.message):ww.error(p),s=p}return i?(h={token:i.token},_l(t,Object.assign(Object.assign({},r),{token:i})),yield nU(t,i)):h=C6(s),c&&oU(t,h),h}),VR.apply(this,arguments)}function UR(n,e){const t=ji(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),_l(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function sU(n){const{app:e}=n,t=ji(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new i6((0,Te.Z)(function*(){let r;if(r=ji(e).token?yield TT(n,!0):yield TT(n),r.error)throw r.error}),()=>!0,()=>{const t=ji(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),_l(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oU(n,e){const t=ji(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function ST(n){return n.expireTimeMillis-Date.now()>0}function C6(n){return{token:w6(b6),error:n}}class I6{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ji(this.app);for(const t of e)UR(this.app,t.next);return Promise.resolve()}}const pU="app-check-internal";(0,Vo._registerComponent)(new fl.wA("app-check",n=>function(n,e){return new I6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pU).initialize()})),(0,Vo._registerComponent)(new fl.wA(pU,n=>function(n){return{getToken:e=>TT(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,s=ji(i),c={next:t,error:r,type:e};if(_l(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&ST(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),sU(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>sU(n))}(n,"INTERNAL",e),removeTokenListener:e=>UR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vo.registerVersion)("@firebase/app-check","0.5.8");class AT{constructor(){return(0,Xn.vb)("app-check")}}"undefined"!=typeof window&&window;var G6=P(7892);const zR=new u.OlP("angularfire2.auth.use-emulator"),WR=new u.OlP("angularfire2.auth.settings"),qR=new u.OlP("angularfire2.auth.tenant-id"),ZR=new u.OlP("angularfire2.auth.langugage-code"),KR=new u.OlP("angularfire2.auth.use-device-language"),YR=new u.OlP("angularfire.auth.persistence"),QR=(n,e,t,r,i,s,c,h)=>(0,Ni.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),c)for(const[y,C]of Object.entries(c))p.settings[y]=C;return h&&p.setPersistence(h),p},[t,r,i,s,c,h]);let MT=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,k,F){const B=new vt.x,ee=et(void 0).pipe((0,bT.Q)(c.outsideAngular),$t(()=>s.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2115)))),(0,Je.U)(()=>(0,Ni.on)(t,s,r)),(0,Je.U)(_e=>QR(_e,s,h,y,C,S,p,k)),WB({bufferSize:1,refCount:!1}));if(vi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{ee.pipe(da()).subscribe();const qe=ee.pipe($t(ct=>ct.getRedirectResult().then(Gt=>Gt,()=>null)),Xn.iC,WB({bufferSize:1,refCount:!1})),at=ee.pipe($t(ct=>new Gn.y(Gt=>({unsubscribe:s.runOutsideAngular(()=>ct.onAuthStateChanged(Xt=>Gt.next(Xt),Xt=>Gt.error(Xt),()=>Gt.complete()))})))),ft=ee.pipe($t(ct=>new Gn.y(Gt=>({unsubscribe:s.runOutsideAngular(()=>ct.onIdTokenChanged(Xt=>Gt.next(Xt),Xt=>Gt.error(Xt),()=>Gt.complete()))}))));this.authState=qe.pipe(qB(at),(0,AR.R)(c.outsideAngular),(0,bT.Q)(c.insideAngular)),this.user=qe.pipe(qB(ft),(0,AR.R)(c.outsideAngular),(0,bT.Q)(c.insideAngular)),this.idToken=this.user.pipe($t(ct=>ct?(0,xn.D)(ct.getIdToken()):et(null))),this.idTokenResult=this.user.pipe($t(ct=>ct?(0,xn.D)(ct.getIdTokenResult()):et(null))),this.credential=(0,Bs.T)(qe,B,this.authState.pipe(cn(ct=>!ct))).pipe((0,Je.U)(ct=>(null==ct?void 0:ct.user)?ct:null),(0,AR.R)(c.outsideAngular),(0,bT.Q)(c.insideAngular))}return(0,Ni.pX)(this,ee,s,{spy:{apply:(_e,qe,at)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&at.then(ft=>B.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ni.Dh),u.LFG(Ni.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Xn.HU),u.LFG(zR,8),u.LFG(WR,8),u.LFG(qR,8),u.LFG(ZR,8),u.LFG(KR,8),u.LFG(YR,8),u.LFG(AT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function gU(n,e){return function(n,e=pc.z){return new Gn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function JR(n,e){return gU(n,e).pipe((0,Je.U)(t=>({payload:t,type:"query"})))}function xT(n,e){return JR(n,e).pipe(Dr(void 0),$v(),(0,Je.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(C=>C.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function _U(n,e,t){return xT(n,t).pipe(oi((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Xm(),(0,Je.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function yU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class vU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Je.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Dr(void 0),$v(),cn(([r,i])=>i.length>0||!r),(0,Je.U)(([r,i])=>i),Xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=yU(e);return _U(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return JR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Xn.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Xn.iC)}add(e){return this.ref.add(e)}doc(e){return new bU(this.ref.doc(e),this.afs)}}class bU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=wU(r,t);return new vU(i,s,this.afs)}snapshotChanges(){return function(n,e){return gU(n,e).pipe(Dr(void 0),$v(),(0,Je.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(Xn.iC)}}class K6{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),cn(t=>t.length>0),Xn.iC):xT(this.query,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=yU(e);return _U(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return JR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Xn.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Xn.iC)}}const Y6=new u.OlP("angularfire2.enableFirestorePersistence"),Q6=new u.OlP("angularfire2.firestore.persistenceSettings"),J6=new u.OlP("angularfire2.firestore.settings"),X6=new u.OlP("angularfire2.firestore.use-emulator");function wU(n,e=(t=>t)){return{query:e(n),ref:n}}let eO=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,k,F,B,ee,_e,qe,at){this.schedulers=p;const ft=(0,Ni.on)(t,h,r),ct=C;S&&QR(ft,h,k,B,ee,_e,F,qe),[this.firestore,this.persistenceEnabled$]=(0,Ni.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Gt=h.runOutsideAngular(()=>ft.firestore());if(s&&Gt.settings(s),ct&&Gt.useEmulator(...ct),i&&!vi(c)){const Xt=()=>{try{return(0,xn.D)(Gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Pn){return"undefined"!=typeof console&&console.warn(Pn),et(!1)}};return[Gt,h.runOutsideAngular(Xt)]}return[Gt,et(!1)]},[s,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=wU(i,r),h=this.schedulers.ngZone.run(()=>s);return new vU(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new K6(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new bU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ni.Dh),u.LFG(Ni.xv,8),u.LFG(Y6,8),u.LFG(J6,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Xn.HU),u.LFG(Q6,8),u.LFG(X6,8),u.LFG(MT,8),u.LFG(zR,8),u.LFG(WR,8),u.LFG(qR,8),u.LFG(ZR,8),u.LFG(KR,8),u.LFG(YR,8),u.LFG(AT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kT=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signWithRedirectPromise(){const t=new wc.Q;t.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,wc.n)();return r.languageCode="fr",Hv(r,t)}signWithPopupPromise(){const t=new wc.Q;t.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,wc.n)();return r.languageCode="fr",(0,wc.c)(r,t)}signInWithGoogle(){this.signWithPopupPromise().then(t=>{wc.Q.credentialFromResult(t),this.setUserData(t.user).then(()=>{this.router.navigate(["tracker"])}),this.router.navigate(["tracker"])}).catch(t=>{const r=t.code,i=t.message;wc.Q.credentialFromError(t),console.log("Code :"+r+"/ Message :"+i)})}setUserData(t){const r=this.afs.doc(`users/${t.uid}`);return this.userData={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},r.set(this.userData,{merge:!0})}setPersonData(t){this.afs.doc(`person/${t}`).set({uid:t},{merge:!0})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["tracker"])})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(eO),u.LFG(MT),u.LFG(Oi),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RT=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn||this.router.navigate(["authentication"]),!0}isUserLoggedIn(){return!!this.authService.isLoggedIn}disconnect(){this.authService.signOut().then(()=>{this.router.navigate(["authentication"])})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(kT),u.LFG(Oi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var EU=P(2869);const Ew={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Ew;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Zi.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Ew;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Ew;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var CU=P(8843);new class extends CU.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends EU.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ew.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(Ew.cancelAnimationFrame(t),e._scheduled=void 0)}});let tO,r8=1;const OT={};function IU(n){return n in OT&&(delete OT[n],!0)}const i8={setImmediate(n){const e=r8++;return OT[e]=!0,tO||(tO=Promise.resolve()),tO.then(()=>IU(e)&&n()),e},clearImmediate(n){IU(n)}},{setImmediate:s8,clearImmediate:o8}=i8,NT={setImmediate(...n){const{delegate:e}=NT;return((null==e?void 0:e.setImmediate)||s8)(...n)},clearImmediate(n){const{delegate:e}=NT;return((null==e?void 0:e.clearImmediate)||o8)(n)},delegate:void 0};new class extends CU.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends EU.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=NT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(NT.clearImmediate(t),e._scheduled=void 0)}});function TU(n,e=pc.P){return function(n){return(0,rr.e)((e,t)=>{let r=!1,i=null,s=null,c=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}c&&t.complete()},p=()=>{s=null,c&&t.complete()};e.subscribe(new kn.Q(t,y=>{r=!0,i=y,s||(0,Lr.Xf)(n()).subscribe(s=new kn.Q(t,h,p))},()=>{c=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>Pg(n,e))}let nO=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new vt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Gn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(TU(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):et()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(cn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=al(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ma(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(Kr),u.LFG(re,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rO=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new vt.x,this._elementScrolled=new Gn.y(c=>this.ngZone.runOutsideAngular(()=>Ma(this.elementRef.nativeElement,"scroll").pipe(dr(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Km()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Km()?t.left=t.right:1==Km()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;wD()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const c=this.dir&&"rtl"==this.dir.value;return"start"==t?t=c?i:r:"end"==t&&(t=c?r:i),c&&2==Km()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:c&&1==Km()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(nO),u.Y36(u.R0b),u.Y36(wd,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),PT=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new vt.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(TU(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr),u.LFG(u.R0b),u.LFG(re,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),SU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ed,FT],Ed,FT]}),n})();const DU=["*"],f8=["content"];function p8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2),u.NdJ("click",function(){return u.CHM(t),u.oxw()._onBackdropClicked()}),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function m8(n,e){1&n&&(u.TgZ(0,"mat-drawer-content"),u.Hsn(1,2),u.qZA())}const g8=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],_8=["mat-drawer","mat-drawer-content","*"],y8={transformDrawer:sg("transform",[Od("open, open-instant",dl({transform:"none",visibility:"visible"})),Od("void",dl({"box-shadow":"none",visibility:"hidden"})),Of("void => open-instant",Rd("0ms")),Of("void <=> open, open-instant => void",Rd("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},v8=new u.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),AU=new u.OlP("MAT_DRAWER_CONTAINER");let iO=(()=>{class n extends rO{constructor(t,r,i,s,c){super(i,s,c),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36((0,u.Gpc)(()=>xU)),u.Y36(u.SBq),u.Y36(nO),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&u.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[u._Bn([{provide:rO,useExisting:n}]),u.qOj],ngContentSelectors:DU,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),MU=(()=>{class n{constructor(t,r,i,s,c,h,p,y){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=c,this._interactivityChecker=h,this._doc=p,this._container=y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new vt.x,this._animationEnd=new vt.x,this._animationState="void",this.openedChange=new u.vpe(!0),this._openedStream=this.openedChange.pipe(cn(C=>C),(0,Je.U)(()=>{})),this.openedStart=this._animationStarted.pipe(cn(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),VC(void 0)),this._closedStream=this.openedChange.pipe(cn(C=>!C),(0,Je.U)(()=>{})),this.closedStart=this._animationStarted.pipe(cn(C=>C.fromState!==C.toState&&"void"===C.toState),VC(void 0)),this._destroyed=new vt.x,this.onPositionChanged=new u.vpe,this._modeChanged=new vt.x,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Ma(this._elementRef.nativeElement,"keydown").pipe(cn(C=>27===C.keyCode&&!this.disableClose&&!Df(C)),dr(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(Xm((C,S)=>C.fromState===S.fromState&&C.toState===S.toState)).subscribe(C=>{const{fromState:S,toState:k}=C;(0===k.indexOf("open")&&"void"===S||"void"===k&&0===S.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=sr(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=sr(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(sr(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null==(t=this._anchor)||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe((0,Vn.q)(1)).subscribe(c=>s(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(cA),u.Y36(mc),u.Y36(Kr),u.Y36(u.R0b),u.Y36(rA),u.Y36(re,8),u.Y36(AU,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&u.Gf(f8,5),2&t){let i;u.iGM(i=u.CRH())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&u.WFA("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(u.uIk("align",null),u.d8E("@transform",r._animationState),u.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:DU,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA())},directives:[rO],encapsulation:2,data:{animation:[y8.transformDrawer]},changeDetection:0}),n})(),xU=(()=>{class n{constructor(t,r,i,s,c,h=!1,p){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new u.n_E,this.backdropClick=new u.vpe,this._destroyed=new vt.x,this._doCheckSubject=new vt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new vt.x,t&&t.change.pipe(dr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(dr(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=sr(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:sr(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Dr(this._allDrawers),dr(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Dr(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Af(10),dr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(cn(r=>r.fromState!==r.toState),dr(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(dr(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(dr(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Vn.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(dr((0,Bs.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wd,8),u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(PT),u.Y36(v8),u.Y36(Lo,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,iO,5),u.Suo(i,MU,5)),2&t){let s;u.iGM(s=u.CRH())&&(r._content=s.first),u.iGM(s=u.CRH())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&u.Gf(iO,5),2&t){let i;u.iGM(i=u.CRH())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[u._Bn([{provide:AU,useExisting:n}])],ngContentSelectors:_8,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(u.F$t(g8),u.YNc(0,p8,1,2,"div",0),u.Hsn(1),u.Hsn(2,1),u.YNc(3,m8,2,0,"mat-drawer-content",1)),2&t&&(u.Q6J("ngIf",r.hasBackdrop),u.xp6(3),u.Q6J("ngIf",!r._content))},directives:[$r,iO],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),w8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nr,hr,FT],FT,hr]}),n})();const kU=["mat-button",""],RU=["*"],I8=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],T8=Au(vC(bC(class{constructor(n){this._elementRef=n}})));let Kp=(()=>{class n extends T8{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of I8)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(mc),u.Y36(Lo,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&u.Gf(Av,5),2&t){let i;u.iGM(i=u.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(u.uIk("disabled",r.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:kU,ngContentSelectors:RU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1),u._UZ(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),u.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Av],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),OU=(()=>{class n extends Kp{constructor(t,r,i,s){super(r,t,i),this._ngZone=s,this._haltDisabledEvents=c=>{this.disabled&&(c.preventDefault(),c.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mc),u.Y36(u.SBq),u.Y36(Lo,8),u.Y36(u.R0b,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("tabindex",r.disabled?-1:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[u.qOj],attrs:kU,ngContentSelectors:RU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1),u._UZ(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),u.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Av],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),sO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[oM,hr],hr]}),n})();function NU(...n){const e=(0,to.jO)(n),{args:t,keys:r}=Kl(n),i=new Gn.y(s=>{const{length:c}=t;if(!c)return void s.complete();const h=new Array(c);let p=c,y=c;for(let C=0;C<c;C++){let S=!1;(0,Lr.Xf)(t[C]).subscribe(new kn.Q(s,k=>{S||(S=!0,y--),h[C]=k},()=>p--,void 0,()=>{(!p||!S)&&(y||s.next(r?Yl(r,h):h),s.complete())}))}});return e?i.pipe(Do(e)):i}class PU{}class FU{}class Hu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Hu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Hu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Hu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class S8{encodeKey(e){return LU(e)}encodeValue(e){return LU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const A8=/%(\d[a-f0-9])/gi,M8={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function LU(n){return encodeURIComponent(n).replace(A8,(e,t)=>{var r;return null!=(r=M8[t])?r:e})}function VU(n){return`${n}`}class yh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new S8,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new yh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VU(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VU(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class x8{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function BU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function UU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function jU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Cw{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Hu),this.context||(this.context=new x8),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new yh,this.urlWithParams=t}serializeBody(){return null===this.body?null:BU(this.body)||UU(this.body)||jU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jU(this.body)?null:UU(this.body)?this.body.type||null:BU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var S;const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const C=null!=(S=e.context)?S:this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((k,F)=>k.set(F,e.setHeaders[F]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((k,F)=>k.set(F,e.setParams[F]),y)),new Cw(t,r,s,{params:y,headers:p,context:C,reportProgress:h,responseType:i,withCredentials:c})}}var pi=(()=>((pi=pi||{})[pi.Sent=0]="Sent",pi[pi.UploadProgress=1]="UploadProgress",pi[pi.ResponseHeader=2]="ResponseHeader",pi[pi.DownloadProgress=3]="DownloadProgress",pi[pi.Response=4]="Response",pi[pi.User=5]="User",pi))();class oO{constructor(e,t=200,r="OK"){this.headers=e.headers||new Hu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class aO extends oO{constructor(e={}){super(e),this.type=pi.ResponseHeader}clone(e={}){return new aO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class LT extends oO{constructor(e={}){super(e),this.type=pi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new LT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class HU extends oO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function lO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let cO=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Cw)s=t;else{let p,y;p=i.headers instanceof Hu?i.headers:new Hu(i.headers),i.params&&(y=i.params instanceof yh?i.params:new yh({fromObject:i.params})),s=new Cw(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=et(s).pipe(Ns(p=>this.handler.handle(p)));if(t instanceof Cw||"events"===i.observe)return c;const h=c.pipe(cn(p=>p instanceof LT));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,Je.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,Je.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,Je.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,Je.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new yh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,lO(i,r))}post(t,r,i={}){return this.request("POST",t,lO(i,r))}put(t,r,i={}){return this.request("PUT",t,lO(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(PU))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class GU{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const $U=new u.OlP("HTTP_INTERCEPTORS");let O8=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const N8=/^\)\]\}',?\n/;let zU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Gn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((F,B)=>i.setRequestHeader(F,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const F=t.detectContentTypeHeader();null!==F&&i.setRequestHeader("Content-Type",F)}if(t.responseType){const F=t.responseType.toLowerCase();i.responseType="json"!==F?F:"text"}const s=t.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const F=1223===i.status?204:i.status,B=i.statusText||"OK",ee=new Hu(i.getAllResponseHeaders()),_e=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new aO({headers:ee,status:F,statusText:B,url:_e}),c},p=()=>{let{headers:F,status:B,statusText:ee,url:_e}=h(),qe=null;204!==B&&(qe=void 0===i.response?i.responseText:i.response),0===B&&(B=qe?200:0);let at=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof qe){const ft=qe;qe=qe.replace(N8,"");try{qe=""!==qe?JSON.parse(qe):null}catch(ct){qe=ft,at&&(at=!1,qe={error:ct,text:qe})}}at?(r.next(new LT({body:qe,headers:F,status:B,statusText:ee,url:_e||void 0})),r.complete()):r.error(new HU({error:qe,headers:F,status:B,statusText:ee,url:_e||void 0}))},y=F=>{const{url:B}=h(),ee=new HU({error:F,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(ee)};let C=!1;const S=F=>{C||(r.next(h()),C=!0);let B={type:pi.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(B.total=F.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},k=F=>{let B={type:pi.UploadProgress,loaded:F.loaded};F.lengthComputable&&(B.total=F.total),r.next(B)};return i.addEventListener("load",p),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",S),null!==s&&i.upload&&i.upload.addEventListener("progress",k)),i.send(s),r.next({type:pi.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",p),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",S),null!==s&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xl))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const uO=new u.OlP("XSRF_COOKIE_NAME"),dO=new u.OlP("XSRF_HEADER_NAME");class WU{}let F8=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re),u.LFG(u.Lbi),u.LFG(uO))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),hO=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(WU),u.LFG(dO))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),L8=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get($U,[]);this.chain=r.reduceRight((i,s)=>new GU(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(FU),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),V8=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:hO,useClass:O8}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:uO,useValue:t.cookieName}:[],t.headerName?{provide:dO,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[hO,{provide:$U,useExisting:hO,multi:!0},{provide:WU,useClass:F8},{provide:uO,useValue:"XSRF-TOKEN"},{provide:dO,useValue:"X-XSRF-TOKEN"}]}),n})(),qU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[cO,{provide:PU,useClass:L8},zU,{provide:FU,useExisting:zU}],imports:[[V8.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const B8=["*"];let VT;function Iw(n){var e;return(null==(e=function(){if(void 0===VT&&(VT=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(VT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return VT}())?void 0:e.createHTML(n))||n}function ZU(n){return Error(`Unable to find icon with the name "${n}"`)}function KU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function YU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Yp{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let BT=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Yp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const c=this._sanitizer.sanitize(u.q3G.HTML,i);if(!c)throw YU(i);const h=Iw(c);return this._addSvgIconConfig(t,r,new Yp("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Yp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(u.q3G.HTML,r);if(!s)throw YU(r);const c=Iw(s);return this._addSvgIconSetConfig(t,new Yp("",c,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!r)throw KU(t);const i=this._cachedIconsByUrl.get(r);return i?et(UT(i)):this._loadSvgIconFromConfig(new Yp(t,null)).pipe((0,yr.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,Je.U)(s=>UT(s)))}getNamedSvgIcon(t,r=""){const i=QU(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(t,c):kv(ZU(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?et(UT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Je.U)(r=>UT(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?et(i):NU(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Yi(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),et(null)})))).pipe((0,Je.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,r);if(!c)throw ZU(t);return c}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(c,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,yr.b)(r=>t.svgText=r),(0,Je.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?et(null):this._fetchIcon(t).pipe((0,yr.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const h=this._svgElementFromString(Iw("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Iw("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:c,value:h}=i[s];"id"!==c&&r.setAttribute(c,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var y;const{url:r,options:i}=t,s=null!=(y=null==i?void 0:i.withCredentials)&&y;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,r);if(!c)throw KU(r);const h=this._inProgressUrlFetches.get(c);if(h)return h;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,Je.U)(C=>Iw(C)),ld(()=>this._inProgressUrlFetches.delete(c)),(0,DR.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(QU(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return G8(s)?new Yp(s.url,null,s.options):new Yp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(cO,8),u.LFG(tu),u.LFG(re,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UT(n){return n.cloneNode(!0)}function QU(n,e){return n+":"+e}function G8(n){return!(!n.url||!n.options)}const $8=Au(class{constructor(n){this._elementRef=n}}),z8=new u.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,u.f3M)(re),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),JU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],q8=JU.map(n=>`[${n}]`).join(", "),Z8=/^url\(['"]?#(.*?)['"]?\)$/;let Tw=(()=>{class n extends $8{constructor(t,r,i,s,c){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=c,this._inline=!1,this._currentIconFetch=Zi.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=sr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(c=>{s.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(q8),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)JU.forEach(c=>{const h=r[s],p=h.getAttribute(c),y=p?p.match(Z8):null;if(y){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,Vn.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(BT),u.$8M("aria-hidden"),u.Y36(z8),u.Y36(u.qLn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),u.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:B8,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hr],hr]}),n})();const K8=["*",[["mat-toolbar-row"]]],Y8=["*","mat-toolbar-row"],Q8=Au(class{constructor(n){this._elementRef=n}});let J8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),X8=(()=>{class n extends Q8{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Kr),u.Y36(re))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,J8,5),2&t){let s;u.iGM(s=u.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&u.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:Y8,decls:2,vars:0,template:function(t,r){1&t&&(u.F$t(K8),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),eZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hr],hr]}),n})(),tZ=(()=>{class n{constructor(){this.menuButtonClicked=new u.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-topbar"]],outputs:{menuButtonClicked:"menuButtonClicked"},decls:8,vars:0,consts:[["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"click"],[1,"appTitle"],[1,"example-spacer"]],template:function(t,r){1&t&&(u.TgZ(0,"mat-toolbar"),u.TgZ(1,"button",0),u.NdJ("click",function(){return r.menuButtonClicked.emit(!0)}),u.TgZ(2,"mat-icon"),u._uU(3,"menu"),u.qZA(),u.qZA(),u.TgZ(4,"div",1),u.TgZ(5,"h1"),u._uU(6,"Minou Tracker"),u.qZA(),u.qZA(),u._UZ(7,"span",2),u.qZA())},directives:[X8,Kp,Tw],styles:[".appTitle[_ngcontent-%COMP%]{margin:auto}.buttonMenu[_ngcontent-%COMP%]{position:fixed}  .menuCloseButton{border-radius:10px;float:right}"]}),n})();function nZ(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"img",14),u._UZ(2,"br"),u._uU(3),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",null==t.connectedUser?null:t.connectedUser.photoURL,u.LSH),u.xp6(2),u.hij(" Hello ",null==t.connectedUser?null:t.connectedUser.displayName," ! ")}}function rZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",15),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(),s=u.MAs(2);return i.disconnect(),s.toggle()}),u._uU(1,"Se d\xe9connecter"),u.qZA()}}const iZ=function(){return["authentication"]};function sZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",16),u.NdJ("click",function(){return u.CHM(t),u.oxw(),u.MAs(2).toggle()}),u._uU(1,"Se connecter"),u.qZA()}2&n&&u.Q6J("routerLink",u.DdM(1,iZ))}function oZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-tree-node",20),u._UZ(1,"button",21),u.TgZ(2,"a",22),u.NdJ("click",function(){const s=u.CHM(t).$implicit,c=u.oxw(2),h=u.MAs(2);return c.menuButtonClicked(s),h.toggle()}),u._uU(3),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(3),u.hij(" ",t.name," ")}}function aZ(n,e){if(1&n&&(u.TgZ(0,"mat-tree-node",23),u.TgZ(1,"button",24),u.TgZ(2,"mat-icon",25),u._uU(3),u.qZA(),u.qZA(),u._uU(4),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(2);u.xp6(1),u.uIk("aria-label","Toggle "+t.name),u.xp6(2),u.hij(" ",r.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),u.xp6(1),u.hij(" ",t.name," ")}}function lZ(n,e){if(1&n&&(u.TgZ(0,"mat-tree",17),u.YNc(1,oZ,4,1,"mat-tree-node",18),u.YNc(2,aZ,5,3,"mat-tree-node",19),u.qZA()),2&n){const t=u.oxw();u.Q6J("dataSource",t.dataSource)("treeControl",t.treeControl),u.xp6(2),u.Q6J("matTreeNodeDefWhen",t.hasChild)}}let cZ=(()=>{class n{constructor(t,r,i){this.authGuard=r,this.title="foodTrackingApp",this._transformer=(s,c)=>({expandable:!!s.children&&s.children.length>0,name:s.name,isPerson:s.isPerson,navigateUrl:s.navigateUrl,level:c}),this.menuContent=[{name:"Tracker",children:[{name:"Tracking du jour",navigateUrl:"tracker"},{name:"Team tracking",navigateUrl:"teamTracking"}]},{name:"Historique",children:[{name:"Tracking du jour",navigateUrl:"history"}]},{name:"Statistiques",children:[{name:"Evolution poids",navigateUrl:"statistiques"}]}],this.treeControl=new S0(s=>s.level,s=>s.expandable),this.treeFlattener=new rp(this._transformer,s=>s.level,s=>s.expandable,s=>s.children),this.dataSource=new hM(this.treeControl,this.treeFlattener),this.hasChild=(s,c)=>c.expandable,this.selectedPerson=void 0,t.available.subscribe(s=>{t.activateUpdate().then(c=>{document.location.reload()})}),this.dataSource.data=this.menuContent,this.routing=i}ngOnInit(){this.authGuard.isUserLoggedIn()||this.routing.navigate(["authentication"]),this.setUserIfNotSet()}setUserIfNotSet(){if(this.authGuard.isUserLoggedIn()&&void 0===this.connectedUser&&void 0!==localStorage.getItem("user")){const t=JSON.parse(localStorage.getItem("user"));this.connectedUser={uid:null==t?void 0:t.uid,email:null==t?void 0:t.email,displayName:null==t?void 0:t.displayName,photoURL:null==t?void 0:t.photoURL,emailVerified:null==t?void 0:t.emailVerified}}}disconnect(){this.authGuard.disconnect()}menuButtonClicked(t){t.isPerson?(this.selectedPerson=t.name,this.routing.navigate([`${t.navigateUrl}`])):this.routing.navigate([`${t.navigateUrl}`])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Pv),u.Y36(RT),u.Y36(Oi))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:19,vars:5,consts:[["autosize","",1,"example-container"],["mode","side",1,"sidenavMenu"],["drawer",""],[1,"topMenuContainer"],["mat-button","",1,"menuCloseButton",3,"disableRipple","click"],[1,"userNameButtonMenu"],[4,"ngIf"],[1,"loginLogoutButton"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"routerLink","click",4,"ngIf"],[3,"dataSource","treeControl",4,"ngIf"],[1,"globalContainer"],[3,"menuButtonClicked"],[1,"spacingToolbar"],[1,"imageLoggedUser",3,"src"],["mat-button","",3,"click"],["mat-button","",3,"routerLink","click"],[3,"dataSource","treeControl"],["matTreeNodePadding","1",4,"matTreeNodeDef"],["matTreeNodePadding","0",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","1"],["mat-icon-button","","disabled",""],["mat-raised-button","",3,"click"],["matTreeNodePadding","0"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"mat-drawer-container",0),u.TgZ(1,"mat-drawer",1,2),u.TgZ(3,"div",3),u.TgZ(4,"h2"),u._uU(5,"\u{1f63a}MIOUNU"),u.qZA(),u.TgZ(6,"button",4),u.NdJ("click",function(){return u.CHM(i),u.MAs(2).toggle()}),u.TgZ(7,"mat-icon"),u._uU(8,"close"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",5),u.YNc(10,nZ,4,2,"div",6),u.TgZ(11,"div",7),u.YNc(12,rZ,2,0,"a",8),u.YNc(13,sZ,2,2,"a",9),u.qZA(),u.qZA(),u.YNc(14,lZ,3,3,"mat-tree",10),u.qZA(),u.TgZ(15,"div",11),u.TgZ(16,"app-topbar",12),u.NdJ("menuButtonClicked",function(){return u.CHM(i),u.MAs(2).toggle()}),u.qZA(),u._UZ(17,"div",13),u._UZ(18,"router-outlet"),u.qZA(),u.qZA()}2&t&&(u.xp6(6),u.Q6J("disableRipple",!0),u.xp6(4),u.Q6J("ngIf",r.authGuard.isUserLoggedIn()),u.xp6(2),u.Q6J("ngIf",r.authGuard.isUserLoggedIn()),u.xp6(1),u.Q6J("ngIf",!r.authGuard.isUserLoggedIn()),u.xp6(1),u.Q6J("ngIf",r.authGuard.isUserLoggedIn()))},directives:[xU,MU,Kp,Tw,$r,tZ,fu,OU,Bm,PC,Mv,OC,xv,Gd],styles:[".globalContainer[_ngcontent-%COMP%]{width:100vw;height:100vh}.spacingToolbar[_ngcontent-%COMP%]{height:64px;width:100vw}app-topbar[_ngcontent-%COMP%]{position:fixed!important;width:100vw;z-index:99}.appContent[_ngcontent-%COMP%]{display:flex}.sidenavMenu[_ngcontent-%COMP%]{padding:20px;width:250px}.topMenuContainer[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .topMenuContainer[_ngcontent-%COMP%] > .menuCloseButton[_ngcontent-%COMP%]{display:inline-block}.topMenuContainer[_ngcontent-%COMP%]{width:100%;height:50px}.userNameButtonMenu[_ngcontent-%COMP%]{background-color:#0000004d;text-align:center;padding:10px 0;border-radius:5px;margin-bottom:20px}.imageLoggedUser[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:30px;margin-bottom:5px}.loginLogoutButton[_ngcontent-%COMP%]{color:#ffffffb3}"]}),n})();const e2=Zm({passive:!0});let uZ=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ro.E;const r=al(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new vt.x,c="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,e2),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,e2)}}),s}stopMonitoring(t){const r=al(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),n2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Qp=(()=>{class n extends n2{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const kc=new u.OlP("NgValueAccessor"),hZ={provide:kc,useExisting:(0,u.Gpc)(()=>Sw),multi:!0},pZ=new u.OlP("CompositionEventMode");let Sw=(()=>{class n extends n2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(pZ,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[u._Bn([hZ]),u.qOj]}),n})();function vh(n){return null==n||0===n.length}function s2(n){return null!=n&&"number"==typeof n.length}const Ss=new u.OlP("NgValidators"),bh=new u.OlP("NgAsyncValidators"),mZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class j_{static min(e){return function(n){return e=>{if(vh(e.value)||vh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(vh(e.value)||vh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return vh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return vh(n.value)||mZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>vh(e.value)||!s2(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>s2(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return Dw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(vh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return v2(e)}static composeAsync(e){return b2(e)}}function Dw(n){return null}function p2(n){return null!=n}function m2(n){const e=(0,u.QGY)(n)?(0,xn.D)(n):n;return(0,u.CqO)(e),e}function g2(n){let e={};return n.forEach(t=>{e=null!=t?nt(nt({},e),t):e}),0===Object.keys(e).length?null:e}function _2(n,e){return e.map(t=>t(n))}function y2(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function v2(n){if(!n)return null;const e=n.filter(p2);return 0==e.length?null:function(t){return g2(_2(t,e))}}function pO(n){return null!=n?v2(y2(n)):null}function b2(n){if(!n)return null;const e=n.filter(p2);return 0==e.length?null:function(t){return NU(_2(t,e).map(m2)).pipe((0,Je.U)(g2))}}function mO(n){return null!=n?b2(y2(n)):null}function w2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function E2(n){return n._rawValidators}function C2(n){return n._rawAsyncValidators}function gO(n){return n?Array.isArray(n)?n:[n]:[]}function jT(n,e){return Array.isArray(n)?n.includes(e):n===e}function I2(n,e){const t=gO(e);return gO(n).forEach(i=>{jT(t,i)||t.push(i)}),t}function T2(n,e){return gO(e).filter(t=>!jT(n,t))}class S2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class zs extends S2{get formDirective(){return null}get path(){return null}}class Rc extends S2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class D2{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}let _O=(()=>{class n extends D2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Rc,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),yO=(()=>{class n extends D2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function Aw(n,e){wO(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&A2(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&A2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $T(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),WT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function zT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wO(n,e){const t=E2(n);null!==e.validator?n.setValidators(w2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=C2(n);null!==e.asyncValidator?n.setAsyncValidators(w2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();zT(e._rawValidators,i),zT(e._rawAsyncValidators,i)}function WT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=E2(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=C2(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return zT(e._rawValidators,r),zT(e._rawAsyncValidators,r),t}function A2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function M2(n,e){wO(n,e)}function x2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Mw="VALID",ZT="INVALID",H_="PENDING",xw="DISABLED";function IO(n){return(SO(n)?n.validators:n)||null}function k2(n){return Array.isArray(n)?pO(n):n||null}function TO(n,e){return(SO(e)?e.asyncValidators:n)||null}function R2(n){return Array.isArray(n)?mO(n):n||null}function SO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=k2(this._rawValidators),this._composedAsyncValidatorFn=R2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mw}get invalid(){return this.status===ZT}get pending(){return this.status==H_}get disabled(){return this.status===xw}get enabled(){return this.status!==xw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=k2(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=R2(e)}addValidators(e){this.setValidators(I2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(I2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(T2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(T2(e,this._rawAsyncValidators))}hasValidator(e){return jT(this._rawValidators,e)}hasAsyncValidator(e){return jT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=H_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xw,this.errors=null,this._forEachChild(r=>{r.disable(mi(nt({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(mi(nt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mw,this._forEachChild(r=>{r.enable(mi(nt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(mi(nt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mw||this.status===H_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xw:Mw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=H_,this._hasOwnPendingAsyncValidator=!0;const t=m2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof G_?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof AZ&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?xw:this.errors?ZT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(H_)?H_:this._anyControlsHaveStatus(ZT)?ZT:Mw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){SO(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wh extends DO{constructor(e=null,t,r){super(IO(t),TO(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class G_ extends DO{constructor(e,t,r){super(IO(t),TO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof wh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class AZ extends DO{constructor(e,t,r){super(IO(t),TO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof wh?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const MZ={provide:zs,useExisting:(0,u.Gpc)(()=>Rw)},kw=(()=>Promise.resolve(null))();let Rw=(()=>{class n extends zs{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new G_({},pO(t),mO(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){kw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Aw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){kw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),qT(this._directives,t)})}addFormGroup(t){kw.then(()=>{const r=this._findContainer(t.path),i=new G_({});M2(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){kw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){kw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,x2(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ss,10),u.Y36(bh,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([MZ]),u.qOj]}),n})(),AO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const RZ={provide:kc,useExisting:(0,u.Gpc)(()=>MO),multi:!0};let MO=(()=>{class n extends Qp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([RZ]),u.qOj]}),n})(),L2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const xO=new u.OlP("NgModelWithFormControlWarning"),LZ={provide:zs,useExisting:(0,u.Gpc)(()=>Jp)};let Jp=(()=>{class n extends zs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(WT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Aw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$T(t.control||null,t,!1),qT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,x2(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&($T(r||null,t),i instanceof wh&&(Aw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);M2(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return WT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wO(this.form,this),this._oldForm&&WT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ss,10),u.Y36(bh,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([LZ]),u.qOj,u.TTD]}),n})();const UZ={provide:Rc,useExisting:(0,u.Gpc)(()=>KT)};let KT=(()=>{class n extends Rc{constructor(t,r,i,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Sw?t=s:function(n){return Object.getPrototypeOf(n.constructor)===Qp}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(zs,13),u.Y36(Ss,10),u.Y36(bh,10),u.Y36(kc,10),u.Y36(xO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([UZ]),u.qOj,u.TTD]}),n})(),X2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[L2]]}),n})(),t5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[X2]}),n})(),n5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xO,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[X2]}),n})(),ej=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r5=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=al(t);return new Gn.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new vt.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ej))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),s5=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=sr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Zr(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Af(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(r5),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),o5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ej]}),n})();const a5=["connectionContainer"],l5=["inputContainer"],c5=["label"];function u5(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15),u._UZ(3,"div",16),u._UZ(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15),u._UZ(7,"div",16),u._UZ(8,"div",17),u.qZA(),u.BQk())}function d5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function h5(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function f5(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function p5(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function m5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,h5,4,1,"ng-container",12),u.YNc(3,f5,1,0,"ng-content",12),u.YNc(4,p5,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function g5(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function _5(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function y5(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function v5(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function b5(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,v5,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const w5=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],E5=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],C5=new u.OlP("MatError"),I5={transitionMessages:sg("transitionMessages",[Od("enter",dl({opacity:1,transform:"translateY(0%)"})),Of("void => enter",[dl({opacity:0,transform:"translateY(-5px)"}),Rd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let QT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const T5=new u.OlP("MatHint");let JT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),S5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const D5=new u.OlP("MatPrefix"),tj=new u.OlP("MatSuffix");let A5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","matSuffix",""]],features:[u._Bn([{provide:tj,useExisting:n}])]}),n})(),nj=0;const x5=Au(class{constructor(n){this._elementRef=n}},"primary"),k5=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ij=new u.OlP("MatFormField");let sj=(()=>{class n extends x5{constructor(t,r,i,s,c,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new vt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+nj++,this._labelId="mat-form-field-label-"+nj++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=sr(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Dr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(dr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Bs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Dr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Dr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(dr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Ma(this._label.nativeElement,"transitionend").pipe((0,Vn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let S=0;S<C.length;S++)C[S].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(C),k=t.children,F=this._getStartEnd(k[0].getBoundingClientRect());let B=0;for(let ee=0;ee<k.length;ee++)B+=k[ee].offsetWidth;c=Math.abs(F-S)-5,h=B>0?.75*B+10:0}for(let C=0;C<p.length;C++)p[C].style.width=`${c}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(wd,8),u.Y36(k5,8),u.Y36(Kr),u.Y36(u.R0b),u.Y36(Lo,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,QT,5),u.Suo(i,QT,7),u.Suo(i,JT,5),u.Suo(i,JT,7),u.Suo(i,S5,5),u.Suo(i,C5,5),u.Suo(i,T5,5),u.Suo(i,D5,5),u.Suo(i,tj,5)),2&t){let s;u.iGM(s=u.CRH())&&(r._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(r._controlStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(r._placeholderChild=s.first),u.iGM(s=u.CRH())&&(r._errorChildren=s),u.iGM(s=u.CRH())&&(r._hintChildren=s),u.iGM(s=u.CRH())&&(r._prefixChildren=s),u.iGM(s=u.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(u.Gf(a5,7),u.Gf(l5,5),u.Gf(c5,5)),2&t){let i;u.iGM(i=u.CRH())&&(r._connectionContainerRef=i.first),u.iGM(i=u.CRH())&&(r._inputContainerRef=i.first),u.iGM(i=u.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:ij,useExisting:n}]),u.qOj],ngContentSelectors:E5,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(u.F$t(w5),u.TgZ(0,"div",0),u.TgZ(1,"div",1,2),u.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),u.YNc(3,u5,9,0,"ng-container",3),u.YNc(4,d5,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,m5,5,16,"label",8),u.qZA(),u.qZA(),u.YNc(10,g5,2,0,"div",9),u.qZA(),u.YNc(11,_5,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,y5,2,1,"div",12),u.YNc(14,b5,5,2,"div",13),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==r.appearance),u.xp6(1),u.Q6J("ngIf",r._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",r._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",r._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=r.appearance),u.xp6(1),u.Q6J("ngSwitch",r._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[$r,Il,Di,s5],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[I5.transitionMessages]},changeDetection:0}),n})(),FO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nr,hr,o5],hr]}),n})();const R5=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),O5=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let N5=0;const P5=EC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let oj=(()=>{class n extends P5{constructor(t,r,i,s,c,h,p,y,C,S){super(h,s,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=S,this._uid="mat-input-"+N5++,this.focused=!1,this.stateChanges=new vt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>bD().has(B)),this._iOSKeyupListener=B=>{const ee=B.target;!ee.value&&0===ee.selectionStart&&0===ee.selectionEnd&&(ee.setSelectionRange(1,1),ee.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,F=k.nodeName.toLowerCase();this._inputValueAccessor=p||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===F,this._isTextarea="textarea"===F,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=sr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(j_.required))&&s}set required(t){this._required=sr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&bD().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=sr(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,i;const t=(null==(i=null==(r=this._formField)?void 0:r._hideControlPlaceholder)?void 0:i.call(r))?null:this.placeholder;if(t!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=t,t?s.setAttribute("placeholder",t):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){O5.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Kr),u.Y36(Rc,10),u.Y36(Rw,8),u.Y36(Jp,8),u.Y36(kg),u.Y36(R5,10),u.Y36(uZ),u.Y36(u.R0b),u.Y36(ij,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&u.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(u.Ikx("disabled",r.disabled)("required",r.required),u.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),u.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:QT,useExisting:n}]),u.qOj,u.TTD]}),n})(),aj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[kg],imports:[[t2,FO,hr],t2,FO]}),n})();function F5(n,e){if(1&n&&(u.O4$(),u._UZ(0,"circle",4)),2&n){const t=u.oxw(),r=u.MAs(1);u.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),u.uIk("r",t._getCircleRadius())}}function L5(n,e){if(1&n&&(u.O4$(),u._UZ(0,"circle",4)),2&n){const t=u.oxw(),r=u.MAs(1);u.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),u.uIk("r",t._getCircleRadius())}}const B5=Au(class{constructor(n){this._elementRef=n}},"primary"),U5=new u.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Gu extends B5{constructor(e,t,r,i,s,c,h,p){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=Zi.w0.EMPTY,this.mode="determinate";const y=Gu._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),y.has(r.head)||y.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&h&&c&&p&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Zr(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Zr(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Zr(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=ED(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var r;const t=50*(null!=(r=e.currentScale)?r:1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=Gu._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Gu._diameters=new WeakMap,Gu.\u0275fac=function(e){return new(e||Gu)(u.Y36(u.SBq),u.Y36(Kr),u.Y36(re,8),u.Y36(Lo,8),u.Y36(U5),u.Y36(u.sBO),u.Y36(PT),u.Y36(u.R0b))},Gu.\u0275cmp=u.Xpm({type:Gu,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(u.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),u.Udp("width",t.diameter,"px")("height",t.diameter,"px"),u.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[u.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(u.O4$(),u.TgZ(0,"svg",0,1),u.YNc(2,F5,1,11,"circle",2),u.YNc(3,L5,1,9,"circle",3),u.qZA()),2&e&&(u.Udp("width",t.diameter,"px")("height",t.diameter,"px"),u.Q6J("ngSwitch","indeterminate"===t.mode),u.uIk("viewBox",t._getViewBox()),u.xp6(2),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1))},directives:[Il,Di],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let lj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hr,Nr],hr]}),n})();const cj="@firebase/database";let VO="";function dj(n){VO=n}class z5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class W5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const hj=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new z5(e)}}catch(e){}return new W5},Xp=hj("localStorage"),BO=hj("sessionStorage"),$_=new Bo.Yd("@firebase/database"),fj=function(){let n=1;return function(){return n++}}(),pj=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Ow=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ow.apply(null,r):e+="object"==typeof r?(0,L.Pz)(r):r,e+=" "}return e};let em=null,mj=!0;const gj=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($_.logLevel=Bo.in.VERBOSE,em=$_.log.bind($_),e&&BO.set("logging_enabled",!0)):"function"==typeof n?em=n:(em=null,BO.remove("logging_enabled"))},Hi=function(...n){if(!0===mj&&(mj=!1,null===em&&!0===BO.get("logging_enabled")&&gj(!0)),em){const e=Ow.apply(null,n);em(e)}},Nw=function(n){return function(...e){Hi(n,...e)}},UO=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ow(...n);$_.error(e)},Oc=function(...n){const e=`FIREBASE FATAL ERROR: ${Ow(...n)}`;throw $_.error(e),new Error(e)},Ds=function(...n){const e="FIREBASE WARNING: "+Ow(...n);$_.warn(e)},XT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$u="[MIN_NAME]",Nc="[MAX_NAME]",tm=function(n,e){if(n===e)return 0;if(n===$u||e===Nc)return-1;if(e===$u||n===Nc)return 1;{const t=eS(n),r=eS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},K5=function(n,e){return n===e?0:n<e?-1:1},Pw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(e))},jO=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Pz)(e[r]),t+=":",t+=jO(n[e[r]]);return t+="}",t},_j=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const yj=function(n){(0,L.hu)(!XT(n),"Invalid JSON number");const r=1023;let i,s,c,h,p;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let S="";for(p=0;p<64;p+=8){let k=parseInt(C.substr(p,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},X5=new RegExp("^-?(0*)\\d{1,10}$"),vj=-2147483648,HO=2147483647,eS=function(n){if(X5.test(n)){const e=Number(n);if(e>=vj&&e<=HO)return e}return null},z_=function(n){try{n()}catch(e){setTimeout(()=>{throw Ds("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Fw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class t4{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ds(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class n4{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ds(e)}}let Lw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ij=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dj="websocket",Aj="long_polling";class $O{constructor(e,t,r,i,s=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Mj(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===Dj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Aj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Gi(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class i4{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const zO={},WO={};function qO(n){const e=n.toString();return zO[e]||(zO[e]=new i4),zO[e]}class o4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&z_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Eh{constructor(e,t,r,i,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nw(e),this.stats_=qO(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Mj(t,Aj,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new o4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ZO((...s)=>{const[c,h,p,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ij.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Eh.forceAllow_=!0}static forceDisallow(){Eh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Eh.forceAllow_&&(Eh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=_j(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ZO{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=fj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ZO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Hi("frame writing exception"),h.stack&&Hi(h.stack),Hi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let nS=null;"undefined"!=typeof MozWebSocket?nS=MozWebSocket:"undefined"!=typeof WebSocket&&(nS=WebSocket);let W_=(()=>{class n{constructor(t,r,i,s,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nw(this.connId),this.stats_=qO(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,c){const h={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ij.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),c&&(h.p=c),Mj(t,Dj,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xp.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${VO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new nS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==nS&&!n.forceDisallow_}static previouslyFailed(){return Xp.isInMemoryStorage||!0===Xp.get("previous_websocket_failure")}markConnectionHealthy(){Xp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=_j(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Fj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Eh,W_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=W_&&W_.isAvailable();let i=r&&!W_.previouslyFailed();if(t.webSocketOnly&&(r||Ds("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[W_];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Gj{constructor(e,t,r,i,s,c,h,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nw("c:"+this.id+":"),this.transportManager_=new Fj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Pw("t",e),r=Pw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Pw("t",e),r=Pw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Pw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?UO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ds("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Fw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $j{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class zj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class rS extends zj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rS}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class zn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new zn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ch(n){return n.pieces_.length-n.pieceNum_}function or(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new zn(n.pieces_,e)}function YO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Vw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Zj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new zn(e,0)}function xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof zn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new zn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function Ws(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return Ws(or(n),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function A4(n,e){const t=Vw(n,0),r=Vw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=tm(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function QO(n,e){if(Ch(n)!==Ch(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ch(n)>Ch(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class M4{constructor(e,t){this.errorPrefix_=t,this.parts_=Vw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);Kj(this)}}function Kj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nm(n))}function nm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class JO extends zj{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new JO}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Bw=1e3;let sS,rm=(()=>{class n extends $j{constructor(t,r,i,s,c,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Nw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");JO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&rS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,L.Pz)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||s!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ds(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):UO("Unrecognized action received from server: "+(0,L.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,s())};t.realtime_={close:C,sendRequest:function(F){(0,L.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,B]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);p?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=B&&B.token,y=new Gj(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,ee=>{Ds(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),p||(t.repoInfo_.nodeAdmin&&Ds(F),C())}}})()}interrupt(t){Hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Bw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>jO(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new zn(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Hi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Hi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+VO.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=rS.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class iS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un($u,e),i=new un($u,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class Jj extends iS{static get __EMPTY_NODE(){return sS}static set __EMPTY_NODE(e){sS=e}compare(e,t){return tm(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(Nc,sS)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,sS)}toString(){return".key"}}const Pc=new Jj;class oS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let eN,yl=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:mo.EMPTY_NODE,this.right=null!=c?c:mo.EMPTY_NODE}copy(t,r,i,s,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return mo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class mo{constructor(e,t=mo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new mo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yl.BLACK,null,null))}remove(e){return new mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new oS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new oS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new oS(this.root_,null,this.comparator_,!0,e)}}function V4(n,e){return tm(n.name,e.name)}function XO(n,e){return tm(n,e)}mo.EMPTY_NODE=new class{copy(e,t,r,i,s){return this}insert(e,t,r){return new yl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Xj=function(n){return"number"==typeof n?"number:"+yj(n):"string:"+n},eH=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===eN||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===eN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let tH,nH,rH,q_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),eH(this.priorityNode_)}static set __childrenNodeConstructor(t){tH=t}static get __childrenNodeConstructor(){return tH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===Ch(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Xj(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?yj(this.value_):this.value_,this.lazyHash_=pj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(s>=0,"Unknown leaf type: "+r),(0,L.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const pr=new class extends iS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?tm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(Nc,new q_("[PRIORITY-POST]",rH))}makePost(e,t){const r=nH(e);return new un(t,new q_("[PRIORITY-POST]",r))}toString(){return".priority"}},G4=Math.log(2);class $4{constructor(e){this.count=parseInt(Math.log(e+1)/G4,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const aS=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let S,k;if(0===C)return null;if(1===C)return S=n[p],k=t?t(S):S,new yl(k,S.node,yl.BLACK,null,null);{const F=parseInt(C/2,10)+p,B=i(p,F),ee=i(F+1,y);return S=n[F],k=t?t(S):S,new yl(k,S.node,yl.BLACK,B,ee)}},h=function(p){let y=null,C=null,S=n.length;const k=function(B,ee){const _e=S-B,qe=S;S-=B;const at=i(_e+1,qe),ft=n[_e],ct=t?t(ft):ft;F(new yl(ct,ft.node,ee,null,at))},F=function(B){y?(y.left=B,y=B):(C=B,y=B)};for(let B=0;B<p.count;++B){const ee=p.nextBitIsOne(),_e=Math.pow(2,p.count-(B+1));ee?k(_e,yl.BLACK):(k(_e,yl.BLACK),k(_e,yl.RED))}return C}(new $4(n.length));return new mo(r||e,h)};let tN;const Z_={};class zu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Z_&&pr,"ChildrenNode.ts has not been loaded"),tN=tN||new zu({".priority":Z_},{".priority":pr}),tN}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof mo?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Pc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(un.Wrap);let h,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();h=i?aS(r,e.getCompare()):Z_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=h,new zu(C,y)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),i===Z_){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(un.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),aS(h,c.getCompare())}return Z_}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new un(e.name,h))),p.insert(e,e.node)}});return new zu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===Z_)return i;{const s=t.get(e.name);return s?i.remove(new un(e.name,s)):i}});return new zu(r,this.indexSet_)}}let Uw,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&eH(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uw||(Uw=new n(new mo(XO),null,zu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Uw:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(or(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Uw:this.priorityNode_;return new n(s,h,c)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,L.hu)(".priority"!==an(t)||1===Ch(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(or(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(pr,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Xj(this.getPriority().val())+":"),this.forEachChild(pr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":pj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new un(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,un.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===jw?-1:0}withIndex(t){if(t===Pc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(pr),s=r.getIterator(pr);let c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Pc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const jw=new class extends Yt{constructor(){super(new mo(XO),Yt.EMPTY_NODE,zu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};function Or(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new q_(n,Or(e));if(n instanceof Array){let t=Yt.EMPTY_NODE;return Gi(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const s=Or(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Or(e))}{const t=[];let r=!1;if(Gi(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Or(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new un(c,p)))}}),0===t.length)return Yt.EMPTY_NODE;const s=aS(t,V4,c=>c.name,XO);if(r){const c=aS(t,pr.getCompare());return new Yt(s,Or(e),new zu({".priority":c},{".priority":pr}))}return new Yt(s,Or(e),zu.Default)}}Object.defineProperties(un,{MIN:{value:new un($u,Yt.EMPTY_NODE)},MAX:{value:new un(Nc,jw)}}),Jj.__EMPTY_NODE=Yt.EMPTY_NODE,q_.__childrenNodeConstructor=Yt,function(n){eN=n}(jw),function(n){rH=n}(jw),function(n){nH=n}(Or);class nN extends iS{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!ln(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?tm(e.name,t.name):s}makePost(e,t){const r=Or(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,jw);return new un(Nc,e)}toString(){return Vw(this.indexPath_,0).join("/")}}const rN=new class extends iS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?tm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Or(e);return new un(t,r)}toString(){return".value"}},K_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z4=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=K_.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=K_.charAt(e[i]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),oH=function(n){if(n===""+HO)return"-";const e=eS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Nc;const s=K_.charAt(K_.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},aH=function(n){if(n===""+vj)return $u;const e=eS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+HO:(delete t[t.length-1],t.join("")):(t[t.length-1]=K_.charAt(K_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function lH(n){return{type:"value",snapshotNode:n}}function Y_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Hw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Gw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class sN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,c){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Hw(t,h)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Y_(t,r)):c.trackChildChange(Gw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(pr,(i,s)=>{t.hasChild(i)||r.trackChildChange(Hw(i,s))}),t.isLeafNode()||t.forEachChild(pr,(i,s)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(s)||r.trackChildChange(Gw(i,s,c))}else r.trackChildChange(Y_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $w{constructor(e){this.indexedFilter_=new sN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$w.getStartPost_(e),this.endPost_=$w.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,c){return this.matches(new un(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const s=this;return t.forEachChild(pr,(c,h)=>{s.matches(new un(c,h))||(i=i.updateImmediateChild(c,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Y4{constructor(e){this.rangedFilter_=new $w(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,c){return this.rangedFilter_.matches(new un(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,c):this.fullLimitUpdateChild_(e,t,r,s,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Yt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(k,F)=>S(F,k)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;p.hasNext();){const S=p.getNext();!C&&h(s,S)<=0&&(C=!0),C&&y<this.limit_&&h(S,c)<=0?y++:i=i.updateImmediateChild(S.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let c;if(this.reverse_){const S=this.index_.getCompare();c=(k,F)=>S(F,k)}else c=this.index_.getCompare();const h=e;(0,L.hu)(h.numChildren()===this.limit_,"");const p=new un(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(p);if(h.hasChild(t)){const S=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const F=null==k?1:c(k,p);if(C&&!r.isEmpty()&&F>=0)return null!=s&&s.trackChildChange(Gw(t,r,S)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(Hw(t,S));const ee=h.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=s&&s.trackChildChange(Y_(k.name,k.node)),ee.updateImmediateChild(k.name,k.node)):ee}}return r.isEmpty()?e:C&&c(y,p)>=0?(null!=s&&(s.trackChildChange(Hw(y.name,y.node)),s.trackChildChange(Y_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Yt.EMPTY_NODE)):e}}class lS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$u}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pr}copy(){const e=new lS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function aN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function cS(n,e){const t=n.copy();return t.index_=e,t}function cH(n){const e={};if(n.isDefault())return e;let t;return n.index_===pr?t="$priority":n.index_===rN?t="$value":n.index_===Pc?t="$key":((0,L.hu)(n.index_ instanceof nN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Pz)(t),n.startSet_&&(e.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==pr&&(e.i=n.index_.toString()),e}class uS extends $j{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Nw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=uS.getListenId_(e,r),h={};this.listens_[c]=h;const p=cH(e._queryParams);this.restRequest_(s+".json",p,(y,C)=>{let S=C;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(s,S,!1,r),(0,L.DV)(this.listens_,c)===h){let k;k=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(k,null)}})}unlisten(e,t){const r=uS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=cH(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,L.cI)(h.responseText)}catch(y){Ds("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Ds("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class nK{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function dS(){return{value:null,children:new Map}}function Q_(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,dS()),Q_(n.children.get(r),e=or(e),t)}}function lN(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(pr,(r,i)=>{Q_(n,new zn(r),i)}),lN(n,e)}}if(n.children.size>0){const t=an(e);return e=or(e),n.children.has(t)&&lN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function cN(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{cN(i,new zn(e.toString()+"/"+r),t)})}class iK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Gi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class aK{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new iK(e);const r=1e4+2e4*Math.random();Fw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Gi(e,(i,s)=>{s>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Fw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pa||(Pa={})),Pa))();function hN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class hS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new zn(e));return new hS(Nn(),t,this.revert)}}return(0,L.hu)(an(this.path)===e,"operationForChild called for unrelated child."),new hS(or(this.path),this.affectedTree,this.revert)}}class zw{constructor(e,t){this.source=e,this.path=t,this.type=Pa.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new zw(this.source,Nn()):new zw(this.source,or(this.path))}}class im{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pa.OVERWRITE}operationForChild(e){return ln(this.path)?new im(this.source,Nn(),this.snap.getImmediateChild(e)):new im(this.source,or(this.path),this.snap)}}class J_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pa.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new zn(e));return t.isEmpty()?null:t.value?new im(this.source,Nn(),t.value):new J_(this.source,Nn(),t)}return(0,L.hu)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new J_(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ih{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class lK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ww(n,e,t,r,i,s){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function fS(n,e){return{eventCache:n,serverCache:e}}function qw(n,e,t,r){return fS(new Ih(e,t,r),n.serverCache)}function hH(n,e,t,r){return fS(n.eventCache,new Ih(e,t,r))}function pS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let fN;class mr{constructor(e,t=(()=>(fN||(fN=new mo(K5)),fN))()){this.value=e,this.children=t}static fromObject(e){let t=new mr(null);return Gi(e,(r,i)=>{t=t.set(new zn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(ln(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(or(e),t);return null!=s?{path:xr(new zn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(or(e)):new mr(null)}}set(e,t){if(ln(e))return new mr(t,this.children);{const r=an(e),s=(this.children.get(r)||new mr(null)).set(or(e),t),c=this.children.insert(r,s);return new mr(this.value,c)}}remove(e){if(ln(e))return this.children.isEmpty()?new mr(null):new mr(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(or(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new mr(null):new mr(this.value,s)}return this}}get(e){if(ln(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(or(e)):null}}setTree(e,t){if(ln(e))return t;{const r=an(e),s=(this.children.get(r)||new mr(null)).setTree(or(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new mr(this.value,c)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(xr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const s=an(e),c=this.children.get(s);return c?c.findOnPath_(or(e),xr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=an(e),s=this.children.get(i);return s?s.foreachOnPath_(or(e),xr(t,i),r):new mr(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class vl{constructor(e){this.writeTree_=e}static empty(){return new vl(new mr(null))}}function Zw(n,e,t){if(ln(e))return new vl(new mr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=Ws(i,e);return s=s.updateChild(c,t),new vl(n.writeTree_.set(i,s))}{const i=new mr(t),s=n.writeTree_.setTree(e,i);return new vl(s)}}}function pN(n,e,t){let r=n;return Gi(t,(i,s)=>{r=Zw(r,xr(e,i),s)}),r}function fH(n,e){if(ln(e))return vl.empty();{const t=n.writeTree_.setTree(e,new mr(null));return new vl(t)}}function mN(n,e){return null!=om(n,e)}function om(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ws(t.path,e)):null}function pH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(pr,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function Th(n,e){if(ln(e))return n;{const t=om(n,e);return new vl(null!=t?new mr(t):n.writeTree_.subtree(e))}}function gN(n){return n.writeTree_.isEmpty()}function X_(n,e){return mH(Nn(),n.writeTree_,e)}function mH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=mH(xr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(xr(n,".priority"),r)),t}}function mS(n,e){return bH(e,n)}function _K(n,e){if(n.snap)return Na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Na(xr(n.path,t),e))return!0;return!1}function vK(n){return n.visible}function gH(n,e,t){let r=vl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let h;if(s.snap)Na(t,c)?(h=Ws(t,c),r=Zw(r,h,s.snap)):Na(c,t)&&(h=Ws(c,t),r=Zw(r,Nn(),s.snap.getChild(h)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Na(t,c))h=Ws(t,c),r=pN(r,h,s.children);else if(Na(c,t))if(h=Ws(c,t),ln(h))r=pN(r,Nn(),s.children);else{const p=(0,L.DV)(s.children,an(h));if(p){const y=p.getChild(or(h));r=Zw(r,Nn(),y)}}}}}return r}function _H(n,e,t,r,i){if(r||i){const s=Th(n.visibleWrites,e);return!i&&gN(s)?t:i||null!=t||mN(s,Nn())?X_(gH(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Na(y.path,e)||Na(e,y.path))},e),t||Yt.EMPTY_NODE):null}{const s=om(n.visibleWrites,e);if(null!=s)return s;{const c=Th(n.visibleWrites,e);return gN(c)?t:null!=t||mN(c,Nn())?X_(c,t||Yt.EMPTY_NODE):null}}}function gS(n,e,t,r){return _H(n.writeTree,n.treePath,e,t,r)}function _N(n,e){return function(n,e,t){let r=Yt.EMPTY_NODE;const i=om(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pr,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=Th(n.visibleWrites,e);return t.forEachChild(pr,(c,h)=>{const p=X_(Th(s,new zn(c)),h);r=r.updateImmediateChild(c,p)}),pH(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return pH(Th(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function yH(n,e,t,r){return function(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=xr(e,t);if(mN(n.visibleWrites,s))return null;{const c=Th(n.visibleWrites,s);return gN(c)?i.getChild(t):X_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function _S(n,e){return function(n,e){return om(n.visibleWrites,e)}(n.writeTree,xr(n.treePath,e))}function yN(n,e,t){return function(n,e,t,r){const i=xr(e,t),s=om(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?X_(Th(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function vH(n,e){return bH(xr(n.treePath,e),n.writeTree)}function bH(n,e){return{treePath:n,writeTree:e}}class DK{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Gw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Hw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Y_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Gw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const wH=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class vN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ih(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sm(this.viewCache_),s=function(n,e,t,r,i,s){return function(n,e,t,r,i,s,c){let h;const p=Th(n.visibleWrites,e),y=om(p,Nn());if(null!=y)h=y;else{if(null==t)return[];h=X_(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],S=c.getCompare(),k=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let F=k.getNext();for(;F&&C.length<i;)0!==S(F,r)&&C.push(F),F=k.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function EH(n,e,t,r,i,s){const c=e.eventCache;if(null!=_S(r,t))return e;{let h,p;if(ln(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=sm(e),S=_N(r,y instanceof Yt?y:Yt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,s)}else{const y=gS(r,sm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=an(t);if(".priority"===y){(0,L.hu)(1===Ch(t),"Can't have a priority with additional path components");const C=c.getNode();p=e.serverCache.getNode();const S=yH(r,t,C,p);h=null!=S?n.filter.updatePriority(C,S):c.getNode()}else{const C=or(t);let S;if(c.isCompleteForChild(y)){p=e.serverCache.getNode();const k=yH(r,t,c.getNode(),p);S=null!=k?c.getNode().getImmediateChild(y).updateChild(C,k):c.getNode().getImmediateChild(y)}else S=yN(r,y,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),y,S,C,i,s):c.getNode()}}return qw(e,h,c.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function yS(n,e,t,r,i,s,c,h){const p=e.serverCache;let y;const C=c?n.filter:n.filter.getIndexedFilter();if(ln(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const F=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),F,null)}else{const F=an(t);if(!p.isCompleteForPath(t)&&Ch(t)>1)return e;const B=or(t),_e=p.getNode().getImmediateChild(F).updateChild(B,r);y=".priority"===F?C.updatePriority(p.getNode(),_e):C.updateChild(p.getNode(),F,_e,B,wH,null)}const S=hH(e,y,p.isFullyInitialized()||ln(t),C.filtersNodes());return EH(n,S,t,i,new vN(i,S,s),h)}function bN(n,e,t,r,i,s,c){const h=e.eventCache;let p,y;const C=new vN(i,e,s);if(ln(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=qw(e,y,!0,n.filter.filtersNodes());else{const S=an(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=qw(e,y,h.isFullyInitialized(),h.isFiltered());else{const k=or(t),F=h.getNode().getImmediateChild(S);let B;if(ln(k))B=r;else{const ee=C.getCompleteChild(S);B=null!=ee?".priority"===YO(k)&&ee.getChild(Zj(k)).isEmpty()?ee:ee.updateChild(k,r):Yt.EMPTY_NODE}p=F.equals(B)?e:qw(e,n.filter.updateChild(h.getNode(),S,B,k,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function CH(n,e){return n.eventCache.isCompleteForChild(e)}function IH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function wN(n,e,t,r,i,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=ln(t)?r:new mr(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((S,k)=>{if(C.hasChild(S)){const B=IH(0,e.serverCache.getNode().getImmediateChild(S),k);p=yS(n,p,new zn(S),B,i,s,c,h)}}),y.children.inorderTraversal((S,k)=>{const F=!e.serverCache.isCompleteForChild(S)&&void 0===k.value;if(!C.hasChild(S)&&!F){const ee=IH(0,e.serverCache.getNode().getImmediateChild(S),k);p=yS(n,p,new zn(S),ee,i,s,c,h)}}),p}class LK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new sN(r.getIndex()),s=function(n){return n.loadsAllData()?new sN(n.getIndex()):n.hasLimit()?new Y4(n):new $w(n)}(r);this.processor_=function(n){return{filter:n}}(s);const c=t.serverCache,h=t.eventCache,p=i.updateFullNode(Yt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),C=new Ih(p,c.isFullyInitialized(),i.filtersNodes()),S=new Ih(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=fS(S,C),this.eventGenerator_=new lK(this.query_)}get query(){return this.query_}}function UK(n,e){const t=sm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function TH(n){return 0===n.eventRegistrations_.length}function SH(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function DH(n,e,t,r){e.type===Pa.MERGE&&null!==e.source.queryId&&((0,L.hu)(sm(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(pS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function(n,e,t,r,i){const s=new DK;let c,h;if(t.type===Pa.OVERWRITE){const y=t;y.source.fromUser?c=bN(n,e,y.path,y.snap,r,i,s):((0,L.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!ln(y.path),c=yS(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Pa.MERGE){const y=t;y.source.fromUser?c=function(n,e,t,r,i,s,c){let h=e;return r.foreach((p,y)=>{const C=xr(t,p);CH(e,an(C))&&(h=bN(n,h,C,y,i,s,c))}),r.foreach((p,y)=>{const C=xr(t,p);CH(e,an(C))||(h=bN(n,h,C,y,i,s,c))}),h}(n,e,y.path,y.children,r,i,s):((0,L.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=wN(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Pa.ACK_USER_WRITE){const y=t;c=y.revert?function(n,e,t,r,i,s){let c;if(null!=_S(r,t))return e;{const h=new vN(r,e,i),p=e.eventCache.getNode();let y;if(ln(t)||".priority"===an(t)){let C;if(e.serverCache.isFullyInitialized())C=gS(r,sm(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Yt,"serverChildren would be complete if leaf node"),C=_N(r,S)}C=C,y=n.filter.updateFullNode(p,C,s)}else{const C=an(t);let S=yN(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=p.getImmediateChild(C)),y=null!=S?n.filter.updateChild(p,C,S,or(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,Yt.EMPTY_NODE,or(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=gS(r,sm(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=_S(r,Nn()),qw(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function(n,e,t,r,i,s,c){if(null!=_S(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(ln(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return yS(n,e,t,p.getNode().getChild(t),i,s,h,c);if(ln(t)){let y=new mr(null);return p.getNode().forEachChild(Pc,(C,S)=>{y=y.set(new zn(C),S)}),wN(n,e,t,y,i,s,h,c)}return e}{let y=new mr(null);return r.foreach((C,S)=>{const k=xr(t,C);p.isCompleteForPath(k)&&(y=y.set(C,p.getNode().getChild(k)))}),wN(n,e,t,y,i,s,h,c)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Pa.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,i){const s=e.serverCache;return EH(n,hH(e,s.getNode(),s.isFullyInitialized()||ln(t),s.isFiltered()),t,r,wH,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=pS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(lH(pS(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,AH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function AH(n,e,t,r){return function(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Ww(n,i,"child_removed",e,r,t),Ww(n,i,"child_added",e,r,t),Ww(n,i,"child_moved",s,r,t),Ww(n,i,"child_changed",e,r,t),Ww(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let vS,wS;class MH{constructor(){this.views=new Map}}function EN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),DH(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(DH(c,e,t,r));return s}}function xH(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=gS(t,i?r:null),p=!1;h?p=!0:r instanceof Yt?(h=_N(t,r),p=!1):(h=Yt.EMPTY_NODE,p=!1);const y=fS(new Ih(h,p,!1),new Ih(r,i,!1));return new LK(e,y)}return c}function kH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Sh(n,e){let t=null;for(const r of n.views.values())t=t||UK(r,e);return t}function RH(n,e){return e._queryParams.loadsAllData()?bS(n):n.views.get(e._queryIdentifier)}function OH(n,e){return null!=RH(n,e)}function Dh(n){return null!=bS(n)}function bS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let YK=1;class NH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mr(null),this.pendingWriteTree_={visibleWrites:vl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CN(n,e,t,r,i){return function(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Zw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ey(n,new im({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ah(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&_K(h,r.path)?i=!1:Na(r.path,h.path)&&(s=!0)),c--}return!!i&&(s?(function(n){n.visibleWrites=gH(n.allWrites,vK,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=fH(n.visibleWrites,r.path):Gi(r.children,p=>{n.visibleWrites=fH(n.visibleWrites,xr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new mr(null);return null!=r.snap?s=s.set(Nn(),!0):Gi(r.children,c=>{s=s.set(new zn(c),!0)}),ey(n,new hS(r.path,s,t))}return[]}function Kw(n,e,t){return ey(n,new im({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function IN(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let c=[];if(s&&("default"===e._queryIdentifier||OH(s,e))){const h=function(n,e,t,r){const i=e._queryIdentifier,s=[];let c=[];const h=Dh(n);if("default"===i)for(const[p,y]of n.views.entries())c=c.concat(SH(y,t,r)),TH(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(c=c.concat(SH(p,t,r)),TH(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Dh(n)&&s.push(new((0,L.hu)(vS,"Reference.ts has not been loaded"),vS)(e._repo,e._path)),{removed:s,events:c}}(s,e,t,r);(function(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;c=h.events;const y=-1!==p.findIndex(S=>S._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(S,k)=>Dh(k));if(y&&!C){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const k=function(n){return n.fold((e,t,r)=>{if(t&&Dh(t))return[bS(t)];{let i=[];return t&&(i=kH(t)),Gi(r,(s,c)=>{i=i.concat(c)}),i}})}(S);for(let F=0;F<k.length;++F){const B=k[F],ee=B.query,_e=VH(n,B);n.listenProvider_.startListening(Yw(ee),CS(n,ee),_e.hashFn,_e.onComplete)}}}if(!C&&p.length>0&&!r)if(y){const S=null;n.listenProvider_.stopListening(Yw(e),S)}else p.forEach(S=>{const k=n.queryToTagMap.get(IS(S));n.listenProvider_.stopListening(Yw(S),k)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=IS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function PH(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(S,k)=>{const F=Ws(S,r);i=i||Sh(k,F),s=s||Dh(k)});let h,c=n.syncPointTree_.get(r);c?(s=s||Dh(c),i=i||Sh(c,Nn())):(c=new MH,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?h=!0:(h=!1,i=Yt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,F)=>{const B=Sh(F,Nn());B&&(i=i.updateImmediateChild(k,B))}));const p=OH(c,e);if(!p&&!e._queryParams.loadsAllData()){const S=IS(e);(0,L.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const k=YK++;n.queryToTagMap.set(S,k),n.tagToQueryMap.set(k,S)}let C=function(n,e,t,r,i,s){const c=xH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(pr,(s,c)=>{r.push(Y_(s,c))}),t.isFullyInitialized()&&r.push(lH(t.getNode())),AH(n,r,t.getNode(),e)}(c,t)}(c,e,t,mS(n.pendingWriteTree_,r),i,h);if(!p&&!s){const S=RH(c,e);C=C.concat(function(n,e,t){const r=e._path,i=CS(n,e),s=VH(n,t),c=n.listenProvider_.startListening(Yw(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Dh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,C,S)=>{if(!ln(y)&&C&&Dh(C))return[bS(C).query];{let k=[];return C&&(k=k.concat(kH(C).map(F=>F.query))),Gi(S,(F,B)=>{k=k.concat(B)}),k}});for(let y=0;y<p.length;++y){const C=p[y];n.listenProvider_.stopListening(Yw(C),CS(n,C))}}return c}(n,e,S))}return C}function ES(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=Sh(h,Ws(c,e));if(y)return y});return _H(i,e,s,t,!0)}function ey(n,e){return FH(e,n.syncPointTree_,null,mS(n.pendingWriteTree_,Nn()))}function FH(n,e,t,r){if(ln(n.path))return LH(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=Sh(i,Nn()));let s=[];const c=an(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const y=t?t.getImmediateChild(c):null,C=vH(r,c);s=s.concat(FH(h,p,y,C))}return i&&(s=s.concat(EN(i,n,r,t))),s}}function LH(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=Sh(i,Nn()));let s=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,y=vH(r,c),C=n.operationForChild(c);C&&(s=s.concat(LH(C,h,p,y)))}),i&&(s=s.concat(EN(i,n,r,t))),s}function VH(n,e){const t=e.query,r=CS(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=TN(n,t);if(r){const i=SN(r),s=i.path,c=i.queryId,h=Ws(s,e);return DN(n,s,new zw(hN(c),h))}return[]}(n,t._path,r):function(n,e){return ey(n,new zw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return IN(n,t,null,s)}}}}function CS(n,e){const t=IS(e);return n.queryToTagMap.get(t)}function IS(n){return n._path.toString()+"$"+n._queryIdentifier}function TN(n,e){return n.tagToQueryMap.get(e)}function SN(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new zn(n.substr(0,e))}}function DN(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),EN(r,t,mS(n.pendingWriteTree_,e),null)}function Yw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,L.hu)(wS,"Reference.ts has not been loaded"),wS)(n._repo,n._path):n}class AN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new AN(t)}node(){return this.node_}}class MN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xr(this.path_,e);return new MN(this.syncTree_,t)}node(){return ES(this.syncTree_,this.path_)}}const BH=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?cY(n[".sv"],e,t):"object"==typeof n[".sv"]?uY(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},cY=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},uY=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},UH=function(n,e,t,r){return kN(e,new MN(t,n),r)},xN=function(n,e,t){return kN(n,new AN(e),t)};function kN(n,e,t){const r=n.getPriority().val(),i=BH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=BH(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new q_(h,Or(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new q_(i))),c.forEachChild(pr,(h,p)=>{const y=kN(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class RN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function TS(n,e){let t=e instanceof zn?e:new zn(e),r=n,i=an(t);for(;null!==i;){const s=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new RN(i,r,s),t=or(t),i=an(t)}return r}function am(n){return n.node.value}function ON(n,e){n.node.value=e,NN(n)}function jH(n){return n.node.childCount>0}function SS(n,e){Gi(n.node.children,(t,r)=>{e(new RN(t,n,r))})}function HH(n,e,t,r){t&&!r&&e(n),SS(n,i=>{HH(i,e,!0,r)}),t&&r&&e(n)}function Qw(n){return new zn(null===n.parent?n.name:Qw(n.parent)+"/"+n.name)}function NN(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===am(n)&&!jH(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,NN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,NN(n))}(n.parent,n.name,n)}const pY=/[\[\].#$\/\u0000-\u001F\u007F]/,mY=/[\[\].#$\u0000-\u001F\u007F]/,PN=10485760,DS=function(n){return"string"==typeof n&&0!==n.length&&!pY.test(n)},GH=function(n){return"string"==typeof n&&0!==n.length&&!mY.test(n)},Jw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!XT(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Fc=function(n,e,t,r){r&&void 0===e||Xw((0,L.gK)(n,"value"),e,t)},Xw=function(n,e,t){const r=t instanceof zn?new M4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+nm(r));if("function"==typeof e)throw new Error(n+"contains a function "+nm(r)+" with contents = "+e.toString());if(XT(e))throw new Error(n+"contains "+e.toString()+" "+nm(r));if("string"==typeof e&&e.length>PN/3&&(0,L.ug)(e)>PN)throw new Error(n+"contains a string greater than "+PN+" utf8 bytes "+nm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Gi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!DS(c)))throw new Error(n+" contains an invalid key ("+c+") "+nm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),Kj(n)})(r,c),Xw(n,h,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+nm(r)+" in addition to actual children.")}},$H=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Gi(e,(c,h)=>{const p=new zn(c);if(Xw(i,h,xr(t,p)),".priority"===YO(p)&&!Jw(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Vw(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!DS(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(A4);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Na(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},FN=function(n,e,t){if(!t||void 0!==e){if(XT(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Jw(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},e0=function(n,e,t,r){if(!(r&&void 0===t||DS(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},t0=function(n,e,t,r){if(!(r&&void 0===t||GH(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fa=function(n,e){if(".info"===an(e))throw new Error(n+" failed = Can't modify data under /.info/")},zH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!DS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GH(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vY{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function AS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!QO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function LN(n,e,t){AS(n,t),WH(n,r=>QO(r,e))}function La(n,e,t){AS(n,t),WH(n,r=>Na(r,e)||Na(e,r))}function WH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(bY(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function bY(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();em&&Hi("event: "+t.toString()),z_(r)}}}const qH="repo_interrupt";class EY{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vY,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dS(),this.transactionQueueTree_=new RN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ZH(n){const t=n.infoData_.getNode(new zn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function n0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ZH(n)})}function KH(n,e,t,r,i){n.dataUpdateCount++;const s=new zn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,L.UI)(t,y=>Or(y));c=function(n,e,t,r){const i=TN(n,r);if(i){const s=SN(i),c=s.path,h=s.queryId,p=Ws(c,e),y=mr.fromObject(t);return DN(n,c,new J_(hN(h),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Or(t);c=function(n,e,t,r){const i=TN(n,r);if(null!=i){const s=SN(i),c=s.path,h=s.queryId,p=Ws(c,e);return DN(n,c,new im(hN(h),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,L.UI)(t,y=>Or(y));c=function(n,e,t){const r=mr.fromObject(t);return ey(n,new J_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Or(t);c=Kw(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=ny(n,s)),La(n.eventQueue_,h,c)}function YH(n,e){VN(n,"connected",e),!1===e&&function(n){ty(n,"onDisconnectEvents");const e=n0(n),t=dS();cN(n.onDisconnect_,Nn(),(i,s)=>{const c=UH(i,s,n.serverSyncTree_,e);Q_(t,i,c)});let r=[];cN(t,Nn(),(i,s)=>{r=r.concat(Kw(n.serverSyncTree_,i,s));const c=HN(n,i);ny(n,c)}),n.onDisconnect_=dS(),La(n.eventQueue_,Nn(),r)}(n)}function VN(n,e,t){const r=new zn("/.info/"+e),i=Or(t);n.infoData_.updateSnapshot(r,i);const s=Kw(n.infoSyncTree_,r,i);La(n.eventQueue_,r,s)}function MS(n){return n.nextWriteId_++}function BN(n,e,t,r,i){ty(n,"set",{path:e.toString(),value:t,priority:r});const s=n0(n),c=Or(t,r),h=ES(n.serverSyncTree_,e),p=xN(c,h,s),y=MS(n),C=CN(n.serverSyncTree_,e,p,y,!0);AS(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),(k,F)=>{const B="ok"===k;B||Ds("set at "+e+" failed: "+k);const ee=Ah(n.serverSyncTree_,y,!B);La(n.eventQueue_,e,ee),Mh(0,i,k,F)});const S=HN(n,e);ny(n,S),La(n.eventQueue_,S,[])}function AY(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&lN(n.onDisconnect_,e),Mh(0,t,r,i)})}function QH(n,e,t,r){const i=Or(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,c)=>{"ok"===s&&Q_(n.onDisconnect_,e,i),Mh(0,r,s,c)})}function UN(n,e,t){let r;r=".info"===an(e._path)?IN(n.infoSyncTree_,e,t):IN(n.serverSyncTree_,e,t),LN(n.eventQueue_,e._path,r)}function JH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(qH)}function ty(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Hi(t,...e)}function Mh(n,e,t,r){e&&z_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const c=new Error(s);c.code=i,e(c)}})}function jN(n,e,t){return ES(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function xS(n,e=n.transactionQueueTree_){if(e||kS(n,e),am(e)){const t=e3(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(y=>y.currentWriteId),i=jN(n,e,r);let s=i;const c=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,L.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Ws(e,C.path);s=s.updateChild(S,C.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{ty(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,C=C.concat(Ah(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();kS(n,TS(n.transactionQueueTree_,e)),xS(n,n.transactionQueueTree_),La(n.eventQueue_,e,C);for(let k=0;k<S.length;k++)z_(S[k])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ds("transaction at "+p.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}ny(n,e)}},c)}(n,Qw(e),t)}else jH(e)&&SS(e,t=>{xS(n,t)})}function ny(n,e){const t=XH(n,e),r=Qw(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=Ws(t,p.path);let S,C=!1;if((0,L.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,S=p.abortReason,i=i.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,S="maxretry",i=i.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0));else{const k=jN(n,p.path,c);p.currentInputSnapshot=k;const F=e[h].update(k.val());if(void 0!==F){Xw("transaction failed: Data returned ",F,p.path);let B=Or(F);"object"==typeof F&&null!=F&&(0,L.r3)(F,".priority")||(B=B.updatePriority(k.getPriority()));const _e=p.currentWriteId,qe=n0(n),at=xN(B,k,qe);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=at,p.currentWriteId=MS(n),c.splice(c.indexOf(_e),1),i=i.concat(CN(n.serverSyncTree_,p.path,at,p.currentWriteId,p.applyLocally)),i=i.concat(Ah(n.serverSyncTree_,_e,!0))}else C=!0,S="nodata",i=i.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0))}La(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}kS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)z_(r[h]);xS(n,n.transactionQueueTree_)}(n,e3(n,t),r),r}function XH(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===am(r);)r=TS(r,t),t=an(e=or(e));return r}function e3(n,e){const t=[];return t3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function t3(n,e,t){const r=am(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);SS(e,i=>{t3(n,i,t)})}function kS(n,e){const t=am(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,ON(e,t.length>0?t:void 0)}SS(e,r=>{kS(n,r)})}function HN(n,e){const t=Qw(XH(n,e)),r=TS(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{GN(n,i)}),GN(n,r),HH(r,i=>{GN(n,i)}),t}function GN(n,e){const t=am(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,L.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Ah(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ON(e,void 0):t.length=s+1,La(n.eventQueue_,Qw(e),i);for(let c=0;c<r.length;c++)z_(r[c])}}const $N=function(n,e){const t=VY(n),r=t.namespace;return"firebase.com"===t.domain&&Oc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ds("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $O(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new zn(t.pathString)}},VY=function(n){let e="",t="",r="",i="",s="",c=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(C,S)));const k=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ds(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const F=e.slice(0,y);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),s=r}"ns"in k&&(s=k.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};class n3{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class r3{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class s3{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class o3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return AY(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fa("OnDisconnect.remove",this._path);const e=new L.BH;return QH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fa("OnDisconnect.set",this._path),Fc("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return QH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Fa("OnDisconnect.setWithPriority",this._path),Fc("OnDisconnect.setWithPriority",e,this._path,!1),FN("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function(n,e,t,r,i){const s=Or(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,h)=>{"ok"===c&&Q_(n.onDisconnect_,e,s),Mh(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Fa("OnDisconnect.update",this._path),$H("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function(n,e,t,r){if((0,L.xb)(t))return Hi("onDisconnect().update() called with empty data.  Don't do anything."),void Mh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Gi(t,(c,h)=>{const p=Or(h);Q_(n.onDisconnect_,xr(e,c),p)}),Mh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class go{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:YO(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const e=uH(this._queryParams),t=jO(e);return"{}"===t?"default":t}get _queryObject(){return uH(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof go))return!1;const t=this._repo===e._repo,r=QO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function RS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==$u)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===pr){if(null!=e&&!Jw(e)||null!=t&&!Jw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof nN||n.getIndex()===rN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Va extends go{constructor(e,t){super(e,t,new lS,!1)}get parent(){const e=Zj(this._path);return null===e?null:new Va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class lm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new zn(e),r=cm(this.ref,e);return new lm(this._node.getChild(t),r,pr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new lm(i,cm(this.ref,r),pr)))}hasChild(e){const t=new zn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function a3(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?cm(n._root,e):n._root}function l3(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=$N(e,n._repo.repoInfo_.nodeAdmin);zH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Oc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),a3(n,t.path.toString())}function cm(n,e){return null===an((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),t0("child","path",t,!1)):t0("child","path",e,!1),new Va(n._repo,xr(n._path,e));var t}function zN(n,e){n=(0,L.m9)(n),Fa("set",n._path),Fc("set",e,n._path,!1);const t=new L.BH;return BN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function GY(n,e){$H("update",e,n._path,!1);const t=new L.BH;return function(n,e,t,r){ty(n,"update",{path:e.toString(),value:t});let i=!0;const s=n0(n),c={};if(Gi(t,(h,p)=>{i=!1,c[h]=UH(xr(e,h),Or(p),n.serverSyncTree_,s)}),i)Hi("update() called with empty data.  Don't do anything."),Mh(0,r,"ok",void 0);else{const h=MS(n),p=function(n,e,t,r){!function(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=pN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=mr.fromObject(t);return ey(n,new J_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);AS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,C)=>{const S="ok"===y;S||Ds("update at "+e+" failed: "+y);const k=Ah(n.serverSyncTree_,h,!S),F=k.length>0?ny(n,e):e;La(n.eventQueue_,F,k),Mh(0,r,y,C)}),Gi(t,y=>{const C=HN(n,xr(e,y));ny(n,C)}),La(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function $Y(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const S=Ws(y,t);r=r||Sh(C,S)});let i=n.syncPointTree_.get(t);i?r=r||Sh(i,Nn()):(i=new MH,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,c=s?new Ih(r,!0,!1):null;return function(n){return pS(n.viewCache_)}(xH(i,e,mS(n.pendingWriteTree_,e._path),s?c.getNode():Yt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Or(r).withIndex(e._queryParams.getIndex()),s=Kw(n.serverSyncTree_,e._path,i);return LN(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(ty(n,"get for query "+(0,L.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,L.m9)(n))._repo,n).then(e=>new lm(e,new Va(n._repo,n._path),n._queryParams.getIndex()))}class NS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new n3("value",this,new lm(e.snapshotNode,new Va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new r3(this,e,t):null}matches(e){return e instanceof NS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class PS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new r3(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=cm(new Va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new n3(e.type,this,new lm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof PS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function r0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(C,S)=>{UN(n._repo,n,h),p(C,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new s3(t,s||void 0),h="value"===e?new NS(c):new PS(e,c);return function(n,e,t){let r;r=".info"===an(e._path)?PH(n.infoSyncTree_,e,t):PH(n.serverSyncTree_,e,t),LN(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>UN(n._repo,n,h)}function WN(n,e,t,r){return r0(n,"value",e,t,r)}function c3(n,e,t,r){return r0(n,"child_added",e,t,r)}function u3(n,e,t,r){return r0(n,"child_changed",e,t,r)}function d3(n,e,t,r){return r0(n,"child_moved",e,t,r)}function h3(n,e,t,r){return r0(n,"child_removed",e,t,r)}function f3(n,e,t){let r=null;const i=t?new s3(t):null;"value"===e?r=new NS(i):e&&(r=new PS(e,i)),UN(n._repo,n,r)}class bl{}class p3 extends bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fc("endAt",this._value,e._path,!0);const t=aN(e._queryParams,this._value,this._key);if(OS(t),xh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class WY extends bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fc("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===Pc?("string"==typeof e&&(e=aH(e)),i=aN(n,e,t)):(r=null==t?$u:aH(t),i=aN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(OS(t),xh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class m3 extends bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fc("startAt",this._value,e._path,!0);const t=oN(e._queryParams,this._value,this._key);if(OS(t),xh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class KY extends bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fc("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Pc)"string"==typeof e&&(e=oH(e)),r=oN(n,e,t);else{let i;i=null==t?Nc:oH(t),r=oN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(OS(t),xh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class QY extends bl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new go(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class XY extends bl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new go(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class t7 extends bl{constructor(e){super(),this._path=e}_apply(e){RS(e,"orderByChild");const t=new zn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new nN(t),i=cS(e._queryParams,r);return xh(i),new go(e._repo,e._path,i,!0)}}class r7 extends bl{_apply(e){RS(e,"orderByKey");const t=cS(e._queryParams,Pc);return xh(t),new go(e._repo,e._path,t,!0)}}class s7 extends bl{_apply(e){RS(e,"orderByPriority");const t=cS(e._queryParams,pr);return xh(t),new go(e._repo,e._path,t,!0)}}class a7 extends bl{_apply(e){RS(e,"orderByValue");const t=cS(e._queryParams,rN);return xh(t),new go(e._repo,e._path,t,!0)}}class c7 extends bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new p3(this._value,this._key)._apply(new m3(this._value,this._key)._apply(e))}}function wl(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,L.hu)(!vS,"__referenceConstructor has already been defined"),vS=n})(Va),function(n){(0,L.hu)(!wS,"__referenceConstructor has already been defined"),wS=n}(Va);const qN={};function _3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=$N(s,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,c=$N(s,i),h=c.repoInfo):p=!c.repoInfo.secure;const C=i&&p?new Lw(Lw.OWNER):new n4(n.name,n.options,e);zH("Invalid Firebase Database URL",c),ln(c.path)||Oc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let i=qN[e.name];i||(i={},qN[e.name]=i);let s=i[n.toURLString()];return s&&Oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new EY(n,false,t,r),i[n.toURLString()]=s,s}(h,n,C,new t4(n.name,t));return new g7(S,n)}class g7{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=qO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new uS(n.repoInfo_,(r,i,s,c)=>{KH(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>YH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new rm(n.repoInfo_,e,(r,i,s,c)=>{KH(n,r,i,s,c)},r=>{YH(n,r)},r=>{!function(n,e){Gi(e,(t,r)=>{VN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return WO[t]||(WO[t]=e()),WO[t]}(n.repoInfo_,()=>new aK(n.stats_,n.server_)),n.infoData_=new nK,n.infoSyncTree_=new NH({startListening:(r,i,s,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=Kw(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),VN(n,"connected",!1),n.serverSyncTree_=new NH({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(h,p)=>{const y=c(h,p);La(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=qN[e];(!t||t[n.key]!==n)&&Oc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),JH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Oc("Cannot call "+e+" on a deleted database.")}}function y3(){Fj.IS_TRANSPORT_INITIALIZED&&Ds("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _7(){y3(),Eh.forceDisallow()}function y7(){y3(),W_.forceDisallow(),Eh.forceAllow()}function E7(n,e){gj(n,e)}class D7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}rm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},rm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},dj(Vo.SDK_VERSION),(0,Vo._registerComponent)(new fl.wA("database",(e,{instanceIdentifier:t})=>_3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vo.registerVersion)(cj,"0.13.0",void 0),(0,Vo.registerVersion)(cj,"0.13.0","esm2017");const k7=new Bo.Yd("@firebase/database-compat"),v3=function(n){k7.warn("FIREBASE WARNING: "+n)};class N7{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,v3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class P7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),t0("DataSnapshot.child","path",e,!1),new kh(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),t0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new kh(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ho(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class as{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const c=as.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(c.context,new kh(this.database,y),C)};h.userCallback=t,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return WN(this._delegate,h,p),t;case"child_added":return c3(this._delegate,h,p),t;case"child_removed":return h3(this._delegate,h,p),t;case"child_changed":return u3(this._delegate,h,p),t;case"child_moved":return d3(this._delegate,h,p),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,f3(this._delegate,e,i)}else f3(this._delegate,e)}get(){return $Y(this._delegate).then(e=>new kh(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const s=as.getCancelAndContextArgs_("Query.once",r,i),c=new L.BH,h=(y,C)=>{const S=new kh(this.database,y);t&&t.call(s.context,S,C),c.resolve(S)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(e){case"value":WN(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":c3(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":h3(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":u3(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":d3(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new as(this.database,wl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new QY(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new as(this.database,wl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new XY(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new as(this.database,wl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return t0("orderByChild","path",n,!1),new t7(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new as(this.database,wl(this._delegate,new r7))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new as(this.database,wl(this._delegate,new s7))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new as(this.database,wl(this._delegate,new a7))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new as(this.database,wl(this._delegate,function(n=null,e){return e0("startAt","key",e,!0),new m3(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new as(this.database,wl(this._delegate,function(n,e){return e0("startAfter","key",e,!0),new KY(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new as(this.database,wl(this._delegate,function(n,e){return e0("endAt","key",e,!0),new p3(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new as(this.database,wl(this._delegate,function(n,e){return e0("endBefore","key",e,!0),new WY(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new as(this.database,wl(this._delegate,function(n,e){return e0("equalTo","key",e,!0),new c7(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof as))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ho(this.database,new Va(this._delegate._repo,this._delegate._path))}}class Ho extends as{constructor(e,t){super(e,new go(t._repo,t._path,new lS,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ho(this.database,cm(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ho(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Ho(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=zN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,v3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fa("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=GY(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Fa("setWithPriority",n._path),Fc("setWithPriority",e,n._path,!1),FN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return BN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Fa("remove",n._path),zN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,L.m9)(n),Fa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new L.BH,h=WN(n,()=>{});return function(n,e,t,r,i,s){ty(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:fj(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=jN(n,e,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Xw("transaction failed: Data returned ",p,c.path),c.status=0;const y=TS(n.transactionQueueTree_,e),C=am(y)||[];let S;C.push(c),ON(y,C),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(S=(0,L.DV)(p,".priority"),(0,L.hu)(Jw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(ES(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const k=n0(n),F=Or(p,S),B=xN(F,h,k);c.currentOutputSnapshotRaw=F,c.currentOutputSnapshotResolved=B,c.currentWriteId=MS(n);const ee=CN(n.serverSyncTree_,e,B,c.currentWriteId,c.applyLocally);La(n.eventQueue_,e,ee),xS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,C)=>{let S=null;p?s.reject(p):(S=new lm(C,new Va(n._repo,n._path),pr),s.resolve(new D7(y,S)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new P7(s.committed,new kh(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,L.m9)(n),Fa("setPriority",n._path),FN("setPriority",e,!1);const t=new L.BH;return BN(n._repo,xr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,L.m9)(n),Fa("push",n._path),Fc("push",e,n._path,!0);const t=ZH(n._repo),r=Z4(t),i=cm(n,r),s=cm(n,r);let c;return c=null!=e?zN(s,e).then(()=>s):Promise.resolve(s),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Ho(this.database,c));t&&i.then(()=>t(null),c=>t(c));const s=new Ho(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Fa("Reference.onDisconnect",this._delegate._path),new N7(new o3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class s0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:_7,forceLongPolling:y7}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Oc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Lw(Lw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);s=new Lw(c)}!function(n,e,t,r){n.repoInfo_=new $O(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Ho){const t=l3(this._delegate,e.toString());return new Ho(this,t)}{const t=a3(this._delegate,e);return new Ho(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=l3(this._delegate,e);return new Ho(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),JH(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(qH)}(n._repo)}(this._delegate)}}s0.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var L7=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){dj(t);const c=new fl.zt("auth-internal",new fl.H0("database-standalone"));return c.setComponent(new fl.wA("auth-internal",()=>r,"PRIVATE")),{instance:new s0(_3(n,c,void 0,e,s),n),namespace:i}}});const V7=s0.ServerValue;function b3(n){return null==n}function w3(n){return"function"==typeof n.set}function E3(n,e){return w3(e)?e:n.ref(e)}function C3(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(w3(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function o0(n,e,t="on",r=pc.z){return new Gn.y(i=>{let s=null;return s=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Je.U)(i=>{const{snapshot:s,prevKey:c}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:c,key:h}}),(0,DR.B)())}function I3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function $7(n,e){const{payload:t,prevKey:r,key:i}=e,s=I3(n,i),c=function(n,e){if(b3(e))return 0;{const t=I3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function T3(n){return(b3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function S3(n,e,t){return function(n,e,t){return o0(n,"value","once",t).pipe($t(r=>{const i=[et(r)];return e.forEach(s=>i.push(o0(n,s,"on",t))),(0,Bs.T)(...i).pipe(oi($7,[]))}),Xm())}(n,e=T3(e),t)}function D3(n,e,t){const r=(e=T3(e)).map(i=>o0(n,i,"on",t));return(0,Bs.T)(...r)}function A3(n,e){return function(r,i){return C3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Z7(n){return function(t){return t?C3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function M3(n,e){return function(){return o0(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new fl.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new s0(i,r)},"PUBLIC").setServiceProps({Reference:Ho,Query:as,Database:s0,DataSnapshot:kh,enableLogging:E7,INTERNAL:L7,ServerValue:V7}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(zv.Z);const Q7=new u.OlP("angularfire2.realtimeDatabaseURL"),J7=new u.OlP("angularfire2.database.use-emulator");let X7=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,k,F,B,ee,_e){this.schedulers=h;const qe=p,at=(0,Ni.on)(t,c,r);y&&QR(at,c,C,k,F,B,S,ee),this.database=(0,Ni.cc)(`${at.name}.database.${i}`,"AngularFireDatabase",at.name,()=>{const ft=c.runOutsideAngular(()=>at.database(i||void 0));return qe&&ft.useEmulator(...qe),ft},[qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>E3(this.database,t));let s=i;return r&&(s=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:A3(r,"update"),set:A3(r,"set"),push:i=>r.push(i),remove:Z7(r),snapshotChanges:i=>S3(n,i,t).pipe(Xn.iC),stateChanges:i=>D3(n,i,t).pipe(Xn.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return o0(n,"value","on",e).pipe((0,Je.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,to.jO)(n);return(0,rr.e)((t,r)=>{const i=n.length,s=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Lr.Xf)(n[p]).subscribe(new kn.Q(r,y=>{s[p]=y,!h&&!c[p]&&(c[p]=!0,(h=c.every(ms.y))&&(c=null))},_f.Z));t.subscribe(new kn.Q(r,p=>{if(h){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,Je.U)(([i,s])=>{const c=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,s=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(s)))&&t.next(s)))}),(0,Je.U)(i=>i.actions))}(n,D3(n,e).pipe(oi((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Xn.iC),valueChanges:(i,s)=>S3(n,i,t).pipe((0,Je.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Xn.iC)}}(s,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>M3(n,e.schedulers.outsideAngular)().pipe(Xn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>M3(n,e.schedulers.outsideAngular)().pipe(Xn.iC,(0,Je.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>E3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ni.Dh),u.LFG(Ni.xv,8),u.LFG(Q7,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Xn.HU),u.LFG(J7,8),u.LFG(MT,8),u.LFG(zR,8),u.LFG(WR,8),u.LFG(qR,8),u.LFG(ZR,8),u.LFG(KR,8),u.LFG(YR,8),u.LFG(AT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eQ=(()=>{class n{constructor(){G6.Z.registerVersion("angularfire",Xn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[X7]}),n})(),tQ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-page-not-found"]],decls:4,vars:0,consts:[["routerLink","/home"]],template:function(t,r){1&t&&(u.TgZ(0,"p"),u._uU(1,"Page non trouv\xe9e"),u.qZA(),u.TgZ(2,"li",0),u._uU(3,"Aller \xe0 la page d'accueil"),u.qZA())},directives:[yd],styles:[""]}),n})(),nQ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-history"]],decls:2,vars:0,template:function(t,r){1&t&&(u.TgZ(0,"p"),u._uU(1,"history works!"),u.qZA())},styles:[""]}),n})(),rQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nr,bd.forChild([{path:"history",component:nQ}])]]}),n})();class ZN{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class KN extends ZN{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class x3 extends ZN{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class sQ extends ZN{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class YN{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof KN?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof x3?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof sQ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class oQ extends YN{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const h=c.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let k3=(()=>{class n extends YN{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const c=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(re))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),R3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const O3=wD();class aQ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Br(-this._previousScrollPosition.left),e.style.top=Br(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),O3&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),O3&&(r.scrollBehavior=s,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class lQ{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class N3{enable(){}disable(){}attach(){}}function QN(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function P3(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class cQ{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();QN(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let uQ=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new N3,this.close=c=>new lQ(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new aQ(this._viewportRuler,this._document),this.reposition=c=>new cQ(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(nO),u.LFG(PT),u.LFG(u.R0b),u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class F3{constructor(e){if(this.scrollStrategy=new N3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class dQ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let L3=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hQ=(()=>{class n extends L3{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const h=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fQ=(()=>{class n extends L3{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ad(s)},this._clickListener=s=>{const c=Ad(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const C=p[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(c)||C.overlayElement.contains(h))break;const S=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(s)):S.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re),u.LFG(Kr),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V3=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null==(t=this._containerElement)||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||O0()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),O0()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re),u.LFG(Kr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pQ{constructor(e,t,r,i,s,c,h,p,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=c,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new vt.x,this._attachments=new vt.x,this._detachments=new vt.x,this._locationChanges=Zi.w0.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new vt.x,this._outsidePointerEvents=new vt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(t=this._host)||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=nt(nt({},this._config),e),this._updateElementSize()}setDirection(e){this._config=mi(nt({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Br(this._config.width),e.height=Br(this._config.height),e.minWidth=Br(this._config.minWidth),e.minHeight=Br(this._config.minHeight),e.maxWidth=Br(this._config.maxWidth),e.maxHeight=Br(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=yf(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(dr((0,Bs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const B3="cdk-overlay-connected-position-bounding-box",mQ=/([A-Za-z%]+)$/;class gQ{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new vt.x,this._resizeSubscription=Zi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(B3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let c;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),C=this._getOverlayFit(y,t,r,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(C,y,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!c||c.overlayFit.visibleArea<C.visibleArea)&&(c={overlayFit:C,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>p&&(p=C,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&um(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(B3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?c:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=j3(t);let{x:c,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(c+=p),y&&(h+=y);let k=0-h,F=h+s.height-r.height,B=this._subtractOverflows(s.width,0-c,c+s.width-r.width),ee=this._subtractOverflows(s.height,k,F),_e=B*ee;return{visibleArea:_e,isCompletelyWithinViewport:s.width*s.height===_e,fitsInViewportVertically:ee===s.height,fitsInViewportHorizontally:B==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,c=U3(this._overlayRef.getConfig().minHeight),h=U3(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=c&&c<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=j3(t),s=this._viewportRect,c=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let C=0,S=0;return C=i.width<=s.width?y||-c:e.x<this._viewportMargin?s.left-r.left-e.x:0,S=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:C,y:S},{x:e.x+C,y:e.y+S}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new dQ(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,c,h,C,S,k;if("top"===t.overlayY)c=e.y,s=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const F=Math.min(r.bottom-e.y+r.top,e.y),B=this._lastBoundingBoxSize.height;s=2*F,c=e.y-F,s>B&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-B/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)S=e.x,C=r.right-e.x;else{const F=Math.min(r.right-e.x+r.left,e.x),B=this._lastBoundingBoxSize.width;C=2*F,S=e.x-F,C>B&&!this._isInitialRender&&!this._growAfterOpen&&(S=e.x-B/2)}return{top:c,left:S,bottom:h,right:k,width:C,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=Br(r.height),i.top=Br(r.top),i.bottom=Br(r.bottom),i.width=Br(r.width),i.left=Br(r.left),i.right=Br(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Br(s)),c&&(i.maxWidth=Br(c))}this._lastBoundingBoxSize=r,um(this._boundingBox.style,i)}_resetBoundingBoxStyles(){um(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){um(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();um(r,this._getExactOverlayY(t,e,C)),um(r,this._getExactOverlayX(t,e,C))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),c.maxHeight&&(i?r.maxHeight=Br(c.maxHeight):s&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=Br(c.maxWidth):s&&(r.maxWidth="")),um(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Br(s.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Br(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:P3(e,r),isOriginOutsideView:QN(e,r),isOverlayClipped:P3(t,r),isOverlayOutsideView:QN(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&yf(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function um(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function U3(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(mQ);return t&&"px"!==t?null:parseFloat(e)}return n||null}function j3(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const H3="cdk-global-overlay-wrapper";class _Q{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(H3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:c,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(H3),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let yQ=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new _Q}flexibleConnectedTo(t){return new gQ(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(PT),u.LFG(re),u.LFG(Kr),u.LFG(V3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vQ=0,FS=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,k){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=h,this._ngZone=p,this._document=y,this._directionality=C,this._location=S,this._outsideClickDispatcher=k}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),c=new F3(t);return c.direction=c.direction||this._directionality.value,new pQ(s,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+vQ++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new oQ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(uQ),u.LFG(V3),u.LFG(u._Vd),u.LFG(yQ),u.LFG(hQ),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(re),u.LFG(wd),u.LFG(ut),u.LFG(fQ))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const EQ={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[FS],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let CQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[FS,EQ],imports:[[Ed,R3,SU],SU]}),n})();const G3=new Set;let ry,IQ=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):SQ}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function(n){if(!G3.has(n))try{ry||(ry=document.createElement("style"),ry.setAttribute("type","text/css"),document.head.appendChild(ry)),ry.sheet&&(ry.sheet.insertRule(`@media ${n} {body{ }}`,0),G3.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SQ(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let $3=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new vt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return z3(yf(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Rs(z3(yf(t)).map(c=>this._registerQuery(c).observable));return s=ua(s.pipe((0,Vn.q)(1)),s.pipe(nE(1),Af(0))),s.pipe((0,Je.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Gn.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(Dr(r),(0,Je.U)(({matches:c})=>({query:t,matches:c})),dr(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(IQ),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z3(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function AQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2),u.TgZ(1,"button",3),u.NdJ("click",function(){return u.CHM(t),u.oxw().action()}),u._uU(2),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(2),u.Oqu(t.data.action)}}function MQ(n,e){}const JN=new u.OlP("MatSnackBarData");class LS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const xQ=Math.pow(2,31)-1;class XN{constructor(e,t){this._overlayRef=t,this._afterDismissed=new vt.x,this._afterOpened=new vt.x,this._onAction=new vt.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,xQ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let kQ=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(XN),u.Y36(JN))},n.\u0275cmp=u.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"span",0),u._uU(1),u.qZA(),u.YNc(2,AQ,3,1,"div",1)),2&t&&(u.xp6(1),u.Oqu(r.data.message),u.xp6(1),u.Q6J("ngIf",r.hasAction))},directives:[$r,Kp],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const RQ={snackBarState:sg("state",[Od("void, hidden",dl({transform:"scale(0.8)",opacity:0})),Od("visible",dl({transform:"scale(1)",opacity:1})),Of("* => visible",Rd("150ms cubic-bezier(0, 0, 0.2, 1)")),Of("* => void, * => hidden",Rd("75ms cubic-bezier(0.4, 0.0, 1, 1)",dl({opacity:0})))])};let OQ=(()=>{class n extends YN{constructor(t,r,i,s,c){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new vt.x,this._onExit=new vt.x,this._onEnter=new vt.x,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Vn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.R0b),u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Kr),u.Y36(LS))},n.\u0275cmp=u.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,r){if(1&t&&u.Gf(k3,7),2&t){let i;u.iGM(i=u.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&u.WFA("@state.done",function(s){return r.onAnimationEnd(s)}),2&t&&u.d8E("@state",r._animationState)},features:[u.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,MQ,0,0,"ng-template",1),u.qZA(),u._UZ(2,"div")),2&t&&(u.xp6(2),u.uIk("aria-live",r._live)("role",r._role))},directives:[k3],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[RQ.snackBarState]}}),n})(),W3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[CQ,R3,Nr,sO,hr],hr]}),n})();const q3=new u.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new LS}});let PQ=(()=>{class n{constructor(t,r,i,s,c,h){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const s=nt(nt({},this._defaultConfig),i);return s.data={message:t,action:r},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const s=u.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:LS,useValue:r}]}),c=new KN(this.snackBarContainerComponent,r.viewContainerRef,s),h=t.attach(c);return h.instance.snackBarConfig=r,h.instance}_attach(t,r){const i=nt(nt(nt({},new LS),this._defaultConfig),r),s=this._createOverlay(i),c=this._attachSnackBarContainer(s,i),h=new XN(c,s);if(t instanceof u.Rgc){const p=new x3(t,null,{$implicit:i.data,snackBarRef:h});h.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(i,h),y=new KN(t,void 0,p),C=c.attachComponentPortal(y);h.instance=C.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(dr(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(h,i),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new F3;r.direction=t.direction;let i=this._overlay.position().global();const s="rtl"===t.direction,c="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,h=!c&&"center"!==t.horizontalPosition;return c?i.left("0"):h?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return u.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:XN,useValue:r},{provide:JN,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(FS),u.LFG(Eu),u.LFG(u.zs3),u.LFG($3),u.LFG(n,12),u.LFG(q3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Z3=(()=>{class n extends PQ{constructor(t,r,i,s,c,h){super(t,r,i,s,c,h),this.simpleSnackBarComponent=kQ,this.snackBarContainerComponent=OQ,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(FS),u.LFG(Eu),u.LFG(u.zs3),u.LFG($3),u.LFG(n,12),u.LFG(q3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:W3}),n})(),K3=(()=>{class n{constructor(t){this.data=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(JN))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-snackbar"]],decls:2,vars:1,template:function(t,r){1&t&&(u.TgZ(0,"b"),u._uU(1),u.qZA()),2&t&&(u.xp6(1),u.Oqu(r.data.text))},styles:[""]}),n})(),VS=(()=>{class n{constructor(t,r){this.authService=r,this.database=t}addIntakes(t,r,i){this.authService.userData.uid&&this.database.collection("intakes").add({nickname:t,intakeValue:r,titleIntake:i,date:new Date,uid:this.authService.userData.uid})}addTargetIntake(t){if(JSON.parse(localStorage.getItem("user")).uid){const r=this.database.doc(`person/${this.authService.userData.uid}`),i=JSON.parse(localStorage.getItem("user"));r.set({uid:i.uid,nickname:i.displayName,targetIntake:t},{merge:!0}),this.database.doc(`person/${this.authService.userData.uid}`).update({targetIntake:t}),this.database.doc(`users/${this.authService.userData.uid}`).update({targetIntake:t})}}addNewTeam(t){JSON.parse(localStorage.getItem("user")).uid&&this.database.collection("teams").add({teamName:t,ownerUid:this.authService.userData.uid}).then(r=>{this.database.collection("teamMembers").add({teamId:r.id,memberUid:this.authService.userData.uid,ownerUid:this.authService.userData.uid})})}getAllTeamsForUser(){if(JSON.parse(localStorage.getItem("user")).uid)return this.database.collection("teamMembers",t=>t.where("memberUid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamFromOwnerId(t){return console.log(t),this.database.collection("teams",r=>r.where("ownerUid","==",t)).valueChanges({idField:"eventId"})}getAllIntakesDocuments(){if(void 0!==localStorage.getItem("user"))return this.database.collection("intakes",t=>t.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges({idField:"eventId"})}getPersonConnectedInfos(){if(void 0!==localStorage.getItem("user"))return this.database.collection("person",t=>t.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamMembersWithTeamId(t){return this.database.collection("teamMembers",r=>r.where("teamId","==",t)).valueChanges()}getUserByUid(t){return this.database.collection("users",r=>r.where("uid","==",t)).valueChanges()}getAllIntakesDocumentsByUid(t){return this.database.collection("intakes",r=>r.where("uid","==",t)).valueChanges()}deleteIntake(t){this.database.doc("intakes/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(eO),u.LFG(kT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FQ=["*"],Y3=new u.OlP("MatChipRemove"),Q3=new u.OlP("MatChipAvatar"),J3=new u.OlP("MatChipTrailingIcon");class LQ{constructor(e){this._elementRef=e}}const VQ=wC(Au(bC(LQ),"primary"),-1);let BS=(()=>{class n extends VQ{constructor(t,r,i,s,c,h,p,y){super(t),this._ngZone=r,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new vt.x,this._onBlur=new vt.x,this.selectionChange=new u.vpe,this.destroyed=new u.vpe,this.removed=new u.vpe,this._addHostClassName(),this._chipRippleTarget=h.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new SC(this,r,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===p,this.tabIndex=null!=y&&parseInt(y)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const r=sr(t);r!==this._selected&&(this._selected=r,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=sr(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=sr(t)}get removable(){return this._removable}set removable(t){this._removable=sr(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",r=this._elementRef.nativeElement;r.hasAttribute(t)||r.tagName.toLowerCase()===t?r.classList.add(t):r.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled&&t.preventDefault()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Kr),u.Y36(DC,8),u.Y36(u.sBO),u.Y36(re),u.Y36(Lo,8),u.$8M("tabindex"))},n.\u0275dir=u.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Q3,5),u.Suo(i,J3,5),u.Suo(i,Y3,5)),2&t){let s;u.iGM(s=u.CRH())&&(r.avatar=s.first),u.iGM(s=u.CRH())&&(r.trailingIcon=s.first),u.iGM(s=u.CRH())&&(r.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&t&&(u.uIk("tabindex",r.disabled?null:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString())("aria-selected",r.ariaSelected),u.ekj("mat-chip-selected",r.selected)("mat-chip-with-avatar",r.avatar)("mat-chip-with-trailing-icon",r.trailingIcon||r.removeIcon)("mat-chip-disabled",r.disabled)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[u.qOj]}),n})(),X3=(()=>{class n{constructor(t,r){this._parentChip=t,"BUTTON"===r.nativeElement.nodeName&&r.nativeElement.setAttribute("type","button")}_handleClick(t){const r=this._parentChip;r.removable&&!r.disabled&&r.remove(),t.stopPropagation(),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(BS),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r._handleClick(s)})},features:[u._Bn([{provide:Y3,useExisting:n}])]}),n})();const eG=new u.OlP("mat-chips-default-options"),jQ=EC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let HQ=0;class GQ{constructor(e,t){this.source=e,this.value=t}}let tG=(()=>{class n extends jQ{constructor(t,r,i,s,c,h,p){super(h,s,c,p),this._elementRef=t,this._changeDetectorRef=r,this._dir=i,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new vt.x,this._uid="mat-chip-list-"+HQ++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(y,C)=>y===C,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new u.vpe,this.valueChange=new u.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var t,r;return this.multiple?(null==(t=this._selectionModel)?void 0:t.selected)||[]:null==(r=this._selectionModel)?void 0:r.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=sr(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(j_.required))&&s}set required(t){this._required=sr(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=sr(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=sr(t),this.chips&&this.chips.forEach(r=>r.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return(0,Bs.T)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return(0,Bs.T)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return(0,Bs.T)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return(0,Bs.T)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new Po(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(dr(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(dr(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Dr(null),dr(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new zm(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const r=t.target;r&&r.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,r=!0){if(this._clearSelection(),this.chips.forEach(i=>i.deselect()),Array.isArray(t))t.forEach(i=>this._selectValue(i,r)),this._sortValues();else{const i=this._selectValue(t,r);i&&r&&this._keyManager.setActiveItem(i)}}_selectValue(t,r=!0){const i=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,t));return i&&(r?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(r=>{r!==t&&r.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let r=null;r=Array.isArray(this.selected)?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.change.emit(new GQ(this,r)),this.valueChange.emit(r),this._onChange(r),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(r=>{!this._selectionModel.isSelected(r)&&r.selected&&r.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let r=this.chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&this._keyManager.updateActiveItem(r),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const r=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&r._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let r=t.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-chip"))return!0;r=r.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(wd,8),u.Y36(Rw,8),u.Y36(Jp,8),u.Y36(kg),u.Y36(Rc,10))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,BS,5),2&t){let s;u.iGM(s=u.CRH())&&(r.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,r){1&t&&u.NdJ("focus",function(){return r.focus()})("blur",function(){return r._blur()})("keydown",function(s){return r._keydown(s)}),2&t&&(u.Ikx("id",r._uid),u.uIk("tabindex",r.disabled?null:r._tabIndex)("aria-describedby",r._ariaDescribedby||null)("aria-required",r.role?r.required:null)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-multiselectable",r.multiple)("role",r.role)("aria-orientation",r.ariaOrientation),u.ekj("mat-chip-list-disabled",r.disabled)("mat-chip-list-invalid",r.errorState)("mat-chip-list-required",r.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[u._Bn([{provide:QT,useExisting:n}]),u.qOj],ngContentSelectors:FQ,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0),u.Hsn(1),u.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),WQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[kg,{provide:eG,useValue:{separatorKeyCodes:[13]}}],imports:[[hr]]}),n})();function qQ(n,e){1&n&&(u.TgZ(0,"div"),u.TgZ(1,"div",3),u._uU(2,"\u{1f914}"),u.qZA(),u.qZA())}function ZQ(n,e){if(1&n&&(u.TgZ(0,"div"),u.TgZ(1,"div",4),u.TgZ(2,"b"),u._uU(3),u.qZA(),u._uU(4," total calories"),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(3),u.Oqu(t.calculateTotalCalories())}}function KQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"mat-chip-list",5),u.TgZ(2,"mat-chip"),u._uU(3),u.TgZ(4,"button",6),u.TgZ(5,"mat-icon",7),u.NdJ("click",function(){const s=u.CHM(t).$implicit;return u.oxw().removeIntake(s)}),u._uU(6,"cancel"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(3),u.AsE(" ",t.titleIntake," | ",t.intakeValue," cal. ")}}let YQ=(()=>{class n{constructor(t,r){this.serviceIntake=t,this._snackBar=r,this.currentIntakes=[],this.totalIntakes=0}ngOnInit(){}calculateTotalCalories(){return this.totalIntakes=0,this.currentIntakes.length>0&&this.currentIntakes.forEach(t=>{this.totalIntakes+=t.intakeValue}),this.totalIntakes}removeIntake(t){this.serviceIntake.deleteIntake(t.eventId),this.confirmDelete(t)}confirmDelete(t){this._snackBar.openFromComponent(K3,{duration:5e3,data:{text:"\u26d4 "+t.titleIntake+" supprim\xe9 --\x3e "+t.intakeValue+" cal. retir\xe9s du total journalier."}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(VS),u.Y36(Z3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-intakes-history"]],inputs:{currentIntakes:"currentIntakes"},decls:6,vars:3,consts:[[1,"historiqueContainer"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"textVide"],[1,"totalCaloriesText"],["aria-label","Intakes"],["matChipRemove",""],[3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"h2"),u._uU(2,"Historique journalier"),u.qZA(),u.YNc(3,qQ,3,0,"div",1),u.YNc(4,ZQ,5,1,"div",1),u.YNc(5,KQ,7,2,"div",2),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngIf",0===r.currentIntakes.length),u.xp6(1),u.Q6J("ngIf",r.currentIntakes.length>0),u.xp6(1),u.Q6J("ngForOf",r.currentIntakes))},directives:[$r,vo,tG,BS,X3,Tw],styles:["h2[_ngcontent-%COMP%]{margin:20px 0}.textVide[_ngcontent-%COMP%]{font-size:25px}.totalCaloriesText[_ngcontent-%COMP%]{margin:10px 0 20px;font-size:18px}.historiqueContainer[_ngcontent-%COMP%]{margin:40px 0 0;padding:0 0 40px}"]}),n})();function QQ(n,e){1&n&&(u.TgZ(0,"h1"),u._uU(1,"OW ! STOP MANGER GROS PORC"),u.qZA())}function JQ(n,e){if(1&n&&(u.TgZ(0,"div",15),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("ngStyle",t.getSpinnerTextStyle()),u.xp6(1),u.AsE(" ",t.getTotalCurrentIntakesFromSelectedUser()," / ",null==t.selectedPerson?null:t.selectedPerson.targetIntake," ")}}function XQ(n,e){if(1&n&&(u.TgZ(0,"div",16),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("ngStyle",t.getSpinnerTextStyle()),u.xp6(1),u.hij(" ",t.getCurrentSmiley()," ")}}function e9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",1),u.TgZ(2,"div"),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"form",3),u.YNc(6,QQ,2,0,"h1",0),u.TgZ(7,"div",4),u._UZ(8,"mat-progress-spinner",5),u._UZ(9,"mat-progress-spinner",6),u.qZA(),u.YNc(10,JQ,2,3,"div",7),u.YNc(11,XQ,2,2,"div",8),u.TgZ(12,"mat-form-field",9),u.TgZ(13,"mat-label"),u._uU(14,"Titre de l'apport calorique"),u.qZA(),u._UZ(15,"input",10),u.TgZ(16,"button",11),u.NdJ("click",function(){return u.CHM(t),u.oxw().resetTitleIntake()}),u.TgZ(17,"mat-icon"),u._uU(18,"close"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"mat-form-field",9),u.TgZ(20,"mat-label"),u._uU(21,"Montant calorique"),u.qZA(),u._UZ(22,"input",12),u.TgZ(23,"button",11),u.NdJ("click",function(){return u.CHM(t),u.oxw().resetIntakeValue()}),u.TgZ(24,"mat-icon"),u._uU(25,"close"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"button",13),u.NdJ("click",function(){return u.CHM(t),u.oxw().ajouterApport()}),u._uU(27," Ajouter l'apport "),u.qZA(),u.qZA(),u._UZ(28,"app-intakes-history",14),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(3),u.Oqu(t.getSelectedPerson().displayName),u.xp6(2),u.Q6J("formGroup",t.intakeFormGroup),u.xp6(1),u.Q6J("ngIf",t.isOverMaxIntake()),u.xp6(2),u.Q6J("color","warn")("diameter",t.spinnerDiameter)("strokeWidth",14)("mode","determinate")("value",100),u.xp6(1),u.Q6J("color",t.getColorStateOfSpinner())("diameter",t.spinnerDiameter)("strokeWidth",15)("mode","determinate")("value",t.getSpinnerProgressValue()),u.xp6(1),u.Q6J("ngIf",t.getTargetIntakeOfSelectedUser()>0),u.xp6(1),u.Q6J("ngIf",0===t.getTargetIntakeOfSelectedUser()),u.xp6(17),u.Q6J("currentIntakes",t.selectedUserIntakes)}}function t9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",17),u.TgZ(2,"p",18),u._uU(3,"Il semblerait que vous n'ayez pas d'objectif calorique journalier ..."),u.qZA(),u.TgZ(4,"div",19),u._uU(5,"\u{1f914}"),u.qZA(),u.TgZ(6,"p",20),u._uU(7,"Fixez-vous en un pour commencer \xe0 utiliser le tracker !"),u.qZA(),u.TgZ(8,"form",3),u.TgZ(9,"mat-form-field",9),u.TgZ(10,"mat-label"),u._uU(11,"Objectif calorique journalier"),u.qZA(),u._UZ(12,"input",21),u.qZA(),u.TgZ(13,"button",22),u.NdJ("click",function(){return u.CHM(t),u.oxw().ajouterObjectif()}),u._uU(14," Confirmer cet objectif (YOLO) "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(8),u.Q6J("formGroup",t.targetIntakeSetupFormGroup)}}let n9=(()=>{class n{constructor(t,r,i){var s,c;this._snackbar=i,this.selectedPerson=void 0,this.lastPersonSelected=void 0,this.currentIntakeValue=1200,this.maxIntakeForTheDay=1300,this.spinnerDiameter=250,this.items=[],this.itemForSelectedUser={nickname:"",currentIntake:"",targetIntake:""},this.selectedUserIntakes=[],this.sportiveSmileyAnimation=["\u{1f975}","\u{1f919}","\u{1f957}","\u{1f346}","\u{1f34c}","\u{1f345}","\u{1f680}","\u{1f3c6}","\u{1f947}","\u{1f6bf}","\u{1f373}","\u{1f3c3}","\u{1f938}"],this.indexRandomIcon=0,this.emojiSubscription=new Zi.w0,this.intakeFormGroup=new G_({titleIntake:new wh("",j_.minLength(1)),intakeValue:new wh("",j_.min(1))}),this.targetIntakeSetupFormGroup=new G_({targetIntake:new wh("",j_.minLength(1))}),this.serviceIntake=r,null===(s=this.serviceIntake.getAllIntakesDocuments())||void 0===s||s.subscribe(h=>{this.items=h}),null===(c=this.serviceIntake.getPersonConnectedInfos())||void 0===c||c.subscribe(h=>{this.selectedPerson=h.length>0?h[0]:{displayName:"",targetIntake:0}})}ngOnInit(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0});const t=function(n=0,e=pc.z){return n<0&&(n=0),Pg(n,n,e)}(2e3);this.emojiSubscription=t.subscribe(r=>{this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1)}),this.setIntakesFromSelectedUser()}resetTitleIntake(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{titleIntake:""}))}resetIntakeValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{intakeValue:void 0}))}resetAllForm(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0}),this.targetIntakeSetupFormGroup.reset({targetIntake:void 0})}getSpinnerProgressValue(){var t;return this.selectedPerson?this.getTotalCurrentIntakesFromSelectedUser()/(null===(t=this.selectedPerson)||void 0===t?void 0:t.targetIntake)*100:0}getColorStateOfSpinner(){return this.isOverMaxIntake()?"warn":"primary"}getSpinnerTextStyle(){return{"margin-top":"-"+(this.spinnerDiameter/2+16)+"px","padding-bottom":this.spinnerDiameter/2+26+"px"}}isOverMaxIntake(){return this.getTotalCurrentIntakesFromSelectedUser()>this.maxIntakeForTheDay}ajouterApport(){this.intakeFormGroup.value.intakeValue&&this.intakeFormGroup.value.titleIntake&&(this.serviceIntake.addIntakes(this.itemForSelectedUser.nickname,this.intakeFormGroup.value.intakeValue,this.intakeFormGroup.value.titleIntake),this.setItemsForSelectedUser(),this._snackbar.openFromComponent(K3,{duration:5e3,data:{text:"\u{1f374} "+this.intakeFormGroup.value.titleIntake+" ajout\xe9 --\x3e "+this.intakeFormGroup.value.intakeValue+" cal. ajout\xe9s au total journalier."}}),this.resetAllForm())}ajouterObjectif(){this.targetIntakeSetupFormGroup.value.targetIntake&&(this.serviceIntake.addTargetIntake(this.targetIntakeSetupFormGroup.value.targetIntake),this.setItemsForSelectedUser(),this.resetAllForm())}getTotalCurrentIntakesFromSelectedUser(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.intakeValue}),t}getSelectedPerson(){return JSON.parse(localStorage.getItem("user"))||{}}getTargetIntakeOfSelectedUser(){var t;return(null===(t=this.selectedPerson)||void 0===t?void 0:t.targetIntake)?this.selectedPerson.targetIntake:0}isUserLoggedAndWithoutTargetIntake(){return!!this.selectedPerson&&(void 0===this.selectedPerson.targetIntake||this.selectedPerson.targetIntake<=0)}getSmileyAnimation(){return this.sportiveSmileyAnimation[this.indexRandomIcon]}getCurrentSmiley(){return this.getSmileyAnimation()}setIntakesFromSelectedUser(){this.serviceIntake.getAllIntakesDocuments().subscribe(t=>{this.selectedUserIntakes=[],t.forEach(r=>{r.dateFormatted=r.date.toDate(),r.dateFormatted.getDate()===(new Date).getDate()&&r.dateFormatted.getMonth()===(new Date).getMonth()&&r.dateFormatted.getFullYear()===(new Date).getFullYear()&&this.selectedUserIntakes.push(r)})})}setItemsForSelectedUser(){this.items.forEach(t=>{t.nickname===this.selectedPerson&&(this.itemForSelectedUser=t)}),this.setIntakesFromSelectedUser()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(eO),u.Y36(VS),u.Y36(Z3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"selectionButtonContainer"],[1,"formIntake"],[3,"formGroup"],[1,"spinnerContainer"],[1,"progressSpinnerBackground",3,"color","diameter","strokeWidth","mode","value"],[1,"progressSpinner",3,"color","diameter","strokeWidth","mode","value"],["class","textInSpinner",3,"ngStyle",4,"ngIf"],["class","textInSpinnerNotSelected",3,"ngStyle",4,"ngIf"],["appearance","standard"],["matInput","","type","text","formControlName","titleIntake"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","number","formControlName","intakeValue"],["mat-raised-button","","aria-label","Ajouter cet apport",3,"click"],[3,"currentIntakes"],[1,"textInSpinner",3,"ngStyle"],[1,"textInSpinnerNotSelected",3,"ngStyle"],[1,"setTargetIntakeContainer"],[2,"font-size","20px"],[1,"textVide",2,"padding","20px 0 50px 0"],[2,"font-size","15px"],["matInput","","type","number","formControlName","targetIntake"],["mat-raised-button","","aria-label","Confirmer cet objectif (YOLO)",3,"click"]],template:function(t,r){1&t&&(u.YNc(0,e9,29,16,"div",0),u.YNc(1,t9,15,1,"div",0)),2&t&&(u.Q6J("ngIf",!r.isUserLoggedAndWithoutTargetIntake()),u.xp6(1),u.Q6J("ngIf",r.isUserLoggedAndWithoutTargetIntake()))},directives:[$r,AO,yO,Jp,Gu,sj,JT,oj,Sw,_O,KT,Kp,A5,Tw,MO,YQ,yi],styles:["@keyframes circleAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.formIntake[_ngcontent-%COMP%]{margin:auto;width:min-content;text-align:center}.formIntake[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.spinnerContainer[_ngcontent-%COMP%]{margin:35px 0 10px}.textInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center}.textInSpinnerNotSelected[_ngcontent-%COMP%]{margin:auto;width:80%;font-size:50px;text-align:center}.topButton[_ngcontent-%COMP%]{margin:10px}.progressSpinnerBackground[_ngcontent-%COMP%]{animation:circleAnimation linear 30s infinite;position:absolute}.selectionButtonContainer[_ngcontent-%COMP%]{margin:15px 0 2px;text-align:center;font-size:20px}  .spinnerContainer>.progressSpinnerBackground>svg>.mat-progress-spinner.mat-warn circle,   .mat-spinner.mat-warn circle{stroke:#0000004d;stroke-dasharray:17.9!important;overflow-x:hidden}.setTargetIntakeContainer[_ngcontent-%COMP%]{text-align:center;margin:auto;width:80vw}.setTargetIntakeContainer[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){padding:10px 0}.textVide[_ngcontent-%COMP%]{font-size:40px}"]}),n})();const r9=["*",[["mat-card-footer"]]],i9=["*","mat-card-footer"],s9=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],o9=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let a9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),l9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),c9=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),u9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),d9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),h9=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Lo,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:i9,decls:2,vars:0,template:function(t,r){1&t&&(u.F$t(r9),u.Hsn(0),u.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),f9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:o9,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,r){1&t&&(u.F$t(s9),u.Hsn(0),u.TgZ(1,"div",0),u.Hsn(2,1),u.qZA(),u.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),p9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hr],hr]}),n})();function m9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u._uU(1," Il semblerait que vous ne soyez dans aucune \xe9quipe. "),u._UZ(2,"br"),u._uU(3," Vous pouvez cr\xe9er la votre si vous le souhaitez "),u.TgZ(4,"form",2),u.TgZ(5,"mat-form-field",3),u.TgZ(6,"mat-label"),u._uU(7,"Nom de l'\xe9quipe"),u.qZA(),u._UZ(8,"input",4),u.qZA(),u.TgZ(9,"button",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().ajouterEquipe()}),u._uU(10," Cr\xe9er l'\xe9quipe "),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(4),u.Q6J("formGroup",t.createTeamFormGroup)}}const g9=function(n){return[n]};function _9(n,e){if(1&n&&(u.TgZ(0,"div"),u.TgZ(1,"mat-card"),u.TgZ(2,"mat-card-header"),u._UZ(3,"div",8),u.TgZ(4,"mat-card-title"),u._uU(5),u.qZA(),u.TgZ(6,"mat-card-subtitle"),u._uU(7,":("),u.qZA(),u.qZA(),u._UZ(8,"img",9),u.TgZ(9,"mat-card-actions"),u.TgZ(10,"button",10),u._uU(11,"Membres"),u.qZA(),u.TgZ(12,"button",11),u._uU(13,"Modifier"),u.qZA(),u.qZA(),u.qZA(),u._UZ(14,"div",12),u.qZA()),2&n){const t=e.$implicit;u.xp6(5),u.Oqu(t.teamName),u.xp6(5),u.Q6J("routerLink",u.VKq(4,g9,t.eventId))("color","primary"),u.xp6(2),u.Q6J("disabled",!0)}}function y9(n,e){if(1&n&&(u.TgZ(0,"div"),u.TgZ(1,"h2"),u._uU(2,"Vos \xe9quipes"),u.qZA(),u.TgZ(3,"div",6),u.TgZ(4,"i"),u._uU(5,"C'est toujours mieux d'avancer ensemble"),u.qZA(),u.qZA(),u.YNc(6,_9,15,6,"div",7),u.qZA()),2&n){const t=u.oxw();u.xp6(6),u.Q6J("ngForOf",t.teams)}}let v9=(()=>{class n{constructor(t){this.serviceIntakes=t,this.userTeams=void 0,this.teams=[],this.createTeamFormGroup=new G_({teamName:new wh("",j_.minLength(1))})}ngOnInit(){this.getTeamsFromConnectedUser()}resetAllForms(){this.createTeamFormGroup.reset({teamName:""})}ajouterEquipe(){this.createTeamFormGroup.invalid||(this.serviceIntakes.addNewTeam(this.createTeamFormGroup.value.teamName),this.getTeamsFromConnectedUser(),this.resetAllForms())}getTeamsFromConnectedUser(){var t;null===(t=this.serviceIntakes.getAllTeamsForUser())||void 0===t||t.subscribe(r=>{r.forEach(i=>{var s;null===(s=this.serviceIntakes.getTeamFromOwnerId(i.ownerUid))||void 0===s||s.subscribe(c=>{this.teams=c})}),this.userTeams=r})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(VS))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"teamTrackerContainer"],[4,"ngIf"],[3,"formGroup"],["appearance","standard"],["matInput","","type","text","formControlName","teamName"],["mat-raised-button","","aria-label","Cr\xe9er l'\xe9quipe",3,"click"],[1,"subtitleTeam"],[4,"ngFor","ngForOf"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","src","https://www.signupgenius.com/images/new-landing/sports/get-started-background.jpg","alt","Happy smiling team"],["mat-raised-button","",3,"routerLink","color"],["mat-button","",3,"disabled"],[1,"card-separator"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,m9,11,1,"div",1),u.YNc(2,y9,7,1,"div",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",void 0!==r.userTeams&&0===r.userTeams.length),u.xp6(1),u.Q6J("ngIf",r.teams.length>0))},directives:[$r,AO,yO,Jp,sj,JT,oj,Sw,_O,KT,Kp,vo,h9,f9,d9,a9,l9,u9,c9,yd],styles:[".teamTrackerContainer[_ngcontent-%COMP%]{margin:auto}.card-separator[_ngcontent-%COMP%]{width:100%;height:30px}h2[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{width:80vw;margin:auto}.subtitleTeam[_ngcontent-%COMP%]{width:100vw;text-align:center;margin-bottom:10px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://i1.sndcdn.com/artworks-BUOQ4gYsZfCCcg4I-YocETQ-t500x500.jpg);background-size:cover}"]}),n})();const b9=["primaryValueBar"],w9=Au(class{constructor(n){this._elementRef=n}},"primary"),E9=new u.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const n=(0,u.f3M)(re),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),I9=new u.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let T9=0,S9=(()=>{class n extends w9{constructor(t,r,i,s,c,h){super(t),this._ngZone=r,this._animationMode=i,this._changeDetectorRef=h,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new u.vpe,this._animationEndSubscription=Zi.w0.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+T9++;const p=s?s.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${p}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===i,c&&(c.color&&(this.color=this.defaultColor=c.color),this.mode=c.mode||this.mode)}get value(){return this._value}set value(t){var r;this._value=nG(Zr(t)||0),null==(r=this._changeDetectorRef)||r.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(t){var r;this._bufferValue=nG(t||0),null==(r=this._changeDetectorRef)||r.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=Ma(t,"transitionend").pipe(cn(r=>r.target===t)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Lo,8),u.Y36(E9,8),u.Y36(I9,8),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(t,r){if(1&t&&u.Gf(b9,5),2&t){let i;u.iGM(i=u.CRH())&&(r._primaryValueBar=i.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,r){2&t&&(u.uIk("aria-valuenow","indeterminate"===r.mode||"query"===r.mode?null:r.value)("mode",r.mode),u.ekj("_mat-animation-noopable",r._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[u.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.O4$(),u.TgZ(1,"svg",1),u.TgZ(2,"defs"),u.TgZ(3,"pattern",2),u._UZ(4,"circle",3),u.qZA(),u.qZA(),u._UZ(5,"rect",4),u.qZA(),u.kcU(),u._UZ(6,"div",5),u._UZ(7,"div",6,7),u._UZ(9,"div",8),u.qZA()),2&t&&(u.xp6(3),u.Q6J("id",r.progressbarId),u.xp6(2),u.uIk("fill",r._rectangleFillValue),u.xp6(1),u.Q6J("ngStyle",r._bufferTransform()),u.xp6(1),u.Q6J("ngStyle",r._primaryTransform()))},directives:[yi],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),n})();function nG(n,e=0,t=100){return Math.max(e,Math.min(t,n))}let D9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nr,hr],hr]}),n})();function A9(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"mat-progress-bar",6),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw();u.xp6(1),u.Q6J("value",r.getValueForUser(t))}}function M9(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"mat-progress-bar",7),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw();u.xp6(1),u.Q6J("value",r.getValueForUser(t))("color","warn")}}function x9(n,e){if(1&n&&(u.TgZ(0,"div"),u.TgZ(1,"h3"),u._uU(2),u.qZA(),u.YNc(3,A9,2,1,"div",4),u.YNc(4,M9,2,2,"div",4),u.TgZ(5,"div",5),u._uU(6),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();u.xp6(2),u.Oqu(t.displayName),u.xp6(1),u.Q6J("ngIf",r.getValueForUser(t)<=100),u.xp6(1),u.Q6J("ngIf",r.getValueForUser(t)>100),u.xp6(2),u.AsE(" ",r.getTotalCurrentIntakesFromSelectedUser(t.intakes)," / ",t.targetIntake," ")}}let k9=(()=>{class n{constructor(t,r){this.serviceIntake=t,this.route=r,this.teamId=void 0,this.teamMembers=[]}ngOnInit(){this.teamId=this.route.snapshot.paramMap.get("id"),this.serviceIntake.getTeamMembersWithTeamId(this.teamId).subscribe(t=>{t.forEach(r=>{this.serviceIntake.getUserByUid(r.memberUid).subscribe(i=>{const s=i[0];this.serviceIntake.getAllIntakesDocumentsByUid(r.memberUid).subscribe(c=>{const h=[];c.forEach(y=>{y.dateFormatted=y.date.toDate(),y.dateFormatted.getDate()===(new Date).getDate()&&y.dateFormatted.getMonth()===(new Date).getMonth()&&y.dateFormatted.getFullYear()===(new Date).getFullYear()&&h.push(y)});let p=-1;for(let y=0;y<this.teamMembers.length;y++)this.teamMembers[y].uid===s.uid&&(p=y);-1!==p?this.teamMembers[p]=Object.assign(Object.assign({},s),{intakes:h}):this.teamMembers.push(Object.assign(Object.assign({},s),{intakes:h}))})})})})}getTotalCurrentIntakesFromSelectedUser(t){if(t){let r=0;return t.forEach(i=>{r+=i.intakeValue}),r}return 0}getValueForUser(t){return this.getTotalCurrentIntakesFromSelectedUser(t.intakes)/t.targetIntake*100}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(VS),u.Y36(_a))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-team-tracker-progress"]],decls:10,vars:2,consts:[[1,"goBackArrow"],["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"routerLink"],[1,"membersContainer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"membersContainer","statusBarNumber"],["mode","determinate",3,"value"],["mode","determinate",3,"value","color"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"button",1),u.TgZ(2,"mat-icon"),u._uU(3," keyboard_arrow_left "),u.qZA(),u.TgZ(4,"mat-icon"),u._uU(5," keyboard_arrow_left "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",2),u.TgZ(7,"h2"),u._uU(8,"Progression de l'\xe9quipe"),u.qZA(),u.YNc(9,x9,7,5,"div",3),u.qZA()),2&t&&(u.xp6(1),u.Q6J("routerLink","/teamTracking"),u.xp6(8),u.Q6J("ngForOf",r.teamMembers))},directives:[Kp,yd,Tw,vo,$r,S9],styles:[".goBackArrow[_ngcontent-%COMP%]{position:absolute}mat-icon[_ngcontent-%COMP%]{width:10px}.membersContainer[_ngcontent-%COMP%]{width:95vw;margin:auto}h2[_ngcontent-%COMP%]{text-align:center}h3[_ngcontent-%COMP%]{margin:0}.statusBarNumber[_ngcontent-%COMP%]{text-align:right}"]}),n})(),R9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nr,bd.forChild([{path:"tracker",component:n9,canActivate:[RT]},{path:"teamTracking",component:v9,canActivate:[RT]},{path:"teamTracking/:id",component:k9,canActivate:[RT]}]),lj,FO,fO,WQ,t5,n5,za,qU,Dv,sO,aj,fO,p9,D9]]}),n})();const O9=[{path:"authentication",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}connectWithGoogle(){this.authService.signInWithGoogle()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kT))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-authentication"]],decls:2,vars:0,consts:[["mat-button","",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"a",0),u.NdJ("click",function(){return r.connectWithGoogle()}),u._uU(1,"Connect with GOOGLE"),u.qZA())},directives:[OU],styles:[""]}),n})()},{path:"",redirectTo:"tracker",pathMatch:"full"},{path:"**",component:tQ}];let N9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[cZ]}),n.\u0275inj=u.cJS({providers:[kT],imports:[[za,qU,gf,Dv,aj,fO,sO,eZ,lj,CM.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),Ni.hO.initializeApp({apiKey:"AIzaSyDwY0ustgrbdUrkt0FXwseq89vcH_zirJo",authDomain:"personnaltrack.firebaseapp.com",projectId:"personnaltrack",storageBucket:"personnaltrack.appspot.com",messagingSenderId:"588509586658",appId:"1:588509586658:web:334cb1ed45319ff2592abb",measurementId:"G-G9PZNFDF99"}),eQ,w8,$d,bd.forRoot(O9),rQ,R9,W3]]}),n})();(0,u.G48)(),Ul().bootstrapModule(N9).catch(n=>console.error(n))},9162:(st,Ce,P)=>{function ce(K,ne,fe,ve){return new(fe||(fe=Promise))(function(ue,Et){function zt(Kt){try{Ct(ve.next(Kt))}catch(Ft){Et(Ft)}}function er(Kt){try{Ct(ve.throw(Kt))}catch(Ft){Et(Ft)}}function Ct(Kt){Kt.done?ue(Kt.value):function(ue){return ue instanceof fe?ue:new fe(function(Et){Et(ue)})}(Kt.value).then(zt,er)}Ct((ve=ve.apply(K,ne||[])).next())})}function Ue(K){return this instanceof Ue?(this.v=K,this):new Ue(K)}function se(K,ne,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ve=fe.apply(K,ne||[]),ue=[];return Oe={},Et("next"),Et("throw"),Et("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Et(dn){ve[dn]&&(Oe[dn]=function(Er){return new Promise(function(Xr,nn){ue.push([dn,Er,Xr,nn])>1||zt(dn,Er)})})}function zt(dn,Er){try{!function(dn){dn.value instanceof Ue?Promise.resolve(dn.value.v).then(Ct,Kt):Ft(ue[0][2],dn)}(ve[dn](Er))}catch(Xr){Ft(ue[0][3],Xr)}}function Ct(dn){zt("next",dn)}function Kt(dn){zt("throw",dn)}function Ft(dn,Er){dn(Er),ue.shift(),ue.length&&zt(ue[0][0],ue[0][1])}}function Be(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ne=K[Symbol.asyncIterator];return ne?ne.call(K):(K=function(K){var ne="function"==typeof Symbol&&Symbol.iterator,fe=ne&&K[ne],ve=0;if(fe)return fe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ve>=K.length&&(K=void 0),{value:K&&K[ve++],done:!K}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),fe={},ve("next"),ve("throw"),ve("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ve(ue){fe[ue]=K[ue]&&function(Et){return new Promise(function(zt,er){!function(ue,Et,zt,er){Promise.resolve(er).then(function(Ct){ue({value:Ct,done:zt})},Et)}(zt,er,(Et=K[ue](Et)).done,Et.value)})}}}P.d(Ce,{mG:()=>ce,qq:()=>Ue,FC:()=>se,KL:()=>Be})},3668:(st,Ce,P)=>{P.d(Ce,{deG:()=>so,tb:()=>Yv,AFp:()=>Fi,ip1:()=>Yd,CZH:()=>ku,hGG:()=>Eb,z2F:()=>Ru,sBO:()=>lb,Sil:()=>Zg,_Vd:()=>Gd,EJc:()=>sI,SBq:()=>rp,qLn:()=>ff,vpe:()=>pl,tBr:()=>vr,XFs:()=>bt,OlP:()=>Bn,zs3:()=>No,ZZ4:()=>pp,aQg:()=>Ou,soG:()=>Qd,YKP:()=>Pg,h0i:()=>zd,PXZ:()=>cI,R0b:()=>rs,FiY:()=>mn,Lbi:()=>qg,g9A:()=>Kv,n_E:()=>sp,Qsj:()=>fM,FYo:()=>kv,JOm:()=>ba,q3G:()=>ir,tp0:()=>bi,Rgc:()=>Mu,dDg:()=>lI,q4F:()=>Rv,GfV:()=>Ma,s_b:()=>jg,ifc:()=>lt,eFA:()=>dI,G48:()=>pI,Gpc:()=>q,f3M:()=>Le,X6Q:()=>ox,_c5:()=>mp,VLi:()=>rx,c2e:()=>Qv,zSh:()=>Q0,wAp:()=>Mt,vHH:()=>$e,EiD:()=>md,mCW:()=>sl,qzn:()=>lc,JVY:()=>rl,pB0:()=>hy,eBb:()=>Cm,L6k:()=>rf,LAX:()=>sf,cg1:()=>Yf,kL8:()=>Qf,yhl:()=>uu,dqk:()=>At,sIi:()=>tg,CqO:()=>SE,QGY:()=>hl,F4k:()=>Fd,RDi:()=>Vh,AaK:()=>ce,z3N:()=>ko,qOj:()=>Wy,TTD:()=>zo,_Bn:()=>RC,xp6:()=>Ed,uIk:()=>Zy,ekj:()=>Wf,Suo:()=>NM,Xpm:()=>Ot,lG2:()=>Ke,Yz7:()=>nn,cJS:()=>Un,oAB:()=>J,Yjl:()=>Bt,Y36:()=>_c,_UZ:()=>IE,GkF:()=>cv,BQk:()=>ug,ynx:()=>Sa,qZA:()=>Pd,TgZ:()=>Vf,EpF:()=>Fo,n5z:()=>Ya,Ikx:()=>Ig,LFG:()=>G,$8M:()=>Vn,$Z:()=>Ff,NdJ:()=>Uf,CRH:()=>PM,kcU:()=>gm,O4$:()=>$l,oxw:()=>AE,Hsn:()=>bs,F$t:()=>uv,Q6J:()=>cg,DdM:()=>Vv,VKq:()=>Bv,iGM:()=>RM,MAs:()=>Od,CHM:()=>ks,LSH:()=>m,Udp:()=>Bd,WFA:()=>dg,d8E:()=>Iv,YNc:()=>Qy,_uU:()=>$E,Oqu:()=>vg,hij:()=>Zf,AsE:()=>_v,Gf:()=>OM});var u=P(273),j=P(7908),N=P(8305),oe=P(3719),he=P(3174);function we(o){for(let a in o)if(o[a]===we)return a;throw Error("Could not find renamed property on target object.")}function re(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function ce(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ce).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ge(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=we({__forward_ref__:we});function q(o){return o.__forward_ref__=q,o.toString=function(){return ce(this())},o}function ae(o){return We(o)?o():o}function We(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===q}class $e extends Error{constructor(a,l){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,l)),this.code=a}}function se(o){return"string"==typeof o?o:null==o?"":String(o)}function Se(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():se(o)}function Fe(o,a){const l=a?` in ${a}`:"";throw new $e("201",`No provider for ${Se(o)} found${l}`)}function Kt(o,a){null==o&&function(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function nn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Un(o){return{providers:o.providers||[],imports:o.imports||[]}}function ei(o){return _n(o,ni)||_n(o,ar)}function _n(o,a){return o.hasOwnProperty(a)?o[a]:null}function ti(o){return o&&(o.hasOwnProperty(Ne)||o.hasOwnProperty(Cr))?o[Ne]:null}const ni=we({\u0275prov:we}),Ne=we({\u0275inj:we}),ar=we({ngInjectableDef:we}),Cr=we({ngInjectorDef:we});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let en;function lr(o){const a=en;return en=o,a}function cr(o,a,l){const d=ei(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&bt.Optional?null:void 0!==a?a:void Fe(ce(o),"Injector")}function Wn(o){return{toString:o}.toString()}var vn=(()=>((vn=vn||{})[vn.OnPush=0]="OnPush",vn[vn.Default=1]="Default",vn))(),lt=(()=>{return(o=lt||(lt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",lt;var o})();const pt="undefined"!=typeof globalThis&&globalThis,ls="undefined"!=typeof window&&window,gi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At=pt||"undefined"!=typeof global&&global||ls||gi,W={},H=[],Q=we({\u0275cmp:we}),Ee=we({\u0275dir:we}),$=we({\u0275pipe:we}),ie=we({\u0275mod:we}),ke=we({\u0275fac:we}),it=we({__NG_ELEMENT_ID__:we});let xt=0;function Ot(o){return Wn(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||H,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||lt.Emulated,id:"c",styles:o.styles||H,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,g=o.features,v=o.pipes;return d.id+=xt++,d.inputs=De(o.inputs,l),d.outputs=De(o.outputs),g&&g.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Nt):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(Ir):null,d})}function Nt(o){return gt(o)||function(o){return o[Ee]||null}(o)}function Ir(o){return function(o){return o[$]||null}(o)}const de={};function J(o){return Wn(()=>{const a={type:o.type,bootstrap:o.bootstrap||H,declarations:o.declarations||H,imports:o.imports||H,exports:o.exports||H,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(de[o.id]=o.type),a})}function De(o,a){if(null==o)return W;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=d,a&&(a[f]=g)}return l}const Ke=Ot;function Bt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function gt(o){return o[Q]||null}function bn(o,a){const l=o[ie]||null;if(!l&&!0===a)throw new Error(`Type ${ce(o)} does not have '\u0275mod' property.`);return l}function Di(o){return Array.isArray(o)&&"object"==typeof o[1]}function us(o){return Array.isArray(o)&&!0===o[1]}function Oh(o){return 0!=(8&o.flags)}function Kn(o){return 2==(2&o.flags)}function Tl(o){return 1==(1&o.flags)}function yi(o){return null!==o.template}function Zu(o){return 0!=(512&o[2])}function Qs(o,a){return o.hasOwnProperty(ke)?o[ke]:null}class Ga{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function zo(){return Sl}function Sl(o){return o.type.prototype.ngOnChanges&&(o.setInput=Nr),Dl}function Dl(){const o=wo(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===W)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Nr(o,a,l,d){const f=wo(o)||function(o,a){return o[Al]=a}(o,{previous:W,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[l],I=v[E];g[E]=new Ga(I&&I.currentValue,a,v===W),o[d]=a}zo.ngInherit=!0;const Al="__ngSimpleChanges__";function wo(o){return o[Al]||null}const Ml="http://www.w3.org/2000/svg";let Wo;function Vh(o){Wo=o}function tn(o){return!!o.listen}const Wc={createRenderer:(o,a)=>void 0!==Wo?Wo:"undefined"!=typeof document?document:void 0};function Ln(o){for(;Array.isArray(o);)o=o[0];return o}function ri(o,a){return Ln(a[o])}function ur(o,a){return Ln(a[o.index])}function qo(o,a){return o.data[a]}function pn(o,a){const l=a[o];return Di(l)?l:l[0]}function Rl(o){return 4==(4&o[2])}function ds(o){return 128==(128&o[2])}function Pr(o,a){return null==a?null:o[a]}function Nl(o){o[18]=0}function Io(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const wt={lFrame:qa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yo(){return wt.bindingsEnabled}function Re(){return wt.lFrame.lView}function Qt(){return wt.lFrame.tView}function ks(o){return wt.lFrame.contextLView=o,o[8]}function Yn(){let o=Qo();for(;null!==o&&64===o.type;)o=o.parent;return o}function Qo(){return wt.lFrame.currentTNode}function zr(o,a){const l=wt.lFrame;l.currentTNode=o,l.isParent=a}function $a(){return wt.lFrame.isParent}function Jo(){wt.lFrame.isParent=!1}function Xo(){return wt.isInCheckNoChangesMode}function ea(o){wt.isInCheckNoChangesMode=o}function Sr(){const o=wt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ta(){return wt.lFrame.bindingIndex++}function Mi(o){const a=wt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function na(o,a){const l=wt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Xs(a)}function Xs(o){wt.lFrame.currentDirectiveIndex=o}function Ul(o){const a=wt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function ra(){return wt.lFrame.currentQueryIndex}function za(o){wt.lFrame.currentQueryIndex=o}function jl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function nd(o,a,l){if(l&bt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&bt.Host||(f=jl(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=wt.lFrame=Hl();return d.currentTNode=a,d.lView=o,!0}function Wa(o){const a=Hl(),l=o[1];wt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Hl(){const o=wt.lFrame,a=null===o?null:o.child;return null===a?qa(o):a}function qa(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Yc(){const o=wt.lFrame;return wt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Gl=Yc;function Qc(){const o=Yc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function jn(){return wt.lFrame.selectedIndex}function ps(o){wt.lFrame.selectedIndex=o}function Hn(){const o=wt.lFrame;return qo(o.tView,o.selectedIndex)}function $l(){wt.lFrame.currentNamespace=Ml}function gm(){wt.lFrame.currentNamespace=null}function ia(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),E&&((o.contentHooks||(o.contentHooks=[])).push(l,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,E)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),A&&((o.viewHooks||(o.viewHooks=[])).push(l,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,A)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(l,x)}}function sa(o,a,l){Bh(o,a,3,l)}function eu(o,a,l,d){(3&o[2])===l&&Bh(o,a,l,d)}function Wl(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Bh(o,a,l,d){const g=null!=d?d:-1,v=a.length-1;let E=0;for(let I=void 0!==d?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(o[18]+=65536),(E<g||-1==g)&&(ql(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function ql(o,a,l,d){const f=l[d]<0,g=l[d+1],E=o[f?-l[d]:l[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class So{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function xn(o,a,l){const d=tn(o);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const v=l[f++],E=l[f++],I=l[f++];d?o.setAttribute(a,E,I,v):a.setAttributeNS(v,E,I)}else{const v=g,E=l[++f];et(v)?d&&o.setProperty(a,v,E):d?o.setAttribute(a,v,E):a.setAttribute(v,E),f++}}return f}function to(o){return 3===o||4===o||6===o}function et(o){return 64===o.charCodeAt(0)}function vt(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||Fr(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function Fr(o,a,l,d,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const E=o[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<o.length;){const E=o[g];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function Gn(o){return-1!==o}function aa(o){return 32767&o}function Ka(o,a){let l=function(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let Zl=!0;function Kl(o){const a=Zl;return Zl=o,a}let nu=0;function Do(o,a){const l=kn(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Yl(d.data,o),Yl(a,null),Yl(d.blueprint,null));const f=la(o,a),g=o.injectorIndex;if(Gn(f)){const v=aa(f),E=Ka(f,a),I=E[1].data;for(let A=0;A<8;A++)a[g+A]=E[v+A]|I[v+A]}return a[g+8]=f,g}function Yl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function kn(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function la(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const g=f[1],v=g.type;if(d=2===v?g.declTNode:1===v?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Rs(o,a,l){!function(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(it)&&(d=l[it]),null==d&&(d=l[it]=nu++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function si(o,a,l){if(l&bt.Optional)return o;Fe(a,"NodeInjector")}function Ql(o,a,l,d){if(l&bt.Optional&&void 0===d&&(d=null),0==(l&(bt.Self|bt.Host))){const f=o[9],g=lr(void 0);try{return f?f.get(a,d,l&bt.Optional):cr(a,d,l&bt.Optional)}finally{lr(g)}}return si(d,a,l)}function ca(o,a,l,d=bt.Default,f){if(null!==o){const g=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(it)?o[it]:void 0;return"number"==typeof a?a>=0?255&a:od:a}(l);if("function"==typeof g){if(!nd(a,o,d))return d&bt.Host?si(f,l,d):Ql(a,l,d,f);try{const v=g(d);if(null!=v||d&bt.Optional)return v;Fe(l)}finally{Gl()}}else if("number"==typeof g){let v=null,E=kn(o,a),I=-1,A=d&bt.Host?a[16][6]:null;for((-1===E||d&bt.SkipSelf)&&(I=-1===E?la(o,a):a[E+8],-1!==I&&rr(d,!1)?(v=a[1],E=aa(I),a=Ka(I,a)):E=-1);-1!==E;){const x=a[1];if(Zi(g,E,x.data)){const V=ua(E,a,l,v,d,A);if(V!==no)return V}I=a[E+8],-1!==I&&rr(d,a[1].data[E+8]===A)&&Zi(g,E,a)?(v=x,E=aa(I),a=Ka(I,a)):E=-1}}}return Ql(a,l,d,f)}const no={};function od(){return new Ki(Yn(),Re())}function ua(o,a,l,d,f,g){const v=a[1],E=v.data[o+8],x=Lr(E,v,l,null==d?Kn(E)&&Zl:d!=v&&0!=(3&E.type),f&bt.Host&&g===E);return null!==x?Os(a,v,x,E):no}function Lr(o,a,l,d,f){const g=o.providerIndexes,v=a.data,E=1048575&g,I=o.directiveStart,x=g>>20,Z=f?E+x:o.directiveEnd;for(let te=d?E:E+x;te<Z;te++){const ye=v[te];if(te<I&&l===ye||te>=I&&ye.type===l)return te}if(f){const te=v[I];if(te&&yi(te)&&te.type===l)return I}return null}function Os(o,a,l,d){let f=o[l];const g=a.data;if(function(o){return o instanceof So}(f)){const v=f;v.resolving&&function(o,a){throw new $e("200",`Circular dependency in DI detected for ${o}`)}(Se(g[l]));const E=Kl(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?lr(v.injectImpl):null;nd(o,d,bt.Default);try{f=o[l]=v.factory(void 0,g,o,d),a.firstCreatePass&&l>=d.directiveStart&&function(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=Sl(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==I&&lr(I),Kl(E),v.resolving=!1,Gl()}}return f}function Zi(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function rr(o,a){return!(o&bt.Self||o&bt.Host&&a)}class Ki{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return ca(this._tNode,this._lView,a,d,l)}}function Ya(o){return Wn(()=>{const a=o.prototype.constructor,l=a[ke]||$t(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[ke]||$t(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function $t(o){return We(o)?()=>{const a=$t(ae(o));return a&&a()}:Qs(o)}function Vn(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const g=l[f];if(to(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(Yn(),o)}const io="__parameters__";function Rn(o,a,l){return Wn(()=>{const d=function(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(I,A,x){const V=I.hasOwnProperty(io)?I[io]:Object.defineProperty(I,io,{value:[]})[io];for(;V.length<=x;)V.push(null);return(V[x]=V[x]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Bn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=nn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const so=new Bn("AnalyzeForEntryComponents");function Qi(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),Qi(d,a)):a!==o&&a.push(d)}return a}function gs(o,a){o.forEach(l=>Array.isArray(l)?gs(l,a):a(l))}function Qa(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Ja(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function oo(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}function Wr(o,a,l){let d=Ps(o,a);return d>=0?o[1|d]=l:(d=~d,function(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function ki(o,a){const l=Ps(o,a);if(l>=0)return o[1|l]}function Ps(o,a){return function(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const g=d+(f-d>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:d=g+1}return~(f<<l)}(o,a,1)}const es={},nc="__NG_DI_FLAG__",rc="ngTempTokenPath",ic=/\n/gm,cd="__source",T=we({provide:String,useValue:we});let D;function R(o){const a=D;return D=o,a}function U(o,a=bt.Default){if(void 0===D)throw new Error("inject() must be called from an injection context");return null===D?cr(o,void 0,a):D.get(o,a&bt.Optional?null:void 0,a)}function G(o,a=bt.Default){return(en||U)(ae(o),a)}const Le=G;function tt(o){const a=[];for(let l=0;l<o.length;l++){const d=ae(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,g=bt.Default;for(let v=0;v<d.length;v++){const E=d[v],I=Pt(E);"number"==typeof I?-1===I?f=E.token:g|=I:f=E}a.push(G(f,g))}else a.push(G(d))}return a}function St(o,a){return o[nc]=a,o.prototype[nc]=a,o}function Pt(o){return o[nc]}const vr=St(Rn("Inject",o=>({token:o})),-1),mn=St(Rn("Optional"),8),bi=St(Rn("SkipSelf"),4);let Ri;function tl(o){var a;return(null==(a=function(){if(void 0===Ri&&(Ri=null,At.trustedTypes))try{Ri=At.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ri}())?void 0:a.createHTML(o))||o}class xo{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fd extends xo{getTypeName(){return"HTML"}}class pd extends xo{getTypeName(){return"Style"}}class dy extends xo{getTypeName(){return"Script"}}class ac extends xo{getTypeName(){return"URL"}}class nf extends xo{getTypeName(){return"ResourceURL"}}function ko(o){return o instanceof xo?o.changingThisBreaksApplicationSecurity:o}function lc(o,a){const l=uu(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function uu(o){return o instanceof xo&&o.getTypeName()||null}function rl(o){return new fd(o)}function rf(o){return new pd(o)}function Cm(o){return new dy(o)}function sf(o){return new ac(o)}function hy(o){return new nf(o)}class fy{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(tl(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class py{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=tl(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=tl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Im=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function sl(o){return(o=String(o)).match(Im)||o.match(gy)?o:"unsafe:"+o}function ts(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function cc(...o){const a={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const Sm=ts("area,br,col,hr,img,wbr"),Dm=ts("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Am=ts("rp,rt"),Ro=cc(Sm,cc(Dm,ts("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cc(Am,ts("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cc(Am,Dm)),lf=ts("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cf=ts("srcset"),va=cc(lf,cf,ts("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ts("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),du=ts("script,style,template");class km{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Ro.hasOwnProperty(l))return this.sanitizedSomething=!0,!du.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),v=g.name,E=v.toLowerCase();if(!va.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=g.value;lf[E]&&(I=sl(I)),cf[E]&&(o=I,I=(o=String(o)).split(",").map(a=>sl(a.trim())).join(", ")),this.buf.push(" ",v,'="',Rm(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Ro.hasOwnProperty(l)&&!Sm.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Rm(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const hu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fu=/([^\#-~ |!])/g;function Rm(o){return o.replace(/&/g,"&amp;").replace(hu,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(fu,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uc;function md(o,a){let l=null;try{uc=uc||function(o){const a=new py(o);return function(){try{return!!(new window.DOMParser).parseFromString(tl(""),"text/html")}catch(o){return!1}}()?new fy(a):a}(o);let d=a?String(a):"";l=uc.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=l.innerHTML,l=uc.getInertBodyElement(d)}while(d!==g);return tl((new km).sanitizeChildren(uf(l)||l))}finally{if(l){const d=uf(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function uf(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function m(o){const a=function(){const o=Re();return o&&o[12]}();return a?a.sanitize(ir.URL,o)||"":lc(o,"URL")?ko(o):sl(se(o))}const ao="__ngContext__";function Rr(o,a){o[ao]=a}function gd(o){const a=function(o){return o[ao]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function yy(o){return o.ngOriginalError}function zS(o,...a){o.error(...a)}class ff{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=(o=a)&&o.ngErrorLogger||zS;var o;d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&yy(a);for(;l&&yy(l);)l=yy(l);return l||null}}const h0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function Oo(o){return o instanceof Function?o():o}var ba=(()=>((ba=ba||{})[ba.Important=1]="Important",ba[ba.DashCase=2]="DashCase",ba))();function pf(o,a){return undefined(o,a)}function mf(o){const a=o[3];return us(a)?a[3]:a}function Ey(o){return _0(o[13])}function Cy(o){return _0(o[4])}function _0(o){for(;null!==o&&!us(o);)o=o[4];return o}function vu(o,a,l,d,f){if(null!=d){let g,v=!1;us(d)?g=d:Di(d)&&(v=!0,d=d[0]);const E=Ln(d);0===o&&null!==l?null==f?v0(a,l,E):bu(a,l,E,f||null,!0):1===o&&null!==l?bu(a,l,E,f||null,!0):2===o?function(o,a,l){const d=jm(o,a);d&&function(o,a,l,d){tn(o)?o.removeChild(a,l,d):a.removeChild(l)}(o,d,a,l)}(a,E,v):3===o&&a.destroyNode(E),null!=g&&function(o,a,l,d,f){const g=l[7];g!==Ln(l)&&vu(a,o,d,g,f);for(let E=10;E<l.length;E++){const I=l[E];gf(I[1],I,o,a,d,g)}}(a,o,g,l,f)}}function Ty(o,a,l){return tn(o)?o.createElement(a,l):null===l?o.createElement(a):o.createElementNS(l,a)}function Sy(o,a){const l=o[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Io(f,-1)),l.splice(d,1)}function Dy(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const f=d[17];null!==f&&f!==o&&Sy(f,d),a>0&&(o[l-1][4]=d[4]);const g=Ja(o,10+a);!function(o,a){gf(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Ay(o,a){if(!(256&a[2])){const l=a[11];tn(l)&&l.destroyNode&&gf(o,a,l,3,null,null),function(o){let a=o[13];if(!a)return Um(o[1],o);for(;a;){let l=null;if(Di(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)Di(a)&&Um(a[1],a),a=a[3];null===a&&(a=o),Di(a)&&Um(a[1],a),l=a&&a[4]}a=l}}(a)}}function Um(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof So)){const g=l[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],I=g[v+1];try{I.call(E)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function(o,a){const l=o.cleanup,d=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(a):Ln(a[v]),I=d[f=l[g+2]],A=l[g+3];"boolean"==typeof A?E.removeEventListener(l[g],I,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),g+=2}else{const v=d[f=l[g+1]];l[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();a[7]=null}}(o,a),1===a[1].type&&tn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&us(a[3])){l!==a[3]&&Sy(l,a);const d=a[19];null!==d&&d.detachView(o)}}}function dc(o,a,l){return function(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===lt.None||f===lt.Emulated)return null}return ur(d,l)}(o,a.parent,l)}function bu(o,a,l,d,f){tn(o)?o.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function v0(o,a,l){tn(o)?o.appendChild(a,l):a.appendChild(l)}function bd(o,a,l,d,f){null!==d?bu(o,a,l,d,f):v0(o,a,l)}function jm(o,a){return tn(o)?o.parentNode(a):a.parentNode}function ky(o,a,l){return w0(o,a,l)}let w0=function(o,a,l){return 40&o.type?ur(o,l):null};function Gm(o,a,l,d){const f=dc(o,d,a),g=a[11],E=ky(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)bd(g,f,l[I],E,!1);else bd(g,f,l,E,!1)}function $m(o,a){if(null!==a){const l=a.type;if(3&l)return ur(a,o);if(4&l)return Ny(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return $m(o,d);{const f=o[a.index];return us(f)?Ny(-1,f):Ln(f)}}if(32&l)return pf(a,o)()||Ln(o[a.index]);{const d=Oy(o,a);return null!==d?Array.isArray(d)?d[0]:$m(mf(o[16]),d):$m(o,a.next)}}return null}function Oy(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Ny(o,a){const l=10+o+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return $m(d,f)}return a[7]}function Py(o,a,l,d,f,g,v){for(;null!=l;){const E=d[l.index],I=l.type;if(v&&0===a&&(E&&Rr(Ln(E),d),l.flags|=4),64!=(64&l.flags))if(8&I)Py(o,a,l.child,d,f,g,!1),vu(a,o,f,E,g);else if(32&I){const A=pf(l,d);let x;for(;x=A();)vu(a,o,f,x,g);vu(a,o,f,E,g)}else 16&I?E0(o,a,d,l,f,g):vu(a,o,f,E,g);l=v?l.projectionNext:l.next}}function gf(o,a,l,d,f,g){Py(l,d,o.firstChild,a,f,g,!1)}function E0(o,a,l,d,f,g){const v=l[16],I=v[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)vu(a,o,f,I[A],g);else Py(o,a,I,v[3],f,g,!0)}function cD(o,a,l){tn(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function zm(o,a,l){tn(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function uD(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}l=f+1}}const dD="ng-template";function C0(o,a,l){let d=0;for(;d<o.length;){let f=o[d++];if(l&&"class"===f){if(f=o[d],-1!==uD(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function _f(o){return 4===o.type&&o.value!==dD}function dr(o,a,l){return a===(4!==o.type||l?o.value:dD)}function sr(o,a,l){let d=4;const f=o.attrs||[],g=function(o){for(let a=0;a<o.length;a++)if(to(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!dr(o,I,l)||""===I&&1===a.length){if(Zr(d))return!1;v=!0}}else{const A=8&d?I:a[++E];if(8&d&&null!==o.attrs){if(!C0(o.attrs,A,l)){if(Zr(d))return!1;v=!0}continue}const V=hD(8&d?"class":I,f,_f(o),l);if(-1===V){if(Zr(d))return!1;v=!0;continue}if(""!==A){let Z;Z=V>g?"":f[V+1].toLowerCase();const te=8&d?Z:null;if(te&&-1!==uD(te,A,0)||2&d&&A!==Z){if(Zr(d))return!1;v=!0}}}}else{if(!v&&!Zr(d)&&!Zr(I))return!1;if(v&&Zr(I))continue;v=!1,d=I|1&d}}return Zr(d)||v}function Zr(o){return 0==(1&o)}function hD(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function yf(o,a,l=!1){for(let d=0;d<a.length;d++)if(sr(o,a[d],l))return!0;return!1}function fD(o,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function I0(o,a){return o?":not("+a.trim()+")":a}function pD(o){let a=o[0],l=1,d=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&d){const E=o[++l];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Zr(v)&&(a+=I0(g,f),f=""),d=v,g=g||!Zr(d);l++}return""!==f&&(a+=I0(g,f)),a}const Wt={};function Ed(o){T0(Qt(),Re(),jn()+o,Xo())}function T0(o,a,l,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&sa(a,g,l)}else{const g=o.preOrderHooks;null!==g&&eu(a,g,0,l)}ps(l)}function Fy(o,a){return o<<17|a<<2}function vs(o){return o>>17&32767}function Id(o){return 2|o}function hc(o){return(131068&o)>>2}function D0(o,a){return-131069&o|a<<2}function A0(o){return 1|o}function V0(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],g=l[d+1];if(-1!==g){const v=o.data[g];za(f),v.contentQueries(2,a[g],g)}}}function Ef(o,a,l,d,f,g,v,E,I,A){const x=a.blueprint.slice();return x[0]=f,x[2]=140|d,Nl(x),x[3]=x[15]=o,x[8]=l,x[10]=v||o&&o[10],x[11]=E||o&&o[11],x[12]=I||o&&o[12]||null,x[9]=A||o&&o[9]||null,x[6]=g,x[16]=2==a.type?o[16]:x,x}function Md(o,a,l,d,f){let g=o.data[a];if(null===g)g=function(o,a,l,d,f){const g=Qo(),v=$a(),I=o.data[a]=function(o,a,l,d,f,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,l,d,f),wt.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=f;const v=function(){const o=wt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return zr(g,!0),g}function Cf(o,a,l,d){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Qm(o,a,l){Wa(a);try{const d=o.viewQuery;null!==d&&K0(1,d,l);const f=o.template;null!==f&&B0(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&V0(o,a),o.staticViewQueries&&K0(2,o.viewQuery,l);const g=o.components;null!==g&&function(o,a){for(let l=0;l<a.length;l++)RP(o,a[l])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Qc()}}function If(o,a,l,d){const f=a[2];if(256==(256&f))return;Wa(a);const g=Xo();try{Nl(a),function(o){wt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&B0(o,a,l,2,d);const v=3==(3&f);if(!g)if(v){const A=o.preOrderCheckHooks;null!==A&&sa(a,A,null)}else{const A=o.preOrderHooks;null!==A&&eu(a,A,0,null),Wl(a,0)}if(function(o){for(let a=Ey(o);null!==a;a=Cy(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],g=f[3];0==(1024&f[2])&&Io(g,1),f[2]|=1024}}}(a),function(o){for(let a=Ey(o);null!==a;a=Cy(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];ds(d)&&If(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&V0(o,a),!g)if(v){const A=o.contentCheckHooks;null!==A&&sa(a,A)}else{const A=o.contentHooks;null!==A&&eu(a,A,1),Wl(a,1)}!function(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)ps(~f);else{const g=f,v=l[++d],E=l[++d];na(v,g),E(2,a[g])}}}finally{ps(-1)}}(o,a);const E=o.components;null!==E&&function(o,a){for(let l=0;l<a.length;l++)kP(o,a[l])}(a,E);const I=o.viewQuery;if(null!==I&&K0(2,I,d),!g)if(v){const A=o.viewCheckHooks;null!==A&&sa(a,A)}else{const A=o.viewHooks;null!==A&&eu(a,A,2),Wl(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Io(a[3],-1))}finally{Qc()}}function SD(o,a,l,d){const f=a[10],g=!Xo(),v=Rl(a);try{g&&!v&&f.begin&&f.begin(),v&&Qm(o,a,d),If(o,a,l,d)}finally{g&&!v&&f.end&&f.end()}}function B0(o,a,l,d,f){const g=jn(),v=2&d;try{ps(-1),v&&a.length>20&&T0(o,a,20,Xo()),l(d,f)}finally{ps(g)}}function DD(o,a,l){if(Oh(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function U0(o,a,l){!Yo()||(function(o,a,l,d){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||Do(l,a),Rr(d,a);const v=l.initialInputs;for(let E=f;E<g;E++){const I=o.data[E],A=yi(I);A&&SP(a,l,I);const x=Os(a,o,E,l);Rr(x,a),null!==v&&DP(0,E-f,x,I,0,v),A&&(pn(l.index,a)[8]=x)}}(o,a,l,ur(l,a)),128==(128&l.flags)&&function(o,a,l){const d=l.directiveStart,f=l.directiveEnd,v=l.index,E=wt.lFrame.currentDirectiveIndex;try{ps(v);for(let I=d;I<f;I++){const A=o.data[I],x=a[I];Xs(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&PD(A,x)}}finally{ps(-1),Xs(E)}}(o,a,l))}function j0(o,a,l=ur){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],E=-1===v?l(a,o):o[v];o[f++]=E}}}function AD(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Hy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Hy(o,a,l,d,f,g,v,E,I,A){const x=20+d,V=x+f,Z=function(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Wt);return l}(x,V),te="function"==typeof A?A():A;return Z[1]={type:o,blueprint:Z,template:l,queries:null,viewQuery:E,declTNode:a,data:Z.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function xD(o,a,l,d){const f=HD(a);null===l?f.push(d):(f.push(l),o.firstCreatePass&&GD(o).push(d,f.length-1))}function kD(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function lo(o,a,l,d,f,g,v,E){const I=ur(a,l);let x,A=a.inputs;!E&&null!=A&&(x=A[d])?(WD(o,l,x,d,f),Kn(a)&&function(o,a){const l=pn(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,tn(g)?g.setProperty(I,d,f):et(d)||(I.setProperty?I.setProperty(d,f):I[d]=f))}function G0(o,a,l,d){let f=!1;if(Yo()){const g=function(o,a,l){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];yf(l,v.selectors,!1)&&(f||(f=[]),Rs(Do(l,a),o,v.type),yi(v)?(FD(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===d?null:{"":-1};if(null!==g){f=!0,LD(l,o.data.length,g.length);for(let x=0;x<g.length;x++){const V=g[x];V.providersResolver&&V.providersResolver(V)}let E=!1,I=!1,A=Cf(o,a,g.length,null);for(let x=0;x<g.length;x++){const V=g[x];l.mergedAttrs=vt(l.mergedAttrs,V.hostAttrs),VD(o,l,a,A,V),TP(A,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const Z=V.type.prototype;!E&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),E=!0),!I&&(Z.ngOnChanges||Z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),A++}!function(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,v=[];let E=null,I=null;for(let A=a.directiveStart;A<d;A++){const x=f[A],V=x.inputs,Z=null===g||_f(a)?null:BD(V,g);v.push(Z),E=kD(V,A,E),I=kD(x.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=E,a.outputs=I}(o,l)}v&&function(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new $e("301",`Export of name '${a[f+1]}' not found!`);d.push(a[f],g)}}}(l,d,v)}return l.mergedAttrs=vt(l.mergedAttrs,l.attrs),f}function ND(o,a,l,d,f,g){const v=g.hostBindings;if(v){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const I=~a.index;(function(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(d,f,v)}}function PD(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function FD(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function TP(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;yi(a)&&(l[""]=o)}}function LD(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function VD(o,a,l,d,f){o.data[d]=f;const g=f.factory||(f.factory=Qs(f.type)),v=new So(g,yi(f),null);o.blueprint[d]=v,l[d]=v,ND(o,a,0,d,Cf(o,l,f.hostVars,Wt),f)}function SP(o,a,l){const d=ur(a,o),f=AD(l),g=o[10],v=Gy(o,Ef(o,f,null,l.onPush?64:16,d,a,g,g.createRenderer(d,l),null,null));o[a.index]=v}function cl(o,a,l,d,f,g){const v=ur(o,a);!function(o,a,l,d,f,g,v){if(null==g)tn(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const E=null==v?se(g):v(g,d||"",f);tn(o)?o.setAttribute(a,f,E,l):l?a.setAttributeNS(l,f,E):a.setAttribute(f,E)}}(a[11],v,g,o.value,l,d,f)}function DP(o,a,l,d,f,g){const v=g[a];if(null!==v){const E=d.setInput;for(let I=0;I<v.length;){const A=v[I++],x=v[I++],V=v[I++];null!==E?d.setInput(l,V,A,x):l[x]=V}}}function BD(o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function UD(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function kP(o,a){const l=pn(a,o);if(ds(l)){const d=l[1];80&l[2]?If(d,l,d.template,l[8]):l[5]>0&&z0(l)}}function z0(o){for(let d=Ey(o);null!==d;d=Cy(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const v=g[1];If(v,g,v.template,g[8])}else g[5]>0&&z0(g)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=pn(l[d],o);ds(f)&&f[5]>0&&z0(f)}}function RP(o,a){const l=pn(a,o),d=l[1];(function(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),Qm(d,l,l[8])}function Gy(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function W0(o){for(;o;){o[2]|=64;const a=mf(o);if(Zu(o)&&!a)return o;o=a}return null}function Z0(o,a,l){const d=a[10];d.begin&&d.begin();try{If(o,a,o.template,l)}catch(f){throw zD(a,f),f}finally{d.end&&d.end()}}function jD(o){!function(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],d=gd(l),f=d[1];SD(f,d,f.template,l)}}(o[8])}function K0(o,a,l){za(0),a(o,l)}const LP=(()=>Promise.resolve(null))();function HD(o){return o[7]||(o[7]=[])}function GD(o){return o.cleanup||(o.cleanup=[])}function $D(o,a,l){return(null===o||yi(o))&&(l=function(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}function zD(o,a){const l=o[9],d=l?l.get(ff,null):null;d&&d.handleError(a)}function WD(o,a,l,d,f){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],I=a[v],A=o.data[v];null!==A.setInput?A.setInput(I,f,d,E):I[E]=f}}function fc(o,a,l){const d=ri(a,o);!function(o,a,l){tn(o)?o.setValue(a,l):a.textContent=l}(o[11],d,l)}function $y(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=ge(f,E):2==g&&(d=ge(d,E+": "+a[++v]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}const Y0=new Bn("INJECTOR",-1);class qD{get(a,l=es){if(l===es){const d=new Error(`NullInjectorError: No provider for ${ce(a)}!`);throw d.name="NullInjectorError",d}return l}}const Q0=new Bn("Set Injector scope."),Jm={},UP={};let J0;function ZD(){return void 0===J0&&(J0=new qD),J0}function KD(o,a=null,l=null,d){const f=YD(o,a,l,d);return f._resolveInjectorDefTypes(),f}function YD(o,a=null,l=null,d){return new jP(o,l,a||ZD(),d)}class jP{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&gs(l,E=>this.processProvider(E,a,l)),gs([a],E=>this.processInjectorType(E,[],g)),this.records.set(Y0,Tf(void 0,this));const v=this.records.get(Q0);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof a?null:ce(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=es,d=bt.Default){this.assertNotDestroyed();const f=R(this),g=lr(void 0);try{if(!(d&bt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=("function"==typeof(o=a)||"object"==typeof o&&o instanceof Bn)&&ei(a);E=I&&this.injectableDefInScope(I)?Tf(X0(a),Jm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&bt.Self?ZD():this.parent).get(a,l=d&bt.Optional&&l===es?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[rc]=v[rc]||[]).unshift(ce(a)),f)throw v;return function(o,a,l,d){const f=o[rc];throw a[cd]&&f.unshift(a[cd]),o.message=function(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ce(a);if(Array.isArray(a))f=a.map(ce).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}f=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(ic,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[rc]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{lr(g),R(f)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(ce(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,l,d){if(!(a=ae(a)))return!1;let f=ti(a);const g=null==f&&a.ngModule||void 0,v=void 0===g?a:g,E=-1!==d.indexOf(v);if(void 0!==g&&(f=ti(g)),null==f)return!1;if(null!=f.imports&&!E){let x;d.push(v);try{gs(f.imports,V=>{this.processInjectorType(V,l,d)&&(void 0===x&&(x=[]),x.push(V))})}finally{}if(void 0!==x)for(let V=0;V<x.length;V++){const{ngModule:Z,providers:te}=x[V];gs(te,ye=>this.processProvider(ye,Z,te||H))}}this.injectorDefTypes.add(v);const I=Qs(v)||(()=>new v);this.records.set(v,Tf(I,Jm));const A=f.providers;if(null!=A&&!E){const x=a;gs(A,V=>this.processProvider(V,x,A))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,d){let f=Sf(a=ae(a))?a:ae(a&&a.provide);const g=(o=a,JD(o)?Tf(void 0,o.useValue):Tf(QD(o),Jm));var o;if(Sf(a)||!0!==a.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=Tf(void 0,Jm,!0),v.factory=()=>tt(v.multi),this.records.set(f,v)),f=a,v.multi.push(a)}this.records.set(f,g)}hydrate(a,l){return l.value===Jm&&(l.value=UP,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(o=l.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ae(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function X0(o){const a=ei(o),l=null!==a?a.factory:Qs(o);if(null!==l)return l;if(o instanceof Bn)throw new Error(`Token ${ce(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const d=oo(a,"?");throw new Error(`Can't resolve all parameters for ${ce(o)}: (${d.join(", ")}).`)}const l=function(o){const a=o&&(o[ni]||o[ar]);if(a){const l=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Error("unreachable")}function QD(o,a,l){let d;if(Sf(o)){const f=ae(o);return Qs(f)||X0(f)}if(JD(o))d=()=>ae(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...tt(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))d=()=>G(ae(o.useExisting));else{const f=ae(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Qs(f)||X0(f);d=()=>new f(...tt(o.deps))}return d}function Tf(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function JD(o){return null!==o&&"object"==typeof o&&T in o}function Sf(o){return"function"==typeof o}let No=(()=>{class o{static create(l,d){var f;if(Array.isArray(l))return KD({name:""},d,l,"");{const g=null!=(f=l.name)?f:"";return KD({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=es,o.NULL=new qD,o.\u0275prov=nn({token:o,providedIn:"any",factory:()=>G(Y0)}),o.__NG_ELEMENT_ID__=-1,o})();function iA(o,a){ia(gd(o)[1],Yn())}function Wy(o){let a=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(yi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");f=a.\u0275dir}if(f){if(l){d.push(f);const v=o;v.inputs=eg(o.inputs),v.declaredInputs=eg(o.declaredInputs),v.outputs=eg(o.outputs);const E=f.hostBindings;E&&aA(o,E);const I=f.viewQuery,A=f.contentQueries;if(I&&sA(o,I),A&&oA(o,A),re(o.inputs,f.inputs),re(o.declaredInputs,f.declaredInputs),re(o.outputs,f.outputs),yi(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(o),E===Wy&&(l=!1)}}a=Object.getPrototypeOf(a)}!function(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=vt(f.hostAttrs,l=vt(l,f.hostAttrs))}}(d)}function eg(o){return o===W?{}:o===H?[]:o}function sA(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function oA(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,g)=>{a(d,f,g),l(d,f,g)}:a}function aA(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let qy=null;function Mf(){if(!qy){const o=At.Symbol;if(o&&o.iterator)qy=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(qy=d)}}}return qy}function tg(o){return!!ng(o)&&(Array.isArray(o)||!(o instanceof Map)&&Mf()in o)}function ng(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ca(o,a,l){return o[a]=l}function wi(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Zy(o,a,l,d){const f=Re();return wi(f,ta(),a)&&(Qt(),cl(Hn(),f,o,a,l,d)),Zy}function kf(o,a,l,d,f,g){const E=function(o,a,l,d){const f=wi(o,a,l);return wi(o,a+1,d)||f}(o,wt.lFrame.bindingIndex,l,f);return Mi(2),E?a+se(l)+d+se(f)+g:Wt}function Qy(o,a,l,d,f,g,v,E){const I=Re(),A=Qt(),x=o+20,V=A.firstCreatePass?function(o,a,l,d,f,g,v,E,I){const A=a.consts,x=Md(a,o,4,v||null,Pr(A,E));G0(a,l,x,Pr(A,I)),ia(a,x);const V=x.tViews=Hy(2,x,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,x),V.queries=a.queries.embeddedTView(x)),x}(x,A,I,a,l,d,f,g,v):A.data[x];zr(V,!1);const Z=I[11].createComment("");Gm(A,I,Z,V),Rr(Z,I),Gy(I,I[x]=UD(Z,I,Z,V)),Tl(V)&&U0(A,I,V),null!=v&&j0(I,V,E)}function Od(o){return function(o,a){return o[a]}(wt.lFrame.contextLView,20+o)}function _c(o,a=bt.Default){const l=Re();return null===l?G(o,a):ca(Yn(),l,ae(o),a)}function Ff(){throw new Error("invalid")}function cg(o,a,l){const d=Re();return wi(d,ta(),a)&&lo(Qt(),Hn(),d,o,a,d[11],l,!1),cg}function Lf(o,a,l,d,f){const v=f?"class":"style";WD(o,l,a.inputs[v],v,d)}function Vf(o,a,l,d){const f=Re(),g=Qt(),v=20+o,E=f[11],I=f[v]=Ty(E,a,wt.lFrame.currentNamespace),A=g.firstCreatePass?function(o,a,l,d,f,g,v){const E=a.consts,A=Md(a,o,2,f,Pr(E,g));return G0(a,l,A,Pr(E,v)),null!==A.attrs&&$y(A,A.attrs,!1),null!==A.mergedAttrs&&$y(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,l,d):g.data[v];zr(A,!0);const x=A.mergedAttrs;null!==x&&xn(E,I,x);const V=A.classes;null!==V&&zm(E,I,V);const Z=A.styles;null!==Z&&cD(E,I,Z),64!=(64&A.flags)&&Gm(g,f,I,A),0===wt.lFrame.elementDepthCount&&Rr(I,f),wt.lFrame.elementDepthCount++,Tl(A)&&(U0(g,f,A),DD(g,A,f)),null!==d&&j0(f,A)}function Pd(){let o=Yn();$a()?Jo():(o=o.parent,zr(o,!1));const a=o;wt.lFrame.elementDepthCount--;const l=Qt();l.firstCreatePass&&(ia(l,o),Oh(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&Lf(l,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&Lf(l,a,Re(),a.stylesWithoutHost,!1)}function IE(o,a,l,d){Vf(o,a,l,d),Pd()}function Sa(o,a,l){const d=Re(),f=Qt(),g=o+20,v=f.firstCreatePass?function(o,a,l,d,f){const g=a.consts,v=Pr(g,d),E=Md(a,o,8,"ng-container",v);return null!==v&&$y(E,v,!0),G0(a,l,E,Pr(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,d,a,l):f.data[g];zr(v,!0);const E=d[g]=d[11].createComment("");Gm(f,d,E,v),Rr(E,d),Tl(v)&&(U0(f,d,v),DD(f,v,d)),null!=l&&j0(d,v)}function ug(){let o=Yn();const a=Qt();$a()?Jo():(o=o.parent,zr(o,!1)),a.firstCreatePass&&(ia(a,o),Oh(o)&&a.queries.elementEnd(o))}function cv(o,a,l){Sa(o,a,l),ug()}function Fo(){return Re()}function hl(o){return!!o&&"function"==typeof o.then}function Fd(o){return!!o&&"function"==typeof o.subscribe}const SE=Fd;function Uf(o,a,l,d){const f=Re(),g=Qt(),v=Yn();return jf(g,f,f[11],v,o,a,!!l,d),Uf}function dg(o,a){const l=Yn(),d=Re(),f=Qt();return jf(f,d,$D(Ul(f.data),l,d),l,o,a,!1),dg}function jf(o,a,l,d,f,g,v,E){const I=Tl(d),x=o.firstCreatePass&&GD(o),V=a[8],Z=HD(a);let te=!0;if(3&d.type||E){const Qe=ur(d,a),dt=E?E(Qe):Qe,Ae=Z.length,It=E?on=>E(Ln(on[d.index])):d.index;if(tn(l)){let on=null;if(!E&&I&&(on=function(o,a,l,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===d){const E=a[7],I=f[g+2];return E.length>I?E[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,d.index)),null!==on)(on.__ngLastListenerFn__||on).__ngNextListenerFn__=g,on.__ngLastListenerFn__=g,te=!1;else{g=Hf(d,a,V,g,!1);const Dn=l.listen(dt,f,g);Z.push(g,Dn),x&&x.push(f,It,Ae,Ae+1)}}else g=Hf(d,a,V,g,!0),dt.addEventListener(f,g,v),Z.push(g),x&&x.push(f,It,Ae,v)}else g=Hf(d,a,V,g,!1);const ye=d.outputs;let He;if(te&&null!==ye&&(He=ye[f])){const Qe=He.length;if(Qe)for(let dt=0;dt<Qe;dt+=2){const Us=a[He[dt]][He[dt+1]].subscribe(g),Tc=Z.length;Z.push(g,Us),x&&x.push(f,d.index,Tc,-(Tc+1))}}}function DE(o,a,l,d){try{return!1!==l(d)}catch(f){return zD(o,f),!1}}function Hf(o,a,l,d,f){return function g(v){if(v===Function)return d;const E=2&o.flags?pn(o.index,a):a;0==(32&a[2])&&W0(E);let I=DE(a,0,d,v),A=g.__ngNextListenerFn__;for(;A;)I=DE(a,0,A,v)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function AE(o=1){return function(o){return(wt.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,wt.lFrame.contextLView))[8]}(o)}function ME(o,a){let l=null;const d=function(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?yf(o,g,!0):fD(d,g))return f}else l=f}return l}function uv(o){const a=Re()[16][6];if(!a.projection){const d=a.projection=oo(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const v=o?ME(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function bs(o,a=0,l){const d=Re(),f=Qt(),g=Md(f,20+o,16,null,l||null);null===g.projection&&(g.projection=a),Jo(),64!=(64&g.flags)&&function(o,a,l){E0(a[11],0,a,l,dc(o,l,a),ky(l.parent||a[6],l,a))}(f,d,g)}function FE(o,a,l,d,f){const g=o[l+1],v=null===a;let E=d?vs(g):hc(g),I=!1;for(;0!==E&&(!1===I||v);){const x=o[E+1];_A(o[E],a)&&(I=!0,o[E+1]=d?A0(x):Id(x)),E=d?vs(x):hc(x)}I&&(o[l+1]=d?Id(g):A0(g))}function _A(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ps(o,a)>=0}function Bd(o,a,l){return Aa(o,a,l,!1),Bd}function Wf(o,a){return Aa(o,a,null,!0),Wf}function Aa(o,a,l,d){const f=Re(),g=Qt(),v=Mi(2);g.firstUpdatePass&&function(o,a,l,d){const f=o.data;if(null===f[l+1]){const g=f[jn()],v=function(o,a){return a>=o.expandoStartIndex}(o,l);(function(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!v&&(a=!1),a=function(o,a,l,d){const f=Ul(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=qf(l=_g(null,o,a,l,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=_g(f,o,a,l,d),null===g){let I=function(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==hc(d))return o[vs(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=_g(null,o,a,I[1],d),I=qf(I,a.attrs,d),function(o,a,l,d){o[vs(l?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function(o,a,l){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=qf(d,o[g].hostAttrs,l);return qf(d,a.attrs,l)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,d),function(o,a,l,d,f,g){let v=g?a.classBindings:a.styleBindings,E=vs(v),I=hc(v);o[d]=l;let x,A=!1;if(Array.isArray(l)){const V=l;x=V[1],(null===x||Ps(V,x)>0)&&(A=!0)}else x=l;if(f)if(0!==I){const Z=vs(o[E+1]);o[d+1]=Fy(Z,E),0!==Z&&(o[Z+1]=D0(o[Z+1],d)),o[E+1]=function(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=Fy(E,0),0!==E&&(o[E+1]=D0(o[E+1],d)),E=d;else o[d+1]=Fy(I,0),0===E?E=d:o[I+1]=D0(o[I+1],d),I=d;A&&(o[d+1]=Id(o[d+1])),FE(o,x,d,!0),FE(o,x,d,!1),function(o,a,l,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Ps(g,a)>=0&&(l[d+1]=A0(l[d+1]))}(a,x,o,d,g),v=Fy(E,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,d)}}(g,o,v,d),a!==Wt&&wi(f,v,a)&&function(o,a,l,d,f,g,v,E){if(!(3&a.type))return;const I=o.data,A=I[E+1];yg(function(o){return 1==(1&o)}(A)?mv(I,a,l,f,hc(A),v):void 0)||(yg(g)||function(o){return 2==(2&o)}(A)&&(g=mv(I,null,l,f,E,v)),function(o,a,l,d,f){const g=tn(o);if(a)f?g?o.addClass(l,d):l.classList.add(d):g?o.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:ba.DashCase;if(null==f)g?o.removeStyle(l,d,v):l.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),v|=ba.Important),g?o.setStyle(l,d,f,v):l.style.setProperty(d,f,E?"important":"")}}}(d,v,ri(jn(),l),f,g))}(g,g.data[jn()],f,f[11],o,f[v+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ce(ko(o)))),o}(a,l),d,v)}function _g(o,a,l,d,f){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=a[E],d=qf(d,g.hostAttrs,f),g!==o);)E++;return null!==o&&(l.directiveStylingLast=E),d}function qf(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Wr(o,v,!!l||a[++g]))}return void 0===o?null:o}function mv(o,a,l,d,f,g){const v=null===a;let E;for(;f>0;){const I=o[f],A=Array.isArray(I),x=A?I[1]:I,V=null===x;let Z=l[f+1];Z===Wt&&(Z=V?H:void 0);let te=V?ki(Z,d):x===d?Z:void 0;if(A&&!yg(te)&&(te=ki(I,d)),yg(te)&&(E=te,v))return E;const ye=o[f+1];f=v?vs(ye):hc(ye)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=ki(I,d))}return E}function yg(o){return void 0!==o}function $E(o,a=""){const l=Re(),d=Qt(),f=o+20,g=d.firstCreatePass?Md(d,f,1,a,null):d.data[f],v=l[f]=function(o,a){return tn(o)?o.createText(a):o.createTextNode(a)}(l[11],a);Gm(d,l,v,g),zr(g,!1)}function vg(o){return Zf("",o,""),vg}function Zf(o,a,l){const d=Re(),f=function(o,a,l,d){return wi(o,ta(),l)?a+se(l)+d:Wt}(d,o,a,l);return f!==Wt&&fc(d,jn(),f),Zf}function _v(o,a,l,d,f){const g=Re(),v=kf(g,o,a,l,d,f);return v!==Wt&&fc(g,jn(),v),_v}function Ig(o,a,l){const d=Re();return wi(d,ta(),a)&&lo(Qt(),Hn(),d,o,a,d[11],l,!0),Ig}function Iv(o,a,l){const d=Re();if(wi(d,ta(),a)){const g=Qt(),v=Hn();lo(g,v,d,o,a,$D(Ul(g.data),v,d),l,!0)}return Iv}const Du=void 0;var FA=["en",[["a","p"],["AM","PM"],Du],[["AM","PM"],Du,Du],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Du,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Du,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Du,"{1} 'at' {0}",Du],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Hd={};function Yf(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=Tg(a);if(l)return l;const d=a.split("-")[0];if(l=Tg(d),l)return l;if("en"===d)return FA;throw new Error(`Missing locale data for the locale "${o}".`)}function Qf(o){return Yf(o)[Mt.PluralCase]}function Tg(o){return o in Hd||(Hd[o]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[o]),Hd[o]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const Sg="en-US";let Tv=Sg;function AC(o,a,l,d,f){if(o=ae(o),Array.isArray(o))for(let g=0;g<o.length;g++)AC(o[g],a,l,d,f);else{const g=Qt(),v=Re();let E=Sf(o)?o:ae(o.provide),I=QD(o);const A=Yn(),x=1048575&A.providerIndexes,V=A.directiveStart,Z=A.providerIndexes>>20;if(Sf(o)||!o.multi){const te=new So(I,f,_c),ye=xC(E,a,f?x:x+Z,V);-1===ye?(Rs(Do(A,v),g,E),MC(g,o,a.length),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(te),v.push(te)):(l[ye]=te,v[ye]=te)}else{const te=xC(E,a,x+Z,V),ye=xC(E,a,x,x+Z),He=te>=0&&l[te],Qe=ye>=0&&l[ye];if(f&&!Qe||!f&&!He){Rs(Do(A,v),g,E);const dt=function(o,a,l,d,f){const g=new So(o,l,_c);return g.multi=[],g.index=a,g.componentProviders=0,uM(g,f,d&&!l),g}(f?x1:M1,l.length,f,d,I);!f&&Qe&&(l[ye].providerFactory=dt),MC(g,o,a.length,0),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(dt),v.push(dt)}else MC(g,o,te>-1?te:ye,uM(l[f?ye:te],I,!f&&d));!f&&d&&Qe&&l[ye].componentProviders++}}}function MC(o,a,l,d){const f=Sf(a),g=function(o){return!!o.useClass}(a);if(f||g){const I=(g?ae(a.useClass):a).prototype.ngOnDestroy;if(I){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=A.indexOf(l);-1===x?A.push(l,[d,I]):A[x+1].push(d,I)}else A.push(l,I)}}}function uM(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function xC(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function M1(o,a,l,d){return kC(this.multi,[])}function x1(o,a,l,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Os(l,l[1],this.providerFactory.index,d);g=E.slice(0,v),kC(f,g);for(let I=v;I<E.length;I++)g.push(E[I])}else g=[],kC(f,g);return g}function kC(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function RC(o,a=[]){return l=>{l.providersResolver=(d,f)=>function(o,a,l){const d=Qt();if(d.firstCreatePass){const f=yi(o);AC(l,d.data,d.blueprint,f,!0),AC(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Mv{}class PC{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${ce(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Gd=(()=>{class o{}return o.NULL=new PC,o})();function k1(){return $d(Yn(),Re())}function $d(o,a){return new rp(ur(o,a))}let rp=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=k1,o})();function hM(o){return o instanceof rp?o.nativeElement:o}class kv{}let fM=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function(){const o=Re(),l=pn(Yn().index,o);return function(o){return o[11]}(Di(l)?l:o)}(),o})(),gM=(()=>{class o{}return o.\u0275prov=nn({token:o,providedIn:"root",factory:()=>null}),o})();class Ma{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Rv=new Ma("13.0.3"),Ov={};function Ng(o,a,l,d,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(Ln(g)),us(g))for(let E=10;E<g.length;E++){const I=g[E],A=I[1].firstChild;null!==A&&Ng(I[1],I,A,d)}const v=l.type;if(8&v)Ng(o,a,l.child,d);else if(32&v){const E=pf(l,a);let I;for(;I=E();)d.push(I)}else if(16&v){const E=Oy(a,l);if(Array.isArray(E))d.push(...E);else{const I=mf(a[16]);Ng(I[1],I,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class ip{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Ng(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(us(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Dy(a,d),Ja(l,d))}this._attachedToViewContainer=!1}Ay(this._lView[1],this._lView)}onDestroy(a){xD(this._lView[1],this._lView,null,a)}markForCheck(){W0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Z0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,l){ea(!0);try{Z0(o,a,l)}finally{ea(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,gf(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class bc extends ip{constructor(a){super(a),this._view=a}detectChanges(){jD(this._view)}checkNoChanges(){!function(o){ea(!0);try{jD(o)}finally{ea(!1)}}(this._view)}get context(){return null}}class _M extends Gd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=gt(a);return new Nv(l,this.ngModule)}}function FC(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const LC=new Bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>h0});class Nv extends Mv{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=a.selectors.map(pD).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return FC(this.componentDef.inputs)}get outputs(){return FC(this.componentDef.outputs)}create(a,l,d,f){const g=(f=f||this.ngModule)?function(o,a){return{get:(l,d,f)=>{const g=o.get(l,Ov,f);return g!==Ov||d===Ov?g:a.get(l,d,f)}}}(a,f.injector):a,v=g.get(kv,Wc),E=g.get(gM,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=d?function(o,a,l){if(tn(o))return o.selectRootElement(a,l===lt.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(I,d,this.componentDef.encapsulation):Ty(v.createRenderer(null,this.componentDef),A,function(o){const a=o.toLowerCase();return"svg"===a?Ml:"math"===a?"http://www.w3.org/1998/MathML/":null}(A)),V=this.componentDef.onPush?576:528,Z=function(o,a){return{components:[],scheduler:o||h0,clean:LP,playerHandler:a||null,flags:0}}(),te=Hy(0,null,null,1,0,null,null,null,null,null),ye=Ef(null,te,Z,V,null,null,v,I,E,g);let He,Qe;Wa(ye);try{const dt=function(o,a,l,d,f,g){const v=l[1];l[20]=o;const I=Md(v,20,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&($y(I,A,!0),null!==o&&(xn(f,o,A),null!==I.classes&&zm(f,o,I.classes),null!==I.styles&&cD(f,o,I.styles)));const x=d.createRenderer(o,a),V=Ef(l,AD(a),null,a.onPush?64:16,l[20],I,d,x,g||null,null);return v.firstCreatePass&&(Rs(Do(I,l),v,a.type),FD(v,I),LD(I,l.length,1)),Gy(l,V),l[20]=V}(x,this.componentDef,ye,v,I);if(x)if(d)xn(I,x,["ng-version",Rv.full]);else{const{attrs:Ae,classes:It}=function(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&l.push(g);else{if(!Zr(f))break;f=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Ae&&xn(I,x,Ae),It&&It.length>0&&zm(I,x,It.join(" "))}if(Qe=qo(te,20),void 0!==l){const Ae=Qe.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const on=l[It];Ae.push(null!=on?Array.from(on):null)}}He=function(o,a,l,d,f){const g=l[1],v=function(o,a,l){const d=Yn();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),VD(o,d,a,Cf(o,a,1,null),l));const f=Os(a,o,d.directiveStart,d);Rr(f,a);const g=ur(d,a);return g&&Rr(g,a),f}(g,l,a);if(d.components.push(v),o[8]=v,f&&f.forEach(I=>I(v,a)),a.contentQueries){const I=Yn();a.contentQueries(1,v,I.directiveStart)}const E=Yn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ps(E.index),ND(l[1],E,0,E.directiveStart,E.directiveEnd,a),PD(a,v)),v}(dt,this.componentDef,ye,Z,[iA]),Qm(te,ye,null)}finally{Qc()}return new BC(this.componentType,He,$d(Qe,ye),ye,Qe)}}class BC extends class{}{constructor(a,l,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new bc(f),this.componentType=a}get injector(){return new Ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class zd{}class Pg{}const Wd=new Map;class Fv extends zd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _M(this);const d=bn(a);this._bootstrapComponents=Oo(d.bootstrap),this._r3Injector=YD(a,l,[{provide:zd,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver}],ce(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=No.THROW_IF_NOT_FOUND,d=bt.Default){return a===No||a===zd||a===Y0?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Lv extends Pg{constructor(a){super(),this.moduleType=a,null!==bn(a)&&function(o){const a=new Set;!function l(d){const f=bn(d,!0),g=f.id;null!==g&&(function(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${ce(a)} vs ${ce(a.name)}`)}(g,Wd.get(g),d),Wd.set(g,d));const v=Oo(f.imports);for(const E of v)a.has(E)||(a.add(E),l(E))}(o)}(a)}create(a){return new Fv(this.moduleType,a)}}function Vv(o,a,l){const d=Sr()+o,f=Re();return f[d]===Wt?Ca(f,d,l?a.call(l):a()):function(o,a){return o[a]}(f,d)}function Bv(o,a,l,d){return function(o,a,l,d,f,g){const v=a+l;return wi(o,v,f)?Ca(o,v+1,g?d.call(g,f):d(f)):function(o,a){const l=o[a];return l===Wt?void 0:l}(o,v+1)}(Re(),Sr(),o,a,l,d)}function $C(o){return a=>{setTimeout(o,void 0,a)}}const pl=class extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var I,A,x;let f=a,g=l||(()=>null),v=d;if(a&&"object"==typeof a){const V=a;f=null==(I=V.next)?void 0:I.bind(V),g=null==(A=V.error)?void 0:A.bind(V),v=null==(x=V.complete)?void 0:x.bind(V)}this.__isAsync&&(g=$C(g),f&&(f=$C(f)),v&&(v=$C(v)));const E=super.subscribe({next:f,error:g,complete:v});return a instanceof j.w0&&a.add(E),E}};function B1(){return this._results[Mf()]()}class sp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Mf(),d=sp.prototype;d[l]||(d[l]=B1)}get changes(){return this._changes||(this._changes=new pl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=Qi(a);(this._changesDetected=!function(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Mu=(()=>{class o{}return o.__NG_ELEMENT_ID__=Uv,o})();const DM=Mu,U1=class extends DM{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=Ef(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(l)),Qm(l,d,a),new ip(d)}};function Uv(){return Ug(Yn(),Re())}function Ug(o,a){return 4&o.type?new U1(a,o,$d(o,a)):null}let jg=(()=>{class o{}return o.__NG_ELEMENT_ID__=j1,o})();function j1(){return MM(Yn(),Re())}const H1=jg,zC=class extends H1{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return $d(this._hostTNode,this._hostLView)}get injector(){return new Ki(this._hostTNode,this._hostLView)}get parentInjector(){const a=la(this._hostTNode,this._hostLView);if(Gn(a)){const l=Ka(a,this._hostLView),d=aa(a);return new Ki(l[1].data[d+8],l)}return new Ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=AM(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,g){const v=a&&!("function"==typeof a);let E;if(v)E=l;else{const V=l||{};E=V.index,d=V.injector,f=V.projectableNodes,g=V.ngModuleRef}const I=v?a:new Nv(gt(a)),A=d||this.parentInjector;if(!g&&null==I.ngModule&&A){const V=A.get(zd,null);V&&(g=V)}const x=I.create(A,f,void 0,g);return this.insert(x.hostView,E),x}insert(a,l){const d=a._lView,f=d[1];if(us(d[3])){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const V=d[3],Z=new zC(V,V[6],V[3]);Z.detach(Z.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function(o,a,l,d){const f=10+d,g=l.length;d>0&&(l[f-1][4]=a),d<g-10?(a[4]=l[f],Qa(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,d,v,g);const E=Ny(g,v),I=d[11],A=jm(I,v[7]);return null!==A&&function(o,a,l,d,f,g){d[0]=f,d[6]=a,gf(o,d,l,1,f,g)}(f,v[6],I,d,A,E),a.attachToViewContainerRef(),Qa(WC(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=AM(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Dy(this._lContainer,l);d&&(Ja(WC(this._lContainer),l),Ay(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=Dy(this._lContainer,l);return d&&null!=Ja(WC(this._lContainer),l)?new ip(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function AM(o){return o[8]}function WC(o){return o[8]||(o[8]=[])}function MM(o,a){let l;const d=a[o.index];if(us(d))l=d;else{let f;if(8&o.type)f=Ln(d);else{const g=a[11];f=g.createComment("");const v=ur(o,a);bu(g,jm(g,v),f,function(o,a){return tn(o)?o.nextSibling(a):a.nextSibling}(g,v),!1)}a[o.index]=l=UD(d,a,f,o),Gy(a,l)}return new zC(l,o,a)}class qC{constructor(a){this.queryList=a,this.matches=null}clone(){return new qC(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZC{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<d;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new ZC(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==VM(a,l).matches&&this.queries[l].setDirty()}}class xM{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class KC{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new KC(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class YC{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new YC(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,l,z1(l,g)),this.matchTNodeWithReadOption(a,l,Lr(l,a,g,!1,!1))}else d===Mu?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Lr(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===rp||f===jg||f===Mu&&4&l.type)this.addMatch(l.index,-2);else{const g=Lr(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function z1(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function q1(o,a,l,d){return-1===l?function(o,a){return 11&o.type?$d(o,a):4&o.type?Ug(o,a):null}(a,o):-2===l?function(o,a,l){return l===rp?$d(a,o):l===Mu?Ug(a,o):l===jg?MM(a,o):void 0}(o,a,d):Os(o,o[1],l,a)}function kM(o,a,l,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,v=l.matches,E=[];for(let I=0;I<v.length;I+=2){const A=v[I];E.push(A<0?null:q1(a,g[A],v[I+1],l.metadata.read))}f.matches=E}return f.matches}function QC(o,a,l,d){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=kM(o,a,f,l);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)d.push(v[E/2]);else{const A=g[E+1],x=a[-I];for(let V=10;V<x.length;V++){const Z=x[V];Z[17]===Z[3]&&QC(Z[1],Z,A,d)}if(null!==x[9]){const V=x[9];for(let Z=0;Z<V.length;Z++){const te=V[Z];QC(te[1],te,A,d)}}}}}return d}function RM(o){const a=Re(),l=Qt(),d=ra();za(d+1);const f=VM(l,d);if(o.dirty&&Rl(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?QC(l,a,d,[]):kM(l,a,f,d);o.reset(g,hM),o.notifyOnChanges()}return!0}return!1}function OM(o,a,l){const d=Qt();d.firstCreatePass&&(LM(d,new xM(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),FM(d,Re(),a)}function NM(o,a,l,d){const f=Qt();if(f.firstCreatePass){const g=Yn();LM(f,new xM(a,l,d),g.index),function(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}FM(f,Re(),l)}function PM(){return o=Re(),a=ra(),o[19].queries[a].queryList;var o,a}function FM(o,a,l){const d=new sp(4==(4&l));xD(o,a,d,d.destroy),null===a[19]&&(a[19]=new ZC),a[19].queries.push(new qC(d))}function LM(o,a,l){null===o.queries&&(o.queries=new KC),o.queries.track(new YC(a,l))}function VM(o,a){return o.queries.getByIndex(a)}function ap(...o){}const Yd=new Bn("Application Initializer");let ku=(()=>{class o{constructor(l){this.appInits=l,this.resolve=ap,this.reject=ap,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(hl(g))l.push(g);else if(SE(g)){const v=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(G(Yd,8))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const Fi=new Bn("AppId"),ns={provide:Fi,useFactory:function(){return`${Wg()}${Wg()}${Wg()}`},deps:[]};function Wg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Kv=new Bn("Platform Initializer"),qg=new Bn("Platform ID"),Yv=new Bn("appBootstrapListener");let Qv=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const Qd=new Bn("LocaleId"),sI=new Bn("DefaultCurrencyCode");class Jv{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Zg=(()=>{class o{compileModuleSync(l){return new Lv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=Oo(bn(l).declarations).reduce((v,E)=>{const I=gt(E);return I&&v.push(new Nv(I)),v},[]);return new Jv(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const Kg=(()=>Promise.resolve(0))();function cp(o){"undefined"==typeof Zone?Kg.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class rs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pl(!1),this.onMicrotaskEmpty=new pl(!1),this.onStable=new pl(!1),this.onError=new pl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let o=At.requestAnimationFrame,a=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(At,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,nb(o),o.isCheckStableRunning=!0,eb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),nb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,g,v,E)=>{try{return aI(o),l.invokeTask(f,g,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),Ei(o)}},onInvoke:(l,d,f,g,v,E,I)=>{try{return aI(o),l.invoke(f,g,v,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),Ei(o)}},onHasTask:(l,d,f,g)=>{l.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,nb(o),eb(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,tx,ap,ap);try{return g.runTask(v,l,d)}finally{g.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const tx={};function eb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function nb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function aI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Ei(o){o._nesting--,eb(o)}class up{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pl,this.onMicrotaskEmpty=new pl,this.onStable=new pl,this.onError=new pl}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let lI=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rs.assertNotInAngularZone(),cp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cp(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(G(rs))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})(),Jd=(()=>{class o{constructor(){this._applications=new Map,Xd.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Xd.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();class nx{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function rx(o){Xd=o}let Es,Xd=new nx;const Yg=new Bn("AllowMultipleToken");class cI{constructor(a,l){this.name=a,this.token=l}}function dI(o,a,l=[]){const d=`Platform: ${a}`,f=new Bn(d);return(g=[])=>{let v=Qg();if(!v||v.injector.get(Yg,!1))if(o)o(l.concat(g).concat({provide:f,useValue:!0}));else{const E=l.concat(g).concat({provide:f,useValue:!0},{provide:Q0,useValue:"platform"});!function(o){if(Es&&!Es.destroyed&&!Es.injector.get(Yg,!1))throw new $e("400","");Es=o.get(ob);const a=o.get(Kv,null);a&&a.forEach(l=>l())}(No.create({providers:E,name:d}))}return function(o){const a=Qg();if(!a)throw new $e("401","");return a}()}}function Qg(){return Es&&!Es.destroyed?Es:null}let ob=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function(o,a){let l;return l="noop"===o?new up:("zone.js"===o?void 0:o)||new rs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:rs,useValue:E}];return E.run(()=>{const A=No.create({providers:I,parent:this.injector,name:l.moduleType.name}),x=l.create(A),V=x.injector.get(ff,null);if(!V)throw new $e("402","");return E.runOutsideAngular(()=>{const Z=E.onError.subscribe({next:te=>{V.handleError(te)}});x.onDestroy(()=>{Ur(this._modules,x),Z.unsubscribe()})}),function(o,a,l){try{const d=l();return hl(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(V,E,()=>{const Z=x.injector.get(ku);return Z.runInitializers(),Z.donePromise.then(()=>(function(o){Kt(o,"Expected localeId to be defined"),"string"==typeof o&&(Tv=o.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Qd,Sg)||Sg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(l,d=[]){const f=Jg({},d);return function(o,a,l){const d=new Lv(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const d=l.injector.get(Ru);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new $e("403","");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(G(No))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();function Jg(o,a){return Array.isArray(a)?a.reduce(Jg,o):nt(nt({},o),a)}let Ru=(()=>{class o{constructor(l,d,f,g,v){this._zone=l,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new N.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new N.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{rs.assertNotInAngularZone(),cp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),V.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,he.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new $e("405","");let f;f=l instanceof Mv?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function(o){return o.isBoundToModule}(f)?void 0:this._injector.get(zd),E=f.create(No.NULL,[],d||f.selector,g),I=E.location.nativeElement,A=E.injector.get(lI,null),x=A&&E.injector.get(Jd);return A&&x&&x.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Ur(this.components,E),x&&x.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new $e("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Ur(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Yv,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(G(rs),G(No),G(ff),G(Gd),G(ku))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();function Ur(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let e_=!0,fI=!1;function ox(){return fI=!0,e_}function pI(){if(fI)throw new Error("Cannot enable prod mode after platform setup.");e_=!1}let lb=(()=>{class o{}return o.__NG_ELEMENT_ID__=ax,o})();function ax(o){return function(o,a,l){if(Kn(o)&&!l){const d=pn(o.index,a);return new ip(d,d)}return 47&o.type?new ip(a[16],a):null}(Yn(),Re(),16==(16&o))}class fp{constructor(){}supports(a){return tg(a)}create(a){return new yb(a)}}const vI=(o,a)=>a;class yb{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||vI}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,g=null;for(;l||d;){const v=!d||l&&l.currentIndex<s_(d,f,g)?l:d,E=s_(v,f,g),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const A=E-f,x=I-f;if(A!=x){for(let Z=0;Z<A;Z++){const te=Z<g.length?g[Z]:g[Z]=0,ye=te+Z;x<=ye&&ye<A&&(g[Z]=te+1)}g[v.previousIndex]=x-A}}E!==I&&a(v,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!tg(a))throw new Error(`Error trying to diff '${ce(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),d=!0),l=l._next}else f=0,function(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Mf()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{v=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,E,v,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new bI(l,d),g,f),a}_verifyReinsertion(a,l,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new th),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new th),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class bI{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class th{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new wI,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function s_(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class o_{constructor(){}supports(a){return a instanceof Map||ng(a)}create(){return new vb}}class vb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||ng(a)))throw new Error(`Error trying to diff '${ce(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new a_(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class a_{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nh(){return new pp([new fp])}let pp=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||nh()),deps:[[o,new bi,new mn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(o){return o.name||typeof o}(l)}'`)}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:nh}),o})();function l_(){return new Ou([new o_])}let Ou=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||l_()),deps:[[o,new bi,new mn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:l_}),o})();const bb=[new o_],CI=new pp([new fp]),II=new Ou(bb),mp=dI(null,"core",[{provide:qg,useValue:"unknown"},{provide:ob,deps:[No]},{provide:Jd,deps:[]},{provide:Qv,deps:[]}]),wb=[{provide:Ru,useClass:Ru,deps:[rs,No,ff,Gd,ku]},{provide:LC,deps:[rs],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:ku,useClass:ku,deps:[[new mn,Yd]]},{provide:Zg,useClass:Zg,deps:[]},ns,{provide:pp,useFactory:function(){return CI},deps:[]},{provide:Ou,useFactory:function(){return II},deps:[]},{provide:Qd,useFactory:function(o){return o||"undefined"!=typeof $localize&&$localize.locale||Sg},deps:[[new vr(Qd),new mn,new bi]]},{provide:sI,useValue:"USD"}];let Eb=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(G(Ru))},o.\u0275mod=J({type:o}),o.\u0275inj=Un({providers:wb}),o})()},6293:(st,Ce,P)=>{P.d(Ce,{Z:()=>$e});var u=P(4213),j=P(1177),N=P(1572),oe=P(3855);class he{constructor(Ue,se){this._delegate=Ue,this.firebase=se,(0,N._addComponent)(Ue,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ue,se=N._DEFAULT_ENTRY_NAME){var Se;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(Ue);return!Be.isInitialized()&&"EXPLICIT"===(null===(Se=Be.getComponent())||void 0===Se?void 0:Se.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:se})}_removeServiceInstance(Ue,se=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(se)}_addComponent(Ue){(0,N._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,N._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const ze=function(ze){const Ue={},se={__esModule:!0,initializeApp:function(Xe,Ie={}){const K=N.initializeApp(Xe,Ie);if((0,u.r3)(Ue,K.name))return Ue[K.name];const ne=new ze(K,se);return Ue[K.name]=ne,ne},app:Be,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function(Xe){const Ie=Xe.name,K=Ie.replace("-compat","");if(N._registerComponent(Xe)&&"PUBLIC"===Xe.type){const ne=(fe=Be())=>{if("function"!=typeof fe[K])throw re.create("invalid-app-argument",{appName:Ie});return fe[K]()};void 0!==Xe.serviceProps&&(0,u.ZB)(ne,Xe.serviceProps),se[K]=ne,ze.prototype[K]=function(...fe){return this._getService.bind(this,Ie).apply(this,Xe.multipleInstances?fe:[])}}return"PUBLIC"===Xe.type?se[K]:null},removeApp:function(Xe){delete Ue[Xe]},useAsService:function(Xe,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:N}};function Be(Xe){if(!(0,u.r3)(Ue,Xe=Xe||N._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Xe});return Ue[Xe]}return se.default=se,Object.defineProperty(se,"apps",{get:function(){return Object.keys(Ue).map(Xe=>Ue[Xe])}}),Be.App=ze,se}(he);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function(se){(0,u.ZB)(ze,se)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),ze}(),q=new oe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=z;(0,N.registerVersion)("@firebase/app-compat","0.1.25",undefined)},1572:(st,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ti,_DEFAULT_ENTRY_NAME:()=>Ct,_addComponent:()=>Er,_addOrOverwriteComponent:()=>Xr,_apps:()=>Ft,_clearComponents:()=>ei,_components:()=>dn,_getProvider:()=>As,_registerComponent:()=>nn,_removeServiceInstance:()=>Un,deleteApp:()=>Cr,getApp:()=>Ne,getApps:()=>ar,initializeApp:()=>ni,onLog:()=>Fn,registerVersion:()=>en,setLogLevel:()=>lr});var u=P(8239),j=P(1177),N=P(3855),oe=P(4213),he=P(5600);class we{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function($){const ie=$.getComponent();return"VERSION"===(null==ie?void 0:ie.type)}(ke)){const it=ke.getImmediate();return`${it.library}/${it.version}`}return null}).filter(ke=>ke).join(" ")}}const ce="@firebase/app",z=new N.Yd("@firebase/app"),Ct="[DEFAULT]",Kt={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ft=new Map,dn=new Map;function Er($,ie){try{$.container.addComponent(ie)}catch(ke){z.debug(`Component ${ie.name} failed to register with FirebaseApp ${$.name}`,ke)}}function Xr($,ie){$.container.addOrOverwriteComponent(ie)}function nn($){const ie=$.name;if(dn.has(ie))return z.debug(`There were multiple attempts to register component ${ie}.`),!1;dn.set(ie,$);for(const ke of Ft.values())Er(ke,$);return!0}function As($,ie){const ke=$.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),$.container.getProvider(ie)}function Un($,ie,ke=Ct){As($,ie).clearInstance(ke)}function ei(){dn.clear()}const yn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Zs{constructor(ie,ke,it){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const ti="9.8.1";function ni($,ie={}){"object"!=typeof ie&&(ie={name:ie});const ke=Object.assign({name:Ct,automaticDataCollectionEnabled:!1},ie),it=ke.name;if("string"!=typeof it||!it)throw yn.create("bad-app-name",{appName:String(it)});const xt=Ft.get(it);if(xt){if((0,oe.vZ)($,xt.options)&&(0,oe.vZ)(ke,xt.config))return xt;throw yn.create("duplicate-app",{appName:it})}const Ot=new j.H0(it);for(const Nt of dn.values())Ot.addComponent(Nt);const Mn=new Zs($,ke,Ot);return Ft.set(it,Mn),Mn}function Ne($=Ct){const ie=Ft.get($);if(!ie)throw yn.create("no-app",{appName:$});return ie}function ar(){return Array.from(Ft.values())}function Cr($){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*($){const ie=$.name;Ft.has(ie)&&(Ft.delete(ie),yield Promise.all($.container.getProviders().map(ke=>ke.delete())),$.isDeleted=!0)})).apply(this,arguments)}function en($,ie,ke){var it;let xt=null!==(it=Kt[$])&&void 0!==it?it:$;ke&&(xt+=`-${ke}`);const Ot=xt.match(/\s|\//),Mn=ie.match(/\s|\//);if(Ot||Mn){const Nt=[`Unable to register library "${xt}" with version "${ie}":`];return Ot&&Nt.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Ot&&Mn&&Nt.push("and"),Mn&&Nt.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void z.warn(Nt.join(" "))}nn(new j.wA(`${xt}-version`,()=>({library:xt,version:ie}),"VERSION"))}function Fn($,ie){if(null!==$&&"function"!=typeof $)throw yn.create("invalid-log-argument");(0,N.Am)($,ie)}function lr($){(0,N.Ub)($)}const Wn="firebase-heartbeat-store";let vn=null;function _o(){return vn||(vn=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:($,ie)=>{0===ie&&$.createObjectStore(Wn)}}).catch($=>{throw yn.create("storage-open",{originalErrorMessage:$.message})})),vn}function lt(){return(lt=(0,u.Z)(function*($){try{return(yield _o()).transaction(Wn).objectStore(Wn).get(gi($))}catch(ie){throw yn.create("storage-get",{originalErrorMessage:ie.message})}})).apply(this,arguments)}function pt($,ie){return ls.apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*($,ie){try{const it=(yield _o()).transaction(Wn,"readwrite");return yield it.objectStore(Wn).put(ie,gi($)),it.done}catch(ke){throw yn.create("storage-set",{originalErrorMessage:ke.message})}})).apply(this,arguments)}function gi($){return`${$.name}!${$.options.appId}`}class gr{constructor(ie){this.container=ie,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new H(ke),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var ie=this;return(0,u.Z)(function*(){const it=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=tr();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==xt&&!ie._heartbeatsCache.heartbeats.some(Ot=>Ot.date===xt))return ie._heartbeatsCache.heartbeats.push({date:xt,agent:it}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(Ot=>{const Mn=new Date(Ot.date).valueOf();return Date.now()-Mn<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,u.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const ke=tr(),{heartbeatsToSend:it,unsentEntries:xt}=function($,ie=1024){const ke=[];let it=$.slice();for(const xt of $){const Ot=ke.find(Mn=>Mn.agent===xt.agent);if(Ot){if(Ot.dates.push(xt.date),Q(ke)>ie){Ot.dates.pop();break}}else if(ke.push({agent:xt.agent,dates:[xt.date]}),Q(ke)>ie){ke.pop();break}it=it.slice(1)}return{heartbeatsToSend:ke,unsentEntries:it}}(ie._heartbeatsCache.heartbeats),Ot=(0,oe.L)(JSON.stringify({version:2,heartbeats:it}));return ie._heartbeatsCache.lastSentHeartbeatDate=ke,xt.length>0?(ie._heartbeatsCache.heartbeats=xt,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),Ot})()}}function tr(){return(new Date).toISOString().substring(0,10)}class H{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,u.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function($){return lt.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var ke=this;return(0,u.Z)(function*(){var it;if(yield ke._canUseIndexedDBPromise){const Ot=yield ke.read();return pt(ke.app,{lastSentHeartbeatDate:null!==(it=ie.lastSentHeartbeatDate)&&void 0!==it?it:Ot.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var ke=this;return(0,u.Z)(function*(){var it;if(yield ke._canUseIndexedDBPromise){const Ot=yield ke.read();return pt(ke.app,{lastSentHeartbeatDate:null!==(it=ie.lastSentHeartbeatDate)&&void 0!==it?it:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...ie.heartbeats]})}})()}}function Q($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}nn(new j.wA("platform-logger",ie=>new we(ie),"PRIVATE")),nn(new j.wA("heartbeat",ie=>new gr(ie),"PRIVATE")),en(ce,"0.7.24",""),en(ce,"0.7.24","esm2017"),en("fire-js","")},1177:(st,Ce,P)=>{P.d(Ce,{wA:()=>N,H0:()=>ce,zt:()=>he});var u=P(8239),j=P(4213);class N{constructor(z,q,ae){this.name=z,this.instanceFactory=q,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const oe="[DEFAULT]";class he{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ae=new j.BH;if(this.instancesDeferred.set(q,ae),this.isInitialized(q)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:q});We&&ae.resolve(We)}catch(We){}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ae=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),We=null!==(q=null==z?void 0:z.optional)&&void 0!==q&&q;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if("EAGER"===z.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:oe})}catch(q){}for(const[q,ae]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(q);try{const xe=this.getOrInitializeService({instanceIdentifier:We});ae.resolve(xe)}catch(xe){}}}}clearInstance(z=oe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,u.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...q.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=oe){return this.instances.has(z)}getOptions(z=oe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ae=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ae,options:q});for(const[xe,$e]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(xe)&&$e.resolve(We);return We}onInit(z,q){var ae;const We=this.normalizeInstanceIdentifier(q),xe=null!==(ae=this.onInitCallbacks.get(We))&&void 0!==ae?ae:new Set;xe.add(z),this.onInitCallbacks.set(We,xe);const $e=this.instances.get(We);return $e&&z($e,We),()=>{xe.delete(z)}}invokeOnInitCallbacks(z,q){const ae=this.onInitCallbacks.get(q);if(ae)for(const We of ae)try{We(z,q)}catch(xe){}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ae=this.instances.get(z);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===oe?void 0:ge),options:q}),this.instances.set(z,ae),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ae,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ae)}catch(We){}var ge;return ae||null}normalizeInstanceIdentifier(z=oe){return this.component?this.component.multipleInstances?z:oe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new he(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},3855:(st,Ce,P)=>{P.d(Ce,{in:()=>j,Yd:()=>re,Ub:()=>ce,Am:()=>ge});const u=[];var j=(()=>{return(z=j||(j={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",j;var z})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},oe=j.INFO,he={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},we=(z,q,...ae)=>{if(q<z.logLevel)return;const We=(new Date).toISOString(),xe=he[q];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[xe](`[${We}]  ${z.name}:`,...ae)};class re{constructor(q){this.name=q,this._logLevel=oe,this._logHandler=we,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in j))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...q),this._logHandler(this,j.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...q),this._logHandler(this,j.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,j.INFO,...q),this._logHandler(this,j.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,j.WARN,...q),this._logHandler(this,j.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...q),this._logHandler(this,j.ERROR,...q)}}function ce(z){u.forEach(q=>{q.setLogLevel(z)})}function ge(z,q){for(const ae of u){let We=null;q&&q.level&&(We=N[q.level]),ae.userLogHandler=null===z?null:(xe,$e,...ze)=>{const Ue=ze.map(se=>{if(null==se)return null;if("string"==typeof se)return se;if("number"==typeof se||"boolean"==typeof se)return se.toString();if(se instanceof Error)return se.message;try{return JSON.stringify(se)}catch(Se){return null}}).filter(se=>se).join(" ");$e>=(null!=We?We:xe.logLevel)&&z({level:j[$e].toLowerCase(),message:Ue,args:ze,type:xe.name})}}}},5600:(st,Ce,P)=>{P.d(Ce,{Lj:()=>je,X3:()=>Be});var u=P(8239);let N,oe;const re=new WeakMap,ce=new WeakMap,ge=new WeakMap,z=new WeakMap,q=new WeakMap;let xe={get(Ie,K,ne){if(Ie instanceof IDBTransaction){if("done"===K)return ce.get(Ie);if("objectStoreNames"===K)return Ie.objectStoreNames||ge.get(Ie);if("store"===K)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return se(Ie[K])},set:(Ie,K,ne)=>(Ie[K]=ne,!0),has:(Ie,K)=>Ie instanceof IDBTransaction&&("done"===K||"store"===K)||K in Ie};function Ue(Ie){return"function"==typeof Ie?function(Ie){return Ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Ie)?function(...K){return Ie.apply(Se(this),K),se(re.get(this))}:function(...K){return se(Ie.apply(Se(this),K))}:function(K,...ne){const fe=Ie.call(Se(this),K,...ne);return ge.set(fe,K.sort?K.sort():[K]),se(fe)}}(Ie):(Ie instanceof IDBTransaction&&function(Ie){if(ce.has(Ie))return;const K=new Promise((ne,fe)=>{const ve=()=>{Ie.removeEventListener("complete",Oe),Ie.removeEventListener("error",ue),Ie.removeEventListener("abort",ue)},Oe=()=>{ne(),ve()},ue=()=>{fe(Ie.error||new DOMException("AbortError","AbortError")),ve()};Ie.addEventListener("complete",Oe),Ie.addEventListener("error",ue),Ie.addEventListener("abort",ue)});ce.set(Ie,K)}(Ie),((Ie,K)=>K.some(ne=>Ie instanceof ne))(Ie,N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Ie,xe):Ie)}function se(Ie){if(Ie instanceof IDBRequest)return function(Ie){const K=new Promise((ne,fe)=>{const ve=()=>{Ie.removeEventListener("success",Oe),Ie.removeEventListener("error",ue)},Oe=()=>{ne(se(Ie.result)),ve()},ue=()=>{fe(Ie.error),ve()};Ie.addEventListener("success",Oe),Ie.addEventListener("error",ue)});return K.then(ne=>{ne instanceof IDBCursor&&re.set(ne,Ie)}).catch(()=>{}),q.set(K,Ie),K}(Ie);if(z.has(Ie))return z.get(Ie);const K=Ue(Ie);return K!==Ie&&(z.set(Ie,K),q.set(K,Ie)),K}const Se=Ie=>q.get(Ie);function Be(Ie,K,{blocked:ne,upgrade:fe,blocking:ve,terminated:Oe}={}){const ue=indexedDB.open(Ie,K),Et=se(ue);return fe&&ue.addEventListener("upgradeneeded",zt=>{fe(se(ue.result),zt.oldVersion,zt.newVersion,se(ue.transaction))}),ne&&ue.addEventListener("blocked",()=>ne()),Et.then(zt=>{Oe&&zt.addEventListener("close",()=>Oe()),ve&&zt.addEventListener("versionchange",()=>ve())}).catch(()=>{}),Et}function je(Ie,{blocked:K}={}){const ne=indexedDB.deleteDatabase(Ie);return K&&ne.addEventListener("blocked",()=>K()),se(ne).then(()=>{})}const ut=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],Ze=new Map;function Xe(Ie,K){if(!(Ie instanceof IDBDatabase)||K in Ie||"string"!=typeof K)return;if(Ze.get(K))return Ze.get(K);const ne=K.replace(/FromIndex$/,""),fe=K!==ne,ve=Fe.includes(ne);if(!(ne in(fe?IDBIndex:IDBObjectStore).prototype)||!ve&&!ut.includes(ne))return;const Oe=function(){var ue=(0,u.Z)(function*(Et,...zt){const er=this.transaction(Et,ve?"readwrite":"readonly");let Ct=er.store;return fe&&(Ct=Ct.index(zt.shift())),(yield Promise.all([Ct[ne](...zt),ve&&er.done]))[0]});return function(zt){return ue.apply(this,arguments)}}();return Ze.set(K,Oe),Oe}var Ie;xe=mi(nt({},Ie=xe),{get:(K,ne,fe)=>Xe(K,ne)||Ie.get(K,ne,fe),has:(K,ne)=>!!Xe(K,ne)||Ie.has(K,ne)})},8239:(st,Ce,P)=>{function u(N,oe,he,we,re,ce,ge){try{var z=N[ce](ge),q=z.value}catch(ae){return void he(ae)}z.done?oe(q):Promise.resolve(q).then(we,re)}function j(N){return function(){var oe=this,he=arguments;return new Promise(function(we,re){var ce=N.apply(oe,he);function ge(q){u(ce,we,re,ge,z,"next",q)}function z(q){u(ce,we,re,ge,z,"throw",q)}ge(void 0)})}}P.d(Ce,{Z:()=>j})}},st=>{st(st.s=2746)}]);