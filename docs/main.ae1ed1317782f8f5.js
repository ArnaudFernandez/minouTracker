var JQ=Object.defineProperty,eX=Object.defineProperties,tX=Object.getOwnPropertyDescriptors,uz=Object.getOwnPropertySymbols,nX=Object.prototype.hasOwnProperty,rX=Object.prototype.propertyIsEnumerable,dz=(St,M,R)=>M in St?JQ(St,M,{enumerable:!0,configurable:!0,writable:!0,value:R}):St[M]=R,kt=(St,M)=>{for(var R in M||(M={}))nX.call(M,R)&&dz(St,R,M[R]);if(uz)for(var R of uz(M))rX.call(M,R)&&dz(St,R,M[R]);return St},ds=(St,M)=>eX(St,tX(M));(self.webpackChunkfoodTrackingApp=self.webpackChunkfoodTrackingApp||[]).push([[179],{7905:(St,M,R)=>{"use strict";R.d(M,{hO:()=>Xe,xv:()=>he,Dh:()=>re,GT:()=>U,cc:()=>qe,on:()=>te,pX:()=>O});var o=R(3668),C=R(7892),b=R(7233);St=R.hmd(St);const k=["ngOnDestroy"],O=(ge,X,Se,De={})=>new Proxy(ge,{get:(Fe,Ne)=>Se.runOutsideAngular(()=>{var Ue;if(ge[Ne])return(null===(Ue=null==De?void 0:De.spy)||void 0===Ue?void 0:Ue.get)&&De.spy.get(Ne,ge[Ne]),ge[Ne];if(k.indexOf(Ne)>-1)return()=>{};const ue=X.toPromise().then(Me=>{const q=Me&&Me[Ne];return"function"==typeof q?q.bind(Me):q&&q.then?q.then(Q=>Se.run(()=>Q)):Se.run(()=>q)});return new Proxy(()=>{},{get:(Me,q)=>ue[q],apply:(Me,q,Q)=>ue.then(ne=>{var ie;const Ee=ne&&ne(...Q);return(null===(ie=null==De?void 0:De.spy)||void 0===ie?void 0:ie.apply)&&De.spy.apply(Ne,Q,Ee),Ee})})})}),U=(ge,X)=>{X.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(De=>{Object.defineProperty(ge.prototype,De,Object.getOwnPropertyDescriptor(Se.prototype||Se,De))})})};class Y{constructor(X){return X}}const re=new o.OlP("angularfire2.app.options"),he=new o.OlP("angularfire2.app.name");function te(ge,X,Se){const Fe="object"==typeof Se&&Se||{};Fe.name=Fe.name||"string"==typeof Se&&Se||"[DEFAULT]";const Ue=C.Z.apps.filter(ue=>ue&&ue.name===Fe.name)[0]||X.runOutsideAngular(()=>C.Z.initializeApp(ge,Fe));try{JSON.stringify(ge)!==JSON.stringify(Ue.options)&&J("error",`${Ue.name} Firebase App already initialized with different options${St.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ue){}return new Y(Ue)}const J=(ge,...X)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[ge](...X)},we={provide:Y,useFactory:te,deps:[re,o.R0b,[new o.FiY,he]]};let Xe=(()=>{class ge{constructor(Se){C.Z.registerVersion("angularfire",b.q4.full,"core"),C.Z.registerVersion("angularfire",b.q4.full,"app-compat"),C.Z.registerVersion("angular",o.q4F.full,Se.toString())}static initializeApp(Se,De){return{ngModule:ge,providers:[{provide:re,useValue:Se},{provide:he,useValue:De}]}}}return ge.\u0275fac=function(Se){return new(Se||ge)(o.LFG(o.Lbi))},ge.\u0275mod=o.oAB({type:ge}),ge.\u0275inj=o.cJS({providers:[we]}),ge})();function qe(ge,X,Se,De,Fe){const[,Ne,Ue]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===ge)||[];if(Ne)return function(ge,X){try{return ge.toString()===X.toString()}catch(Se){return ge===X}}(Fe,Ue)||(Ie("error",`${X} was already initialized on the ${Se} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:Fe,was:Ue})),Ne;{const ue=De();return globalThis.\u0275AngularfireInstanceCache.push([ge,ue,Fe]),ue}}const ze=!!St.hot,Ie=(ge,...X)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[ge](...X)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(St,M,R)=>{"use strict";R.d(M,{q4:()=>gu,iC:()=>$l,HU:()=>Ic,vb:()=>uo,JM:()=>yu,u3:()=>wu});var o=R(3668),C=R(7713),b=R(8239),k=R(1572),O=R(4213),U=R(1177),Y=R(3855),re=R(5600);const he="@firebase/installations",we="w:0.5.9",Xe="FIS_v2",X=new O.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Se(A){return A instanceof O.ZR&&A.code.includes("request-failed")}function De({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function Fe(A){return{token:A.token,requestStatus:2,expiresIn:ne(A.expiresIn),creationTime:Date.now()}}function Ne(A,P){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,b.Z)(function*(A,P){const Ce=(yield P.json()).error;return X.create("request-failed",{requestName:A,serverCode:Ce.code,serverMessage:Ce.message,serverStatus:Ce.status})})).apply(this,arguments)}function ue({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Me(A,{refreshToken:P}){const Z=ue(A);return Z.append("Authorization",function(A){return`${Xe} ${A}`}(P)),Z}function q(A){return Q.apply(this,arguments)}function Q(){return(Q=(0,b.Z)(function*(A){const P=yield A();return P.status>=500&&P.status<600?A():P})).apply(this,arguments)}function ne(A){return Number(A.replace("s","000"))}function Ee(A,P){return W.apply(this,arguments)}function W(){return(W=(0,b.Z)(function*({appConfig:A,heartbeatServiceProvider:P},{fid:Z}){const Ce=De(A),ke=ue(A),et=P.getImmediate({optional:!0});if(et){const yn=yield et.getHeartbeatsHeader();yn&&ke.append("x-firebase-client",yn)}const Mt={method:"POST",headers:ke,body:JSON.stringify({fid:Z,authVersion:Xe,appId:A.appId,sdkVersion:we})},pn=yield q(()=>fetch(Ce,Mt));if(pn.ok){const yn=yield pn.json();return{fid:yn.fid||Z,registrationStatus:2,refreshToken:yn.refreshToken,authToken:Fe(yn.authToken)}}throw yield Ne("Create Installation",pn)})).apply(this,arguments)}function ce(A){return new Promise(P=>{setTimeout(P,A)})}const lt=/^[cdef][\w-]{21}$/;function rt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const Z=function(A){return function(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return lt.test(Z)?Z:""}catch(A){return""}}function $t(A){return`${A.appName}!${A.appId}`}const Jt=new Map;function vn(A,P){const Z=$t(A);_n(Z,P),function(A,P){const Z=(!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=A=>{_n(A.data.key,A.data.fid)}),ir);Z&&Z.postMessage({key:A,fid:P}),0===Jt.size&&ir&&(ir.close(),ir=null)}(Z,P)}function _n(A,P){const Z=Jt.get(A);if(Z)for(const Ce of Z)Ce(P)}let ir=null;const vr="firebase-installations-store";let Si=null;function _i(){return Si||(Si=(0,re.X3)("firebase-installations-database",1,{upgrade:(A,P)=>{0===P&&A.createObjectStore(vr)}})),Si}function en(A,P){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,b.Z)(function*(A,P){const Z=$t(A),ke=(yield _i()).transaction(vr,"readwrite"),et=ke.objectStore(vr),bt=yield et.get(Z);return yield et.put(P,Z),yield ke.done,(!bt||bt.fid!==P.fid)&&vn(A,P.fid),P})).apply(this,arguments)}function qn(A){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,b.Z)(function*(A){const P=$t(A),Ce=(yield _i()).transaction(vr,"readwrite");yield Ce.objectStore(vr).delete(P),yield Ce.done})).apply(this,arguments)}function Hn(A,P){return zi.apply(this,arguments)}function zi(){return(zi=(0,b.Z)(function*(A,P){const Z=$t(A),ke=(yield _i()).transaction(vr,"readwrite"),et=ke.objectStore(vr),bt=yield et.get(Z),Mt=P(bt);return void 0===Mt?yield et.delete(Z):yield et.put(Mt,Z),yield ke.done,Mt&&(!bt||bt.fid!==Mt.fid)&&vn(A,Mt.fid),Mt})).apply(this,arguments)}function or(A){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,b.Z)(function*(A){let P;const Z=yield Hn(A.appConfig,Ce=>{const ke=Ri(Ce),et=xn(A,ke);return P=et.registrationPromise,et.installationEntry});return""===Z.fid?{installationEntry:yield P}:{installationEntry:Z,registrationPromise:P}})).apply(this,arguments)}function Ri(A){return Mn(A||{fid:rt(),registrationStatus:0})}function xn(A,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(X.create("app-offline"))};const Z={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},Ce=function(A,P){return Ft.apply(this,arguments)}(A,Z);return{installationEntry:Z,registrationPromise:Ce}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:ai(A)}:{installationEntry:P}}function Ft(){return(Ft=(0,b.Z)(function*(A,P){try{const Z=yield Ee(A,P);return en(A.appConfig,Z)}catch(Z){throw Se(Z)&&409===Z.customData.serverCode?yield qn(A.appConfig):yield en(A.appConfig,{fid:P.fid,registrationStatus:0}),Z}})).apply(this,arguments)}function ai(A){return li.apply(this,arguments)}function li(){return(li=(0,b.Z)(function*(A){let P=yield jr(A.appConfig);for(;1===P.registrationStatus;)yield ce(100),P=yield jr(A.appConfig);if(0===P.registrationStatus){const{installationEntry:Z,registrationPromise:Ce}=yield or(A);return Ce||Z}return P})).apply(this,arguments)}function jr(A){return Hn(A,P=>{if(!P)throw X.create("installation-not-found");return Mn(P)})}function Mn(A){return function(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Kn(A,P){return Re.apply(this,arguments)}function Re(){return(Re=(0,b.Z)(function*({appConfig:A,heartbeatServiceProvider:P},Z){const Ce=Ae(A,Z),ke=Me(A,Z),et=P.getImmediate({optional:!0});if(et){const yn=yield et.getHeartbeatsHeader();yn&&ke.append("x-firebase-client",yn)}const Mt={method:"POST",headers:ke,body:JSON.stringify({installation:{sdkVersion:we,appId:A.appId}})},pn=yield q(()=>fetch(Ce,Mt));if(pn.ok)return Fe(yield pn.json());throw yield Ne("Generate Auth Token",pn)})).apply(this,arguments)}function Ae(A,{fid:P}){return`${De(A)}/${P}/authTokens:generate`}function Le(A){return it.apply(this,arguments)}function it(){return(it=(0,b.Z)(function*(A,P=!1){let Z;const Ce=yield Hn(A.appConfig,et=>{if(!fn(et))throw X.create("not-registered");const bt=et.authToken;if(!P&&zn(bt))return et;if(1===bt.requestStatus)return Z=xe(A,P),et;{if(!navigator.onLine)throw X.create("app-offline");const Mt=Cr(et);return Z=wt(A,Mt),Mt}});return Z?yield Z:Ce.authToken})).apply(this,arguments)}function xe(A,P){return $e.apply(this,arguments)}function $e(){return($e=(0,b.Z)(function*(A,P){let Z=yield ht(A.appConfig);for(;1===Z.authToken.requestStatus;)yield ce(100),Z=yield ht(A.appConfig);const Ce=Z.authToken;return 0===Ce.requestStatus?Le(A,P):Ce})).apply(this,arguments)}function ht(A){return Hn(A,P=>{if(!fn(P))throw X.create("not-registered");return function(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function wt(A,P){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,b.Z)(function*(A,P){try{const Z=yield Kn(A,P),Ce=Object.assign(Object.assign({},P),{authToken:Z});return yield en(A.appConfig,Ce),Z}catch(Z){if(!Se(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const Ce=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield en(A.appConfig,Ce)}else yield qn(A.appConfig);throw Z}})).apply(this,arguments)}function fn(A){return void 0!==A&&2===A.registrationStatus}function zn(A){return 2===A.requestStatus&&!function(A){const P=Date.now();return P<A.creationTime||A.creationTime+A.expiresIn<P+36e5}(A)}function Cr(A){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:P})}function Oe(){return(Oe=(0,b.Z)(function*(A){const P=A,{installationEntry:Z,registrationPromise:Ce}=yield or(P);return Ce?Ce.catch(console.error):Le(P).catch(console.error),Z.fid})).apply(this,arguments)}function It(){return(It=(0,b.Z)(function*(A,P=!1){const Z=A;return yield sn(Z),(yield Le(Z,P)).token})).apply(this,arguments)}function sn(A){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,b.Z)(function*(A){const{registrationPromise:P}=yield or(A);P&&(yield P)})).apply(this,arguments)}function Di(A){return X.create("missing-app-config-values",{valueName:A})}const xr="installations";(0,k._registerComponent)(new U.wA(xr,A=>{const P=A.getProvider("app").getImmediate(),Z=function(A){if(!A||!A.options)throw Di("App Configuration");if(!A.name)throw Di("App Name");const P=["projectId","apiKey","appId"];for(const Z of P)if(!A.options[Z])throw Di(Z);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(P);return{app:P,appConfig:Z,heartbeatServiceProvider:(0,k._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,k._registerComponent)(new U.wA("installations-internal",A=>{const P=A.getProvider("app").getImmediate(),Z=(0,k._getProvider)(P,xr).getImmediate();return{getId:()=>function(A){return Oe.apply(this,arguments)}(Z),getToken:ke=>function(A){return It.apply(this,arguments)}(Z,ke)}},"PRIVATE")),(0,k.registerVersion)(he,"0.5.9"),(0,k.registerVersion)(he,"0.5.9","esm2017");const an="@firebase/remote-config",Bn=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Co{constructor(P,Z,Ce,ke){this.client=P,this.storage=Z,this.storageCache=Ce,this.logger=ke}isCachedDataFresh(P,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ce=Date.now()-Z,ke=Ce<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${ke}.`),ke}fetch(P){var Z=this;return(0,b.Z)(function*(){const[Ce,ke]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(ke&&Z.isCachedDataFresh(P.cacheMaxAgeMillis,Ce))return ke;P.eTag=ke&&ke.eTag;const et=yield Z.client.fetch(P),bt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===et.status&&bt.push(Z.storage.setLastSuccessfulFetchResponse(et)),yield Promise.all(bt),et})()}}function to(A=navigator){return A.languages&&A.languages[0]||A.language}class F{constructor(P,Z,Ce,ke,et,bt){this.firebaseInstallations=P,this.sdkVersion=Z,this.namespace=Ce,this.projectId=ke,this.apiKey=et,this.appId=bt}fetch(P){var Z=this;return(0,b.Z)(function*(){const[Ce,ke]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},pn={sdk_version:Z.sdkVersion,app_instance_id:Ce,app_instance_id_token:ke,app_id:Z.appId,language_code:to()},yn={method:"POST",headers:Mt,body:JSON.stringify(pn)},Wn=fetch(bt,yn),En=new Promise((ho,Ts)=>{P.signal.addEventListener(()=>{const Ia=new Error("The operation was aborted.");Ia.name="AbortError",Ts(Ia)})});let ni;try{yield Promise.race([Wn,En]),ni=yield Wn}catch(ho){let Ts="fetch-client-network";throw"AbortError"===ho.name&&(Ts="fetch-timeout"),Bn.create(Ts,{originalErrorMessage:ho.message})}let hr=ni.status;const ia=ni.headers.get("ETag")||void 0;let Is,Ca;if(200===ni.status){let ho;try{ho=yield ni.json()}catch(Ts){throw Bn.create("fetch-client-parse",{originalErrorMessage:Ts.message})}Is=ho.entries,Ca=ho.state}if("INSTANCE_STATE_UNSPECIFIED"===Ca?hr=500:"NO_CHANGE"===Ca?hr=304:("NO_TEMPLATE"===Ca||"EMPTY_CONFIG"===Ca)&&(Is={}),304!==hr&&200!==hr)throw Bn.create("fetch-status",{httpStatus:hr});return{status:hr,eTag:ia,config:Is}})()}}class Ze{constructor(P,Z){this.client=P,this.storage=Z}fetch(P){var Z=this;return(0,b.Z)(function*(){const Ce=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(P,Ce)})()}attemptFetch(P,{throttleEndTimeMillis:Z,backoffCount:Ce}){var ke=this;return(0,b.Z)(function*(){yield function(A,P){return new Promise((Z,Ce)=>{const ke=Math.max(P-Date.now(),0),et=setTimeout(Z,ke);A.addEventListener(()=>{clearTimeout(et),Ce(Bn.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,Z);try{const et=yield ke.client.fetch(P);return yield ke.storage.deleteThrottleMetadata(),et}catch(et){if(!function(A){if(!(A instanceof O.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(et))throw et;const bt={throttleEndTimeMillis:Date.now()+(0,O.$s)(Ce),backoffCount:Ce+1};return yield ke.storage.setThrottleMetadata(bt),ke.attemptFetch(P,bt)}})()}}class Dt{constructor(P,Z,Ce,ke,et){this.app=P,this._client=Z,this._storageCache=Ce,this._storage=ke,this._logger=et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yt(A,P){const Z=A.target.error||void 0;return Bn.create(P,{originalErrorMessage:Z&&Z.message})}const bn="app_namespace_store";class bi{constructor(P,Z,Ce,ke=function(){return new Promise((A,P)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=Ce=>{P(Yt(Ce,"storage-open"))},Z.onsuccess=Ce=>{A(Ce.target.result)},Z.onupgradeneeded=Ce=>{0===Ce.oldVersion&&Ce.target.result.createObjectStore(bn,{keyPath:"compositeKey"})}}catch(Z){P(Bn.create("storage-open",{originalErrorMessage:Z}))}})}()){this.appId=P,this.appName=Z,this.namespace=Ce,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var Z=this;return(0,b.Z)(function*(){const Ce=yield Z.openDbPromise;return new Promise((ke,et)=>{const Mt=Ce.transaction([bn],"readonly").objectStore(bn),pn=Z.createCompositeKey(P);try{const yn=Mt.get(pn);yn.onerror=Wn=>{et(Yt(Wn,"storage-get"))},yn.onsuccess=Wn=>{const En=Wn.target.result;ke(En?En.value:void 0)}}catch(yn){et(Bn.create("storage-get",{originalErrorMessage:yn&&yn.message}))}})})()}set(P,Z){var Ce=this;return(0,b.Z)(function*(){const ke=yield Ce.openDbPromise;return new Promise((et,bt)=>{const pn=ke.transaction([bn],"readwrite").objectStore(bn),yn=Ce.createCompositeKey(P);try{const Wn=pn.put({compositeKey:yn,value:Z});Wn.onerror=En=>{bt(Yt(En,"storage-set"))},Wn.onsuccess=()=>{et()}}catch(Wn){bt(Bn.create("storage-set",{originalErrorMessage:Wn&&Wn.message}))}})})()}delete(P){var Z=this;return(0,b.Z)(function*(){const Ce=yield Z.openDbPromise;return new Promise((ke,et)=>{const Mt=Ce.transaction([bn],"readwrite").objectStore(bn),pn=Z.createCompositeKey(P);try{const yn=Mt.delete(pn);yn.onerror=Wn=>{et(Yt(Wn,"storage-delete"))},yn.onsuccess=()=>{ke()}}catch(yn){et(Bn.create("storage-delete",{originalErrorMessage:yn&&yn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class wi{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,b.Z)(function*(){const Z=P.storage.getLastFetchStatus(),Ce=P.storage.getLastSuccessfulFetchTimestampMillis(),ke=P.storage.getActiveConfig(),et=yield Z;et&&(P.lastFetchStatus=et);const bt=yield Ce;bt&&(P.lastSuccessfulFetchTimestampMillis=bt);const Mt=yield ke;Mt&&(P.activeConfig=Mt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function _e(){return z.apply(this,arguments)}function z(){return(z=(0,b.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(A){return!1}})).apply(this,arguments)}(0,k._registerComponent)(new U.wA("remote-config",function(P,{instanceIdentifier:Z}){const Ce=P.getProvider("app").getImmediate(),ke=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,O.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:et,apiKey:bt,appId:Mt}=Ce.options;if(!et)throw Bn.create("registration-project-id");if(!bt)throw Bn.create("registration-api-key");if(!Mt)throw Bn.create("registration-app-id");const pn=new bi(Mt,Ce.name,Z=Z||"firebase"),yn=new wi(pn),Wn=new Y.Yd(an);Wn.logLevel=Y.in.ERROR;const En=new F(ke,k.SDK_VERSION,Z,et,bt,Mt),ni=new Ze(En,pn),hr=new Co(ni,pn,yn,Wn),ia=new Dt(Ce,hr,yn,pn,Wn);return function(A){const P=(0,O.m9)(A);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(ia),ia},"PUBLIC").setMultipleInstances(!0)),(0,k.registerVersion)(an,"0.3.8"),(0,k.registerVersion)(an,"0.3.8","esm2017");const S="/firebase-messaging-sw.js",N="/firebase-cloud-messaging-push-scope",L="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",se="google.c.a.c_id",ye="google.c.a.c_l",de="google.c.a.ts",be="google.c.a.e";var j=(()=>{return(A=j||(j={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",j;var A})();function pe(A){const P=new Uint8Array(A);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Te(A){const Z=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ce=atob(Z),ke=new Uint8Array(Ce.length);for(let et=0;et<Ce.length;++et)ke[et]=Ce.charCodeAt(et);return ke}const Qe="fcm_token_details_db",Ot="fcm_token_object_Store";function Lt(A){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,b.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(et=>et.name).includes(Qe))return null;let P=null;return(yield(0,re.X3)(Qe,5,{upgrade:(Ce=(0,b.Z)(function*(ke,et,bt,Mt){var pn;if(et<2||!ke.objectStoreNames.contains(Ot))return;const yn=Mt.objectStore(Ot),Wn=yield yn.index("fcmSenderId").get(A);if(yield yn.clear(),Wn)if(2===et){const En=Wn;if(!En.auth||!En.p256dh||!En.endpoint)return;P={token:En.fcmToken,createTime:null!==(pn=En.createTime)&&void 0!==pn?pn:Date.now(),subscriptionOptions:{auth:En.auth,p256dh:En.p256dh,endpoint:En.endpoint,swScope:En.swScope,vapidKey:"string"==typeof En.vapidKey?En.vapidKey:pe(En.vapidKey)}}}else if(3===et){const En=Wn;P={token:En.fcmToken,createTime:En.createTime,subscriptionOptions:{auth:pe(En.auth),p256dh:pe(En.p256dh),endpoint:En.endpoint,swScope:En.swScope,vapidKey:pe(En.vapidKey)}}}else if(4===et){const En=Wn;P={token:En.fcmToken,createTime:En.createTime,subscriptionOptions:{auth:pe(En.auth),p256dh:pe(En.p256dh),endpoint:En.endpoint,swScope:En.swScope,vapidKey:pe(En.vapidKey)}}}}),function(et,bt,Mt,pn){return Ce.apply(this,arguments)})})).close(),yield(0,re.Lj)(Qe),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),ln(P)?P:null;var Ce}),Vt.apply(this,arguments)}function ln(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:P}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const On="firebase-messaging-store";let To=null;function ro(){return To||(To=(0,re.X3)("firebase-messaging-database",1,{upgrade:(A,P)=>{0===P&&A.createObjectStore(On)}})),To}function Ir(A){return $o.apply(this,arguments)}function $o(){return($o=(0,b.Z)(function*(A){const P=qo(A),Ce=yield(yield ro()).transaction(On).objectStore(On).get(P);if(Ce)return Ce;{const ke=yield Lt(A.appConfig.senderId);if(ke)return yield Wo(A,ke),ke}})).apply(this,arguments)}function Wo(A,P){return pa.apply(this,arguments)}function pa(){return(pa=(0,b.Z)(function*(A,P){const Z=qo(A),ke=(yield ro()).transaction(On,"readwrite");return yield ke.objectStore(On).put(P,Z),yield ke.done,P})).apply(this,arguments)}function xi(A){return fc.apply(this,arguments)}function fc(){return(fc=(0,b.Z)(function*(A){const P=qo(A),Ce=(yield ro()).transaction(On,"readwrite");yield Ce.objectStore(On).delete(P),yield Ce.done})).apply(this,arguments)}function qo({appConfig:A}){return A.appId}const sr=new O.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bl(A,P){return ma.apply(this,arguments)}function ma(){return(ma=(0,b.Z)(function*(A,P){const Z=yield El(A),Ce=Va(P),ke={method:"POST",headers:Z,body:JSON.stringify(Ce)};let et;try{et=yield(yield fetch(cn(A.appConfig),ke)).json()}catch(bt){throw sr.create("token-subscribe-failed",{errorInfo:bt})}if(et.error)throw sr.create("token-subscribe-failed",{errorInfo:et.error.message});if(!et.token)throw sr.create("token-subscribe-no-token");return et.token})).apply(this,arguments)}function wl(A,P){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,b.Z)(function*(A,P){const Z=yield El(A),Ce=Va(P.subscriptionOptions),ke={method:"PATCH",headers:Z,body:JSON.stringify(Ce)};let et;try{et=yield(yield fetch(`${cn(A.appConfig)}/${P.token}`,ke)).json()}catch(bt){throw sr.create("token-update-failed",{errorInfo:bt})}if(et.error)throw sr.create("token-update-failed",{errorInfo:et.error.message});if(!et.token)throw sr.create("token-update-no-token");return et.token})).apply(this,arguments)}function pc(A,P){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,b.Z)(function*(A,P){const Ce={method:"DELETE",headers:yield El(A)};try{const et=yield(yield fetch(`${cn(A.appConfig)}/${P}`,Ce)).json();if(et.error)throw sr.create("token-unsubscribe-failed",{errorInfo:et.error.message})}catch(ke){throw sr.create("token-unsubscribe-failed",{errorInfo:ke})}})).apply(this,arguments)}function cn({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function El(A){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,b.Z)(function*({appConfig:A,installations:P}){const Z=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Va({p256dh:A,auth:P,endpoint:Z,vapidKey:Ce}){const ke={web:{endpoint:Z,auth:P,p256dh:A}};return Ce!==L&&(ke.web.applicationPubKey=Ce),ke}const Cl=6048e5;function ou(A){return Il.apply(this,arguments)}function Il(){return(Il=(0,b.Z)(function*(A){const P=yield Yo(A.swRegistration,A.vapidKey),Z={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:P.endpoint,auth:pe(P.getKey("auth")),p256dh:pe(P.getKey("p256dh"))},Ce=yield Ir(A.firebaseDependencies);if(Ce){if(au(Ce.subscriptionOptions,Z))return Date.now()>=Ce.createTime+Cl?Yn(A,{token:Ce.token,createTime:Date.now(),subscriptionOptions:Z}):Ce.token;try{yield pc(A.firebaseDependencies,Ce.token)}catch(ke){console.warn(ke)}return Kr(A.firebaseDependencies,Z)}return Kr(A.firebaseDependencies,Z)})).apply(this,arguments)}function id(A){return _t.apply(this,arguments)}function _t(){return(_t=(0,b.Z)(function*(A){const P=yield Ir(A.firebaseDependencies);P&&(yield pc(A.firebaseDependencies,P.token),yield xi(A.firebaseDependencies));const Z=yield A.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()})).apply(this,arguments)}function Yn(A,P){return Do.apply(this,arguments)}function Do(){return(Do=(0,b.Z)(function*(A,P){try{const Z=yield wl(A.firebaseDependencies,P),Ce=Object.assign(Object.assign({},P),{token:Z,createTime:Date.now()});return yield Wo(A.firebaseDependencies,Ce),Z}catch(Z){throw yield id(A),Z}})).apply(this,arguments)}function Kr(A,P){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,b.Z)(function*(A,P){const Ce={token:yield bl(A,P),createTime:Date.now(),subscriptionOptions:P};return yield Wo(A,Ce),Ce.token})).apply(this,arguments)}function Yo(A,P){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,b.Z)(function*(A,P){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Te(P)})})).apply(this,arguments)}function au(A,P){return P.vapidKey===A.vapidKey&&P.endpoint===A.endpoint&&P.auth===A.auth&&P.p256dh===A.p256dh}function ga(A){const P={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function(A,P){if(!P.notification)return;A.notification={};const Z=P.notification.title;Z&&(A.notification.title=Z);const Ce=P.notification.body;Ce&&(A.notification.body=Ce);const ke=P.notification.image;ke&&(A.notification.image=ke)}(P,A),function(A,P){!P.data||(A.data=P.data)}(P,A),function(A,P){if(!P.fcmOptions)return;A.fcmOptions={};const Z=P.fcmOptions.link;Z&&(A.fcmOptions.link=Z);const Ce=P.fcmOptions.analytics_label;Ce&&(A.fcmOptions.analyticsLabel=Ce)}(P,A),P}function Sl(A){return"object"==typeof A&&!!A&&se in A}function Fi(A,P){const Z=[];for(let Ce=0;Ce<A.length;Ce++)Z.push(A.charAt(Ce)),Ce<P.length&&Z.push(P.charAt(Ce));return Z.join("")}function Dl(A){return sr.create("missing-app-config-values",{valueName:A})}Fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qo{constructor(P,Z,Ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function(A){if(!A||!A.options)throw Dl("App Configuration Object");if(!A.name)throw Dl("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=A;for(const Ce of P)if(!Z[Ce])throw Dl(Ce);return{appName:A.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:ke,installations:Z,analyticsProvider:Ce}}_delete(){return Promise.resolve()}}function io(A){return Al.apply(this,arguments)}function Al(){return(Al=(0,b.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(S,{scope:N}),A.swRegistration.update().catch(()=>{})}catch(P){throw sr.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function sd(A,P){return xl.apply(this,arguments)}function xl(){return(xl=(0,b.Z)(function*(A,P){if(!P&&!A.swRegistration&&(yield io(A)),P||!A.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw sr.create("invalid-sw-registration");A.swRegistration=P}})).apply(this,arguments)}function Lh(A,P){return _a.apply(this,arguments)}function _a(){return(_a=(0,b.Z)(function*(A,P){P?A.vapidKey=P:A.vapidKey||(A.vapidKey=L)})).apply(this,arguments)}function ja(){return(ja=(0,b.Z)(function*(A,P){if(!navigator)throw sr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw sr.create("permission-blocked");return yield Lh(A,null==P?void 0:P.vapidKey),yield sd(A,null==P?void 0:P.serviceWorkerRegistration),ou(A)})).apply(this,arguments)}function Ml(A,P,Z){return gc.apply(this,arguments)}function gc(){return(gc=(0,b.Z)(function*(A,P,Z){const Ce=od(P);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(Ce,{message_id:Z[se],message_name:Z[ye],message_time:Z[de],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function od(A){switch(A){case j.NOTIFICATION_CLICKED:return"notification_open";case j.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _c(){return(_c=(0,b.Z)(function*(A,P){const Z=P.data;if(!Z.isFirebaseMessaging)return;A.onMessageHandler&&Z.messageType===j.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(ga(Z)):A.onMessageHandler.next(ga(Z)));const Ce=Z.data;Sl(Ce)&&"1"===Ce[be]&&(yield Ml(A,Z.messageType,Ce))})).apply(this,arguments)}const kl="@firebase/messaging";function uu(){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,b.Z)(function*(){try{yield(0,O.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,O.hl)()&&(0,O.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,k._registerComponent)(new U.wA("messaging",A=>{const P=new Qo(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function(A,P){return _c.apply(this,arguments)}(P,Z)),P},"PUBLIC")),(0,k._registerComponent)(new U.wA("messaging-internal",A=>{const P=A.getProvider("messaging").getImmediate();return{getToken:Ce=>function(A,P){return ja.apply(this,arguments)}(P,Ce)}},"PRIVATE")),(0,k.registerVersion)(kl,"0.9.13"),(0,k.registerVersion)(kl,"0.9.13","esm2017");const Rl="analytics",hu="firebase_id",fu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ad="https://www.googletagmanager.com/gtag/js",zr=new Y.Yd("@firebase/analytics");function Pl(A){return Promise.all(A.map(P=>P.catch(Z=>Z)))}function am(A,P){const Z=document.createElement("script");Z.src=`${ad}?l=${A}&id=${P}`,Z.async=!0,document.head.appendChild(Z)}function Ha(A,P,Z,Ce,ke,et){return vc.apply(this,arguments)}function vc(){return(vc=(0,b.Z)(function*(A,P,Z,Ce,ke,et){const bt=Ce[ke];try{if(bt)yield P[bt];else{const pn=(yield Pl(Z)).find(yn=>yn.measurementId===ke);pn&&(yield P[pn.appId])}}catch(Mt){zr.error(Mt)}A("config",ke,et)})).apply(this,arguments)}function za(A,P,Z,Ce,ke){return bc.apply(this,arguments)}function bc(){return(bc=(0,b.Z)(function*(A,P,Z,Ce,ke){try{let et=[];if(ke&&ke.send_to){let bt=ke.send_to;Array.isArray(bt)||(bt=[bt]);const Mt=yield Pl(Z);for(const pn of bt){const yn=Mt.find(En=>En.measurementId===pn),Wn=yn&&P[yn.appId];if(!Wn){et=[];break}et.push(Wn)}}0===et.length&&(et=Object.values(P)),yield Promise.all(et),A("event",Ce,ke||{})}catch(et){zr.error(et)}})).apply(this,arguments)}function Tr(){const A=window.document.getElementsByTagName("script");for(const P of Object.values(A))if(P.src&&P.src.includes(ad))return P;return null}const xt=new O.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ba=new class{constructor(P={},Z=1e3){this.throttleMetadata=P,this.intervalMillis=Z}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,Z){this.throttleMetadata[P]=Z}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function Nl(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Ga(A){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,b.Z)(function*(A){var P;const{appId:Z,apiKey:Ce}=A,ke={method:"GET",headers:Nl(Ce)},et=fu.replace("{app-id}",Z),bt=yield fetch(et,ke);if(200!==bt.status&&304!==bt.status){let Mt="";try{const pn=yield bt.json();(null===(P=pn.error)||void 0===P?void 0:P.message)&&(Mt=pn.error.message)}catch(pn){}throw xt.create("config-fetch-failed",{httpStatus:bt.status,responseMessage:Mt})}return bt.json()})).apply(this,arguments)}function Fl(A){return wc.apply(this,arguments)}function wc(){return(wc=(0,b.Z)(function*(A,P=ba,Z){const{appId:Ce,apiKey:ke,measurementId:et}=A.options;if(!Ce)throw xt.create("no-app-id");if(!ke){if(et)return{measurementId:et,appId:Ce};throw xt.create("no-api-key")}const bt=P.getThrottleMetadata(Ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Mt=new ta;return setTimeout((0,b.Z)(function*(){Mt.abort()}),void 0!==Z?Z:6e4),ea({appId:Ce,apiKey:ke,measurementId:et},bt,Mt,P)})).apply(this,arguments)}function ea(A,P,Z){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,b.Z)(function*(A,{throttleEndTimeMillis:P,backoffCount:Z},Ce,ke=ba){const{appId:et,measurementId:bt}=A;try{yield Uh(Ce,P)}catch(Mt){if(bt)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Mt.message}]`),{appId:et,measurementId:bt};throw Mt}try{const Mt=yield Ga(A);return ke.deleteThrottleMetadata(et),Mt}catch(Mt){if(!jh(Mt)){if(ke.deleteThrottleMetadata(et),bt)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Mt.message}]`),{appId:et,measurementId:bt};throw Mt}const pn=503===Number(Mt.customData.httpStatus)?(0,O.$s)(Z,ke.intervalMillis,30):(0,O.$s)(Z,ke.intervalMillis),yn={throttleEndTimeMillis:Date.now()+pn,backoffCount:Z+1};return ke.setThrottleMetadata(et,yn),zr.debug(`Calling attemptFetch again in ${pn} millis`),ea(A,yn,Ce,ke)}})).apply(this,arguments)}function Uh(A,P){return new Promise((Z,Ce)=>{const ke=Math.max(P-Date.now(),0),et=setTimeout(Z,ke);A.addEventListener(()=>{clearTimeout(et),Ce(xt.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function jh(A){if(!(A instanceof O.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}class ta{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function Ec(){return dr.apply(this,arguments)}function dr(){return(dr=(0,b.Z)(function*(){if(!(0,O.hl)())return zr.warn(xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,O.eu)()}catch(A){return zr.warn(xt.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function zs(){return(zs=(0,b.Z)(function*(A,P,Z,Ce,ke,et,bt){var Mt;const pn=Fl(A);pn.then(hr=>{Z[hr.measurementId]=hr.appId,A.options.measurementId&&hr.measurementId!==A.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${hr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hr=>zr.error(hr)),P.push(pn);const yn=Ec().then(hr=>{if(hr)return Ce.getId()}),[Wn,En]=yield Promise.all([pn,yn]);Tr()||am(et,Wn.measurementId),ke("js",new Date);const ni=null!==(Mt=null==bt?void 0:bt.config)&&void 0!==Mt?Mt:{};return ni.origin="firebase",ni.update=!0,null!=En&&(ni[hu]=En),ke("config",Wn.measurementId,ni),Wn.measurementId})).apply(this,arguments)}class Cc{constructor(P){this.app=P}_delete(){return delete Gs[this.app.options.appId],Promise.resolve()}}let Gs={},Bl=[];const wa={};let Ao,Li,so="dataLayer",oo=!1;function Yr(A,P,Z){!function(){const A=[];if((0,O.ru)()&&A.push("This is a browser extension environment."),(0,O.zI)()||A.push("Cookies are not available."),A.length>0){const P=A.map((Ce,ke)=>`(${ke+1}) ${Ce}`).join(" "),Z=xt.create("invalid-analytics-context",{errorInfo:P});zr.warn(Z.message)}}();const Ce=A.options.appId;if(!Ce)throw xt.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw xt.create("no-api-key");zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gs[Ce])throw xt.create("already-exists",{id:Ce});if(!oo){!function(A){let P=[];Array.isArray(window[A])?P=window[A]:window[A]=P}(so);const{wrappedGtag:et,gtagCore:bt}=function(A,P,Z,Ce,ke){let et=function(...bt){window[Ce].push(arguments)};return window[ke]&&"function"==typeof window[ke]&&(et=window[ke]),window[ke]=function(A,P,Z,Ce){function et(){return(et=(0,b.Z)(function*(bt,Mt,pn){try{"event"===bt?yield za(A,P,Z,Mt,pn):"config"===bt?yield Ha(A,P,Z,Ce,Mt,pn):A("set",Mt)}catch(yn){zr.error(yn)}})).apply(this,arguments)}return function(bt,Mt,pn){return et.apply(this,arguments)}}(et,A,P,Z),{gtagCore:et,wrappedGtag:window[ke]}}(Gs,Bl,wa,so,"gtag");Li=et,Ao=bt,oo=!0}return Gs[Ce]=function(A,P,Z,Ce,ke,et,bt){return zs.apply(this,arguments)}(A,Bl,wa,P,Ao,so,Z),new Cc(A)}function Vl(){return(Vl=(0,b.Z)(function*(A,P,Z,Ce,ke){if(ke&&ke.global)A("event",Z,Ce);else{const et=yield P;A("event",Z,Object.assign(Object.assign({},Ce),{send_to:et}))}})).apply(this,arguments)}function Lr(){return qa.apply(this,arguments)}function qa(){return(qa=(0,b.Z)(function*(){if((0,O.ru)()||!(0,O.zI)()||!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(A){return!1}})).apply(this,arguments)}const pu="@firebase/analytics";(0,k._registerComponent)(new U.wA(Rl,(P,{options:Z})=>Yr(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,k._registerComponent)(new U.wA("analytics-internal",function(P){try{const Z=P.getProvider(Rl).getImmediate();return{logEvent:(Ce,ke,et)=>function(A,P,Z,Ce){A=(0,O.m9)(A),function(A,P,Z,Ce,ke){return Vl.apply(this,arguments)}(Li,Gs[A.app.options.appId],P,Z,Ce).catch(ke=>zr.error(ke))}(Z,Ce,ke,et)}}catch(Z){throw xt.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,k.registerVersion)(pu,"0.7.9"),(0,k.registerVersion)(pu,"0.7.9","esm2017");var $r=R(2869),jl=R(8843);const Hh=new class extends jl.v{}(class extends $r.o{constructor(P,Z){super(P,Z),this.scheduler=P,this.work=Z}schedule(P,Z=0){return Z>0?super.schedule(P,Z):(this.delay=Z,this.state=P,this.scheduler.flush(this),this)}execute(P,Z){return Z>0||this.closed?super.execute(P,Z):this._execute(P,Z)}requestAsyncId(P,Z,Ce=0){return null!=Ce&&Ce>0||null==Ce&&this.delay>0?super.requestAsyncId(P,Z,Ce):P.flush(this)}});var lo=R(2210),Hl=R(8305),na=R(7384),Mo=R(5222),mu=R(4763);const gu=new o.GfV("7.3.0"),_u="__angularfire_symbol__analyticsIsSupportedValue",ra="__angularfire_symbol__analyticsIsSupported",zl="__angularfire_symbol__remoteConfigIsSupportedValue",In="__angularfire_symbol__remoteConfigIsSupported",qi="__angularfire_symbol__messagingIsSupportedValue",co="__angularfire_symbol__messagingIsSupported";function yu(A,P,Z){if(P){if(1===P.length)return P[0];const et=P.filter(bt=>bt.app===Z);if(1===et.length)return et[0]}return Z.container.getProvider(A).getImmediate({optional:!0})}globalThis[ra]||(globalThis[ra]=Lr().then(A=>globalThis[_u]=A).catch(()=>globalThis[_u]=!1)),globalThis[co]||(globalThis[co]=uu().then(A=>globalThis[qi]=A).catch(()=>globalThis[qi]=!1)),globalThis[In]||(globalThis[In]=_e().then(A=>globalThis[zl]=A).catch(()=>globalThis[zl]=!1));const uo=(A,P)=>{const Z=P?[P]:(0,C.C6)(),Ce=[];return Z.forEach(ke=>{ke.container.getProvider(A).instances.forEach(bt=>{Ce.includes(bt)||Ce.push(bt)})}),Ce};function ko(){}class vu{constructor(P,Z=Hh){this.zone=P,this.delegate=Z}now(){return this.delegate.now()}schedule(P,Z,Ce){const ke=this.zone;return this.delegate.schedule(function(bt){ke.runGuarded(()=>{P.apply(this,[bt])})},Z,Ce)}}class Gl{constructor(P){this.zone=P,this.task=null}call(P,Z){const Ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ko,{},ko,ko)),Z.pipe((0,na.b)({next:Ce,complete:Ce,error:Ce})).subscribe(P).add(Ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ic=(()=>{class A{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new vu(Zone.current)),this.insideAngular=Z.run(()=>new vu(Zone.current,lo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(Z){return new(Z||A)(o.LFG(o.R0b))},A.\u0275prov=o.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Sr(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function ms(A){return Sr().ngZone.runOutsideAngular(()=>A())}function qs(A){return Sr().ngZone.run(()=>A())}function $l(A){return Sr(),function(A){return function(Z){return(Z=Z.lift(new Gl(A.ngZone))).pipe((0,Mo.R)(A.outsideAngular),(0,mu.Q)(A.insideAngular))}}(Sr())(A)}const pd=(A,P)=>{const Z=void 0;return function(){const Ce=arguments;return P&&setTimeout(()=>{"scheduled"===P.state&&P.invoke()},10),qs(()=>A.apply(Z,Ce))}},wu=(A,P)=>function(){let Z;const Ce=arguments;for(let et=0;et<arguments.length;et++)"function"==typeof Ce[et]&&(P&&(Z||(Z=qs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ko,{},ko,ko)))),Ce[et]=pd(Ce[et],Z));const ke=ms(()=>A.apply(this,Ce));if(!P){if(ke instanceof Hl.y){const et=Sr();return ke.pipe((0,Mo.R)(et.outsideAngular),(0,mu.Q)(et.insideAngular))}return qs(()=>ke)}return ke instanceof Hl.y?ke.pipe($l):ke instanceof Promise?qs(()=>new Promise((et,bt)=>ke.then(Mt=>qs(()=>et(Mt)),Mt=>qs(()=>bt(Mt))))):"function"==typeof ke&&Z?function(){return setTimeout(()=>{Z&&"scheduled"===Z.state&&Z.invoke()},10),ke.apply(this,arguments)}:qs(()=>ke)}},2501:St=>{window,St.exports=function(M){var R={};function o(C){if(R[C])return R[C].exports;var b=R[C]={i:C,l:!1,exports:{}};return M[C].call(b.exports,b,b.exports,o),b.l=!0,b.exports}return o.m=M,o.c=R,o.d=function(C,b,k){o.o(C,b)||Object.defineProperty(C,b,{enumerable:!0,get:k})},o.r=function(C){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},o.t=function(C,b){if(1&b&&(C=o(C)),8&b||4&b&&"object"==typeof C&&C&&C.__esModule)return C;var k=Object.create(null);if(o.r(k),Object.defineProperty(k,"default",{enumerable:!0,value:C}),2&b&&"string"!=typeof C)for(var O in C)o.d(k,O,function(U){return C[U]}.bind(null,O));return k},o.n=function(C){var b=C&&C.__esModule?function(){return C.default}:function(){return C};return o.d(b,"a",b),b},o.o=function(C,b){return Object.prototype.hasOwnProperty.call(C,b)},o.p="/",o(o.s=72)}([function(M,R){M.exports=function(o,C,b){return C in o?Object.defineProperty(o,C,{value:b,enumerable:!0,configurable:!0,writable:!0}):o[C]=b,o},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){function o(C){return M.exports=o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},M.exports.__esModule=!0,M.exports.default=M.exports,o(C)}M.exports=o,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(o,C){if(!(o instanceof C))throw new TypeError("Cannot call a class as a function")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){function o(C,b){for(var k=0;k<b.length;k++){var O=b[k];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}M.exports=function(C,b,k){return b&&o(C.prototype,b),k&&o(C,k),Object.defineProperty(C,"prototype",{writable:!1}),C},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){"use strict";o.d(R,"a",function(){return C}),o.d(R,"b",function(){return b}),o.d(R,"c",function(){return k}),o.d(R,"d",function(){return O});var C={};o.r(C),o.d(C,"EPSILON",function(){return U}),o.d(C,"ARRAY_TYPE",function(){return Y}),o.d(C,"RANDOM",function(){return re}),o.d(C,"setMatrixArrayType",function(){return he}),o.d(C,"toRadian",function(){return J}),o.d(C,"equals",function(){return we});var b={};o.r(b),o.d(b,"create",function(){return Xe}),o.d(b,"clone",function(){return qe}),o.d(b,"copy",function(){return je}),o.d(b,"identity",function(){return ze}),o.d(b,"fromValues",function(){return Ie}),o.d(b,"set",function(){return ge}),o.d(b,"transpose",function(){return X}),o.d(b,"invert",function(){return Se}),o.d(b,"adjoint",function(){return De}),o.d(b,"determinant",function(){return Fe}),o.d(b,"multiply",function(){return Ne}),o.d(b,"rotate",function(){return Ue}),o.d(b,"scale",function(){return ue}),o.d(b,"fromRotation",function(){return Me}),o.d(b,"fromScaling",function(){return q}),o.d(b,"str",function(){return Q}),o.d(b,"frob",function(){return ne}),o.d(b,"LDU",function(){return ie}),o.d(b,"add",function(){return Ee}),o.d(b,"subtract",function(){return W}),o.d(b,"exactEquals",function(){return ce}),o.d(b,"equals",function(){return Ve}),o.d(b,"multiplyScalar",function(){return lt}),o.d(b,"multiplyScalarAndAdd",function(){return Je}),o.d(b,"mul",function(){return rt}),o.d(b,"sub",function(){return dt});var k={};o.r(k),o.d(k,"create",function(){return $t}),o.d(k,"clone",function(){return Jt}),o.d(k,"fromValues",function(){return vn}),o.d(k,"copy",function(){return Rt}),o.d(k,"set",function(){return dn}),o.d(k,"add",function(){return _n}),o.d(k,"subtract",function(){return ar}),o.d(k,"multiply",function(){return ir}),o.d(k,"divide",function(){return Pn}),o.d(k,"ceil",function(){return Rr}),o.d(k,"floor",function(){return Ti}),o.d(k,"min",function(){return Xr}),o.d(k,"max",function(){return vr}),o.d(k,"round",function(){return Si}),o.d(k,"scale",function(){return _i}),o.d(k,"scaleAndAdd",function(){return en}),o.d(k,"distance",function(){return Nn}),o.d(k,"squaredDistance",function(){return qn}),o.d(k,"length",function(){return Qn}),o.d(k,"squaredLength",function(){return Hn}),o.d(k,"negate",function(){return zi}),o.d(k,"inverse",function(){return or}),o.d(k,"normalize",function(){return Fn}),o.d(k,"dot",function(){return Ri}),o.d(k,"cross",function(){return xn}),o.d(k,"lerp",function(){return Nt}),o.d(k,"random",function(){return Ft}),o.d(k,"transformMat2",function(){return ai}),o.d(k,"transformMat2d",function(){return li}),o.d(k,"transformMat3",function(){return jr}),o.d(k,"transformMat4",function(){return Mn}),o.d(k,"rotate",function(){return Zn}),o.d(k,"angle",function(){return Kn}),o.d(k,"zero",function(){return Re}),o.d(k,"str",function(){return Ae}),o.d(k,"exactEquals",function(){return Le}),o.d(k,"equals",function(){return it}),o.d(k,"len",function(){return $e}),o.d(k,"sub",function(){return ht}),o.d(k,"mul",function(){return wt}),o.d(k,"div",function(){return Xt}),o.d(k,"dist",function(){return fn}),o.d(k,"sqrDist",function(){return zn}),o.d(k,"sqrLen",function(){return on}),o.d(k,"forEach",function(){return Cr});var O={};o.r(O),o.d(O,"create",function(){return Ke}),o.d(O,"clone",function(){return Be}),o.d(O,"length",function(){return Oe}),o.d(O,"fromValues",function(){return ct}),o.d(O,"copy",function(){return It}),o.d(O,"set",function(){return sn}),o.d(O,"add",function(){return Wt}),o.d(O,"subtract",function(){return hn}),o.d(O,"multiply",function(){return Dn}),o.d(O,"divide",function(){return Gn}),o.d(O,"ceil",function(){return pr}),o.d(O,"floor",function(){return pt}),o.d(O,"min",function(){return zt}),o.d(O,"max",function(){return $n}),o.d(O,"round",function(){return Jr}),o.d(O,"scale",function(){return Di}),o.d(O,"scaleAndAdd",function(){return xr}),o.d(O,"distance",function(){return lr}),o.d(O,"squaredDistance",function(){return cr}),o.d(O,"squaredLength",function(){return Ai}),o.d(O,"negate",function(){return hs}),o.d(O,"inverse",function(){return an}),o.d(O,"normalize",function(){return Gi}),o.d(O,"dot",function(){return yi}),o.d(O,"cross",function(){return Mr}),o.d(O,"lerp",function(){return vi}),o.d(O,"hermite",function(){return Bn}),o.d(O,"bezier",function(){return Vs}),o.d(O,"random",function(){return Or}),o.d(O,"transformMat4",function(){return qr}),o.d(O,"transformMat3",function(){return Vn}),o.d(O,"transformQuat",function(){return Go}),o.d(O,"rotateX",function(){return es}),o.d(O,"rotateY",function(){return Oi}),o.d(O,"rotateZ",function(){return ws}),o.d(O,"angle",function(){return ei}),o.d(O,"zero",function(){return Es}),o.d(O,"str",function(){return ts}),o.d(O,"exactEquals",function(){return mr}),o.d(O,"equals",function(){return eo}),o.d(O,"sub",function(){return ti}),o.d(O,"mul",function(){return fi}),o.d(O,"div",function(){return Us}),o.d(O,"dist",function(){return $i}),o.d(O,"sqrDist",function(){return js}),o.d(O,"len",function(){return Zr}),o.d(O,"sqrLen",function(){return Co}),o.d(O,"forEach",function(){return to});var U=1e-6,Y="undefined"!=typeof Float32Array?Float32Array:Array,re=Math.random;function he(F){Y=F}var te=Math.PI/180;function J(F){return F*te}function we(F,K){return Math.abs(F-K)<=U*Math.max(1,Math.abs(F),Math.abs(K))}function Xe(){var F=new Y(4);return Y!=Float32Array&&(F[1]=0,F[2]=0),F[0]=1,F[3]=1,F}function qe(F){var K=new Y(4);return K[0]=F[0],K[1]=F[1],K[2]=F[2],K[3]=F[3],K}function je(F,K){return F[0]=K[0],F[1]=K[1],F[2]=K[2],F[3]=K[3],F}function ze(F){return F[0]=1,F[1]=0,F[2]=0,F[3]=1,F}function Ie(F,K,fe,Ze){var tt=new Y(4);return tt[0]=F,tt[1]=K,tt[2]=fe,tt[3]=Ze,tt}function ge(F,K,fe,Ze,tt){return F[0]=K,F[1]=fe,F[2]=Ze,F[3]=tt,F}function X(F,K){if(F===K){var fe=K[1];F[1]=K[2],F[2]=fe}else F[0]=K[0],F[1]=K[2],F[2]=K[1],F[3]=K[3];return F}function Se(F,K){var fe=K[0],Ze=K[1],tt=K[2],gt=K[3],Dt=fe*gt-tt*Ze;return Dt?(F[0]=gt*(Dt=1/Dt),F[1]=-Ze*Dt,F[2]=-tt*Dt,F[3]=fe*Dt,F):null}function De(F,K){var fe=K[0];return F[0]=K[3],F[1]=-K[1],F[2]=-K[2],F[3]=fe,F}function Fe(F){return F[0]*F[3]-F[2]*F[1]}function Ne(F,K,fe){var Ze=K[0],tt=K[1],gt=K[2],Dt=K[3],Yt=fe[0],bn=fe[1],ur=fe[2],Hr=fe[3];return F[0]=Ze*Yt+gt*bn,F[1]=tt*Yt+Dt*bn,F[2]=Ze*ur+gt*Hr,F[3]=tt*ur+Dt*Hr,F}function Ue(F,K,fe){var Ze=K[0],tt=K[1],gt=K[2],Dt=K[3],Yt=Math.sin(fe),bn=Math.cos(fe);return F[0]=Ze*bn+gt*Yt,F[1]=tt*bn+Dt*Yt,F[2]=Ze*-Yt+gt*bn,F[3]=tt*-Yt+Dt*bn,F}function ue(F,K,fe){var tt=K[1],gt=K[2],Dt=K[3],Yt=fe[0],bn=fe[1];return F[0]=K[0]*Yt,F[1]=tt*Yt,F[2]=gt*bn,F[3]=Dt*bn,F}function Me(F,K){var fe=Math.sin(K),Ze=Math.cos(K);return F[0]=Ze,F[1]=fe,F[2]=-fe,F[3]=Ze,F}function q(F,K){return F[0]=K[0],F[1]=0,F[2]=0,F[3]=K[1],F}function Q(F){return"mat2("+F[0]+", "+F[1]+", "+F[2]+", "+F[3]+")"}function ne(F){return Math.hypot(F[0],F[1],F[2],F[3])}function ie(F,K,fe,Ze){return F[2]=Ze[2]/Ze[0],fe[0]=Ze[0],fe[1]=Ze[1],fe[3]=Ze[3]-F[2]*fe[1],[F,K,fe]}function Ee(F,K,fe){return F[0]=K[0]+fe[0],F[1]=K[1]+fe[1],F[2]=K[2]+fe[2],F[3]=K[3]+fe[3],F}function W(F,K,fe){return F[0]=K[0]-fe[0],F[1]=K[1]-fe[1],F[2]=K[2]-fe[2],F[3]=K[3]-fe[3],F}function ce(F,K){return F[0]===K[0]&&F[1]===K[1]&&F[2]===K[2]&&F[3]===K[3]}function Ve(F,K){var fe=F[0],Ze=F[1],tt=F[2],gt=F[3],Dt=K[0],Yt=K[1],bn=K[2],ur=K[3];return Math.abs(fe-Dt)<=U*Math.max(1,Math.abs(fe),Math.abs(Dt))&&Math.abs(Ze-Yt)<=U*Math.max(1,Math.abs(Ze),Math.abs(Yt))&&Math.abs(tt-bn)<=U*Math.max(1,Math.abs(tt),Math.abs(bn))&&Math.abs(gt-ur)<=U*Math.max(1,Math.abs(gt),Math.abs(ur))}function lt(F,K,fe){return F[0]=K[0]*fe,F[1]=K[1]*fe,F[2]=K[2]*fe,F[3]=K[3]*fe,F}function Je(F,K,fe,Ze){return F[0]=K[0]+fe[0]*Ze,F[1]=K[1]+fe[1]*Ze,F[2]=K[2]+fe[2]*Ze,F[3]=K[3]+fe[3]*Ze,F}Math.hypot||(Math.hypot=function(){for(var F=0,K=arguments.length;K--;)F+=arguments[K]*arguments[K];return Math.sqrt(F)});var rt=Ne,dt=W;function $t(){var F=new Y(2);return Y!=Float32Array&&(F[0]=0,F[1]=0),F}function Jt(F){var K=new Y(2);return K[0]=F[0],K[1]=F[1],K}function vn(F,K){var fe=new Y(2);return fe[0]=F,fe[1]=K,fe}function Rt(F,K){return F[0]=K[0],F[1]=K[1],F}function dn(F,K,fe){return F[0]=K,F[1]=fe,F}function _n(F,K,fe){return F[0]=K[0]+fe[0],F[1]=K[1]+fe[1],F}function ar(F,K,fe){return F[0]=K[0]-fe[0],F[1]=K[1]-fe[1],F}function ir(F,K,fe){return F[0]=K[0]*fe[0],F[1]=K[1]*fe[1],F}function Pn(F,K,fe){return F[0]=K[0]/fe[0],F[1]=K[1]/fe[1],F}function Rr(F,K){return F[0]=Math.ceil(K[0]),F[1]=Math.ceil(K[1]),F}function Ti(F,K){return F[0]=Math.floor(K[0]),F[1]=Math.floor(K[1]),F}function Xr(F,K,fe){return F[0]=Math.min(K[0],fe[0]),F[1]=Math.min(K[1],fe[1]),F}function vr(F,K,fe){return F[0]=Math.max(K[0],fe[0]),F[1]=Math.max(K[1],fe[1]),F}function Si(F,K){return F[0]=Math.round(K[0]),F[1]=Math.round(K[1]),F}function _i(F,K,fe){return F[0]=K[0]*fe,F[1]=K[1]*fe,F}function en(F,K,fe,Ze){return F[0]=K[0]+fe[0]*Ze,F[1]=K[1]+fe[1]*Ze,F}function Nn(F,K){return Math.hypot(K[0]-F[0],K[1]-F[1])}function qn(F,K){var fe=K[0]-F[0],Ze=K[1]-F[1];return fe*fe+Ze*Ze}function Qn(F){return Math.hypot(F[0],F[1])}function Hn(F){var K=F[0],fe=F[1];return K*K+fe*fe}function zi(F,K){return F[0]=-K[0],F[1]=-K[1],F}function or(F,K){return F[0]=1/K[0],F[1]=1/K[1],F}function Fn(F,K){var fe=K[0],Ze=K[1],tt=fe*fe+Ze*Ze;return tt>0&&(tt=1/Math.sqrt(tt)),F[0]=K[0]*tt,F[1]=K[1]*tt,F}function Ri(F,K){return F[0]*K[0]+F[1]*K[1]}function xn(F,K,fe){var Ze=K[0]*fe[1]-K[1]*fe[0];return F[0]=F[1]=0,F[2]=Ze,F}function Nt(F,K,fe,Ze){var tt=K[0],gt=K[1];return F[0]=tt+Ze*(fe[0]-tt),F[1]=gt+Ze*(fe[1]-gt),F}function Ft(F,K){K=K||1;var fe=2*re()*Math.PI;return F[0]=Math.cos(fe)*K,F[1]=Math.sin(fe)*K,F}function ai(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[2]*tt,F[1]=fe[1]*Ze+fe[3]*tt,F}function li(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[2]*tt+fe[4],F[1]=fe[1]*Ze+fe[3]*tt+fe[5],F}function jr(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[3]*tt+fe[6],F[1]=fe[1]*Ze+fe[4]*tt+fe[7],F}function Mn(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[4]*tt+fe[12],F[1]=fe[1]*Ze+fe[5]*tt+fe[13],F}function Zn(F,K,fe,Ze){var tt=K[0]-fe[0],gt=K[1]-fe[1],Dt=Math.sin(Ze),Yt=Math.cos(Ze);return F[0]=tt*Yt-gt*Dt+fe[0],F[1]=tt*Dt+gt*Yt+fe[1],F}function Kn(F,K){var fe=F[0],Ze=F[1],tt=K[0],gt=K[1],Dt=Math.sqrt(fe*fe+Ze*Ze)*Math.sqrt(tt*tt+gt*gt);return Math.acos(Math.min(Math.max(Dt&&(fe*tt+Ze*gt)/Dt,-1),1))}function Re(F){return F[0]=0,F[1]=0,F}function Ae(F){return"vec2("+F[0]+", "+F[1]+")"}function Le(F,K){return F[0]===K[0]&&F[1]===K[1]}function it(F,K){var fe=F[0],Ze=F[1],tt=K[0],gt=K[1];return Math.abs(fe-tt)<=U*Math.max(1,Math.abs(fe),Math.abs(tt))&&Math.abs(Ze-gt)<=U*Math.max(1,Math.abs(Ze),Math.abs(gt))}var xe,$e=Qn,ht=ar,wt=ir,Xt=Pn,fn=Nn,zn=qn,on=Hn,Cr=(xe=$t(),function(F,K,fe,Ze,tt,gt){var Dt,Yt;for(K||(K=2),fe||(fe=0),Yt=Ze?Math.min(Ze*K+fe,F.length):F.length,Dt=fe;Dt<Yt;Dt+=K)xe[0]=F[Dt],xe[1]=F[Dt+1],tt(xe,xe,gt),F[Dt]=xe[0],F[Dt+1]=xe[1];return F});function Ke(){var F=new Y(3);return Y!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0),F}function Be(F){var K=new Y(3);return K[0]=F[0],K[1]=F[1],K[2]=F[2],K}function Oe(F){return Math.hypot(F[0],F[1],F[2])}function ct(F,K,fe){var Ze=new Y(3);return Ze[0]=F,Ze[1]=K,Ze[2]=fe,Ze}function It(F,K){return F[0]=K[0],F[1]=K[1],F[2]=K[2],F}function sn(F,K,fe,Ze){return F[0]=K,F[1]=fe,F[2]=Ze,F}function Wt(F,K,fe){return F[0]=K[0]+fe[0],F[1]=K[1]+fe[1],F[2]=K[2]+fe[2],F}function hn(F,K,fe){return F[0]=K[0]-fe[0],F[1]=K[1]-fe[1],F[2]=K[2]-fe[2],F}function Dn(F,K,fe){return F[0]=K[0]*fe[0],F[1]=K[1]*fe[1],F[2]=K[2]*fe[2],F}function Gn(F,K,fe){return F[0]=K[0]/fe[0],F[1]=K[1]/fe[1],F[2]=K[2]/fe[2],F}function pr(F,K){return F[0]=Math.ceil(K[0]),F[1]=Math.ceil(K[1]),F[2]=Math.ceil(K[2]),F}function pt(F,K){return F[0]=Math.floor(K[0]),F[1]=Math.floor(K[1]),F[2]=Math.floor(K[2]),F}function zt(F,K,fe){return F[0]=Math.min(K[0],fe[0]),F[1]=Math.min(K[1],fe[1]),F[2]=Math.min(K[2],fe[2]),F}function $n(F,K,fe){return F[0]=Math.max(K[0],fe[0]),F[1]=Math.max(K[1],fe[1]),F[2]=Math.max(K[2],fe[2]),F}function Jr(F,K){return F[0]=Math.round(K[0]),F[1]=Math.round(K[1]),F[2]=Math.round(K[2]),F}function Di(F,K,fe){return F[0]=K[0]*fe,F[1]=K[1]*fe,F[2]=K[2]*fe,F}function xr(F,K,fe,Ze){return F[0]=K[0]+fe[0]*Ze,F[1]=K[1]+fe[1]*Ze,F[2]=K[2]+fe[2]*Ze,F}function lr(F,K){return Math.hypot(K[0]-F[0],K[1]-F[1],K[2]-F[2])}function cr(F,K){var fe=K[0]-F[0],Ze=K[1]-F[1],tt=K[2]-F[2];return fe*fe+Ze*Ze+tt*tt}function Ai(F){var K=F[0],fe=F[1],Ze=F[2];return K*K+fe*fe+Ze*Ze}function hs(F,K){return F[0]=-K[0],F[1]=-K[1],F[2]=-K[2],F}function an(F,K){return F[0]=1/K[0],F[1]=1/K[1],F[2]=1/K[2],F}function Gi(F,K){var fe=K[0],Ze=K[1],tt=K[2],gt=fe*fe+Ze*Ze+tt*tt;return gt>0&&(gt=1/Math.sqrt(gt)),F[0]=K[0]*gt,F[1]=K[1]*gt,F[2]=K[2]*gt,F}function yi(F,K){return F[0]*K[0]+F[1]*K[1]+F[2]*K[2]}function Mr(F,K,fe){var Ze=K[0],tt=K[1],gt=K[2],Dt=fe[0],Yt=fe[1],bn=fe[2];return F[0]=tt*bn-gt*Yt,F[1]=gt*Dt-Ze*bn,F[2]=Ze*Yt-tt*Dt,F}function vi(F,K,fe,Ze){var tt=K[0],gt=K[1],Dt=K[2];return F[0]=tt+Ze*(fe[0]-tt),F[1]=gt+Ze*(fe[1]-gt),F[2]=Dt+Ze*(fe[2]-Dt),F}function Bn(F,K,fe,Ze,tt,gt){var Dt=gt*gt,Yt=Dt*(2*gt-3)+1,bn=Dt*(gt-2)+gt,ur=Dt*(gt-1),Hr=Dt*(3-2*gt);return F[0]=K[0]*Yt+fe[0]*bn+Ze[0]*ur+tt[0]*Hr,F[1]=K[1]*Yt+fe[1]*bn+Ze[1]*ur+tt[1]*Hr,F[2]=K[2]*Yt+fe[2]*bn+Ze[2]*ur+tt[2]*Hr,F}function Vs(F,K,fe,Ze,tt,gt){var Dt=1-gt,Yt=Dt*Dt,bn=gt*gt,ur=Yt*Dt,Hr=3*gt*Yt,Pi=3*bn*Dt,bi=bn*gt;return F[0]=K[0]*ur+fe[0]*Hr+Ze[0]*Pi+tt[0]*bi,F[1]=K[1]*ur+fe[1]*Hr+Ze[1]*Pi+tt[1]*bi,F[2]=K[2]*ur+fe[2]*Hr+Ze[2]*Pi+tt[2]*bi,F}function Or(F,K){K=K||1;var fe=2*re()*Math.PI,Ze=2*re()-1,tt=Math.sqrt(1-Ze*Ze)*K;return F[0]=Math.cos(fe)*tt,F[1]=Math.sin(fe)*tt,F[2]=Ze*K,F}function qr(F,K,fe){var Ze=K[0],tt=K[1],gt=K[2],Dt=fe[3]*Ze+fe[7]*tt+fe[11]*gt+fe[15];return F[0]=(fe[0]*Ze+fe[4]*tt+fe[8]*gt+fe[12])/(Dt=Dt||1),F[1]=(fe[1]*Ze+fe[5]*tt+fe[9]*gt+fe[13])/Dt,F[2]=(fe[2]*Ze+fe[6]*tt+fe[10]*gt+fe[14])/Dt,F}function Vn(F,K,fe){var Ze=K[0],tt=K[1],gt=K[2];return F[0]=Ze*fe[0]+tt*fe[3]+gt*fe[6],F[1]=Ze*fe[1]+tt*fe[4]+gt*fe[7],F[2]=Ze*fe[2]+tt*fe[5]+gt*fe[8],F}function Go(F,K,fe){var Ze=fe[0],tt=fe[1],gt=fe[2],Yt=K[0],bn=K[1],ur=K[2],Hr=tt*ur-gt*bn,Pi=gt*Yt-Ze*ur,bi=Ze*bn-tt*Yt,wi=tt*bi-gt*Pi,no=gt*Hr-Ze*bi,Io=Ze*Pi-tt*Hr,ee=2*fe[3];return Pi*=ee,bi*=ee,no*=2,Io*=2,F[0]=Yt+(Hr*=ee)+(wi*=2),F[1]=bn+Pi+no,F[2]=ur+bi+Io,F}function es(F,K,fe,Ze){var tt=[],gt=[];return tt[0]=K[0]-fe[0],tt[1]=K[1]-fe[1],tt[2]=K[2]-fe[2],gt[0]=tt[0],gt[1]=tt[1]*Math.cos(Ze)-tt[2]*Math.sin(Ze),gt[2]=tt[1]*Math.sin(Ze)+tt[2]*Math.cos(Ze),F[0]=gt[0]+fe[0],F[1]=gt[1]+fe[1],F[2]=gt[2]+fe[2],F}function Oi(F,K,fe,Ze){var tt=[],gt=[];return tt[0]=K[0]-fe[0],tt[1]=K[1]-fe[1],tt[2]=K[2]-fe[2],gt[0]=tt[2]*Math.sin(Ze)+tt[0]*Math.cos(Ze),gt[1]=tt[1],gt[2]=tt[2]*Math.cos(Ze)-tt[0]*Math.sin(Ze),F[0]=gt[0]+fe[0],F[1]=gt[1]+fe[1],F[2]=gt[2]+fe[2],F}function ws(F,K,fe,Ze){var tt=[],gt=[];return tt[0]=K[0]-fe[0],tt[1]=K[1]-fe[1],tt[2]=K[2]-fe[2],gt[0]=tt[0]*Math.cos(Ze)-tt[1]*Math.sin(Ze),gt[1]=tt[0]*Math.sin(Ze)+tt[1]*Math.cos(Ze),gt[2]=tt[2],F[0]=gt[0]+fe[0],F[1]=gt[1]+fe[1],F[2]=gt[2]+fe[2],F}function ei(F,K){var fe=F[0],Ze=F[1],tt=F[2],gt=K[0],Dt=K[1],Yt=K[2],bn=Math.sqrt(fe*fe+Ze*Ze+tt*tt)*Math.sqrt(gt*gt+Dt*Dt+Yt*Yt),ur=bn&&yi(F,K)/bn;return Math.acos(Math.min(Math.max(ur,-1),1))}function Es(F){return F[0]=0,F[1]=0,F[2]=0,F}function ts(F){return"vec3("+F[0]+", "+F[1]+", "+F[2]+")"}function mr(F,K){return F[0]===K[0]&&F[1]===K[1]&&F[2]===K[2]}function eo(F,K){var fe=F[0],Ze=F[1],tt=F[2],gt=K[0],Dt=K[1],Yt=K[2];return Math.abs(fe-gt)<=U*Math.max(1,Math.abs(fe),Math.abs(gt))&&Math.abs(Ze-Dt)<=U*Math.max(1,Math.abs(Ze),Math.abs(Dt))&&Math.abs(tt-Yt)<=U*Math.max(1,Math.abs(tt),Math.abs(Yt))}var F,ti=hn,fi=Dn,Us=Gn,$i=lr,js=cr,Zr=Oe,Co=Ai,to=(F=Ke(),function(K,fe,Ze,tt,gt,Dt){var Yt,bn;for(fe||(fe=3),Ze||(Ze=0),bn=tt?Math.min(tt*fe+Ze,K.length):K.length,Yt=Ze;Yt<bn;Yt+=fe)F[0]=K[Yt],F[1]=K[Yt+1],F[2]=K[Yt+2],gt(F,F,Dt),K[Yt]=F[0],K[Yt+1]=F[1],K[Yt+2]=F[2];return K})},function(M,R,o){var C=o(17).default,b=o(1);M.exports=function(k,O){if(O&&("object"===C(O)||"function"==typeof O))return O;if(void 0!==O)throw new TypeError("Derived constructors may only return object or undefined");return b(k)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(40);M.exports=function(b,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),k&&C(b,k)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(139)();M.exports=C;try{regeneratorRuntime=C}catch(b){"object"==typeof globalThis?globalThis.regeneratorRuntime=C:Function("r","regeneratorRuntime = r")(C)}},function(M,R,o){"use strict";R.a={init:function(C,b){C.fill(b)},shuffle:function(C){for(var b=C.length-1;b>0;b--){var k=Math.floor(Math.random()*(b+1)),O=[C[k],C[b]];C[b]=O[0],C[k]=O[1]}return C},toPointList:function(C){var b=C.reduce(function(k,O){var U="[".concat(O.join(","),"]");return k.push(U),k},[]);return"[".concat(b.join(",\r\n"),"]")},threshold:function(C,b,k){return C.reduce(function(O,U){return k.apply(C,[U])>=b&&O.push(U),O},[])},maxIndex:function(C){for(var b=0,k=0;k<C.length;k++)C[k]>C[b]&&(b=k);return b},max:function(C){for(var b=0,k=0;k<C.length;k++)C[k]>b&&(b=C[k]);return b},sum:function(C){for(var b=C.length,k=0;b--;)k+=C[b];return k}}},function(M,R,o){"use strict";o.d(R,"h",function(){return U}),o.d(R,"i",function(){return re}),o.d(R,"b",function(){return he}),o.d(R,"j",function(){return te}),o.d(R,"e",function(){return J}),o.d(R,"c",function(){return we}),o.d(R,"f",function(){return Xe}),o.d(R,"g",function(){return qe}),o.d(R,"a",function(){return ze}),o.d(R,"d",function(){return ge});var C=o(5),b=o(9);C.a.setMatrixArrayType(Array);var k=function(X,Se){var De=[],Fe={rad:0,vec:C.c.clone([0,0])},Ne={};function Ue(Me){Ne[Me.id]=Me,De.push(Me)}function ue(){var Me,q=0;for(Me=0;Me<De.length;Me++)q+=De[Me].rad;Fe.rad=q/De.length,Fe.vec=C.c.clone([Math.cos(Fe.rad),Math.sin(Fe.rad)])}return Ue(X),ue(),{add:function(Me){Ne[Me.id]||(Ue(Me),ue())},fits:function(Me){return Math.abs(C.c.dot(Me.point.vec,Fe.vec))>Se},getPoints:function(){return De},getCenter:function(){return Fe}}},O=function(X,Se,De){return{rad:X[De],point:X,id:Se}};function U(X,Se){return{x:X,y:Se,toVec2:function(){return C.c.clone([this.x,this.y])},toVec3:function(){return C.d.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function Y(X,Se){Se||(Se=8);for(var De=X.data,Fe=De.length,Ne=8-Se,Ue=new Int32Array(1<<Se);Fe--;)Ue[De[Fe]>>Ne]++;return Ue}function re(X,Se){var De=function(Fe){var Ne,Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,ue=8-Ue;function Me(ie,Ee){for(var W=0,ce=ie;ce<=Ee;ce++)W+=Ne[ce];return W}function q(ie,Ee){for(var W=0,ce=ie;ce<=Ee;ce++)W+=ce*Ne[ce];return W}function Q(){var ie,Ee,W,ce,Ve=[0],lt=(1<<Ue)-1;Ne=Y(Fe,Ue);for(var Je=1;Je<lt;Je++)0==(W=(ie=Me(0,Je))*(Ee=Me(Je+1,lt)))&&(W=1),ce=q(0,Je)*Ee-q(Je+1,lt)*ie,Ve[Je]=ce*ce/W;return b.a.maxIndex(Ve)}return Q()<<ue}(X);return function(Fe,Ne,Ue){Ue||(Ue=Fe);for(var ue=Fe.data,Me=ue.length,q=Ue.data;Me--;)q[Me]=ue[Me]<Ne?1:0}(X,De,Se),De}function he(X,Se,De){var Fe,Ne,Ue,ue,Me=[];function q(Q){var ne=!1;for(Ne=0;Ne<Me.length;Ne++)(Ue=Me[Ne]).fits(Q)&&(Ue.add(Q),ne=!0);return ne}for(De||(De="rad"),Fe=0;Fe<X.length;Fe++)q(ue=O(X[Fe],Fe,De))||Me.push(k(ue,Se));return Me}function te(X,Se,De){var Fe,Ne,Ue,ue,Me=0,q=0,Q=[];for(Fe=0;Fe<Se;Fe++)Q[Fe]={score:0,item:null};for(Fe=0;Fe<X.length;Fe++)if((Ne=De.apply(this,[X[Fe]]))>q)for((Ue=Q[Me]).score=Ne,Ue.item=X[Fe],q=Number.MAX_VALUE,ue=0;ue<Se;ue++)Q[ue].score<q&&(q=Q[ue].score,Me=ue);return Q}function J(X,Se,De){for(var Fe,Ne=0,Ue=Se.x,ue=Math.floor(X.length/4),Me=Se.x/2,q=0,Q=Se.x;Ue<ue;){for(Fe=0;Fe<Me;Fe++)De[q]=(.299*X[4*Ne+0]+.587*X[4*Ne+1]+.114*X[4*Ne+2]+(.299*X[4*(Ne+1)+0]+.587*X[4*(Ne+1)+1]+.114*X[4*(Ne+1)+2])+(.299*X[4*Ue+0]+.587*X[4*Ue+1]+.114*X[4*Ue+2])+(.299*X[4*(Ue+1)+0]+.587*X[4*(Ue+1)+1]+.114*X[4*(Ue+1)+2]))/4,q++,Ne+=2,Ue+=2;Ne+=Q,Ue+=Q}}function we(X,Se,De){var Fe=X.length/4|0;if(De&&!0===De.singleChannel)for(var Ne=0;Ne<Fe;Ne++)Se[Ne]=X[4*Ne+0];else for(var Ue=0;Ue<Fe;Ue++)Se[Ue]=.299*X[4*Ue+0]+.587*X[4*Ue+1]+.114*X[4*Ue+2]}function Xe(X,Se){for(var De=X.data,Fe=X.size.x,Ne=Se.data,Ue=0,ue=Fe,Me=De.length,q=Fe/2,Q=0;ue<Me;){for(var ne=0;ne<q;ne++)Ne[Q]=Math.floor((De[Ue]+De[Ue+1]+De[ue]+De[ue+1])/4),Q++,Ue+=2,ue+=2;Ue+=Fe,ue+=Fe}}function qe(X){var Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],De=X[0],Ne=X[2],Ue=Ne*X[1],ue=Ue*(1-Math.abs(De/60%2-1)),Me=Ne-Ue,q=0,Q=0,ne=0;return De<60?(q=Ue,Q=ue):De<120?(q=ue,Q=Ue):De<180?(Q=Ue,ne=ue):De<240?(Q=ue,ne=Ue):De<300?(q=ue,ne=Ue):De<360&&(q=Ue,ne=ue),Se[0]=255*(q+Me)|0,Se[1]=255*(Q+Me)|0,Se[2]=255*(ne+Me)|0,Se}function je(X){for(var Se=[],De=[],Fe=1;Fe<Math.sqrt(X)+1;Fe++)X%Fe==0&&(De.push(Fe),Fe!==X/Fe&&Se.unshift(Math.floor(X/Fe)));return De.concat(Se)}function ze(X,Se){var De,Fe=je(Se.x),Ne=je(Se.y),Ue=Math.max(Se.x,Se.y),ue=function(W,ce){for(var Ve=0,lt=0,Je=[];Ve<W.length&&lt<ce.length;)W[Ve]===ce[lt]?(Je.push(W[Ve]),Ve++,lt++):W[Ve]>ce[lt]?lt++:Ve++;return Je}(Fe,Ne),Me=[8,10,15,20,32,60,80],q={"x-small":5,small:4,medium:3,large:2,"x-large":1},Q=q[X]||q.medium,ne=Me[Q],ie=Math.floor(Ue/ne);function Ee(W){for(var ce=0,Ve=W[Math.floor(W.length/2)];ce<W.length-1&&W[ce]<ie;)ce++;return ce>0&&(Ve=Math.abs(W[ce]-ie)>Math.abs(W[ce-1]-ie)?W[ce-1]:W[ce]),ie/Ve<Me[Q+1]/Me[Q]&&ie/Ve>Me[Q-1]/Me[Q]?{x:Ve,y:Ve}:null}return(De=Ee(ue))||(De=Ee(je(Ue)))||(De=Ee(je(ie*ne))),De}C.a.setMatrixArrayType(Array);var Ie={top:function(X,Se){return"%"===X.unit?Math.floor(Se.height*(X.value/100)):null},right:function(X,Se){return"%"===X.unit?Math.floor(Se.width-Se.width*(X.value/100)):null},bottom:function(X,Se){return"%"===X.unit?Math.floor(Se.height-Se.height*(X.value/100)):null},left:function(X,Se){return"%"===X.unit?Math.floor(Se.width*(X.value/100)):null}};function ge(X,Se,De){var Fe={width:X,height:Se},Ne=Object.keys(De).reduce(function(Ue,ue){var Q,Me=(Q=De[ue],{value:parseFloat(Q),unit:(Q.indexOf("%"),"%")}),q=Ie[ue](Me,Fe);return Ue[ue]=q,Ue},{});return{sx:Ne.left,sy:Ne.top,sw:Ne.right-Ne.left,sh:Ne.bottom-Ne.top}}},function(M,R,o){"use strict";var C=o(61),b=o.n(C),k=o(3),O=o.n(k),U=o(4),Y=o.n(U),re=o(0),he=o.n(re),te=o(5),J=o(9),we=o(10);function Xe(je){if(je<0)throw new Error("expected positive number, received ".concat(je))}te.a.setMatrixArrayType(Array);var qe=function(){function je(ze,Ie){var ge=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,X=arguments.length>3?arguments[3]:void 0;O()(this,je),he()(this,"data",void 0),he()(this,"size",void 0),he()(this,"indexMapping",void 0),Ie?this.data=Ie:(this.data=new ge(ze.x*ze.y),X&&J.a.init(this.data,0)),this.size=ze}return Y()(je,[{key:"inImageWithBorder",value:function(ze){var Ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Xe(Ie),ze.x>=0&&ze.y>=0&&ze.x<this.size.x+2*Ie&&ze.y<this.size.y+2*Ie}},{key:"subImageAsCopy",value:function(ze,Ie){Xe(Ie.x),Xe(Ie.y);for(var ge=ze.size,X=ge.x,Se=ge.y,De=0;De<X;De++)for(var Fe=0;Fe<Se;Fe++)ze.data[Fe*X+De]=this.data[(Ie.y+Fe)*this.size.x+Ie.x+De];return ze}},{key:"get",value:function(ze,Ie){return this.data[Ie*this.size.x+ze]}},{key:"getSafe",value:function(ze,Ie){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var ge=0;ge<this.size.x;ge++)this.indexMapping.x[ge]=ge,this.indexMapping.x[ge+this.size.x]=ge;for(var X=0;X<this.size.y;X++)this.indexMapping.y[X]=X,this.indexMapping.y[X+this.size.y]=X}return this.data[this.indexMapping.y[Ie+this.size.y]*this.size.x+this.indexMapping.x[ze+this.size.x]]}},{key:"set",value:function(ze,Ie,ge){return this.data[Ie*this.size.x+ze]=ge,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var ze=this.size,Ie=ze.x,ge=ze.y,X=0;X<Ie;X++)this.data[X]=this.data[(ge-1)*Ie+X]=0;for(var Se=1;Se<ge-1;Se++)this.data[Se*Ie]=this.data[Se*Ie+(Ie-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(ze){var Ie,ge,X,Se,De,Fe,Ne,Ue,ue,Me,q=this.data,Q=this.size.y,ne=this.size.x,ie=[],Ee=[],W=Math.PI,ce=W/4;if(ze<=0)return Ee;for(De=0;De<ze;De++)ie[De]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(ge=0;ge<Q;ge++)for(Se=ge*ge,Ie=0;Ie<ne;Ie++)(X=q[ge*ne+Ie])>0&&((Fe=ie[X-1]).m00+=1,Fe.m01+=ge,Fe.m10+=Ie,Fe.m11+=Ie*ge,Fe.m02+=Se,Fe.m20+=Ie*Ie);for(De=0;De<ze;De++)Fe=ie[De],isNaN(Fe.m00)||0===Fe.m00||(Me=(Fe.m02/Fe.m00-(ue=Fe.m01/Fe.m00)*ue-(Fe.m20/Fe.m00-(Ue=Fe.m10/Fe.m00)*Ue))/(2*(Ne=Fe.m11/Fe.m00-Ue*ue)),Me=.5*Math.atan(Me)+(Ne>=0?ce:-ce)+W,Fe.theta=(180*Me/W+90)%180-90,Fe.theta<0&&(Fe.theta+=180),Fe.rad=Me>W?Me-W:Me,Fe.vec=te.c.clone([Math.cos(Me),Math.sin(Me)]),Ee.push(Fe));return Ee}},{key:"getAsRGBA",value:function(){for(var ze=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,Ie=new Uint8ClampedArray(4*this.size.x*this.size.y),ge=0;ge<this.size.y;ge++)for(var X=0;X<this.size.x;X++){var Se=ge*this.size.x+X,De=this.get(X,ge)*ze;Ie[4*Se+0]=De,Ie[4*Se+1]=De,Ie[4*Se+2]=De,Ie[4*Se+3]=255}return Ie}},{key:"show",value:function(ze){var Ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var ge=ze.getContext("2d");if(!ge)throw new Error("Unable to get canvas context");var X=ge.getImageData(0,0,ze.width,ze.height),Se=this.getAsRGBA(Ie);ze.width=this.size.x,ze.height=this.size.y;var De=new ImageData(Se,X.width,X.height);ge.putImageData(De,0,0)}},{key:"overlay",value:function(ze,Ie,ge){var X=Ie<0||Ie>360?360:Ie,Se=[0,1,1],De=[0,0,0],Fe=[255,255,255],Ne=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var Ue=ze.getContext("2d");if(!Ue)throw new Error("Unable to get canvas context");for(var ue=Ue.getImageData(ge.x,ge.y,this.size.x,this.size.y),Me=ue.data,q=this.data.length;q--;){Se[0]=this.data[q]*X;var Q=4*q,ne=Se[0]<=0?Fe:Se[0]>=360?Ne:Object(we.g)(Se,De),ie=b()(ne,3);Me[Q]=ie[0],Me[Q+1]=ie[1],Me[Q+2]=ie[2],Me[Q+3]=255}Ue.putImageData(ue,ge.x,ge.y)}}]),je}();R.a=qe},function(M,R){function o(C,b,k,O,U,Y,re){try{var he=C[Y](re),te=he.value}catch(J){return void k(J)}he.done?b(te):Promise.resolve(te).then(O,U)}M.exports=function(C){return function(){var b=this,k=arguments;return new Promise(function(O,U){var Y=C.apply(b,k);function re(te){o(Y,O,U,re,he,"next",te)}function he(te){o(Y,O,U,re,he,"throw",te)}re(void 0)})}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(140);function b(){return"undefined"!=typeof Reflect&&Reflect.get?(M.exports=b=Reflect.get.bind(),M.exports.__esModule=!0,M.exports.default=M.exports):(M.exports=b=function(k,O,U){var Y=C(k,O);if(Y){var re=Object.getOwnPropertyDescriptor(Y,O);return re.get?re.get.call(arguments.length<3?k:U):re.value}},M.exports.__esModule=!0,M.exports.default=M.exports),b.apply(this,arguments)}M.exports=b,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(o){var C=typeof o;return null!=o&&("object"==C||"function"==C)}},function(M,R){M.exports=Array.isArray},function(M,R,o){"use strict";R.a={drawRect:function(C,b,k,O){k.strokeStyle=O.color,k.fillStyle=O.color,k.lineWidth=O.lineWidth||1,k.beginPath(),k.strokeRect(C.x,C.y,b.x,b.y)},drawPath:function(C,b,k,O){k.strokeStyle=O.color,k.fillStyle=O.color,k.lineWidth=O.lineWidth,k.beginPath(),k.moveTo(C[0][b.x],C[0][b.y]);for(var U=1;U<C.length;U++)k.lineTo(C[U][b.x],C[U][b.y]);k.closePath(),k.stroke()},drawImage:function(C,b,k){var O=k.getImageData(0,0,b.x,b.y),U=O.data,Y=U.length,re=C.length;if(Y/re!=4)return!1;for(;re--;){var he=C[re];U[--Y]=255,U[--Y]=he,U[--Y]=he,U[--Y]=he}return k.putImageData(O,0,0),!0}}},function(M,R){function o(C){return M.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},M.exports.__esModule=!0,M.exports.default=M.exports,o(C)}M.exports=o,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(73),b=o(128)(function(k,O,U){C(k,O,U)});M.exports=b},function(M,R,o){var C=o(44),b="object"==typeof self&&self&&self.Object===Object&&self,k=C||b||Function("return this")();M.exports=k},function(M,R){M.exports=function(o){return null!=o&&"object"==typeof o}},function(M,R,o){"use strict";R.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(C,b){var k,O=C.data,U=b.data,Y=this.searchDirections,re=C.size.x;function he(J,we,Xe,qe){var je,ze,Ie;for(je=0;je<Y.length;je++){if(O[k=(ze=J.cy+Y[J.dir][0])*re+(Ie=J.cx+Y[J.dir][1])]===we&&(0===U[k]||U[k]===Xe))return U[k]=Xe,J.cy=ze,J.cx=Ie,!0;0===U[k]&&(U[k]=qe),J.dir=(J.dir+1)%8}return!1}function te(J,we,Xe){return{dir:Xe,x:J,y:we,next:null,prev:null}}return{trace:function(J,we,Xe,qe){return he(J,we,Xe,qe)},contourTracing:function(J,we,Xe,qe,je){return function(ze,Ie,ge,X,Se){var De,Fe,Ne,Ue=null,ue={cx:Ie,cy:ze,dir:0};if(he(ue,X,ge,Se)){De=Ue=te(Ie,ze,ue.dir),Ne=ue.dir,(Fe=te(ue.cx,ue.cy,0)).prev=De,De.next=Fe,Fe.next=null,De=Fe;var Me=C.size.x*C.size.y,q=0;do{ue.dir=(ue.dir+6)%8,he(ue,X,ge,Se),Ne!==ue.dir?(De.dir=ue.dir,(Fe=te(ue.cx,ue.cy,0)).prev=De,De.next=Fe,Fe.next=null,De=Fe):(De.dir=Ne,De.x=ue.cx,De.y=ue.cy),Ne=ue.dir}while((ue.cx!==Ie||ue.cy!==ze)&&++q<Me);Ue.prev=De.prev,De.prev.next=Ue}return Ue}(J,we,Xe,qe,je)}}}}},function(M,R,o){var C=o(27),b=o(86),k=o(87),O=C?C.toStringTag:void 0;M.exports=function(U){return null==U?void 0===U?"[object Undefined]":"[object Null]":O&&O in Object(U)?b(U):k(U)}},function(M,R,o){"use strict";(function(C){var b,k,O,U,Y,re,he,te,J,we,Xe=o(5),qe=o(11),je=o(10),ze=o(9),Ie=(o(16),o(64)),ge=o(21),X=o(65);Xe.a.setMatrixArrayType(Array);var Se,De,Fe={ctx:{binary:null},dom:{binary:null}},Ne={x:0,y:0};function Ue(q){var Q,ne,ie,Ee,W,ce,Ve,lt=J.size.x,Je=J.size.y,rt=-J.size.x,dt=-J.size.y;for(Q=0,ne=0;ne<q.length;ne++)Q+=(Ee=q[ne]).rad;for((Q=(180*(Q/=q.length)/Math.PI+90)%180-90)<0&&(Q+=180),Q=(180-Q)*Math.PI/180,W=Xe.b.copy(Xe.b.create(),[Math.cos(Q),Math.sin(Q),-Math.sin(Q),Math.cos(Q)]),ne=0;ne<q.length;ne++)for(Ee=q[ne],ie=0;ie<4;ie++)Xe.c.transformMat2(Ee.box[ie],Ee.box[ie],W);for(ne=0;ne<q.length;ne++)for(Ee=q[ne],ie=0;ie<4;ie++)Ee.box[ie][0]<lt&&(lt=Ee.box[ie][0]),Ee.box[ie][0]>rt&&(rt=Ee.box[ie][0]),Ee.box[ie][1]<Je&&(Je=Ee.box[ie][1]),Ee.box[ie][1]>dt&&(dt=Ee.box[ie][1]);for(ce=[[lt,Je],[rt,Je],[rt,dt],[lt,dt]],Ve=b.halfSample?2:1,W=Xe.b.invert(W,W),ie=0;ie<4;ie++)Xe.c.transformMat2(ce[ie],ce[ie],W);for(ie=0;ie<4;ie++)Xe.c.scale(ce[ie],ce[ie],Ve);return ce}function ue(q,Q){J.subImageAsCopy(U,Object(je.h)(q,Q)),De.skeletonize()}function Me(q,Q,ne,ie){var Ee,W,ce,Ve,lt=[],Je=[],rt=Math.ceil(we.x/3);if(q.length>=2){for(Ee=0;Ee<q.length;Ee++)q[Ee].m00>rt&&lt.push(q[Ee]);if(lt.length>=2){for(ce=function(Jt){var vn=Object(je.b)(Jt,.9),Rt=Object(je.j)(vn,1,function(ir){return ir.getPoints().length}),dn=[],_n=[];if(1===Rt.length){dn=Rt[0].item.getPoints();for(var ar=0;ar<dn.length;ar++)_n.push(dn[ar].point)}return _n}(lt),W=0,Ee=0;Ee<ce.length;Ee++){var dt,$t;W+=null!==(dt=null===($t=ce[Ee])||void 0===$t?void 0:$t.rad)&&void 0!==dt?dt:0}ce.length>1&&ce.length>=lt.length/4*3&&ce.length>q.length/4&&(W/=ce.length,Ve={index:Q[1]*Ne.x+Q[0],pos:{x:ne,y:ie},box:[Xe.c.clone([ne,ie]),Xe.c.clone([ne+U.size.x,ie]),Xe.c.clone([ne+U.size.x,ie+U.size.y]),Xe.c.clone([ne,ie+U.size.y])],moments:ce,rad:W,vec:Xe.c.clone([Math.cos(W),Math.sin(W)])},Je.push(Ve))}}return Je}R.a={init:function(q,Q){b=Q,Se=q,function(){k=b.halfSample?new qe.a({x:Se.size.x/2|0,y:Se.size.y/2|0}):Se,we=Object(je.a)(b.patchSize,k.size),Ne.x=k.size.x/we.x|0,Ne.y=k.size.y/we.y|0,J=new qe.a(k.size,void 0,Uint8Array,!1),Y=new qe.a(we,void 0,Array,!0);var ne=new ArrayBuffer(65536);U=new qe.a(we,new Uint8Array(ne,0,we.x*we.y)),O=new qe.a(we,new Uint8Array(ne,we.x*we.y*3,we.x*we.y),void 0,!0),De=Object(X.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:C,{size:we.x},ne),te=new qe.a({x:k.size.x/U.size.x|0,y:k.size.y/U.size.y|0},void 0,Array,!0),re=new qe.a(te.size,void 0,void 0,!0),he=new qe.a(te.size,void 0,Int32Array,!0)}(),function(){if(!b.useWorker&&"undefined"!=typeof document){Fe.dom.binary=document.createElement("canvas"),Fe.dom.binary.className="binaryBuffer";var ne=!!b.willReadFrequently;console.warn("* initCanvas willReadFrequently",ne,b),Fe.ctx.binary=Fe.dom.binary.getContext("2d",{willReadFrequently:ne}),Fe.dom.binary.width=J.size.x,Fe.dom.binary.height=J.size.y}}()},locate:function(){b.halfSample&&Object(je.f)(Se,k),Object(je.i)(k,J),J.zeroBorder();var q=function(){var ie,Ee,W,ce,Ve,lt,Je=[];for(ie=0;ie<Ne.x;ie++)for(Ee=0;Ee<Ne.y;Ee++)ue(W=U.size.x*ie,ce=U.size.y*Ee),O.zeroBorder(),ze.a.init(Y.data,0),lt=Ie.a.create(O,Y).rasterize(0),Ve=Y.moments(lt.count),Je=Je.concat(Me(Ve,[ie,Ee],W,ce));return Je}();if(q.length<Ne.x*Ne.y*.05)return null;var Q=function(ie){var Ee,W,ce=0,Ve=0;function lt(){var rt;for(rt=0;rt<he.data.length;rt++)if(0===he.data[rt]&&1===re.data[rt])return rt;return he.data.length}function Je(rt){var Jt,vn,Rt,dn=rt%he.size.x,_n=rt/he.size.x|0;if(rt<he.data.length)for(Jt=te.data[rt],he.data[rt]=ce,Rt=0;Rt<ge.a.searchDirections.length;Rt++)0!==re.data[vn=(_n+ge.a.searchDirections[Rt][0])*he.size.x+(dn+ge.a.searchDirections[Rt][1])]?0===he.data[vn]&&Math.abs(Xe.c.dot(te.data[vn].vec,Jt.vec))>.95&&Je(vn):he.data[vn]=Number.MAX_VALUE}for(ze.a.init(re.data,0),ze.a.init(he.data,0),ze.a.init(te.data,null),Ee=0;Ee<ie.length;Ee++)te.data[(W=ie[Ee]).index]=W,re.data[W.index]=1;for(re.zeroBorder();(Ve=lt())<he.data.length;)ce++,Je(Ve);return ce}(q);if(Q<1)return null;var ne=function(ie){var Ee,W,ce=[];for(Ee=0;Ee<ie;Ee++)ce.push(0);for(W=he.data.length;W--;)he.data[W]>0&&ce[he.data[W]-1]++;return(ce=ce.map(function(Ve,lt){return{val:Ve,label:lt+1}})).sort(function(Ve,lt){return lt.val-Ve.val}),ce.filter(function(Ve){return Ve.val>=5})}(Q);return 0===ne.length?null:function(ie,Ee){var W,ce,lt,Je=[],rt=[];for(W=0;W<ie.length;W++){for(ce=he.data.length,Je.length=0;ce--;)he.data[ce]===ie[W].label&&Je.push(te.data[ce]);(lt=Ue(Je))&&rt.push(lt)}return rt}(ne)},checkImageConstraints:function(q,Q){var ne,ie,Ee=q.getWidth(),W=q.getHeight(),ce=Q.halfSample?.5:1;q.getConfig().area&&(ie=Object(je.d)(Ee,W,q.getConfig().area),q.setTopRight({x:ie.sx,y:ie.sy}),q.setCanvasSize({x:Ee,y:W}),Ee=ie.sw,W=ie.sh);var Ve={x:Math.floor(Ee*ce),y:Math.floor(W*ce)};if(ne=Object(je.a)(Q.patchSize,Ve),q.setWidth(Math.floor(Math.floor(Ve.x/ne.x)*(1/ce)*ne.x)),q.setHeight(Math.floor(Math.floor(Ve.y/ne.y)*(1/ce)*ne.y)),q.getWidth()%ne.x==0&&q.getHeight()%ne.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(Ee," )and height (").concat(W,") must a multiple of ").concat(ne.x))}}}).call(this,o(45))},function(M,R,o){var C=o(75),b=o(76),k=o(77),O=o(78),U=o(79);function Y(re){var he=-1,te=null==re?0:re.length;for(this.clear();++he<te;){var J=re[he];this.set(J[0],J[1])}}Y.prototype.clear=C,Y.prototype.delete=b,Y.prototype.get=k,Y.prototype.has=O,Y.prototype.set=U,M.exports=Y},function(M,R,o){var C=o(26);M.exports=function(b,k){for(var O=b.length;O--;)if(C(b[O][0],k))return O;return-1}},function(M,R){M.exports=function(o,C){return o===C||o!=o&&C!=C}},function(M,R,o){var C=o(19).Symbol;M.exports=C},function(M,R,o){var C=o(34)(Object,"create");M.exports=C},function(M,R,o){var C=o(100);M.exports=function(b,k){var O=b.__data__;return C(k)?O["string"==typeof k?"string":"hash"]:O.map}},function(M,R,o){var C=o(115),b=o(20),k=Object.prototype,O=k.hasOwnProperty,U=k.propertyIsEnumerable,Y=C(function(){return arguments}())?C:function(re){return b(re)&&O.call(re,"callee")&&!U.call(re,"callee")};M.exports=Y},function(M,R){var o=/^(?:0|[1-9]\d*)$/;M.exports=function(C,b){var k=typeof C;return!!(b=null==b?9007199254740991:b)&&("number"==k||"symbol"!=k&&o.test(C))&&C>-1&&C%1==0&&C<b}},function(M,R,o){var C=o(15),b=o(147),k=o(148),O=o(151);M.exports=function(U,Y){return C(U)?U:b(U,Y)?[U]:k(O(U))}},function(M,R,o){var C=o(141),b=o(142),k=o(59),O=o(143);M.exports=function(U){return C(U)||b(U)||k(U)||O()},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(85),b=o(91);M.exports=function(k,O){var U=b(k,O);return C(U)?U:void 0}},function(M,R,o){var C=o(22),b=o(14);M.exports=function(k){if(!b(k))return!1;var O=C(k);return"[object Function]"==O||"[object GeneratorFunction]"==O||"[object AsyncFunction]"==O||"[object Proxy]"==O}},function(M,R,o){var C=o(48);M.exports=function(b,k,O){"__proto__"==k&&C?C(b,k,{configurable:!0,enumerable:!0,value:O,writable:!0}):b[k]=O}},function(M,R){M.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},function(M,R,o){var C=o(35),b=o(39);M.exports=function(k){return null!=k&&b(k.length)&&!C(k)}},function(M,R){M.exports=function(o){return"number"==typeof o&&o>-1&&o%1==0&&o<=9007199254740991}},function(M,R){function o(C,b){return M.exports=o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,O){return k.__proto__=O,k},M.exports.__esModule=!0,M.exports.default=M.exports,o(C,b)}M.exports=o,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(22),b=o(20);M.exports=function(k){return"symbol"==typeof k||b(k)&&"[object Symbol]"==C(k)}},function(M,R,o){var C=o(41);M.exports=function(b){if("string"==typeof b||C(b))return b;var k=b+"";return"0"==k&&1/b==-1/0?"-0":k}},function(M,R,o){var C=o(34)(o(19),"Map");M.exports=C},function(M,R,o){(function(C){M.exports="object"==typeof C&&C&&C.Object===Object&&C}).call(this,o(45))},function(M,R){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(C){"object"==typeof window&&(o=window)}M.exports=o},function(M,R,o){var C=o(92),b=o(99),k=o(101),O=o(102),U=o(103);function Y(re){var he=-1,te=null==re?0:re.length;for(this.clear();++he<te;){var J=re[he];this.set(J[0],J[1])}}Y.prototype.clear=C,Y.prototype.delete=b,Y.prototype.get=k,Y.prototype.has=O,Y.prototype.set=U,M.exports=Y},function(M,R,o){var C=o(36),b=o(26);M.exports=function(k,O,U){(void 0!==U&&!b(k[O],U)||void 0===U&&!(O in k))&&C(k,O,U)}},function(M,R,o){var C=o(34),b=function(){try{var k=C(Object,"defineProperty");return k({},"",{}),k}catch(O){}}();M.exports=b},function(M,R,o){var C=o(114)(Object.getPrototypeOf,Object);M.exports=C},function(M,R){var o=Object.prototype;M.exports=function(C){var b=C&&C.constructor;return C===("function"==typeof b&&b.prototype||o)}},function(M,R,o){(function(C){var b=o(19),k=o(117),O=R&&!R.nodeType&&R,U=O&&"object"==typeof C&&C&&!C.nodeType&&C,Y=U&&U.exports===O?b.Buffer:void 0;C.exports=(Y?Y.isBuffer:void 0)||k}).call(this,o(37)(M))},function(M,R,o){var C=o(119),b=o(120),k=o(121),O=k&&k.isTypedArray,U=O?b(O):C;M.exports=U},function(M,R){M.exports=function(o,C){if(("constructor"!==C||"function"!=typeof o[C])&&"__proto__"!=C)return o[C]}},function(M,R,o){var C=o(36),b=o(26),k=Object.prototype.hasOwnProperty;M.exports=function(O,U,Y){var re=O[U];k.call(O,U)&&b(re,Y)&&(void 0!==Y||U in O)||C(O,U,Y)}},function(M,R,o){var C=o(124),b=o(126),k=o(38);M.exports=function(O){return k(O)?C(O,!0):b(O)}},function(M,R){M.exports=function(o){return o}},function(M,R,o){var C=o(130),b=Math.max;M.exports=function(k,O,U){return O=b(void 0===O?k.length-1:O,0),function(){for(var Y=arguments,re=-1,he=b(Y.length-O,0),te=Array(he);++re<he;)te[re]=Y[O+re];re=-1;for(var J=Array(O+1);++re<O;)J[re]=Y[re];return J[O]=U(te),C(k,this,J)}}},function(M,R,o){var C=o(131),b=o(133)(C);M.exports=b},function(M,R,o){var C=o(60);M.exports=function(b,k){if(b){if("string"==typeof b)return C(b,k);var O=Object.prototype.toString.call(b).slice(8,-1);return"Object"===O&&b.constructor&&(O=b.constructor.name),"Map"===O||"Set"===O?Array.from(b):"Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?C(b,k):void 0}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(o,C){(null==C||C>o.length)&&(C=o.length);for(var b=0,k=new Array(C);b<C;b++)k[b]=o[b];return k},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(136),b=o(137),k=o(59),O=o(138);M.exports=function(U,Y){return C(U)||b(U,Y)||k(U,Y)||O()},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(144),b=o(158)(function(k,O){return null==k?{}:C(k,O)});M.exports=b},function(M,R,o){var C=o(2),b=o(40),k=o(163),O=o(164);function U(Y){var re="function"==typeof Map?new Map:void 0;return M.exports=U=function(he){if(null===he||!k(he))return he;if("function"!=typeof he)throw new TypeError("Super expression must either be null or a function");if(void 0!==re){if(re.has(he))return re.get(he);re.set(he,te)}function te(){return O(he,arguments,C(this).constructor)}return te.prototype=Object.create(he.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),b(te,he)},M.exports.__esModule=!0,M.exports.default=M.exports,U(Y)}M.exports=U,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){"use strict";var C=o(21),b={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(k,O){var U=k.data,Y=O.data,re=k.size.x,he=k.size.y,te=C.a.create(k,O);return{rasterize:function(J){var we,Xe,qe,je,ze,Ie,ge,X,Se,De,Fe,Ne,Ue=[],ue=0;for(Ne=0;Ne<400;Ne++)Ue[Ne]=0;for(Ue[0]=U[0],Se=null,Ie=1;Ie<he-1;Ie++)for(je=0,Xe=Ue[0],ze=1;ze<re-1;ze++)if(0===Y[Fe=Ie*re+ze])if((we=U[Fe])!==Xe){if(0===je)Ue[qe=ue+1]=we,Xe=we,null!==(ge=te.contourTracing(Ie,ze,qe,we,b.DIR.OUTSIDE_EDGE))&&(ue++,je=qe,(X=b.createContour2D()).dir=b.CONTOUR_DIR.CW_DIR,X.index=je,X.firstVertex=ge,X.nextpeer=Se,X.insideContours=null,null!==Se&&(Se.prevpeer=X),Se=X);else if(null!==(ge=te.contourTracing(Ie,ze,b.DIR.INSIDE_EDGE,we,je))){for((X=b.createContour2D()).firstVertex=ge,X.insideContours=null,X.dir=0===J?b.CONTOUR_DIR.CCW_DIR:b.CONTOUR_DIR.CW_DIR,X.index=J,De=Se;null!==De&&De.index!==je;)De=De.nextpeer;null!==De&&(X.nextpeer=De.insideContours,null!==De.insideContours&&(De.insideContours.prevpeer=X),De.insideContours=X)}}else Y[Fe]=je;else Y[Fe]===b.DIR.OUTSIDE_EDGE||Y[Fe]===b.DIR.INSIDE_EDGE?(je=0,Xe=Y[Fe]===b.DIR.INSIDE_EDGE?U[Fe]:Ue[0]):Xe=Ue[je=Y[Fe]];for(De=Se;null!==De;)De.index=J,De=De.nextpeer;return{cc:Se,count:ue}},debug:{drawContour:function(J,we){var Xe,qe,je,ze=J.getContext("2d"),Ie=we;for(ze.strokeStyle="red",ze.fillStyle="red",ze.lineWidth=1,Xe=null!==Ie?Ie.insideContours:null;null!==Ie;){switch(null!==Xe?(qe=Xe,Xe=Xe.nextpeer):(qe=Ie,Xe=null!==(Ie=Ie.nextpeer)?Ie.insideContours:null),qe.dir){case b.CONTOUR_DIR.CW_DIR:ze.strokeStyle="red";break;case b.CONTOUR_DIR.CCW_DIR:ze.strokeStyle="blue";break;case b.CONTOUR_DIR.UNKNOWN_DIR:ze.strokeStyle="green"}je=qe.firstVertex,ze.beginPath(),ze.moveTo(je.x,je.y);do{ze.lineTo((je=je.next).x,je.y)}while(je!==qe.firstVertex);ze.stroke()}}}}}};R.a=b},function(M,R,o){"use strict";R.a=function(C,b,k){var O=new C.Uint8Array(k),U=0|b.size,Y=C.Math.imul;function re(Ie,ge){Ie|=0,ge|=0;var X=0,Se=0,Fe=0,Ne=0,Ue=0,ue=0,Me=0;for(X=1;(0|X)<(U-1|0);X=X+1|0)for(Me=Me+U|0,Se=1;(0|Se)<(U-1|0);Se=Se+1|0)O[ge+Me+Se|0]=5==(0|(0|O[Ie+(Fe=Me-U|0)+(Ue=Se-1|0)|0])+(0|O[Ie+Fe+(ue=Se+1|0)|0])+(0|O[Ie+Me+Se|0])+(0|O[Ie+(Ne=Me+U|0)+Ue|0])+(0|O[Ie+Ne+ue|0]))?1:0}function he(Ie,ge,X){Ie|=0,ge|=0,X|=0;var Se=0;for(Se=0|Y(U,U);(0|Se)>0;)O[X+(Se=Se-1|0)|0]=(0|O[Ie+Se|0])-(0|O[ge+Se|0])|0}function te(Ie,ge,X){Ie|=0,ge|=0,X|=0;var Se=0;for(Se=0|Y(U,U);(0|Se)>0;)O[X+(Se=Se-1|0)|0]=0|O[Ie+Se|0]|O[ge+Se|0]|0}function J(Ie){Ie|=0;var ge=0,X=0;for(X=0|Y(U,U);(0|X)>0;)ge=(0|ge)+(0|O[Ie+(X=X-1|0)|0])|0;return 0|ge}function Xe(Ie,ge){Ie|=0,ge|=0;var X=0,Se=0,Fe=0,Ne=0,Ue=0,ue=0,Me=0;for(X=1;(0|X)<(U-1|0);X=X+1|0)for(Me=Me+U|0,Se=1;(0|Se)<(U-1|0);Se=Se+1|0)O[ge+Me+Se|0]=(0|(0|O[Ie+(Fe=Me-U|0)+(Ue=Se-1|0)|0])+(0|O[Ie+Fe+(ue=Se+1|0)|0])+(0|O[Ie+Me+Se|0])+(0|O[Ie+(Ne=Me+U|0)+Ue|0])+(0|O[Ie+Ne+ue|0]))>0?1:0}function qe(Ie,ge){Ie|=0,ge|=0;var X=0;for(X=0|Y(U,U);(0|X)>0;)O[ge+(X=X-1|0)|0]=0|O[Ie+X|0]}return{skeletonize:function(){var ge,X,Se,Fe=0;(function(Ie,ge){Ie|=0,ge|=0;var X=0;for(X=0|Y(U,U);(0|X)>0;)O[Ie+(X=X-1|0)|0]=ge})(Se=(X=(ge=0|Y(U,U))+ge|0)+ge|0,0),function(Ie){Ie|=0;var ge=0,X=0;for(ge=0;(0|ge)<(U-1|0);ge=ge+1|0)O[Ie+ge|0]=0,O[Ie+X|0]=0,O[Ie+(X=X+U-1|0)|0]=0,X=X+1|0;for(ge=0;(0|ge)<(0|U);ge=ge+1|0)O[Ie+X|0]=0,X=X+1|0}(0);do{re(0,ge),Xe(ge,X),he(0,X,X),te(Se,X,Se),qe(ge,0),Fe=0==(0|J(0))|0}while(!Fe)}}}},,,,,,,function(M,R,o){M.exports=o(166)},function(M,R,o){var C=o(74),b=o(47),k=o(104),O=o(106),U=o(14),Y=o(55),re=o(53);M.exports=function he(te,J,we,Xe,qe){te!==J&&k(J,function(je,ze){if(qe||(qe=new C),U(je))O(te,J,ze,we,he,Xe,qe);else{var Ie=Xe?Xe(re(te,ze),je,ze+"",te,J,qe):void 0;void 0===Ie&&(Ie=je),b(te,ze,Ie)}},Y)}},function(M,R,o){var C=o(24),b=o(80),k=o(81),O=o(82),U=o(83),Y=o(84);function re(he){var te=this.__data__=new C(he);this.size=te.size}re.prototype.clear=b,re.prototype.delete=k,re.prototype.get=O,re.prototype.has=U,re.prototype.set=Y,M.exports=re},function(M,R){M.exports=function(){this.__data__=[],this.size=0}},function(M,R,o){var C=o(25),b=Array.prototype.splice;M.exports=function(k){var O=this.__data__,U=C(O,k);return!(U<0||(U==O.length-1?O.pop():b.call(O,U,1),--this.size,0))}},function(M,R,o){var C=o(25);M.exports=function(b){var k=this.__data__,O=C(k,b);return O<0?void 0:k[O][1]}},function(M,R,o){var C=o(25);M.exports=function(b){return C(this.__data__,b)>-1}},function(M,R,o){var C=o(25);M.exports=function(b,k){var O=this.__data__,U=C(O,b);return U<0?(++this.size,O.push([b,k])):O[U][1]=k,this}},function(M,R,o){var C=o(24);M.exports=function(){this.__data__=new C,this.size=0}},function(M,R){M.exports=function(o){var C=this.__data__,b=C.delete(o);return this.size=C.size,b}},function(M,R){M.exports=function(o){return this.__data__.get(o)}},function(M,R){M.exports=function(o){return this.__data__.has(o)}},function(M,R,o){var C=o(24),b=o(43),k=o(46);M.exports=function(O,U){var Y=this.__data__;if(Y instanceof C){var re=Y.__data__;if(!b||re.length<199)return re.push([O,U]),this.size=++Y.size,this;Y=this.__data__=new k(re)}return Y.set(O,U),this.size=Y.size,this}},function(M,R,o){var C=o(35),b=o(88),k=o(14),O=o(90),U=/^\[object .+?Constructor\]$/,J=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");M.exports=function(we){return!(!k(we)||b(we))&&(C(we)?J:U).test(O(we))}},function(M,R,o){var C=o(27),b=Object.prototype,k=b.hasOwnProperty,O=b.toString,U=C?C.toStringTag:void 0;M.exports=function(Y){var re=k.call(Y,U),he=Y[U];try{Y[U]=void 0;var te=!0}catch(we){}var J=O.call(Y);return te&&(re?Y[U]=he:delete Y[U]),J}},function(M,R){var o=Object.prototype.toString;M.exports=function(C){return o.call(C)}},function(M,R,o){var C,b=o(89),k=(C=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";M.exports=function(O){return!!k&&k in O}},function(M,R,o){var C=o(19)["__core-js_shared__"];M.exports=C},function(M,R){var o=Function.prototype.toString;M.exports=function(C){if(null!=C){try{return o.call(C)}catch(b){}try{return C+""}catch(b){}}return""}},function(M,R){M.exports=function(o,C){return null==o?void 0:o[C]}},function(M,R,o){var C=o(93),b=o(24),k=o(43);M.exports=function(){this.size=0,this.__data__={hash:new C,map:new(k||b),string:new C}}},function(M,R,o){var C=o(94),b=o(95),k=o(96),O=o(97),U=o(98);function Y(re){var he=-1,te=null==re?0:re.length;for(this.clear();++he<te;){var J=re[he];this.set(J[0],J[1])}}Y.prototype.clear=C,Y.prototype.delete=b,Y.prototype.get=k,Y.prototype.has=O,Y.prototype.set=U,M.exports=Y},function(M,R,o){var C=o(28);M.exports=function(){this.__data__=C?C(null):{},this.size=0}},function(M,R){M.exports=function(o){var C=this.has(o)&&delete this.__data__[o];return this.size-=C?1:0,C}},function(M,R,o){var C=o(28),b=Object.prototype.hasOwnProperty;M.exports=function(k){var O=this.__data__;if(C){var U=O[k];return"__lodash_hash_undefined__"===U?void 0:U}return b.call(O,k)?O[k]:void 0}},function(M,R,o){var C=o(28),b=Object.prototype.hasOwnProperty;M.exports=function(k){var O=this.__data__;return C?void 0!==O[k]:b.call(O,k)}},function(M,R,o){var C=o(28);M.exports=function(b,k){var O=this.__data__;return this.size+=this.has(b)?0:1,O[b]=C&&void 0===k?"__lodash_hash_undefined__":k,this}},function(M,R,o){var C=o(29);M.exports=function(b){var k=C(this,b).delete(b);return this.size-=k?1:0,k}},function(M,R){M.exports=function(o){var C=typeof o;return"string"==C||"number"==C||"symbol"==C||"boolean"==C?"__proto__"!==o:null===o}},function(M,R,o){var C=o(29);M.exports=function(b){return C(this,b).get(b)}},function(M,R,o){var C=o(29);M.exports=function(b){return C(this,b).has(b)}},function(M,R,o){var C=o(29);M.exports=function(b,k){var O=C(this,b),U=O.size;return O.set(b,k),this.size+=O.size==U?0:1,this}},function(M,R,o){var C=o(105)();M.exports=C},function(M,R){M.exports=function(o){return function(C,b,k){for(var O=-1,U=Object(C),Y=k(C),re=Y.length;re--;){var he=Y[o?re:++O];if(!1===b(U[he],he,U))break}return C}}},function(M,R,o){var C=o(47),b=o(107),k=o(108),O=o(111),U=o(112),Y=o(30),re=o(15),he=o(116),te=o(51),J=o(35),we=o(14),Xe=o(118),qe=o(52),je=o(53),ze=o(122);M.exports=function(Ie,ge,X,Se,De,Fe,Ne){var Ue=je(Ie,X),ue=je(ge,X),Me=Ne.get(ue);if(Me)C(Ie,X,Me);else{var q=Fe?Fe(Ue,ue,X+"",Ie,ge,Ne):void 0,Q=void 0===q;if(Q){var ne=re(ue),ie=!ne&&te(ue),Ee=!ne&&!ie&&qe(ue);q=ue,ne||ie||Ee?re(Ue)?q=Ue:he(Ue)?q=O(Ue):ie?(Q=!1,q=b(ue,!0)):Ee?(Q=!1,q=k(ue,!0)):q=[]:Xe(ue)||Y(ue)?(q=Ue,Y(Ue)?q=ze(Ue):we(Ue)&&!J(Ue)||(q=U(ue))):Q=!1}Q&&(Ne.set(ue,q),De(q,ue,Se,Fe,Ne),Ne.delete(ue)),C(Ie,X,q)}}},function(M,R,o){(function(C){var b=o(19),k=R&&!R.nodeType&&R,O=k&&"object"==typeof C&&C&&!C.nodeType&&C,U=O&&O.exports===k?b.Buffer:void 0,Y=U?U.allocUnsafe:void 0;C.exports=function(re,he){if(he)return re.slice();var te=re.length,J=Y?Y(te):new re.constructor(te);return re.copy(J),J}}).call(this,o(37)(M))},function(M,R,o){var C=o(109);M.exports=function(b,k){var O=k?C(b.buffer):b.buffer;return new b.constructor(O,b.byteOffset,b.length)}},function(M,R,o){var C=o(110);M.exports=function(b){var k=new b.constructor(b.byteLength);return new C(k).set(new C(b)),k}},function(M,R,o){var C=o(19).Uint8Array;M.exports=C},function(M,R){M.exports=function(o,C){var b=-1,k=o.length;for(C||(C=Array(k));++b<k;)C[b]=o[b];return C}},function(M,R,o){var C=o(113),b=o(49),k=o(50);M.exports=function(O){return"function"!=typeof O.constructor||k(O)?{}:C(b(O))}},function(M,R,o){var C=o(14),b=Object.create,k=function(){function O(){}return function(U){if(!C(U))return{};if(b)return b(U);O.prototype=U;var Y=new O;return O.prototype=void 0,Y}}();M.exports=k},function(M,R){M.exports=function(o,C){return function(b){return o(C(b))}}},function(M,R,o){var C=o(22),b=o(20);M.exports=function(k){return b(k)&&"[object Arguments]"==C(k)}},function(M,R,o){var C=o(38),b=o(20);M.exports=function(k){return b(k)&&C(k)}},function(M,R){M.exports=function(){return!1}},function(M,R,o){var C=o(22),b=o(49),k=o(20),Y=Function.prototype.toString,re=Object.prototype.hasOwnProperty,he=Y.call(Object);M.exports=function(te){if(!k(te)||"[object Object]"!=C(te))return!1;var J=b(te);if(null===J)return!0;var we=re.call(J,"constructor")&&J.constructor;return"function"==typeof we&&we instanceof we&&Y.call(we)==he}},function(M,R,o){var C=o(22),b=o(39),k=o(20),O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Arguments]"]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object Boolean]"]=O["[object DataView]"]=O["[object Date]"]=O["[object Error]"]=O["[object Function]"]=O["[object Map]"]=O["[object Number]"]=O["[object Object]"]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object WeakMap]"]=!1,M.exports=function(U){return k(U)&&b(U.length)&&!!O[C(U)]}},function(M,R){M.exports=function(o){return function(C){return o(C)}}},function(M,R,o){(function(C){var b=o(44),k=R&&!R.nodeType&&R,O=k&&"object"==typeof C&&C&&!C.nodeType&&C,U=O&&O.exports===k&&b.process,Y=function(){try{return O&&O.require&&O.require("util").types||U&&U.binding&&U.binding("util")}catch(he){}}();C.exports=Y}).call(this,o(37)(M))},function(M,R,o){var C=o(123),b=o(55);M.exports=function(k){return C(k,b(k))}},function(M,R,o){var C=o(54),b=o(36);M.exports=function(k,O,U,Y){var re=!U;U||(U={});for(var he=-1,te=O.length;++he<te;){var J=O[he],we=Y?Y(U[J],k[J],J,U,k):void 0;void 0===we&&(we=k[J]),re?b(U,J,we):C(U,J,we)}return U}},function(M,R,o){var C=o(125),b=o(30),k=o(15),O=o(51),U=o(31),Y=o(52),re=Object.prototype.hasOwnProperty;M.exports=function(he,te){var J=k(he),we=!J&&b(he),Xe=!J&&!we&&O(he),qe=!J&&!we&&!Xe&&Y(he),je=J||we||Xe||qe,ze=je?C(he.length,String):[],Ie=ze.length;for(var ge in he)!te&&!re.call(he,ge)||je&&("length"==ge||Xe&&("offset"==ge||"parent"==ge)||qe&&("buffer"==ge||"byteLength"==ge||"byteOffset"==ge)||U(ge,Ie))||ze.push(ge);return ze}},function(M,R){M.exports=function(o,C){for(var b=-1,k=Array(o);++b<o;)k[b]=C(b);return k}},function(M,R,o){var C=o(14),b=o(50),k=o(127),O=Object.prototype.hasOwnProperty;M.exports=function(U){if(!C(U))return k(U);var Y=b(U),re=[];for(var he in U)("constructor"!=he||!Y&&O.call(U,he))&&re.push(he);return re}},function(M,R){M.exports=function(o){var C=[];if(null!=o)for(var b in Object(o))C.push(b);return C}},function(M,R,o){var C=o(129),b=o(134);M.exports=function(k){return C(function(O,U){var Y=-1,re=U.length,he=re>1?U[re-1]:void 0,te=re>2?U[2]:void 0;for(he=k.length>3&&"function"==typeof he?(re--,he):void 0,te&&b(U[0],U[1],te)&&(he=re<3?void 0:he,re=1),O=Object(O);++Y<re;){var J=U[Y];J&&k(O,J,Y,he)}return O})}},function(M,R,o){var C=o(56),b=o(57),k=o(58);M.exports=function(O,U){return k(b(O,U,C),O+"")}},function(M,R){M.exports=function(o,C,b){switch(b.length){case 0:return o.call(C);case 1:return o.call(C,b[0]);case 2:return o.call(C,b[0],b[1]);case 3:return o.call(C,b[0],b[1],b[2])}return o.apply(C,b)}},function(M,R,o){var C=o(132),b=o(48),k=o(56);M.exports=b?function(U,Y){return b(U,"toString",{configurable:!0,enumerable:!1,value:C(Y),writable:!0})}:k},function(M,R){M.exports=function(o){return function(){return o}}},function(M,R){var o=Date.now;M.exports=function(C){var b=0,k=0;return function(){var O=o(),U=16-(O-k);if(k=O,U>0){if(++b>=800)return arguments[0]}else b=0;return C.apply(void 0,arguments)}}},function(M,R,o){var C=o(26),b=o(38),k=o(31),O=o(14);M.exports=function(U,Y,re){if(!O(re))return!1;var he=typeof Y;return!!("number"==he?b(re)&&k(Y,re.length):"string"==he&&Y in re)&&C(re[Y],U)}},function(M,R){"undefined"!=typeof window&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){window.setTimeout(o,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(o,C){var b=65535&o,k=65535&C;return b*k+((o>>>16&65535)*k+b*(C>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(o){"use strict";if(null===o)throw new TypeError("Cannot convert undefined or null to object");for(var C=Object(o),b=1;b<arguments.length;b++){var k=arguments[b];if(null!==k)for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(C[O]=k[O])}return C})},function(M,R){M.exports=function(o){if(Array.isArray(o))return o},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(o,C){var b=null==o?null:"undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(null!=b){var k,O,U=[],Y=!0,re=!1;try{for(b=b.call(o);!(Y=(k=b.next()).done)&&(U.push(k.value),!C||U.length!==C);Y=!0);}catch(he){re=!0,O=he}finally{try{Y||null==b.return||b.return()}finally{if(re)throw O}}return U}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(17).default;function b(){"use strict";M.exports=b=function(){return k},M.exports.__esModule=!0,M.exports.default=M.exports;var k={},O=Object.prototype,U=O.hasOwnProperty,Y=Object.defineProperty||function(W,ce,Ve){W[ce]=Ve.value},re="function"==typeof Symbol?Symbol:{},he=re.iterator||"@@iterator",te=re.asyncIterator||"@@asyncIterator",J=re.toStringTag||"@@toStringTag";function we(W,ce,Ve){return Object.defineProperty(W,ce,{value:Ve,enumerable:!0,configurable:!0,writable:!0}),W[ce]}try{we({},"")}catch(W){we=function(ce,Ve,lt){return ce[Ve]=lt}}function Xe(W,ce,Ve,lt){var rt=Object.create((ce&&ce.prototype instanceof ze?ce:ze).prototype),dt=new ne(lt||[]);return Y(rt,"_invoke",{value:ue(W,Ve,dt)}),rt}function qe(W,ce,Ve){try{return{type:"normal",arg:W.call(ce,Ve)}}catch(lt){return{type:"throw",arg:lt}}}k.wrap=Xe;var je={};function ze(){}function Ie(){}function ge(){}var X={};we(X,he,function(){return this});var Se=Object.getPrototypeOf,De=Se&&Se(Se(ie([])));De&&De!==O&&U.call(De,he)&&(X=De);var Fe=ge.prototype=ze.prototype=Object.create(X);function Ne(W){["next","throw","return"].forEach(function(ce){we(W,ce,function(Ve){return this._invoke(ce,Ve)})})}function Ue(W,ce){var Ve;Y(this,"_invoke",{value:function(lt,Je){function rt(){return new ce(function(dt,$t){!function Jt(vn,Rt,dn,_n){var ar=qe(W[vn],W,Rt);if("throw"!==ar.type){var ir=ar.arg,Pn=ir.value;return Pn&&"object"==C(Pn)&&U.call(Pn,"__await")?ce.resolve(Pn.__await).then(function(Rr){Jt("next",Rr,dn,_n)},function(Rr){Jt("throw",Rr,dn,_n)}):ce.resolve(Pn).then(function(Rr){ir.value=Rr,dn(ir)},function(Rr){return Jt("throw",Rr,dn,_n)})}_n(ar.arg)}(lt,Je,dt,$t)})}return Ve=Ve?Ve.then(rt,rt):rt()}})}function ue(W,ce,Ve){var lt="suspendedStart";return function(Je,rt){if("executing"===lt)throw new Error("Generator is already running");if("completed"===lt){if("throw"===Je)throw rt;return{value:void 0,done:!0}}for(Ve.method=Je,Ve.arg=rt;;){var dt=Ve.delegate;if(dt){var $t=Me(dt,Ve);if($t){if($t===je)continue;return $t}}if("next"===Ve.method)Ve.sent=Ve._sent=Ve.arg;else if("throw"===Ve.method){if("suspendedStart"===lt)throw lt="completed",Ve.arg;Ve.dispatchException(Ve.arg)}else"return"===Ve.method&&Ve.abrupt("return",Ve.arg);lt="executing";var Jt=qe(W,ce,Ve);if("normal"===Jt.type){if(lt=Ve.done?"completed":"suspendedYield",Jt.arg===je)continue;return{value:Jt.arg,done:Ve.done}}"throw"===Jt.type&&(lt="completed",Ve.method="throw",Ve.arg=Jt.arg)}}}function Me(W,ce){var Ve=W.iterator[ce.method];if(void 0===Ve){if(ce.delegate=null,"throw"===ce.method){if(W.iterator.return&&(ce.method="return",ce.arg=void 0,Me(W,ce),"throw"===ce.method))return je;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return je}var lt=qe(Ve,W.iterator,ce.arg);if("throw"===lt.type)return ce.method="throw",ce.arg=lt.arg,ce.delegate=null,je;var Je=lt.arg;return Je?Je.done?(ce[W.resultName]=Je.value,ce.next=W.nextLoc,"return"!==ce.method&&(ce.method="next",ce.arg=void 0),ce.delegate=null,je):Je:(ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,je)}function q(W){var ce={tryLoc:W[0]};1 in W&&(ce.catchLoc=W[1]),2 in W&&(ce.finallyLoc=W[2],ce.afterLoc=W[3]),this.tryEntries.push(ce)}function Q(W){var ce=W.completion||{};ce.type="normal",delete ce.arg,W.completion=ce}function ne(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(q,this),this.reset(!0)}function ie(W){if(W){var ce=W[he];if(ce)return ce.call(W);if("function"==typeof W.next)return W;if(!isNaN(W.length)){var Ve=-1,lt=function Je(){for(;++Ve<W.length;)if(U.call(W,Ve))return Je.value=W[Ve],Je.done=!1,Je;return Je.value=void 0,Je.done=!0,Je};return lt.next=lt}}return{next:Ee}}function Ee(){return{value:void 0,done:!0}}return Ie.prototype=ge,Y(Fe,"constructor",{value:ge,configurable:!0}),Y(ge,"constructor",{value:Ie,configurable:!0}),Ie.displayName=we(ge,J,"GeneratorFunction"),k.isGeneratorFunction=function(W){var ce="function"==typeof W&&W.constructor;return!!ce&&(ce===Ie||"GeneratorFunction"===(ce.displayName||ce.name))},k.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,ge):(W.__proto__=ge,we(W,J,"GeneratorFunction")),W.prototype=Object.create(Fe),W},k.awrap=function(W){return{__await:W}},Ne(Ue.prototype),we(Ue.prototype,te,function(){return this}),k.AsyncIterator=Ue,k.async=function(W,ce,Ve,lt,Je){void 0===Je&&(Je=Promise);var rt=new Ue(Xe(W,ce,Ve,lt),Je);return k.isGeneratorFunction(ce)?rt:rt.next().then(function(dt){return dt.done?dt.value:rt.next()})},Ne(Fe),we(Fe,J,"Generator"),we(Fe,he,function(){return this}),we(Fe,"toString",function(){return"[object Generator]"}),k.keys=function(W){var ce=Object(W),Ve=[];for(var lt in ce)Ve.push(lt);return Ve.reverse(),function Je(){for(;Ve.length;){var rt=Ve.pop();if(rt in ce)return Je.value=rt,Je.done=!1,Je}return Je.done=!0,Je}},k.values=ie,ne.prototype={constructor:ne,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Q),!W)for(var ce in this)"t"===ce.charAt(0)&&U.call(this,ce)&&!isNaN(+ce.slice(1))&&(this[ce]=void 0)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if("throw"===W.type)throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var ce=this;function Ve(Jt,vn){return rt.type="throw",rt.arg=W,ce.next=Jt,vn&&(ce.method="next",ce.arg=void 0),!!vn}for(var lt=this.tryEntries.length-1;lt>=0;--lt){var Je=this.tryEntries[lt],rt=Je.completion;if("root"===Je.tryLoc)return Ve("end");if(Je.tryLoc<=this.prev){var dt=U.call(Je,"catchLoc"),$t=U.call(Je,"finallyLoc");if(dt&&$t){if(this.prev<Je.catchLoc)return Ve(Je.catchLoc,!0);if(this.prev<Je.finallyLoc)return Ve(Je.finallyLoc)}else if(dt){if(this.prev<Je.catchLoc)return Ve(Je.catchLoc,!0)}else{if(!$t)throw new Error("try statement without catch or finally");if(this.prev<Je.finallyLoc)return Ve(Je.finallyLoc)}}}},abrupt:function(W,ce){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var lt=this.tryEntries[Ve];if(lt.tryLoc<=this.prev&&U.call(lt,"finallyLoc")&&this.prev<lt.finallyLoc){var Je=lt;break}}Je&&("break"===W||"continue"===W)&&Je.tryLoc<=ce&&ce<=Je.finallyLoc&&(Je=null);var rt=Je?Je.completion:{};return rt.type=W,rt.arg=ce,Je?(this.method="next",this.next=Je.finallyLoc,je):this.complete(rt)},complete:function(W,ce){if("throw"===W.type)throw W.arg;return"break"===W.type||"continue"===W.type?this.next=W.arg:"return"===W.type?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):"normal"===W.type&&ce&&(this.next=ce),je},finish:function(W){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var Ve=this.tryEntries[ce];if(Ve.finallyLoc===W)return this.complete(Ve.completion,Ve.afterLoc),Q(Ve),je}},catch:function(W){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var Ve=this.tryEntries[ce];if(Ve.tryLoc===W){var lt=Ve.completion;if("throw"===lt.type){var Je=lt.arg;Q(Ve)}return Je}}throw new Error("illegal catch attempt")},delegateYield:function(W,ce,Ve){return this.delegate={iterator:ie(W),resultName:ce,nextLoc:Ve},"next"===this.method&&(this.arg=void 0),je}},k}M.exports=b,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(2);M.exports=function(b,k){for(;!Object.prototype.hasOwnProperty.call(b,k)&&null!==(b=C(b)););return b},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(60);M.exports=function(b){if(Array.isArray(b))return C(b)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(o){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(145),b=o(155);M.exports=function(k,O){return C(k,O,function(U,Y){return b(k,Y)})}},function(M,R,o){var C=o(146),b=o(154),k=o(32);M.exports=function(O,U,Y){for(var re=-1,he=U.length,te={};++re<he;){var J=U[re],we=C(O,J);Y(we,J)&&b(te,k(J,O),we)}return te}},function(M,R,o){var C=o(32),b=o(42);M.exports=function(k,O){for(var U=0,Y=(O=C(O,k)).length;null!=k&&U<Y;)k=k[b(O[U++])];return U&&U==Y?k:void 0}},function(M,R,o){var C=o(15),b=o(41),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/;M.exports=function(U,Y){if(C(U))return!1;var re=typeof U;return!("number"!=re&&"symbol"!=re&&"boolean"!=re&&null!=U&&!b(U))||O.test(U)||!k.test(U)||null!=Y&&U in Object(Y)}},function(M,R,o){var C=o(149),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,O=C(function(U){var Y=[];return 46===U.charCodeAt(0)&&Y.push(""),U.replace(b,function(re,he,te,J){Y.push(te?J.replace(k,"$1"):he||re)}),Y});M.exports=O},function(M,R,o){var C=o(150);M.exports=function(b){var k=C(b,function(U){return 500===O.size&&O.clear(),U}),O=k.cache;return k}},function(M,R,o){var C=o(46);function b(k,O){if("function"!=typeof k||null!=O&&"function"!=typeof O)throw new TypeError("Expected a function");var U=function(){var Y=arguments,re=O?O.apply(this,Y):Y[0],he=U.cache;if(he.has(re))return he.get(re);var te=k.apply(this,Y);return U.cache=he.set(re,te)||he,te};return U.cache=new(b.Cache||C),U}b.Cache=C,M.exports=b},function(M,R,o){var C=o(152);M.exports=function(b){return null==b?"":C(b)}},function(M,R,o){var C=o(27),b=o(153),k=o(15),O=o(41),U=C?C.prototype:void 0,Y=U?U.toString:void 0;M.exports=function re(he){if("string"==typeof he)return he;if(k(he))return b(he,re)+"";if(O(he))return Y?Y.call(he):"";var te=he+"";return"0"==te&&1/he==-1/0?"-0":te}},function(M,R){M.exports=function(o,C){for(var b=-1,k=null==o?0:o.length,O=Array(k);++b<k;)O[b]=C(o[b],b,o);return O}},function(M,R,o){var C=o(54),b=o(32),k=o(31),O=o(14),U=o(42);M.exports=function(Y,re,he,te){if(!O(Y))return Y;for(var J=-1,we=(re=b(re,Y)).length,Xe=we-1,qe=Y;null!=qe&&++J<we;){var je=U(re[J]),ze=he;if("__proto__"===je||"constructor"===je||"prototype"===je)return Y;if(J!=Xe){var Ie=qe[je];void 0===(ze=te?te(Ie,je,qe):void 0)&&(ze=O(Ie)?Ie:k(re[J+1])?[]:{})}C(qe,je,ze),qe=qe[je]}return Y}},function(M,R,o){var C=o(156),b=o(157);M.exports=function(k,O){return null!=k&&b(k,O,C)}},function(M,R){M.exports=function(o,C){return null!=o&&C in Object(o)}},function(M,R,o){var C=o(32),b=o(30),k=o(15),O=o(31),U=o(39),Y=o(42);M.exports=function(re,he,te){for(var J=-1,we=(he=C(he,re)).length,Xe=!1;++J<we;){var qe=Y(he[J]);if(!(Xe=null!=re&&te(re,qe)))break;re=re[qe]}return Xe||++J!=we?Xe:!!(we=null==re?0:re.length)&&U(we)&&O(qe,we)&&(k(re)||b(re))}},function(M,R,o){var C=o(159),b=o(57),k=o(58);M.exports=function(O){return k(b(O,void 0,C),O+"")}},function(M,R,o){var C=o(160);M.exports=function(b){return null!=b&&b.length?C(b,1):[]}},function(M,R,o){var C=o(161),b=o(162);M.exports=function k(O,U,Y,re,he){var te=-1,J=O.length;for(Y||(Y=b),he||(he=[]);++te<J;){var we=O[te];U>0&&Y(we)?U>1?k(we,U-1,Y,re,he):C(he,we):re||(he[he.length]=we)}return he}},function(M,R){M.exports=function(o,C){for(var b=-1,k=C.length,O=o.length;++b<k;)o[O+b]=C[b];return o}},function(M,R,o){var C=o(27),b=o(30),k=o(15),O=C?C.isConcatSpreadable:void 0;M.exports=function(U){return k(U)||b(U)||!!(O&&U&&U[O])}},function(M,R){M.exports=function(o){return-1!==Function.toString.call(o).indexOf("[native code]")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){var C=o(40),b=o(165);function k(O,U,Y){return b()?(M.exports=k=Reflect.construct.bind(),M.exports.__esModule=!0,M.exports.default=M.exports):(M.exports=k=function(re,he,te){var J=[null];J.push.apply(J,he);var we=new(Function.bind.apply(re,J));return te&&C(we,te.prototype),we},M.exports.__esModule=!0,M.exports.default=M.exports),k.apply(null,arguments)}M.exports=k,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,o){"use strict";o.r(R),o.d(R,"BarcodeDecoder",function(){return Wt}),o.d(R,"Readers",function(){return C}),o.d(R,"CameraAccess",function(){return vi}),o.d(R,"ImageDebug",function(){return Xe.a}),o.d(R,"ImageWrapper",function(){return re.a}),o.d(R,"ResultCollector",function(){return Bn});var C={};o.r(C),o.d(C,"BarcodeReader",function(){return ne}),o.d(C,"TwoOfFiveReader",function(){return lt}),o.d(C,"NewCodabarReader",function(){return Jt}),o.d(C,"Code128Reader",function(){return Rt}),o.d(C,"Code32Reader",function(){return _i}),o.d(C,"Code39Reader",function(){return Xr}),o.d(C,"Code39VINReader",function(){return Qn}),o.d(C,"Code93Reader",function(){return Fn}),o.d(C,"EAN2Reader",function(){return Re}),o.d(C,"EAN5Reader",function(){return it}),o.d(C,"EAN8Reader",function(){return $e}),o.d(C,"EANReader",function(){return Zn}),o.d(C,"I2of5Reader",function(){return wt}),o.d(C,"UPCEReader",function(){return zn}),o.d(C,"UPCReader",function(){return Cr});var b,ee,k=o(17),O=o.n(k),U=o(18),Y=o.n(U),re=(o(135),o(11)),he=o(12),te=o.n(he),J=o(8),we=o.n(J),Xe=o(16),qe=o(3),je=o.n(qe),ze=o(4),Ie=o.n(ze),ge=o(1),X=o.n(ge),Se=o(7),De=o.n(Se),Fe=o(6),Ne=o.n(Fe),Ue=o(2),ue=o.n(Ue),Me=o(0),q=o.n(Me),Q=o(9);(ee=b||(b={}))[ee.Forward=1]="Forward",ee[ee.Reverse=-1]="Reverse";var ne=function(){function ee(_e,z){je()(this,ee),q()(this,"_row",[]),q()(this,"config",{}),q()(this,"supplements",[]),q()(this,"SINGLE_CODE_ERROR",0),q()(this,"FORMAT","unknown"),q()(this,"CONFIG_KEYS",{}),this._row=[],this.config=_e||{},z&&(this.supplements=z)}return Ie()(ee,[{key:"_nextUnset",value:function(_e){for(var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;S<_e.length;S++)if(!_e[S])return S;return _e.length}},{key:"_matchPattern",value:function(_e,z){for(var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.SINGLE_CODE_ERROR||1,N=0,L=0,V=0,se=0,ye=0,be=0,He=0;He<_e.length;He++)V+=_e[He],se+=z[He];if(V<se)return Number.MAX_VALUE;S*=ye=V/se;for(var j=0;j<_e.length;j++){if(be=z[j]*ye,(L=Math.abs(_e[j]-be)/be)>S)return Number.MAX_VALUE;N+=L}return N/se}},{key:"_nextSet",value:function(_e){for(var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;S<_e.length;S++)if(_e[S])return S;return _e.length}},{key:"_correctBars",value:function(_e,z,S){for(var N=S.length,L=0;N--;)(L=_e[S[N]]*(1-(1-z)/2))>1&&(_e[S[N]]=L)}},{key:"decodePattern",value:function(_e){this._row=_e;var z=this.decode();return null===z?(this._row.reverse(),(z=this.decode())&&(z.direction=b.Reverse,z.start=this._row.length-z.start,z.end=this._row.length-z.end)):z.direction=b.Forward,z&&(z.format=this.FORMAT),z}},{key:"_matchRange",value:function(_e,z,S){var N;for(N=_e=_e<0?0:_e;N<z;N++)if(this._row[N]!==S)return!1;return!0}},{key:"_fillCounters",value:function(){var _e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset(this._row),z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row.length,S=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],N=[],L=0;N[L]=0;for(var V=_e;V<z;V++)this._row[V]^(S?1:0)?N[L]++:(N[++L]=1,S=!S);return N}},{key:"_toCounters",value:function(_e,z){var S=z.length,N=this._row.length,L=!this._row[_e],V=0;Q.a.init(z,0);for(var se=_e;se<N;se++)if(this._row[se]^(L?1:0))z[V]++;else{if(++V===S)break;z[V]=1,L=!L}return z}},{key:"decodeImage",value:function(_e){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),ee}();var Ee=[3,1,3,1,1,1],W=[3,1,1,1,3],ce=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],Ve=Ee.reduce(function(ee,_e){return ee+_e},0),lt=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"barSpaceRatio",[1,1]),q()(X()(S),"FORMAT","2of5"),q()(X()(S),"SINGLE_CODE_ERROR",.78),q()(X()(S),"AVG_CODE_ERROR",.3),S}return Ie()(z,[{key:"_findPattern",value:function(S,N){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2],V=arguments.length>3&&void 0!==arguments[3]&&arguments[3],se=[],ye=0,de={error:Number.MAX_VALUE,code:-1,start:0,end:0},be=0,He=0,j=this.AVG_CODE_ERROR;N||(N=this._nextSet(this._row));for(var pe=0;pe<S.length;pe++)se[pe]=0;for(var Te=N;Te<this._row.length;Te++)if(this._row[Te]^(L?1:0))se[ye]++;else{if(ye===se.length-1){be=0;for(var Qe=0;Qe<se.length;Qe++)be+=se[Qe];if((He=this._matchPattern(se,S))<j)return de.error=He,de.start=Te-be,de.end=Te,de;if(!V)return null;for(var yt=0;yt<se.length-2;yt++)se[yt]=se[yt+2];se[se.length-2]=0,se[se.length-1]=0,ye--}else ye++;se[ye]=1,L=!L}return null}},{key:"_findStart",value:function(){for(var S=null,N=this._nextSet(this._row),L=1,V=0;!S;){if(!(S=this._findPattern(Ee,N,!1,!0)))return null;if(L=Math.floor((S.end-S.start)/Ve),(V=S.start-5*L)>=0&&this._matchRange(V,S.start,0))return S;N=S.end,S=null}return S}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start)/2;return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"_findEnd",value:function(){this._row.reverse();var S=this._nextSet(this._row),N=this._findPattern(W,S,!1,!0);if(this._row.reverse(),null===N)return null;var L=N.start;return N.start=this._row.length-N.end,N.end=this._row.length-L,null!==N?this._verifyTrailingWhitespace(N):null}},{key:"_verifyCounterLength",value:function(S){return S.length%10==0}},{key:"_decodeCode",value:function(S){for(var N=this.AVG_CODE_ERROR,L={error:Number.MAX_VALUE,code:-1,start:0,end:0},V=0;V<ce.length;V++){var se=this._matchPattern(S,ce[V]);se<L.error&&(L.code=V,L.error=se)}return L.error<N?L:null}},{key:"_decodePayload",value:function(S,N,L){for(var V=0,se=S.length,ye=[0,0,0,0,0],de=null;V<se;){for(var be=0;be<5;be++)ye[be]=S[V]*this.barSpaceRatio[0],V+=2;if(!(de=this._decodeCode(ye)))return null;N.push("".concat(de.code)),L.push(de)}return de}},{key:"decode",value:function(S,N){var L=this._findStart();if(!L)return null;var V=this._findEnd();if(!V)return null;var se=this._fillCounters(L.end,V.start,!1);if(!this._verifyCounterLength(se))return null;var ye=[];ye.push(L);var de=[];return this._decodePayload(se,de,ye)?de.length<5?null:(ye.push(V),{code:de.join(""),start:L.start,end:V.end,startInfo:L,decodedCodes:ye,format:this.FORMAT}):null}}]),z}(ne);var rt=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],dt=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],$t=[26,41,11,14],Jt=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"_counters",[]),q()(X()(S),"FORMAT","codabar"),S}return Ie()(z,[{key:"_computeAlternatingThreshold",value:function(S,N){for(var L=Number.MAX_VALUE,V=0,se=0,ye=S;ye<N;ye+=2)(se=this._counters[ye])>V&&(V=se),se<L&&(L=se);return(L+V)/2|0}},{key:"_toPattern",value:function(S){var N=S+7;if(N>this._counters.length)return-1;for(var L=this._computeAlternatingThreshold(S,N),V=this._computeAlternatingThreshold(S+1,N),se=64,de=0,be=0;be<7;be++)this._counters[S+be]>(0==(1&be)?L:V)&&(de|=se),se>>=1;return de}},{key:"_isStartEnd",value:function(S){for(var N=0;N<$t.length;N++)if($t[N]===S)return!0;return!1}},{key:"_sumCounters",value:function(S,N){for(var L=0,V=S;V<N;V++)L+=this._counters[V];return L}},{key:"_findStart",value:function(){for(var S=this._nextUnset(this._row),N=1;N<this._counters.length;N++){var L=this._toPattern(N);if(-1!==L&&this._isStartEnd(L))return{start:S+=this._sumCounters(0,N),end:S+this._sumCounters(N,N+8),startCounter:N,endCounter:N+8}}return null}},{key:"_patternToChar",value:function(S){for(var N=0;N<dt.length;N++)if(dt[N]===S)return String.fromCharCode(rt[N]);return null}},{key:"_calculatePatternLength",value:function(S){for(var N=0,L=S;L<S+7;L++)N+=this._counters[L];return N}},{key:"_verifyWhitespace",value:function(S,N){return(S-1<=0||this._counters[S-1]>=this._calculatePatternLength(S)/2)&&(N+8>=this._counters.length||this._counters[N+7]>=this._calculatePatternLength(N)/2)}},{key:"_charToPattern",value:function(S){for(var N=S.charCodeAt(0),L=0;L<rt.length;L++)if(rt[L]===N)return dt[L];return 0}},{key:"_thresholdResultPattern",value:function(S,N){for(var L,V={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},se=N,ye=0;ye<S.length;ye++){L=this._charToPattern(S[ye]);for(var de=6;de>=0;de--){var be=2==(1&de)?V.bar:V.space,He=1==(1&L)?be.wide:be.narrow;He.size+=this._counters[se+de],He.counts++,L>>=1}se+=8}return["space","bar"].forEach(function(j){var pe=V[j];pe.wide.min=Math.floor((pe.narrow.size/pe.narrow.counts+pe.wide.size/pe.wide.counts)/2),pe.narrow.max=Math.ceil(pe.wide.min),pe.wide.max=Math.ceil((2*pe.wide.size+1.5)/pe.wide.counts)}),V}},{key:"_validateResult",value:function(S,N){for(var L,V=this._thresholdResultPattern(S,N),se=N,ye=0;ye<S.length;ye++){L=this._charToPattern(S[ye]);for(var de=6;de>=0;de--){var be=0==(1&de)?V.bar:V.space,He=1==(1&L)?be.wide:be.narrow,j=this._counters[se+de];if(j<He.min||j>He.max)return!1;L>>=1}se+=8}return!0}},{key:"decode",value:function(S,N){if(this._counters=this._fillCounters(),!(N=this._findStart()))return null;var L,V=N.startCounter,se=[];do{if((L=this._toPattern(V))<0)return null;var ye=this._patternToChar(L);if(null===ye)return null;if(se.push(ye),V+=8,se.length>1&&this._isStartEnd(L))break}while(V<this._counters.length);if(se.length-2<4||!this._isStartEnd(L)||!this._verifyWhitespace(N.startCounter,V-8)||!this._validateResult(se,N.startCounter))return null;var de=N.start+this._sumCounters(N.startCounter,(V=V>this._counters.length?this._counters.length:V)-8);return{code:se.join(""),start:N.start,end:de,startInfo:N,decodedCodes:se,format:this.FORMAT}}}]),z}(ne);var Rt=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"CODE_SHIFT",98),q()(X()(S),"CODE_C",99),q()(X()(S),"CODE_B",100),q()(X()(S),"CODE_A",101),q()(X()(S),"START_CODE_A",103),q()(X()(S),"START_CODE_B",104),q()(X()(S),"START_CODE_C",105),q()(X()(S),"STOP_CODE",106),q()(X()(S),"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),q()(X()(S),"SINGLE_CODE_ERROR",.64),q()(X()(S),"AVG_CODE_ERROR",.3),q()(X()(S),"FORMAT","code_128"),q()(X()(S),"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),S}return Ie()(z,[{key:"_decodeCode",value:function(S,N){for(var L={error:Number.MAX_VALUE,code:-1,start:S,end:S,correction:{bar:1,space:1}},V=[0,0,0,0,0,0],ye=!this._row[S],de=0,be=S;be<this._row.length;be++)if(this._row[be]^(ye?1:0))V[de]++;else{if(de===V.length-1){N&&this._correct(V,N);for(var He=0;He<this.CODE_PATTERN.length;He++){var j=this._matchPattern(V,this.CODE_PATTERN[He]);j<L.error&&(L.code=He,L.error=j)}return L.end=be,-1===L.code||L.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[L.code]&&(L.correction.bar=this.calculateCorrection(this.CODE_PATTERN[L.code],V,this.MODULE_INDICES.bar),L.correction.space=this.calculateCorrection(this.CODE_PATTERN[L.code],V,this.MODULE_INDICES.space)),L)}V[++de]=1,ye=!ye}return null}},{key:"_correct",value:function(S,N){this._correctBars(S,N.bar,this.MODULE_INDICES.bar),this._correctBars(S,N.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var S=[0,0,0,0,0,0],N=this._nextSet(this._row),L={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},V=!1,se=0,ye=N;ye<this._row.length;ye++)if(this._row[ye]^(V?1:0))S[se]++;else{if(se===S.length-1){for(var de=S.reduce(function(pe,Te){return pe+Te},0),be=this.START_CODE_A;be<=this.START_CODE_C;be++){var He=this._matchPattern(S,this.CODE_PATTERN[be]);He<L.error&&(L.code=be,L.error=He)}if(L.error<this.AVG_CODE_ERROR)return L.start=ye-de,L.end=ye,L.correction.bar=this.calculateCorrection(this.CODE_PATTERN[L.code],S,this.MODULE_INDICES.bar),L.correction.space=this.calculateCorrection(this.CODE_PATTERN[L.code],S,this.MODULE_INDICES.space),L;for(var j=0;j<4;j++)S[j]=S[j+2];S[4]=0,S[5]=0,se--}else se++;S[se]=1,V=!V}return null}},{key:"decode",value:function(S,N){var L=this,V=this._findStart();if(null===V)return null;var se={code:V.code,start:V.start,end:V.end,correction:{bar:V.correction.bar,space:V.correction.space}},ye=[];ye.push(se);for(var de=se.code,be=function(Lt){switch(Lt){case L.START_CODE_A:return L.CODE_A;case L.START_CODE_B:return L.CODE_B;case L.START_CODE_C:return L.CODE_C;default:return null}}(se.code),He=!1,j=!1,pe=j,Te=!0,Qe=0,yt=[],Ot=[];!He;){if(pe=j,j=!1,null!==(se=this._decodeCode(se.end,se.correction)))switch(se.code!==this.STOP_CODE&&(Te=!0),se.code!==this.STOP_CODE&&(yt.push(se.code),de+=++Qe*se.code),ye.push(se),be){case this.CODE_A:if(se.code<64)Ot.push(String.fromCharCode(32+se.code));else if(se.code<96)Ot.push(String.fromCharCode(se.code-64));else switch(se.code!==this.STOP_CODE&&(Te=!1),se.code){case this.CODE_SHIFT:j=!0,be=this.CODE_B;break;case this.CODE_B:be=this.CODE_B;break;case this.CODE_C:be=this.CODE_C;break;case this.STOP_CODE:He=!0}break;case this.CODE_B:if(se.code<96)Ot.push(String.fromCharCode(32+se.code));else switch(se.code!==this.STOP_CODE&&(Te=!1),se.code){case this.CODE_SHIFT:j=!0,be=this.CODE_A;break;case this.CODE_A:be=this.CODE_A;break;case this.CODE_C:be=this.CODE_C;break;case this.STOP_CODE:He=!0}break;case this.CODE_C:if(se.code<100)Ot.push(se.code<10?"0"+se.code:se.code);else switch(se.code!==this.STOP_CODE&&(Te=!1),se.code){case this.CODE_A:be=this.CODE_A;break;case this.CODE_B:be=this.CODE_B;break;case this.STOP_CODE:He=!0}}else He=!0;pe&&(be=be===this.CODE_A?this.CODE_B:this.CODE_A)}return null===se?null:(se.end=this._nextUnset(this._row,se.end),this._verifyTrailingWhitespace(se)?(de-=Qe*yt[yt.length-1])%103!==yt[yt.length-1]?null:Ot.length?(Te&&Ot.splice(Ot.length-1,1),{code:Ot.join(""),start:V.start,end:se.end,codeset:be,startInfo:V,decodedCodes:ye,endInfo:se,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(S){var N;return(N=S.end+(S.end-S.start)/2)<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"calculateCorrection",value:function(S,N,L){for(var V=L.length,se=0,ye=0;V--;)ye+=S[L[V]],se+=N[L[V]];return ye/se}}]),z}(ne),dn=o(13),_n=o.n(dn),ar=o(33),ir=o.n(ar);var Rr=new Uint16Array(ir()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(ee){return ee.charCodeAt(0)})),Ti=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Xr=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","code_39"),S}return Ie()(z,[{key:"_findStart",value:function(){for(var S=this._nextSet(this._row),N=S,L=new Uint16Array([0,0,0,0,0,0,0,0,0]),V=0,se=!1,ye=S;ye<this._row.length;ye++)if(this._row[ye]^(se?1:0))L[V]++;else{if(V===L.length-1){if(148===this._toPattern(L)){var de=Math.floor(Math.max(0,N-(ye-N)/4));if(this._matchRange(de,N,0))return{start:N,end:ye}}N+=L[0]+L[1];for(var be=0;be<7;be++)L[be]=L[be+2];L[7]=0,L[8]=0,V--}else V++;L[V]=1,se=!se}return null}},{key:"_toPattern",value:function(S){for(var N=S.length,L=0,V=N,se=0;V>3;){L=this._findNextWidth(S,L),V=0;for(var ye=0,de=0;de<N;de++)S[de]>L&&(ye|=1<<N-1-de,V++,se+=S[de]);if(3===V){for(var be=0;be<N&&V>0;be++)if(S[be]>L&&(V--,2*S[be]>=se))return-1;return ye}}return-1}},{key:"_findNextWidth",value:function(S,N){for(var L=Number.MAX_VALUE,V=0;V<S.length;V++)S[V]<L&&S[V]>N&&(L=S[V]);return L}},{key:"_patternToChar",value:function(S){for(var N=0;N<Ti.length;N++)if(Ti[N]===S)return String.fromCharCode(Rr[N]);return null}},{key:"_verifyTrailingWhitespace",value:function(S,N,L){var V=Q.a.sum(L);return 3*(N-S-V)>=V}},{key:"decode",value:function(){var S=new Uint16Array([0,0,0,0,0,0,0,0,0]),N=[],L=this._findStart();if(!L)return null;var V,se,ye=this._nextSet(this._row,L.end);do{S=this._toCounters(ye,S);var de=this._toPattern(S);if(de<0||null===(V=this._patternToChar(de)))return null;N.push(V),se=ye,ye+=Q.a.sum(S),ye=this._nextSet(this._row,ye)}while("*"!==V);return N.pop(),N.length&&this._verifyTrailingWhitespace(se,ye,S)?{code:N.join(""),start:L.start,end:ye,startInfo:L,decodedCodes:N,format:this.FORMAT}:null}}]),z}(ne);var Si=/[AEIO]/g,_i=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","code_32_reader"),S}return Ie()(z,[{key:"_decodeCode32",value:function(S){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(S))return null;for(var N=0,L=0;L<S.length;L++)N=32*N+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(S[L]);var V="".concat(N);return V.length<9&&(V=("000000000"+V).slice(-9)),"A"+V}},{key:"_checkChecksum",value:function(S){return!!S}},{key:"decode",value:function(){var S=_n()(ue()(z.prototype),"decode",this).call(this);if(!S)return null;var N=S.code;if(!N||(N=N.replace(Si,""),!this._checkChecksum(N)))return null;var L=this._decodeCode32(N);return L?(S.code=L,S):null}}]),z}(Xr);var Nn=/[IOQ]/g,qn=/[A-Z0-9]{17}/,Qn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","code_39_vin"),S}return Ie()(z,[{key:"_checkChecksum",value:function(S){return!!S}},{key:"decode",value:function(){var S=_n()(ue()(z.prototype),"decode",this).call(this);if(!S)return null;var N=S.code;return N&&(N=N.replace(Nn,"")).match(qn)&&this._checkChecksum(N)?(S.code=N,S):null}}]),z}(Xr);var zi=new Uint16Array(ir()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(ee){return ee.charCodeAt(0)})),or=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Fn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","code_93"),S}return Ie()(z,[{key:"_patternToChar",value:function(S){for(var N=0;N<or.length;N++)if(or[N]===S)return String.fromCharCode(zi[N]);return null}},{key:"_toPattern",value:function(S){for(var N=S.length,L=S.reduce(function(be,He){return be+He},0),V=0,se=0;se<N;se++){var ye=Math.round(9*S[se]/L);if(ye<1||ye>4)return-1;if(0==(1&se))for(var de=0;de<ye;de++)V=V<<1|1;else V<<=ye}return V}},{key:"_findStart",value:function(){for(var S=this._nextSet(this._row),N=S,L=new Uint16Array([0,0,0,0,0,0]),V=0,se=!1,ye=S;ye<this._row.length;ye++)if(this._row[ye]^(se?1:0))L[V]++;else{if(V===L.length-1){if(350===this._toPattern(L)){var de=Math.floor(Math.max(0,N-(ye-N)/4));if(this._matchRange(de,N,0))return{start:N,end:ye}}N+=L[0]+L[1];for(var be=0;be<4;be++)L[be]=L[be+2];L[4]=0,L[5]=0,V--}else V++;L[V]=1,se=!se}return null}},{key:"_verifyEnd",value:function(S,N){return!(S===N||!this._row[N])}},{key:"_decodeExtended",value:function(S){for(var N=S.length,L=[],V=0;V<N;V++){var se=S[V];if(se>="a"&&se<="d"){if(V>N-2)return null;var ye=S[++V],de=ye.charCodeAt(0),be=void 0;switch(se){case"a":if(!(ye>="A"&&ye<="Z"))return null;be=String.fromCharCode(de-64);break;case"b":if(ye>="A"&&ye<="E")be=String.fromCharCode(de-38);else if(ye>="F"&&ye<="J")be=String.fromCharCode(de-11);else if(ye>="K"&&ye<="O")be=String.fromCharCode(de+16);else if(ye>="P"&&ye<="S")be=String.fromCharCode(de+43);else{if(!(ye>="T"&&ye<="Z"))return null;be=String.fromCharCode(127)}break;case"c":if(ye>="A"&&ye<="O")be=String.fromCharCode(de-32);else{if("Z"!==ye)return null;be=":"}break;case"d":if(!(ye>="A"&&ye<="Z"))return null;be=String.fromCharCode(de+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",be),null}L.push(be)}else L.push(se)}return L}},{key:"_matchCheckChar",value:function(S,N,L){var V=S.slice(0,N),se=V.length,ye=V.reduce(function(de,be,He){return de+((-1*He+(se-1))%L+1)*zi.indexOf(be.charCodeAt(0))},0);return zi[ye%47]===S[N].charCodeAt(0)}},{key:"_verifyChecksums",value:function(S){return this._matchCheckChar(S,S.length-2,20)&&this._matchCheckChar(S,S.length-1,15)}},{key:"decode",value:function(S,N){if(!(N=this._findStart()))return null;var L,V,se=new Uint16Array([0,0,0,0,0,0]),ye=[],de=this._nextSet(this._row,N.end);do{se=this._toCounters(de,se);var be=this._toPattern(se);if(be<0||null===(V=this._patternToChar(be)))return null;ye.push(V),L=de,de+=Q.a.sum(se),de=this._nextSet(this._row,de)}while("*"!==V);return ye.pop(),ye.length&&this._verifyEnd(L,de)&&this._verifyChecksums(ye)?(ye=ye.slice(0,ye.length-2),null===(ye=this._decodeExtended(ye))?null:{code:ye.join(""),start:N.start,end:de,startInfo:N,decodedCodes:ye,format:this.FORMAT}):null}}]),z}(ne);function Ri(ee,_e){var z=Object.keys(ee);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(ee);_e&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(ee,N).enumerable})),z.push.apply(z,S)}return z}function xn(ee){for(var _e=1;_e<arguments.length;_e++){var z=null!=arguments[_e]?arguments[_e]:{};_e%2?Ri(Object(z),!0).forEach(function(S){q()(ee,S,z[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(z)):Ri(Object(z)).forEach(function(S){Object.defineProperty(ee,S,Object.getOwnPropertyDescriptor(z,S))})}return ee}var Ft=[1,1,1],ai=[1,1,1,1,1],li=[1,1,2],jr=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Mn=[0,11,13,14,19,25,28,21,22,26],Zn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(S,N){var L;return je()(this,z),L=_e.call(this,Y()({supplements:[]},S),N),q()(X()(L),"FORMAT","ean_13"),q()(X()(L),"SINGLE_CODE_ERROR",.7),q()(X()(L),"STOP_PATTERN",[1,1,1]),L}return Ie()(z,[{key:"_findPattern",value:function(S,N,L,V){var se=new Array(S.length).fill(0),ye={error:Number.MAX_VALUE,start:0,end:0},de=0;N||(N=this._nextSet(this._row));for(var be=!1,He=N;He<this._row.length;He++)if(this._row[He]^(L?1:0))se[de]+=1;else{if(de===se.length-1){var j=this._matchPattern(se,S);if(j<.48&&ye.error&&j<ye.error)return be=!0,ye.error=j,ye.start=He-se.reduce(function(Te,Qe){return Te+Qe},0),ye.end=He,ye;if(V){for(var pe=0;pe<se.length-2;pe++)se[pe]=se[pe+2];se[se.length-2]=0,se[se.length-1]=0,de--}}else de++;se[de]=1,L=!L}return be?ye:null}},{key:"_decodeCode",value:function(S,N){var L=[0,0,0,0],se={error:Number.MAX_VALUE,code:-1,start:S,end:S},ye=!this._row[S],de=0;N||(N=jr.length);for(var be=S;be<this._row.length;be++)if(this._row[be]^(ye?1:0))L[de]++;else{if(de===L.length-1){for(var He=0;He<N;He++){var j=this._matchPattern(L,jr[He]);se.end=be,j<se.error&&(se.code=He,se.error=j)}return se.error>.48?null:se}L[++de]=1,ye=!ye}return null}},{key:"_findStart",value:function(){for(var S=this._nextSet(this._row),N=null;!N;){if(!(N=this._findPattern(Ft,S,!1,!0)))return null;var L=N.start-(N.end-N.start);if(L>=0&&this._matchRange(L,N.start,0))return N;S=N.end,N=null}return null}},{key:"_calculateFirstDigit",value:function(S){for(var N=0;N<Mn.length;N++)if(S===Mn[N])return N;return null}},{key:"_decodePayload",value:function(S,N,L){for(var V=xn({},S),se=0,ye=0;ye<6;ye++){if(!(V=this._decodeCode(V.end)))return null;V.code>=10?(V.code-=10,se|=1<<5-ye):se|=0<<5-ye,N.push(V.code),L.push(V)}var de=this._calculateFirstDigit(se);if(null===de)return null;N.unshift(de);var be=this._findPattern(ai,V.end,!0,!1);if(null===be||!be.end)return null;L.push(be);for(var He=0;He<6;He++){if(!(be=this._decodeCode(be.end,10)))return null;L.push(be),N.push(be.code)}return be}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start);return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"_findEnd",value:function(S,N){var L=this._findPattern(this.STOP_PATTERN,S,N,!1);return null!==L?this._verifyTrailingWhitespace(L):null}},{key:"_checksum",value:function(S){for(var N=0,L=S.length-2;L>=0;L-=2)N+=S[L];N*=3;for(var V=S.length-1;V>=0;V-=2)N+=S[V];return N%10==0}},{key:"_decodeExtensions",value:function(S){var N=this._nextSet(this._row,S),L=this._findPattern(li,N,!1,!1);if(null===L)return null;for(var V=0;V<this.supplements.length;V++)try{var se=this.supplements[V].decode(this._row,L.end);if(null!==se)return{code:se.code,start:N,startInfo:L,end:se.end,decodedCodes:se.decodedCodes,format:this.supplements[V].FORMAT}}catch(ye){console.error("* decodeExtensions error in ",this.supplements[V],": ",ye)}return null}},{key:"decode",value:function(S,N){var L=new Array,V=new Array,se={},ye=this._findStart();if(!ye)return null;var de={start:ye.start,end:ye.end};if(V.push(de),!(de=this._decodePayload(de,L,V))||!(de=this._findEnd(de.end,!1))||(V.push(de),!this._checksum(L)))return null;if(this.supplements.length>0){var be=this._decodeExtensions(de.end);if(!be||!be.decodedCodes)return null;var He=be.decodedCodes[be.decodedCodes.length-1];if(!this._verifyTrailingWhitespace({start:He.start+((He.end-He.start)/2|0),end:He.end}))return null;se={supplement:be,code:L.join("")+be.code}}return xn(xn({code:L.join(""),start:ye.start,end:de.end,startInfo:ye,decodedCodes:V},se),{},{format:this.FORMAT})}}]),z}(ne);var Re=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","ean_2"),S}return Ie()(z,[{key:"decode",value:function(S,N){S&&(this._row=S);var L=0,V=N,se=this._row.length,ye=[],de=[],be=null;if(void 0===V)return null;for(var He=0;He<2&&V<se;He++){if(!(be=this._decodeCode(V)))return null;de.push(be),ye.push(be.code%10),be.code>=10&&(L|=1<<1-He),1!==He&&(V=this._nextSet(this._row,be.end),V=this._nextUnset(this._row,V))}if(2!==ye.length||parseInt(ye.join(""))%4!==L)return null;var j=this._findStart();return{code:ye.join(""),decodedCodes:de,end:be.end,format:this.FORMAT,startInfo:j,start:j.start}}}]),z}(Zn);var Le=[24,20,18,17,12,6,3,10,9,5],it=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","ean_5"),S}return Ie()(z,[{key:"decode",value:function(S,N){if(void 0===N)return null;S&&(this._row=S);for(var L=0,V=N,se=this._row.length,ye=null,de=[],be=[],He=0;He<5&&V<se;He++){if(!(ye=this._decodeCode(V)))return null;be.push(ye),de.push(ye.code%10),ye.code>=10&&(L|=1<<4-He),4!==He&&(V=this._nextSet(this._row,ye.end),V=this._nextUnset(this._row,V))}if(5!==de.length||function(pe){for(var Te=pe.length,Qe=0,yt=Te-2;yt>=0;yt-=2)Qe+=pe[yt];Qe*=3;for(var Ot=Te-1;Ot>=0;Ot-=2)Qe+=pe[Ot];return(Qe*=3)%10}(de)!==function(pe){for(var Te=0;Te<10;Te++)if(pe===Le[Te])return Te;return null}(L))return null;var j=this._findStart();return{code:de.join(""),decodedCodes:be,end:ye.end,format:this.FORMAT,startInfo:j,start:j.start}}}]),z}(Zn);var $e=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","ean_8"),S}return Ie()(z,[{key:"_decodePayload",value:function(S,N,L){for(var V=S,se=0;se<4;se++){if(!(V=this._decodeCode(V.end,10)))return null;N.push(V.code),L.push(V)}if(null===(V=this._findPattern(ai,V.end,!0,!1)))return null;L.push(V);for(var ye=0;ye<4;ye++){if(!(V=this._decodeCode(V.end,10)))return null;L.push(V),N.push(V.code)}return V}}]),z}(Zn);var wt=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(S){var N;return je()(this,z),N=_e.call(this,Y()({normalizeBarSpaceWidth:!1},S)),q()(X()(N),"barSpaceRatio",[1,1]),q()(X()(N),"SINGLE_CODE_ERROR",.78),q()(X()(N),"AVG_CODE_ERROR",.38),q()(X()(N),"START_PATTERN",[1,1,1,1]),q()(X()(N),"STOP_PATTERN",[1,1,3]),q()(X()(N),"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),q()(X()(N),"MAX_CORRECTION_FACTOR",5),q()(X()(N),"FORMAT","i2of5"),S.normalizeBarSpaceWidth&&(N.SINGLE_CODE_ERROR=.38,N.AVG_CODE_ERROR=.09),N.config=S,Ne()(N,X()(N))}return Ie()(z,[{key:"_matchPattern",value:function(S,N){if(this.config.normalizeBarSpaceWidth){for(var L=[0,0],V=[0,0],se=[0,0],ye=this.MAX_CORRECTION_FACTOR,de=1/ye,be=0;be<S.length;be++)L[be%2]+=S[be],V[be%2]+=N[be];se[0]=V[0]/L[0],se[1]=V[1]/L[1],se[0]=Math.max(Math.min(se[0],ye),de),se[1]=Math.max(Math.min(se[1],ye),de),this.barSpaceRatio=se;for(var He=0;He<S.length;He++)S[He]*=this.barSpaceRatio[He%2]}return _n()(ue()(z.prototype),"_matchPattern",this).call(this,S,N)}},{key:"_findPattern",value:function(S,N){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2],V=arguments.length>3&&void 0!==arguments[3]&&arguments[3],se=new Array(S.length).fill(0),ye=0,de={error:Number.MAX_VALUE,start:0,end:0},be=this.AVG_CODE_ERROR;L=L||!1,V=V||!1,N||(N=this._nextSet(this._row));for(var He=N;He<this._row.length;He++)if(this._row[He]^(L?1:0))se[ye]++;else{if(ye===se.length-1){var j=se.reduce(function(Qe,yt){return Qe+yt},0),pe=this._matchPattern(se,S);if(pe<be)return de.error=pe,de.start=He-j,de.end=He,de;if(!V)return null;for(var Te=0;Te<se.length-2;Te++)se[Te]=se[Te+2];se[se.length-2]=0,se[se.length-1]=0,ye--}else ye++;se[ye]=1,L=!L}return null}},{key:"_findStart",value:function(){for(var S=0,N=this._nextSet(this._row),L=null,V=1;!L;){if(!(L=this._findPattern(this.START_PATTERN,N,!1,!0)))return null;if(V=Math.floor((L.end-L.start)/4),(S=L.start-10*V)>=0&&this._matchRange(S,L.start,0))return L;N=L.end,L=null}return null}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start)/2;return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"_findEnd",value:function(){this._row.reverse();var S=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),null===S)return null;var N=S.start;return S.start=this._row.length-S.end,S.end=this._row.length-N,null!==S?this._verifyTrailingWhitespace(S):null}},{key:"_decodePair",value:function(S){for(var N=[],L=0;L<S.length;L++){var V=this._decodeCode(S[L]);if(!V)return null;N.push(V)}return N}},{key:"_decodeCode",value:function(S){for(var N=this.AVG_CODE_ERROR,L={error:Number.MAX_VALUE,code:-1,start:0,end:0},V=0;V<this.CODE_PATTERN.length;V++){var se=this._matchPattern(S,this.CODE_PATTERN[V]);se<L.error&&(L.code=V,L.error=se)}return L.error<N?L:null}},{key:"_decodePayload",value:function(S,N,L){for(var V=0,se=S.length,ye=[[0,0,0,0,0],[0,0,0,0,0]],de=null;V<se;){for(var be=0;be<5;be++)ye[0][be]=S[V]*this.barSpaceRatio[0],ye[1][be]=S[V+1]*this.barSpaceRatio[1],V+=2;if(!(de=this._decodePair(ye)))return null;for(var He=0;He<de.length;He++)N.push(de[He].code+""),L.push(de[He])}return de}},{key:"_verifyCounterLength",value:function(S){return S.length%10==0}},{key:"decode",value:function(S,N){var L=new Array,V=new Array,se=this._findStart();if(!se)return null;V.push(se);var ye=this._findEnd();if(!ye)return null;var de=this._fillCounters(se.end,ye.start,!1);return this._verifyCounterLength(de)&&this._decodePayload(de,L,V)?L.length%2!=0||L.length<6?null:(V.push(ye),{code:L.join(""),start:se.start,end:ye.end,startInfo:se,decodedCodes:V,format:this.FORMAT}):null}}]),z}(ne);function Xt(ee,_e){var z=Object.keys(ee);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(ee);_e&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(ee,N).enumerable})),z.push.apply(z,S)}return z}var zn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),q()(X()(S),"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),q()(X()(S),"FORMAT","upc_e"),S}return Ie()(z,[{key:"_decodePayload",value:function(S,N,L){for(var V=function(de){for(var be=1;be<arguments.length;be++){var He=null!=arguments[be]?arguments[be]:{};be%2?Xt(Object(He),!0).forEach(function(j){q()(de,j,He[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(He)):Xt(Object(He)).forEach(function(j){Object.defineProperty(de,j,Object.getOwnPropertyDescriptor(He,j))})}return de}({},S),se=0,ye=0;ye<6;ye++){if(!(V=this._decodeCode(V.end)))return null;V.code>=10&&(V.code=V.code-10,se|=1<<5-ye),N.push(V.code),L.push(V)}return this._determineParity(se,N)?V:null}},{key:"_determineParity",value:function(S,N){for(var L=0;L<this.CODE_FREQUENCY.length;L++)for(var V=0;V<this.CODE_FREQUENCY[L].length;V++)if(S===this.CODE_FREQUENCY[L][V])return N.unshift(L),N.push(V),!0;return!1}},{key:"_convertToUPCA",value:function(S){var N=[S[0]],L=S[S.length-2];return(N=L<=2?N.concat(S.slice(1,3)).concat([L,0,0,0,0]).concat(S.slice(3,6)):3===L?N.concat(S.slice(1,4)).concat([0,0,0,0,0]).concat(S.slice(4,6)):4===L?N.concat(S.slice(1,5)).concat([0,0,0,0,0,S[5]]):N.concat(S.slice(1,6)).concat([0,0,0,0,L])).push(S[S.length-1]),N}},{key:"_checksum",value:function(S){return _n()(ue()(z.prototype),"_checksum",this).call(this,this._convertToUPCA(S))}},{key:"_findEnd",value:function(S,N){return _n()(ue()(z.prototype),"_findEnd",this).call(this,S,!0)}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start)/2;return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}}]),z}(Zn);var Cr=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(X()(S),"FORMAT","upc_a"),S}return Ie()(z,[{key:"decode",value:function(S,N){var L=Zn.prototype.decode.call(this);return L&&L.code&&13===L.code.length&&"0"===L.code.charAt(0)?(L.code=L.code.substring(1),L):null}}]),z}(Zn),Ke={},Be_UP=1,Be_DOWN=-1;Ke.getBarcodeLine=function(ee,_e,z){var S,N,L,V,se,ye=0|_e.x,de=0|_e.y,be=0|z.x,He=0|z.y,j=Math.abs(He-de)>Math.abs(be-ye),pe=[],Te=ee.data,Qe=ee.size.x,yt=255,Ot=0;function Lt(Pr,On){yt=(se=Te[On*Qe+Pr])<yt?se:yt,Ot=se>Ot?se:Ot,pe.push(se)}j&&(L=ye,ye=de,de=L,L=be,be=He,He=L),ye>be&&(L=ye,ye=be,be=L,L=de,de=He,He=L);var Vt=be-ye,ln=Math.abs(He-de);S=Vt/2|0,N=de;var nr=de<He?1:-1;for(V=ye;V<be;V++)j?Lt(N,V):Lt(V,N),(S-=ln)<0&&(N+=nr,S+=Vt);return{line:pe,min:yt,max:Ot}},Ke.toBinaryLine=function(ee){var _e,z,S,N,L,V,se=ee.min,ye=ee.max,de=ee.line,be=se+(ye-se)/2,He=[],j=(ye-se)/12,pe=-j;for(S=de[0]>be?Be_UP:Be_DOWN,He.push({pos:0,val:de[0]}),L=0;L<de.length-2;L++)S!==(N=(_e=de[L+1]-de[L])+(z=de[L+2]-de[L+1])<pe&&de[L+1]<1.5*be?Be_DOWN:_e+z>j&&de[L+1]>.5*be?Be_UP:S)&&(He.push({pos:L,val:de[L]}),S=N);for(He.push({pos:de.length,val:de[de.length-1]}),V=He[0].pos;V<He[1].pos;V++)de[V]=de[V]>be?0:1;for(L=1;L<He.length-1;L++)for(j=He[L+1].val>He[L].val?He[L].val+(He[L+1].val-He[L].val)/3*2|0:He[L+1].val+(He[L].val-He[L+1].val)/3|0,V=He[L].pos;V<He[L+1].pos;V++)de[V]=de[V]>j?0:1;return{line:de,threshold:j}},Ke.debug={printFrequency:function(ee,_e){var z,S=_e.getContext("2d");for(_e.width=ee.length,_e.height=256,S.beginPath(),S.strokeStyle="blue",z=0;z<ee.length;z++)S.moveTo(z,255),S.lineTo(z,255-ee[z]);S.stroke(),S.closePath()},printPattern:function(ee,_e){var z,S=_e.getContext("2d");for(_e.width=ee.length,S.fillColor="black",z=0;z<ee.length;z++)1===ee[z]&&S.fillRect(z,0,1,100)}};var Oe=Ke;function ct(ee,_e){var z="undefined"!=typeof Symbol&&ee[Symbol.iterator]||ee["@@iterator"];if(!z){if(Array.isArray(ee)||(z=function(ye,de){if(ye){if("string"==typeof ye)return It(ye,undefined);var be=Object.prototype.toString.call(ye).slice(8,-1);if("Object"===be&&ye.constructor&&(be=ye.constructor.name),"Map"===be||"Set"===be)return Array.from(ye);if("Arguments"===be||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(be))return It(ye,undefined)}}(ee))||_e&&ee&&"number"==typeof ee.length){z&&(ee=z);var S=0,N=function(){};return{s:N,n:function(){return S>=ee.length?{done:!0}:{done:!1,value:ee[S++]}},e:function(ye){throw ye},f:N}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var L,V=!0,se=!1;return{s:function(){z=z.call(ee)},n:function(){var ye=z.next();return V=ye.done,ye},e:function(ye){se=!0,L=ye},f:function(){try{V||null==z.return||z.return()}finally{if(se)throw L}}}}function It(ee,_e){(null==_e||_e>ee.length)&&(_e=ee.length);for(var z=0,S=new Array(_e);z<_e;z++)S[z]=ee[z];return S}var sn={code_128_reader:Rt,ean_reader:Zn,ean_5_reader:it,ean_2_reader:Re,ean_8_reader:$e,code_39_reader:Xr,code_39_vin_reader:Qn,codabar_reader:Jt,upc_reader:Cr,upc_e_reader:zn,i2of5_reader:wt,"2of5_reader":lt,code_93_reader:Fn,code_32_reader:_i},Wt={registerReader:function(ee,_e){sn[ee]=_e},create:function(ee,_e){var S=[];function N(){ee.readers.forEach(function(de){var be,He={},j=[];"object"===O()(de)?(be=de.format,He=de.config):"string"==typeof de&&(be=de),He.supplements&&(j=He.supplements.map(function(Te){return new sn[Te]}));try{var pe=new sn[be](He,j);S.push(pe)}catch(Te){throw console.error("* Error constructing reader ",be,Te),Te}})}function L(de){var be,He=null,j=Oe.getBarcodeLine(_e,de[0],de[1]);for(Oe.toBinaryLine(j),be=0;be<S.length&&null===He;be++)He=S[be].decodePattern(j.line);return null===He?null:{codeResult:He,barcodeLine:j}}function V(de){return se.apply(this,arguments)}function se(){return(se=te()(we.a.mark(function de(be){var He,j,pe,Te;return we.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:He=null,j=ct(S),Qe.prev=2,j.s();case 4:if((pe=j.n()).done){Qe.next=14;break}if(!(Te=pe.value).decodeImage){Qe.next=12;break}return Qe.next=9,Te.decodeImage(be);case 9:if(!(He=Qe.sent)){Qe.next=12;break}return Qe.abrupt("break",14);case 12:Qe.next=4;break;case 14:Qe.next=19;break;case 16:Qe.prev=16,Qe.t0=Qe.catch(2),j.e(Qe.t0);case 19:return Qe.prev=19,j.f(),Qe.finish(19);case 22:return Qe.abrupt("return",He);case 23:case"end":return Qe.stop()}},de,null,[[2,16,19,22]])}))).apply(this,arguments)}function ye(de){var be,He,Te,j=function(Te){return Math.sqrt(Math.pow(Math.abs(Te[1].y-Te[0].y),2)+Math.pow(Math.abs(Te[1].x-Te[0].x),2))}(be=[{x:((Te=de)[1][0]-Te[0][0])/2+Te[0][0],y:(Te[1][1]-Te[0][1])/2+Te[0][1]},{x:(Te[3][0]-Te[2][0])/2+Te[2][0],y:(Te[3][1]-Te[2][1])/2+Te[2][1]}]),pe=Math.atan2(be[1].y-be[0].y,be[1].x-be[0].x);return null===(be=function(Te,Qe,yt){function Ot(Lt){var Vt=Lt*Math.sin(Qe),ln=Lt*Math.cos(Qe);Te[0].y-=Vt,Te[0].x-=ln,Te[1].y+=Vt,Te[1].x+=ln}for(Ot(yt);yt>1&&(!_e.inImageWithBorder(Te[0])||!_e.inImageWithBorder(Te[1]));)Ot(-(yt-=Math.ceil(yt/2)));return Te}(be,pe,Math.floor(.1*j)))?null:(null===(He=L(be))&&(He=function(Te,Qe,yt){var Ot,Lt,Vt,ln=Math.sqrt(Math.pow(Te[1][0]-Te[0][0],2)+Math.pow(Te[1][1]-Te[0][1],2)),nr=null,Pr=Math.sin(yt),On=Math.cos(yt);for(Ot=1;Ot<16&&null===nr;Ot++)Vt={y:(Lt=ln/16*Ot*(Ot%2==0?-1:1))*Pr,x:Lt*On},Qe[0].y+=Vt.x,Qe[0].x-=Vt.y,Qe[1].y+=Vt.x,Qe[1].x-=Vt.y,nr=L(Qe);return nr}(de,be,pe)),null===He?null:{codeResult:He.codeResult,line:be,angle:pe,pattern:He.barcodeLine.line,threshold:He.barcodeLine.threshold})}return N(),{decodeFromBoundingBox:function(de){return ye(de)},decodeFromBoundingBoxes:function(de){var be,He,j=[],pe=ee.multiple;for(be=0;be<de.length;be++){var Te=de[be];if((He=ye(Te)||{}).box=Te,pe)j.push(He);else if(He.codeResult)return He}return{barcodes:j}},decodeFromImage:function(de){return te()(we.a.mark(function be(){return we.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,V(de);case 2:return j.abrupt("return",j.sent);case 4:case"end":return j.stop()}},be)}))()},registerReader:function(de,be){if(sn[de])throw new Error("cannot register existing reader",de);sn[de]=be},setReaders:function(de){ee.readers=de,S.length=0,N()}}}},hn=function(){var ee={};function _e(N){return ee[N]||(ee[N]={subscribers:[]}),ee[N]}function z(N,L){N.async?setTimeout(function(){N.callback(L)},4):N.callback(L)}function S(N,L,V){var se;if("function"==typeof L)se={callback:L,async:V};else if(!(se=L).callback)throw new Error("Callback was not specified on options");_e(N).subscribers.push(se)}return{subscribe:function(N,L,V){return S(N,L,V)},publish:function(N,L){var V=_e(N),se=V.subscribers;se.filter(function(ye){return!!ye.once}).forEach(function(ye){z(ye,L)}),V.subscribers=se.filter(function(ye){return!ye.once}),V.subscribers.forEach(function(ye){z(ye,L)})},once:function(N,L){S(N,{callback:L,async:arguments.length>2&&void 0!==arguments[2]&&arguments[2],once:!0})},unsubscribe:function(N,L){if(N){var V=_e(N);V.subscribers=V&&L?V.subscribers.filter(function(se){return se.callback!==L}):[]}else ee={}}}}(),Dn=o(62),Gn=o.n(Dn),pr=o(63);var zt,$n=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(S,N){var L;return je()(this,z),L=_e.call(this,S),q()(X()(L),"code",void 0),L.code=N,Object.setPrototypeOf(X()(L),z.prototype),L}return Ie()(z)}(o.n(pr)()(Error)),Jr="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Di(){try{return navigator.mediaDevices.enumerateDevices()}catch(_e){var ee=new $n("enumerateDevices is not defined. ".concat(Jr),-1);return Promise.reject(ee)}}function xr(ee){try{return navigator.mediaDevices.getUserMedia(ee)}catch(z){var _e=new $n("getUserMedia is not defined. ".concat(Jr),-1);return Promise.reject(_e)}}function lr(ee){return new Promise(function(_e,z){var S=10;!function N(){S>0?ee.videoWidth>10&&ee.videoHeight>10?_e():window.setTimeout(N,500):z(new $n("Unable to play video stream. Is webcam working?",-1)),S--}()})}function cr(ee,_e){return Ai.apply(this,arguments)}function Ai(){return(Ai=te()(we.a.mark(function ee(_e,z){var S;return we.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,xr(z);case 2:if(zt=S=N.sent,!_e){N.next=11;break}return _e.setAttribute("autoplay","true"),_e.setAttribute("muted","true"),_e.setAttribute("playsinline","true"),_e.srcObject=S,_e.addEventListener("loadedmetadata",function(){_e.play().catch(function(L){console.warn("* Error while trying to play video stream:",L)})}),N.abrupt("return",lr(_e));case 11:return N.abrupt("return",Promise.resolve());case 12:case"end":return N.stop()}},ee)}))).apply(this,arguments)}function hs(ee){var _e=Gn()(ee,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==ee.minAspectRatio&&ee.minAspectRatio>0&&(_e.aspectRatio=ee.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==ee.facing&&(_e.facingMode=ee.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),_e}function an(){var _e=hs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return _e&&_e.deviceId&&_e.facingMode&&delete _e.facingMode,Promise.resolve({audio:!1,video:_e})}function Gi(){return(Gi=te()(we.a.mark(function ee(){return we.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Di();case 2:return z.abrupt("return",z.sent.filter(function(S){return"videoinput"===S.kind}));case 4:case"end":return z.stop()}},ee)}))).apply(this,arguments)}function yi(){if(!zt)return null;var ee=zt.getVideoTracks();return ee&&null!=ee&&ee.length?ee[0]:null}var Mr={requestedVideoElement:null,request:function(ee,_e){return te()(we.a.mark(function z(){return we.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return Mr.requestedVideoElement=ee,N.next=3,an(_e);case 3:return N.abrupt("return",cr(ee,N.sent));case 5:case"end":return N.stop()}},z)}))()},release:function(){var ee=zt&&zt.getVideoTracks();return null!==Mr.requestedVideoElement&&Mr.requestedVideoElement.pause(),new Promise(function(_e){setTimeout(function(){ee&&ee.length&&ee.forEach(function(z){return z.stop()}),zt=null,Mr.requestedVideoElement=null,_e()},0)})},enumerateVideoDevices:function(){return Gi.apply(this,arguments)},getActiveStreamLabel:function(){var ee=yi();return ee?ee.label:""},getActiveTrack:yi,disableTorch:function(){return te()(we.a.mark(function ee(){var _e;return we.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(_e=yi())){z.next=11;break}return z.prev=2,z.next=5,_e.applyConstraints({advanced:[{torch:!1}]});case 5:z.next=11;break;case 7:throw z.prev=7,z.t0=z.catch(2),z.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),z.t0;case 11:case"end":return z.stop()}},ee,null,[[2,7]])}))()},enableTorch:function(){return te()(we.a.mark(function ee(){var _e;return we.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(_e=yi())){z.next=11;break}return z.prev=2,z.next=5,_e.applyConstraints({advanced:[{torch:!0}]});case 5:z.next=11;break;case 7:throw z.prev=7,z.t0=z.catch(2),z.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),z.t0;case 11:case"end":return z.stop()}},ee,null,[[2,7]])}))()}},vi=Mr,Bn={create:function(ee){var _e,z=document.createElement("canvas"),S=z.getContext("2d",{willReadFrequently:!!ee.willReadFrequently}),N=[],L=null!==(_e=ee.capacity)&&void 0!==_e?_e:20,V=!0===ee.capture;return{addResult:function(ye,de,be){var He={};(function(ye){return!!L&&ye&&(de=ye,!((be=ee.blacklist)&&be.some(function(He){return Object.keys(He).every(function(j){return He[j]===de[j]})})))&&function(de,be){return"function"!=typeof be||be(de)}(ye,ee.filter);var de,be})(be)&&(L--,He.codeResult=be,V&&(z.width=de.x,z.height=de.y,Xe.a.drawImage(ye,de,S),He.frame=z.toDataURL()),N.push(He))},getResults:function(){return N}}}},Vs={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Or=o(5),qr=o(10),Vn=Math.PI/180,Go={create:function(ee,_e){var z,S={},N=ee.getConfig(),L=(Object(qr.h)(ee.getRealWidth(),ee.getRealHeight()),ee.getCanvasSize()),V=Object(qr.h)(ee.getWidth(),ee.getHeight()),se=ee.getTopRight(),ye=se.x,de=se.y,be=null,He=null,j=N.willReadFrequently;return(z=_e||document.createElement("canvas")).width=L.x,z.height=L.y,console.warn("*** frame_grabber_browser: willReadFrequently=",j,"canvas=",z),be=z.getContext("2d",{willReadFrequently:!!j}),He=new Uint8Array(V.x*V.y),S.attachData=function(pe){He=pe},S.getData=function(){return He},S.grab=function(){var pe,Lt,Vt,Te=N.halfSample,Qe=ee.getFrame(),yt=Qe,Ot=0;if(yt){if((Lt=z).width!==(Vt=L).x&&(Lt.width=Vt.x),Lt.height!==Vt.y&&(Lt.height=Vt.y),"ImageStream"===N.type&&(yt=Qe.img,Qe.tags&&Qe.tags.orientation))switch(Qe.tags.orientation){case 6:Ot=90*Vn;break;case 8:Ot=-90*Vn}return 0!==Ot?(be.translate(L.x/2,L.y/2),be.rotate(Ot),be.drawImage(yt,-L.y/2,-L.x/2,L.y,L.x),be.rotate(-Ot),be.translate(-L.x/2,-L.y/2)):be.drawImage(yt,0,0,L.x,L.y),pe=be.getImageData(ye,de,V.x,V.y).data,Te?Object(qr.e)(pe,V,He):Object(qr.c)(pe,He,N),!0}return!1},S.getSize=function(){return V},S}},es=Go,Oi={274:"orientation"},ws=Object.keys(Oi).map(function(ee){return Oi[ee]});function ei(ee){return new Promise(function(_e){var z=new FileReader;z.onload=function(S){return _e(S.target.result)},z.readAsArrayBuffer(ee)})}function Es(ee){return new Promise(function(_e,z){var S=new XMLHttpRequest;S.open("GET",ee,!0),S.responseType="blob",S.onreadystatechange=function(){S.readyState!==XMLHttpRequest.DONE||200!==S.status&&0!==S.status||_e(this.response)},S.onerror=z,S.send()})}function ts(ee){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ws,z=new DataView(ee),S=ee.byteLength,N=_e.reduce(function(V,se){var ye=Object.keys(Oi).filter(function(de){return Oi[de]===se})[0];return ye&&(V[ye]=se),V},{}),L=2;if(255!==z.getUint8(0)||216!==z.getUint8(1))return!1;for(;L<S;){if(255!==z.getUint8(L))return!1;if(225===z.getUint8(L+1))return mr(z,L+4,N);L+=2+z.getUint16(L+2)}return!1}function mr(ee,_e,z){if("Exif"!==function(V,se,ye){for(var de="",be=se;be<se+4;be++)de+=String.fromCharCode(V.getUint8(be));return de}(ee,_e))return!1;var S,N=_e+6;if(18761===ee.getUint16(N))S=!1;else{if(19789!==ee.getUint16(N))return!1;S=!0}if(42!==ee.getUint16(N+2,!S))return!1;var L=ee.getUint32(N+4,!S);return!(L<8)&&function(V,se,ye,de,be){for(var He=V.getUint16(ye,!be),j={},pe=0;pe<He;pe++){var Te=ye+12*pe+2,Qe=de[V.getUint16(Te,!be)];Qe&&(j[Qe]=eo(V,Te,0,0,be))}return j}(ee,0,N+L,z,S)}function eo(ee,_e,z,S,N){var L=ee.getUint16(_e+2,!N),V=ee.getUint32(_e+4,!N);return 3===L&&1===V?ee.getUint16(_e+8,!N):null}var ti={};function fi(ee,_e){ee.onload=function(){_e.loaded(this)}}ti.load=function(ee,_e,z,S,N){var L,V,se,ye=new Array(S),de=new Array(ye.length);if(!1===N)ye[0]=ee;else for(L=0;L<ye.length;L++)se=z+L,ye[L]="".concat(ee,"image-").concat("00".concat(se).slice(-3),".jpg");for(de.notLoaded=[],de.addImage=function(be){de.notLoaded.push(be)},de.loaded=function(be){for(var He=de.notLoaded,j=0;j<He.length;j++)if(He[j]===be){He.splice(j,1);for(var pe=0;pe<ye.length;pe++){var Te=ye[pe].substr(ye[pe].lastIndexOf("/"));if(-1!==be.src.lastIndexOf(Te)){de[pe]={img:be};break}}break}0===He.length&&(!1===N?function(Qe){var yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ws;return/^blob:/i.test(Qe)?Es(Qe).then(ei).then(function(Ot){return ts(Ot,yt)}):Promise.resolve(null)}(ee,["orientation"]).then(function(Qe){de[0].tags=Qe,_e(de)}).catch(function(Qe){console.log(Qe),_e(de)}):_e(de))},L=0;L<ye.length;L++)V=new Image,de.addImage(V),fi(V,de),V.src=ye[L]};var Us=ti,$i={createVideoStream:function(ee){console.warn("**** InputStreamBrowser createVideoStream");var _e,z,S=null,N=["canrecord","ended"],L={},V={x:0,y:0,type:"Point"},se={x:0,y:0,type:"XYSize"},ye={getRealWidth:function(){return ee.videoWidth},getRealHeight:function(){return ee.videoHeight},getWidth:function(){return _e},getHeight:function(){return z},setWidth:function(de){_e=de},setHeight:function(de){z=de},setInputStream:function(de){S=de,this.setAttribute("src",void 0!==de.src?de.src:"")},ended:function(){return ee.ended},getConfig:function(){return S},setAttribute:function(de,be){ee&&ee.setAttribute(de,be)},pause:function(){ee.pause()},play:function(){ee.play()},setCurrentTime:function(de){var be;"LiveStream"!==(null===(be=S)||void 0===be?void 0:be.type)&&this.setAttribute("currentTime",de.toString())},addEventListener:function(de,be,He){-1!==N.indexOf(de)?(L[de]||(L[de]=[]),L[de].push(be)):ee.addEventListener(de,be,He)},clearEventHandlers:function(){N.forEach(function(de){var be=L[de];be&&be.length>0&&be.forEach(function(He){ee.removeEventListener(de,He)})})},trigger:function(de,be){var He,j,pe,Te,Qe,yt=L[de];if("canrecord"===de&&(Te=ee.videoWidth,Qe=ee.videoHeight,_e=null!==(j=S)&&void 0!==j&&j.size?Te/Qe>1?S.size:Math.floor(Te/Qe*S.size):Te,z=null!==(pe=S)&&void 0!==pe&&pe.size?Te/Qe>1?Math.floor(Qe/Te*S.size):S.size:Qe,se.x=_e,se.y=z),yt&&yt.length>0)for(He=0;He<yt.length;He++)yt[He].apply(ye,be)},setTopRight:function(de){V.x=de.x,V.y=de.y},getTopRight:function(){return V},setCanvasSize:function(de){se.x=de.x,se.y=de.y},getCanvasSize:function(){return se},getFrame:function(){return ee}};return ye},createLiveStream:function(ee){console.warn("**** InputStreamBrowser createLiveStream"),ee&&ee.setAttribute("autoplay","true");var _e=$i.createVideoStream(ee);return _e.ended=function(){return!1},_e},createImageStream:function(){var ee,_e,z=null,S=0,N=0,L=0,V=!0,se=!1,ye=null,de=0,be=null,He=!1,j=["canrecord","ended"],pe={},Te={x:0,y:0,type:"Point"},Qe={x:0,y:0,type:"XYSize"};function yt(Lt,Vt){var ln,nr=pe[Lt];if(nr&&nr.length>0)for(ln=0;ln<nr.length;ln++)nr[ln].apply(Ot,Vt)}var Ot={trigger:yt,getWidth:function(){return ee},getHeight:function(){return _e},setWidth:function(Lt){ee=Lt},setHeight:function(Lt){_e=Lt},getRealWidth:function(){return S},getRealHeight:function(){return N},setInputStream:function(Lt){var Vt;!1===Lt.sequence?(be=Lt.src,de=1):(be=Lt.src,de=Lt.length),se=!1,Us.load(be,function(ln){var nr,Pr;if(ye=ln,ln[0].tags&&ln[0].tags.orientation)switch(ln[0].tags.orientation){case 6:case 8:S=ln[0].img.height,N=ln[0].img.width;break;default:S=ln[0].img.width,N=ln[0].img.height}else S=ln[0].img.width,N=ln[0].img.height;ee=null!==(nr=z)&&void 0!==nr&&nr.size?S/N>1?z.size:Math.floor(S/N*z.size):S,_e=null!==(Pr=z)&&void 0!==Pr&&Pr.size?S/N>1?Math.floor(N/S*z.size):z.size:N,Qe.x=ee,Qe.y=_e,se=!0,L=0,setTimeout(function(){yt("canrecord",[])},0)},1,de,null===(Vt=z=Lt)||void 0===Vt?void 0:Vt.sequence)},ended:function(){return He},setAttribute:function(){},getConfig:function(){return z},pause:function(){V=!0},play:function(){V=!1},setCurrentTime:function(Lt){L=Lt},addEventListener:function(Lt,Vt){-1!==j.indexOf(Lt)&&(pe[Lt]||(pe[Lt]=[]),pe[Lt].push(Vt))},clearEventHandlers:function(){Object.keys(pe).forEach(function(Lt){return delete pe[Lt]})},setTopRight:function(Lt){Te.x=Lt.x,Te.y=Lt.y},getTopRight:function(){return Te},setCanvasSize:function(Lt){Qe.x=Lt.x,Qe.y=Lt.y},getCanvasSize:function(){return Qe},getFrame:function(){var Lt,Vt;return se?(V||(Lt=null===(Vt=ye)||void 0===Vt?void 0:Vt[L],L<de-1?L++:setTimeout(function(){He=!0,yt("ended",[])},0)),Lt):null}};return Ot}},js=$i,Zr=o(23),Co=Ie()(function ee(){je()(this,ee),q()(this,"config",void 0),q()(this,"inputStream",void 0),q()(this,"framegrabber",void 0),q()(this,"inputImageWrapper",void 0),q()(this,"stopped",!1),q()(this,"boxSize",void 0),q()(this,"resultCollector",void 0),q()(this,"decoder",void 0),q()(this,"workerPool",[]),q()(this,"onUIThread",!0),q()(this,"canvasContainer",new F)}),to=Ie()(function ee(){je()(this,ee),q()(this,"image",void 0),q()(this,"overlay",void 0)}),F=Ie()(function ee(){je()(this,ee),q()(this,"ctx",void 0),q()(this,"dom",void 0),this.ctx=new to,this.dom=new to});function K(ee){return"undefined"==typeof document?null:ee instanceof HTMLElement&&ee.nodeName&&1===ee.nodeType?ee:document.querySelector("string"==typeof ee?ee:"#interactive.viewport")}function fe(ee,_e,z){var V,se,S=(V=_e,(se=document.querySelector(ee))||((se=document.createElement("canvas")).className=V),se);console.warn("* initCanvas getCanvasAndContext");var N=S.getContext("2d",{willReadFrequently:z.willReadFrequently});return{canvas:S,context:N}}function tt(ee,_e){var z=Object.keys(ee);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(ee);_e&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(ee,N).enumerable})),z.push.apply(z,S)}return z}function gt(ee){for(var _e=1;_e<arguments.length;_e++){var z=null!=arguments[_e]?arguments[_e]:{};_e%2?tt(Object(z),!0).forEach(function(S){q()(ee,S,z[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(z)):tt(Object(z)).forEach(function(S){Object.defineProperty(ee,S,Object.getOwnPropertyDescriptor(z,S))})}return ee}Or.a.setMatrixArrayType(Array);var Dt=[];function Yt(ee){return gt(gt({},ee),{},{inputStream:gt(gt({},ee.inputStream),{},{target:null})})}function bn(ee){if(ee){var _e=ee().default;if(!_e)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var z;function S(L){self.postMessage({event:"processed",imageData:z.data,result:L},[z.data.buffer])}function N(){self.postMessage({event:"initialized",imageData:z.data},[z.data.buffer])}self.onmessage=function(L){if("init"===L.data.cmd){var V=L.data.config;V.numOfWorkers=0,z=new _e.ImageWrapper({x:L.data.size.x,y:L.data.size.y},new Uint8Array(L.data.imageData)),_e.init(V,N,z),_e.onProcessed(S)}else"process"===L.data.cmd?(z.data=new Uint8Array(L.data.imageData),_e.start()):"setReaders"===L.data.cmd?_e.setReaders(L.data.readers):"registerReader"===L.data.cmd&&_e.registerReader(L.data.name,L.data.reader)}}function ur(ee,_e,z){var S,N,L=("undefined"!=typeof __factorySource__&&(N=__factorySource__),S=new Blob(["("+bn.toString()+")("+N+");"],{type:"text/javascript"}),window.URL.createObjectURL(S)),V={worker:new Worker(L),imageData:new Uint8Array(_e.getWidth()*_e.getHeight()),busy:!0};V.worker.onmessage=function(se){"initialized"===se.data.event?(URL.revokeObjectURL(L),V.busy=!1,V.imageData=new Uint8Array(se.data.imageData),z(V)):"processed"===se.data.event&&(V.imageData=new Uint8Array(se.data.imageData),V.busy=!1)},V.worker.postMessage({cmd:"init",size:{x:_e.getWidth(),y:_e.getHeight()},imageData:V.imageData,config:Yt(ee)},[V.imageData.buffer])}function Hr(ee,_e,z,S){var N=ee-Dt.length;if(0===N&&S)S();else if(N<0)Dt.slice(N).forEach(function(se){se.worker.terminate()}),Dt=Dt.slice(0,N),S&&S();else{var L=function(se){Dt.push(se),Dt.length>=ee&&S&&S()};if(_e)for(var V=0;V<N;V++)ur(_e,z,L)}}function Pi(ee,_e,z){for(var S=ee.length;S--;)ee[S][0]+=_e,ee[S][1]+=z}Or.a.setMatrixArrayType(Array);var bi=function(){function ee(){var S=this;je()(this,ee),q()(this,"context",new Co),q()(this,"canRecord",function(N){var L;S.context.config&&(Zr.a.checkImageConstraints(S.context.inputStream,null===(L=S.context.config)||void 0===L?void 0:L.locator),S.initCanvas(),S.context.framegrabber=es.create(S.context.inputStream,S.context.canvasContainer.dom.image),void 0===S.context.config.numOfWorkers&&(S.context.config.numOfWorkers=0),Hr(S.context.config.numOfWorkers,S.context.config,S.context.inputStream,function(){var V;0===(null===(V=S.context.config)||void 0===V?void 0:V.numOfWorkers)&&S.initializeData(),S.ready(N)}))}),q()(this,"update",function(){if(S.context.onUIThread){var N,L=(se=S.context.framegrabber,Dt.length?!!(ye=Dt.filter(function(de){return!de.busy})[0])&&(se.attachData(ye.imageData),se.grab()&&(ye.busy=!0,ye.worker.postMessage({cmd:"process",imageData:ye.imageData},[ye.imageData.buffer])),!0):null);L||(S.context.framegrabber.attachData(null===(N=S.context.inputImageWrapper)||void 0===N?void 0:N.data),S.context.framegrabber.grab()&&(L||S.locateAndDecode()))}else{var V;S.context.framegrabber.attachData(null===(V=S.context.inputImageWrapper)||void 0===V?void 0:V.data),S.context.framegrabber.grab(),S.locateAndDecode()}var se,ye})}var _e,z;return Ie()(ee,[{key:"initBuffers",value:function(S){if(this.context.config){var N=(se=this.context.inputStream,de=this.context.config.locator,be=S||new re.a({x:se.getWidth(),y:se.getHeight(),type:"XYSize"}),He=[Or.c.clone([0,0]),Or.c.clone([0,be.size.y]),Or.c.clone([be.size.x,be.size.y]),Or.c.clone([be.size.x,0])],Zr.a.init(be,de),{inputImageWrapper:be,boxSize:He}),V=N.boxSize;this.context.inputImageWrapper=N.inputImageWrapper,this.context.boxSize=V}var se,de,be,He}},{key:"initializeData",value:function(S){this.context.config&&(this.initBuffers(S),this.context.decoder=Wt.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?K(this.context.config.inputStream.target):null}},{key:"ready",value:function(S){this.context.inputStream.play(),S()}},{key:"initCanvas",value:function(){var S=function(ee){var _e,z,S,N,L,V,se=K(null==ee||null===(_e=ee.config)||void 0===_e||null===(z=_e.inputStream)||void 0===z?void 0:z.target),ye=null==ee||null===(S=ee.config)||void 0===S||null===(N=S.inputStream)||void 0===N?void 0:N.type;if(!ye)return null;var de=function(He,j){var pe=j.willReadFrequently;if("undefined"!=typeof document){var Te=fe("canvas.imgBuffer","imgBuffer",{willReadFrequently:pe}),Qe=fe("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:pe});return Te.canvas.width=Qe.canvas.width=He.x,Te.canvas.height=Qe.canvas.height=He.y,{dom:{image:Te.canvas,overlay:Qe.canvas},ctx:{image:Te.context,overlay:Qe.context}}}return null}(ee.inputStream.getCanvasSize(),{willReadFrequently:!(null==ee||null===(L=ee.config)||void 0===L||null===(V=L.inputStream)||void 0===V||!V.willReadFrequently)});if(!de)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var be=de.dom;return"undefined"!=typeof document&&se&&("ImageStream"!==ye||se.contains(be.image)||se.appendChild(be.image),se.contains(be.overlay)||se.appendChild(be.overlay)),de}(this.context);if(S){var N=S.ctx,L=S.dom;this.context.canvasContainer.dom.image=L.image,this.context.canvasContainer.dom.overlay=L.overlay,this.context.canvasContainer.ctx.image=N.image,this.context.canvasContainer.ctx.overlay=N.overlay}}},{key:"initInputStream",value:function(S){if(this.context.config&&this.context.config.inputStream){var N=this.context.config.inputStream,L=N.type,V=N.constraints,se=function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",He=arguments.length>1?arguments[1]:void 0,j=arguments.length>2?arguments[2]:void 0;switch(be){case"VideoStream":var pe=document.createElement("video");return{video:pe,inputStream:j.createVideoStream(pe)};case"ImageStream":return{inputStream:j.createImageStream()};case"LiveStream":var Te=null;return He&&((Te=He.querySelector("video"))||(Te=document.createElement("video"),He.appendChild(Te))),{video:Te,inputStream:j.createLiveStream(Te)};default:return console.error("* setupInputStream invalid type ".concat(be)),{video:null,inputStream:null}}}(L,this.getViewPort(),js),ye=se.video,de=se.inputStream;"LiveStream"===L&&ye&&vi.request(ye,V).then(function(){return de.trigger("canrecord")}).catch(function(be){return S(be)}),de&&(de.setAttribute("preload","auto"),de.setInputStream(this.context.config.inputStream),de.addEventListener("canrecord",this.canRecord.bind(void 0,S))),this.context.inputStream=de}}},{key:"getBoundingBoxes",value:function(){var S;return null!==(S=this.context.config)&&void 0!==S&&S.locate?Zr.a.locate():[[Or.c.clone(this.context.boxSize[0]),Or.c.clone(this.context.boxSize[1]),Or.c.clone(this.context.boxSize[2]),Or.c.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(S){var de,be,He,N=this,L=this.context.inputStream.getTopRight(),V=L.x,se=L.y;if((0!==V||0!==se)&&(S.barcodes&&S.barcodes.forEach(function(de){return N.transformResult(de)}),S.line&&2===S.line.length&&(He=se,(de=S.line)[0].x+=be=V,de[0].y+=He,de[1].x+=be,de[1].y+=He),S.box&&Pi(S.box,V,se),S.boxes&&S.boxes.length>0))for(var ye=0;ye<S.boxes.length;ye++)Pi(S.boxes[ye],V,se)}},{key:"addResult",value:function(S,N){var L=this;N&&this.context.resultCollector&&(S.barcodes?S.barcodes.filter(function(V){return V.codeResult}).forEach(function(V){return L.addResult(V,N)}):S.codeResult&&this.context.resultCollector.addResult(N,this.context.inputStream.getCanvasSize(),S.codeResult))}},{key:"hasCodeResult",value:function(S){return!(!S||!(S.barcodes?S.barcodes.some(function(N){return N.codeResult}):S.codeResult))}},{key:"publishResult",value:function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,N=arguments.length>1?arguments[1]:void 0,L=S;S&&this.context.onUIThread&&(this.transformResult(S),this.addResult(S,N),L=S.barcodes||S),hn.publish("processed",L),this.hasCodeResult(S)&&hn.publish("detected",L)}},{key:"locateAndDecode",value:(z=te()(we.a.mark(function S(){var N,L,V,se,ye;return we.a.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(!(N=this.getBoundingBoxes())){de.next=12;break}return de.next=4,this.context.decoder.decodeFromBoundingBoxes(N);case 4:if(de.t0=de.sent,de.t0){de.next=7;break}de.t0={};case 7:(V=de.t0).boxes=N,this.publishResult(V,null===(L=this.context.inputImageWrapper)||void 0===L?void 0:L.data),de.next=16;break;case 12:return de.next=14,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 14:(se=de.sent)?this.publishResult(se,null===(ye=this.context.inputImageWrapper)||void 0===ye?void 0:ye.data):this.publishResult();case 16:case"end":return de.stop()}},S,this)})),function(){return z.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var S,N=this,L=null,V=1e3/((null===(S=this.context.config)||void 0===S?void 0:S.frequency)||60);this.context.stopped=!1;var se=this.context;!function ye(de){L=L||de,se.stopped||(de>=L&&(L+=V,N.update()),window.requestAnimationFrame(ye))}(performance.now())}},{key:"start",value:function(){var S,N;this.context.onUIThread&&"LiveStream"===(null===(S=this.context.config)||void 0===S||null===(N=S.inputStream)||void 0===N?void 0:N.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(_e=te()(we.a.mark(function S(){var N;return we.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(this.context.stopped=!0,Hr(0),null===(N=this.context.config)||void 0===N||!N.inputStream||"LiveStream"!==this.context.config.inputStream.type){L.next=6;break}return L.next=5,vi.release();case 5:this.context.inputStream.clearEventHandlers();case 6:case"end":return L.stop()}},S,this)})),function(){return _e.apply(this,arguments)})},{key:"setReaders",value:function(S){var N;this.context.decoder&&this.context.decoder.setReaders(S),N=S,Dt.forEach(function(L){return L.worker.postMessage({cmd:"setReaders",readers:N})})}},{key:"registerReader",value:function(S,N){var L,V;Wt.registerReader(S,N),this.context.decoder&&this.context.decoder.registerReader(S,N),L=S,V=N,Dt.forEach(function(se){return se.worker.postMessage({cmd:"registerReader",name:L,reader:V})})}}]),ee}(),wi=new bi,no=wi.context,Io={init:function(ee,_e,z){var S,N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wi;return _e||(S=new Promise(function(L,V){_e=function(se){se?V(se):L()}})),N.context.config=Y()({},Vs,ee),N.context.config.numOfWorkers>0&&(N.context.config.numOfWorkers=0),z?(N.context.onUIThread=!1,N.initializeData(z),_e&&_e()):N.initInputStream(_e),S},start:function(){return wi.start()},stop:function(){return wi.stop()},pause:function(){no.stopped=!0},onDetected:function(ee){ee&&("function"==typeof ee||"object"===O()(ee)&&ee.callback)?hn.subscribe("detected",ee):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(ee){hn.unsubscribe("detected",ee)},onProcessed:function(ee){ee&&("function"==typeof ee||"object"===O()(ee)&&ee.callback)?hn.subscribe("processed",ee):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(ee){hn.unsubscribe("processed",ee)},setReaders:function(ee){ee?wi.setReaders(ee):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(ee,_e){ee?_e?wi.registerReader(ee,_e):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(ee){ee&&"function"==typeof ee.addResult&&(no.resultCollector=ee)},get canvas(){return no.canvasContainer},decodeSingle:function(ee,_e){var z=this,S=new bi;return(ee=Y()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:ee.src},numOfWorkers:1,locator:{halfSample:!1}},ee)).numOfWorkers>0&&(ee.numOfWorkers=0),ee.numOfWorkers>0&&("undefined"==typeof Blob||"undefined"==typeof Worker)&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),ee.numOfWorkers=0),new Promise(function(N,L){try{z.init(ee,function(){hn.once("processed",function(V){S.stop(),_e&&_e.call(null,V),N(V)},!0),S.start()},null,S)}catch(V){L(V)}})},get default(){return Io},Readers:C,CameraAccess:vi,ImageDebug:Xe.a,ImageWrapper:re.a,ResultCollector:Bn};R.default=Io}]).default},6670:(St,M,R)=>{"use strict";R.d(M,{$:()=>cn,A:()=>J,B:()=>qe,G:()=>Ai,H:()=>Mr,J:()=>Ze,L:()=>zn,M:()=>z,N:()=>V,P:()=>_u,Q:()=>se,R:()=>ud,T:()=>ye,U:()=>L,V:()=>j,W:()=>pe,X:()=>Lt,Y:()=>So,Z:()=>bl,_:()=>wl,a:()=>pi,a0:()=>ou,a1:()=>id,a2:()=>Yn,a3:()=>Kr,a4:()=>Yo,a5:()=>au,a6:()=>im,a7:()=>Fh,a8:()=>Sl,a9:()=>Fi,aA:()=>Ts,aB:()=>hr,aC:()=>wu,aD:()=>pd,aE:()=>lr,aI:()=>Nl,aL:()=>be,aa:()=>io,ab:()=>sd,ac:()=>Lh,af:()=>Ml,ag:()=>od,ah:()=>lu,ak:()=>On,al:()=>Fr,an:()=>ad,ao:()=>vc,ap:()=>Gn,aq:()=>q,ar:()=>Dn,as:()=>sn,at:()=>Se,au:()=>Zl,av:()=>um,aw:()=>De,ax:()=>ue,ay:()=>ne,az:()=>on,b:()=>xt,c:()=>cm,d:()=>vu,e:()=>uo,f:()=>Z,g:()=>pn,h:()=>et,i:()=>Yr,j:()=>En,k:()=>Yh,l:()=>Hh,m:()=>ry,n:()=>Kl,o:()=>re,r:()=>lo,s:()=>jl,u:()=>mu});var o=R(8239),C=R(4213),b=R(1572),k=R(4762),O=R(3855),U=R(1177);const re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},J={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new C.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new O.Yd("@firebase/auth");function X(w,...g){ge.logLevel<=O.in.ERROR&&ge.error(`Auth (${b.SDK_VERSION}): ${w}`,...g)}function Se(w,...g){throw Ue(w,...g)}function De(w,...g){return Ue(w,...g)}function Fe(w,g,_){const T=Object.assign(Object.assign({},je()),{[g]:_});return new C.LL("auth","Firebase",T).create(g,{appName:w.name})}function Ne(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Se(w,"argument-error"),Fe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(w,...g){if("string"!=typeof w){const _=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=w.name),w._errorFactory.create(_,...T)}return ze.create(w,...g)}function ue(w,g,..._){if(!w)throw Ue(g,..._)}function Me(w){const g="INTERNAL ASSERTION FAILED: "+w;throw X(g),new Error(g)}function q(w,g){w||Me(g)}const Q=new Map;function ne(w){q(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(q(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function W(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function ce(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class rt{constructor(g,_){this.shortDelay=g,this.longDelay=_,q(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,C.uI)()||(0,C.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ce()||(0,C.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function dt(w,g){q(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class $t{static initialize(g,_,T){this.fetchImpl=g,_&&(this.headersImpl=_),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vn=new rt(3e4,6e4);function Rt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function dn(w,g,_,T){return _n.apply(this,arguments)}function _n(){return(_n=(0,o.Z)(function*(w,g,_,T,H={}){return ar(w,H,(0,o.Z)(function*(){let le={},Ye={};T&&("GET"===g?Ye=T:le={body:JSON.stringify(T)});const mt=(0,C.xO)(Object.assign({key:w.config.apiKey},Ye)).slice(1),Gt=yield w._getAdditionalHeaders();return Gt["Content-Type"]="application/json",w.languageCode&&(Gt["X-Firebase-Locale"]=w.languageCode),$t.fetch()(Ti(w,w.config.apiHost,_,mt),Object.assign({method:g,headers:Gt,referrerPolicy:"no-referrer"},le))}))})).apply(this,arguments)}function ar(w,g,_){return ir.apply(this,arguments)}function ir(){return(ir=(0,o.Z)(function*(w,g,_){w._canInitEmulator=!1;const T=Object.assign(Object.assign({},Jt),g);try{const H=new Xr(w),le=yield Promise.race([_(),H.promise]);H.clearNetworkTimeout();const Ye=yield le.json();if("needConfirmation"in Ye)throw vr(w,"account-exists-with-different-credential",Ye);if(le.ok&&!("errorMessage"in Ye))return Ye;{const mt=le.ok?Ye.errorMessage:Ye.error.message,[Gt,Zt]=mt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Gt)throw vr(w,"credential-already-in-use",Ye);if("EMAIL_EXISTS"===Gt)throw vr(w,"email-already-in-use",Ye);const An=T[Gt]||Gt.toLowerCase().replace(/[_\s]+/g,"-");if(Zt)throw Fe(w,An,Zt);Se(w,An)}}catch(H){if(H instanceof C.ZR)throw H;Se(w,"network-request-failed")}})).apply(this,arguments)}function Pn(w,g,_,T){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,o.Z)(function*(w,g,_,T,H={}){const le=yield dn(w,g,_,T,H);return"mfaPendingCredential"in le&&Se(w,"multi-factor-auth-required",{_serverResponse:le}),le})).apply(this,arguments)}function Ti(w,g,_,T){const H=`${g}${_}?${T}`;return w.config.emulator?dt(w.config,H):`${w.config.apiScheme}://${H}`}class Xr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,T)=>{this.timer=setTimeout(()=>T(De(this.auth,"network-request-failed")),vn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vr(w,g,_){const T={appName:w.name};_.email&&(T.email=_.email),_.phoneNumber&&(T.phoneNumber=_.phoneNumber);const H=De(w,g,T);return H.customData._tokenResponse=_,H}function _i(){return(_i=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function en(w,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function qn(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Hn(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Fn(){return(Fn=(0,o.Z)(function*(w,g=!1){const _=(0,C.m9)(w),T=yield _.getIdToken(g),H=xn(T);ue(H&&H.exp&&H.auth_time&&H.iat,_.auth,"internal-error");const le="object"==typeof H.firebase?H.firebase:void 0,Ye=null==le?void 0:le.sign_in_provider;return{claims:H,token:T,authTime:Hn(Ri(H.auth_time)),issuedAtTime:Hn(Ri(H.iat)),expirationTime:Hn(Ri(H.exp)),signInProvider:Ye||null,signInSecondFactor:(null==le?void 0:le.sign_in_second_factor)||null}})).apply(this,arguments)}function Ri(w){return 1e3*Number(w)}function xn(w){const[g,_,T]=w.split(".");if(void 0===g||void 0===_||void 0===T)return X("JWT malformed, contained fewer than 3 sections"),null;try{const H=(0,C.tV)(_);return H?JSON.parse(H):(X("Failed to decode base64 JWT payload"),null)}catch(H){return X("Caught error parsing JWT payload as JSON",H),null}}function Ft(w,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,o.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(T){throw T instanceof C.ZR&&li(T)&&w.auth.currentUser===w&&(yield w.auth.signOut()),T}})).apply(this,arguments)}function li({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class jr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const H=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,H)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),T)}iteration(){var g=this;return(0,o.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Mn{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hn(this.lastLoginAt),this.creationTime=Hn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zn(w){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,o.Z)(function*(w){var g;const _=w.auth,T=yield w.getIdToken(),H=yield Ft(w,qn(_,{idToken:T}));ue(null==H?void 0:H.users.length,_,"internal-error");const le=H.users[0];w._notifyReloadListener(le);const Ye=(null===(g=le.providerUserInfo)||void 0===g?void 0:g.length)?it(le.providerUserInfo):[],mt=Le(w.providerData,Ye),An=!!w.isAnonymous&&!(w.email&&le.passwordHash||(null==mt?void 0:mt.length)),Br={uid:le.localId,displayName:le.displayName||null,photoURL:le.photoUrl||null,email:le.email||null,emailVerified:le.emailVerified||!1,phoneNumber:le.phoneNumber||null,tenantId:le.tenantId||null,providerData:mt,metadata:new Mn(le.createdAt,le.lastLoginAt),isAnonymous:An};Object.assign(w,Br)})).apply(this,arguments)}function Ae(){return(Ae=(0,o.Z)(function*(w){const g=(0,C.m9)(w);yield Zn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Le(w,g){return[...w.filter(T=>!g.some(H=>H.providerId===T.providerId)),...g]}function it(w){return w.map(g=>{var{providerId:_}=g,T=(0,k._T)(g,["providerId"]);return{providerId:_,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function $e(){return($e=(0,o.Z)(function*(w,g){const _=yield ar(w,{},(0,o.Z)(function*(){const T=(0,C.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:H,apiKey:le}=w.config,Ye=Ti(w,H,"/v1/token",`key=${le}`),mt=yield w._getAdditionalHeaders();return mt["Content-Type"]="application/x-www-form-urlencoded",$t.fetch()(Ye,{method:"POST",headers:mt,body:T})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ue(g.idToken,"internal-error"),ue(void 0!==g.idToken,"internal-error"),ue(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=xn(w);return ue(g,"internal-error"),ue(void 0!==g.exp,"internal-error"),ue(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var T=this;return(0,o.Z)(function*(){return ue(!T.accessToken||T.refreshToken,g,"user-token-expired"),_||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var T=this;return(0,o.Z)(function*(){const{accessToken:H,refreshToken:le,expiresIn:Ye}=yield function(w,g){return $e.apply(this,arguments)}(g,_);T.updateTokensAndExpiration(H,le,Number(Ye))})()}updateTokensAndExpiration(g,_,T){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,_){const{refreshToken:T,accessToken:H,expirationTime:le}=_,Ye=new ht;return T&&(ue("string"==typeof T,"internal-error",{appName:g}),Ye.refreshToken=T),H&&(ue("string"==typeof H,"internal-error",{appName:g}),Ye.accessToken=H),le&&(ue("number"==typeof le,"internal-error",{appName:g}),Ye.expirationTime=le),Ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ht,this.toJSON())}_performRefresh(){return Me("not implemented")}}function wt(w,g){ue("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Xt{constructor(g){var{uid:_,auth:T,stsTokenManager:H}=g,le=(0,k._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=T,this.stsTokenManager=H,this.accessToken=H.accessToken,this.displayName=le.displayName||null,this.email=le.email||null,this.emailVerified=le.emailVerified||!1,this.phoneNumber=le.phoneNumber||null,this.photoURL=le.photoURL||null,this.isAnonymous=le.isAnonymous||!1,this.tenantId=le.tenantId||null,this.providerData=le.providerData?[...le.providerData]:[],this.metadata=new Mn(le.createdAt||void 0,le.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,o.Z)(function*(){const T=yield Ft(_,_.stsTokenManager.getToken(_.auth,g));return ue(T,_.auth,"internal-error"),_.accessToken!==T&&(_.accessToken=T,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),T})()}getIdTokenResult(g){return function(w){return Fn.apply(this,arguments)}(this,g)}reload(){return function(w){return Ae.apply(this,arguments)}(this)}_assign(g){this!==g&&(ue(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Xt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var T=this;return(0,o.Z)(function*(){let H=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),H=!0),_&&(yield Zn(T)),yield T.auth._persistUserIfCurrent(T),H&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,o.Z)(function*(){const _=yield g.getIdToken();return yield Ft(g,function(w,g){return _i.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var T,H,le,Ye,mt,Gt,Zt,An;const Br=null!==(T=_.displayName)&&void 0!==T?T:void 0,Sa=null!==(H=_.email)&&void 0!==H?H:void 0,Yl=null!==(le=_.phoneNumber)&&void 0!==le?le:void 0,Da=null!==(Ye=_.photoURL)&&void 0!==Ye?Ye:void 0,xc=null!==(mt=_.tenantId)&&void 0!==mt?mt:void 0,Xh=null!==(Gt=_._redirectEventId)&&void 0!==Gt?Gt:void 0,Mc=null!==(Zt=_.createdAt)&&void 0!==Zt?Zt:void 0,yd=null!==(An=_.lastLoginAt)&&void 0!==An?An:void 0,{uid:vd,emailVerified:kc,isAnonymous:bd,providerData:Su,stsTokenManager:_m}=_;ue(vd&&_m,g,"internal-error");const ri=ht.fromJSON(this.name,_m);ue("string"==typeof vd,g,"internal-error"),wt(Br,g.name),wt(Sa,g.name),ue("boolean"==typeof kc,g,"internal-error"),ue("boolean"==typeof bd,g,"internal-error"),wt(Yl,g.name),wt(Da,g.name),wt(xc,g.name),wt(Xh,g.name),wt(Mc,g.name),wt(yd,g.name);const Ss=new Xt({uid:vd,auth:g,email:Sa,emailVerified:kc,displayName:Br,isAnonymous:bd,photoURL:Da,phoneNumber:Yl,tenantId:xc,stsTokenManager:ri,createdAt:Mc,lastLoginAt:yd});return Su&&Array.isArray(Su)&&(Ss.providerData=Su.map(ym=>Object.assign({},ym))),Xh&&(Ss._redirectEventId=Xh),Ss}static _fromIdTokenResponse(g,_,T=!1){return(0,o.Z)(function*(){const H=new ht;H.updateFromServerResponse(_);const le=new Xt({uid:_.localId,auth:g,stsTokenManager:H,isAnonymous:T});return yield Zn(le),le})()}}const zn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,T){var H=this;return(0,o.Z)(function*(){H.storage[_]=T})()}_get(_){var T=this;return(0,o.Z)(function*(){const H=T.storage[_];return void 0===H?null:H})()}_remove(_){var T=this;return(0,o.Z)(function*(){delete T.storage[_]})()}_addListener(_,T){}_removeListener(_,T){}}return w.type="NONE",w})();function on(w,g,_){return`firebase:${w}:${g}:${_}`}class Cr{constructor(g,_,T){this.persistence=g,this.auth=_,this.userKey=T;const{config:H,name:le}=this.auth;this.fullUserKey=on(this.userKey,H.apiKey,le),this.fullPersistenceKey=on("persistence",H.apiKey,le),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,o.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Xt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,o.Z)(function*(){if(_.persistence===g)return;const T=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,T?_.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,T="authUser"){return(0,o.Z)(function*(){if(!_.length)return new Cr(ne(zn),g,T);const H=(yield Promise.all(_.map(function(){var Zt=(0,o.Z)(function*(An){if(yield An._isAvailable())return An});return function(An){return Zt.apply(this,arguments)}}()))).filter(Zt=>Zt);let le=H[0]||ne(zn);const Ye=on(T,g.config.apiKey,g.name);let mt=null;for(const Zt of _)try{const An=yield Zt._get(Ye);if(An){const Br=Xt._fromJSON(g,An);Zt!==le&&(mt=Br),le=Zt;break}}catch(An){}const Gt=H.filter(Zt=>Zt._shouldAllowMigration);return le._shouldAllowMigration&&Gt.length?(le=Gt[0],mt&&(yield le._set(Ye,mt.toJSON())),yield Promise.all(_.map(function(){var Zt=(0,o.Z)(function*(An){if(An!==le)try{yield An._remove(Ye)}catch(Br){}});return function(An){return Zt.apply(this,arguments)}}())),new Cr(le,g,T)):new Cr(le,g,T)})()}}function Ke(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(It(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Be(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Wt(g))return"Blackberry";if(hn(g))return"Webos";if(Oe(g))return"Safari";if((g.includes("chrome/")||ct(g))&&!g.includes("edge/"))return"Chrome";if(sn(g))return"Android";{const T=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==T?void 0:T.length))return T[1]}return"Other"}function Be(w=(0,C.z$)()){return/firefox\//i.test(w)}function Oe(w=(0,C.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ct(w=(0,C.z$)()){return/crios\//i.test(w)}function It(w=(0,C.z$)()){return/iemobile/i.test(w)}function sn(w=(0,C.z$)()){return/android/i.test(w)}function Wt(w=(0,C.z$)()){return/blackberry/i.test(w)}function hn(w=(0,C.z$)()){return/webos/i.test(w)}function Dn(w=(0,C.z$)()){return/iphone|ipad|ipod/i.test(w)}function Gn(w=(0,C.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function zt(w=(0,C.z$)()){return Dn(w)||sn(w)||hn(w)||Wt(w)||/windows phone/i.test(w)||It(w)}function Jr(w,g=[]){let _;switch(w){case"Browser":_=Ke((0,C.z$)());break;case"Worker":_=`${Ke((0,C.z$)())}-${w}`;break;default:_=w}const T=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${b.SDK_VERSION}/${T}`}class Di{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const T=le=>new Promise((Ye,mt)=>{try{Ye(g(le))}catch(Gt){mt(Gt)}});T.onAbort=_,this.queue.push(T);const H=this.queue.length-1;return()=>{this.queue[H]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===g)return;const T=[];try{for(const H of _.queue)yield H(g),H.onAbort&&T.push(H.onAbort)}catch(H){T.reverse();for(const le of T)try{le()}catch(Ye){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:H.message})}})()}}class xr{constructor(g,_,T){this.app=g,this.heartbeatServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cr(this),this.idTokenSubscription=new cr(this),this.beforeStateQueue=new Di(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(g,_){var T=this;return _&&(this._popupRedirectResolver=ne(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var H,le;if(!T._deleted&&(T.persistenceManager=yield Cr.create(T,g),!T._deleted)){if(null===(H=T._popupRedirectResolver)||void 0===H?void 0:H._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch(Ye){}yield T.initializeCurrentUser(_),T.lastNotifiedUid=(null===(le=T.currentUser)||void 0===le?void 0:le.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,o.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,o.Z)(function*(){var T;const H=yield _.assertedPersistence.getCurrentUser();let le=H,Ye=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const mt=null===(T=_.redirectUser)||void 0===T?void 0:T._redirectEventId,Gt=null==le?void 0:le._redirectEventId,Zt=yield _.tryRedirectSignIn(g);(!mt||mt===Gt)&&(null==Zt?void 0:Zt.user)&&(le=Zt.user,Ye=!0)}if(!le)return _.directlySetCurrentUser(null);if(!le._redirectEventId){if(Ye)try{yield _.beforeStateQueue.runMiddleware(le)}catch(mt){le=H,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(mt))}return le?_.reloadAndSetCurrentUserOrClear(le):_.directlySetCurrentUser(null)}return ue(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===le._redirectEventId?_.directlySetCurrentUser(le):_.reloadAndSetCurrentUserOrClear(le)})()}tryRedirectSignIn(g){var _=this;return(0,o.Z)(function*(){let T=null;try{T=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(H){yield _._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,o.Z)(function*(){try{yield Zn(g)}catch(T){if("auth/network-request-failed"!==T.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,o.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,o.Z)(function*(){const T=g?(0,C.m9)(g):null;return T&&ue(T.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(T&&T._clone(_))})()}_updateCurrentUser(g,_=!1){var T=this;return(0,o.Z)(function*(){if(!T._deleted)return g&&ue(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),_||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,o.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,o.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(ne(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new C.LL("auth","Firebase",g())}onAuthStateChanged(g,_,T){return this.registerStateListener(this.authStateSubscription,g,_,T)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,T){return this.registerStateListener(this.idTokenSubscription,g,_,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var T=this;return(0,o.Z)(function*(){const H=yield T.getOrInitRedirectPersistenceManager(_);return null===g?H.removeCurrentUser():H.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const T=g&&ne(g)||_._popupRedirectResolver;ue(T,_,"argument-error"),_.redirectPersistenceManager=yield Cr.create(_,[ne(T._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,o.Z)(function*(){var T,H;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(T=_._currentUser)||void 0===T?void 0:T._redirectEventId)===g?_._currentUser:(null===(H=_.redirectUser)||void 0===H?void 0:H._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,o.Z)(function*(){if(g===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,T,H){if(this._deleted)return()=>{};const le="function"==typeof _?_:_.next.bind(_),Ye=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Ye,this,"internal-error"),Ye.then(()=>le(this.currentUser)),"function"==typeof _?g.addObserver(_,T,H):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,o.Z)(function*(){var _;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const H=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return H&&(T["X-Firebase-Client"]=H),T})()}}function lr(w){return(0,C.m9)(w)}class cr{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,C.ne)(_=>this.observer=_)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(w,g,_){const T=lr(w);ue(T._canInitEmulator,T,"emulator-config-failed"),ue(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const H=!!(null==_?void 0:_.disableWarnings),le=hs(g),{host:Ye,port:mt}=function(w){const g=hs(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const T=_[2].split("@").pop()||"",H=/^(\[[^\]]+\])(:|$)/.exec(T);if(H){const le=H[1];return{host:le,port:Gi(T.substr(le.length+1))}}{const[le,Ye]=T.split(":");return{host:le,port:Gi(Ye)}}}(g);T.config.emulator={url:`${le}//${Ye}${null===mt?"":`:${mt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Ye,port:mt,protocol:le.replace(":",""),options:Object.freeze({disableWarnings:H})}),H||function(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function hs(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Gi(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Mr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Me("not implemented")}_getIdTokenResponse(g){return Me("not implemented")}_linkToIdToken(g,_){return Me("not implemented")}_getReauthenticationResolver(g){return Me("not implemented")}}function vi(w,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:resetPassword",Rt(w,g))})).apply(this,arguments)}function Vs(w,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function qr(w,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",Rt(w,g))})).apply(this,arguments)}function es(){return(es=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithPassword",Rt(w,g))})).apply(this,arguments)}function Oi(w,g){return ws.apply(this,arguments)}function ws(){return(ws=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:sendOobCode",Rt(w,g))})).apply(this,arguments)}function ei(w,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,o.Z)(function*(w,g){return Oi(w,g)})).apply(this,arguments)}function ts(w,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,o.Z)(function*(w,g){return Oi(w,g)})).apply(this,arguments)}function eo(w,g){return ti.apply(this,arguments)}function ti(){return(ti=(0,o.Z)(function*(w,g){return Oi(w,g)})).apply(this,arguments)}function fi(w,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,o.Z)(function*(w,g){return Oi(w,g)})).apply(this,arguments)}function js(){return(js=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithEmailLink",Rt(w,g))})).apply(this,arguments)}function Co(){return(Co=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithEmailLink",Rt(w,g))})).apply(this,arguments)}class to extends Mr{constructor(g,_,T,H=null){super("password",T),this._email=g,this._password=_,this._tenantId=H}static _fromEmailAndPassword(g,_){return new to(g,_,"password")}static _fromEmailAndCode(g,_,T=null){return new to(g,_,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function(w,g){return es.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(w,g){return js.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Se(g,"internal-error")}})()}_linkToIdToken(g,_){var T=this;return(0,o.Z)(function*(){switch(T.signInMethod){case"password":return Vs(g,{idToken:_,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function(w,g){return Co.apply(this,arguments)}(g,{idToken:_,email:T._email,oobCode:T._password});default:Se(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function F(w,g){return K.apply(this,arguments)}function K(){return(K=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithIdp",Rt(w,g))})).apply(this,arguments)}class Ze extends Mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ze(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Se("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:H}=_,le=(0,k._T)(_,["providerId","signInMethod"]);if(!T||!H)return null;const Ye=new Ze(T,H);return Ye.idToken=le.idToken||void 0,Ye.accessToken=le.accessToken||void 0,Ye.secret=le.secret,Ye.nonce=le.nonce,Ye.pendingToken=le.pendingToken||null,Ye}_getIdTokenResponse(g){return F(g,this.buildRequest())}_linkToIdToken(g,_){const T=this.buildRequest();return T.idToken=_,F(g,T)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,F(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,C.xO)(_)}return g}}function tt(w,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:sendVerificationCode",Rt(w,g))})).apply(this,arguments)}function Yt(){return(Yt=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithPhoneNumber",Rt(w,g))})).apply(this,arguments)}function ur(){return(ur=(0,o.Z)(function*(w,g){const _=yield Pn(w,"POST","/v1/accounts:signInWithPhoneNumber",Rt(w,g));if(_.temporaryProof)throw vr(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Hr={USER_NOT_FOUND:"user-not-found"};function bi(){return(bi=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithPhoneNumber",Rt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Hr)})).apply(this,arguments)}class wi extends Mr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new wi({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new wi({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(w,g){return Yt.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(w,g){return ur.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return bi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:T,verificationCode:H}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:T,code:H}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:T,phoneNumber:H,temporaryProof:le}=g;return T||_||H||le?new wi({verificationId:_,verificationCode:T,phoneNumber:H,temporaryProof:le}):null}}class ee{constructor(g){var _,T,H,le,Ye,mt;const Gt=(0,C.zd)((0,C.pd)(g)),Zt=null!==(_=Gt.apiKey)&&void 0!==_?_:null,An=null!==(T=Gt.oobCode)&&void 0!==T?T:null,Br=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(H=Gt.mode)&&void 0!==H?H:null);ue(Zt&&An&&Br,"argument-error"),this.apiKey=Zt,this.operation=Br,this.code=An,this.continueUrl=null!==(le=Gt.continueUrl)&&void 0!==le?le:null,this.languageCode=null!==(Ye=Gt.languageCode)&&void 0!==Ye?Ye:null,this.tenantId=null!==(mt=Gt.tenantId)&&void 0!==mt?mt:null}static parseLink(g){const _=function(w){const g=(0,C.zd)((0,C.pd)(w)).link,_=g?(0,C.zd)((0,C.pd)(g)).deep_link_id:null,T=(0,C.zd)((0,C.pd)(w)).deep_link_id;return(T?(0,C.zd)((0,C.pd)(T)).link:null)||T||_||g||w}(g);try{return new ee(_)}catch(T){return null}}}let z=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,T){return to._fromEmailAndPassword(_,T)}static credentialWithLink(_,T){const H=ee.parseLink(T);return ue(H,"argument-error"),to._fromEmailAndCode(_,H.code,H.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class S{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class N extends S{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class L extends N{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ue("providerId"in _&&"signInMethod"in _,"argument-error"),Ze._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ue(g.idToken||g.accessToken,"argument-error"),Ze._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return L.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return L.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:T,oauthTokenSecret:H,pendingToken:le,nonce:Ye,providerId:mt}=g;if(!T&&!H&&!_&&!le||!mt)return null;try{return new L(mt)._credential({idToken:_,accessToken:T,nonce:Ye,pendingToken:le})}catch(Gt){return null}}}let V=(()=>{class w extends N{constructor(){super("facebook.com")}static credential(_){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(T){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),se=(()=>{class w extends N{constructor(){super("google.com"),this.addScope("profile")}static credential(_,T){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:T})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:T,oauthAccessToken:H}=_;if(!T&&!H)return null;try{return w.credential(T,H)}catch(le){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ye=(()=>{class w extends N{constructor(){super("github.com")}static credential(_){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(T){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class be extends Mr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return F(g,this.buildRequest())}_linkToIdToken(g,_){const T=this.buildRequest();return T.idToken=_,F(g,T)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,F(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:H,pendingToken:le}=_;return T&&H&&le&&T===H?new be(T,le):null}static _create(g,_){return new be(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class j extends S{constructor(g){ue(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return j.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return j.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=be.fromJSON(g);return ue(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:T}=g;if(!_||!T)return null;try{return be._create(T,_)}catch(H){return null}}}let pe=(()=>{class w extends N{constructor(){super("twitter.com")}static credential(_,T){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:T})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:T,oauthTokenSecret:H}=_;if(!T||!H)return null;try{return w.credential(T,H)}catch(le){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Te(w,g){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signUp",Rt(w,g))})).apply(this,arguments)}class yt{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,T,H=!1){return(0,o.Z)(function*(){const le=yield Xt._fromIdTokenResponse(g,T,H),Ye=Ot(T);return new yt({user:le,providerId:Ye,_tokenResponse:T,operationType:_})})()}static _forOperation(g,_,T){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const H=Ot(T);return new yt({user:g,providerId:H,_tokenResponse:T,operationType:_})})()}}function Ot(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Lt(w){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,o.Z)(function*(w){var g;const _=lr(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new yt({user:_.currentUser,providerId:null,operationType:"signIn"});const T=yield Te(_,{returnSecureToken:!0}),H=yield yt._fromIdTokenResponse(_,"signIn",T,!0);return yield _._updateCurrentUser(H.user),H})).apply(this,arguments)}class ln extends C.ZR{constructor(g,_,T,H){var le;super(_.code,_.message),this.operationType=T,this.user=H,Object.setPrototypeOf(this,ln.prototype),this.customData={appName:g.name,tenantId:null!==(le=g.tenantId)&&void 0!==le?le:void 0,_serverResponse:_.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,_,T,H){return new ln(g,_,T,H)}}function nr(w,g,_,T){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(le=>{throw"auth/multi-factor-auth-required"===le.code?ln._fromErrorAndOperation(w,le,g,T):le})}function Pr(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function On(w,g){return To.apply(this,arguments)}function To(){return(To=(0,o.Z)(function*(w,g){const _=(0,C.m9)(w);yield $o(!0,_,g);const{providerUserInfo:T}=yield en(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),H=Pr(T||[]);return _.providerData=_.providerData.filter(le=>H.has(le.providerId)),H.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ro(w,g){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,o.Z)(function*(w,g,_=!1){const T=yield Ft(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return yt._forOperation(w,"link",T)})).apply(this,arguments)}function $o(w,g,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,o.Z)(function*(w,g,_){yield Zn(g);const H=!1===w?"provider-already-linked":"no-such-provider";ue(Pr(g.providerData).has(_)===w,g.auth,H)})).apply(this,arguments)}function pa(w,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,o.Z)(function*(w,g,_=!1){const{auth:T}=w,H="reauthenticate";try{const le=yield Ft(w,nr(T,H,g,w),_);ue(le.idToken,T,"internal-error");const Ye=xn(le.idToken);ue(Ye,T,"internal-error");const{sub:mt}=Ye;return ue(w.uid===mt,T,"user-mismatch"),yt._forOperation(w,H,le)}catch(le){throw"auth/user-not-found"===(null==le?void 0:le.code)&&Se(T,"user-mismatch"),le}})).apply(this,arguments)}function fc(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,o.Z)(function*(w,g,_=!1){const T="signIn",H=yield nr(w,T,g),le=yield yt._fromIdTokenResponse(w,T,H);return _||(yield w._updateCurrentUser(le.user)),le})).apply(this,arguments)}function So(w,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,o.Z)(function*(w,g){return fc(lr(w),g)})).apply(this,arguments)}function bl(w,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,o.Z)(function*(w,g){const _=(0,C.m9)(w);return yield $o(!1,_,g.providerId),ro(_,g)})).apply(this,arguments)}function wl(w,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,o.Z)(function*(w,g){return pa((0,C.m9)(w),g)})).apply(this,arguments)}function pc(w,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,o.Z)(function*(w,g){return Pn(w,"POST","/v1/accounts:signInWithCustomToken",Rt(w,g))})).apply(this,arguments)}function cn(w,g){return El.apply(this,arguments)}function El(){return(El=(0,o.Z)(function*(w,g){const _=lr(w),T=yield pc(_,{token:g,returnSecureToken:!0}),H=yield yt._fromIdTokenResponse(_,"signIn",T);return yield _._updateCurrentUser(H.user),H})).apply(this,arguments)}class Ko{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Va._fromServerResponse(g,_):Se(g,"internal-error")}}class Va extends Ko{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Va(_)}}function Cl(w,g,_){var T;ue((null===(T=_.url)||void 0===T?void 0:T.length)>0,w,"invalid-continue-uri"),ue(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ue(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ue(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function ou(w,g,_){return Il.apply(this,arguments)}function Il(){return(Il=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w),H={requestType:"PASSWORD_RESET",email:g};_&&Cl(T,H,_),yield ts(T,H)})).apply(this,arguments)}function id(w,g,_){return _t.apply(this,arguments)}function _t(){return(_t=(0,o.Z)(function*(w,g,_){yield vi((0,C.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Yn(w,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,o.Z)(function*(w,g){yield qr((0,C.m9)(w),{oobCode:g})})).apply(this,arguments)}function Kr(w,g){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,o.Z)(function*(w,g){const _=(0,C.m9)(w),T=yield vi(_,{oobCode:g}),H=T.requestType;switch(ue(H,_,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(T.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(T.mfaInfo,_,"internal-error");default:ue(T.email,_,"internal-error")}let le=null;return T.mfaInfo&&(le=Ko._fromServerResponse(lr(_),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:le},operation:H}})).apply(this,arguments)}function Yo(w,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,o.Z)(function*(w,g){const{data:_}=yield Kr((0,C.m9)(w),g);return _.email})).apply(this,arguments)}function au(w,g,_){return ga.apply(this,arguments)}function ga(){return(ga=(0,o.Z)(function*(w,g,_){const T=lr(w),H=yield Te(T,{returnSecureToken:!0,email:g,password:_}),le=yield yt._fromIdTokenResponse(T,"signIn",H);return yield T._updateCurrentUser(le.user),le})).apply(this,arguments)}function im(w,g,_){return So((0,C.m9)(w),z.credential(g,_))}function Fh(w,g,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w),H={requestType:"EMAIL_SIGNIN",email:g};ue(_.handleCodeInApp,T,"argument-error"),_&&Cl(T,H,_),yield eo(T,H)})).apply(this,arguments)}function Sl(w,g){const _=ee.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Fi(w,g,_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w),H=z.credentialWithLink(g,_||W());return ue(H._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),So(T,H)})).apply(this,arguments)}function Dl(w,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:createAuthUri",Rt(w,g))})).apply(this,arguments)}function io(w,g){return Al.apply(this,arguments)}function Al(){return(Al=(0,o.Z)(function*(w,g){const T={identifier:g,continueUri:ce()?W():"http://localhost"},{signinMethods:H}=yield Dl((0,C.m9)(w),T);return H||[]})).apply(this,arguments)}function sd(w,g){return xl.apply(this,arguments)}function xl(){return(xl=(0,o.Z)(function*(w,g){const _=(0,C.m9)(w),H={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Cl(_.auth,H,g);const{email:le}=yield ei(_.auth,H);le!==w.email&&(yield w.reload())})).apply(this,arguments)}function Lh(w,g,_){return _a.apply(this,arguments)}function _a(){return(_a=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w),le={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Cl(T.auth,le,_);const{email:Ye}=yield fi(T.auth,le);Ye!==w.email&&(yield w.reload())})).apply(this,arguments)}function mc(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,o.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ml(w,g){return gc.apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const T=(0,C.m9)(w),le={idToken:yield T.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Ye=yield Ft(T,mc(T.auth,le));T.displayName=Ye.displayName||null,T.photoURL=Ye.photoUrl||null;const mt=T.providerData.find(({providerId:Gt})=>"password"===Gt);mt&&(mt.displayName=T.displayName,mt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Ye)})).apply(this,arguments)}function od(w,g){return _c((0,C.m9)(w),g,null)}function lu(w,g){return _c((0,C.m9)(w),null,g)}function _c(w,g,_){return kl.apply(this,arguments)}function kl(){return(kl=(0,o.Z)(function*(w,g,_){const{auth:T}=w,le={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(le.email=g),_&&(le.password=_);const Ye=yield Ft(w,Vs(T,le));yield w._updateTokensIfNecessary(Ye,!0)})).apply(this,arguments)}class ya{constructor(g,_,T={}){this.isNewUser=g,this.providerId=_,this.profile=T}}class yc extends ya{constructor(g,_,T,H){super(g,_,T),this.username=H}}class sm extends ya{constructor(g,_){super(g,"facebook.com",_)}}class uu extends yc{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Nr extends ya{constructor(g,_){super(g,"google.com",_)}}class Xo extends yc{constructor(g,_,T){super(g,"twitter.com",_,T)}}function Fr(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,_;if(!w)return null;const{providerId:T}=w,H=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},le=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!T&&(null==w?void 0:w.idToken)){const Ye=null===(_=null===(g=xn(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Ye)return new ya(le,"anonymous"!==Ye&&"custom"!==Ye?Ye:null)}if(!T)return null;switch(T){case"facebook.com":return new sm(le,H);case"github.com":return new uu(le,H);case"google.com":return new Nr(le,H);case"twitter.com":return new Xo(le,H,w.screenName||null);case"custom":case"anonymous":return new ya(le,null);default:return new ya(le,T,H)}}(_)}class Jo{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Jo("enroll",g)}static _fromMfaPendingCredential(g){return new Jo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,T;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Jo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(T=g.multiFactorSession)||void 0===T?void 0:T.idToken)return Jo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class fu{constructor(g,_,T){this.session=g,this.hints=_,this.signInResolver=T}static _fromError(g,_){const T=lr(g),H=_.customData._serverResponse,le=(H.mfaInfo||[]).map(mt=>Ko._fromServerResponse(T,mt));ue(H.mfaPendingCredential,T,"internal-error");const Ye=Jo._fromMfaPendingCredential(H.mfaPendingCredential);return new fu(Ye,le,function(){var mt=(0,o.Z)(function*(Gt){const Zt=yield Gt._process(T,Ye);delete H.mfaInfo,delete H.mfaPendingCredential;const An=Object.assign(Object.assign({},H),{idToken:Zt.idToken,refreshToken:Zt.refreshToken});switch(_.operationType){case"signIn":const Br=yield yt._fromIdTokenResponse(T,_.operationType,An);return yield T._updateCurrentUser(Br.user),Br;case"reauthenticate":return ue(_.user,T,"internal-error"),yt._forOperation(_.user,_.operationType,An);default:Se(T,"internal-error")}});return function(Gt){return mt.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,o.Z)(function*(){return _.signInResolver(g)})()}}function ad(w,g){var _;const T=(0,C.m9)(w),H=g;return ue(g.customData.operationType,T,"argument-error"),ue(null===(_=H.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,T,"argument-error"),fu._fromError(T,H)}function zr(w,g){return dn(w,"POST","/v2/accounts/mfaEnrollment:start",Rt(w,g))}class ld{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(T=>Ko._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new ld(g)}getSession(){var g=this;return(0,o.Z)(function*(){return Jo._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var T=this;return(0,o.Z)(function*(){const H=g,le=yield T.getSession(),Ye=yield Ft(T.user,H._process(T.user.auth,le,_));return yield T.user._updateTokensIfNecessary(Ye),T.user.reload()})()}unenroll(g){var _=this;return(0,o.Z)(function*(){const T="string"==typeof g?g:g.uid,H=yield _.user.getIdToken(),le=yield Ft(_.user,function(w,g){return dn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(w,g))}(_.user.auth,{idToken:H,mfaEnrollmentId:T}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Ye})=>Ye!==T),yield _.user._updateTokensIfNecessary(le);try{yield _.user.reload()}catch(Ye){if("auth/user-token-expired"!==Ye.code)throw Ye}})()}}const Ha=new WeakMap;function vc(w){const g=(0,C.m9)(w);return Ha.has(g)||Ha.set(g,ld._fromUser(g)),Ha.get(g)}const za="__sak";class bc{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const xt=(()=>{class w extends bc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,T)=>this.onStorageEvent(_,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,C.z$)();return Oe(w)||Dn(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=zt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const T of Object.keys(this.listeners)){const H=this.storage.getItem(T),le=this.localCache[T];H!==le&&_(T,le,H)}}onStorageEvent(_,T=!1){if(!_.key)return void this.forAllChangedKeys((mt,Gt,Zt)=>{this.notifyListeners(mt,Zt)});const H=_.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const mt=this.storage.getItem(H);if(_.newValue!==mt)null!==_.newValue?this.storage.setItem(H,_.newValue):this.storage.removeItem(H);else if(this.localCache[H]===_.newValue&&!T)return}const le=()=>{const mt=this.storage.getItem(H);!T&&this.localCache[H]===mt||this.notifyListeners(H,mt)},Ye=this.storage.getItem(H);(0,C.w1)()&&10===document.documentMode&&Ye!==_.newValue&&_.newValue!==_.oldValue?setTimeout(le,10):le()}notifyListeners(_,T){this.localCache[_]=T;const H=this.listeners[_];if(H)for(const le of Array.from(H))le(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,T,H)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:T,newValue:H}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(T)}_removeListener(_,T){this.listeners[_]&&(this.listeners[_].delete(T),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,T){var H=()=>super._set,le=this;return(0,o.Z)(function*(){yield H().call(le,_,T),le.localCache[_]=JSON.stringify(T)})()}_get(_){var T=()=>super._get,H=this;return(0,o.Z)(function*(){const le=yield T().call(H,_);return H.localCache[_]=JSON.stringify(le),le})()}_remove(_){var T=()=>super._remove,H=this;return(0,o.Z)(function*(){yield T().call(H,_),delete H.localCache[_]})()}}return w.type="LOCAL",w})(),pi=(()=>{class w extends bc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,T){}_removeListener(_,T){}}return w.type="SESSION",w})();let ba=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const T=this.receivers.find(le=>le.isListeningto(_));if(T)return T;const H=new w(_);return this.receivers.push(H),H}isListeningto(_){return this.eventTarget===_}handleEvent(_){var T=this;return(0,o.Z)(function*(){const H=_,{eventId:le,eventType:Ye,data:mt}=H.data,Gt=T.handlersMap[Ye];if(!(null==Gt?void 0:Gt.size))return;H.ports[0].postMessage({status:"ack",eventId:le,eventType:Ye});const Zt=Array.from(Gt).map(function(){var Br=(0,o.Z)(function*(Sa){return Sa(H.origin,mt)});return function(Sa){return Br.apply(this,arguments)}}()),An=yield function(w){return Promise.all(w.map(function(){var g=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(T){return{fulfilled:!1,reason:T}}});return function(_){return g.apply(this,arguments)}}()))}(Zt);H.ports[0].postMessage({status:"done",eventId:le,eventType:Ye,response:An})})()}_subscribe(_,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(T)}_unsubscribe(_,T){this.handlersMap[_]&&T&&this.handlersMap[_].delete(T),(!T||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Nl(w="",g=10){let _="";for(let T=0;T<g;T++)_+=Math.floor(10*Math.random());return w+_}class Ga{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,T=50){var H=this;return(0,o.Z)(function*(){const le="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!le)throw new Error("connection_unavailable");let Ye,mt;return new Promise((Gt,Zt)=>{const An=Nl("",20);le.port1.start();const Br=setTimeout(()=>{Zt(new Error("unsupported_event"))},T);mt={messageChannel:le,onMessage(Sa){const Yl=Sa;if(Yl.data.eventId===An)switch(Yl.data.status){case"ack":clearTimeout(Br),Ye=setTimeout(()=>{Zt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ye),Gt(Yl.data.response);break;default:clearTimeout(Br),clearTimeout(Ye),Zt(new Error("invalid_response"))}}},H.handlers.add(mt),le.port1.addEventListener("message",mt.onMessage),H.target.postMessage({eventType:g,eventId:An,data:_},[le.port2])}).finally(()=>{mt&&H.removeMessageHandler(mt)})})()}}function Gr(){return window}function wc(){return void 0!==Gr().WorkerGlobalScope&&"function"==typeof Gr().importScripts}function Bt(){return(Bt=(0,o.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const ta="firebaseLocalStorageDb",dr="firebaseLocalStorage",Ll="fbase_key";class zs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Cc(w,g){return w.transaction([dr],g?"readwrite":"readonly").objectStore(dr)}function Bl(){const w=indexedDB.open(ta,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const T=w.result;try{T.createObjectStore(dr,{keyPath:Ll})}catch(H){_(H)}}),w.addEventListener("success",(0,o.Z)(function*(){const T=w.result;T.objectStoreNames.contains(dr)?g(T):(T.close(),yield function(){const w=indexedDB.deleteDatabase(ta);return new zs(w).toPromise()}(),g(yield Bl()))}))})}function wa(w,g,_){return so.apply(this,arguments)}function so(){return(so=(0,o.Z)(function*(w,g,_){const T=Cc(w,!0).put({[Ll]:g,value:_});return new zs(T).toPromise()})).apply(this,arguments)}function Ao(){return(Ao=(0,o.Z)(function*(w,g){const _=Cc(w,!1).get(g),T=yield new zs(_).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Li(w,g){const _=Cc(w,!0).delete(g);return new zs(_).toPromise()}const Yr=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield Bl()),_.db})()}_withRetries(_){var T=this;return(0,o.Z)(function*(){let H=0;for(;;)try{const le=yield T._openDb();return yield _(le)}catch(le){if(H++>3)throw le;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return wc()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=ba._getInstance(wc()?self:null),_.receiver._subscribe("keyChanged",function(){var T=(0,o.Z)(function*(H,le){return{keyProcessed:(yield _._poll()).includes(le.key)}});return function(H,le){return T.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var T=(0,o.Z)(function*(H,le){return["keyChanged"]});return function(H,le){return T.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var T,H;if(_.activeServiceWorker=yield function(){return Bt.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ga(_.activeServiceWorker);const le=yield _.sender._send("ping",{},800);!le||(null===(T=le[0])||void 0===T?void 0:T.fulfilled)&&(null===(H=le[0])||void 0===H?void 0:H.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var T=this;return(0,o.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:_},T.serviceWorkerReceiverAvailable?800:50)}catch(H){}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Bl();return yield wa(_,za,"1"),yield Li(_,za),!0}catch(_){}return!1})()}_withPendingWrite(_){var T=this;return(0,o.Z)(function*(){T.pendingWrites++;try{yield _()}finally{T.pendingWrites--}})()}_set(_,T){var H=this;return(0,o.Z)(function*(){return H._withPendingWrite((0,o.Z)(function*(){return yield H._withRetries(le=>wa(le,_,T)),H.localCache[_]=T,H.notifyServiceWorker(_)}))})()}_get(_){var T=this;return(0,o.Z)(function*(){const H=yield T._withRetries(le=>function(w,g){return Ao.apply(this,arguments)}(le,_));return T.localCache[_]=H,H})()}_remove(_){var T=this;return(0,o.Z)(function*(){return T._withPendingWrite((0,o.Z)(function*(){return yield T._withRetries(H=>Li(H,_)),delete T.localCache[_],T.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const T=yield _._withRetries(Ye=>{const mt=Cc(Ye,!1).getAll();return new zs(mt).toPromise()});if(!T)return[];if(0!==_.pendingWrites)return[];const H=[],le=new Set;for(const{fbase_key:Ye,value:mt}of T)le.add(Ye),JSON.stringify(_.localCache[Ye])!==JSON.stringify(mt)&&(_.notifyListeners(Ye,mt),H.push(Ye));for(const Ye of Object.keys(_.localCache))_.localCache[Ye]&&!le.has(Ye)&&(_.notifyListeners(Ye,null),H.push(Ye));return H})()}notifyListeners(_,T){this.localCache[_]=T;const H=this.listeners[_];if(H)for(const le of Array.from(H))le(T)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(T)}_removeListener(_,T){this.listeners[_]&&(this.listeners[_].delete(T),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ea(w,g){return dn(w,"POST","/v2/accounts/mfaSignIn:start",Rt(w,g))}function br(){return(br=(0,o.Z)(function*(w){return(yield dn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xo(w){return new Promise((g,_)=>{const T=document.createElement("script");T.setAttribute("src",w),T.onload=g,T.onerror=H=>{const le=De("internal-error");le.customData=H,_(le)},T.type="text/javascript",T.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(T)})}function fs(w){return`__${w}${Math.floor(1e6*Math.random())}`}const gr=1e12;class Cs{constructor(g){this.auth=g,this.counter=gr,this._widgets=new Map}render(g,_){const T=this.counter;return this._widgets.set(T,new Wa(g,this.auth.name,_||{})),this.counter++,T}reset(g){var _;const T=g||gr;null===(_=this._widgets.get(T))||void 0===_||_.delete(),this._widgets.delete(T)}getResponse(g){var _;return(null===(_=this._widgets.get(g||gr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,o.Z)(function*(){var T;return null===(T=_._widgets.get(g||gr))||void 0===T||T.execute(),""})()}}class Wa{constructor(g,_,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const H="string"==typeof g?document.getElementById(g):g;ue(H,"argument-error",{appName:_}),this.container=H,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<50;T++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(T){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(T){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qa=fs("rcb"),K_=new rt(3e4,6e4);class Y_{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gr().grecaptcha}load(g,_=""){return ue((w=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Gr().grecaptcha):new Promise((T,H)=>{const le=Gr().setTimeout(()=>{H(De(g,"network-request-failed"))},K_.get());Gr()[qa]=()=>{Gr().clearTimeout(le),delete Gr()[qa];const mt=Gr().grecaptcha;if(!mt)return void H(De(g,"internal-error"));const Gt=mt.render;mt.render=(Zt,An)=>{const Br=Gt(Zt,An);return this.counter++,Br},this.hostLanguage=_,T(mt)},xo(`https://www.google.com/recaptcha/api.js??${(0,C.xO)({onload:qa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(le),H(De(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Gr().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mi{load(g){return(0,o.Z)(function*(){return new Cs(g)})()}clearedOneInstance(){}}const pu="recaptcha",ns={theme:"light",type:"image"};class ud{constructor(g,_=Object.assign({},ns),T){this.parameters=_,this.type=pu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lr(T),this.isInvisible="invisible"===this.parameters.size,ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const H="string"==typeof g?document.getElementById(g):g;ue(H,this.auth,"argument-error"),this.container=H,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mi:new Y_,this.validateStartingState()}verify(){var g=this;return(0,o.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(_)||new Promise(le=>{const Ye=mt=>{!mt||(g.tokenChangeListeners.delete(Ye),le(mt))};g.tokenChangeListeners.add(Ye),g.isInvisible&&T.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(T=>T(_)),"function"==typeof g)g(_);else if("string"==typeof g){const T=Gr()[g];"function"==typeof T&&T(_)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,o.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const T=document.createElement("div");_.appendChild(T),_=T}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,o.Z)(function*(){ue(ce()&&!wc(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(w){return br.apply(this,arguments)}(g.auth);ue(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Za{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=wi._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function jl(w,g,_){return dd.apply(this,arguments)}function dd(){return(dd=(0,o.Z)(function*(w,g,_){const T=lr(w),H=yield na(T,g,(0,C.m9)(_));return new Za(H,le=>So(T,le))})).apply(this,arguments)}function Hh(w,g,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w);yield $o(!1,T,"phone");const H=yield na(T.auth,g,(0,C.m9)(_));return new Za(H,le=>bl(T,le))})).apply(this,arguments)}function lo(w,g,_){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w),H=yield na(T.auth,g,(0,C.m9)(_));return new Za(H,le=>wl(T,le))})).apply(this,arguments)}function na(w,g,_){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,o.Z)(function*(w,g,_){var T;const H=yield _.verify();try{let le;if(ue("string"==typeof H,w,"argument-error"),ue(_.type===pu,w,"argument-error"),le="string"==typeof g?{phoneNumber:g}:g,"session"in le){const Ye=le.session;if("phoneNumber"in le)return ue("enroll"===Ye.type,w,"internal-error"),(yield zr(w,{idToken:Ye.credential,phoneEnrollmentInfo:{phoneNumber:le.phoneNumber,recaptchaToken:H}})).phoneSessionInfo.sessionInfo;{ue("signin"===Ye.type,w,"internal-error");const mt=(null===(T=le.multiFactorHint)||void 0===T?void 0:T.uid)||le.multiFactorUid;return ue(mt,w,"missing-multi-factor-info"),(yield Ea(w,{mfaPendingCredential:Ye.credential,mfaEnrollmentId:mt,phoneSignInInfo:{recaptchaToken:H}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ye}=yield tt(w,{phoneNumber:le.phoneNumber,recaptchaToken:H});return Ye}}finally{_._reset()}})).apply(this,arguments)}function mu(w,g){return gu.apply(this,arguments)}function gu(){return(gu=(0,o.Z)(function*(w,g){yield ro((0,C.m9)(w),g)})).apply(this,arguments)}let _u=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=lr(_)}verifyPhoneNumber(_,T){return na(this.auth,_,(0,C.m9)(T))}static credential(_,T){return wi._fromVerification(_,T)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:T,temporaryProof:H}=_;return T&&H?wi._fromTokenResponse(T,H):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ra(w,g){return g?ne(g):(ue(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class zl extends Mr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return F(g,this._buildIdpRequest())}_linkToIdToken(g,_){return F(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return F(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function In(w){return fc(w.auth,new zl(w),w.bypassAuthState)}function qi(w){const{auth:g,user:_}=w;return ue(_,g,"internal-error"),pa(_,new zl(w),w.bypassAuthState)}function co(w){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,o.Z)(function*(w){const{auth:g,user:_}=w;return ue(_,g,"internal-error"),ro(_,new zl(w),w.bypassAuthState)})).apply(this,arguments)}class hd{constructor(g,_,T,H,le=!1){this.auth=g,this.resolver=T,this.user=H,this.bypassAuthState=le,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,o.Z)(function*(T,H){g.pendingPromise={resolve:T,reject:H};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(le){g.reject(le)}});return function(T,H){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,o.Z)(function*(){const{urlResponse:T,sessionId:H,postBody:le,tenantId:Ye,error:mt,type:Gt}=g;if(mt)return void _.reject(mt);const Zt={auth:_.auth,requestUri:T,sessionId:H,tenantId:Ye||void 0,postBody:le||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Gt)(Zt))}catch(An){_.reject(An)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return In;case"linkViaPopup":case"linkViaRedirect":return co;case"reauthViaPopup":case"reauthViaRedirect":return qi;default:Se(this.auth,"internal-error")}}resolve(g){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zh=new rt(2e3,1e4);function cm(w,g,_){return yu.apply(this,arguments)}function yu(){return(yu=(0,o.Z)(function*(w,g,_){const T=lr(w);Ne(w,g,S);const H=ra(T,_);return new Ic(T,"signInViaPopup",g,H).executeNotNull()})).apply(this,arguments)}function uo(w,g,_){return ko.apply(this,arguments)}function ko(){return(ko=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w);Ne(T.auth,g,S);const H=ra(T.auth,_);return new Ic(T.auth,"reauthViaPopup",g,H,T).executeNotNull()})).apply(this,arguments)}function vu(w,g,_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w);Ne(T.auth,g,S);const H=ra(T.auth,_);return new Ic(T.auth,"linkViaPopup",g,H,T).executeNotNull()})).apply(this,arguments)}let Ic=(()=>{class w extends hd{constructor(_,T,H,le,Ye){super(_,T,le,Ye),this.provider=H,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const T=yield _.execute();return ue(T,_.auth,"internal-error"),T})()}onExecution(){var _=this;return(0,o.Z)(function*(){q(1===_.filter.length,"Popup operations only handle one event");const T=Nl();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],T),_.authWindow.associatedEvent=T,_.resolver._originValidation(_.auth).catch(H=>{_.reject(H)}),_.resolver._isIframeWebStorageSupported(_.auth,H=>{H||_.reject(De(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var T,H;this.pollId=(null===(H=null===(T=this.authWindow)||void 0===T?void 0:T.window)||void 0===H?void 0:H.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,zh.get())};_()}}return w.currentPopupAction=null,w})();const ms=new Map;class qs extends hd{constructor(g,_,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,o.Z)(function*(){let T=ms.get(_.auth._key());if(!T){try{const le=(yield function(w,g){return Ka.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;T=()=>Promise.resolve(le)}catch(H){T=()=>Promise.reject(H)}ms.set(_.auth._key(),T)}return _.bypassAuthState||ms.set(_.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,T=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(T,g);if("unknown"!==g.type){if(g.eventId){const H=yield T.auth._redirectUserForId(g.eventId);if(H)return T.user=H,_().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function Ka(){return(Ka=(0,o.Z)(function*(w,g){const _=P(g),T=A(w);if(!(yield T._isAvailable()))return!1;const H="true"===(yield T._get(_));return yield T._remove(_),H})).apply(this,arguments)}function $l(w,g){return bu.apply(this,arguments)}function bu(){return(bu=(0,o.Z)(function*(w,g){return A(w)._set(P(g),"true")})).apply(this,arguments)}function pd(){ms.clear()}function wu(w,g){ms.set(w._key(),g)}function A(w){return ne(w._redirectPersistence)}function P(w){return on("pendingRedirect",w.config.apiKey,w.name)}function Z(w,g,_){return function(w,g,_){return ke.apply(this,arguments)}(w,g,_)}function ke(){return(ke=(0,o.Z)(function*(w,g,_){const T=lr(w);Ne(w,g,S);const H=ra(T,_);return yield $l(H,T),H._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function et(w,g,_){return function(w,g,_){return Mt.apply(this,arguments)}(w,g,_)}function Mt(){return(Mt=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w);Ne(T.auth,g,S);const H=ra(T.auth,_);yield $l(H,T.auth);const le=yield Is(T);return H._openRedirect(T.auth,g,"reauthViaRedirect",le)})).apply(this,arguments)}function pn(w,g,_){return function(w,g,_){return Wn.apply(this,arguments)}(w,g,_)}function Wn(){return(Wn=(0,o.Z)(function*(w,g,_){const T=(0,C.m9)(w);Ne(T.auth,g,S);const H=ra(T.auth,_);yield $o(!1,T,g.providerId),yield $l(H,T.auth);const le=yield Is(T);return H._openRedirect(T.auth,g,"linkViaRedirect",le)})).apply(this,arguments)}function En(w,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,o.Z)(function*(w,g){return yield lr(w)._initializationPromise,hr(w,g,!1)})).apply(this,arguments)}function hr(w,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,o.Z)(function*(w,g,_=!1){const T=lr(w),H=ra(T,g),Ye=yield new qs(T,H,_).execute();return Ye&&!_&&(delete Ye.user._redirectEventId,yield T._persistUserIfCurrent(Ye.user),yield T._setRedirectUser(null,g)),Ye})).apply(this,arguments)}function Is(w){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,o.Z)(function*(w){const g=Nl(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ts{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(_=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return md(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var T;if(g.error&&!md(g)){const H=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";_.onError(De(this.auth,H))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const T=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ia(g))}saveEventToCache(g){this.cachedEventUids.add(Ia(g)),this.lastProcessedEventTime=Date.now()}}function Ia(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function md({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function um(w){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,o.Z)(function*(w,g={}){return dn(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Qa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X_=/^https?/;function gd(){return(gd=(0,o.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield um(w);for(const _ of g)try{if(J_(_))return}catch(T){}Se(w,"unauthorized-domain")})).apply(this,arguments)}function J_(w){const g=W(),{protocol:_,hostname:T}=new URL(g);if(w.startsWith("chrome-extension://")){const Ye=new URL(w);return""===Ye.hostname&&""===T?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Ye.hostname===T}if(!X_.test(_))return!1;if(Qa.test(w))return T===w;const H=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+H+"|"+H+")$","i").test(T)}const nw=new rt(3e4,6e4);function Gh(){const w=Gr().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Tc=null;function fo(w){return Tc=Tc||function(w){return new Promise((g,_)=>{var T,H,le;function Ye(){Gh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Gh(),_(De(w,"network-request-failed"))},timeout:nw.get()})}if(null===(H=null===(T=Gr().gapi)||void 0===T?void 0:T.iframes)||void 0===H?void 0:H.Iframe)g(gapi.iframes.getContext());else{if(!(null===(le=Gr().gapi)||void 0===le?void 0:le.load)){const mt=fs("iframefcb");return Gr()[mt]=()=>{gapi.load?Ye():_(De(w,"network-request-failed"))},xo(`https://apis.google.com/js/api.js?onload=${mt}`).catch(Gt=>_(Gt))}Ye()}}).catch(g=>{throw Tc=null,g})}(w),Tc}const Xa=new rt(5e3,15e3),ey={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eu(w){const g=w.config;ue(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?dt(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,T={apiKey:g.apiKey,appName:w.name,v:b.SDK_VERSION},H=Sc.get(w.config.apiHost);H&&(T.eid=H);const le=w._getFrameworks();return le.length&&(T.fw=le.join(",")),`${_}?${(0,C.xO)(T).slice(1)}`}function ql(){return ql=(0,o.Z)(function*(w){const g=yield fo(w),_=Gr().gapi;return ue(_,w,"internal-error"),g.open({where:document.body,url:Eu(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ey,dontclear:!0},T=>new Promise(function(){var H=(0,o.Z)(function*(le,Ye){yield T.restyle({setHideOnLeave:!1});const mt=De(w,"network-request-failed"),Gt=Gr().setTimeout(()=>{Ye(mt)},Xa.get());function Zt(){Gr().clearTimeout(Gt),le(T)}T.ping(Zt).then(Zt,()=>{Ye(mt)})});return function(le,Ye){return H.apply(this,arguments)}}()))}),ql.apply(this,arguments)}const qh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hm{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Zl(w,g,_,T,H,le){ue(w.config.authDomain,w,"auth-domain-config-required"),ue(w.config.apiKey,w,"invalid-api-key");const Ye={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:T,v:b.SDK_VERSION,eventId:H};if(g instanceof S){g.setDefaultLanguage(w.languageCode),Ye.providerId=g.providerId||"",(0,C.xb)(g.getCustomParameters())||(Ye.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Gt,Zt]of Object.entries(le||{}))Ye[Gt]=Zt}if(g instanceof N){const Gt=g.getScopes().filter(Zt=>""!==Zt);Gt.length>0&&(Ye.scopes=Gt.join(","))}w.tenantId&&(Ye.tid=w.tenantId);const mt=Ye;for(const Gt of Object.keys(mt))void 0===mt[Gt]&&delete mt[Gt];return`${function({config:w}){return w.emulator?dt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,C.xO)(mt).slice(1)}`}const Tu="webStorageSupport",Yh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pi,this._completeRedirectFn=hr,this._overrideRedirectResult=wu}_openPopup(g,_,T,H){var le=this;return(0,o.Z)(function*(){var Ye;q(null===(Ye=le.eventManagers[g._key()])||void 0===Ye?void 0:Ye.manager,"_initialize() not called before _openPopup()");const mt=Zl(g,_,T,W(),H);return function(w,g,_,T=500,H=600){const le=Math.max((window.screen.availHeight-H)/2,0).toString(),Ye=Math.max((window.screen.availWidth-T)/2,0).toString();let mt="";const Gt=Object.assign(Object.assign({},qh),{width:T.toString(),height:H.toString(),top:le,left:Ye}),Zt=(0,C.z$)().toLowerCase();_&&(mt=ct(Zt)?"_blank":_),Be(Zt)&&(g=g||"http://localhost",Gt.scrollbars="yes");const An=Object.entries(Gt).reduce((Sa,[Yl,Da])=>`${Sa}${Yl}=${Da},`,"");if(function(w=(0,C.z$)()){var g;return Dn(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Zt)&&"_self"!==mt)return function(w,g){const _=document.createElement("a");_.href=w,_.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(T)}(g||"",mt),new hm(null);const Br=window.open(g||"",mt,An);ue(Br,w,"popup-blocked");try{Br.focus()}catch(Sa){}return new hm(Br)}(g,mt,Nl())})()}_openRedirect(g,_,T,H){var le=this;return(0,o.Z)(function*(){return yield le._originValidation(g),w=Zl(g,_,T,W(),H),Gr().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:H,promise:le}=this.eventManagers[_];return H?Promise.resolve(H):(q(le,"If manager is not set, promise should be"),le)}const T=this.initAndGetManager(g);return this.eventManagers[_]={promise:T},T.catch(()=>{delete this.eventManagers[_]}),T}initAndGetManager(g){var _=this;return(0,o.Z)(function*(){const T=yield function(w){return ql.apply(this,arguments)}(g),H=new Ts(g);return T.register("authEvent",le=>(ue(null==le?void 0:le.authEvent,g,"invalid-auth-event"),{status:H.onEvent(le.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:H},_.iframes[g._key()]=T,H})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Tu,{type:Tu},H=>{var le;const Ye=null===(le=null==H?void 0:H[0])||void 0===le?void 0:le[Tu];void 0!==Ye&&_(!!Ye),Se(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(w){return gd.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return zt()||Oe()||Dn()}};class Ac extends class{constructor(g){this.factorId=g}_process(g,_,T){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,T);case"signin":return this._finalizeSignIn(g,_.credential);default:return Me("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ac(g)}_finalizeEnroll(g,_,T){return function(w,g){return dn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(w,g))}(g,{idToken:_,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(w,g){return dn(w,"POST","/v2/accounts/mfaSignIn:finalize",Rt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ry=(()=>{class w{constructor(){}static assertion(_){return Ac._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var w,pm="@firebase/auth";class gm{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(T=>{var H;g((null===(H=T)||void 0===H?void 0:H.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Kl(w=(0,b.getApp)()){const g=(0,b._getProvider)(w,"auth");return g.isInitialized()?g.getImmediate():function(w,g){const _=(0,b._getProvider)(w,"auth");if(_.isInitialized()){const H=_.getImmediate(),le=_.getOptions();if((0,C.vZ)(le,null!=g?g:{}))return H;Se(H,"already-initialized")}return _.initialize({options:g})}(w,{popupRedirectResolver:Yh,persistence:[Yr,xt,pi]})}w="Browser",(0,b._registerComponent)(new U.wA("auth",(g,{options:_})=>{const T=g.getProvider("app").getImmediate(),H=g.getProvider("heartbeat"),{apiKey:le,authDomain:Ye}=T.options;return((mt,Gt)=>{ue(le&&!le.includes(":"),"invalid-api-key",{appName:mt.name}),ue(!(null==Ye?void 0:Ye.includes(":")),"argument-error",{appName:mt.name});const Zt={apiKey:le,authDomain:Ye,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jr(w)},An=new xr(mt,Gt,Zt);return function(w,g){const _=(null==g?void 0:g.persistence)||[],T=(Array.isArray(_)?_:[_]).map(ne);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(T,null==g?void 0:g.popupRedirectResolver)}(An,_),An})(T,H)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,T)=>{g.getProvider("auth-internal").initialize()})),(0,b._registerComponent)(new U.wA("auth-internal",g=>{const _=lr(g.getProvider("auth").getImmediate());return new gm(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,b.registerVersion)(pm,"0.20.1",void 0),(0,b.registerVersion)(pm,"0.20.1","esm2017")},4213:(St,M,R)=>{"use strict";R.d(M,{BH:()=>Xe,LL:()=>W,ZR:()=>Ee,gQ:()=>vr,zI:()=>Q,hu:()=>C,g5:()=>b,US:()=>U,tV:()=>he,h$:()=>Y,L:()=>re,$s:()=>jr,r3:()=>Rt,Sg:()=>qe,ne:()=>Si,p$:()=>te,vZ:()=>ir,ZB:()=>J,gK:()=>Hn,pd:()=>Xr,m9:()=>Kn,z$:()=>je,GJ:()=>vn,jU:()=>ge,ru:()=>X,d:()=>De,xb:()=>_n,w1:()=>Fe,hl:()=>Me,uI:()=>ze,UG:()=>Ie,Yr:()=>Ue,b$:()=>Se,G6:()=>ue,Mn:()=>Ne,w9:()=>Jt,cI:()=>lt,UI:()=>ar,xO:()=>Rr,zd:()=>Ti,DV:()=>dn,ug:()=>xn,dS:()=>Ri,Pz:()=>Je,Dv:()=>Qn,Wj:()=>or,lb:()=>Fn,eu:()=>q});const C=function(Re,Ae){if(!Re)throw b(Ae)},b=function(Re){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Re)},k=function(Re){const Ae=[];let Le=0;for(let it=0;it<Re.length;it++){let xe=Re.charCodeAt(it);xe<128?Ae[Le++]=xe:xe<2048?(Ae[Le++]=xe>>6|192,Ae[Le++]=63&xe|128):55296==(64512&xe)&&it+1<Re.length&&56320==(64512&Re.charCodeAt(it+1))?(xe=65536+((1023&xe)<<10)+(1023&Re.charCodeAt(++it)),Ae[Le++]=xe>>18|240,Ae[Le++]=xe>>12&63|128,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128):(Ae[Le++]=xe>>12|224,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128)}return Ae},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Re,Ae){if(!Array.isArray(Re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Le=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,it=[];for(let xe=0;xe<Re.length;xe+=3){const $e=Re[xe],ht=xe+1<Re.length,wt=ht?Re[xe+1]:0,Xt=xe+2<Re.length,fn=Xt?Re[xe+2]:0;let Cr=(15&wt)<<2|fn>>6,Ke=63&fn;Xt||(Ke=64,ht||(Cr=64)),it.push(Le[$e>>2],Le[(3&$e)<<4|wt>>4],Le[Cr],Le[Ke])}return it.join("")},encodeString(Re,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Re):this.encodeByteArray(k(Re),Ae)},decodeString(Re,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Re):function(Re){const Ae=[];let Le=0,it=0;for(;Le<Re.length;){const xe=Re[Le++];if(xe<128)Ae[it++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const $e=Re[Le++];Ae[it++]=String.fromCharCode((31&xe)<<6|63&$e)}else if(xe>239&&xe<365){const Xt=((7&xe)<<18|(63&Re[Le++])<<12|(63&Re[Le++])<<6|63&Re[Le++])-65536;Ae[it++]=String.fromCharCode(55296+(Xt>>10)),Ae[it++]=String.fromCharCode(56320+(1023&Xt))}else{const $e=Re[Le++],ht=Re[Le++];Ae[it++]=String.fromCharCode((15&xe)<<12|(63&$e)<<6|63&ht)}}return Ae.join("")}(this.decodeStringToByteArray(Re,Ae))},decodeStringToByteArray(Re,Ae){this.init_();const Le=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,it=[];for(let xe=0;xe<Re.length;){const $e=Le[Re.charAt(xe++)],wt=xe<Re.length?Le[Re.charAt(xe)]:0;++xe;const fn=xe<Re.length?Le[Re.charAt(xe)]:64;++xe;const on=xe<Re.length?Le[Re.charAt(xe)]:64;if(++xe,null==$e||null==wt||null==fn||null==on)throw Error();it.push($e<<2|wt>>4),64!==fn&&(it.push(wt<<4&240|fn>>2),64!==on&&it.push(fn<<6&192|on))}return it},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Re=0;Re<this.ENCODED_VALS.length;Re++)this.byteToCharMap_[Re]=this.ENCODED_VALS.charAt(Re),this.charToByteMap_[this.byteToCharMap_[Re]]=Re,this.byteToCharMapWebSafe_[Re]=this.ENCODED_VALS_WEBSAFE.charAt(Re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Re]]=Re,Re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Re)]=Re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Re)]=Re)}}},Y=function(Re){const Ae=k(Re);return U.encodeByteArray(Ae,!0)},re=function(Re){return Y(Re).replace(/\./g,"")},he=function(Re){try{return U.decodeString(Re,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function te(Re){return J(void 0,Re)}function J(Re,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Re&&(Re={});break;case Array:Re=[];break;default:return Ae}for(const Le in Ae)!Ae.hasOwnProperty(Le)||!we(Le)||(Re[Le]=J(Re[Le],Ae[Le]));return Re}function we(Re){return"__proto__"!==Re}class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,Le)=>{this.resolve=Ae,this.reject=Le})}wrapCallback(Ae){return(Le,it)=>{Le?this.reject(Le):this.resolve(it),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(Le):Ae(Le,it))}}}function qe(Re,Ae){if(Re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const it=Ae||"demo-project",xe=Re.iat||0,$e=Re.sub||Re.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${it}`,aud:it,iat:xe,exp:xe+3600,auth_time:xe,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},Re);return[re(JSON.stringify({alg:"none",type:"JWT"})),re(JSON.stringify(ht)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Re){return!1}}function ge(){return"object"==typeof self&&self.self===self}function X(){const Re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Re&&void 0!==Re.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return je().indexOf("Electron/")>=0}function Fe(){const Re=je();return Re.indexOf("MSIE ")>=0||Re.indexOf("Trident/")>=0}function Ne(){return je().indexOf("MSAppHost/")>=0}function Ue(){return!1}function ue(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){return"object"==typeof indexedDB}function q(){return new Promise((Re,Ae)=>{try{let Le=!0;const it="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(it);xe.onsuccess=()=>{xe.result.close(),Le||self.indexedDB.deleteDatabase(it),Re(!0)},xe.onupgradeneeded=()=>{Le=!1},xe.onerror=()=>{var $e;Ae((null===($e=xe.error)||void 0===$e?void 0:$e.message)||"")}}catch(Le){Ae(Le)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ee extends Error{constructor(Ae,Le,it){super(Le),this.code=Ae,this.customData=it,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}class W{constructor(Ae,Le,it){this.service=Ae,this.serviceName=Le,this.errors=it}create(Ae,...Le){const it=Le[0]||{},xe=`${this.service}/${Ae}`,$e=this.errors[Ae],ht=$e?function(Re,Ae){return Re.replace(Ve,(Le,it)=>{const xe=Ae[it];return null!=xe?String(xe):`<${it}?>`})}($e,it):"Error";return new Ee(xe,`${this.serviceName}: ${ht} (${xe}).`,it)}}const Ve=/\{\$([^}]+)}/g;function lt(Re){return JSON.parse(Re)}function Je(Re){return JSON.stringify(Re)}const rt=function(Re){let Ae={},Le={},it={},xe="";try{const $e=Re.split(".");Ae=lt(he($e[0])||""),Le=lt(he($e[1])||""),xe=$e[2],it=Le.d||{},delete Le.d}catch($e){}return{header:Ae,claims:Le,data:it,signature:xe}},Jt=function(Re){const Le=rt(Re).claims;return!!Le&&"object"==typeof Le&&Le.hasOwnProperty("iat")},vn=function(Re){const Ae=rt(Re).claims;return"object"==typeof Ae&&!0===Ae.admin};function Rt(Re,Ae){return Object.prototype.hasOwnProperty.call(Re,Ae)}function dn(Re,Ae){if(Object.prototype.hasOwnProperty.call(Re,Ae))return Re[Ae]}function _n(Re){for(const Ae in Re)if(Object.prototype.hasOwnProperty.call(Re,Ae))return!1;return!0}function ar(Re,Ae,Le){const it={};for(const xe in Re)Object.prototype.hasOwnProperty.call(Re,xe)&&(it[xe]=Ae.call(Le,Re[xe],xe,Re));return it}function ir(Re,Ae){if(Re===Ae)return!0;const Le=Object.keys(Re),it=Object.keys(Ae);for(const xe of Le){if(!it.includes(xe))return!1;const $e=Re[xe],ht=Ae[xe];if(Pn($e)&&Pn(ht)){if(!ir($e,ht))return!1}else if($e!==ht)return!1}for(const xe of it)if(!Le.includes(xe))return!1;return!0}function Pn(Re){return null!==Re&&"object"==typeof Re}function Rr(Re){const Ae=[];for(const[Le,it]of Object.entries(Re))Array.isArray(it)?it.forEach(xe=>{Ae.push(encodeURIComponent(Le)+"="+encodeURIComponent(xe))}):Ae.push(encodeURIComponent(Le)+"="+encodeURIComponent(it));return Ae.length?"&"+Ae.join("&"):""}function Ti(Re){const Ae={};return Re.replace(/^\?/,"").split("&").forEach(it=>{if(it){const[xe,$e]=it.split("=");Ae[decodeURIComponent(xe)]=decodeURIComponent($e)}}),Ae}function Xr(Re){const Ae=Re.indexOf("?");if(!Ae)return"";const Le=Re.indexOf("#",Ae);return Re.substring(Ae,Le>0?Le:void 0)}class vr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ae=1;Ae<this.blockSize;++Ae)this.pad_[Ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ae,Le){Le||(Le=0);const it=this.W_;if("string"==typeof Ae)for(let on=0;on<16;on++)it[on]=Ae.charCodeAt(Le)<<24|Ae.charCodeAt(Le+1)<<16|Ae.charCodeAt(Le+2)<<8|Ae.charCodeAt(Le+3),Le+=4;else for(let on=0;on<16;on++)it[on]=Ae[Le]<<24|Ae[Le+1]<<16|Ae[Le+2]<<8|Ae[Le+3],Le+=4;for(let on=16;on<80;on++){const Cr=it[on-3]^it[on-8]^it[on-14]^it[on-16];it[on]=4294967295&(Cr<<1|Cr>>>31)}let fn,zn,xe=this.chain_[0],$e=this.chain_[1],ht=this.chain_[2],wt=this.chain_[3],Xt=this.chain_[4];for(let on=0;on<80;on++){on<40?on<20?(fn=wt^$e&(ht^wt),zn=1518500249):(fn=$e^ht^wt,zn=1859775393):on<60?(fn=$e&ht|wt&($e|ht),zn=2400959708):(fn=$e^ht^wt,zn=3395469782);const Cr=(xe<<5|xe>>>27)+fn+Xt+zn+it[on]&4294967295;Xt=wt,wt=ht,ht=4294967295&($e<<30|$e>>>2),$e=xe,xe=Cr}this.chain_[0]=this.chain_[0]+xe&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+ht&4294967295,this.chain_[3]=this.chain_[3]+wt&4294967295,this.chain_[4]=this.chain_[4]+Xt&4294967295}update(Ae,Le){if(null==Ae)return;void 0===Le&&(Le=Ae.length);const it=Le-this.blockSize;let xe=0;const $e=this.buf_;let ht=this.inbuf_;for(;xe<Le;){if(0===ht)for(;xe<=it;)this.compress_(Ae,xe),xe+=this.blockSize;if("string"==typeof Ae){for(;xe<Le;)if($e[ht]=Ae.charCodeAt(xe),++ht,++xe,ht===this.blockSize){this.compress_($e),ht=0;break}}else for(;xe<Le;)if($e[ht]=Ae[xe],++ht,++xe,ht===this.blockSize){this.compress_($e),ht=0;break}}this.inbuf_=ht,this.total_+=Le}digest(){const Ae=[];let Le=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let xe=this.blockSize-1;xe>=56;xe--)this.buf_[xe]=255&Le,Le/=256;this.compress_(this.buf_);let it=0;for(let xe=0;xe<5;xe++)for(let $e=24;$e>=0;$e-=8)Ae[it]=this.chain_[xe]>>$e&255,++it;return Ae}}function Si(Re,Ae){const Le=new _i(Re,Ae);return Le.subscribe.bind(Le)}class _i{constructor(Ae,Le){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Le,this.task.then(()=>{Ae(this)}).catch(it=>{this.error(it)})}next(Ae){this.forEachObserver(Le=>{Le.next(Ae)})}error(Ae){this.forEachObserver(Le=>{Le.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,Le,it){let xe;if(void 0===Ae&&void 0===Le&&void 0===it)throw new Error("Missing Observer.");xe=function(Re,Ae){if("object"!=typeof Re||null===Re)return!1;for(const Le of["next","error","complete"])if(Le in Re&&"function"==typeof Re[Le])return!0;return!1}(Ae)?Ae:{next:Ae,error:Le,complete:it},void 0===xe.next&&(xe.next=qn),void 0===xe.error&&(xe.error=qn),void 0===xe.complete&&(xe.complete=qn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch(ht){}}),this.observers.push(xe),$e}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let Le=0;Le<this.observers.length;Le++)this.sendOne(Le,Ae)}sendOne(Ae,Le){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{Le(this.observers[Ae])}catch(it){"undefined"!=typeof console&&console.error&&console.error(it)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qn(){}const Qn=function(Re,Ae,Le,it){let xe;if(it<Ae?xe="at least "+Ae:it>Le&&(xe=0===Le?"none":"no more than "+Le),xe)throw new Error(Re+" failed: Was called with "+it+(1===it?" argument.":" arguments.")+" Expects "+xe+".")};function Hn(Re,Ae){return`${Re} failed: ${Ae} argument `}function or(Re,Ae,Le,it){if((!it||Le)&&"function"!=typeof Le)throw new Error(Hn(Re,Ae)+"must be a valid function.")}function Fn(Re,Ae,Le,it){if((!it||Le)&&("object"!=typeof Le||null===Le))throw new Error(Hn(Re,Ae)+"must be a valid context object.")}const Ri=function(Re){const Ae=[];let Le=0;for(let it=0;it<Re.length;it++){let xe=Re.charCodeAt(it);if(xe>=55296&&xe<=56319){const $e=xe-55296;it++,C(it<Re.length,"Surrogate pair missing trail surrogate."),xe=65536+($e<<10)+(Re.charCodeAt(it)-56320)}xe<128?Ae[Le++]=xe:xe<2048?(Ae[Le++]=xe>>6|192,Ae[Le++]=63&xe|128):xe<65536?(Ae[Le++]=xe>>12|224,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128):(Ae[Le++]=xe>>18|240,Ae[Le++]=xe>>12&63|128,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128)}return Ae},xn=function(Re){let Ae=0;for(let Le=0;Le<Re.length;Le++){const it=Re.charCodeAt(Le);it<128?Ae++:it<2048?Ae+=2:it>=55296&&it<=56319?(Ae+=4,Le++):Ae+=3}return Ae};function jr(Re,Ae=1e3,Le=2){const it=Ae*Math.pow(Le,Re),xe=Math.round(.5*it*(Math.random()-.5)*2);return Math.min(144e5,it+xe)}function Kn(Re){return Re&&Re._delegate?Re._delegate:Re}},7713:(St,M,R)=>{"use strict";R.d(M,{Mq:()=>o.getApp,C6:()=>o.getApps});var o=R(1572);(0,o.registerVersion)("firebase","9.8.1","app")},7892:(St,M,R)=>{"use strict";R.d(M,{Z:()=>o.Z});var o=R(6293);o.Z.registerVersion("firebase","9.8.1","app-compat")},2115:(St,M,R)=>{"use strict";R.r(M);var o=R(8239),C=R(6293),b=R(6670),k=R(4213),Y=(R(1572),R(3855),R(1177));function re(){return window}function J(){return(J=(0,o.Z)(function*(Ke,Be,Oe){var ct;const{BuildInfo:It}=re();(0,b.aq)(Be.sessionId,"AuthEvent did not contain a session ID");const sn=yield ge(Be.sessionId),Wt={};return(0,b.ar)()?Wt.ibi=It.packageName:(0,b.as)()?Wt.apn=It.packageName:(0,b.at)(Ke,"operation-not-supported-in-this-environment"),It.displayName&&(Wt.appDisplayName=It.displayName),Wt.sessionId=sn,(0,b.au)(Ke,Oe,Be.type,void 0,null!==(ct=Be.eventId)&&void 0!==ct?ct:void 0,Wt)})).apply(this,arguments)}function Xe(){return(Xe=(0,o.Z)(function*(Ke){const{BuildInfo:Be}=re(),Oe={};(0,b.ar)()?Oe.iosBundleId=Be.packageName:(0,b.as)()?Oe.androidPackageName=Be.packageName:(0,b.at)(Ke,"operation-not-supported-in-this-environment"),yield(0,b.av)(Ke,Oe)})).apply(this,arguments)}function ze(){return(ze=(0,o.Z)(function*(Ke,Be,Oe){const{cordova:ct}=re();let It=()=>{};try{yield new Promise((sn,Wt)=>{let hn=null;function Dn(){var pt;sn();const zt=null===(pt=ct.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof zt&&zt(),"function"==typeof(null==Oe?void 0:Oe.close)&&Oe.close()}function Gn(){hn||(hn=window.setTimeout(()=>{Wt((0,b.aw)(Ke,"redirect-cancelled-by-user"))},2e3))}function pr(){"visible"===(null==document?void 0:document.visibilityState)&&Gn()}Be.addPassiveListener(Dn),document.addEventListener("resume",Gn,!1),(0,b.as)()&&document.addEventListener("visibilitychange",pr,!1),It=()=>{Be.removePassiveListener(Dn),document.removeEventListener("resume",Gn,!1),document.removeEventListener("visibilitychange",pr,!1),hn&&window.clearTimeout(hn)}})}finally{It()}})).apply(this,arguments)}function ge(Ke){return X.apply(this,arguments)}function X(){return(X=(0,o.Z)(function*(Ke){const Be=Se(Ke),Oe=yield crypto.subtle.digest("SHA-256",Be);return Array.from(new Uint8Array(Oe)).map(It=>It.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Se(Ke){if((0,b.aq)(/[0-9a-zA-Z]+/.test(Ke),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ke);const Be=new ArrayBuffer(Ke.length),Oe=new Uint8Array(Be);for(let ct=0;ct<Ke.length;ct++)Oe[ct]=Ke.charCodeAt(ct);return Oe}class Fe extends b.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Be=>{this.resolveInialized=Be})}addPassiveListener(Be){this.passiveListeners.add(Be)}removePassiveListener(Be){this.passiveListeners.delete(Be)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Be){return this.resolveInialized(),this.passiveListeners.forEach(Oe=>Oe(Be)),super.onEvent(Be)}initialized(){var Be=this;return(0,o.Z)(function*(){yield Be.initPromise})()}}function ue(Ke){return Me.apply(this,arguments)}function Me(){return(Me=(0,o.Z)(function*(Ke){const Be=yield ne()._get(ie(Ke));return Be&&(yield ne()._remove(ie(Ke))),Be})).apply(this,arguments)}function Q(){const Ke=[],Be="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Oe=0;Oe<20;Oe++){const ct=Math.floor(Math.random()*Be.length);Ke.push(Be.charAt(ct))}return Ke.join("")}function ne(){return(0,b.ay)(b.b)}function ie(Ke){return(0,b.az)("authEvent",Ke.config.apiKey,Ke.name)}function ce(Ke){if(!(null==Ke?void 0:Ke.includes("?")))return{};const[Be,...Oe]=Ke.split("?");return(0,k.zd)(Oe.join("?"))}function rt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,b.aw)("no-auth-event")}}function Rt(){var Ke;return(null===(Ke=null==self?void 0:self.location)||void 0===Ke?void 0:Ke.protocol)||null}function _n(Ke=(0,k.z$)()){return!("file:"!==Rt()&&"ionic:"!==Rt()||!Ke.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ti(){try{const Ke=self.localStorage,Be=b.aI();if(Ke)return Ke.setItem(Be,"1"),Ke.removeItem(Be),!function(Ke=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(Ke=(0,k.z$)()){return/Edge\/\d+/.test(Ke)}(Ke)}()||(0,k.hl)()}catch(Ke){return Xr()&&(0,k.hl)()}return!1}function Xr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function vr(){return("http:"===Rt()||"https:"===Rt()||(0,k.ru)()||_n())&&!((0,k.b$)()||(0,k.UG)())&&Ti()&&!Xr()}function Si(){return _n()&&"undefined"!=typeof document}function en(){return(en=(0,o.Z)(function*(){return!!Si()&&new Promise(Ke=>{const Be=setTimeout(()=>{Ke(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Be),Ke(!0)})})})).apply(this,arguments)}const qn={LOCAL:"local",NONE:"none",SESSION:"session"},Qn=b.ax,Hn="persistence";function or(Ke){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,o.Z)(function*(Ke){yield Ke._initializationPromise;const Be=xn(),Oe=b.az(Hn,Ke.config.apiKey,Ke.name);Be&&Be.setItem(Oe,Ke._getPersistence())})).apply(this,arguments)}function xn(){var Ke;try{return(null===(Ke="undefined"!=typeof window?window:null)||void 0===Ke?void 0:Ke.sessionStorage)||null}catch(Be){return null}}const Nt=b.ax;class Ft{constructor(){this.browserResolver=b.ay(b.k),this.cordovaResolver=b.ay(class{constructor(){this._redirectPersistence=b.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=b.aB,this._overrideRedirectResult=b.aC}_initialize(Be){var Oe=this;return(0,o.Z)(function*(){const ct=Be._key();let It=Oe.eventManagers.get(ct);return It||(It=new Fe(Be),Oe.eventManagers.set(ct,It),Oe.attachCallbackListeners(Be,It)),It})()}_openPopup(Be){(0,b.at)(Be,"operation-not-supported-in-this-environment")}_openRedirect(Be,Oe,ct,It){var sn=this;return(0,o.Z)(function*(){!function(Ke){var Be,Oe,ct,It,sn,Wt,hn,Dn,Gn,pr;const pt=re();(0,b.ax)("function"==typeof(null===(Be=null==pt?void 0:pt.universalLinks)||void 0===Be?void 0:Be.subscribe),Ke,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,b.ax)(void 0!==(null===(Oe=null==pt?void 0:pt.BuildInfo)||void 0===Oe?void 0:Oe.packageName),Ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,b.ax)("function"==typeof(null===(sn=null===(It=null===(ct=null==pt?void 0:pt.cordova)||void 0===ct?void 0:ct.plugins)||void 0===It?void 0:It.browsertab)||void 0===sn?void 0:sn.openUrl),Ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,b.ax)("function"==typeof(null===(Dn=null===(hn=null===(Wt=null==pt?void 0:pt.cordova)||void 0===Wt?void 0:Wt.plugins)||void 0===hn?void 0:hn.browsertab)||void 0===Dn?void 0:Dn.isAvailable),Ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,b.ax)("function"==typeof(null===(pr=null===(Gn=null==pt?void 0:pt.cordova)||void 0===Gn?void 0:Gn.InAppBrowser)||void 0===pr?void 0:pr.open),Ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Be);const Wt=yield sn._initialize(Be);yield Wt.initialized(),Wt.resetRedirect(),(0,b.aD)(),yield sn._originValidation(Be);const hn=function(Ke,Be,Oe=null){return{type:Be,eventId:Oe,urlResponse:null,sessionId:Q(),postBody:null,tenantId:Ke.tenantId,error:(0,b.aw)(Ke,"no-auth-event")}}(Be,ct,It);yield function(Ke,Be){return ne()._set(ie(Ke),Be)}(Be,hn);const Dn=yield function(Ke,Be,Oe){return J.apply(this,arguments)}(Be,hn,Oe),Gn=yield function(Ke){const{cordova:Be}=re();return new Promise(Oe=>{Be.plugins.browsertab.isAvailable(ct=>{let It=null;ct?Be.plugins.browsertab.openUrl(Ke):It=Be.InAppBrowser.open(Ke,(0,b.ap)()?"_blank":"_system","location=yes"),Oe(It)})})}(Dn);return function(Ke,Be,Oe){return ze.apply(this,arguments)}(Be,Wt,Gn)})()}_isIframeWebStorageSupported(Be,Oe){throw new Error("Method not implemented.")}_originValidation(Be){const Oe=Be._key();return this.originValidationPromises[Oe]||(this.originValidationPromises[Oe]=function(Ke){return Xe.apply(this,arguments)}(Be)),this.originValidationPromises[Oe]}attachCallbackListeners(Be,Oe){const{universalLinks:ct,handleOpenURL:It,BuildInfo:sn}=re(),Wt=setTimeout((0,o.Z)(function*(){yield ue(Be),Oe.onEvent(rt())}),500),hn=function(){var pr=(0,o.Z)(function*(pt){clearTimeout(Wt);const zt=yield ue(Be);let $n=null;zt&&(null==pt?void 0:pt.url)&&($n=function(Ke,Be){var Oe,ct;const It=function(Ke){const Be=ce(Ke),Oe=Be.link?decodeURIComponent(Be.link):void 0,ct=ce(Oe).link,It=Be.deep_link_id?decodeURIComponent(Be.deep_link_id):void 0;return ce(It).link||It||ct||Oe||Ke}(Be);if(It.includes("/__/auth/callback")){const sn=ce(It),Wt=sn.firebaseError?function(Ke){try{return JSON.parse(Ke)}catch(Be){return null}}(decodeURIComponent(sn.firebaseError)):null,hn=null===(ct=null===(Oe=null==Wt?void 0:Wt.code)||void 0===Oe?void 0:Oe.split("auth/"))||void 0===ct?void 0:ct[1],Dn=hn?(0,b.aw)(hn):null;return Dn?{type:Ke.type,eventId:Ke.eventId,tenantId:Ke.tenantId,error:Dn,urlResponse:null,sessionId:null,postBody:null}:{type:Ke.type,eventId:Ke.eventId,tenantId:Ke.tenantId,sessionId:Ke.sessionId,urlResponse:It,postBody:null}}return null}(zt,pt.url)),Oe.onEvent($n||rt())});return function(zt){return pr.apply(this,arguments)}}();void 0!==ct&&"function"==typeof ct.subscribe&&ct.subscribe(null,hn);const Dn=It,Gn=`${sn.packageName.toLowerCase()}://`;re().handleOpenURL=function(){var pr=(0,o.Z)(function*(pt){if(pt.toLowerCase().startsWith(Gn)&&hn({url:pt}),"function"==typeof Dn)try{Dn(pt)}catch(zt){console.error(zt)}});return function(pt){return pr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=b.a,this._completeRedirectFn=b.aB,this._overrideRedirectResult=b.aC}_initialize(Be){var Oe=this;return(0,o.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._initialize(Be)})()}_openPopup(Be,Oe,ct,It){var sn=this;return(0,o.Z)(function*(){return yield sn.selectUnderlyingResolver(),sn.assertedUnderlyingResolver._openPopup(Be,Oe,ct,It)})()}_openRedirect(Be,Oe,ct,It){var sn=this;return(0,o.Z)(function*(){return yield sn.selectUnderlyingResolver(),sn.assertedUnderlyingResolver._openRedirect(Be,Oe,ct,It)})()}_isIframeWebStorageSupported(Be,Oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Be,Oe)}_originValidation(Be){return this.assertedUnderlyingResolver._originValidation(Be)}get _shouldInitProactively(){return Si()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Be=this;return(0,o.Z)(function*(){if(Be.underlyingResolver)return;const Oe=yield function(){return en.apply(this,arguments)}();Be.underlyingResolver=Oe?Be.cordovaResolver:Be.browserResolver})()}}function ai(Ke){return Ke.unwrap()}function jr(Ke){return Zn(Ke)}function Zn(Ke){const{_tokenResponse:Be}=Ke instanceof k.ZR?Ke.customData:Ke;if(!Be)return null;if(!(Ke instanceof k.ZR)&&"temporaryProof"in Be&&"phoneNumber"in Be)return b.P.credentialFromResult(Ke);const Oe=Be.providerId;if(!Oe||Oe===b.o.PASSWORD)return null;let ct;switch(Oe){case b.o.GOOGLE:ct=b.Q;break;case b.o.FACEBOOK:ct=b.N;break;case b.o.GITHUB:ct=b.T;break;case b.o.TWITTER:ct=b.W;break;default:const{oauthIdToken:It,oauthAccessToken:sn,oauthTokenSecret:Wt,pendingToken:hn,nonce:Dn}=Be;return sn||Wt||It||hn?hn?Oe.startsWith("saml.")?b.aL._create(Oe,hn):b.J._fromParams({providerId:Oe,signInMethod:Oe,pendingToken:hn,idToken:It,accessToken:sn}):new b.U(Oe).credential({idToken:It,accessToken:sn,rawNonce:Dn}):null}return Ke instanceof k.ZR?ct.credentialFromError(Ke):ct.credentialFromResult(Ke)}function Kn(Ke,Be){return Be.catch(Oe=>{throw Oe instanceof k.ZR&&function(Ke,Be){var Oe;const ct=null===(Oe=Be.customData)||void 0===Oe?void 0:Oe._tokenResponse;if("auth/multi-factor-auth-required"===Be.code)Be.resolver=new Le(Ke,b.an(Ke,Be));else if(ct){const It=Zn(Be),sn=Be;It&&(sn.credential=It,sn.tenantId=ct.tenantId||void 0,sn.email=ct.email||void 0,sn.phoneNumber=ct.phoneNumber||void 0)}}(Ke,Oe),Oe}).then(Oe=>{const It=Oe.user;return{operationType:Oe.operationType,credential:jr(Oe),additionalUserInfo:b.al(Oe),user:it.getOrCreate(It)}})}function Re(Ke,Be){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,o.Z)(function*(Ke,Be){const Oe=yield Be;return{verificationId:Oe.verificationId,confirm:ct=>Kn(Ke,Oe.confirm(ct))}})).apply(this,arguments)}class Le{constructor(Be,Oe){this.resolver=Oe,this.auth=Be.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Be){return Kn(ai(this.auth),this.resolver.resolveSignIn(Be))}}class it{constructor(Be){this._delegate=Be,this.multiFactor=b.ao(Be)}static getOrCreate(Be){return it.USER_MAP.has(Be)||it.USER_MAP.set(Be,new it(Be)),it.USER_MAP.get(Be)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Be){return this._delegate.getIdTokenResult(Be)}getIdToken(Be){return this._delegate.getIdToken(Be)}linkAndRetrieveDataWithCredential(Be){return this.linkWithCredential(Be)}linkWithCredential(Be){var Oe=this;return(0,o.Z)(function*(){return Kn(Oe.auth,b.Z(Oe._delegate,Be))})()}linkWithPhoneNumber(Be,Oe){var ct=this;return(0,o.Z)(function*(){return Re(ct.auth,b.l(ct._delegate,Be,Oe))})()}linkWithPopup(Be){var Oe=this;return(0,o.Z)(function*(){return Kn(Oe.auth,b.d(Oe._delegate,Be,Ft))})()}linkWithRedirect(Be){var Oe=this;return(0,o.Z)(function*(){return yield or(b.aE(Oe.auth)),b.g(Oe._delegate,Be,Ft)})()}reauthenticateAndRetrieveDataWithCredential(Be){return this.reauthenticateWithCredential(Be)}reauthenticateWithCredential(Be){var Oe=this;return(0,o.Z)(function*(){return Kn(Oe.auth,b._(Oe._delegate,Be))})()}reauthenticateWithPhoneNumber(Be,Oe){return Re(this.auth,b.r(this._delegate,Be,Oe))}reauthenticateWithPopup(Be){return Kn(this.auth,b.e(this._delegate,Be,Ft))}reauthenticateWithRedirect(Be){var Oe=this;return(0,o.Z)(function*(){return yield or(b.aE(Oe.auth)),b.h(Oe._delegate,Be,Ft)})()}sendEmailVerification(Be){return b.ab(this._delegate,Be)}unlink(Be){var Oe=this;return(0,o.Z)(function*(){return yield b.ak(Oe._delegate,Be),Oe})()}updateEmail(Be){return b.ag(this._delegate,Be)}updatePassword(Be){return b.ah(this._delegate,Be)}updatePhoneNumber(Be){return b.u(this._delegate,Be)}updateProfile(Be){return b.af(this._delegate,Be)}verifyBeforeUpdateEmail(Be,Oe){return b.ac(this._delegate,Be,Oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}it.USER_MAP=new WeakMap;const xe=b.ax;let $e=(()=>{class Ke{constructor(Oe,ct){if(this.app=Oe,ct.isInitialized())return this._delegate=ct.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:It}=Oe.options;xe(It,"invalid-api-key",{appName:Oe.name}),xe(It,"invalid-api-key",{appName:Oe.name});const sn="undefined"!=typeof window?Ft:void 0;this._delegate=ct.initialize({options:{persistence:wt(It,Oe.name),popupRedirectResolver:sn}}),this._delegate._updateErrorMap(b.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?it.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Oe){this._delegate.languageCode=Oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Oe){this._delegate.tenantId=Oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Oe,ct){b.G(this._delegate,Oe,ct)}applyActionCode(Oe){return b.a2(this._delegate,Oe)}checkActionCode(Oe){return b.a3(this._delegate,Oe)}confirmPasswordReset(Oe,ct){return b.a1(this._delegate,Oe,ct)}createUserWithEmailAndPassword(Oe,ct){var It=this;return(0,o.Z)(function*(){return Kn(It._delegate,b.a5(It._delegate,Oe,ct))})()}fetchProvidersForEmail(Oe){return this.fetchSignInMethodsForEmail(Oe)}fetchSignInMethodsForEmail(Oe){return b.aa(this._delegate,Oe)}isSignInWithEmailLink(Oe){return b.a8(this._delegate,Oe)}getRedirectResult(){var Oe=this;return(0,o.Z)(function*(){xe(vr(),Oe._delegate,"operation-not-supported-in-this-environment");const ct=yield b.j(Oe._delegate,Ft);return ct?Kn(Oe._delegate,Promise.resolve(ct)):{credential:null,user:null}})()}addFrameworkForLogging(Oe){!function(Ke,Be){(0,b.aE)(Ke)._logFramework(Be)}(this._delegate,Oe)}onAuthStateChanged(Oe,ct,It){const{next:sn,error:Wt,complete:hn}=ht(Oe,ct,It);return this._delegate.onAuthStateChanged(sn,Wt,hn)}onIdTokenChanged(Oe,ct,It){const{next:sn,error:Wt,complete:hn}=ht(Oe,ct,It);return this._delegate.onIdTokenChanged(sn,Wt,hn)}sendSignInLinkToEmail(Oe,ct){return b.a7(this._delegate,Oe,ct)}sendPasswordResetEmail(Oe,ct){return b.a0(this._delegate,Oe,ct||void 0)}setPersistence(Oe){var ct=this;return(0,o.Z)(function*(){let It;switch(function(Ke,Be){Qn(Object.values(qn).includes(Be),Ke,"invalid-persistence-type"),(0,k.b$)()?Qn(Be!==qn.SESSION,Ke,"unsupported-persistence-type"):(0,k.UG)()?Qn(Be===qn.NONE,Ke,"unsupported-persistence-type"):Xr()?Qn(Be===qn.NONE||Be===qn.LOCAL&&(0,k.hl)(),Ke,"unsupported-persistence-type"):Qn(Be===qn.NONE||Ti(),Ke,"unsupported-persistence-type")}(ct._delegate,Oe),Oe){case qn.SESSION:It=b.a;break;case qn.LOCAL:It=(yield b.ay(b.i)._isAvailable())?b.i:b.b;break;case qn.NONE:It=b.L;break;default:return b.at("argument-error",{appName:ct._delegate.name})}return ct._delegate.setPersistence(It)})()}signInAndRetrieveDataWithCredential(Oe){return this.signInWithCredential(Oe)}signInAnonymously(){return Kn(this._delegate,b.X(this._delegate))}signInWithCredential(Oe){return Kn(this._delegate,b.Y(this._delegate,Oe))}signInWithCustomToken(Oe){return Kn(this._delegate,b.$(this._delegate,Oe))}signInWithEmailAndPassword(Oe,ct){return Kn(this._delegate,b.a6(this._delegate,Oe,ct))}signInWithEmailLink(Oe,ct){return Kn(this._delegate,b.a9(this._delegate,Oe,ct))}signInWithPhoneNumber(Oe,ct){return Re(this._delegate,b.s(this._delegate,Oe,ct))}signInWithPopup(Oe){var ct=this;return(0,o.Z)(function*(){return xe(vr(),ct._delegate,"operation-not-supported-in-this-environment"),Kn(ct._delegate,b.c(ct._delegate,Oe,Ft))})()}signInWithRedirect(Oe){var ct=this;return(0,o.Z)(function*(){return xe(vr(),ct._delegate,"operation-not-supported-in-this-environment"),yield or(ct._delegate),b.f(ct._delegate,Oe,Ft)})()}updateCurrentUser(Oe){return this._delegate.updateCurrentUser(Oe)}verifyPasswordResetCode(Oe){return b.a4(this._delegate,Oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ke.Persistence=qn,Ke})();function ht(Ke,Be,Oe){let ct=Ke;"function"!=typeof Ke&&({next:ct,error:Be,complete:Oe}=Ke);const It=ct;return{next:Wt=>It(Wt&&it.getOrCreate(Wt)),error:Be,complete:Oe}}function wt(Ke,Be){const Oe=function(Ke,Be){const Oe=xn();if(!Oe)return[];const ct=b.az(Hn,Ke,Be);switch(Oe.getItem(ct)){case qn.NONE:return[b.L];case qn.LOCAL:return[b.i,b.a];case qn.SESSION:return[b.a];default:return[]}}(Ke,Be);if("undefined"!=typeof self&&!Oe.includes(b.i)&&Oe.push(b.i),"undefined"!=typeof window)for(const ct of[b.b,b.a])Oe.includes(ct)||Oe.push(ct);return Oe.includes(b.L)||Oe.push(b.L),Oe}class Xt{constructor(){this.providerId="phone",this._delegate=new b.P(ai(C.Z.auth()))}static credential(Be,Oe){return b.P.credential(Be,Oe)}verifyPhoneNumber(Be,Oe){return this._delegate.verifyPhoneNumber(Be,Oe)}unwrap(){return this._delegate}}Xt.PHONE_SIGN_IN_METHOD=b.P.PHONE_SIGN_IN_METHOD,Xt.PROVIDER_ID=b.P.PROVIDER_ID;const fn=b.ax;var Ke;(Ke=C.Z).INTERNAL.registerComponent(new Y.wA("auth-compat",Be=>{const Oe=Be.getProvider("app-compat").getImmediate(),ct=Be.getProvider("auth");return new $e(Oe,ct)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:b.A.EMAIL_SIGNIN,PASSWORD_RESET:b.A.PASSWORD_RESET,RECOVER_EMAIL:b.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:b.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:b.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:b.A.VERIFY_EMAIL}},EmailAuthProvider:b.M,FacebookAuthProvider:b.N,GithubAuthProvider:b.T,GoogleAuthProvider:b.Q,OAuthProvider:b.U,SAMLAuthProvider:b.V,PhoneAuthProvider:Xt,PhoneMultiFactorGenerator:b.m,RecaptchaVerifier:class{constructor(Be,Oe,ct=C.Z.app()){var It;fn(null===(It=ct.options)||void 0===It?void 0:It.apiKey,"invalid-api-key",{appName:ct.name}),this._delegate=new b.R(Be,Oe,ct.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:b.W,Auth:$e,AuthCredential:b.H,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ke.registerVersion("@firebase/auth-compat","0.2.14")},5477:(St,M,R)=>{St=R.nmd(St);var C="__lodash_hash_undefined__",O=9007199254740991,U="[object Arguments]",we="[object Function]",Ie="[object Object]",Je=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt[U]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt[we]=dt["[object Map]"]=dt["[object Number]"]=dt[Ie]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1;var $t="object"==typeof global&&global&&global.Object===Object&&global,Jt="object"==typeof self&&self&&self.Object===Object&&self,vn=$t||Jt||Function("return this")(),Rt=M&&!M.nodeType&&M,dn=Rt&&St&&!St.nodeType&&St,_n=dn&&dn.exports===Rt,ar=_n&&$t.process,ir=function(){try{return dn&&dn.require&&dn.require("util").types||ar&&ar.binding&&ar.binding("util")}catch(pe){}}(),Pn=ir&&ir.isTypedArray;function Rr(j,pe,Te){switch(Te.length){case 0:return j.call(pe);case 1:return j.call(pe,Te[0]);case 2:return j.call(pe,Te[0],Te[1]);case 3:return j.call(pe,Te[0],Te[1],Te[2])}return j.apply(pe,Te)}var j,_i=Array.prototype,Nn=Object.prototype,qn=vn["__core-js_shared__"],Qn=Function.prototype.toString,Hn=Nn.hasOwnProperty,zi=(j=/[^.]+$/.exec(qn&&qn.keys&&qn.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",or=Nn.toString,Fn=Qn.call(Object),Ri=RegExp("^"+Qn.call(Hn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xn=_n?vn.Buffer:void 0,Nt=vn.Symbol,Ft=vn.Uint8Array,li=function(j,pe){return function(Te){return j(pe(Te))}}(Object.getPrototypeOf,Object),jr=Object.create,Mn=Nn.propertyIsEnumerable,Zn=_i.splice,Kn=Nt?Nt.toStringTag:void 0,Re=function(){try{var j=Us(Object,"defineProperty");return j({},"",{}),j}catch(pe){}}(),Ae=xn?xn.isBuffer:void 0,Le=Math.max,it=Date.now,xe=Us(vn,"Map"),$e=Us(Object,"create"),ht=function(){function j(){}return function(pe){if(!_e(pe))return{};if(jr)return jr(pe);j.prototype=pe;var Te=new j;return j.prototype=void 0,Te}}();function wt(j){var pe=-1,Te=null==j?0:j.length;for(this.clear();++pe<Te;){var Qe=j[pe];this.set(Qe[0],Qe[1])}}function Ke(j){var pe=-1,Te=null==j?0:j.length;for(this.clear();++pe<Te;){var Qe=j[pe];this.set(Qe[0],Qe[1])}}function Wt(j){var pe=-1,Te=null==j?0:j.length;for(this.clear();++pe<Te;){var Qe=j[pe];this.set(Qe[0],Qe[1])}}function zt(j){var pe=this.__data__=new Ke(j);this.size=pe.size}function Ai(j,pe,Te){(void 0!==Te&&!ur(j[pe],Te)||void 0===Te&&!(pe in j))&&Gi(j,pe,Te)}function hs(j,pe,Te){var Qe=j[pe];(!Hn.call(j,pe)||!ur(Qe,Te)||void 0===Te&&!(pe in j))&&Gi(j,pe,Te)}function an(j,pe){for(var Te=j.length;Te--;)if(ur(j[Te][0],pe))return Te;return-1}function Gi(j,pe,Te){"__proto__"==pe&&Re?Re(j,pe,{configurable:!0,enumerable:!0,value:Te,writable:!0}):j[pe]=Te}wt.prototype.clear=function(){this.__data__=$e?$e(null):{},this.size=0},wt.prototype.delete=function(j){var pe=this.has(j)&&delete this.__data__[j];return this.size-=pe?1:0,pe},wt.prototype.get=function(j){var pe=this.__data__;if($e){var Te=pe[j];return Te===C?void 0:Te}return Hn.call(pe,j)?pe[j]:void 0},wt.prototype.has=function(j){var pe=this.__data__;return $e?void 0!==pe[j]:Hn.call(pe,j)},wt.prototype.set=function(j,pe){var Te=this.__data__;return this.size+=this.has(j)?0:1,Te[j]=$e&&void 0===pe?C:pe,this},Ke.prototype.clear=function(){this.__data__=[],this.size=0},Ke.prototype.delete=function(j){var pe=this.__data__,Te=an(pe,j);return!(Te<0||(Te==pe.length-1?pe.pop():Zn.call(pe,Te,1),--this.size,0))},Ke.prototype.get=function(j){var pe=this.__data__,Te=an(pe,j);return Te<0?void 0:pe[Te][1]},Ke.prototype.has=function(j){return an(this.__data__,j)>-1},Ke.prototype.set=function(j,pe){var Te=this.__data__,Qe=an(Te,j);return Qe<0?(++this.size,Te.push([j,pe])):Te[Qe][1]=pe,this},Wt.prototype.clear=function(){this.size=0,this.__data__={hash:new wt,map:new(xe||Ke),string:new wt}},Wt.prototype.delete=function(j){var pe=fi(this,j).delete(j);return this.size-=pe?1:0,pe},Wt.prototype.get=function(j){return fi(this,j).get(j)},Wt.prototype.has=function(j){return fi(this,j).has(j)},Wt.prototype.set=function(j,pe){var Te=fi(this,j),Qe=Te.size;return Te.set(j,pe),this.size+=Te.size==Qe?0:1,this},zt.prototype.clear=function(){this.__data__=new Ke,this.size=0},zt.prototype.delete=function(j){var pe=this.__data__,Te=pe.delete(j);return this.size=pe.size,Te},zt.prototype.get=function(j){return this.__data__.get(j)},zt.prototype.has=function(j){return this.__data__.has(j)},zt.prototype.set=function(j,pe){var Te=this.__data__;if(Te instanceof Ke){var Qe=Te.__data__;if(!xe||Qe.length<199)return Qe.push([j,pe]),this.size=++Te.size,this;Te=this.__data__=new Wt(Qe)}return Te.set(j,pe),this.size=Te.size,this};var yi=function(pe,Te,Qe){for(var yt=-1,Ot=Object(pe),Lt=Qe(pe),Vt=Lt.length;Vt--;){var ln=Lt[++yt];if(!1===Te(Ot[ln],ln,Ot))break}return pe};function Mr(j){return null==j?void 0===j?"[object Undefined]":"[object Null]":Kn&&Kn in Object(j)?function(j){var pe=Hn.call(j,Kn),Te=j[Kn];try{j[Kn]=void 0;var Qe=!0}catch(Ot){}var yt=or.call(j);return Qe&&(pe?j[Kn]=Te:delete j[Kn]),yt}(j):function(j){return or.call(j)}(j)}function vi(j){return z(j)&&Mr(j)==U}function qr(j,pe,Te,Qe,yt){j!==pe&&yi(pe,function(Ot,Lt){if(yt||(yt=new zt),_e(Ot))!function(j,pe,Te,Qe,yt,Ot,Lt){var Vt=gt(j,Te),ln=gt(pe,Te),nr=Lt.get(ln);if(nr)Ai(j,Te,nr);else{var Pr=Ot?Ot(Vt,ln,Te+"",j,pe,Lt):void 0,On=void 0===Pr;if(On){var To=Pi(ln),ro=!To&&no(ln),Ir=!To&&!ro&&N(ln);Pr=ln,To||ro||Ir?Pi(Vt)?Pr=Vt:function(j){return z(j)&&bi(j)}(Vt)?Pr=function(j,pe){var Te=-1,Qe=j.length;for(pe||(pe=Array(Qe));++Te<Qe;)pe[Te]=j[Te];return pe}(Vt):ro?(On=!1,Pr=function(j,pe){return j.slice()}(ln)):Ir?(On=!1,Pr=function(j,pe){var Te=function(j){var pe=new j.constructor(j.byteLength);return new Ft(pe).set(new Ft(j)),pe}(j.buffer);return new j.constructor(Te,j.byteOffset,j.length)}(ln)):Pr=[]:function(j){if(!z(j)||Mr(j)!=Ie)return!1;var pe=li(j);if(null===pe)return!0;var Te=Hn.call(pe,"constructor")&&pe.constructor;return"function"==typeof Te&&Te instanceof Te&&Qn.call(Te)==Fn}(ln)||Hr(ln)?(Pr=Vt,Hr(Vt)?Pr=function(j){return function(j,pe,Te,Qe){var yt=!Te;Te||(Te={});for(var Ot=-1,Lt=pe.length;++Ot<Lt;){var Vt=pe[Ot],ln=void 0;void 0===ln&&(ln=j[Vt]),yt?Gi(Te,Vt,ln):hs(Te,Vt,ln)}return Te}(j,se(j))}(Vt):(!_e(Vt)||Io(Vt))&&(Pr=function(j){return"function"!=typeof j.constructor||K(j)?{}:ht(li(j))}(ln))):On=!1}On&&(Lt.set(ln,Pr),yt(Pr,ln,Qe,Ot,Lt),Lt.delete(ln)),Ai(j,Te,Pr)}}(j,pe,Lt,Te,qr,Qe,yt);else{var Vt=Qe?Qe(gt(j,Lt),Ot,Lt+"",j,pe,yt):void 0;void 0===Vt&&(Vt=Ot),Ai(j,Lt,Vt)}},se)}function Go(j,pe){return Dt(function(j,pe,Te){return pe=Le(void 0===pe?j.length-1:pe,0),function(){for(var Qe=arguments,yt=-1,Ot=Le(Qe.length-pe,0),Lt=Array(Ot);++yt<Ot;)Lt[yt]=Qe[pe+yt];yt=-1;for(var Vt=Array(pe+1);++yt<pe;)Vt[yt]=Qe[yt];return Vt[pe]=Te(Lt),Rr(j,this,Vt)}}(j,pe,be),j+"")}var es=Re?function(j,pe){return Re(j,"toString",{configurable:!0,enumerable:!1,value:de(pe),writable:!0})}:be;function ti(j,pe,Te,Qe,yt,Ot){return _e(j)&&_e(pe)&&(Ot.set(pe,j),qr(j,pe,void 0,ti,Ot),Ot.delete(pe)),j}function fi(j,pe){var Te=j.__data__;return function(j){var pe=typeof j;return"string"==pe||"number"==pe||"symbol"==pe||"boolean"==pe?"__proto__"!==j:null===j}(pe)?Te["string"==typeof pe?"string":"hash"]:Te.map}function Us(j,pe){var Te=function(j,pe){return null==j?void 0:j[pe]}(j,pe);return function(j){return!(!_e(j)||function(j){return!!zi&&zi in j}(j))&&(Io(j)?Ri:Je).test(function(j){if(null!=j){try{return Qn.call(j)}catch(pe){}try{return j+""}catch(pe){}}return""}(j))}(Te)?Te:void 0}function Zr(j,pe){var Te=typeof j;return!!(pe=null==pe?O:pe)&&("number"==Te||"symbol"!=Te&&rt.test(j))&&j>-1&&j%1==0&&j<pe}function K(j){var pe=j&&j.constructor;return j===("function"==typeof pe&&pe.prototype||Nn)}function gt(j,pe){if(("constructor"!==pe||"function"!=typeof j[pe])&&"__proto__"!=pe)return j[pe]}var Dt=function(j){var pe=0,Te=0;return function(){var Qe=it(),yt=16-(Qe-Te);if(Te=Qe,yt>0){if(++pe>=800)return arguments[0]}else pe=0;return j.apply(void 0,arguments)}}(es);function ur(j,pe){return j===pe||j!=j&&pe!=pe}var Hr=vi(function(){return arguments}())?vi:function(j){return z(j)&&Hn.call(j,"callee")&&!Mn.call(j,"callee")},Pi=Array.isArray;function bi(j){return null!=j&&ee(j.length)&&!Io(j)}var no=Ae||function(){return!1};function Io(j){if(!_e(j))return!1;var pe=Mr(j);return pe==we||"[object GeneratorFunction]"==pe||"[object AsyncFunction]"==pe||"[object Proxy]"==pe}function ee(j){return"number"==typeof j&&j>-1&&j%1==0&&j<=O}function _e(j){var pe=typeof j;return null!=j&&("object"==pe||"function"==pe)}function z(j){return null!=j&&"object"==typeof j}var N=Pn?function(j){return function(pe){return j(pe)}}(Pn):function(j){return z(j)&&ee(j.length)&&!!dt[Mr(j)]},V=Go(function(j){return j.push(void 0,ti),Rr(ye,void 0,j)});function se(j){return bi(j)?function(j,pe){var Te=Pi(j),Qe=!Te&&Hr(j),yt=!Te&&!Qe&&no(j),Ot=!Te&&!Qe&&!yt&&N(j),Lt=Te||Qe||yt||Ot,Vt=Lt?function(j,pe){for(var Te=-1,Qe=Array(j);++Te<j;)Qe[Te]=pe(Te);return Qe}(j.length,String):[],ln=Vt.length;for(var nr in j)(pe||Hn.call(j,nr))&&(!Lt||!("length"==nr||yt&&("offset"==nr||"parent"==nr)||Ot&&("buffer"==nr||"byteLength"==nr||"byteOffset"==nr)||Zr(nr,ln)))&&Vt.push(nr);return Vt}(j,!0):function(j){if(!_e(j))return function(j){var pe=[];if(null!=j)for(var Te in Object(j))pe.push(Te);return pe}(j);var pe=K(j),Te=[];for(var Qe in j)"constructor"==Qe&&(pe||!Hn.call(j,Qe))||Te.push(Qe);return Te}(j)}var ye=function(j){return Go(function(pe,Te){var Qe=-1,yt=Te.length,Ot=yt>1?Te[yt-1]:void 0,Lt=yt>2?Te[2]:void 0;for(Ot=j.length>3&&"function"==typeof Ot?(yt--,Ot):void 0,Lt&&function(j,pe,Te){if(!_e(Te))return!1;var Qe=typeof pe;return!!("number"==Qe?bi(Te)&&Zr(pe,Te.length):"string"==Qe&&pe in Te)&&ur(Te[pe],j)}(Te[0],Te[1],Lt)&&(Ot=yt<3?void 0:Ot,yt=1),pe=Object(pe);++Qe<yt;){var Vt=Te[Qe];Vt&&j(pe,Vt,Qe,Ot)}return pe})}(function(j,pe,Te,Qe){qr(j,pe,Te,Qe)});function de(j){return function(){return j}}function be(j){return j}St.exports=V},8305:(St,M,R)=>{"use strict";R.d(M,{y:()=>te});var o=R(584),C=R(7908),b=R(4816),k=R(4623);var Y=R(5367),re=R(5044),he=R(8706);let te=(()=>{class qe{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const Ie=new qe;return Ie.source=this,Ie.operator=ze,Ie}subscribe(ze,Ie,ge){const X=function(qe){return qe&&qe instanceof o.Lv||function(qe){return qe&&(0,re.m)(qe.next)&&(0,re.m)(qe.error)&&(0,re.m)(qe.complete)}(qe)&&(0,C.Nn)(qe)}(ze)?ze:new o.Hp(ze,Ie,ge);return(0,he.x)(()=>{const{operator:Se,source:De}=this;X.add(Se?Se.call(X,De):De?this._subscribe(X):this._trySubscribe(X))}),X}_trySubscribe(ze){try{return this._subscribe(ze)}catch(Ie){ze.error(Ie)}}forEach(ze,Ie){return new(Ie=J(Ie))((ge,X)=>{let Se;Se=this.subscribe(De=>{try{ze(De)}catch(Fe){X(Fe),null==Se||Se.unsubscribe()}},X,ge)})}_subscribe(ze){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(ze)}[b.L](){return this}pipe(...ze){return function(qe){return 0===qe.length?k.y:1===qe.length?qe[0]:function(ze){return qe.reduce((Ie,ge)=>ge(Ie),ze)}}(ze)(this)}toPromise(ze){return new(ze=J(ze))((Ie,ge)=>{let X;this.subscribe(Se=>X=Se,Se=>ge(Se),()=>Ie(X))})}}return qe.create=je=>new qe(je),qe})();function J(qe){var je;return null!==(je=null!=qe?qe:Y.v.Promise)&&void 0!==je?je:Promise}},273:(St,M,R)=>{"use strict";R.d(M,{x:()=>Y});var o=R(8305),C=R(7908);const k=(0,R(4893).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var O=R(3980),U=R(8706);let Y=(()=>{class he extends o.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const we=new re(this,this);return we.operator=J,we}_throwIfClosed(){if(this.closed)throw new k}next(J){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const we=this.observers.slice();for(const Xe of we)Xe.next(J)}})}error(J){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:we}=this;for(;we.length;)we.shift().error(J)}})}complete(){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:we,isStopped:Xe,observers:qe}=this;return we||Xe?C.Lc:(qe.push(J),new C.w0(()=>(0,O.P)(qe,J)))}_checkFinalizedStatuses(J){const{hasError:we,thrownError:Xe,isStopped:qe}=this;we?J.error(Xe):qe&&J.complete()}asObservable(){const J=new o.y;return J.source=this,J}}return he.create=(te,J)=>new re(te,J),he})();class re extends Y{constructor(te,J){super(),this.destination=te,this.source=J}next(te){var J,we;null===(we=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===we||we.call(J,te)}error(te){var J,we;null===(we=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===we||we.call(J,te)}complete(){var te,J;null===(J=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===J||J.call(te)}_subscribe(te){var J,we;return null!==(we=null===(J=this.source)||void 0===J?void 0:J.subscribe(te))&&void 0!==we?we:C.Lc}}},584:(St,M,R)=>{"use strict";R.d(M,{Hp:()=>Xe,Lv:()=>we});var o=R(5044),C=R(7908),b=R(5367),k=R(5160),O=R(6921);const U=he("C",void 0,void 0);function he(ge,X,Se){return{kind:ge,value:X,error:Se}}var te=R(2496),J=R(8706);class we extends C.w0{constructor(X){super(),this.isStopped=!1,X?(this.destination=X,(0,C.Nn)(X)&&X.add(this)):this.destination=Ie}static create(X,Se,De){return new Xe(X,Se,De)}next(X){this.isStopped?ze(he("N",X,void 0),this):this._next(X)}error(X){this.isStopped?ze(he("E",void 0,X),this):(this.isStopped=!0,this._error(X))}complete(){this.isStopped?ze(U,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(X){this.destination.next(X)}_error(X){try{this.destination.error(X)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Xe extends we{constructor(X,Se,De){let Fe;if(super(),(0,o.m)(X))Fe=X;else if(X){let Ne;({next:Fe,error:Se,complete:De}=X),this&&b.v.useDeprecatedNextContext?(Ne=Object.create(X),Ne.unsubscribe=()=>this.unsubscribe()):Ne=X,Fe=null==Fe?void 0:Fe.bind(Ne),Se=null==Se?void 0:Se.bind(Ne),De=null==De?void 0:De.bind(Ne)}this.destination={next:Fe?qe(Fe):O.Z,error:qe(null!=Se?Se:je),complete:De?qe(De):O.Z}}}function qe(ge,X){return(...Se)=>{try{ge(...Se)}catch(De){b.v.useDeprecatedSynchronousErrorHandling?(0,J.O)(De):(0,k.h)(De)}}}function je(ge){throw ge}function ze(ge,X){const{onStoppedNotification:Se}=b.v;Se&&te.z.setTimeout(()=>Se(ge,X))}const Ie={closed:!0,next:O.Z,error:je,complete:O.Z}},7908:(St,M,R)=>{"use strict";R.d(M,{Lc:()=>U,w0:()=>O,Nn:()=>Y});var o=R(5044);const b=(0,R(4893).d)(he=>function(J){he(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((we,Xe)=>`${Xe+1}) ${we.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var k=R(3980);class O{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const qe of J)qe.remove(this);else J.remove(this);const{initialTeardown:we}=this;if((0,o.m)(we))try{we()}catch(qe){te=qe instanceof b?qe.errors:[qe]}const{_teardowns:Xe}=this;if(Xe){this._teardowns=null;for(const qe of Xe)try{re(qe)}catch(je){te=null!=te?te:[],je instanceof b?te=[...te,...je.errors]:te.push(je)}}if(te)throw new b(te)}}add(te){var J;if(te&&te!==this)if(this.closed)re(te);else{if(te instanceof O){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._teardowns=null!==(J=this._teardowns)&&void 0!==J?J:[]).push(te)}}_hasParent(te){const{_parentage:J}=this;return J===te||Array.isArray(J)&&J.includes(te)}_addParent(te){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(te),J):J?[J,te]:te}_removeParent(te){const{_parentage:J}=this;J===te?this._parentage=null:Array.isArray(J)&&(0,k.P)(J,te)}remove(te){const{_teardowns:J}=this;J&&(0,k.P)(J,te),te instanceof O&&te._removeParent(this)}}O.EMPTY=(()=>{const he=new O;return he.closed=!0,he})();const U=O.EMPTY;function Y(he){return he instanceof O||he&&"closed"in he&&(0,o.m)(he.remove)&&(0,o.m)(he.add)&&(0,o.m)(he.unsubscribe)}function re(he){(0,o.m)(he)?he():he.unsubscribe()}},5367:(St,M,R)=>{"use strict";R.d(M,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(St,M,R)=>{"use strict";R.d(M,{E:()=>C});const C=new(R(8305).y)(O=>O.complete())},5947:(St,M,R)=>{"use strict";R.d(M,{D:()=>Fe});var o=R(9985),C=R(4763),b=R(5222),U=R(8305),re=R(5497),he=R(5044),te=R(8395);function we(Ne,Ue){if(!Ne)throw new Error("Iterable cannot be null");return new U.y(ue=>{(0,te.f)(ue,Ue,()=>{const Me=Ne[Symbol.asyncIterator]();(0,te.f)(ue,Ue,()=>{Me.next().then(q=>{q.done?ue.complete():ue.next(q.value)})},0,!0)})})}var Xe=R(1073),qe=R(2442),je=R(1537),ze=R(2317),Ie=R(9908),ge=R(3754),X=R(7751);function Fe(Ne,Ue){return Ue?function(Ne,Ue){if(null!=Ne){if((0,Xe.c)(Ne))return function(Ne,Ue){return(0,o.Xf)(Ne).pipe((0,b.R)(Ue),(0,C.Q)(Ue))}(Ne,Ue);if((0,je.z)(Ne))return function(Ne,Ue){return new U.y(ue=>{let Me=0;return Ue.schedule(function(){Me===Ne.length?ue.complete():(ue.next(Ne[Me++]),ue.closed||this.schedule())})})}(Ne,Ue);if((0,qe.t)(Ne))return function(Ne,Ue){return(0,o.Xf)(Ne).pipe((0,b.R)(Ue),(0,C.Q)(Ue))}(Ne,Ue);if((0,Ie.D)(Ne))return we(Ne,Ue);if((0,ze.T)(Ne))return function(Ne,Ue){return new U.y(ue=>{let Me;return(0,te.f)(ue,Ue,()=>{Me=Ne[re.h](),(0,te.f)(ue,Ue,()=>{let q,Q;try{({value:q,done:Q}=Me.next())}catch(ne){return void ue.error(ne)}Q?ue.complete():ue.next(q)},0,!0)}),()=>(0,he.m)(null==Me?void 0:Me.return)&&Me.return()})}(Ne,Ue);if((0,X.L)(Ne))return function(Ne,Ue){return we((0,X.Q)(Ne),Ue)}(Ne,Ue)}throw(0,ge.z)(Ne)}(Ne,Ue):(0,o.Xf)(Ne)}},9985:(St,M,R)=>{"use strict";R.d(M,{Xf:()=>Xe});var o=R(9162),C=R(1537),b=R(2442),k=R(8305),O=R(1073),U=R(9908),Y=R(3754),re=R(2317),he=R(7751),te=R(5044),J=R(5160),we=R(4816);function Xe(De){if(De instanceof k.y)return De;if(null!=De){if((0,O.c)(De))return function(De){return new k.y(Fe=>{const Ne=De[we.L]();if((0,te.m)(Ne.subscribe))return Ne.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,C.z)(De))return function(De){return new k.y(Fe=>{for(let Ne=0;Ne<De.length&&!Fe.closed;Ne++)Fe.next(De[Ne]);Fe.complete()})}(De);if((0,b.t)(De))return function(De){return new k.y(Fe=>{De.then(Ne=>{Fe.closed||(Fe.next(Ne),Fe.complete())},Ne=>Fe.error(Ne)).then(null,J.h)})}(De);if((0,U.D)(De))return ge(De);if((0,re.T)(De))return function(De){return new k.y(Fe=>{for(const Ne of De)if(Fe.next(Ne),Fe.closed)return;Fe.complete()})}(De);if((0,he.L)(De))return function(De){return ge((0,he.Q)(De))}(De)}throw(0,Y.z)(De)}function ge(De){return new k.y(Fe=>{(function(De,Fe){var Ne,Ue,ue,Me;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,o.KL)(De);!(Ue=yield Ne.next()).done;)if(Fe.next(Ue.value),Fe.closed)return}catch(q){ue={error:q}}finally{try{Ue&&!Ue.done&&(Me=Ne.return)&&(yield Me.call(Ne))}finally{if(ue)throw ue.error}}Fe.complete()})})(De,Fe).catch(Ne=>Fe.error(Ne))})}},3719:(St,M,R)=>{"use strict";R.d(M,{T:()=>U});var o=R(5373),C=R(9985),b=R(5583),k=R(7613),O=R(5947);function U(...Y){const re=(0,k.yG)(Y),he=(0,k._6)(Y,1/0),te=Y;return te.length?1===te.length?(0,C.Xf)(te[0]):(0,o.J)(he)((0,O.D)(te,re)):b.E}},8889:(St,M,R)=>{"use strict";R.d(M,{Q:()=>C});var o=R(584);class C extends o.Lv{constructor(k,O,U,Y,re){super(k),this.onFinalize=re,this._next=O?function(he){try{O(he)}catch(te){k.error(te)}}:super._next,this._error=Y?function(he){try{Y(he)}catch(te){k.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=U?function(){try{U()}catch(he){k.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var k;const{closed:O}=this;super.unsubscribe(),!O&&(null===(k=this.onFinalize)||void 0===k||k.call(this))}}},4753:(St,M,R)=>{"use strict";R.d(M,{U:()=>b});var o=R(9947),C=R(8889);function b(k,O){return(0,o.e)((U,Y)=>{let re=0;U.subscribe(new C.Q(Y,he=>{Y.next(k.call(O,he,re++))}))})}},5373:(St,M,R)=>{"use strict";R.d(M,{J:()=>b});var o=R(5724),C=R(4623);function b(k=1/0){return(0,o.z)(C.y,k)}},5724:(St,M,R)=>{"use strict";R.d(M,{z:()=>re});var o=R(4753),C=R(9985),b=R(9947),O=(R(8395),R(8889)),Y=R(5044);function re(he,te,J=1/0){return(0,Y.m)(te)?re((we,Xe)=>(0,o.U)((qe,je)=>te(we,qe,Xe,je))((0,C.Xf)(he(we,Xe))),J):("number"==typeof te&&(J=te),(0,b.e)((we,Xe)=>function(he,te,J,we,Xe,qe,je,ze){const Ie=[];let ge=0,X=0,Se=!1;const De=()=>{Se&&!Ie.length&&!ge&&te.complete()},Fe=Ue=>ge<we?Ne(Ue):Ie.push(Ue),Ne=Ue=>{ge++;let ue=!1;(0,C.Xf)(J(Ue,X++)).subscribe(new O.Q(te,Me=>{te.next(Me)},()=>{ue=!0},void 0,()=>{if(ue)try{for(ge--;Ie.length&&ge<we;){const Me=Ie.shift();Ne(Me)}De()}catch(Me){te.error(Me)}}))};return he.subscribe(new O.Q(te,Fe,()=>{Se=!0,De()})),()=>{}}(we,Xe,he,J)))}},4763:(St,M,R)=>{"use strict";R.d(M,{Q:()=>k});var o=R(8395),C=R(9947),b=R(8889);function k(O,U=0){return(0,C.e)((Y,re)=>{Y.subscribe(new b.Q(re,he=>(0,o.f)(re,O,()=>re.next(he),U),()=>(0,o.f)(re,O,()=>re.complete(),U),he=>(0,o.f)(re,O,()=>re.error(he),U)))})}},3174:(St,M,R)=>{"use strict";R.d(M,{B:()=>U});var o=R(5947),C=R(9468),b=R(273),k=R(584),O=R(9947);function U(re={}){const{connector:he=(()=>new b.x),resetOnError:te=!0,resetOnComplete:J=!0,resetOnRefCountZero:we=!0}=re;return Xe=>{let qe=null,je=null,ze=null,Ie=0,ge=!1,X=!1;const Se=()=>{null==je||je.unsubscribe(),je=null},De=()=>{Se(),qe=ze=null,ge=X=!1},Fe=()=>{const Ne=qe;De(),null==Ne||Ne.unsubscribe()};return(0,O.e)((Ne,Ue)=>{Ie++,!X&&!ge&&Se();const ue=ze=null!=ze?ze:he();Ue.add(()=>{Ie--,0===Ie&&!X&&!ge&&(je=Y(Fe,we))}),ue.subscribe(Ue),qe||(qe=new k.Hp({next:Me=>ue.next(Me),error:Me=>{X=!0,Se(),je=Y(De,te,Me),ue.error(Me)},complete:()=>{ge=!0,Se(),je=Y(De,J),ue.complete()}}),(0,o.D)(Ne).subscribe(qe))})(Xe)}}function Y(re,he,...te){return!0===he?(re(),null):!1===he?null:he(...te).pipe((0,C.q)(1)).subscribe(()=>re())}},5222:(St,M,R)=>{"use strict";R.d(M,{R:()=>C});var o=R(9947);function C(b,k=0){return(0,o.e)((O,U)=>{U.add(b.schedule(()=>O.subscribe(U),k))})}},9468:(St,M,R)=>{"use strict";R.d(M,{q:()=>k});var o=R(5583),C=R(9947),b=R(8889);function k(O){return O<=0?()=>o.E:(0,C.e)((U,Y)=>{let re=0;U.subscribe(new b.Q(Y,he=>{++re<=O&&(Y.next(he),O<=re&&Y.complete())}))})}},7384:(St,M,R)=>{"use strict";R.d(M,{b:()=>O});var o=R(5044),C=R(9947),b=R(8889),k=R(4623);function O(U,Y,re){const he=(0,o.m)(U)||Y||re?{next:U,error:Y,complete:re}:U;return he?(0,C.e)((te,J)=>{var we;null===(we=he.subscribe)||void 0===we||we.call(he);let Xe=!0;te.subscribe(new b.Q(J,qe=>{var je;null===(je=he.next)||void 0===je||je.call(he,qe),J.next(qe)},()=>{var qe;Xe=!1,null===(qe=he.complete)||void 0===qe||qe.call(he),J.complete()},qe=>{var je;Xe=!1,null===(je=he.error)||void 0===je||je.call(he,qe),J.error(qe)},()=>{var qe,je;Xe&&(null===(qe=he.unsubscribe)||void 0===qe||qe.call(he)),null===(je=he.finalize)||void 0===je||je.call(he)}))}):k.y}},2869:(St,M,R)=>{"use strict";R.d(M,{o:()=>O});var o=R(7908);class C extends o.w0{constructor(Y,re){super()}schedule(Y,re=0){return this}}const b={setInterval(...U){const{delegate:Y}=b;return((null==Y?void 0:Y.setInterval)||setInterval)(...U)},clearInterval(U){const{delegate:Y}=b;return((null==Y?void 0:Y.clearInterval)||clearInterval)(U)},delegate:void 0};var k=R(3980);class O extends C{constructor(Y,re){super(Y,re),this.scheduler=Y,this.work=re,this.pending=!1}schedule(Y,re=0){if(this.closed)return this;this.state=Y;const he=this.id,te=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(te,he,re)),this.pending=!0,this.delay=re,this.id=this.id||this.requestAsyncId(te,this.id,re),this}requestAsyncId(Y,re,he=0){return b.setInterval(Y.flush.bind(Y,this),he)}recycleAsyncId(Y,re,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return re;b.clearInterval(re)}execute(Y,re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Y,re);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Y,re){let te,he=!1;try{this.work(Y)}catch(J){he=!0,te=J||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:Y,scheduler:re}=this,{actions:he}=re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,k.P)(he,this),null!=Y&&(this.id=this.recycleAsyncId(re,Y,null)),this.delay=null,super.unsubscribe()}}}},8843:(St,M,R)=>{"use strict";R.d(M,{v:()=>b});var o=R(1733);class C{constructor(O,U=C.now){this.schedulerActionCtor=O,this.now=U}schedule(O,U=0,Y){return new this.schedulerActionCtor(this,O).schedule(Y,U)}}C.now=o.l.now;class b extends C{constructor(O,U=C.now){super(O,U),this.actions=[],this._active=!1,this._scheduled=void 0}flush(O){const{actions:U}=this;if(this._active)return void U.push(O);let Y;this._active=!0;do{if(Y=O.execute(O.state,O.delay))break}while(O=U.shift());if(this._active=!1,Y){for(;O=U.shift();)O.unsubscribe();throw Y}}}},2210:(St,M,R)=>{"use strict";R.d(M,{z:()=>b,P:()=>k});var o=R(2869);const b=new(R(8843).v)(o.o),k=b},1733:(St,M,R)=>{"use strict";R.d(M,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},2496:(St,M,R)=>{"use strict";R.d(M,{z:()=>o});const o={setTimeout(...C){const{delegate:b}=o;return((null==b?void 0:b.setTimeout)||setTimeout)(...C)},clearTimeout(C){const{delegate:b}=o;return((null==b?void 0:b.clearTimeout)||clearTimeout)(C)},delegate:void 0}},5497:(St,M,R)=>{"use strict";R.d(M,{h:()=>C});const C="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(St,M,R)=>{"use strict";R.d(M,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(St,M,R)=>{"use strict";R.d(M,{jO:()=>k,yG:()=>O,_6:()=>U});var o=R(5044),C=R(7398);function b(Y){return Y[Y.length-1]}function k(Y){return(0,o.m)(b(Y))?Y.pop():void 0}function O(Y){return(0,C.K)(b(Y))?Y.pop():void 0}function U(Y,re){return"number"==typeof b(Y)?Y.pop():re}},3980:(St,M,R)=>{"use strict";function o(C,b){if(C){const k=C.indexOf(b);0<=k&&C.splice(k,1)}}R.d(M,{P:()=>o})},4893:(St,M,R)=>{"use strict";function o(C){const k=C(O=>{Error.call(O),O.stack=(new Error).stack});return k.prototype=Object.create(Error.prototype),k.prototype.constructor=k,k}R.d(M,{d:()=>o})},8706:(St,M,R)=>{"use strict";R.d(M,{x:()=>b,O:()=>k});var o=R(5367);let C=null;function b(O){if(o.v.useDeprecatedSynchronousErrorHandling){const U=!C;if(U&&(C={errorThrown:!1,error:null}),O(),U){const{errorThrown:Y,error:re}=C;if(C=null,Y)throw re}}else O()}function k(O){o.v.useDeprecatedSynchronousErrorHandling&&C&&(C.errorThrown=!0,C.error=O)}},8395:(St,M,R)=>{"use strict";function o(C,b,k,O=0,U=!1){const Y=b.schedule(function(){k(),U?C.add(this.schedule(null,O)):this.unsubscribe()},O);if(C.add(Y),!U)return Y}R.d(M,{f:()=>o})},4623:(St,M,R)=>{"use strict";function o(C){return C}R.d(M,{y:()=>o})},1537:(St,M,R)=>{"use strict";R.d(M,{z:()=>o});const o=C=>C&&"number"==typeof C.length&&"function"!=typeof C},9908:(St,M,R)=>{"use strict";R.d(M,{D:()=>C});var o=R(5044);function C(b){return Symbol.asyncIterator&&(0,o.m)(null==b?void 0:b[Symbol.asyncIterator])}},5044:(St,M,R)=>{"use strict";function o(C){return"function"==typeof C}R.d(M,{m:()=>o})},1073:(St,M,R)=>{"use strict";R.d(M,{c:()=>b});var o=R(4816),C=R(5044);function b(k){return(0,C.m)(k[o.L])}},2317:(St,M,R)=>{"use strict";R.d(M,{T:()=>b});var o=R(5497),C=R(5044);function b(k){return(0,C.m)(null==k?void 0:k[o.h])}},2442:(St,M,R)=>{"use strict";R.d(M,{t:()=>C});var o=R(5044);function C(b){return(0,o.m)(null==b?void 0:b.then)}},7751:(St,M,R)=>{"use strict";R.d(M,{Q:()=>b,L:()=>k});var o=R(9162),C=R(5044);function b(O){return(0,o.FC)(this,arguments,function*(){const Y=O.getReader();try{for(;;){const{value:re,done:he}=yield(0,o.qq)(Y.read());if(he)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(re)}}finally{Y.releaseLock()}})}function k(O){return(0,C.m)(null==O?void 0:O.getReader)}},7398:(St,M,R)=>{"use strict";R.d(M,{K:()=>C});var o=R(5044);function C(b){return b&&(0,o.m)(b.schedule)}},9947:(St,M,R)=>{"use strict";R.d(M,{A:()=>C,e:()=>b});var o=R(5044);function C(k){return(0,o.m)(null==k?void 0:k.lift)}function b(k){return O=>{if(C(O))return O.lift(function(U){try{return k(U,this)}catch(Y){this.error(Y)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(St,M,R)=>{"use strict";function o(){}R.d(M,{Z:()=>o})},5160:(St,M,R)=>{"use strict";R.d(M,{h:()=>b});var o=R(5367),C=R(2496);function b(k){C.z.setTimeout(()=>{const{onUnhandledError:O}=o.v;if(!O)throw k;O(k)})}},3754:(St,M,R)=>{"use strict";function o(C){return new TypeError(`You provided ${null!==C&&"object"==typeof C?"an invalid object":`'${C}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(M,{z:()=>o})},6945:(St,M,R)=>{"use strict";var o=R(3668);let C=null;function b(){return C}const Y=new o.OlP("DocumentToken");let re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.LFG)(J)},providedIn:"platform"}),n})();const te=new o.OlP("Location Initialized");let J=(()=>{class n extends re{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return b().getBaseHref(this._doc)}onPopState(t){const r=b().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=b().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){we()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){we()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:function(){return new J((0,o.LFG)(Y))},providedIn:"platform"}),n})();function we(){return!!window.history.pushState}function qe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function je(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function(n){const e=(0,o.LFG)(Y).location;return new Se((0,o.LFG)(re),e&&e.origin||"")}()},providedIn:"root"}),n})();const X=new o.OlP("appBaseHref");let Se=(()=>{class n extends Ie{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+ze(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+ze(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(re),o.LFG(X,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends Ie{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=qe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+ze(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+ze(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(re),o.LFG(X,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t,r){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=je(ue(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ze,n.joinWithSlash=qe,n.stripTrailingSlash=je,n.\u0275fac=function(t){return new(t||n)(o.LFG(Ie),o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:function(){return new Fe((0,o.LFG)(Ie),(0,o.LFG)(re))},providedIn:"root"}),n})();function ue(n){return n.replace(/\/index.html$/,"")}var Q=(()=>((Q=Q||{})[Q.Zero=0]="Zero",Q[Q.One=1]="One",Q[Q.Two=2]="Two",Q[Q.Few=3]="Few",Q[Q.Many=4]="Many",Q[Q.Other=5]="Other",Q))();const Xr=o.kL8;class Mr{}let Bn=(()=>{class n extends Mr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Xr(r||this.locale)(t)){case Q.Zero:return"zero";case Q.One:return"one";case Q.Two:return"two";case Q.Few:return"few";case Q.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.soG))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Or(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Go{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let es=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,u)=>{if(null==i.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new Go(null,this._ngForOf,-1,-1),null===u?void 0:u),p=new Oi(i,h);r.push(p)}else if(null==u)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const h=this._viewContainer.get(s);this._viewContainer.move(h,u);const p=new Oi(i,h);r.push(p)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const u=this._viewContainer.get(i);u.context.index=i,u.context.count=s,u.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Oi{constructor(e,t){this.record=e,this.view=t}}let ei=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Es,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ts("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ts("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Es{constructor(){this.$implicit=null,this.ngIf=null}}function ts(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(e)}'.`)}class mr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let eo=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),ti=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new mr(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(eo,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Zr=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[{provide:Mr,useClass:Bn}]}),n})();const He="browser";function Qe(n){return n===He}function yt(n){return"server"===n}let ln=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new nr((0,o.LFG)(Y),window)}),n})();class nr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Pr(this.window.history)||Pr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Pr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ro{}class $o extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new $o,C||(C=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Wo=Wo||document.querySelector("base"),Wo?Wo.getAttribute("href"):null);return null==t?null:function(n){xi=xi||document.createElement("a"),xi.setAttribute("href",n);const e=xi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Or(document.cookie,e)}}let xi,Wo=null;const qo=new o.OlP("TRANSITION_ID"),sr=[{provide:o.ip1,useFactory:function(n,e,t){return()=>{t.get(o.CZH).donePromise.then(()=>{const r=b(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[qo,Y,o.zs3],multi:!0}];class bl{static init(){(0,o.VLi)(new bl)}addToWindow(e){o.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(r=>{const i=o.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?b().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ma=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const wl=new o.OlP("EventManagerPlugins");let Wi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(wl),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class pc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=b().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Zo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),cn=(()=>{class n extends Zo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(El),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(El))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function El(n){b().remove(n)}const Ko={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Va=/%COMP%/g;function Do(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Do(n,i,t):(i=i.replace(Va,n),t.push(i))}return t}function Kr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Yo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ni(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case o.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new im(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case o.ifc.ShadowDom:return new Fh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Do(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Wi),o.LFG(cn),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Ni{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ko[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ko[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ko[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(o.JOm.DashCase|o.JOm.Important)?e.style.setProperty(t,r,i&o.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&o.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kr(r)):this.eventManager.addEventListener(e,t,Kr(r))}}class im extends Ni{constructor(e,t,r,i){super(e),this.component=r;const s=Do(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(Va,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Va,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fh extends Ni{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Do(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ua=(()=>{class n extends pc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=["alt","control","meta","shift"],Hs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Qo={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let io=(()=>{class n extends pc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>b().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="";if(Sl.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),u+=p+".")}),u+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Dl.hasOwnProperty(e)&&(e=Dl[e]))}return Hs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Sl.forEach(s=>{s!=i&&Qo[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const mc=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:He},{provide:o.g9A,useValue:function(){$o.makeCurrent(),bl.init()},multi:!0},{provide:Y,useFactory:function(){return(0,o.RDi)(document),document},deps:[]}]),ja=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function(){return new o.qLn},deps:[]},{provide:wl,useClass:Ua,multi:!0,deps:[Y,o.R0b,o.Lbi]},{provide:wl,useClass:io,multi:!0,deps:[Y]},{provide:Yo,useClass:Yo,deps:[Wi,cn,o.AFp]},{provide:o.FYo,useExisting:Yo},{provide:Zo,useExisting:cn},{provide:cn,useClass:cn,deps:[Y]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:Wi,useClass:Wi,deps:[wl,o.R0b]},{provide:ro,useClass:ma,deps:[]}];let Ml=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:o.AFp,useValue:t.appId},{provide:qo,useExisting:o.AFp},sr]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(n,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:ja,imports:[be,o.hGG]}),n})();"undefined"!=typeof window&&window;let za=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):o.LFG(Vh),r},providedIn:"root"}),n})(),Vh=(()=>{class n extends za{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case o.q3G.NONE:return r;case o.q3G.HTML:return(0,o.qzn)(r,"HTML")?(0,o.z3N)(r):(0,o.EiD)(this._doc,String(r)).toString();case o.q3G.STYLE:return(0,o.qzn)(r,"Style")?(0,o.z3N)(r):r;case o.q3G.SCRIPT:if((0,o.qzn)(r,"Script"))return(0,o.z3N)(r);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.yhl)(r),(0,o.qzn)(r,"URL")?(0,o.z3N)(r):(0,o.mCW)(String(r));case o.q3G.RESOURCE_URL:if((0,o.qzn)(r,"ResourceURL"))return(0,o.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,o.JVY)(t)}bypassSecurityTrustStyle(t){return(0,o.L6k)(t)}bypassSecurityTrustScript(t){return(0,o.eBb)(t)}bypassSecurityTrustUrl(t){return(0,o.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,o.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function(n){return new Vh(n.get(Y))}(o.LFG(o.zs3)),r},providedIn:"root"}),n})();var Tr=R(5947),va=R(7613);function xt(...n){const e=(0,va.yG)(n);return(0,Tr.D)(n,e)}var rn=R(273);class pi extends rn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var kr=R(8305);const{isArray:ba}=Array,{getPrototypeOf:Nl,prototype:Ga,keys:Gr}=Object;function Fl(n){if(1===n.length){const e=n[0];if(ba(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&Nl(n)===Ga}(e)){const t=Gr(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ea=R(4623),Bt=R(4753);const{isArray:Uh}=Array;function ta(n){return(0,Bt.U)(e=>function(n,e){return Uh(e)?n(...e):n(e)}(n,e))}function Ec(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var dr=R(8889),Ll=R(8395);function zs(...n){const e=(0,va.yG)(n),t=(0,va.jO)(n),{args:r,keys:i}=Fl(n);if(0===r.length)return(0,Tr.D)([],e);const s=new kr.y(function(n,e,t=ea.y){return r=>{Gs(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let p=0;p<i;p++)Gs(e,()=>{const y=(0,Tr.D)(n[p],e);let I=!1;y.subscribe(new dr.Q(r,x=>{s[p]=x,I||(I=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ec(i,u):ea.y));return t?s.pipe(ta(t)):s}function Gs(n,e,t){n?(0,Ll.f)(t,n,e):e()}const wa=(0,R(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var so=R(5373);function Ao(...n){return(0,so.J)(1)((0,Tr.D)(n,(0,va.yG)(n)))}var Li=R(9985);function oo(n){return new kr.y(e=>{(0,Li.Xf)(n()).subscribe(e)})}var $a=R(5583),ao=R(7908),Yr=R(9947);function Ea(){return(0,Yr.e)((n,e)=>{let t=null;n._refCount++;const r=new dr.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Vl extends kr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ao.w0;const t=this.getSubject();e.add(this.source.subscribe(new dr.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ao.w0.EMPTY)}return e}refCount(){return Ea()(this)}}function Qr(n,e){return(0,Yr.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new dr.Q(r,p=>{null==i||i.unsubscribe();let y=0;const I=s++;(0,Li.Xf)(n(p,I)).subscribe(i=new dr.Q(r,x=>r.next(e?e(p,x,I,y++):x),()=>{i=null,h()}))},()=>{u=!0,h()}))})}var br=R(9468);function Bi(...n){const e=(0,va.yG)(n);return(0,Yr.e)((t,r)=>{(e?Ao(n,t,e):Ao(n,t)).subscribe(r)})}function xo(n,e,t,r,i){return(s,u)=>{let h=t,p=e,y=0;s.subscribe(new dr.Q(u,I=>{const x=y++;p=h?n(p,I,x):(h=!0,I),r&&u.next(p)},i&&(()=>{h&&u.next(p),u.complete()})))}}function fs(n,e){return(0,Yr.e)(xo(n,e,arguments.length>=2,!0))}function Xn(n,e){return(0,Yr.e)((t,r)=>{let i=0;t.subscribe(new dr.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function $s(n){return(0,Yr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new dr.Q(t,void 0,void 0,u=>{s=(0,Li.Xf)(n(u,$s(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var gr=R(5724),Cs=R(5044);function Wa(n,e){return(0,Cs.m)(e)?(0,gr.z)(n,e,1):(0,gr.z)(n,1)}function Lr(n){return n<=0?()=>$a.E:(0,Yr.e)((e,t)=>{let r=[];e.subscribe(new dr.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qa(n=K_){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe(new dr.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function K_(){return new wa}function lm(n){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe(new dr.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ul(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((i,s)=>n(i,s,r)):ea.y,(0,br.q)(1),t?lm(e):qa(()=>new wa))}var Mi=R(7384);function pu(n){return(0,Yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class ns{constructor(e,t){this.id=e,this.url=t}}class ud extends ns{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $r extends ns{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Za extends ns{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jl extends ns{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dd extends ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hh extends ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ps extends ns{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lo extends ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hl extends ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _u{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ra{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const In="primary";class qi{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function co(n){return new qi(n)}const Ws="ngNavigationCancelingError";function hd(n){const e=Error("NavigationCancelingError: "+n);return e[Ws]=!0,e}function cm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function uo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ko(n[i],e[i]))return!1;return!0}function ko(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function vu(n){return Array.prototype.concat.apply([],n)}function Gl(n){return n.length>0?n[n.length-1]:null}function Sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ms(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,Tr.D)(Promise.resolve(n)):xt(n)}const fd={exact:function pd(n,e,t){if(!Mt(n.segments,e.segments)||!Z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pd(n.children[r],e.children[r],t))return!1;return!0},subset:A},Ka={exact:function(n,e){return uo(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ko(n[t],e[t]))},ignored:()=>!0};function $l(n,e,t){return fd[t.paths](n.root,e.root,t.matrixParams)&&Ka[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function A(n,e,t){return P(n,e,e.segments,t)}function P(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Mt(i,t)||e.hasChildren()||!Z(i,t,r))}if(n.segments.length===t.length){if(!Mt(n.segments,t)||!Z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!A(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Mt(n.segments,i)&&Z(n.segments,i,r)&&n.children[In])&&P(n.children[In],e,s,r)}}function Z(n,e,t){return e.every((r,i)=>Ka[t](n[i].parameters,r.parameters))}class Ce{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=co(this.queryParams)),this._queryParamMap}toString(){return En.serialize(this)}}class ke{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Sr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ni(this)}}class et{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=co(this.parameters)),this._parameterMap}toString(){return md(this)}}function Mt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class yn{}class Wn{parse(e){const t=new nw(e);return new Ce(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${hr(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Is(t)}=${Is(i)}`).join("&"):`${Is(t)}=${Is(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const En=new Wn;function ni(n){return n.segments.map(e=>md(e)).join("/")}function hr(n,e){if(!n.hasChildren())return ni(n);if(e){const t=n.children[In]?hr(n.children[In],!1):"",r=[];return Sr(n.children,(i,s)=>{s!==In&&r.push(`${s}:${hr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Sr(n.children,(r,i)=>{i===In&&(t=t.concat(e(r,i)))}),Sr(n.children,(r,i)=>{i!==In&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===In?[hr(n.children[In],!1)]:[`${i}:${hr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[In]?`${ni(n)}/${t[0]}`:`${ni(n)}/(${t.join("//")})`}}function ia(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Is(n){return ia(n).replace(/%3B/gi,";")}function ho(n){return ia(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ts(n){return decodeURIComponent(n)}function Ia(n){return Ts(n.replace(/\+/g,"%20"))}function md(n){return`${ho(n.path)}${function(n){return Object.keys(n).map(e=>`;${ho(e)}=${ho(n[e])}`).join("")}(n.parameters)}`}const Ya=/^[^\/()?;=#]+/;function Qa(n){const e=n.match(Ya);return e?e[0]:""}const X_=/^[^=?&#]+/,gd=/^[^&#]+/;class nw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[In]=new ke(e,t)),r}parseSegment(){const e=Qa(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new et(Ts(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qa(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qa(this.remaining);i&&(r=i,this.capture(r))}e[Ts(t)]=Ts(r)}parseQueryParam(e){const t=function(n){const e=n.match(X_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(gd);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Ia(t),s=Ia(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qa(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=In);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[In]:new ke([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Gh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$h(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$h(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Tc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tc(e,this._root).map(t=>t.value)}}function $h(n,e){if(n===e.value)return e;for(const t of e.children){const r=$h(n,t);if(r)return r}return null}function Tc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Tc(n,t);if(r.length)return r.unshift(e),r}return[]}class fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Wl extends Gh{constructor(e,t){super(e),this.snapshot=t,_d(this,e)}toString(){return this.snapshot.toString()}}function dm(n,e){const t=function(n,e){const u=new ql([],{},{},"",{},In,e,null,n.root,-1,{});return new qh("",new fo(u,[]))}(n,e),r=new pi([new et("",{})]),i=new pi({}),s=new pi({}),u=new pi({}),h=new pi(""),p=new Sc(r,i,u,h,s,In,e,t.root);return p.snapshot=t.root,new Wl(new fo(p,[]),t)}class Sc{constructor(e,t,r,i,s,u,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Bt.U)(e=>co(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Bt.U)(e=>co(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Eu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:kt(kt({},e.params),t.params),data:kt(kt({},e.data),t.data),resolve:kt(kt({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ql{constructor(e,t,r,i,s,u,h,p,y,I,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=I,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=co(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=co(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qh extends Gh{constructor(e,t){super(t),this.url=e,_d(this,t)}toString(){return Ja(this._root)}}function _d(n,e){e.value._routerState=n,e.children.forEach(t=>_d(n,t))}function Ja(n){const e=n.children.length>0?` { ${n.children.map(Ja).join(", ")} } `:"";return`${n.value}${e}`}function Zh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,uo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),uo(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!uo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),uo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Kh(n,e){const t=uo(n.params,e.params)&&function(n,e){return Mt(n,e)&&n.every((t,r)=>uo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Kh(n.parent,e.parent))}function Cu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Cu(n,r,i);return Cu(n,r)})}(n,e,t);return new fo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>Cu(n,h)),u}}const r=function(n){return new Sc(new pi(n.url),new pi(n.params),new pi(n.queryParams),new pi(n.fragment),new pi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Cu(n,s));return new fo(r,i)}}function Zl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Iu(n){return"object"==typeof n&&null!=n&&n.outlets}function Tu(n,e,t,r,i){let s={};return r&&Sr(r,(u,h)=>{s[h]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`}),new Ce(t.root===n?e:fm(t.root,n,e),s,i)}function fm(n,e,t){const r={};return Sr(n.children,(i,s)=>{r[s]=i===e?t:fm(i,e,t)}),new ke(n.segments,r)}class Yh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zl(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Iu);if(i&&i!==Gl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ac{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gm(n,e,t){if(n||(n=new ke([],{})),0===n.segments.length&&n.hasChildren())return Qh(n,e,t);const r=function(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(Iu(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!_(p,y,u))return s;r+=2}else{if(!_(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new ke(n.segments.slice(0,r.pathIndex),{});return s.children[In]=new ke(n.segments.slice(r.pathIndex),n.children),Qh(s,0,i)}return r.match&&0===i.length?new ke(n.segments,{}):r.match&&!n.hasChildren()?Kl(n,e,t):r.match?Qh(n,0,i):Kl(n,e,t)}function Qh(n,e,t){if(0===t.length)return new ke(n.segments,{});{const r=function(n){return Iu(n[0])?n[0].outlets:{[In]:n}}(t),i={};return Sr(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=gm(n.children[u],e,s))}),Sr(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new ke(n.segments,i)}}function Kl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Iu(s)){const p=w(s.outlets);return new ke(r,p)}if(0===i&&Zl(t[0])){r.push(new et(n.segments[e].path,g(t[0]))),i++;continue}const u=Iu(s)?s.outlets[In]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&Zl(h)?(r.push(new et(u,g(h))),i+=2):(r.push(new et(u,{})),i++)}return new ke(r,{})}function w(n){const e={};return Sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Kl(new ke([],{}),0,t))}),e}function g(n){const e={};return Sr(n,(t,r)=>e[r]=`${t}`),e}function _(n,e,t){return n==t.path&&uo(e,t.parameters)}class H{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Xa(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Sr(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xa(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xa(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Xa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ra(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gu(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Zh(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Zh(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=p,u.outlet&&u.outlet.activateWith(i,p),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Ye{constructor(e,t){this.routes=e,this.module=t}}function mt(n){return"function"==typeof n}function Zt(n){return n instanceof Ce}const Da=Symbol("INITIAL_VALUE");function xc(){return Qr(n=>zs(n.map(e=>e.pipe((0,br.q)(1),Bi(Da)))).pipe(fs((e,t)=>{let r=!1;return t.reduce((i,s,u)=>i!==Da?i:(s===Da&&(r=!0),r||!1!==s&&u!==t.length-1&&!Zt(s)?i:s),e)},Da),Xn(e=>e!==Da),(0,Bt.U)(e=>Zt(e)?e:!0===e),(0,br.q)(1)))}class Xh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Mc,this.attachRef=null}}class Mc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Xh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let yd=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=s||In,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new vd(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Mc),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class vd{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sc?this.route:e===Mc?this.childContexts:this.parent.get(e,t)}}let kc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},directives:[yd],encapsulation:2}),n})();function bd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Su(r,_m(e,r))}}function Su(n,e){n.children&&bd(n.children,e)}function _m(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ri(n){const e=n.children&&n.children.map(ri),t=e?ds(kt({},n),{children:e}):kt({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==In&&(t.component=kc),t}function Ss(n){return n.outlet||In}function ym(n,e){const t=n.filter(r=>Ss(r)===e);return t.push(...n.filter(r=>Ss(r)!==e)),t}const vm={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Jh(n,e,t){var h;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?kt({},vm):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||cm)(t,n,e);if(!i)return kt({},vm);const s={};Sr(i.posParams,(p,y)=>{s[y]=p.path});const u=i.consumed.length>0?kt(kt({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:u,positionalParamSegments:null!=(h=i.posParams)?h:{}}}function bm(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>sy(n,e,r)&&Ss(r)!==In)}(n,t,r)){const u=new ke(e,function(n,e,t,r){const i={};i[In]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ss(s)!==In){const u=new ke([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Ss(s)]=u}return i}(n,e,r,new ke(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>sy(n,e,r))}(n,t,r)){const u=new ke(n.segments,function(n,e,t,r,i,s){const u={};for(const h of r)if(sy(n,t,h)&&!i[Ss(h)]){const p=new ke([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Ss(h)]=p}return kt(kt({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new ke(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function sy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function LS(n,e,t,r){return!!(Ss(n)===r||r!==In&&sy(e,t,n))&&("**"===n.path||Jh(e,n,t).matched)}function wd(n,e,t){return 0===e.length&&!n.children[t]}class Zi{constructor(e){this.segmentGroup=e||null}}class wm{constructor(e){this.urlTree=e}}function ef(n){return new kr.y(e=>e.error(new Zi(n)))}function oy(n){return new kr.y(e=>e.error(new wm(n)))}function Ds(n){return new kr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class BS{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(o.h0i)}apply(){const e=bm(this.urlTree.root,[],[],this.config).segmentGroup,t=new ke(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,In).pipe((0,Bt.U)(s=>this.createUrlTree(Em(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe($s(s=>{if(s instanceof wm)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Zi?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,In).pipe((0,Bt.U)(i=>this.createUrlTree(Em(i),e.queryParams,e.fragment))).pipe($s(i=>{throw i instanceof Zi?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ke([],{[In]:e}):e;return new Ce(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Bt.U)(s=>new ke([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Tr.D)(i).pipe(Wa(s=>{const u=r.children[s],h=ym(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,Bt.U)(p=>({segment:p,outlet:s})))}),fs((s,u)=>(s[u.outlet]=u.segment,s),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((i,s)=>n(i,s,r)):ea.y,Lr(1),t?lm(e):qa(()=>new wa))}())}expandSegment(e,t,r,i,s,u){return(0,Tr.D)(r).pipe(Wa(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe($s(y=>{if(y instanceof Zi)return xt(null);throw y}))),Ul(h=>!!h),$s((h,p)=>{if(h instanceof wa||"EmptyError"===h.name){if(wd(t,i,s))return xt(new ke([],{}));throw new Zi(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return LS(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):ef(t):ef(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oy(s):this.lineralizeSegments(r,s).pipe((0,gr.z)(u=>{const h=new ke(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:p,lastChild:y,positionalParamSegments:I}=Jh(t,i,s);if(!h)return ef(t);const x=this.applyRedirectCommands(p,i.redirectTo,I);return i.redirectTo.startsWith("/")?oy(x):this.lineralizeSegments(i,x).pipe((0,gr.z)($=>this.expandSegment(e,t,r,$.concat(s.slice(y)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?xt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Bt.U)($=>(r._loadedConfig=$,new ke(i,{})))):xt(new ke(i,{}));const{matched:u,consumedSegments:h,lastChild:p}=Jh(t,r,i);if(!u)return ef(t);const y=i.slice(p);return this.getChildConfig(e,r,i).pipe((0,gr.z)(x=>{const $=x.module,oe=x.routes,{segmentGroup:ve,slicedSegments:Ge}=bm(t,h,y,oe),ot=new ke(ve.segments,ve.children);if(0===Ge.length&&ot.hasChildren())return this.expandChildren($,oe,ot).pipe((0,Bt.U)(Ht=>new ke(h,Ht)));if(0===oe.length&&0===Ge.length)return xt(new ke(h,{}));const Tt=Ss(r)===s;return this.expandSegment($,ot,oe,Ge,Tt?In:s,!0).pipe((0,Bt.U)(Qt=>new ke(h.concat(Qt.segments),Qt.children)))}))}getChildConfig(e,t,r){return t.children?xt(new Ye(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?xt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,gr.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,Bt.U)(s=>(t._loadedConfig=s,s))):(n=t,new kr.y(e=>e.error(hd(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):xt(new Ye([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?xt(i.map(u=>{const h=e.get(u);let p;if((n=h)&&mt(n.canLoad))p=h.canLoad(t,r);else{if(!mt(h))throw new Error("Invalid CanLoad guard");p=h(t,r)}var n;return ms(p)})).pipe(xc(),(0,Mi.b)(u=>{if(!Zt(u))return;const h=hd(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,Bt.U)(u=>!0===u)):xt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return xt(r);if(i.numberOfChildren>1||!i.children[In])return Ds(e.redirectTo);i=i.children[In]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ce(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Sr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Sr(t.children,(h,p)=>{u[p]=this.createSegmentGroup(e,h,r,i)}),new ke(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Em(n){const e={};for(const r of Object.keys(n.children)){const s=Em(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function(n){if(1===n.numberOfChildren&&n.children[In]){const e=n.children[In];return new ke(n.segments.concat(e.segments),e.children)}return n}(new ke(n.segments,e))}class ly{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cm{constructor(e,t){this.component=e,this.route=t}}function rw(n,e,t){const r=n._root;return Du(r,e?e._root:null,t,[r.value])}function Im(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Du(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Xa(e);return n.children.forEach(u=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mt(n.url,e.url)||!uo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kh(n,e)||!uo(n.queryParams,e.queryParams);default:return!Kh(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new ly(r)):(s.data=u.data,s._resolvedData=u._resolvedData),Du(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Cm(h.outlet.component,u))}else u&&Tm(e,h,i),i.canActivateChecks.push(new ly(r)),Du(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Sr(s,(u,h)=>Tm(u,t.getContext(h),i)),i}function Tm(n,e,t){const r=Xa(n),i=n.value;Sr(r,(s,u)=>{Tm(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Cm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class QS{}function uy(n){return new kr.y(e=>e.error(n))}class JS{constructor(e,t,r,i,s,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const e=bm(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,In);if(null===t)return null;const r=new ql([],Object.freeze({}),Object.freeze(kt({},this.urlTree.queryParams)),this.urlTree.fragment,{},In,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fo(r,t),s=new qh(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=Eu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const u=t.children[s],h=ym(e,s),p=this.processSegmentGroup(h,u,s);if(null===p)return null;r.push(...p)}const i=sw(r);return i.sort((e,t)=>e.value.outlet===In?-1:t.value.outlet===In?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const s of e){const u=this.processSegmentAgainstRoute(s,t,r,i);if(null!==u)return u}return wd(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!LS(e,t,r,i))return null;let s,u=[],h=[];if("**"===e.path){const oe=r.length>0?Gl(r).parameters:{};s=new ql(r,oe,Object.freeze(kt({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(e),Ss(e),e.component,e,ow(t),Au(t)+r.length,nD(e))}else{const oe=Jh(t,e,r);if(!oe.matched)return null;u=oe.consumedSegments,h=r.slice(oe.lastChild),s=new ql(u,oe.parameters,Object.freeze(kt({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(e),Ss(e),e.component,e,ow(t),Au(t)+u.length,nD(e))}const p=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:y,slicedSegments:I}=bm(t,u,h,p.filter(oe=>void 0===oe.redirectTo),this.relativeLinkResolution);var n;if(0===I.length&&y.hasChildren()){const oe=this.processChildren(p,y);return null===oe?null:[new fo(s,oe)]}if(0===p.length&&0===I.length)return[new fo(s,[])];const x=Ss(e)===i,$=this.processSegment(p,y,I,x?In:i);return null===$?null:[new fo(s,$)]}}function iw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sw(n){const e=[],t=new Set;for(const r of n){if(!iw(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=sw(r.children);e.push(new fo(r.value,i))}return e.filter(r=>!t.has(r))}function ow(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Au(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Aa(n){return n.data||{}}function nD(n){return n.resolve||{}}function rf(n){return Qr(e=>{const t=n(e);return t?(0,Tr.D)(t).pipe((0,Bt.U)(()=>e)):xt(e)})}class sf extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Sm=new o.OlP("ROUTES");class hy{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Bt.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=s.create(e);return new Ye(vu(u.injector.get(Sm,void 0,o.XFs.Self|o.XFs.Optional)).map(ri),u)}),$s(s=>{throw t._loader$=void 0,s}));return t._loader$=new Vl(i,()=>new rn.x).pipe(Ea()),t._loader$}loadModuleFactory(e){return ms(e()).pipe((0,gr.z)(t=>t instanceof o.YKP?xt(t):(0,Tr.D)(this.compiler.compileModuleAsync(t))))}}class py{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function cw(n){throw n}function lP(n,e,t){return e.parse("/")}function xu(n,e){return xt(null)}const my={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(t,r,i,s,u,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rn.x,this.errorHandler=cw,this.malformedUriErrorHandler=lP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xu,afterPreactivation:xu},this.urlHandlingStrategy=new py,this.routeReuseStrategy=new sf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(o.h0i),this.console=u.get(o.c2e);const x=u.get(o.R0b);this.isNgZoneEnabled=x instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=new Ce(new ke([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hy(u,h,$=>this.triggerEvent(new na($)),$=>this.triggerEvent(new Mo($))),this.routerState=dm(this.currentUrlTree,this.rootComponentType),this.transitions=new pi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Xn(i=>0!==i.id),(0,Bt.U)(i=>ds(kt({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Qr(i=>{let s=!1,u=!1;return xt(i).pipe((0,Mi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?ds(kt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Dm(h.source)&&(this.browserUrlTree=h.extractedUrl),xt(h).pipe(Qr(x=>{const $=this.transitions.getValue();return r.next(new ud(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),$!==this.transitions.getValue()?$a.E:Promise.resolve(x)}),function(n,e,t,r){return Qr(i=>function(n,e,t,r,i){return new BS(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Bt.U)(s=>ds(kt({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mi.b)(x=>{this.currentNavigation=ds(kt({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,i){return(0,gr.z)(s=>function(n,e,t,r,i="emptyOnly",s="legacy"){try{const u=new JS(n,e,t,r,i,s).recognize();return null===u?uy(new QS):xt(u)}catch(u){return uy(u)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,Bt.U)(u=>ds(kt({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mi.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const oe=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(oe,x)}this.browserUrlTree=x.urlAfterRedirects}const $=new dd(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next($)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:oe,source:ve,restoredState:Ge,extras:ot}=h,Tt=new ud($,this.serializeUrl(oe),ve,Ge);r.next(Tt);const jt=dm(oe,this.rootComponentType).snapshot;return xt(ds(kt({},h),{targetSnapshot:jt,urlAfterRedirects:oe,extras:ds(kt({},ot),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),$a.E}),rf(h=>{const{targetSnapshot:p,id:y,extractedUrl:I,rawUrl:x,extras:{skipLocationChange:$,replaceUrl:oe}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:I,rawUrlTree:x,skipLocationChange:!!$,replaceUrl:!!oe})}),(0,Mi.b)(h=>{const p=new Hh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,Bt.U)(h=>ds(kt({},h),{guards:rw(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,e){return(0,gr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?xt(ds(kt({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Tr.D)(n).pipe((0,gr.z)(i=>function(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?xt(s.map(h=>{const p=Im(h,e,i);let y;if(function(n){return n&&mt(n.canDeactivate)}(p))y=ms(p.canDeactivate(n,e,t,r));else{if(!mt(p))throw new Error("Invalid CanDeactivate guard");y=ms(p(n,e,t,r))}return y.pipe(Ul())})).pipe(xc()):xt(!0)}(i.component,i.route,t,e,r)),Ul(i=>!0!==i,!0))}(u,r,i,n).pipe((0,gr.z)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,e,t,r){return(0,Tr.D)(e).pipe(Wa(i=>Ao(function(n,e){return null!==n&&e&&e(new mu(n)),xt(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new _u(n)),xt(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>oo(()=>xt(u.guards.map(p=>{const y=Im(p,u.node,t);let I;if(function(n){return n&&mt(n.canActivateChild)}(y))I=ms(y.canActivateChild(r,n));else{if(!mt(y))throw new Error("Invalid CanActivateChild guard");I=ms(y(r,n))}return I.pipe(Ul())})).pipe(xc())));return xt(s).pipe(xc())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return xt(!0);const i=r.map(s=>oo(()=>{const u=Im(s,e,t);let h;if(function(n){return n&&mt(n.canActivate)}(u))h=ms(u.canActivate(e,n));else{if(!mt(u))throw new Error("Invalid CanActivate guard");h=ms(u(e,n))}return h.pipe(Ul())}));return xt(i).pipe(xc())}(n,i.route,t))),Ul(i=>!0!==i,!0))}(r,s,n,e):xt(h)),(0,Bt.U)(h=>ds(kt({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Mi.b)(h=>{if(Zt(h.guardsResult)){const y=hd(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new ps(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Xn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),rf(h=>{if(h.guards.canActivateChecks.length)return xt(h).pipe((0,Mi.b)(p=>{const y=new lo(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Qr(p=>{let y=!1;return xt(p).pipe(function(n,e){return(0,gr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return xt(t);let s=0;return(0,Tr.D)(i).pipe(Wa(u=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return xt({});const s={};return(0,Tr.D)(i).pipe((0,gr.z)(u=>function(n,e,t,r){const i=Im(n,e,r);return ms(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Mi.b)(h=>{s[u]=h}))),Lr(1),(0,gr.z)(()=>Object.keys(s).length===i.length?xt(s):$a.E))}(n._resolve,n,e,r).pipe((0,Bt.U)(s=>(n._resolvedData=s,n.data=kt(kt({},n.data),Eu(n,t).resolve),null)))}(u.route,r,n,e)),(0,Mi.b)(()=>s++),Lr(1),(0,gr.z)(u=>s===i.length?xt(t):$a.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Mi.b)(p=>{const y=new Hl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),rf(h=>{const{targetSnapshot:p,id:y,extractedUrl:I,rawUrl:x,extras:{skipLocationChange:$,replaceUrl:oe}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:I,rawUrlTree:x,skipLocationChange:!!$,replaceUrl:!!oe})}),(0,Bt.U)(h=>{const p=function(n,e,t){const r=Cu(n,e._root,t?t._root:void 0);return new Wl(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return ds(kt({},h),{targetRouterState:p})}),(0,Mi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Bt.U)(r=>(new H(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Mi.b)({next(){s=!0},complete(){s=!0}}),pu(()=>{var h;s||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(h=this.currentNavigation)?void 0:h.id)===i.id&&(this.currentNavigation=null)}),$s(h=>{if(u=!0,function(n){return n&&n[Ws]}(h)){const p=Zt(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Za(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),p?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dm(i.source)};this.scheduleNavigation(I,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new jl(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return $a.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(kt(kt({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var h;const i={replaceUrl:!0},s=(null==(h=t.state)?void 0:h.navigationId)?t.state:null;if(s){const p=kt({},s);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bd(t),this.config=t.map(ri),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,I=p?this.currentUrlTree.fragment:u;let x=null;switch(h){case"merge":x=kt(kt({},this.currentUrlTree.queryParams),s);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=s||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,i){if(0===t.length)return Tu(e.root,e.root,e,r,i);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Yh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Sr(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Yh(t,e,r)}(t);if(s.toRoot())return Tu(e.root,new ke([],{}),e,r,i);const u=function(n,e,t){if(n.isAbsolute)return new Ac(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Ac(s,s===e.root,0)}const r=Zl(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ac(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=u.processChildren?Qh(u.segmentGroup,u.index,s.commands):gm(u.segmentGroup,u.index,s.commands);return Tu(u.segmentGroup,h,e,r,i)}(y,this.currentUrlTree,t,x,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zt(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?kt({},my):!1===r?kt({},uw):r,Zt(t))return $l(this.currentUrlTree,t,i);const s=this.parseUrl(t);return $l(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $r(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){var Tt,jt,Qt;if(this.disposed)return Promise.resolve(!1);const h=this.transitions.value,p=Dm(r)&&h&&!Dm(h.source),y=h.rawUrl.toString()===t.toString(),I=h.id===(null==(Tt=this.currentNavigation)?void 0:Tt.id);if(p&&y&&I)return Promise.resolve(!0);let $,oe,ve;u?($=u.resolve,oe=u.reject,ve=u.promise):ve=new Promise((Ht,Sn)=>{$=Ht,oe=Sn});const Ge=++this.navigationId;let ot;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ot=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(jt=this.browserPageId)?jt:0:(null!=(Qt=this.browserPageId)?Qt:0)+1):ot=0,this.setTransition({id:Ge,targetPageId:ot,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:$,reject:oe,promise:ve,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ve.catch(Ht=>Promise.reject(Ht))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=kt(kt({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Za(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Dm(n){return"imperative"!==n}let Ed=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this.commands=null,this.onChanges=new rn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Cd(this.skipLocationChange),replaceUrl:Cd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(gs),o.Y36(Sc),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&o.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})(),Am=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new rn.x,this.subscription=t.events.subscribe(s=>{s instanceof $r&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){if(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Cd(this.skipLocationChange),replaceUrl:Cd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(gs),o.Y36(Sc),o.Y36(Ie))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&o.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&o.uIk("target",r.target)("href",r.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})();function Cd(n){return""===n||!!n}class _y{}class vy{preload(e,t){return xt(null)}}let xm=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new hy(i,r,p=>t.triggerEvent(new na(p)),p=>t.triggerEvent(new Mo(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(t=>t instanceof $r),Wa(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(o.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,Tr.D)(i).pipe((0,so.J)(),(0,Bt.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?xt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,gr.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(gs),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG(_y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),by=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ud?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $r&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new zl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Rc=new o.OlP("ROUTER_CONFIGURATION"),wy=new o.OlP("ROUTER_FORROOT_GUARD"),Mu=[Fe,{provide:yn,useClass:Wn},{provide:gs,useFactory:function(n,e,t,r,i,s,u={},h,p){const y=new gs(null,n,e,t,r,i,vu(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(I=>{var x,$;null==(x=console.group)||x.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null==($=console.groupEnd)||$.call(console)}),y},deps:[yn,Mc,Fe,o.zs3,o.Sil,Sm,Rc,[class{},new o.FiY],[class{},new o.FiY]]},Mc,{provide:Sc,useFactory:function(n){return n.routerState.root},deps:[gs]},xm,vy,class{preload(e,t){return t().pipe($s(()=>xt(null)))}},{provide:Rc,useValue:{enableTracing:!1}}];function dw(){return new o.PXZ("Router",gs)}let Id=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Mu,Ey(t),{provide:wy,useFactory:aD,deps:[[gs,new o.FiY,new o.tp0]]},{provide:Rc,useValue:r||{}},{provide:Ie,useFactory:Mm,deps:[re,[new o.tBr(X),new o.FiY],Rc]},{provide:by,useFactory:oD,deps:[gs,ln,Rc]},{provide:_y,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:vy},{provide:o.PXZ,multi:!0,useFactory:dw},[km,{provide:o.ip1,multi:!0,useFactory:Rm,deps:[km]},{provide:Iy,useFactory:Om,deps:[km]},{provide:o.tb,multi:!0,useExisting:Iy}]]}}static forChild(t){return{ngModule:n,providers:[Ey(t)]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(wy,8),o.LFG(gs,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function oD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new by(n,e,t)}function Mm(n,e,t={}){return t.useHash?new De(n,e):new Se(n,e)}function aD(n){return"guarded"}function Ey(n){return[{provide:o.deG,multi:!0,useValue:n},{provide:Sm,multi:!0,useValue:n}]}let km=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new rn.x}appInitializer(){return this.injector.get(te,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(gs),u=this.injector.get(Rc);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?xt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Rc),i=this.injector.get(xm),s=this.injector.get(by),u=this.injector.get(gs),h=this.injector.get(o.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Rm(n){return n.appInitializer.bind(n)}function Om(n){return n.bootstrapListener.bind(n)}const Iy=new o.OlP("Router Initializer"),Sy=[];let af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Id.forRoot(Sy)],Id]}),n})();class Pm{constructor(e=!1,t,r=!0){this._multiple=e,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new rn.x,t&&t.length&&(e?t.forEach(i=>this._markSelected(i)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}var lf=R(6921);function ii(n){return(0,Yr.e)((e,t)=>{(0,Li.Xf)(n).subscribe(new dr.Q(t,()=>t.complete(),lf.Z)),!t.closed&&e.subscribe(t)})}function si(n){return null!=n&&"false"!=`${n}`}function Ki(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function cf(n){return Array.isArray(n)?n:[n]}function Vi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ql(n){return n instanceof o.SBq?n.nativeElement:n}const pD=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,o.f3M)(Y)}}),mD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Td=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new o.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?mD.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pD,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class yw extends class{constructor(){this.expansionModel=new Pm(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(r=>this._trackByValue(r)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(r=>this._trackByValue(r)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}{constructor(e,t,r){super(),this.getLevel=e,this.isExpandable=t,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const r=[];for(let i=this.dataNodes.indexOf(e)+1;i<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[i]);i++)r.push(this.dataNodes[i]);return r}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}const po=new o.OlP("CDK_TREE_NODE_OUTLET_NODE");let Dd=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(po,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class _D{constructor(e){this.$implicit=e}}let Ad=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),tl=(()=>{class n{constructor(t,r){this._differs=t,this._changeDetectorRef=r,this._onDestroy=new rn.x,this._levels=new Map,this.viewChange=new pi({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(r=>!r.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;!function(n){return n&&"function"==typeof n.connect}(this._dataSource)?function(n){return!!n&&(n instanceof kr.y||(0,Cs.m)(n.lift)&&(0,Cs.m)(n.subscribe))}(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=xt(this._dataSource)):t=this._dataSource.connect(this),t&&(this._dataSubscription=t.pipe(ii(this._onDestroy)).subscribe(r=>this.renderNodeChanges(r)))}renderNodeChanges(t,r=this._dataDiffer,i=this._nodeOutlet.viewContainer,s){const u=r.diff(t);!u||(u.forEachOperation((h,p,y)=>{if(null==h.previousIndex)this.insertNode(t[y],y,i,s);else if(null==y)i.remove(p),this._levels.delete(h.item);else{const I=i.get(p);i.move(I,y)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,r){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(r,t))||this._defaultNodeDef}insertNode(t,r,i,s){const u=this._getNodeDef(t,r),h=new _D(t);h.level=this.treeControl.getLevel?this.treeControl.getLevel(t):void 0!==s&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,h.level),(i||this._nodeOutlet.viewContainer).createEmbeddedView(u.template,h,r),Xl.mostRecentTreeNode&&(Xl.mostRecentTreeNode.data=t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.ZZ4),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(t,r,i){if(1&t&&o.Suo(i,Ad,5),2&t){let s;o.iGM(s=o.CRH())&&(r._nodeDefs=s)}},viewQuery:function(t,r){if(1&t&&o.Gf(Dd,7),2&t){let i;o.iGM(i=o.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,r){1&t&&o.GkF(0,0)},directives:[Dd],encapsulation:2}),n})(),Xl=(()=>{class n{constructor(t,r){this._elementRef=t,this._tree=r,this._destroyed=new rn.x,this._dataChanges=new rn.x,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(n){let e=n.parentElement;for(;e&&!Fm(e);)e=e.parentElement;return e?e.classList.contains("cdk-nested-tree-node")?Ki(e.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(tl))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("aria-expanded",r.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();function Fm(n){const e=n.classList;return!(!(null==e?void 0:e.contains("cdk-nested-tree-node"))&&!(null==e?void 0:e.contains("cdk-tree")))}const Ay=/([A-Za-z%]+)$/;let xy,df=(()=>{class n{constructor(t,r,i,s){this._treeNode=t,this._tree=r,this._element=i,this._dir=s,this._destroyed=new rn.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe(ii(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,r=null==this._level?t:this._level;return"number"==typeof r?`${r*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const r=this._paddingIndent();if(r!==this._currentPadding||t){const i=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",u="paddingLeft"===s?"paddingRight":"paddingLeft";i.style[s]=r||"",i.style[u]="",this._currentPadding=r}}_setLevelInput(t){this._level=Ki(t,null),this._setPadding()}_setIndentInput(t){let r=t,i="px";if("string"==typeof t){const s=t.split(Ay);r=s[0],i=s[1]||i}this.indentUnits=i,this._indent=Ki(r),this._setPadding()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Xl),o.Y36(tl),o.Y36(o.SBq),o.Y36(Td,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),ww=(()=>{class n{constructor(t,r){this._tree=t,this._treeNode=r,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=si(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(tl),o.Y36(Xl))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,r){1&t&&o.NdJ("click",function(s){return r._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),vD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();try{xy="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){xy=!1}let hf,Yi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Qe(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!xy)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ew=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function wD(){if(hf)return hf;if("object"!=typeof document||!document)return hf=new Set(Ew),hf;let n=document.createElement("input");return hf=new Set(Ew.filter(e=>(n.setAttribute("type",e),n.type===e))),hf}let xd,Md,kd,Iw;function Lm(n){return function(){if(null==xd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xd=!0}))}finally{xd=xd||!1}return xd}()?n:!!n.capture}function ED(){if(null==kd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return kd=!1,kd;if("scrollBehavior"in document.documentElement.style)kd=!0;else{const n=Element.prototype.scrollTo;kd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return kd}function Bm(){if("object"!=typeof document||!document)return 0;if(null==Md){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),Md=0,0===n.scrollLeft&&(n.scrollLeft=1,Md=0===n.scrollLeft?1:2),n.remove()}return Md}function CD(n){if(function(){if(null==Iw){const n="undefined"!=typeof document?document.head:null;Iw=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Iw}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Rd(n){return n.composedPath?n.composedPath()[0]:n.target}function Tw(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function yf(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Nc=R(2210);function vf(n,e=Nc.z){return(0,Yr.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=u+n,I=e.now();if(I<y)return i=this.schedule(void 0,y-I),void r.add(i);h()}t.subscribe(new dr.Q(r,y=>{s=y,u=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}function Zw(n){return Xn((e,t)=>n<=t)}function Hm(n,e=ea.y){return n=null!=n?n:eA,(0,Yr.e)((t,r)=>{let i,s=!0;t.subscribe(new dr.Q(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function eA(n,e){return n===e}class Ma extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new rn.x,this._typeaheadSubscription=ao.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new rn.x,this.change=new rn.x,e instanceof o.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Mi.b)(t=>this._pressedLetters.push(t)),vf(e),Xn(()=>this._pressedLetters.length>0),(0,Bt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,u=r[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||yf(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof o.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let iA=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===zm(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=zm(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||nE(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function zm(n){if(!nE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class cA{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,br.q)(1)).subscribe(e)}}let uA=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new cA(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(iA),o.LFG(o.R0b),o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function $m(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const rl=new o.OlP("cdk-input-modality-detector-options"),wf={ignoreKeys:[18,17,224,91,16]},oa=Lm({passive:!0,capture:!0});let Wm=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new pi(null),this._lastTouchMs=0,this._onKeydown=u=>{var h,p;(null==(p=null==(h=this._options)?void 0:h.ignoreKeys)?void 0:p.some(y=>y===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Rd(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(rE(u)?"keyboard":"mouse"),this._mostRecentTarget=Rd(u))},this._onTouchstart=u=>{$m(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Rd(u))},this._options=kt(kt({},wf),s),this.modalityDetected=this._modality.pipe(Zw(1)),this.modalityChanged=this.modalityDetected.pipe(Hm()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,oa),i.addEventListener("mousedown",this._onMousedown,oa),i.addEventListener("touchstart",this._onTouchstart,oa)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,oa),document.removeEventListener("mousedown",this._onMousedown,oa),document.removeEventListener("touchstart",this._onTouchstart,oa))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi),o.LFG(o.R0b),o.LFG(Y),o.LFG(rl,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aa=new o.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Pd=new o.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Ru=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,u;return 1===r.length&&"number"==typeof r[0]?u=r[0]:[s,u]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==u&&i&&(u=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof u&&(this._previousTimeout=setTimeout(()=>this.clear(),u)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,r;clearTimeout(this._previousTimeout),null==(t=this._liveElement)||t.remove(),this._liveElement=null,null==(r=this._currentResolve)||r.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(aa,8),o.LFG(o.R0b),o.LFG(Y),o.LFG(Pd,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nd=new o.OlP("cdk-focus-monitor-default-options"),ec=Lm({passive:!0,capture:!0});let Fc=(()=>{class n{constructor(t,r,i,s,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new rn.x,this._rootNodeFocusAndBlurListener=h=>{const p=Rd(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let I=p;I;I=I.parentElement)y.call(this,h,I)},this._document=s,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=Ql(t);if(!this._platform.isBrowser||1!==i.nodeType)return xt(null);const s=CD(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const h={checkChildren:r,subject:new rn.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=Ql(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Ql(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Rd(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ec),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ec)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ii(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ec),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ec),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.R0b),o.LFG(Yi),o.LFG(Wm),o.LFG(Y,8),o.LFG(Nd,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ou="cdk-high-contrast-black-on-white",Pu="cdk-high-contrast-white-on-black",qm="cdk-high-contrast-active";let iE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(qm),t.remove(Ou),t.remove(Pu),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(qm),t.add(Ou)):2===r&&(t.add(qm),t.add(Pu))}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi),o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jy{}const il="*";function Zm(n,e){return{type:7,name:n,definitions:e,options:{}}}function Fd(n,e=null){return{type:4,styles:e,timings:n}}function Hy(n,e=null){return{type:2,steps:n,options:e}}function tc(n){return{type:6,styles:n,offset:null}}function Ld(n,e,t){return{type:0,name:n,styles:e,options:t}}function If(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function oE(n){Promise.resolve(null).then(n)}class Tf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){oE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class aE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?oE(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Km(){return"undefined"!=typeof window&&void 0!==window.document}function zy(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Nu(n){switch(n.length){case 0:return new Tf;case 1:return n[0];default:return new aE(n)}}function mA(n,e,t,r,i={},s={}){const u=[],h=[];let p=-1,y=null;if(r.forEach(I=>{const x=I.offset,$=x==p,oe=$&&y||{};Object.keys(I).forEach(ve=>{let Ge=ve,ot=I[ve];if("offset"!==ve)switch(Ge=e.normalizePropertyName(Ge,u),ot){case"!":ot=i[ve];break;case il:ot=s[ve];break;default:ot=e.normalizeStyleValue(ve,Ge,ot,u)}oe[Ge]=ot}),$||h.push(oe),y=oe,p=x}),u.length){const I="\n - ";throw new Error(`Unable to animate due to the following errors:${I}${u.join(I)}`)}return h}function lE(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Gy(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Gy(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Gy(t,"destroy",n)))}}function Gy(n,e,t){const r=t.totalTime,s=Ym(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function Ym(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function la(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function cE(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Lc=(n,e)=>!1,$y=(n,e)=>!1,Wy=(n,e,t)=>[];const uE=zy();(uE||"undefined"!=typeof Element)&&(Lc=Km()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),$y=(()=>{if(uE||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):$y}})(),Wy=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let sl=null,hE=!1;function Qm(n){sl||(sl=("undefined"!=typeof document?document.body:null)||{},hE=!!sl.style&&"WebkitAppearance"in sl.style);let e=!0;return sl.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in sl.style,!e&&hE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in sl.style)),e}const qy=$y,Zy=Lc,Ky=Wy;function fE(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let Yy=(()=>{class n{validateStyleProperty(t){return Qm(t)}matchesElement(t,r){return qy(t,r)}containsElement(t,r){return Zy(t,r)}query(t,r,i){return Ky(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],p){return new Tf(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Qy=(()=>{class n{}return n.NOOP=new Yy,n})();const mE="ng-enter",Bd="ng-leave",Bc="ng-trigger",Df=".ng-trigger",Xm="ng-animating",Af=".ng-animating";function Fu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xf(parseFloat(e[1]),e[2])}function xf(n,e){return"s"===e?1e3*n:n}function Vd(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=xf(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=xf(parseFloat(p),h[4]));const y=h[5];y&&(u=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:u}}(n,e,t)}function Mf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ol(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Mf(n,t);return t}function Jm(n,e,t){return t?e+":"+t+";":""}function ev(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Jm(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Jm(0,bE(t),n.style[t]));n.setAttribute("style",e)}function ka(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Of(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),zy()&&ev(n))}function nc(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Of(t);n.style[r]=""}),zy()&&ev(n))}function Ud(n){return Array.isArray(n)?1==n.length?n[0]:Hy(n):n}const kf=new RegExp("{{\\s*(.+?)\\s*}}","g");function eg(n){let e=[];if("string"==typeof n){let t;for(;t=kf.exec(n);)e.push(t[1]);kf.lastIndex=0}return e}function tg(n,e,t){const r=n.toString(),i=r.replace(kf,(s,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function Rf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const vE=/-+([a-z0-9])/g;function Of(n){return n.replace(vE,(...e)=>e[1].toUpperCase())}function bE(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wE(n,e){return 0===n||0===e}function tv(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],u=[];if(r.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(p){h[p]=ng(n,p)})}}return e}function mo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function ng(n,e){return window.getComputedStyle(n)[e]}function EE(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const p=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],u=r[3];e.push(nv(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(nv(u,i))}(r,t,e)):t.push(n),t}const Pf=new Set(["true","1"]),Nf=new Set(["false","0"]);function nv(n,e){const t=Pf.has(n)||Nf.has(n),r=Pf.has(e)||Nf.has(e);return(i,s)=>{let u="*"==n||n==i,h="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?Pf.has(n):Nf.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?Pf.has(e):Nf.has(e)),u&&h}}const TE=new RegExp("s*:selfs*,?","g");function SE(n,e,t){return new _A(n).build(e,t)}class _A{constructor(e){this._driver=e}build(e,t){const r=new Qi(t);return this._resetContextStyleTimingState(r),mo(this,Ud(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(I=>{p.name=I,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};if(r.styles.forEach(h=>{if(rg(h)){const p=h;Object.keys(p).forEach(y=>{eg(p[y]).forEach(I=>{u.hasOwnProperty(I)||s.add(I)})})}}),s.size){const h=Rf(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=mo(this,Ud(e.animation),t);return{type:1,matchers:EE(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Vc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>mo(this,r,t)),options:Vc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=mo(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:Vc(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return iv(Vd(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=iv(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||Vd(r,e),iv(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:tc({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const y={};r.easing&&(y.easing=r.easing),u=tc(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==il?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,s=null;return r.forEach(u=>{if(rg(u)){const h=u,p=h.easing;if(p&&(s=p,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const p=t.collectedStyles[t.currentQuerySelector],y=p[h];let I=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),I=!1),s=y.startTime),I&&(p[h]={startTime:s,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=eg(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const u=[];let h=!1,p=!1,y=0;const I=e.steps.map(Tt=>{const jt=this._makeStyleAst(Tt,t);let Qt=null!=jt.offset?jt.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(rg(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(rg(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(jt.styles),Ht=0;return null!=Qt&&(s++,Ht=jt.offset=Qt),p=p||Ht<0||Ht>1,h=h||Ht<y,y=Ht,u.push(Ht),jt});p&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const x=e.steps.length;let $=0;s>0&&s<x?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&($=1/(x-1));const oe=x-1,ve=t.currentTime,Ge=t.currentAnimateTimings,ot=Ge.duration;return I.forEach((Tt,jt)=>{const Qt=$>0?jt==oe?1:$*jt:u[jt],Ht=Qt*ot;t.currentTime=ve+Ge.delay+Ht,Ge.duration=Ht,this._validateStyleAst(Tt,t),Tt.offset=Qt,r.styles.push(Tt)}),r}visitReference(e,t){return{type:8,animation:mo(this,Ud(e.animation),t),options:Vc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Vc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Vc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(TE,"")),n=n.replace(/@\*/g,Df).replace(/@\w+/g,t=>Df+"-"+t.substr(1)).replace(/:animating/g,Af),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,la(t.collectedStyles,t.currentQuerySelector,{});const h=mo(this,Ud(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:Vc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Vd(e.timings,t.errors,!0);return{type:12,animation:mo(this,Ud(e.animation),t),timings:r,options:null}}}class Qi{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rg(n){return!Array.isArray(n)&&"object"==typeof n}function Vc(n){return n?(n=Mf(n)).params&&(n.params=function(n){return n?Mf(n):null}(n.params)):n={},n}function iv(n,e,t){return{duration:n,delay:e,easing:t}}function ig(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class Ff{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const wA=new RegExp(":enter","g"),EA=new RegExp(":leave","g");function sg(n,e,t,r,i,s={},u={},h,p,y=[]){return(new hN).buildKeyframes(n,e,t,r,i,s,u,h,p,y)}class hN{buildKeyframes(e,t,r,i,s,u,h,p,y,I=[]){y=y||new Ff;const x=new Lf(e,t,y,i,s,I,[]);x.options=p,x.currentTimeline.setStyles([u],null,x.errors,p),mo(this,r,x);const $=x.timelines.filter(oe=>oe.containsAnimation());if($.length&&Object.keys(h).length){const oe=$[$.length-1];oe.allowOnlyTimelineStyles()||oe.setStyles([h],null,x.errors,p)}return $.length?$.map(oe=>oe.buildKeyframes()):[ig(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?Fu(r.duration):null,h=null!=r.delay?Fu(r.delay):null;return 0!==u&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),mo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zd);const u=Fu(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>mo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Fu(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),mo(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Vd(t.params?tg(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Fu(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zd);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,I)=>{t.currentQueryIndex=I;const x=t.createSubContext(e.options,y);s&&x.delayNextStep(s),y===t.element&&(p=x.currentTimeline),mo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const I=t.currentTimeline;p&&I.delayNextStep(p);const x=I.currentTime;mo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const zd={};class Lf{constructor(e,t,r,i,s,u,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Ro(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Fu(r.duration)),null!=r.delay&&(i.delay=Fu(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=tg(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Lf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=zd,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new CA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(wA,"."+this._enterClassName)).replace(EA,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class Ro{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ro(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||il,this._currentKeyframe[t]=il}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},u=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=il})):ol(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const p=tg(u[h],s,r);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:il),this._updateStyle(h,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=ol(h,!0);Object.keys(y).forEach(I=>{const x=y[I];"!"==x?e.add(I):x==il&&t.add(I)}),r||(y.offset=p/this.duration),i.push(y)});const s=e.size?Rf(e.values()):[],u=t.size?Rf(t.values()):[];if(r){const h=i[0],p=Mf(h);h.offset=0,p.offset=1,i=[h,p]}return ig(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class CA extends Ro{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,p=ol(e[0],!1);p.offset=0,s.push(p);const y=ol(e[0],!1);y.offset=kE(h),s.push(y);const I=e.length-1;for(let x=1;x<=I;x++){let $=ol(e[x],!1);$.offset=kE((t+$.offset*r)/u),s.push($)}r=u,t=0,i="",e=s}return ig(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function kE(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Oo{}class RE extends Oo{normalizePropertyName(e,t){return Of(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(TA[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+s}}const TA=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function OE(n,e,t,r,i,s,u,h,p,y,I,x,$){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:I,totalTime:x,errors:$}}const sv={};class og{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):u}build(e,t,r,i,s,u,h,p,y,I){const x=[],$=this.ast.options&&this.ast.options.params||sv,ve=this.buildStyles(r,h&&h.params||sv,x),Ge=p&&p.params||sv,ot=this.buildStyles(i,Ge,x),Tt=new Set,jt=new Map,Qt=new Map,Ht="void"===i,Sn={params:kt(kt({},$),Ge)},jn=I?[]:sg(e,t,this.ast.animation,s,u,ve,ot,Sn,y,x);let Ar=0;if(jn.forEach(nd=>{Ar=Math.max(nd.duration+nd.delay,Ar)}),x.length)return OE(t,this._triggerName,r,i,Ht,ve,ot,[],[],jt,Qt,Ar,x);jn.forEach(nd=>{const rd=nd.element,az=la(jt,rd,{});nd.preStyleProps.forEach(nm=>az[nm]=!0);const Xb=la(Qt,rd,{});nd.postStyleProps.forEach(nm=>Xb[nm]=!0),rd!==t&&Tt.add(rd)});const zo=Rf(Tt.values());return OE(t,this._triggerName,r,i,Ht,ve,ot,jn,zo,jt,Qt,Ar)}}class DA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Mf(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!=u&&(i[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let p=u[h];p.length>1&&(p=tg(p,i,t));const y=this.normalizer.normalizePropertyName(h,t);p=this.normalizer.normalizeStyleValue(h,y,p,t),r[y]=p})}}),r}}class AA{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new DA(i.style,i.options&&i.options.params||{},r)}),ov(this.states,"true","1"),ov(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new og(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new og(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function ov(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const ag=new Ff;class xA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=SE(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=mA(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let u;const h=new Map;if(s?(u=sg(this._driver,t,s,mE,Bd,{},{},r,ag,i),u.forEach(I=>{const x=la(h,I.element,{});I.postStyleProps.forEach($=>x[$]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((I,x)=>{Object.keys(I).forEach($=>{I[$]=this._driver.computeStyle(x,$,il)})});const y=Nu(u.map(I=>{const x=h.get(I.element);return this._buildPlayer(I,{},x)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=Ym(t,"","","");return lE(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const av="ng-animate-queued",lg="ng-animate-disabled",Vf=".ng-animate-disabled",BE=[],cv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},VE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Po="__ng_removed";class cg{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const s=Mf(e);delete s.value,this.options=s}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Gd="void",uv=new cg(Gd);class MA{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ca(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const s=la(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=la(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(ca(e,Bc),ca(e,Bc+"-"+t),h[t]=uv),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new dv(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ca(e,Bc),ca(e,Bc+"-"+t),this._engine.statesByElement.set(e,h={}));let p=h[t];const y=new cg(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[t]=y,p||(p=uv),y.value!==Gd&&p.value===y.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const Ge=[],ot=s.matchStyles(p.value,p.params,Ge),Tt=s.matchStyles(y.value,y.params,Ge);Ge.length?this._engine.reportError(Ge):this._engine.afterFlush(()=>{nc(e,ot),ka(e,Tt)})}return}const $=la(this._engine.playersByElement,e,[]);$.forEach(Ge=>{Ge.namespaceId==this.id&&Ge.triggerName==t&&Ge.queued&&Ge.destroy()});let oe=s.matchTransition(p.value,y.value,e,y.params),ve=!1;if(!oe){if(!i)return;oe=s.fallbackTransition,ve=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:oe,fromState:p,toState:y,player:u,isFallbackTransition:ve}),ve||(ca(e,av),u.onStart(()=>{$d(e,av)})),u.onDone(()=>{let Ge=this.players.indexOf(u);Ge>=0&&this.players.splice(Ge,1);const ot=this._engine.playersByElement.get(e);if(ot){let Tt=ot.indexOf(u);Tt>=0&&ot.splice(Tt,1)}}),this.players.push(u),$.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Df,!0);r.forEach(i=>{if(i[Po])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e);if(s){const u=[];if(Object.keys(s).forEach(h=>{if(this._triggers[h]){const p=this.trigger(e,h,Gd,i);p&&u.push(p)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Nu(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const p=this._triggers[u].fallbackTransition,y=r[u]||uv,I=new cg(Gd),x=new dv(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:y,toState:I,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Po];(!s||s===cv)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ca(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const p=Ym(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,lE(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kA{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new MA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const u=r[i[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(ug(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!ug(t))return;const s=t[Po];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ca(e,lg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$d(e,lg))}removeNode(e,t,r,i){if(ug(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[Po]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,s){return ug(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Df,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Af,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Nu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Po];if(t&&t.setForRemoval){if(e[Po]=cv,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Vf)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Vf,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ca(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Nu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Ff,i=[],s=new Map,u=[],h=new Map,p=new Map,y=new Map,I=new Set;this.disabledNodes.forEach(nn=>{I.add(nn);const gn=this.driver.query(nn,".ng-animate-queued",!0);for(let Rn=0;Rn<gn.length;Rn++)I.add(gn[Rn])});const x=this.bodyNode,$=Array.from(this.statesByElement.keys()),oe=HE($,this.collectedEnterElements),ve=new Map;let Ge=0;oe.forEach((nn,gn)=>{const Rn=mE+Ge++;ve.set(gn,Rn),nn.forEach(Er=>ca(Er,Rn))});const ot=[],Tt=new Set,jt=new Set;for(let nn=0;nn<this.collectedLeaveElements.length;nn++){const gn=this.collectedLeaveElements[nn],Rn=gn[Po];Rn&&Rn.setForRemoval&&(ot.push(gn),Tt.add(gn),Rn.hasAnimation?this.driver.query(gn,".ng-star-inserted",!0).forEach(Er=>Tt.add(Er)):jt.add(gn))}const Qt=new Map,Ht=HE($,Array.from(Tt));Ht.forEach((nn,gn)=>{const Rn=Bd+Ge++;Qt.set(gn,Rn),nn.forEach(Er=>ca(Er,Rn))}),e.push(()=>{oe.forEach((nn,gn)=>{const Rn=ve.get(gn);nn.forEach(Er=>$d(Er,Rn))}),Ht.forEach((nn,gn)=>{const Rn=Qt.get(gn);nn.forEach(Er=>$d(Er,Rn))}),ot.forEach(nn=>{this.processLeaveNode(nn)})});const Sn=[],jn=[];for(let nn=this._namespaceList.length-1;nn>=0;nn--)this._namespaceList[nn].drainQueuedTransitions(t).forEach(Rn=>{const Er=Rn.player,Bs=Rn.element;if(Sn.push(Er),this.collectedEnterElements.length){const su=Bs[Po];if(su&&su.setForMove)return void Er.destroy()}const iu=!x||!this.driver.containsElement(x,Bs),Ba=Qt.get(Bs),Nh=ve.get(Bs),Hi=this._buildInstruction(Rn,r,Nh,Ba,iu);if(Hi.errors&&Hi.errors.length)jn.push(Hi);else{if(iu)return Er.onStart(()=>nc(Bs,Hi.fromStyles)),Er.onDestroy(()=>ka(Bs,Hi.toStyles)),void i.push(Er);if(Rn.isFallbackTransition)return Er.onStart(()=>nc(Bs,Hi.fromStyles)),Er.onDestroy(()=>ka(Bs,Hi.toStyles)),void i.push(Er);Hi.timelines.forEach(su=>su.stretchStartingKeyframe=!0),r.append(Bs,Hi.timelines),u.push({instruction:Hi,player:Er,element:Bs}),Hi.queriedElements.forEach(su=>la(h,su,[]).push(Er)),Hi.preStyleProps.forEach((su,Jb)=>{const RS=Object.keys(su);if(RS.length){let rm=p.get(Jb);rm||p.set(Jb,rm=new Set),RS.forEach(iP=>rm.add(iP))}}),Hi.postStyleProps.forEach((su,Jb)=>{const RS=Object.keys(su);let rm=y.get(Jb);rm||y.set(Jb,rm=new Set),RS.forEach(iP=>rm.add(iP))})}});if(jn.length){const nn=[];jn.forEach(gn=>{nn.push(`@${gn.triggerName} has failed due to:\n`),gn.errors.forEach(Rn=>nn.push(`- ${Rn}\n`))}),Sn.forEach(gn=>gn.destroy()),this.reportError(nn)}const Ar=new Map,zo=new Map;u.forEach(nn=>{const gn=nn.element;r.has(gn)&&(zo.set(gn,gn),this._beforeAnimationBuild(nn.player.namespaceId,nn.instruction,Ar))}),i.forEach(nn=>{const gn=nn.element;this._getPreviousPlayers(gn,!1,nn.namespaceId,nn.triggerName,null).forEach(Er=>{la(Ar,gn,[]).push(Er),Er.destroy()})});const nd=ot.filter(nn=>hv(nn,p,y)),rd=new Map;jE(rd,this.driver,jt,y,il).forEach(nn=>{hv(nn,p,y)&&nd.push(nn)});const Xb=new Map;oe.forEach((nn,gn)=>{jE(Xb,this.driver,new Set(nn),p,"!")}),nd.forEach(nn=>{const gn=rd.get(nn),Rn=Xb.get(nn);rd.set(nn,kt(kt({},gn),Rn))});const nm=[],lz=[],cz={};u.forEach(nn=>{const{element:gn,player:Rn,instruction:Er}=nn;if(r.has(gn)){if(I.has(gn))return Rn.onDestroy(()=>ka(gn,Er.toStyles)),Rn.disabled=!0,Rn.overrideTotalTime(Er.totalTime),void i.push(Rn);let Bs=cz;if(zo.size>1){let Ba=gn;const Nh=[];for(;Ba=Ba.parentNode;){const Hi=zo.get(Ba);if(Hi){Bs=Hi;break}Nh.push(Ba)}Nh.forEach(Hi=>zo.set(Hi,Bs))}const iu=this._buildAnimation(Rn.namespaceId,Er,Ar,s,Xb,rd);if(Rn.setRealPlayer(iu),Bs===cz)nm.push(Rn);else{const Ba=this.playersByElement.get(Bs);Ba&&Ba.length&&(Rn.parentPlayer=Nu(Ba)),i.push(Rn)}}else nc(gn,Er.fromStyles),Rn.onDestroy(()=>ka(gn,Er.toStyles)),lz.push(Rn),I.has(gn)&&i.push(Rn)}),lz.forEach(nn=>{const gn=s.get(nn.element);if(gn&&gn.length){const Rn=Nu(gn);nn.setRealPlayer(Rn)}}),i.forEach(nn=>{nn.parentPlayer?nn.syncPlayerEvents(nn.parentPlayer):nn.destroy()});for(let nn=0;nn<ot.length;nn++){const gn=ot[nn],Rn=gn[Po];if($d(gn,Bd),Rn&&Rn.hasAnimation)continue;let Er=[];if(h.size){let iu=h.get(gn);iu&&iu.length&&Er.push(...iu);let Ba=this.driver.query(gn,Af,!0);for(let Nh=0;Nh<Ba.length;Nh++){let Hi=h.get(Ba[Nh]);Hi&&Hi.length&&Er.push(...Hi)}}const Bs=Er.filter(iu=>!iu.destroyed);Bs.length?NA(this,gn,Bs):this.processLeaveNode(gn)}return ot.length=0,nm.forEach(nn=>{this.players.push(nn),nn.onDone(()=>{nn.destroy();const gn=this.players.indexOf(nn);this.players.splice(gn,1)}),nn.play()}),nm}elementContainsData(e,t){let r=!1;const i=t[Po];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==Gd;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,I=y!==s,x=la(r,y,[]);this._getPreviousPlayers(y,I,u,h,t.toState).forEach(oe=>{const ve=oe.getRealPlayer();ve.beforeDestroy&&ve.beforeDestroy(),oe.destroy(),x.push(oe)})}nc(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,p=t.element,y=[],I=new Set,x=new Set,$=t.timelines.map(ve=>{const Ge=ve.element;I.add(Ge);const ot=Ge[Po];if(ot&&ot.removedBeforeQueried)return new Tf(ve.duration,ve.delay);const Tt=Ge!==p,jt=function(n){const e=[];return zE(n,e),e}((r.get(Ge)||BE).map(Ar=>Ar.getRealPlayer())).filter(Ar=>!!Ar.element&&Ar.element===Ge),Qt=s.get(Ge),Ht=u.get(Ge),Sn=mA(0,this._normalizer,0,ve.keyframes,Qt,Ht),jn=this._buildPlayer(ve,Sn,jt);if(ve.subTimeline&&i&&x.add(Ge),Tt){const Ar=new dv(e,h,Ge);Ar.setRealPlayer(jn),y.push(Ar)}return jn});y.forEach(ve=>{la(this.playersByQueriedElement,ve.element,[]).push(ve),ve.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,ve.element,ve))}),I.forEach(ve=>ca(ve,Xm));const oe=Nu($);return oe.onDestroy(()=>{I.forEach(ve=>$d(ve,Xm)),ka(p,t.toStyles)}),x.forEach(ve=>{la(i,ve,[]).push(oe)}),oe}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Tf(e.duration,e.delay)}}class dv{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Tf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>lE(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){la(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ug(n){return n&&1===n.nodeType}function UE(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function jE(n,e,t,r,i){const s=[];t.forEach(p=>s.push(UE(p)));const u=[];r.forEach((p,y)=>{const I={};p.forEach(x=>{const $=I[x]=e.computeStyle(y,x,i);(!$||0==$.length)&&(y[Po]=VE,u.push(y))}),n.set(y,I)});let h=0;return t.forEach(p=>UE(p,s[h++])),u}function HE(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:u(y),s.set(h,p),p}return e.forEach(h=>{const p=u(h);1!==p&&t.get(p).push(h)}),t}const dg="$$classes";function ca(n,e){if(n.classList)n.classList.add(e);else{let t=n[dg];t||(t=n[dg]={}),t[e]=!0}}function $d(n,e){if(n.classList)n.classList.remove(e);else{let t=n[dg];t&&delete t[e]}}function NA(n,e,t){Nu(t).onDone(()=>n.processLeaveNode(e))}function zE(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof aE?zE(r.players,e):e.push(r)}}function hv(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Uf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new kA(e,t,r),this._timelineEngine=new xA(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const p=[],y=SE(this._driver,s,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);h=function(n,e,t){return new AA(n,e,t)}(i,y,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=cE(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=cE(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function fv(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=hg(e[0]),e.length>1&&(r=hg(e[e.length-1]))):e&&(t=hg(e)),t||r?new $E(n,t,r):null}let $E=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ka(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ka(this._element,this._initialStyles),this._endStyles&&(ka(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(nc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(nc(this._element,this._endStyles),this._endStyles=null),ka(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function hg(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];WE(i)&&(e=e||{},e[i]=n[i])}return e}function WE(n){return"display"===n||"position"===n}const pv="animation",fg="animationend";class Lu{constructor(e,t,r,i,s,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function(n,e){const t=pg(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Hf(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),VA(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ZE(this._element,this._name,"paused")}resume(){ZE(this._element,this._name,"running")}setPosition(e){const t=BA(this._element,this._name);this._position=e*this._duration,Hf(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),VA(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=pg(n,"").split(","),i=jf(r,e);i>=0&&(r.splice(i,1),Hf(n,"",r.join(",")))}(this._element,this._name))}}function ZE(n,e,t){Hf(n,"PlayState",t,BA(n,e))}function BA(n,e){const t=pg(n,"");return t.indexOf(",")>0?jf(t.split(","),e):jf([t],e)}function jf(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function VA(n,e,t){t?n.removeEventListener(fg,e):n.addEventListener(fg,e)}function Hf(n,e,t,r){const i=pv+e;if(null!=r){const s=n.style[i];if(s.length){const u=s.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function pg(n,e){return n.style[pv+e]||""}class KE{constructor(e,t,r,i,s,u,h,p){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=h,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Lu(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:ng(this.element,r))})}this.currentSnapshot=e}}class jA extends Tf{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=fE(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class zf{constructor(){this._count=0}validateStyleProperty(e){return Qm(e)}matchesElement(e,t){return qy(e,t)}containsElement(e,t){return Zy(e,t)}query(e,t,r){return Ky(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>fE(h));let i=`@keyframes ${t} {\n`,s="";r.forEach(h=>{s=" ";const p=parseFloat(h.offset);i+=`${s}${100*p}% {\n`,s+=" ",Object.keys(h).forEach(y=>{const I=h[y];switch(y){case"offset":return;case"easing":return void(I&&(i+=`${s}animation-timing-function: ${I};\n`));default:return void(i+=`${s}${y}: ${I};\n`)}}),i+=`${s}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,s,u=[],h){const p=u.filter(ot=>ot instanceof KE),y={};wE(r,i)&&p.forEach(ot=>{let Tt=ot.currentSnapshot;Object.keys(Tt).forEach(jt=>y[jt]=Tt[jt])});const I=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=tv(e,t,y));if(0==r)return new jA(e,I);const x="gen_css_kf_"+this._count++,$=this.buildKeyframeElement(e,x,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild($);const ve=fv(e,t),Ge=new KE(e,t,x,r,i,s,I,ve);return Ge.onDestroy(()=>{var n;(n=$).parentNode.removeChild(n)}),Ge}}class QE{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:ng(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class XE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_v().toString()),this._cssKeyframesDriver=new zf}validateStyleProperty(e){return Qm(e)}matchesElement(e,t){return qy(e,t)}containsElement(e,t){return Zy(e,t)}query(e,t,r){return Ky(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,u);const I={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(I.easing=s);const x={},$=u.filter(ve=>ve instanceof QE);wE(r,i)&&$.forEach(ve=>{let Ge=ve.currentSnapshot;Object.keys(Ge).forEach(ot=>x[ot]=Ge[ot])});const oe=fv(e,t=tv(e,t=t.map(ve=>ol(ve,!1)),x));return new QE(e,t,I,oe)}}function _v(){return Km()&&Element.prototype.animate||{}}let eC=(()=>{class n extends jy{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Hy(t):t;return tC(this._renderer,null,r,"register",[i]),new HA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class HA extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new zA(this._id,e,t||{},this._renderer)}}class zA{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function tC(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const nC="@.disabled";let GA=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(s);return I||(I=new rC("",s,this.engine),this._rendererCache.set(s,I)),I}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=I=>{Array.isArray(I)?I.forEach(p):this.engine.registerTrigger(u,h,t,I.name,I)};return r.data.animation.forEach(p),new _g(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(Uf),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class rC{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==nC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class _g extends rC{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==nC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let oC=(()=>{class n extends Uf{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y),o.LFG(Qy),o.LFG(Oo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ra=new o.OlP("AnimationModuleType"),aC=[{provide:jy,useClass:eC},{provide:Oo,useFactory:function(){return new RE}},{provide:Uf,useClass:oC},{provide:o.FYo,useFactory:function(n,e,t){return new GA(n,e,t)},deps:[Yo,Uf,o.R0b]}],lC=[{provide:Qy,useFactory:function(){return"function"==typeof _v()?new XE:new zf}},{provide:Ra,useValue:"BrowserAnimations"},...aC],cC=[{provide:Qy,useClass:Yy},{provide:Ra,useValue:"NoopAnimations"},...aC];let yv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?cC:lC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:lC,imports:[Ml]}),n})();const yg=new o.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ci=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!Tw()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(iE),o.LFG(yg,8),o.LFG(Y))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Sd],Sd]}),n})();function dC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=si(e)}}}function Bu(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function hC(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=si(e)}}}function fC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ki(t):this.defaultTabIndex}}}function pC(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new rn.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let bg=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rx{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const wg={enterDuration:225,exitDuration:150},Eg=Lm({passive:!0}),gC=["mousedown","touchstart"],_C=["mouseup","mouseleave","touchend","touchcancel"];class yC{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ql(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=kt(kt({},wg),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=s.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=h-u+"px",I.style.top=p-u+"px",I.style.height=2*u+"px",I.style.width=2*u+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(I),window.getComputedStyle(I).getPropertyValue("opacity"),I.style.transform="scale(1)";const x=new rx(this,I,r);return x.state=0,this._activeRipples.add(x),r.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const $=x===this._mostRecentTransientRipple;x.state=1,!r.persistent&&(!$||!this._isPointerDown)&&x.fadeOut()},y),x}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=kt(kt({},wg),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ql(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(gC))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(_C),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=rE(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!$m(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Eg)})})}_removeTriggerEvents(){this._triggerElement&&(gC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Eg)}),this._pointerUpEventsRegistered&&_C.forEach(e=>{this._triggerElement.removeEventListener(e,this,Eg)}))}}const vC=new o.OlP("mat-ripple-global-options");let vv=(()=>{class n{constructor(t,r,i,s,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new yC(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:kt(kt(kt({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,kt(kt({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,kt(kt({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Yi),o.Y36(vC,8),o.Y36(Ra,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&o.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ci],ci]}),n})();var No=R(3719);const IC=fC(dC(Xl));let TC=(()=>{class n extends IC{constructor(t,r,i){super(t,r),this.tabIndex=Number(i)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(tl),o.$8M("tabindex"))},n.\u0275dir=o.lG2({type:n,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[o._Bn([{provide:Xl,useExisting:n}]),o.qOj]}),n})(),bv=(()=>{class n extends Ad{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[o._Bn([{provide:Ad,useExisting:n}]),o.qOj]}),n})(),wv=(()=>{class n extends df{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[o._Bn([{provide:df,useExisting:n}]),o.qOj]}),n})(),SC=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(po,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[o._Bn([{provide:Dd,useExisting:n}])]}),n})(),DC=(()=>{class n extends tl{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-tree"]],viewQuery:function(t,r){if(1&t&&o.Gf(SC,7),2&t){let i;o.iGM(i=o.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[o._Bn([{provide:tl,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,r){1&t&&o.GkF(0,0)},directives:[SC],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),qd=(()=>{class n extends ww{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[o._Bn([{provide:ww,useExisting:n}]),o.qOj]}),n})(),Zd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[vD,ci],ci]}),n})();class Zf{constructor(e,t,r,i){this.transformFunction=e,this.getLevel=t,this.isExpandable=r,this.getChildren=i}_flattenNode(e,t,r,i){const s=this.transformFunction(e,t);if(r.push(s),this.isExpandable(s)){const u=this.getChildren(e);u&&(Array.isArray(u)?this._flattenChildren(u,t,r,i):u.pipe((0,br.q)(1)).subscribe(h=>{this._flattenChildren(h,t,r,i)}))}return r}_flattenChildren(e,t,r,i){e.forEach((s,u)=>{let h=i.slice();h.push(u!=e.length-1),this._flattenNode(s,t+1,r,h)})}flattenNodes(e){let t=[];return e.forEach(r=>this._flattenNode(r,0,t,[])),t}expandFlattenedNodes(e,t){let r=[],i=[];return i[0]=!0,e.forEach(s=>{let u=!0;for(let h=0;h<=this.getLevel(s);h++)u=u&&i[h];u&&r.push(s),this.isExpandable(s)&&(i[this.getLevel(s)+1]=t.isExpanded(s))}),r}}class fx extends class{}{constructor(e,t,r){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new pi([]),this._expandedData=new pi([]),this._data=new pi([]),r&&(this.data=r)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){return(0,No.T)(e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,Bt.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function Ev(n,e){const t=(0,Cs.m)(n)?n:()=>n,r=i=>i.error(t());return new kr.y(e?i=>e.schedule(r,0,i):r)}var px=R(1537);const mx=["addListener","removeListener"],gx=["addEventListener","removeEventListener"],_x=["on","off"];function cl(n,e,t,r){if((0,Cs.m)(t)&&(r=t,t=void 0),r)return cl(n,e,t).pipe(ta(r));const[i,s]=function(n){return(0,Cs.m)(n.addEventListener)&&(0,Cs.m)(n.removeEventListener)}(n)?gx.map(u=>h=>n[u](e,h,t)):function(n){return(0,Cs.m)(n.addListener)&&(0,Cs.m)(n.removeListener)}(n)?mx.map(Cv(n,e)):function(n){return(0,Cs.m)(n.on)&&(0,Cs.m)(n.off)}(n)?_x.map(Cv(n,e)):[];if(!i&&(0,px.z)(n))return(0,gr.z)(u=>cl(u,e,t))((0,Li.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new kr.y(u=>{const h=(...p)=>u.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function Cv(n,e){return t=>r=>n[t](e,r)}const jc=new kr.y(lf.Z),vx={connector:()=>new rn.x};function xC(n,e=vx){const{connector:t}=e;return(0,Yr.e)((r,i)=>{const s=t();(0,Tr.D)(n(function(n){return new kr.y(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function MC(n){return(0,Bt.U)(()=>n)}function kC(n,e){return e?t=>Ao(e.pipe((0,br.q)(1),(0,Yr.e)((n,e)=>{n.subscribe(new dr.Q(e,lf.Z))})),t.pipe(kC(n))):(0,gr.z)((t,r)=>n(t,r).pipe((0,br.q)(1),MC(t)))}var Ex=R(7398);function Ig(n=0,e,t=Nc.P){let r=-1;return null!=e&&((0,Ex.K)(e)?t=e:r=e),new kr.y(i=>{let s=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const Tg="Service workers are disabled or not supported by this browser";class Sg{constructor(e){if(this.serviceWorker=e,e){const r=cl(e,"controllerchange").pipe((0,Bt.U)(()=>e.controller)),s=Ao(oo(()=>xt(e.controller)),r);this.worker=s.pipe(Xn(I=>!!I)),this.registration=this.worker.pipe(Qr(()=>e.getRegistration()));const y=cl(e,"message").pipe((0,Bt.U)(I=>I.data)).pipe(Xn(I=>I&&I.type)).pipe(function(n){return n?e=>xC(n)(e):e=>function(n,e){const t=(0,Cs.m)(n)?n:()=>n;return(0,Cs.m)(e)?xC(e,{connector:t}):r=>new Vl(r,t)}(new rn.x)(e)}());y.connect(),this.events=y}else this.worker=this.events=this.registration=(Tg,oo(()=>Ev(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe((0,br.q)(1),(0,Mi.b)(r=>{r.postMessage(kt({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Xn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,br.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Xn(t=>t.nonce===e),(0,br.q)(1),(0,Bt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let NN=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new rn.x,!t.isEnabled)return this.messages=jc,this.notificationClicks=jc,void(this.subscription=jc);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Bt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Bt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,Bt.U)(i=>i.pushManager));const r=this.pushManager.pipe(Qr(i=>i.getSubscription()));this.subscription=(0,No.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Tg));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return r.applicationServerKey=s,this.pushManager.pipe(Qr(u=>u.subscribe(r)),(0,br.q)(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,br.q)(1),Qr(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Tg))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Sg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Sv=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=jc,this.available=jc,this.activated=jc,void(this.unrecoverable=jc);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Xn(r=>"VERSION_READY"===r.type),(0,Bt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Tg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Tg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Sg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class OC{}const Dv=new o.OlP("NGSW_REGISTER_SCRIPT");function Av(n,e,t,r){return()=>{if(!Qe(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[h,...p]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":s=xt(null);break;case"registerWithDelay":s=xv(+p[0]||0);break;case"registerWhenStable":s=p[0]?(0,No.T)(Mv(n),xv(+p[0])):Mv(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(o.R0b).runOutsideAngular(()=>s.pipe((0,br.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function xv(n){return xt(null).pipe(function(n,e=Nc.z){const t=Ig(n,e);return kC(()=>t)}(n))}function Mv(n){return n.get(o.z2F).isStable.pipe(Xn(t=>t))}function Cx(n,e){return new Sg(Qe(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let Ix=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:Dv,useValue:t},{provide:OC,useValue:r},{provide:Sg,useFactory:Cx,deps:[OC,o.Lbi]},{provide:o.ip1,useFactory:Av,deps:[o.zs3,Dv,OC,o.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[NN,Sv]}),n})();var Hc=R(6670),ae=R(4213),Oa=R(1572),Pa=R(3855),rc=R(1177),Wr=R(7233);R(7713);const Ov=(0,Wr.u3)(Hc.f,!0);function Nv(){return(0,Yr.e)((n,e)=>{let t,r=!1;n.subscribe(new dr.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Kt,As=R(7905),Fv=(R(2115),R(6293)),ut=R(8239),ZC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ul={},Lv=Lv||{},Cn=ZC||self;function Rg(){}function Og(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Pg="closure_uid_"+(1e9*Math.random()>>>0),qx=0;function Zx(n,e,t){return n.call.apply(n.bind,arguments)}function Kx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function rs(n,e,t){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zx:Kx).apply(null,arguments)}function Bv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xs(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Uu(){this.s=this.s,this.o=this.o}var dF={};Uu.prototype.s=!1,Uu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Pg)&&n[Pg]||(n[Pg]=++qx)}(this);delete dF[n]}},Uu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yx=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Qx=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function Xf(n){return Array.prototype.concat.apply([],arguments)}function YC(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function eh(n){return/^[\s\xa0]*$/.test(n)}var Zs,ju=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ms(n,e){return-1!=n.indexOf(e)}function Vv(n,e){return n<e?-1:n>e?1:0}e:{var Ng=Cn.navigator;if(Ng){var Uv=Ng.userAgent;if(Uv){Zs=Uv;break e}}Zs=""}function Fg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function jv(n){const e={};for(const t in n)e[t]=n[t];return e}var Xx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<Xx.length;s++)t=Xx[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function th(n){return th[" "](n),n}th[" "]=Rg;var Bg,n,fF=Ms(Zs,"Opera"),Jf=Ms(Zs,"Trident")||Ms(Zs,"MSIE"),Jx=Ms(Zs,"Edge"),zv=Jx||Jf,Lg=Ms(Zs,"Gecko")&&!(Ms(Zs.toLowerCase(),"webkit")&&!Ms(Zs,"Edge"))&&!(Ms(Zs,"Trident")||Ms(Zs,"MSIE"))&&!Ms(Zs,"Edge"),eM=Ms(Zs.toLowerCase(),"webkit")&&!Ms(Zs,"Edge");function tM(){var n=Cn.document;return n?n.documentMode:void 0}e:{var ep="",Gv=(n=Zs,Lg?/rv:([^\);]+)(\)|;)/.exec(n):Jx?/Edge\/([\d\.]+)/.exec(n):Jf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eM?/WebKit\/(\S+)/.exec(n):fF?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gv&&(ep=Gv?Gv[1]:""),Jf){var Ks=tM();if(null!=Ks&&Ks>parseFloat(ep)){Bg=String(Ks);break e}}Bg=ep}var nM={};function $v(){return e=nM,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=ju(String(Bg)).split("."),t=ju("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Vv(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Vv(0==i[2].length,0==s[2].length)||Vv(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n}();var e}var qv=Cn.document&&Jf&&(tM()||parseInt(Bg,10))||void 0,JC=function(){if(!Cn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Cn.addEventListener("test",Rg,e),Cn.removeEventListener("test",Rg,e)}catch(t){}return n}();function ys(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function tp(n,e){if(ys.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lg){e:{try{th(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:eI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tp.Z.h.call(this)}}ys.prototype.h=function(){this.defaultPrevented=!0},xs(tp,ys);var eI={2:"touch",3:"pen",4:"mouse"};tp.prototype.h=function(){tp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var nh="closure_listenable_"+(1e6*Math.random()|0),rM=0;function iM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++rM,this.ca=this.fa=!1}function rh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _o(n){this.src=n,this.g={},this.h=0}function Zv(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Yx(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Kv(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}_o.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Kv(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new iM(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var Yv="closure_lm_"+(1e6*Math.random()|0),Vg={};function tI(n,e,t,r,i){if(r&&r.once)return iI(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)tI(n,e[s],t,r,i);return null}return t=Hu(t),n&&n[nh]?n.N(e,t,Jd(r)?!!r.capture:!!r,i):nI(n,e,t,!1,r,i)}function nI(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=Jd(i)?!!i.capture:!!i,h=Xv(n);if(h||(n[Yv]=h=new _o(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function(){var e=oM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)JC||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Qv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iI(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)iI(n,e[s],t,r,i);return null}return t=Hu(t),n&&n[nh]?n.O(e,t,Jd(r)?!!r.capture:!!r,i):nI(n,e,t,!0,r,i)}function sM(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)sM(n,e[s],t,r,i);else r=Jd(r)?!!r.capture:!!r,t=Hu(t),n&&n[nh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Kv(s=n.g[e],t,r,i))&&(rh(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Xv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Kv(e,t,r,i)),(t=-1<n?e[n]:null)&&Ug(t))}function Ug(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[nh])Zv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Qv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Xv(e))?(Zv(t,n),0==t.h&&(t.src=null,e[Yv]=null)):rh(n)}}}function Qv(n){return n in Vg?Vg[n]:Vg[n]="on"+n}function oM(n,e){if(n.ca)n=!0;else{e=new tp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ug(n),n=t.call(r,e)}return n}function Xv(n){return(n=n[Yv])instanceof _o?n:null}var jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hu(n){return"function"==typeof n?n:(n[jg]||(n[jg]=function(e){return n.handleEvent(e)}),n[jg])}function Ui(){Uu.call(this),this.i=new _o(this),this.P=this,this.I=null}function is(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ys(e,n);else if(e instanceof ys)e.target=e.target||n;else{var i=e;Hv(e=new ys(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=Hg(u,r,!0,e)&&i}if(i=Hg(u=e.g=n,r,!0,e)&&i,i=Hg(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Hg(u=e.g=t[s],r,!1,e)&&i}function Hg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==t){var h=u.listener,p=u.ia||u.src;u.fa&&Zv(n.i,u),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}xs(Ui,Uu),Ui.prototype[nh]=!0,Ui.prototype.removeEventListener=function(n,e,t,r){sM(this,n,e,t,r)},Ui.prototype.M=function(){if(Ui.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rh(t[r]);delete n.g[e],n.h--}}this.I=null},Ui.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zg=Cn.JSON.stringify;function sI(){var n=cM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jv,oI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new pF,n=>n.reset());class pF{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function mF(n){Cn.setTimeout(()=>{throw n},0)}function Gg(n,e){Jv||function(){var n=Cn.Promise.resolve(void 0);Jv=function(){n.then(gF)}}(),e0||(Jv(),e0=!0),cM.add(n,e)}var e0=!1,cM=new class{constructor(){this.h=this.g=null}add(e,t){const r=oI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function gF(){for(var n;n=sI();){try{n.h.call(n.g)}catch(t){mF(t)}var e=oI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}e0=!1}function t0(n,e){Ui.call(this),this.h=n||1,this.g=e||Cn,this.j=rs(this.kb,this),this.l=Date.now()}function aI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function lI(n,e,t){if("function"==typeof n)t&&(n=rs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Cn.setTimeout(n,e||0)}function cI(n){n.g=lI(()=>{n.g=null,n.i&&(n.i=!1,cI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xs(t0,Ui),(Kt=t0.prototype).da=!1,Kt.S=null,Kt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),is(this,"tick"),this.da&&(aI(this),this.start()))}},Kt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kt.M=function(){t0.Z.M.call(this),aI(this),delete this.g};class $g extends Uu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cI(this)}M(){super.M(),this.g&&(Cn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function np(n){Uu.call(this),this.h=n,this.g={}}xs(np,Uu);var uI=[];function n0(n,e,t,r){Array.isArray(t)||(t&&(uI[0]=t.toString()),t=uI);for(var i=0;i<t.length;i++){var s=tI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function zc(n){Fg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ug(e)},n),n.g={}}function rp(){this.g=!0}function ih(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return zg(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}np.prototype.M=function(){np.Z.M.call(this),zc(this)},np.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rp.prototype.Aa=function(){this.g=!1},rp.prototype.info=function(){};var Gc={},l0=null;function c0(){return l0=l0||new Ui}function uM(n){ys.call(this,Gc.Ma,n)}function Wg(n){const e=c0();is(e,new uM(e,n))}function dM(n,e){ys.call(this,Gc.STAT_EVENT,n),this.stat=e}function yo(n){const e=c0();is(e,new dM(e,n))}function hM(n,e){ys.call(this,Gc.Na,n),this.size=e}function qg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Cn.setTimeout(function(){n()},e)}Gc.Ma="serverreachability",xs(uM,ys),Gc.STAT_EVENT="statevent",xs(dM,ys),Gc.Na="timingevent",xs(hM,ys);var ip={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},dI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function u0(){}function fI(){}u0.prototype.h=null;var d0,sh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Zg(){ys.call(this,"d")}function Kg(){ys.call(this,"c")}function Yg(){}function oh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new np(this),this.P=fM,this.W=new t0(n=zv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sp}function sp(){this.i=null,this.g="",this.h=!1}xs(Zg,ys),xs(Kg,ys),xs(Yg,u0),Yg.prototype.g=function(){return new XMLHttpRequest},Yg.prototype.i=function(){return{}},d0=new Yg;var fM=45e3,Qg={},zu={};function h0(n,e,t){n.K=1,n.v=c($c(e)),n.s=t,n.U=!0,pI(n,null)}function pI(n,e){n.F=Date.now(),op(n),n.A=$c(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),qt(t.h,"t",r),n.C=0,t=n.l.H,n.h=new sp,n.g=FF(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $g(rs(n.Ia,n,n.g),n.O)),n0(n.V,n.g,"readystatechange",n.gb),e=n.H?jv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Wg(1),function(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var I=y[0];y=y[1];var x=I.split("_");u=2<=x.length&&"type"==x[1]?u+(I+"=")+y+"&":u+(I+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function gI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=_F(n,t),i==zu){4==e&&(n.o=4,yo(14),r=!1),ih(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qg){n.o=4,yo(15),ih(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ih(n.j,n.m,i,null),f0(n,i)}mI(n)&&i!=zu&&i!=Qg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),wM(e),e.L=!0,yo(11))):(ih(n.j,n.m,t,"[Invalid Chunked Response]"),Gu(n),ap(n))}function _F(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?zu:(t=Number(e.substring(t,r)),isNaN(t)?Qg:(r+=1)+t>e.length?zu:(e=e.substr(r,t),n.C=r+t,e))}function op(n){n.Y=Date.now()+n.P,_I(n,n.P)}function _I(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qg(rs(n.eb,n),e)}function Xg(n){n.B&&(Cn.clearTimeout(n.B),n.B=null)}function ap(n){0==n.l.G||n.I||RF(n.l,n)}function Gu(n){Xg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,aI(n.W),zc(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function f0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||cp(t.i,n)))if(t.I=n.N,!n.J&&cp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=qg(rs(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;II(t),EI(t)}bM(t),yo(18)}if(1>=Jg(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else hp(t,11)}else if((n.J||t.g==n)&&II(t),!eh(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const I=y[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const x=y[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const $=y[5];null!=$&&"number"==typeof $&&0<$&&(t.K=r=1.5*$,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const oe=n.g;if(oe){const ve=oe.g?oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ve){var s=r.i;!s.g&&(Ms(ve,"spdy")||Ms(ve,"quic")||Ms(ve,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(up(s,s.h),s.h=null))}if(r.D){const Ge=oe.g?oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ge&&(r.sa=Ge,l(r.F,r.D,Ge))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=NF(r,r.H?r.la:null,r.W),u.J){e_(r.i,u);var h=u,p=r.K;p&&h.setTimeout(p),h.B&&(Xg(h),op(h)),r.g=u}else MF(r);0<t.l.length&&CI(t)}else"stop"!=y[0]&&"close"!=y[0]||hp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?hp(t,7):yM(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Wg(4)}catch(y){}}function p0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Og(n)||"string"==typeof n)Qx(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Og(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Og(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function lp(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof lp)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function yI(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ah(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ah(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ah(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Kt=oh.prototype).setTimeout=function(n){this.P=n},Kt.gb=function(n){n=n.target;const e=this.L;e&&3==Wu(n)?e.l():this.Ia(n)},Kt.Ia=function(n){try{if(n==this.g)e:{const I=Wu(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>I)&&(3!=I||zv||this.g&&(this.h.h||this.g.ga()||TF(this.g)))){this.I||4!=I||7==e||Wg(8==e||0>=x?3:2),Xg(this);var t=this.g.ba();this.N=t;t:if(mI(this)){var r=TF(this.g);n="";var i=r.length,s=4==Wu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gu(this),ap(this);var u="";break t}this.h.i=new Cn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eh(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,yo(12),Gu(this),ap(this);break e}ih(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,f0(this,t)}this.U?(gI(this,I,u),zv&&this.i&&3==I&&(n0(this.V,this.W,"tick",this.fb),this.W.start())):(ih(this.j,this.m,u,null),f0(this,u)),4==I&&Gu(this),this.i&&!this.I&&(4==I?RF(this.l,this):(this.i=!1,op(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,yo(12)):(this.o=0,yo(13)),Gu(this),ap(this)}}}catch(I){}},Kt.fb=function(){if(this.g){var n=Wu(this.g),e=this.g.ga();this.C<e.length&&(Xg(this),gI(this,n,e),this.i&&4!=n&&op(this))}},Kt.cancel=function(){this.I=!0,Gu(this)},Kt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Wg(3),yo(17)),Gu(this),this.o=2,ap(this)):_I(this,this.Y-n)},(Kt=lp.prototype).R=function(){yI(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Kt.T=function(){return yI(this),this.g.concat()},Kt.get=function(n,e){return ah(this.h,n)?this.h[n]:e},Kt.set=function(n,e){ah(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Kt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var mM=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $u(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $u){this.g=void 0!==e?e:n.g,m0(this,n.j),this.s=n.s,g0(this,n.i),_0(this,n.m),this.l=n.l,e=n.h;var t=new We;t.i=e.i,e.g&&(t.g=new lp(e.g),t.h=e.h),a(this,t),this.o=n.o}else n&&(t=String(n).match(mM))?(this.g=!!e,m0(this,t[1]||"",!0),this.s=m(t[2]||""),g0(this,t[3]||"",!0),_0(this,t[4]),this.l=m(t[5]||"",!0),a(this,t[6]||"",!0),this.o=m(t[7]||"")):(this.g=!!e,this.h=new We(null,this.g))}function $c(n){return new $u(n)}function m0(n,e,t){n.j=t?m(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function g0(n,e,t){n.i=t?m(e,!0):e}function _0(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function a(n,e,t){e instanceof We?(n.h=e,function(n,e){e&&!n.j&&(at(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Et(this,r),qt(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=v(e,me)),n.h=new We(e,n.g))}function l(n,e,t){n.h.set(e,t)}function c(n){return l(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function m(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function v(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,E),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function E(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$u.prototype.toString=function(){var n=[],e=this.j;e&&n.push(v(e,D,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(v(e,D,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(v(t,"/"==t.charAt(0)?G:B,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",v(t,Pe)),n.join("")};var D=/[#\/\?@]/g,B=/[#\?:]/g,G=/[#\?]/g,me=/[#\?@]/g,Pe=/#/g;function We(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function at(n){n.g||(n.g=new lp,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Et(n,e){at(n),e=ft(n,e),ah(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ah((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&yI(n)))}function At(n,e){return at(n),e=ft(n,e),ah(n.g.h,e)}function qt(n,e,t){Et(n,e),0<t.length&&(n.i=null,n.g.set(ft(n,e),YC(t)),n.h+=t.length)}function ft(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function wr(n){this.l=n||Fo,n=Cn.PerformanceNavigationTiming?0<(n=Cn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Cn.g&&Cn.g.Ea&&Cn.g.Ea()&&Cn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Kt=We.prototype).add=function(n,e){at(this),this.i=null,n=ft(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Kt.forEach=function(n,e){at(this),this.g.forEach(function(t,r){Qx(t,function(i){n.call(e,i,r,this)},this)},this)},Kt.T=function(){at(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},Kt.R=function(n){at(this);var e=[];if("string"==typeof n)At(this,n)&&(e=Xf(e,this.g.get(ft(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Xf(e,n[t])}return e},Kt.set=function(n,e){return at(this),this.i=null,At(this,n=ft(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Kt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;""!==r[s]&&(u+="="+encodeURIComponent(String(r[s]))),n.push(u)}}return this.i=n.join("&")};var Fo=10;function Wc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Jg(n){return n.h?1:n.g?n.g.size:0}function cp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function up(n,e){n.g?n.g.add(e):n.h=e}function e_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function t_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return YC(n.i)}function dp(){}function y0(){this.g=new dp}function v0(n,e,t){const r=t||"";try{p0(n,function(i,s){let u=i;Jd(i)&&(u=zg(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function w0(n){this.l=n.$b||null,this.j=n.ib||!1}function bI(n,e){Ui.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=gM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wr.prototype.cancel=function(){if(this.i=t_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},dp.prototype.stringify=function(n){return Cn.JSON.stringify(n,void 0)},dp.prototype.parse=function(n){return Cn.JSON.parse(n,void 0)},xs(w0,u0),w0.prototype.g=function(){return new bI(this.l,this.j)},w0.prototype.i=function(n){return function(){return n}}({}),xs(bI,Ui);var gM=0;function vF(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function E0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,C0(n)}function C0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Kt=bI.prototype).open=function(n,e){if(this.readyState!=gM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,C0(this)},Kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Cn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,E0(this)),this.readyState=gM},Kt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,C0(this)),this.g&&(this.readyState=3,C0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Cn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vF(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Kt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?E0(this):C0(this),3==this.readyState&&vF(this)}},Kt.Ua=function(n){this.g&&(this.response=this.responseText=n,E0(this))},Kt.Ta=function(n){this.g&&(this.response=n,E0(this))},Kt.ha=function(){this.g&&E0(this)},Kt.setRequestHeader=function(n,e){this.v.append(n,e)},Kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pz=Cn.JSON.parse;function ss(n){Ui.call(this),this.headers=new lp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bF,this.K=this.L=!1}xs(ss,Ui);var bF="",Nz=/^https?$/i,Fz=["POST","PUT"];function Bz(n){return"content-type"==n.toLowerCase()}function wF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,EF(n),wI(n)}function EF(n){n.D||(n.D=!0,is(n,"complete"),is(n,"error"))}function CF(n){if(n.h&&void 0!==Lv&&(!n.C[1]||4!=Wu(n)||2!=n.ba()))if(n.v&&4==Wu(n))lI(n.Fa,0,n);else if(is(n,"readystatechange"),4==Wu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(mM)[1]||null;if(!i&&Cn.self&&Cn.self.location){var s=Cn.self.location.protocol;i=s.substr(0,s.length-1)}r=!Nz.test(i?i.toLowerCase():"")}t=r}if(t)is(n,"complete"),is(n,"success");else{n.m=6;try{var u=2<Wu(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.ba()+"]",EF(n)}}finally{wI(n)}}}function wI(n,e){if(n.g){IF(n);const t=n.g,r=n.C[0]?Rg:null;n.g=null,n.C=null,e||is(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function IF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Cn.clearTimeout(n.A),n.A=null)}function Wu(n){return n.g?n.g.readyState:0}function TF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case bF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _M(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return Fg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):l(n,e,t))}function I0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SF(n){this.za=0,this.l=[],this.h=new rp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=I0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=I0("baseRetryDelayMs",5e3,n),this.$a=I0("retryDelaySeedMs",1e4,n),this.Ya=I0("forwardChannelMaxRetries",2,n),this.ra=I0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new wr(n&&n.concurrentRequestLimit),this.Ca=new y0,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function yM(n){if(DF(n),3==n.G){var e=n.V++,t=$c(n.F);l(t,"SID",n.J),l(t,"RID",e),l(t,"TYPE","terminate"),T0(n,t),(e=new oh(n,n.h,e,void 0)).K=2,e.v=c($c(t)),t=!1,Cn.navigator&&Cn.navigator.sendBeacon&&(t=Cn.navigator.sendBeacon(e.v.toString(),"")),!t&&Cn.Image&&((new Image).src=e.v,t=!0),t||(e.g=FF(e.l,null),e.g.ea(e.v)),e.F=Date.now(),op(e)}PF(n)}function EI(n){n.g&&(wM(n),n.g.cancel(),n.g=null)}function DF(n){EI(n),n.u&&(Cn.clearTimeout(n.u),n.u=null),II(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Cn.clearTimeout(n.m),n.m=null)}function vM(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&CI(n)}function CI(n){Wc(n.i)||n.m||(n.m=!0,Gg(n.Ha,n),n.C=0)}function AF(n,e){var t;t=e?e.m:n.V++;const r=$c(n.F);l(r,"SID",n.J),l(r,"RID",t),l(r,"AID",n.U),T0(n,r),n.o&&n.s&&_M(r,n.o,n.s),t=new oh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xF(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),up(n.i,t),h0(t,r,e)}function T0(n,e){n.j&&p0({},function(t,r){l(e,r,t)})}function xF(n,e,t){t=Math.min(n.l.length,t);var r=n.j?rs(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const I=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),h=!1;else try{v0(I,u,"req"+y+"_")}catch(x){r&&r(I)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function MF(n){n.g||n.u||(n.Y=1,Gg(n.Ga,n),n.A=0)}function bM(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=qg(rs(n.Ga,n),OF(n,n.A)),n.A++,0))}function wM(n){null!=n.B&&(Cn.clearTimeout(n.B),n.B=null)}function kF(n){n.g=new oh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$c(n.oa);l(e,"RID","rpc"),l(e,"SID",n.J),l(e,"CI",n.N?"0":"1"),l(e,"AID",n.U),T0(n,e),l(e,"TYPE","xmlhttp"),n.o&&n.s&&_M(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=c($c(e)),t.s=null,t.U=!0,pI(t,n)}function II(n){null!=n.v&&(Cn.clearTimeout(n.v),n.v=null)}function RF(n,e){var t=null;if(n.g==e){II(n),wM(n),n.g=null;var r=2}else{if(!cp(n.i,e))return;t=e.D,e_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;is(r=c0(),new hM(r,t,e,i)),CI(n)}else MF(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(Jg(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=qg(rs(n.Ha,n,e),OF(n,n.C)),n.C++,0)))}(n,e)||2==r&&bM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:hp(n,5);break;case 4:hp(n,10);break;case 3:hp(n,6);break;default:hp(n,2)}}function OF(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function hp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=rs(n.jb,n);t||(t=new $u("//www.google.com/images/cleardot.gif"),Cn.location&&"http"==Cn.location.protocol||m0(t,"https"),c(t)),function(n,e){const t=new rp;if(Cn.Image){const r=new Image;r.onload=Bv(vI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bv(vI,t,r,"TestLoadImage: error",!1,e),r.onabort=Bv(vI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bv(vI,t,r,"TestLoadImage: timeout",!1,e),Cn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yo(2);n.G=0,n.j&&n.j.va(e),PF(n),DF(n)}function PF(n){n.G=0,n.I=-1,n.j&&((0!=t_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,YC(n.l),n.l.length=0),n.j.ua())}function NF(n,e,t){let r=function(n){return n instanceof $u?$c(n):new $u(n,void 0)}(t);if(""!=r.i)e&&g0(r,e+"."+r.i),_0(r,r.m);else{const i=Cn.location;r=function(n,e,t,r){var i=new $u(null,void 0);return n&&m0(i,n),e&&g0(i,e),t&&_0(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Fg(n.aa,function(i,s){l(r,s,i)}),t=n.sa,(e=n.D)&&t&&l(r,e,t),l(r,"VER",n.ma),T0(n,r),r}function FF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ss(t&&n.Ba&&!n.qa?new w0({ib:!0}):n.qa)).L=n.H,e}function LF(){}function TI(){if(Jf&&!(10<=Number(qv)))throw Error("Environmental error: no available transport.")}function Na(n,e){Ui.call(this),this.g=new SF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!eh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new n_(this)}function BF(n){Zg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function VF(){Kg.call(this),this.status=1}function n_(n){this.g=n}(Kt=ss.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():d0.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:d0),this.g.onreadystatechange=rs(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void wF(this,s)}n=t||"";const i=new lp(this.headers);r&&p0(r,function(s,u){i.set(u,s)}),r=function(n){e:{var e=Bz;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Cn.FormData&&n instanceof Cn.FormData,!(0<=Yx(Fz,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{IF(this),0<this.B&&((this.K=function(n){return Jf&&$v()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.pa,this)):this.A=lI(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){wF(this,s)}},Kt.pa=function(){void 0!==Lv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,is(this,"timeout"),this.abort(8))},Kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,is(this,"complete"),is(this,"abort"),wI(this))},Kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wI(this,!0)),ss.Z.M.call(this)},Kt.Fa=function(){this.s||(this.F||this.v||this.l?CF(this):this.cb())},Kt.cb=function(){CF(this)},Kt.ba=function(){try{return 2<Wu(this)?this.g.status:-1}catch(n){return-1}},Kt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Kt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pz(e)}},Kt.Da=function(){return this.m},Kt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Kt=SF.prototype).ma=8,Kt.G=1,Kt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Kt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new oh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=jv(s),Hv(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xF(this,i,e),l(t=$c(this.F),"RID",n),l(t,"CVER",22),this.D&&l(t,"X-HTTP-Session-Id",this.D),T0(this,t),this.o&&s&&_M(t,this.o,s),up(this.i,i),this.Ra&&l(t,"TYPE","init"),this.ja?(l(t,"$req",e),l(t,"SID","null"),i.$=!0,h0(i,t,null)):h0(i,t,e),this.G=2}}else 3==this.G&&(n?AF(this,n):0==this.l.length||Wc(this.i)||AF(this))},Kt.Ga=function(){if(this.u=null,kF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=qg(rs(this.bb,this),n)}},Kt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yo(10),EI(this),kF(this))},Kt.ab=function(){null!=this.v&&(this.v=null,EI(this),bM(this),yo(19))},Kt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),yo(2)):(this.h.info("Failed to ping google.com"),yo(1))},(Kt=LF.prototype).xa=function(){},Kt.wa=function(){},Kt.va=function(){},Kt.ua=function(){},Kt.Oa=function(){},TI.prototype.g=function(n,e){return new Na(n,e)},xs(Na,Ui),Na.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Gg(rs(n.hb,n,e))),yo(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=NF(n,null,n.W),CI(n)},Na.prototype.close=function(){yM(this.g)},Na.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,vM(this.g,e)}else this.v?((e={}).__data__=zg(n),vM(this.g,e)):vM(this.g,n)},Na.prototype.M=function(){this.g.j=null,delete this.j,yM(this.g),delete this.g,Na.Z.M.call(this)},xs(BF,Zg),xs(VF,Kg),xs(n_,LF),n_.prototype.xa=function(){is(this.g,"a")},n_.prototype.wa=function(n){is(this.g,new BF(n))},n_.prototype.va=function(n){is(this.g,new VF(n))},n_.prototype.ua=function(){is(this.g,"b")},TI.prototype.createWebChannel=TI.prototype.g,Na.prototype.send=Na.prototype.u,Na.prototype.open=Na.prototype.m,Na.prototype.close=Na.prototype.close,ip.NO_ERROR=0,ip.TIMEOUT=8,ip.HTTP_ERROR=6,dI.COMPLETE="complete",fI.EventType=sh,sh.OPEN="a",sh.CLOSE="b",sh.ERROR="c",sh.MESSAGE="d",Ui.prototype.listen=Ui.prototype.N,ss.prototype.listenOnce=ss.prototype.O,ss.prototype.getLastError=ss.prototype.La,ss.prototype.getLastErrorCode=ss.prototype.Da,ss.prototype.getStatus=ss.prototype.ba,ss.prototype.getResponseJson=ss.prototype.Qa,ss.prototype.getResponseText=ss.prototype.ga,ss.prototype.send=ss.prototype.ea;var jz=ul.createWebChannelTransport=function(){return new TI},Hz=ul.getStatEventTarget=function(){return c0()},EM=ul.ErrorCode=ip,zz=ul.EventType=dI,Gz=ul.Event=Gc,UF=ul.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$z=ul.FetchXmlHttpFactory=w0,SI=ul.WebChannel=fI,Wz=ul.XhrIo=ss;const jF="@firebase/firestore";class Ys{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ys.UNAUTHENTICATED=new Ys(null),Ys.GOOGLE_CREDENTIALS=new Ys("google-credentials-uid"),Ys.FIRST_PARTY=new Ys("first-party-uid"),Ys.MOCK_USER=new Ys("mock-user");let r_="9.8.0";const lh=new Pa.Yd("@firebase/firestore");function CM(){return lh.logLevel}function Ct(n,...e){if(lh.logLevel<=Pa.in.DEBUG){const t=e.map(IM);lh.debug(`Firestore (${r_}): ${n}`,...t)}}function os(n,...e){if(lh.logLevel<=Pa.in.ERROR){const t=e.map(IM);lh.error(`Firestore (${r_}): ${n}`,...t)}}function S0(n,...e){if(lh.logLevel<=Pa.in.WARN){const t=e.map(IM);lh.warn(`Firestore (${r_}): ${n}`,...t)}}function IM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tn(n="Unexpected state"){const e=`FIRESTORE (${r_}) INTERNAL ASSERTION FAILED: `+n;throw os(e),new Error(e)}function Tn(n,e){n||tn()}function Ut(n,e){return n}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends ae.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ys.UNAUTHENTICATED))}shutdown(){}}class Yz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qz{constructor(e){this.t=e,this.currentUser=Ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ks,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,ut.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ks)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tn("string"==typeof r.accessToken),new HF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tn(null===e||"string"==typeof e),new Ys(e)}}class Xz{constructor(e,t,r){this.type="FirstParty",this.user=Ys.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Jz{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Xz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ys.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eG{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,Ct("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tn("string"==typeof t.token),this.p=t.token,new zF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function tG(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Fa.A=-1;class GF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Un(n,e){return n<e?-1:n>e?1:0}function i_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $F(n){return n+"\0"}class Xi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xi.fromMillis(Date.now())}static fromDate(e){return Xi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Un(this.nanoseconds,e.nanoseconds):Un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wn(e)}static min(){return new wn(new Xi(0,0))}static max(){return new wn(new Xi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function WF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class D0{constructor(e,t,r){void 0===t?t=0:t>e.length&&tn(),void 0===r?r=e.length-t:r>e.length-t&&tn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===D0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof D0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _r extends D0{construct(e,t,r){return new _r(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new vt(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _r(t)}static emptyPath(){return new _r([])}}const nG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vs extends D0{construct(e,t,r){return new vs(e,t,r)}static isValidIdentifier(e){return nG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vs(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new vt(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new vt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new vt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new vt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vs(t)}static emptyPath(){return new vs([])}}class s_{constructor(e){this.fields=e,e.sort(vs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return i_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class bs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new bs(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new bs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bs.EMPTY_BYTE_STRING=new bs("");const iG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ch(n){if(Tn(!!n),"string"==typeof n){let e=0;const t=iG.exec(n);if(Tn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ji(n.seconds),nanos:ji(n.nanos)}}function ji(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pp(n){return"string"==typeof n?bs.fromBase64String(n):bs.fromUint8Array(n)}function TM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ZF(n){const e=n.mapValue.fields.__previous_value__;return TM(e)?ZF(e):e}function A0(n){const e=ch(n.mapValue.fields.__local_write_time__.timestampValue);return new Xi(e.seconds,e.nanos)}class sG{constructor(e,t,r,i,s,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}function x0(n){return null==n}function M0(n){return 0===n&&1/n==-1/0}function KF(n){return"number"==typeof n&&Number.isInteger(n)&&!M0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Pt{constructor(e){this.path=e}static fromPath(e){return new Pt(_r.fromString(e))}static fromName(e){return new Pt(_r.fromString(e).popFirst(5))}static empty(){return new Pt(_r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_r.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _r.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pt(new _r(e.slice()))}}const uh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},DI={nullValue:"NULL_VALUE"};function mp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TM(n)?4:JF(n)?9007199254740991:10:tn()}function qc(n,e){if(n===e)return!0;const t=mp(n);if(t!==mp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return A0(n).isEqual(A0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ch(r.timestampValue),u=ch(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,pp(n.bytesValue).isEqual(pp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ji(r.geoPointValue.latitude)===ji(i.geoPointValue.latitude)&&ji(r.geoPointValue.longitude)===ji(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ji(r.integerValue)===ji(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ji(r.doubleValue),u=ji(i.doubleValue);return s===u?M0(s)===M0(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return i_(n.arrayValue.values||[],e.arrayValue.values||[],qc);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(WF(s)!==WF(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!qc(s[h],u[h])))return!1;return!0}(n,e);default:return tn()}var i}function k0(n,e){return void 0!==(n.values||[]).find(t=>qc(t,e))}function dh(n,e){if(n===e)return 0;const t=mp(n),r=mp(e);if(t!==r)return Un(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Un(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=ji(i.integerValue||i.doubleValue),h=ji(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return YF(n.timestampValue,e.timestampValue);case 4:return YF(A0(n),A0(e));case 5:return Un(n.stringValue,e.stringValue);case 6:return function(i,s){const u=pp(i),h=pp(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let p=0;p<u.length&&p<h.length;p++){const y=Un(u[p],h[p]);if(0!==y)return y}return Un(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Un(ji(i.latitude),ji(s.latitude));return 0!==u?u:Un(ji(i.longitude),ji(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let p=0;p<u.length&&p<h.length;++p){const y=dh(u[p],h[p]);if(y)return y}return Un(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===uh.mapValue&&s===uh.mapValue)return 0;if(i===uh.mapValue)return 1;if(s===uh.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let I=0;I<h.length&&I<y.length;++I){const x=Un(h[I],y[I]);if(0!==x)return x;const $=dh(u[h[I]],p[y[I]]);if(0!==$)return $}return Un(h.length,y.length)}(n.mapValue,e.mapValue);default:throw tn()}}function YF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Un(n,e);const t=ch(n),r=ch(e),i=Un(t.seconds,r.seconds);return 0!==i?i:Un(t.nanos,r.nanos)}function o_(n){return SM(n)}function SM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ch(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pp(n.bytesValue).toBase64():"referenceValue"in n?Pt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=SM(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${SM(r.fields[h])}`;return s+"}"}(n.mapValue):tn();var e}function gp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function DM(n){return!!n&&"integerValue"in n}function R0(n){return!!n&&"arrayValue"in n}function QF(n){return!!n&&"nullValue"in n}function XF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function AI(n){return!!n&&"mapValue"in n}function O0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=O0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=O0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function oG(n){return"nullValue"in n?DI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gp(qu.empty(),Pt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tn()}function aG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gp(qu.empty(),Pt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?uh:tn()}function eL(n,e){const t=dh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tL(n,e){const t=dh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vo{constructor(e){this.value=e}static empty(){return new vo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!AI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=O0(t)}setAll(e){let t=vs.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=O0(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());AI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];AI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fp(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vo(O0(this.value))}}function nL(n){const e=[];return fp(n.fields,(t,r)=>{const i=new vs([t]);if(AI(r)){const s=nL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new s_(e)}class mi{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new mi(e,0,wn.min(),wn.min(),vo.empty(),0)}static newFoundDocument(e,t,r){return new mi(e,1,t,wn.min(),r,0)}static newNoDocument(e,t){return new mi(e,2,t,wn.min(),vo.empty(),0)}static newUnknownDocument(e,t){return new mi(e,3,t,wn.min(),vo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function AM(n){return n.fields.find(e=>2===e.kind)}function _p(n){return n.fields.filter(e=>2!==e.kind)}xI.UNKNOWN_ID=-1;class MI{constructor(e,t){this.fieldPath=e,this.kind=t}}class P0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new P0(0,sc.min())}}function rL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=wn.fromTimestamp(1e9===r?new Xi(t+1,0):new Xi(t,r));return new sc(i,Pt.empty(),e)}function lG(n){return new sc(n.readTime,n.key,-1)}class sc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sc(wn.min(),Pt.empty(),-1)}static max(){return new sc(wn.max(),Pt.empty(),-1)}}function iL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pt.comparator(n.documentKey,e.documentKey),0!==t?t:Un(n.largestBatchId,e.largestBatchId))}class Ji{constructor(e,t){this.comparator=e,this.root=t||Qs.EMPTY}insert(e,t){return new Ji(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new Ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kI(this.root,e,this.comparator,!1)}getReverseIterator(){return new kI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kI(this.root,e,this.comparator,!0)}}class kI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Qs.RED,this.left=null!=i?i:Qs.EMPTY,this.right=null!=s?s:Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Qs(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Qs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ui{constructor(e){this.comparator=e,this.data=new Ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sL(this.data.getIterator())}getIteratorFrom(e){return new sL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ui(this.comparator);return t.data=e,t}}class sL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function a_(n){return n.hasNext()?n.getNext():void 0}class cG{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function oL(n,e=null,t=[],r=[],i=null,s=null,u=null){return new cG(n,e,t,r,i,s,u)}function yp(n){const e=Ut(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+o_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),x0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>o_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>o_(r)).join(",")),e.P=t}return e.P}function N0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!yG(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!qc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dL(n.startAt,e.startAt)&&dL(n.endAt,e.endAt)}function RI(n){return Pt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function OI(n,e){return n.filters.filter(t=>t instanceof Xs&&t.field.isEqual(e))}function aL(n,e,t){let r=DI,i=!0;for(const s of OI(n,e)){let u=DI,h=!0;switch(s.op){case"<":case"<=":u=oG(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=DI}eL({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];eL({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function lL(n,e,t){let r=uh,i=!0;for(const s of OI(n,e)){let u=uh,h=!0;switch(s.op){case">=":case">":u=aG(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=uh}tL({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];tL({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Xs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new dG(e,t,r):"array-contains"===t?new pG(e,r):"in"===t?new mG(e,r):"not-in"===t?new gG(e,r):"array-contains-any"===t?new _G(e,r):new Xs(e,t,r)}static V(e,t,r){return"in"===t?new hG(e,r):new fG(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(dh(t,this.value)):null!==t&&mp(this.value)===mp(t)&&this.v(dh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tn()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class dG extends Xs{constructor(e,t,r){super(e,t,r),this.key=Pt.fromName(r.referenceValue)}matches(e){const t=Pt.comparator(e.key,this.key);return this.v(t)}}class hG extends Xs{constructor(e,t){super(e,"in",t),this.keys=cL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fG extends Xs{constructor(e,t){super(e,"not-in",t),this.keys=cL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pt.fromName(r.referenceValue))}class pG extends Xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return R0(t)&&k0(t.arrayValue,this.value)}}class mG extends Xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&k0(this.value.arrayValue,t)}}class gG extends Xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(k0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!k0(this.value.arrayValue,t)}}class _G extends Xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!R0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>k0(this.value.arrayValue,r))}}class hh{constructor(e,t){this.position=e,this.inclusive=t}}class l_{constructor(e,t="asc"){this.field=e,this.dir=t}}function yG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function uL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?Pt.comparator(Pt.fromName(u.referenceValue),t.key):dh(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function dL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qc(n.position[t],e.position[t]))return!1;return!0}class Zu{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function hL(n,e,t,r,i,s,u,h){return new Zu(n,e,t,r,i,s,u,h)}function c_(n){return new Zu(n)}function xM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function MM(n){for(const e of n.filters)if(e.S())return e.field;return null}function kM(n){return null!==n.collectionGroup}function u_(n){const e=Ut(n);if(null===e.D){e.D=[];const t=MM(e),r=xM(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new l_(t)),e.D.push(new l_(vs.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new l_(vs.keyField(),s))}}}return e.D}function dl(n){const e=Ut(n);if(!e.C)if("F"===e.limitType)e.C=oL(e.path,e.collectionGroup,u_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of u_(e))t.push(new l_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new hh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hh(e.startAt.position,e.startAt.inclusive):null;e.C=oL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function fL(n,e,t){return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function F0(n,e){return N0(dl(n),dl(e))&&n.limitType===e.limitType}function pL(n){return`${yp(dl(n))}|lt:${n.limitType}`}function RM(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${o_(r.value)}`;var r}).join(", ")}]`),x0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>o_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>o_(t)).join(",")),`Target(${e})`}(dl(n))}; limitType=${n.limitType})`}function OM(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Pt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=uL(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,u_(t),r)||t.endAt&&!function(i,s,u){const h=uL(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,u_(t),r)));var t,r}function mL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gL(n){return(e,t)=>{let r=!1;for(const i of u_(n)){const s=bG(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function bG(n,e,t){const r=n.field.isKeyField()?Pt.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),p=u.data.field(i);return null!==h&&null!==p?dh(h,p):tn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tn()}}function _L(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:M0(e)?"-0":e}}function yL(n){return{integerValue:""+n}}function vL(n,e){return KF(e)?yL(e):_L(n,e)}class PI{constructor(){this._=void 0}}function wG(n,e,t){return n instanceof d_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof vp?wL(n,e):n instanceof bp?EL(n,e):function(r,i){const s=bL(r,i),u=CL(s)+CL(r.k);return DM(s)&&DM(r.k)?yL(u):_L(r.M,u)}(n,e)}function EG(n,e,t){return n instanceof vp?wL(n,e):n instanceof bp?EL(n,e):t}function bL(n,e){return n instanceof h_?DM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class d_ extends PI{}class vp extends PI{constructor(e){super(),this.elements=e}}function wL(n,e){const t=IL(e);for(const r of n.elements)t.some(i=>qc(i,r))||t.push(r);return{arrayValue:{values:t}}}class bp extends PI{constructor(e){super(),this.elements=e}}function EL(n,e){let t=IL(e);for(const r of n.elements)t=t.filter(i=>!qc(i,r));return{arrayValue:{values:t}}}class h_ extends PI{constructor(e,t){super(),this.M=e,this.k=t}}function CL(n){return ji(n.integerValue||n.doubleValue)}function IL(n){return R0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class L0{constructor(e,t){this.field=e,this.transform=t}}class IG{constructor(e,t){this.version=e,this.transformResults=t}}class as{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function NI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class FI{}function TG(n,e,t){n instanceof B0?function(r,i,s){const u=r.value.clone(),h=AL(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof wp?function(r,i,s){if(!NI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=AL(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(DL(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function PM(n,e,t){var i;n instanceof B0?function(r,i,s){if(!NI(r.precondition,i))return;const u=r.value.clone(),h=xL(r.fieldTransforms,s,i);u.setAll(h),i.convertToFoundDocument(SL(i),u).setHasLocalMutations()}(n,e,t):n instanceof wp?function(r,i,s){if(!NI(r.precondition,i))return;const u=xL(r.fieldTransforms,s,i),h=i.data;h.setAll(DL(r)),h.setAll(u),i.convertToFoundDocument(SL(i),h).setHasLocalMutations()}(n,e,t):NI(n.precondition,i=e)&&i.convertToNoDocument(wn.min())}function SG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=bL(r.transform,i||null);null!=s&&(null==t&&(t=vo.empty()),t.set(r.field,s))}return t||null}function TL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&i_(t,r,(i,s)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vp&&r instanceof vp||t instanceof bp&&r instanceof bp?i_(t.elements,r.elements,qc):t instanceof h_&&r instanceof h_?qc(t.k,r.k):t instanceof d_&&r instanceof d_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function SL(n){return n.isFoundDocument()?n.version:wn.min()}class B0 extends FI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class wp extends FI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function DL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function AL(n,e,t){const r=new Map;Tn(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,EG(u,h,t[i]))}return r}function xL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,wG(s,u,e))}return r}class V0 extends FI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class NM extends FI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class DG{constructor(e){this.count=e}}var ls,yr;function ML(n){switch(n){default:return tn();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function kL(n){if(void 0===n)return os("GRPC error has no .code"),nt.UNKNOWN;switch(n){case ls.OK:return nt.OK;case ls.CANCELLED:return nt.CANCELLED;case ls.UNKNOWN:return nt.UNKNOWN;case ls.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case ls.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case ls.INTERNAL:return nt.INTERNAL;case ls.UNAVAILABLE:return nt.UNAVAILABLE;case ls.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case ls.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case ls.NOT_FOUND:return nt.NOT_FOUND;case ls.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case ls.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case ls.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case ls.ABORTED:return nt.ABORTED;case ls.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case ls.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case ls.DATA_LOSS:return nt.DATA_LOSS;default:return tn()}}(yr=ls||(ls={}))[yr.OK=0]="OK",yr[yr.CANCELLED=1]="CANCELLED",yr[yr.UNKNOWN=2]="UNKNOWN",yr[yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yr[yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yr[yr.NOT_FOUND=5]="NOT_FOUND",yr[yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",yr[yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",yr[yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",yr[yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yr[yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yr[yr.ABORTED=10]="ABORTED",yr[yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",yr[yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",yr[yr.INTERNAL=13]="INTERNAL",yr[yr.UNAVAILABLE=14]="UNAVAILABLE",yr[yr.DATA_LOSS=15]="DATA_LOSS";class fh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fp(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qF(this.inner)}size(){return this.innerSize}}const AG=new Ji(Pt.comparator);function hl(){return AG}const xG=new Ji(Pt.comparator);function FM(...n){let e=xG;for(const t of n)e=e.insert(t.key,t);return e}function U0(){return new fh(n=>n.toString(),(n,e)=>n.isEqual(e))}const MG=new Ji(Pt.comparator),kG=new ui(Pt.comparator);function Vr(...n){let e=kG;for(const t of n)e=e.add(t);return e}const RG=new ui(Un);function LI(){return RG}class j0{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,H0.createSynthesizedTargetChangeForCurrentChange(e,t)),new j0(wn.min(),r,LI(),hl(),Vr())}}class H0{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new H0(bs.EMPTY_BYTE_STRING,t,Vr(),Vr(),Vr())}}class BI{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class RL{constructor(e,t){this.targetId=e,this.$=t}}class OL{constructor(e,t,r=bs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class PL{constructor(){this.B=0,this.L=FL(),this.U=bs.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Vr(),t=Vr(),r=Vr();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tn()}}),new H0(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=FL()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class OG{constructor(e){this.nt=e,this.st=new Map,this.it=hl(),this.rt=NL(),this.ot=new ui(Un)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(RI(s))if(0===r){const u=new Pt(s.path);this.ct(t,u,mi.newNoDocument(u,wn.min()))}else Tn(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&RI(h.target)){const p=new Pt(h.target.path);null!==this.it.get(p)||this.It(u,p)||this.ct(u,p,mi.newNoDocument(p,e))}s.j&&(t.set(u,s.H()),s.J())}});let r=Vr();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,u)=>u.setReadTime(e));const i=new j0(e,t,this.ot,this.it,r);return this.it=hl(),this.rt=NL(),this.ot=new ui(Un),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new PL,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ui(Un),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ct("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new PL),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function NL(){return new Ji(Pt.comparator)}function FL(){return new Ji(Pt.comparator)}const PG={asc:"ASCENDING",desc:"DESCENDING"},NG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FG{constructor(e,t){this.databaseId=e,this.N=t}}function z0(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LL(n,e){return n.N?e.toBase64():e.toUint8Array()}function LG(n,e){return z0(n,e.toTimestamp())}function Rs(n){return Tn(!!n),wn.fromTimestamp(function(e){const t=ch(e);return new Xi(t.seconds,t.nanos)}(n))}function LM(n,e){return(t=n,new _r(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BL(n){const e=_r.fromString(n);return Tn(qL(e)),e}function G0(n,e){return LM(n.databaseId,e.path)}function Zc(n,e){const t=BL(e);if(t.get(1)!==n.databaseId.projectId)throw new vt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new vt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pt(UL(t))}function BM(n,e){return LM(n.databaseId,e)}function VL(n){const e=BL(n);return 4===e.length?_r.emptyPath():UL(e)}function $0(n){return new _r(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UL(n){return Tn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jL(n,e,t){return{name:G0(n,e),fields:t.value.mapValue.fields}}function HL(n,e,t){const r=Zc(n,e.name),i=Rs(e.updateTime),s=new vo({mapValue:{fields:e.fields}}),u=mi.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function W0(n,e){let t;if(e instanceof B0)t={update:jL(n,e.key,e.value)};else if(e instanceof V0)t={delete:G0(n,e.key)};else if(e instanceof wp)t={update:jL(n,e.key,e.data),updateMask:WG(e.fieldMask)};else{if(!(e instanceof NM))return tn();t={verify:G0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof d_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof vp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof bp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof h_)return{fieldPath:s.field.canonicalString(),increment:u.k};throw tn()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:LG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:tn()),t;var i}function VM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?as.updateTime(Rs(i.updateTime)):void 0!==i.exists?as.exists(i.exists):as.none():as.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(Tn("REQUEST_TIME"===u.setToServerValue),h=new d_):"appendMissingElements"in u?h=new vp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new bp(u.removeAllFromArray.values||[]):"increment"in u?h=new h_(s,u.increment):tn();const p=vs.fromServerFormat(u.fieldPath);return new L0(p,h)}(n,i)):[];var i;if(e.update){const i=Zc(n,e.update.name),s=new vo({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new s_((e.updateMask.fieldPaths||[]).map(y=>vs.fromServerFormat(y)));return new wp(i,s,u,t,r)}return new B0(i,s,t,r)}if(e.delete){const i=Zc(n,e.delete);return new V0(i,t)}if(e.verify){const i=Zc(n,e.verify);return new NM(i,t)}return tn()}function zL(n,e){return{documents:[BM(n,e.path)]}}function GL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=BM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=BM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(I=>function(x){if("=="===x.op){if(XF(x.value))return{unaryFilter:{field:f_(x.field),op:"IS_NAN"}};if(QF(x.value))return{unaryFilter:{field:f_(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(XF(x.value))return{unaryFilter:{field:f_(x.field),op:"IS_NOT_NAN"}};if(QF(x.value))return{unaryFilter:{field:f_(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:f_(x.field),op:zG(x.op),value:x.value}}}(I));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:f_((I=y).field),direction:HG(I.dir)};var I})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.N||x0(y)?y:{value:y});var y,h,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function $L(n){let e=VL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tn(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=WL(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new l_(p_((x=I).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;t.limit&&(h=function(I){let x;return x="object"==typeof I?I.value:I,x0(x)?null:x}(t.limit));let p=null;var I;t.startAt&&(p=new hh((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new hh(I.values||[],!I.before)}(t.endAt)),hL(e,i,u,s,h,"F",p,y)}function WL(n){return n?void 0!==n.unaryFilter?[$G(n)]:void 0!==n.fieldFilter?[GG(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>WL(e)).reduce((e,t)=>e.concat(t)):tn():[]}function HG(n){return PG[n]}function zG(n){return NG[n]}function f_(n){return{fieldPath:n.canonicalString()}}function p_(n){return vs.fromServerFormat(n.fieldPath)}function GG(n){return Xs.create(p_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(n.fieldFilter.op),n.fieldFilter.value)}function $G(n){switch(n.unaryFilter.op){case"IS_NAN":const e=p_(n.unaryFilter.field);return Xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=p_(n.unaryFilter.field);return Xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=p_(n.unaryFilter.field);return Xs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=p_(n.unaryFilter.field);return Xs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}function WG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Lo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZL(e)),e=qG(n.get(t),e);return ZL(e)}function qG(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function ZL(n){return n+"\x01\x01"}function Kc(n){const e=n.length;if(Tn(e>=2),2===e)return Tn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_r.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&tn(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:tn()}s=u+2}return new _r(r)}const KL=["userId","batchId"];function VI(n,e){return[n,Lo(e)]}function YL(n,e,t){return[n,Lo(e),t]}const ZG={},KG=["prefixPath","collectionGroup","readTime","documentId"],YG=["prefixPath","collectionGroup","documentId"],QG=["collectionGroup","readTime","prefixPath","documentId"],XG=["canonicalId","targetId"],JG=["targetId","path"],e$=["path","targetId"],t$=["collectionId","parent"],n$=["indexId","uid"],r$=["uid","sequenceNumber"],i$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],s$=["indexId","uid","orderedDocumentKey"],o$=["userId","collectionPath","documentId"],a$=["userId","collectionPath","largestBatchId"],l$=["userId","collectionGroup","largestBatchId"],QL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],c$=[...QL,"documentOverlays"],XL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],u$=[...XL,"indexConfiguration","indexState","indexEntries"],JL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class st{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new st((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof st?t:st.resolve(t)}catch(t){return st.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):st.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):st.reject(t)}static resolve(e){return new st((t,r)=>{t(e)})}static reject(e){return new st((t,r)=>{r(e)})}static waitFor(e){return new st((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=st.resolve(!1);for(const r of e)t=t.next(i=>i?st.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class UI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ks,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new q0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=UM(r.target.error);this.At.reject(new q0(e,i))}}static open(e,t,r,i){try{return new UI(t,e.transaction(i,r))}catch(s){throw new q0(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new h$(t)}}class oc{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===oc.Vt((0,ae.z$)())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ct("SimpleDb","Removing database:",e),Cp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,ae.hl)())return!1;if(oc.St())return!0;const e=(0,ae.z$)(),t=oc.Vt(e),r=0<t&&t<10,i=oc.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ut.Z)(function*(){return t.db||(Ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new q0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new vt(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new vt(nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new q0(e,h))},s.onupgradeneeded=u=>{Ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ut.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.Nt(e);const p=UI.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(I=>(p.bt(),I)).catch(I=>(p.abort(I),st.reject(I))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(Ct("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class d${constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Cp(this.Ft.delete())}}class q0 extends vt{constructor(e,t){super(nt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ep(n){return"IndexedDbTransactionError"===n.name}class h${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ct("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cp(r)}add(e){return Ct("SimpleDb","ADD",this.store.name,e,e),Cp(this.store.add(e))}get(e){return Cp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ct("SimpleDb","DELETE",this.store.name,e),Cp(this.store.delete(e))}count(){return Ct("SimpleDb","COUNT",this.store.name),Cp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Kt(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new st((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new st((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Ct("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,u,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new st((r,i)=>{t.onerror=s=>{const u=UM(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new st((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const p=new d$(h),y=t(h.primaryKey,h.value,p);if(y instanceof st){const I=y.catch(x=>(p.done(),st.reject(x)));r.push(I)}p.isDone?i():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>st.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cp(n){return new st((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=UM(r.target.error);t(i)}})}let t2=!1;function UM(n){const e=oc.Vt((0,ae.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return t2||(t2=!0,setTimeout(()=>{throw r},0)),r}}return n}class n2 extends e2{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Os(n,e){const t=Ut(n);return oc.xt(t.Ht,e)}class jM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&TG(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&PM(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&PM(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(wn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vr())}isEqual(e){return this.batchId===e.batchId&&i_(this.mutations,e.mutations,(t,r)=>TL(t,r))&&i_(this.baseMutations,e.baseMutations,(t,r)=>TL(t,r))}}class HM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tn(e.mutations.length===r.length);let i=MG;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new HM(e,t,r,i)}}class zM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ph{constructor(e,t,r,i,s=wn.min(),u=wn.min(),h=bs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new ph(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class r2{constructor(e){this.Jt=e}}function s2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:G0(i=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:z0(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ip(e.version)};else{if(!e.isUnknownDocument())return tn();r.unknownDocument={path:t.path.toArray(),version:Ip(e.version)}}var i,s;return r}function jI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ip(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tp(n){const e=new Xi(n.seconds,n.nanoseconds);return wn.fromTimestamp(e)}function m_(n,e){const t=(e.baseMutations||[]).map(s=>VM(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>VM(n.Jt,s)),i=Xi.fromMillis(e.localWriteTimeMs);return new jM(e.batchId,i,t,r)}function Z0(n){const e=Tp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tp(n.lastLimboFreeSnapshotVersion):wn.min();let r;var i;return void 0!==n.query.documents?(Tn(1===(i=n.query).documents.length),r=dl(c_(VL(i.documents[0])))):r=dl($L(n.query)),new ph(r,n.targetId,0,n.lastListenSequenceNumber,e,t,bs.fromBase64String(n.resumeToken))}function o2(n,e){const t=Ip(e.snapshotVersion),r=Ip(e.lastLimboFreeSnapshotVersion);let i;i=RI(e.target)?zL(n.Jt,e.target):GL(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function GM(n){const e=$L({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fL(e,e.limit,"L"):e}function $M(n,e){return new zM(e.largestBatchId,VM(n.Jt,e.overlayMutation))}function a2(n,e){const t=e.path.lastSegment();return[n,Lo(e.path.popLast()),t]}class p${getBundleMetadata(e,t){return l2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Tp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return l2(e).put({bundleId:(r=t).id,createTime:Ip(Rs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return c2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:GM(i.bundledQuery),readTime:Tp(i.readTime)};var i})}saveNamedQuery(e,t){return c2(e).put({name:(r=t).name,readTime:Ip(Rs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function l2(n){return Os(n,"bundles")}function c2(n){return Os(n,"namedQueries")}class WM{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new WM(e,t.uid||"")}getOverlay(e,t){return K0(e).get(a2(this.userId,t)).next(r=>r?$M(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const h=new zM(t,u);i.push(this.Xt(e,h))}),st.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Lo(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(K0(e).Qt("collectionPathOverlayIndex",h))}),st.waitFor(s)}getOverlaysForCollection(e,t,r){const i=U0(),s=Lo(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return K0(e).qt("collectionPathOverlayIndex",u).next(h=>{for(const p of h){const y=$M(this.M,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=U0();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return K0(e).Wt({index:"collectionGroupOverlayIndex",range:h},(p,y,I)=>{const x=$M(this.M,y);s.size()<i||x.largestBatchId===u?(s.set(x.getKey(),x),u=x.largestBatchId):I.done()}).next(()=>s)}Xt(e,t){return K0(e).put(function(r,i,s){const[u,h,p]=a2(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:W0(r.Jt,s.mutation)}}(this.M,this.userId,t))}}function K0(n){return Os(n,"documentOverlays")}class Sp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ji(e.integerValue));else if("doubleValue"in e){const r=ji(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),M0(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(pp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?JF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tn()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Pt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function m$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function u2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=m$(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Sp.fe=new Sp;class g${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=u2(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=u2(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class _${constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class y${constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Y0{constructor(){this.De=new g$,this.Ce=new _$(this.De),this.xe=new y$(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Dp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Dp(this.indexId,this.documentKey,this.arrayValue,r)}}function Ap(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d2(n.arrayValue,e.arrayValue),0!==t?t:(t=d2(n.directionalValue,e.directionalValue),0!==t?t:Pt.comparator(n.documentKey,e.documentKey)))}function d2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class v${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=AM(e);if(void 0!==t&&!this.Be(t))return!1;const r=_p(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class b${constructor(){this.qe=new qM}addToCollectionParentIndex(e,t){return this.qe.add(t),st.resolve()}getCollectionParents(e,t){return st.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return st.resolve()}deleteFieldIndex(e,t){return st.resolve()}getDocumentsMatchingTarget(e,t){return st.resolve(null)}getIndexType(e,t){return st.resolve(0)}getFieldIndexes(e,t){return st.resolve([])}getNextCollectionGroupToUpdate(e){return st.resolve(null)}getMinOffset(e,t){return st.resolve(sc.min())}updateCollectionGroup(e,t,r){return st.resolve()}updateIndexEntries(e,t){return st.resolve()}}class qM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ui(_r.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ui(_r.comparator)).toArray()}}const HI=new Uint8Array(0);class w${constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new qM,this.Ge=new fh(r=>yp(r),(r,i)=>N0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:r,parent:Lo(i)};return h2(e).put(s)}return st.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$F(t),""],!1,!0);return h2(e).qt(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Kc(u.parent))}return r})}addFieldIndex(e,t){const r=zI(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=zI(e),i=GI(e),s=Q0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Q0(e);let i=!0;const s=new Map;return st.forEach(this.Qe(t),u=>this.je(e,u).next(h=>{i&&(i=!!h),s.set(u,h)})).next(()=>{if(i){let u=Vr();const h=[];return st.forEach(s,(p,y)=>{var I;Ct("IndexedDbIndexManager",`Using index ${I=p,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(Qt=>`${Qt.fieldPath}:${Qt.kind}`).join(",")}`} to execute ${yp(t)}`);const x=function(Qt,Ht){const Sn=AM(Ht);if(void 0===Sn)return null;for(const jn of OI(Qt,Sn.fieldPath))switch(jn.op){case"array-contains-any":return jn.value.arrayValue.values||[];case"array-contains":return[jn.value]}return null}(y,p),$=function(Qt,Ht){const Sn=new Map;for(const jn of _p(Ht))for(const Ar of OI(Qt,jn.fieldPath))switch(Ar.op){case"==":case"in":Sn.set(jn.fieldPath.canonicalString(),Ar.value);break;case"not-in":case"!=":return Sn.set(jn.fieldPath.canonicalString(),Ar.value),Array.from(Sn.values())}return null}(y,p),oe=function(Qt,Ht){const Sn=[];let jn=!0;for(const Ar of _p(Ht)){const zo=0===Ar.kind?aL(Qt,Ar.fieldPath,Qt.startAt):lL(Qt,Ar.fieldPath,Qt.startAt);Sn.push(zo.value),jn&&(jn=zo.inclusive)}return new hh(Sn,jn)}(y,p),ve=function(Qt,Ht){const Sn=[];let jn=!0;for(const Ar of _p(Ht)){const zo=0===Ar.kind?lL(Qt,Ar.fieldPath,Qt.endAt):aL(Qt,Ar.fieldPath,Qt.endAt);Sn.push(zo.value),jn&&(jn=zo.inclusive)}return new hh(Sn,jn)}(y,p),Ge=this.We(p,y,oe),ot=this.We(p,y,ve),Tt=this.ze(p,y,$),jt=this.He(p.indexId,x,Ge,oe.inclusive,ot,ve.inclusive,Tt);return st.forEach(jt,Qt=>r.Gt(Qt,t.limit).next(Ht=>{Ht.forEach(Sn=>{const jn=Pt.fromSegments(Sn.documentKey);u.has(jn)||(u=u.add(jn),h.push(jn))})}))}).next(()=>h)}return st.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,s,u,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),I=[];for(let x=0;x<p;++x){const $=t?this.Je(t[x/y]):HI,oe=this.Ye(e,$,r[x%y],i),ve=this.Xe(e,$,s[x%y],u),Ge=h.map(ot=>this.Ye(e,$,ot,!0));I.push(...this.createRange(oe,ve,Ge))}return I}Ye(e,t,r,i){const s=new Dp(e,Pt.empty(),t,r);return i?s:s.ke()}Xe(e,t,r,i){const s=new Dp(e,Pt.empty(),t,r);return i?s.ke():s}je(e,t){const r=new v$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const h of s)r.$e(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return st.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let h=new ui(vs.comparator),p=!1;for(const y of u.filters){const I=y;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?p=!0:h=h.add(I.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Y0;for(const i of _p(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Ne(i.kind);Sp.fe.Zt(s,u)}return r.Se()}Je(e){const t=new Y0;return Sp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Y0;return Sp.fe.Zt(gp(this.databaseId,t),r.Ne(function(i){const s=_p(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Y0);let s=0;for(const u of _p(e)){const h=r[s++];for(const p of i)if(this.en(t,u.fieldPath)&&R0(h))i=this.nn(i,u,h);else{const y=p.Ne(u.kind);Sp.fe.Zt(h,y)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const h of i){const p=new Y0;p.seed(h.Se()),Sp.fe.Zt(u,p.Ne(t.kind)),s.push(p)}return s}en(e,t){return!!e.filters.find(r=>r instanceof Xs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zI(e),i=GI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const u=[];return st.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{u.push(function(y,I){const x=I?new P0(I.sequenceNumber,new sc(Tp(I.readTime),new Pt(Kc(I.documentKey)),I.largestBatchId)):P0.empty(),$=y.fields.map(([oe,ve])=>new MI(vs.fromServerFormat(oe),ve));return new xI(y.indexId,y.collectionGroup,$,x)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Un(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zI(e),s=GI(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>st.forEach(h,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Ip(($=r).readTime),documentKey:Lo($.documentKey.path),largestBatchId:$.largestBatchId});var $})))}updateIndexEntries(e,t){const r=new Map;return st.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?st.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),st.forEach(h,p=>this.on(e,i,p).next(y=>{const I=this.un(s,p);return y.isEqual(I)?st.resolve():this.an(e,s,p,y,I)}))))})}cn(e,t,r,i){return Q0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Q0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Q0(e);let s=new ui(Ap);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,h)=>{s=s.add(new Dp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}un(e,t){let r=new ui(Ap);const i=this.Ze(t,e);if(null==i)return r;const s=AM(t);if(null!=s){const u=e.data.field(s.fieldPath);if(R0(u))for(const h of u.arrayValue.values||[])r=r.add(new Dp(t.indexId,e.key,this.Je(h),i))}else r=r.add(new Dp(t.indexId,e.key,HI,i));return r}an(e,t,r,i,s){Ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,p,y,I,x){const $=h.getIterator(),oe=p.getIterator();let ve=a_($),Ge=a_(oe);for(;ve||Ge;){let ot=!1,Tt=!1;if(ve&&Ge){const jt=y(ve,Ge);jt<0?Tt=!0:jt>0&&(ot=!0)}else null!=ve?Tt=!0:ot=!0;ot?(I(Ge),Ge=a_(oe)):Tt?(x(ve),ve=a_($)):(ve=a_($),Ge=a_(oe))}}(i,s,Ap,h=>{u.push(this.cn(e,t,r,h))},h=>{u.push(this.hn(e,t,r,h))}),st.waitFor(u)}rn(e){let t=1;return GI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Ap(u,h)).filter((u,h,p)=>!h||0!==Ap(u,p[h-1]));const i=[];i.push(e);for(const u of r){const h=Ap(u,e),p=Ap(u,t);if(0===h)i[0]=e.ke();else if(h>0&&p<0)i.push(u),i.push(u.ke());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,HI,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,HI,[]]));return s}getMinOffset(e,t){let r;return st.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?(!r||iL(s.indexState.offset,r)<0)&&(r=s.indexState.offset):r=sc.min()})).next(()=>r)}}function h2(n){return Os(n,"collectionParents")}function Q0(n){return Os(n,"indexEntries")}function zI(n){return Os(n,"indexConfiguration")}function GI(n){return Os(n,"indexState")}const f2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function p2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const p=r.Wt({range:u},(I,x,$)=>(h++,$.delete()));s.push(p.next(()=>{Tn(1===h)}));const y=[];for(const I of t.mutations){const x=YL(e,I.key.path,t.batchId);s.push(i.delete(x)),y.push(I.key)}return st.waitFor(s).next(()=>y)}function $I(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tn();e=n.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class ZM{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Tn(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new ZM(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).Wt({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=g_(e),u=mh(e);return u.add({}).next(h=>{Tn("number"==typeof h);const p=new jM(h,t,r,i),y=function($,oe,ve){const Ge=ve.baseMutations.map(Tt=>W0($.Jt,Tt)),ot=ve.mutations.map(Tt=>W0($.Jt,Tt));return{userId:oe,batchId:ve.batchId,localWriteTimeMs:ve.localWriteTime.toMillis(),baseMutations:Ge,mutations:ot}}(this.M,this.userId,p),I=[];let x=new ui(($,oe)=>Un($.canonicalString(),oe.canonicalString()));for(const $ of i){const oe=YL(this.userId,$.key.path,h);x=x.add($.key.path.popLast()),I.push(u.put(y)),I.push(s.put(oe,ZG))}return x.forEach($=>{I.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.ln[h]=p.keys()}),st.waitFor(I).next(()=>p)})}lookupMutationBatch(e,t){return mh(e).get(t).next(r=>r?(Tn(r.userId===this.userId),m_(this.M,r)):null)}fn(e,t){return this.ln[t]?st.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return mh(e).Wt({index:"userMutationsIndex",range:i},(u,h,p)=>{h.userId===this.userId&&(Tn(h.batchId>=r),s=m_(this.M,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>m_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=VI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return g_(e).Wt({range:i},(u,h,p)=>{const[y,I,x]=u,$=Kc(I);if(y===this.userId&&t.path.isEqual($))return mh(e).get(x).next(oe=>{if(!oe)throw tn();Tn(oe.userId===this.userId),s.push(m_(this.M,oe))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ui(Un);const i=[];return t.forEach(s=>{const u=VI(this.userId,s.path),h=IDBKeyRange.lowerBound(u),p=g_(e).Wt({range:h},(y,I,x)=>{const[$,oe,ve]=y,Ge=Kc(oe);$===this.userId&&s.path.isEqual(Ge)?r=r.add(ve):x.done()});i.push(p)}),st.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=VI(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new ui(Un);return g_(e).Wt({range:u},(p,y,I)=>{const[x,$,oe]=p,ve=Kc($);x===this.userId&&r.isPrefixOf(ve)?ve.length===i&&(h=h.add(oe)):I.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(mh(e).get(s).next(u=>{if(null===u)throw tn();Tn(u.userId===this.userId),r.push(m_(this.M,u))}))}),st.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return p2(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),st.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return st.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return g_(e).Wt({range:r},(s,u,h)=>{if(s[0]===this.userId){const p=Kc(s[1]);i.push(p)}else h.done()}).next(()=>{Tn(0===i.length)})})}containsKey(e,t){return m2(e,this.userId,t)}wn(e){return g2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function m2(n,e,t){const r=VI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return g_(n).Wt({range:s,jt:!0},(h,p,y)=>{const[I,x,$]=h;I===e&&x===i&&(u=!0),y.done()}).next(()=>u)}function mh(n){return Os(n,"mutations")}function g_(n){return Os(n,"documentMutations")}function g2(n){return Os(n,"mutationQueues")}class xp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new xp(0)}static yn(){return new xp(-1)}}class E${constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new xp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>wn.fromTimestamp(new Xi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>__(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tn(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return __(e).Wt((u,h)=>{const p=Z0(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>st.waitFor(s)).next(()=>i)}forEachTarget(e,t){return __(e).Wt((r,i)=>{const s=Z0(i);t(s)})}pn(e){return _2(e).get("targetGlobalKey").next(t=>(Tn(null!==t),t))}In(e,t){return _2(e).put("targetGlobalKey",t)}Tn(e,t){return __(e).put(o2(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return __(e).Wt({range:i,index:"queryTargetsIndex"},(u,h,p)=>{const y=Z0(h);N0(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=gh(e);return t.forEach(u=>{const h=Lo(u.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),st.waitFor(i)}removeMatchingKeys(e,t,r){const i=gh(e);return st.forEach(t,s=>{const u=Lo(s.path);return st.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=gh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=gh(e);let s=Vr();return i.Wt({range:r,jt:!0},(u,h,p)=>{const y=Kc(u[1]),I=new Pt(y);s=s.add(I)}).next(()=>s)}containsKey(e,t){const r=Lo(t.path),i=IDBKeyRange.bound([r],[$F(r)],!1,!0);let s=0;return gh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,h],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return __(e).get(t).next(r=>r?Z0(r):null)}}function __(n){return Os(n,"targets")}function _2(n){return Os(n,"targetGlobal")}function gh(n){return Os(n,"targetDocuments")}function Mp(n){return KM.apply(this,arguments)}function KM(){return KM=(0,ut.Z)(function*(n){if(n.code!==nt.FAILED_PRECONDITION||n.message!==JL)throw n;Ct("LocalStore","Unexpectedly lost primary lease")}),KM.apply(this,arguments)}function y2([n,e],[t,r]){const i=Un(n,t);return 0===i?Un(e,r):i}class C${constructor(e){this.An=e,this.buffer=new ui(y2),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();y2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I${constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ct("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ut.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Ep(i)?Ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Mp(i)}yield t.Sn(e)}))}}class T${constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return st.resolve(Fa.A);const r=new C$(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(f2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f2):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,s,u,h,p,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,u=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,t))).next(x=>(s=x,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(y=Date.now(),CM()<=Pa.in.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${x} documents in `+(y-p)+`ms\nTotal Duration: ${y-I}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:x})))}}class S${constructor(e,t){this.db=e,this.garbageCollector=new T$(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return WI(e,r)}removeReference(e,t,r){return WI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return WI(e,t)}On(e,t){return function(r,i){let s=!1;return g2(r).zt(u=>m2(r,u,i).next(h=>(h&&(s=!0),st.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(e,(u,h)=>{if(h<=t){const p=this.On(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,wn.min()),gh(e).delete([0,Lo(u.path)])))});i.push(p)}}).next(()=>st.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return WI(e,t)}Mn(e,t){const r=gh(e);let i,s=Fa.A;return r.Wt({index:"documentTargetsIndex"},([u,h],{path:p,sequenceNumber:y})=>{0===u?(s!==Fa.A&&t(new Pt(Kc(i)),s),s=y,i=p):s=Fa.A}).next(()=>{s!==Fa.A&&t(new Pt(Kc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function WI(n,e){return gh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Lo(e.path),sequenceNumber:r}));var r}class v2{constructor(){this.changes=new fh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?st.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class D${constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return kp(e).put(r)}removeEntry(e,t,r){return kp(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],jI(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=mi.newInvalidDocument(t);return kp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(X0(t))},(i,s)=>{r=this.$n(t,s)}).next(()=>r)}Bn(e,t){let r={size:0,document:mi.newInvalidDocument(t)};return kp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(X0(t))},(i,s)=>{r={document:this.$n(t,s),size:$I(s)}}).next(()=>r)}getEntries(e,t){let r=hl();return this.Ln(e,t,(i,s)=>{const u=this.$n(i,s);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=hl(),i=new Ji(Pt.comparator);return this.Ln(e,t,(s,u)=>{const h=this.$n(s,u);r=r.insert(s,h),i=i.insert(s,$I(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return st.resolve();let i=new ui(E2);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(X0(i.first()),X0(i.last())),u=i.getIterator();let h=u.getNext();return kp(e).Wt({index:"documentKeyIndex",range:s},(p,y,I)=>{const x=Pt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&E2(h,x)<0;)r(h,null),h=u.getNext();h&&h.isEqual(x)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?I.Ut(X0(h)):I.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),jI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kp(e).qt(IDBKeyRange.bound(i,s,!0)).next(u=>{let h=hl();for(const p of u){const y=this.$n(Pt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=hl();const u=w2(t,r),h=w2(t,sc.max());return kp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(p,y,I)=>{const x=this.$n(Pt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(x.key,x),s.size===i&&I.done()}).next(()=>s)}newChangeBuffer(e){return new A$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return b2(e).get("remoteDocumentGlobalKey").next(t=>(Tn(!!t),t))}Fn(e,t){return b2(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=HL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pt.fromSegments(e.noDocument.path),i=Tp(e.noDocument.readTime);t=mi.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tn();{const r=Pt.fromSegments(e.unknownDocument.path),i=Tp(e.unknownDocument.version);t=mi.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Xi(r[0],r[1]);return wn.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(wn.min()))return r}return mi.newInvalidDocument(e)}}class A$ extends v2{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new fh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ui((s,u)=>Un(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,h.readTime)),u.isValidDocument()){const p=s2(this.Kn.M,u);i=i.add(s.path.popLast()),r+=$I(p)-h.size,t.push(this.Kn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=s2(this.Kn.M,u.convertToNoDocument(wn.min()));t.push(this.Kn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,r)),st.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((s,u)=>{this.Gn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function b2(n){return Os(n,"remoteDocumentGlobal")}function kp(n){return Os(n,"remoteDocumentsV14")}function X0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function w2(n,e){const t=e.documentKey.path.toArray();return[n,jI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function E2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Un(t[s],r[s]),i)return i;return i=Un(t.length,r.length),i||(i=Un(t[t.length-2],r[r.length-2]),i||Un(t[t.length-1],r[r.length-1]))}class x${constructor(e){this.M=e}kt(e,t,r,i){const s=new UI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KL,{unique:!0}),h.createObjectStore("documentMutations"),C2(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=st.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),C2(e)),u=u.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wn.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,p){return p.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KL,{unique:!0});const I=p.store("mutations"),x=y.map($=>I.put($));return st.waitFor(x)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(s))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:o$});p.createIndex("collectionPathOverlayIndex",a$,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",l$,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:KG});p.createIndex("documentKeyIndex",YG),p.createIndex("collectionGroupIndex",QG)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:n$}).createIndex("sequenceNumberIndex",r$,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:i$}).createIndex("documentKeyIndex",s$,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=$I(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>st.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(h=>st.forEach(h,p=>{Tn(p.userId===s.userId);const y=m_(this.M,p);return p2(e,s.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((u,h)=>{const p=new _r(u),y=[0,Lo(p)];s.push(t.get(y).next(I=>I?st.resolve():t.put({targetId:0,path:Lo(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>st.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:t$});const r=t.store("collectionParents"),i=new qM,s=u=>{if(i.add(u)){const h=u.lastSegment(),p=u.popLast();return r.put({collectionId:h,parent:Lo(p)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,h)=>{const p=new _r(u);return s(p.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,h,p],y)=>{const I=Kc(h);return s(I.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const s=Z0(i),u=o2(this.M,s);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((s,u)=>{const h=t.store("remoteDocumentsV14"),p=(y=u,y.document?new Pt(_r.fromString(y.document.name).popFirst(5)):y.noDocument?Pt.fromSegments(y.noDocument.path):y.unknownDocument?Pt.fromSegments(y.unknownDocument.path):tn()).path.toArray();var y;const I={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(I))}).next(()=>st.waitFor(i))}}function C2(n){n.createObjectStore("targetDocuments",{keyPath:JG}).createIndex("documentTargetsIndex",e$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XG,{unique:!0}),n.createObjectStore("targetGlobal")}const YM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QM{constructor(e,t,r,i,s,u,h,p,y,I,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=s,this.window=u,this.document=h,this.Xn=y,this.Zn=I,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=$=>Promise.resolve(),!QM.vt())throw new vt(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new S$(this,i),this.hs=t+"main",this.M=new r2(p),this.ls=new oc(this.hs,this.ts,new x$(this.M)),this.fs=new E$(this.referenceDelegate,this.M),this.ds=new D$(this.M),this._s=new p$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===I&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(nt.FAILED_PRECONDITION,YM);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Fa(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ut.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ut.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ut.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Ep(e))return Ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return J0(e).get("owner").next(t=>st.resolve(this.Ps(t)))}Vs(e){return qI(e).delete(this.clientId)}vs(){var e=this;return(0,ut.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Os(r,"clientMetadata");return i.qt().next(s=>{const u=e.Ds(s,18e5),h=s.filter(p=>-1===u.indexOf(p));return st.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?st.resolve(!0):J0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new vt(nt.FAILED_PRECONDITION,YM);return!1}}return!(!this.networkEnabled||!this.inForeground)||qI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ut.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new n2(t,Fa.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>qI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return ZM.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new w$(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return WM.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ct("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(u=this.ts)?u$:13===u?XL:12===u?c$:11===u?QL:void tn();var u;let h;return this.ls.runTransaction(e,i,s,p=>(h=new n2(p,this.es?this.es.next():Fa.A),"readwrite-primary"===t?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw os(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new vt(nt.FAILED_PRECONDITION,JL);return r(h)}).next(y=>this.bs(h).next(()=>y)):this.$s(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}$s(e){return J0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new vt(nt.FAILED_PRECONDITION,YM)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return J0(e).put("owner",t)}static vt(){return oc.vt()}Rs(e){const t=J0(e);return t.get("owner").next(r=>this.Ps(r)?(Ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):st.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(os(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,ae.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ct("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return os("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){os("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function J0(n){return Os(n,"owner")}function qI(n){return Os(n,"clientMetadata")}function XM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class M${constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Pt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):kM(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Pt(t)).next(r=>{let i=FM();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let s=FM();return this.indexManager.getCollectionParents(e,i).next(u=>st.forEach(u,h=>{const p=(y=t,I=h.child(i),new Zu(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.zs(e,p,r).next(y=>{y.forEach((I,x)=>{s=s.insert(I,x)})})}).next(()=>s))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const u of s)for(const h of u.mutations){const p=h.key;let y=i.get(p);null==y&&(y=mi.newInvalidDocument(p),i=i.insert(p,y)),PM(h,y,u.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((s,u)=>{OM(t,u)||(i=i.remove(s))}),i))}}class JM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Vr(),i=Vr();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new JM(e,t.fromCache,r,i)}}class I2{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(s=>s||this.ei(e,t,i,r)).next(s=>s||this.ni(e,t))}ti(e,t){return st.resolve(null)}ei(e,t,r,i){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(wn.min())?this.ni(e,t):this.Zs.Ks(e,r).next(s=>{const u=this.si(t,s);return this.ii(t,u,r,i)?this.ni(e,t):(CM()<=Pa.in.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),RM(t)),this.ri(e,u,t,rL(i,-1)))})}si(e,t){let r=new ui(gL(e));return t.forEach((i,s)=>{OM(e,s)&&(r=r.add(s))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,t){return CM()<=Pa.in.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",RM(t)),this.Zs.Qs(e,t,sc.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class k${constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Ji(Un),this.ai=new fh(s=>yp(s),N0),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new M$(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function T2(n,e,t,r){return new k$(n,e,t,r)}function S2(n,e){return e1.apply(this,arguments)}function e1(){return e1=(0,ut.Z)(function*(n,e){const t=Ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(s=>(i=s,t.li(e),t.Bs.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let p=Vr();for(const y of i){u.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}for(const y of s){h.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}return t.fi.Ks(r,p).next(y=>({di:y,removedBatchIds:u,addedBatchIds:h}))})})}),e1.apply(this,arguments)}function R$(n,e){const t=Ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(u,h,p,y){const I=p.batch,x=I.keys();let $=st.resolve();return x.forEach(oe=>{$=$.next(()=>y.getEntry(h,oe)).next(ve=>{const Ge=p.docVersions.get(oe);Tn(null!==Ge),ve.version.compareTo(Ge)<0&&(I.applyToRemoteDocument(ve,p),ve.isValidDocument()&&(ve.setReadTime(p.commitVersion),y.addEntry(ve)))})}),$.next(()=>u.Bs.removeMutationBatch(h,I))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function D2(n){const e=Ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function O$(n,e){const t=Ut(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((y,I)=>{const x=i.get(I);if(!x)return;h.push(t.fs.removeMatchingKeys(s,y.removedDocuments,I).next(()=>t.fs.addMatchingKeys(s,y.addedDocuments,I)));let $=x.withSequenceNumber(s.currentSequenceNumber);var oe,ve,Ge;e.targetMismatches.has(I)?$=$.withResumeToken(bs.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):y.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(y.resumeToken,r)),i=i.insert(I,$),ve=$,Ge=y,(0===(oe=x).resumeToken.approximateByteSize()||ve.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Ge.addedDocuments.size+Ge.modifiedDocuments.size+Ge.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(s,$))});let p=hl();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(A2(s,u,e.documentUpdates).next(y=>{p=y})),!r.isEqual(wn.min())){const y=t.fs.getLastRemoteSnapshotVersion(s).next(I=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return st.waitFor(h).next(()=>u.apply(s)).next(()=>t.fi.Gs(s,p)).next(()=>p)}).then(s=>(t.ui=i,s))}function A2(n,e,t){let r=Vr();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=hl();return t.forEach((u,h)=>{const p=i.get(u);h.isNoDocument()&&h.version.isEqual(wn.min())?(e.removeEntry(u,h.readTime),s=s.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),s=s.insert(u,h)):Ct("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),s})}function P$(n,e){const t=Ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function y_(n,e){const t=Ut(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(s=>s?(i=s,st.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new ph(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function v_(n,e,t){return t1.apply(this,arguments)}function t1(){return t1=(0,ut.Z)(function*(n,e,t){const r=Ut(n),i=r.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ep(u))throw u;Ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),t1.apply(this,arguments)}function ZI(n,e,t){const r=Ut(n);let i=wn.min(),s=Vr();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,p,y){const I=Ut(h),x=I.ai.get(y);return void 0!==x?st.resolve(I.ui.get(x)):I.fs.getTargetData(p,y)}(r,u,dl(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,h.targetId).next(p=>{s=p})}).next(()=>r.oi.Qs(u,e,t?i:wn.min(),t?s:Vr())).next(h=>(k2(r,mL(e),h),{documents:h,_i:s})))}function x2(n,e){const t=Ut(n),r=Ut(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(u=>u?u.target:null))}function M2(n,e){const t=Ut(n),r=t.ci.get(e)||wn.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,rL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(k2(t,e,i),i))}function k2(n,e,t){let r=wn.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ci.set(e,r)}function n1(){return n1=(0,ut.Z)(function*(n,e,t,r){const i=Ut(n);let s=Vr(),u=hl();for(const y of t){const I=e.wi(y.metadata.name);y.document&&(s=s.add(I));const x=e.mi(y);x.setReadTime(e.gi(y.metadata.readTime)),u=u.insert(I,x)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),p=yield y_(i,(y=r,dl(c_(_r.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>A2(y,h,u).next(I=>(h.apply(y),I)).next(I=>i.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.fs.addMatchingKeys(y,s,p.targetId)).next(()=>i.fi.Gs(y,I)).next(()=>I)))}),n1.apply(this,arguments)}function F$(n,e){return r1.apply(this,arguments)}function r1(){return r1=(0,ut.Z)(function*(n,e,t=Vr()){const r=yield y_(n,dl(GM(e.bundledQuery))),i=Ut(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Rs(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(s,e);const h=r.withResumeToken(bs.EMPTY_BYTE_STRING,u);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(s,h).next(()=>i.fs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.fs.addMatchingKeys(s,t,r.targetId)).next(()=>i._s.saveNamedQuery(s,e))})}),r1.apply(this,arguments)}class L${constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return st.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Rs(r.createTime)}),st.resolve()}getNamedQuery(e,t){return st.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:GM(r.bundledQuery),readTime:Rs(r.readTime)}),st.resolve();var r}}class B${constructor(){this.overlays=new Ji(Pt.comparator),this.Ii=new Map}getOverlay(e,t){return st.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),st.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(r)),st.resolve()}getOverlaysForCollection(e,t,r){const i=U0(),s=t.length+1,u=new Pt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return st.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ji((y,I)=>y-I);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=s.get(y.largestBatchId);null===I&&(I=U0(),s=s.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=U0(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,I)=>h.set(y,I)),!(h.size()>=i)););return st.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new zM(t,r));let s=this.Ii.get(t);void 0===s&&(s=Vr(),this.Ii.set(t,s)),this.Ii.set(t,s.add(r.key))}}class s1{constructor(){this.Ti=new ui(Ps.Ei),this.Ai=new ui(Ps.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ps(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ps(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Pt(new _r([])),r=new Ps(t,e),i=new Ps(t,e+1),s=[];return this.Ai.forEachInRange([r,i],u=>{this.Pi(u),s.push(u.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Pt(new _r([])),r=new Ps(t,e),i=new Ps(t,e+1);let s=Vr();return this.Ai.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ps(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ps{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Pt.comparator(e.key,t.key)||Un(e.Ci,t.Ci)}static Ri(e,t){return Un(e.Ci,t.Ci)||Pt.comparator(e.key,t.key)}}class V${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new ui(Ps.Ei)}checkEmpty(e){return st.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const s=this.xi;this.xi++;const u=new jM(s,t,r,i);this.Bs.push(u);for(const h of i)this.Ni=this.Ni.add(new Ps(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return st.resolve(u)}lookupMutationBatch(e,t){return st.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),s=i<0?0:i;return st.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return st.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ps(t,0),i=new Ps(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([r,i],u=>{const h=this.ki(u.Ci);s.push(h)}),st.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ui(Un);return t.forEach(i=>{const s=new Ps(i,0),u=new Ps(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,u],h=>{r=r.add(h.Ci)})}),st.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Pt.isDocumentKey(s)||(s=s.child(""));const u=new Ps(new Pt(s),0);let h=new ui(Un);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.Ci)),!0)},u),st.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tn(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return st.forEach(t.mutations,i=>{const s=new Ps(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ps(t,0),i=this.Ni.firstAfterOrEqual(r);return st.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return st.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class U${constructor(e){this.$i=e,this.docs=new Ji(Pt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return st.resolve(r?r.document.mutableCopy():mi.newInvalidDocument(t))}getEntries(e,t){let r=hl();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mi.newInvalidDocument(i))}),st.resolve(r)}getAllFromCollection(e,t,r){let i=hl();const s=new Pt(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||iL(lG(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return st.resolve(i)}getAllFromCollectionGroup(e,t,r,i){tn()}Bi(e,t){return st.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new j$(this)}getSize(e){return st.resolve(this.size)}}class j$ extends v2{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),st.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class H${constructor(e){this.persistence=e,this.Li=new fh(t=>yp(t),N0),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new s1,this.targetCount=0,this.Ki=xp.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),st.resolve()}getLastRemoteSnapshotVersion(e){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return st.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),st.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new xp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,st.resolve()}updateTargetData(e,t){return this.Tn(t),st.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,st.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Li.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),st.waitFor(s).next(()=>i)}getTargetCount(e){return st.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return st.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),st.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),st.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),st.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return st.resolve(r)}containsKey(e,t){return st.resolve(this.qi.containsKey(t))}}class z${constructor(e,t){this.Gi={},this.overlays={},this.es=new Fa(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new H$(this),this.indexManager=new b$,this.ds=new U$(r=>this.referenceDelegate.Qi(r)),this.M=new r2(t),this._s=new L$(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new V$(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ct("MemoryPersistence","Starting transaction:",e);const i=new G$(this.es.next());return this.referenceDelegate.ji(),r(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,t){return st.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class G$ extends e2{constructor(e){super(),this.currentSequenceNumber=e}}class o1{constructor(e){this.persistence=e,this.Hi=new s1,this.Ji=null}static Yi(e){return new o1(e)}get Xi(){if(this.Ji)return this.Ji;throw tn()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),st.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),st.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),st.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.Xi,r=>{const i=Pt.fromPath(r);return this.Zi(e,i).next(s=>{s||t.removeEntry(i,wn.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return st.or([()=>st.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function R2(n,e){return`firestore_clients_${n}_${e}`}function O2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function a1(n,e){return`firestore_targets_${n}_${e}`}class KI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new vt(i.error.code,i.error.message))),u?new KI(e,t,i.state,s):(os("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new vt(r.error.code,r.error.message))),s?new eb(e,r.state,i):(os("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class YI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=LI();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=KF(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new YI(e,s):(os("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class l1{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new l1(t.clientId,t.onlineState):(os("SharedClientState",`Failed to parse online state: ${e}`),null)}}class c1{constructor(){this.activeTargetIds=LI()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u1{constructor(e,t,r,i,s){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Ji(Un),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=R2(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new c1),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ut.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const s=e.getItem(R2(e.persistenceKey,i));if(s){const u=YI.tr(i,s);u&&(e.ar=e.ar.insert(u.clientId,u))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(a1(this.persistenceKey,e));if(r){const i=eb.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(a1(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ct("SharedClientState","READ",e,t),t}setItem(e,t){Ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ct("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ut.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(s){let u=Fa.A;if(null!=s)try{const h=JSON.parse(s);Tn("number"==typeof h),u=h}catch(h){os("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==Fa.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new KI(this.currentUser,e,t,r),s=O2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.er())}Ar(e){const t=O2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=a1(this.persistenceKey,e),s=new eb(e,t,r);this.setItem(i,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return YI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return KI.tr(new Ys(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return eb.tr(i,t)}pr(e){return l1.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ut.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),s=this.Tr(r),u=[],h=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Lr(u,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=LI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class P2{constructor(){this.Ur=new c1,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new c1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $${Kr(e){}shutdown(){}}class N2{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const W$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class q${constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Z$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const u=this.ho(e,t);Ct("RestConnection","Sending: ",u,r);const h={};return this.lo(h,i,s),this.fo(e,u,h,r).then(p=>(Ct("RestConnection","Received: ",p),p),p=>{throw S0("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}_o(e,t,r,i,s){return this.co(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+r_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.uo}/v1/${t}:${W$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const h=new Wz;h.listenOnce(zz.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case EM.NO_ERROR:const y=h.getResponseJson();Ct("Connection","XHR received:",JSON.stringify(y)),s(y);break;case EM.TIMEOUT:Ct("Connection",'RPC "'+e+'" timed out'),u(new vt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case EM.HTTP_ERROR:const I=h.getStatus();if(Ct("Connection",'RPC "'+e+'" failed with status:',I,"response text:",h.getResponseText()),I>0){const x=h.getResponseJson().error;if(x&&x.status&&x.message){const $=function(oe){const ve=oe.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(ve)>=0?ve:nt.UNKNOWN}(x.status);u(new vt($,x.message))}else u(new vt(nt.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new vt(nt.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{Ct("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jz(),u=Hz(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new $z({})),this.lo(h.initMessageHeaders,t,r),(0,ae.uI)()||(0,ae.b$)()||(0,ae.d)()||(0,ae.w1)()||(0,ae.Mn)()||(0,ae.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Ct("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let I=!1,x=!1;const $=new q$({Jr:ve=>{x?Ct("Connection","Not sending because WebChannel is closed:",ve):(I||(Ct("Connection","Opening WebChannel transport."),y.open(),I=!0),Ct("Connection","WebChannel sending:",ve),y.send(ve))},Yr:()=>y.close()}),oe=(ve,Ge,ot)=>{ve.listen(Ge,Tt=>{try{ot(Tt)}catch(jt){setTimeout(()=>{throw jt},0)}})};return oe(y,SI.EventType.OPEN,()=>{x||Ct("Connection","WebChannel transport opened.")}),oe(y,SI.EventType.CLOSE,()=>{x||(x=!0,Ct("Connection","WebChannel transport closed"),$.ro())}),oe(y,SI.EventType.ERROR,ve=>{x||(x=!0,S0("Connection","WebChannel transport errored:",ve),$.ro(new vt(nt.UNAVAILABLE,"The operation could not be completed")))}),oe(y,SI.EventType.MESSAGE,ve=>{var Ge;if(!x){const ot=ve.data[0];Tn(!!ot);const Tt=ot,jt=Tt.error||(null===(Ge=Tt[0])||void 0===Ge?void 0:Ge.error);if(jt){Ct("Connection","WebChannel received error:",jt);const Qt=jt.status;let Ht=function(jn){const Ar=ls[jn];if(void 0!==Ar)return kL(Ar)}(Qt),Sn=jt.message;void 0===Ht&&(Ht=nt.INTERNAL,Sn="Unknown error status: "+Qt+" with message "+jt.message),x=!0,$.ro(new vt(Ht,Sn)),y.close()}else Ct("Connection","WebChannel received:",ot),$.oo(ot)}}),oe(u,Gz.STAT_EVENT,ve=>{ve.stat===UF.PROXY?Ct("Connection","Detected buffering proxy"):ve.stat===UF.NOPROXY&&Ct("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.io()},0),$}}function F2(){return"undefined"!=typeof window?window:null}function QI(){return"undefined"!=typeof document?document:null}function tb(n){return new FG(n,!0)}class d1{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class L2{constructor(e,t,r,i,s,u,h,p){this.Yn=e,this.Vo=r,this.vo=i,this.So=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new d1(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ut.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ut.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ut.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===nt.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===nt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new vt(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ut.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K$ extends L2{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:tn(),i=e.targetChange.targetIds||[],s=function(p,y){return p.N?(Tn(void 0===y||"string"==typeof y),bs.fromBase64String(y||"")):(Tn(void 0===y||y instanceof Uint8Array),bs.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=void 0===p.code?nt.UNKNOWN:kL(p.code);return new vt(y,p.message||"")}(u);t=new OL(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Zc(n,r.document.name),s=Rs(r.document.updateTime),u=new vo({mapValue:{fields:r.document.fields}}),h=mi.newFoundDocument(i,s,u);t=new BI(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Zc(n,r.document),s=r.readTime?Rs(r.readTime):wn.min(),u=mi.newNoDocument(i,s);t=new BI([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Zc(n,r.document);t=new BI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return tn();{const r=e.filter,s=new DG(r.count||0);t=new RL(r.targetId,s)}}var p;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return wn.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?wn.min():s.readTime?Rs(s.readTime):wn.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=$0(this.M),t.addTarget=function(i,s){let u;const h=s.target;return u=RI(h)?{documents:zL(i,h)}:{query:GL(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=LL(i,s.resumeToken):s.snapshotVersion.compareTo(wn.min())>0&&(u.readTime=z0(i,s.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=$0(this.M),t.removeTarget=e,this.Lo(t)}}class Y$ extends L2{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Tn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Tn(void 0!==e),n.map(t=>function(r,i){let s=Rs(r.updateTime?r.updateTime:i);return s.isEqual(wn.min())&&(s=Rs(i)),new IG(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Rs(e.commitTime);return this.listener.tu(r,t)}return Tn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=$0(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>W0(this.M,r))};this.Lo(t)}}class Q$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new vt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new vt(nt.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new vt(nt.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class X${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(os(t),this.uu=!1):Ct("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class J${constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{r.enqueueAndForget((0,ut.Z)(function*(){var p;_h(u)&&(Ct("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ut.Z)(function*(y){const I=Ut(y);I.wu.add(4),yield b_(I),I.yu.set("Unknown"),I.wu.delete(4),yield nb(I)}),function(y){return p.apply(this,arguments)})(u))}))}),this.yu=new X$(r,i)}}function nb(n){return h1.apply(this,arguments)}function h1(){return h1=(0,ut.Z)(function*(n){if(_h(n))for(const e of n.mu)yield e(!0)}),h1.apply(this,arguments)}function b_(n){return f1.apply(this,arguments)}function f1(){return f1=(0,ut.Z)(function*(n){for(const e of n.mu)yield e(!1)}),f1.apply(this,arguments)}function XI(n,e){const t=Ut(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),g1(t)?m1(t):E_(t).Mo()&&p1(t,e))}function rb(n,e){const t=Ut(n),r=E_(t);t._u.delete(e),r.Mo()&&B2(t,e),0===t._u.size&&(r.Mo()?r.$o():_h(t)&&t.yu.set("Unknown"))}function p1(n,e){n.pu.Z(e.targetId),E_(n).Ho(e)}function B2(n,e){n.pu.Z(e),E_(n).Jo(e)}function m1(n){n.pu=new OG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),E_(n).start(),n.yu.au()}function g1(n){return _h(n)&&!E_(n).ko()&&n._u.size>0}function _h(n){return 0===Ut(n).wu.size}function V2(n){n.pu=void 0}function eW(n){return _1.apply(this,arguments)}function _1(){return _1=(0,ut.Z)(function*(n){n._u.forEach((e,t)=>{p1(n,e)})}),_1.apply(this,arguments)}function tW(n,e){return y1.apply(this,arguments)}function y1(){return y1=(0,ut.Z)(function*(n,e){V2(n),g1(n)?(n.yu.lu(e),m1(n)):n.yu.set("Unknown")}),y1.apply(this,arguments)}function nW(n,e,t){return v1.apply(this,arguments)}function v1(){return v1=(0,ut.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof OL&&2===e.state&&e.cause)try{yield(r=(0,ut.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i._u.delete(h),i.pu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield JI(n,r)}else if(e instanceof BI?n.pu.ut(e):e instanceof RL?n.pu._t(e):n.pu.ht(e),!t.isEqual(wn.min()))try{const r=yield D2(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.pu.yt(s);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i._u.get(p);y&&i._u.set(p,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const p=i._u.get(h);if(!p)return;i._u.set(h,p.withResumeToken(bs.EMPTY_BYTE_STRING,p.snapshotVersion)),B2(i,h);const y=new ph(p.target,h,1,p.sequenceNumber);p1(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ct("RemoteStore","Failed to raise snapshot:",r),yield JI(n,r)}var r}),v1.apply(this,arguments)}function JI(n,e,t){return b1.apply(this,arguments)}function b1(){return b1=(0,ut.Z)(function*(n,e,t){if(!Ep(e))throw e;n.wu.add(1),yield b_(n),n.yu.set("Offline"),t||(t=()=>D2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ut.Z)(function*(){Ct("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield nb(n)}))}),b1.apply(this,arguments)}function U2(n,e){return e().catch(t=>JI(n,t,e))}function w_(n){return w1.apply(this,arguments)}function w1(){return w1=(0,ut.Z)(function*(n){const e=Ut(n),t=yh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;rW(e);)try{const i=yield P$(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,iW(e,i)}catch(i){yield JI(e,i)}j2(e)&&H2(e)}),w1.apply(this,arguments)}function rW(n){return _h(n)&&n.du.length<10}function iW(n,e){n.du.push(e);const t=yh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function j2(n){return _h(n)&&!yh(n).ko()&&n.du.length>0}function H2(n){yh(n).start()}function sW(n){return E1.apply(this,arguments)}function E1(){return E1=(0,ut.Z)(function*(n){yh(n).nu()}),E1.apply(this,arguments)}function oW(n){return C1.apply(this,arguments)}function C1(){return C1=(0,ut.Z)(function*(n){const e=yh(n);for(const t of n.du)e.Zo(t.mutations)}),C1.apply(this,arguments)}function aW(n,e,t){return I1.apply(this,arguments)}function I1(){return I1=(0,ut.Z)(function*(n,e,t){const r=n.du.shift(),i=HM.from(r,e,t);yield U2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield w_(n)}),I1.apply(this,arguments)}function lW(n,e){return T1.apply(this,arguments)}function T1(){return T1=(0,ut.Z)(function*(n,e){var t;e&&yh(n).Xo&&(yield(t=(0,ut.Z)(function*(r,i){if(ML(s=i.code)&&s!==nt.ABORTED){const u=r.du.shift();yh(r).Fo(),yield U2(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield w_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),j2(n)&&H2(n)}),T1.apply(this,arguments)}function z2(n,e){return S1.apply(this,arguments)}function S1(){return S1=(0,ut.Z)(function*(n,e){const t=Ut(n);t.asyncQueue.verifyOperationInProgress(),Ct("RemoteStore","RemoteStore received new credentials");const r=_h(t);t.wu.add(3),yield b_(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield nb(t)}),S1.apply(this,arguments)}function D1(n,e){return A1.apply(this,arguments)}function A1(){return A1=(0,ut.Z)(function*(n,e){const t=Ut(n);e?(t.wu.delete(2),yield nb(t)):e||(t.wu.add(2),yield b_(t),t.yu.set("Unknown"))}),A1.apply(this,arguments)}function E_(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ut(e);return i.iu(),new K$(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:eW.bind(null,n),eo:tW.bind(null,n),zo:nW.bind(null,n)}),n.mu.push(function(){var e=(0,ut.Z)(function*(t){t?(n.Iu.Fo(),g1(n)?m1(n):n.yu.set("Unknown")):(yield n.Iu.stop(),V2(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function yh(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ut(e);return i.iu(),new Y$(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:sW.bind(null,n),eo:lW.bind(null,n),eu:oW.bind(null,n),tu:aW.bind(null,n)}),n.mu.push(function(){var e=(0,ut.Z)(function*(t){t?(n.Tu.Fo(),yield w_(n)):(yield n.Tu.stop(),n.du.length>0&&(Ct("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class x1{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new x1(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C_(n,e){if(os("AsyncQueue",`${e}: ${n}`),Ep(n))return new vt(nt.UNAVAILABLE,`${e}: ${n}`);throw n}class I_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pt.comparator(t.key,r.key):(t,r)=>Pt.comparator(t.key,r.key),this.keyedMap=FM(),this.sortedSet=new Ji(this.comparator)}static emptySet(e){return new I_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof I_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new I_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class G2{constructor(){this.Eu=new Ji(Pt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tn():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class T_{constructor(e,t,r,i,s,u,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new T_(e,t,I_.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&F0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cW{constructor(){this.Ru=void 0,this.listeners=[]}}class uW{constructor(){this.queries=new fh(e=>pL(e),F0),this.onlineState="Unknown",this.bu=new Set}}function M1(n,e){return k1.apply(this,arguments)}function k1(){return k1=(0,ut.Z)(function*(n,e){const t=Ut(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new cW),i)try{s.Ru=yield t.onListen(r)}catch(u){const h=C_(u,`Initialization of query '${RM(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&P1(t)}),k1.apply(this,arguments)}function R1(n,e){return O1.apply(this,arguments)}function O1(){return O1=(0,ut.Z)(function*(n,e){const t=Ut(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),O1.apply(this,arguments)}function dW(n,e){const t=Ut(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Vu(i)&&(r=!0);u.Ru=i}}r&&P1(t)}function hW(n,e,t){const r=Ut(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function P1(n){n.bu.forEach(e=>{e.next()})}class N1{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new T_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=T_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class fW{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class $2{constructor(e){this.M=e}wi(e){return Zc(this.M,e)}mi(e){return e.metadata.exists?HL(this.M,e.document,!1):mi.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Rs(e)}}class pW{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=W2(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=_r.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new $2(this.M);for(const i of e)if(i.metadata.queries){const s=r.wi(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Vr()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,ut.Z)(function*(){const t=yield function(n,e,t,r){return n1.apply(this,arguments)}(e.localStore,new $2(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield F$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function W2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class q2{constructor(e){this.key=e}}class Z2{constructor(e){this.key=e}}class K2{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Vr(),this.mutatedKeys=Vr(),this.Gu=gL(e),this.Qu=new I_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new G2,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,x)=>{const $=i.get(I),oe=OM(this.query,x)?x:null,ve=!!$&&this.mutatedKeys.has($.key),Ge=!!oe&&(oe.hasLocalMutations||this.mutatedKeys.has(oe.key)&&oe.hasCommittedMutations);let ot=!1;$&&oe?$.data.isEqual(oe.data)?ve!==Ge&&(r.track({type:3,doc:oe}),ot=!0):this.Hu($,oe)||(r.track({type:2,doc:oe}),ot=!0,(p&&this.Gu(oe,p)>0||y&&this.Gu(oe,y)<0)&&(h=!0)):!$&&oe?(r.track({type:0,doc:oe}),ot=!0):$&&!oe&&(r.track({type:1,doc:$}),ot=!0,(p||y)&&(h=!0)),ot&&(oe?(u=u.add(oe),s=Ge?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{Qu:u,zu:r,ii:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((y,I)=>function(x,$){const oe=ve=>{switch(ve){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return oe(x)-oe($)}(y.type,I.type)||this.Gu(y.doc,I.doc)),this.Ju(r);const u=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new T_(this.query,e.Qu,i,s,e.mutatedKeys,0===h,p,!1),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new G2,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Vr(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Z2(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new q2(r))}),t}ta(e){this.Uu=e._i,this.Ku=Vr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return T_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class mW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gW{constructor(e){this.key=e,this.na=!1}}class _W{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new fh(h=>pL(h),F0),this.ra=new Map,this.oa=new Set,this.ua=new Ji(Pt.comparator),this.aa=new Map,this.ca=new s1,this.ha={},this.la=new Map,this.fa=xp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function yW(n,e){return F1.apply(this,arguments)}function F1(){return F1=(0,ut.Z)(function*(n,e){const t=sk(n);let r,i;const s=t.ia.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const u=yield y_(t.localStore,dl(e));t.isPrimaryClient&&XI(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield L1(t,e,r,"current"===h)}return i}),F1.apply(this,arguments)}function L1(n,e,t,r){return B1.apply(this,arguments)}function B1(){return B1=(0,ut.Z)(function*(n,e,t,r){n._a=(I,x,$)=>{return(oe=(0,ut.Z)(function*(ve,Ge,ot,Tt){let jt=Ge.view.Wu(ot);jt.ii&&(jt=yield ZI(ve.localStore,Ge.query,!1).then(({documents:Sn})=>Ge.view.Wu(Sn,jt)));const Qt=Tt&&Tt.targetChanges.get(Ge.targetId),Ht=Ge.view.applyChanges(jt,ve.isPrimaryClient,Qt);return Z1(ve,Ge.targetId,Ht.Xu),Ht.snapshot}),function(ve,Ge,ot,Tt){return oe.apply(this,arguments)})(n,I,x,$);var oe};const i=yield ZI(n.localStore,e,!0),s=new K2(e,i._i),u=s.Wu(i.documents),h=H0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(u,n.isPrimaryClient,h);Z1(n,t,p.Xu);const y=new mW(e,t,s);return n.ia.set(e,y),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),p.snapshot}),B1.apply(this,arguments)}function vW(n,e){return V1.apply(this,arguments)}function V1(){return V1=(0,ut.Z)(function*(n,e){const t=Ut(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(s=>!F0(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield v_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rb(t.remoteStore,r.targetId),S_(t,r.targetId)}).catch(Mp))):(S_(t,r.targetId),yield v_(t.localStore,r.targetId,!0))}),V1.apply(this,arguments)}function U1(){return U1=(0,ut.Z)(function*(n,e,t){const r=ok(n);try{const i=yield function(s,u){const h=Ut(s),p=Xi.now(),y=u.reduce((x,$)=>x.add($.key),Vr());let I;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>h.fi.Ks(x,y).next($=>{I=$;const oe=[];for(const ve of u){const Ge=SG(ve,I.get(ve.key));null!=Ge&&oe.push(new wp(ve.key,Ge,nL(Ge.value.mapValue),as.exists(!0)))}return h.Bs.addMutationBatch(x,p,oe,u)})).then(x=>(x.applyToLocalDocumentSet(I),{batchId:x.batchId,changes:I}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let p=s.ha[s.currentUser.toKey()];p||(p=new Ji(Un)),p=p.insert(u,h),s.ha[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Ku(r,i.changes),yield w_(r.remoteStore)}catch(i){const s=C_(i,"Failed to persist write");t.reject(s)}}),U1.apply(this,arguments)}function Y2(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,ut.Z)(function*(n,e){const t=Ut(n);try{const r=yield O$(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.aa.get(s);u&&(Tn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.na=!0:i.modifiedDocuments.size>0?Tn(u.na):i.removedDocuments.size>0&&(Tn(u.na),u.na=!1))}),yield Ku(t,r,e)}catch(r){yield Mp(r)}}),j1.apply(this,arguments)}function Q2(n,e,t){const r=Ut(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((s,u)=>{const h=u.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=Ut(s);h.onlineState=u;let p=!1;h.queries.forEach((y,I)=>{for(const x of I.listeners)x.Pu(u)&&(p=!0)}),p&&P1(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wW(n,e,t){return H1.apply(this,arguments)}function H1(){return H1=(0,ut.Z)(function*(n,e,t){const r=Ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),s=i&&i.key;if(s){let u=new Ji(Pt.comparator);u=u.insert(s,mi.newNoDocument(s,wn.min()));const h=Vr().add(s),p=new j0(wn.min(),new Map,new ui(Un),u,h);yield Y2(r,p),r.ua=r.ua.remove(s),r.aa.delete(e),K1(r)}else yield v_(r.localStore,e,!1).then(()=>S_(r,e,t)).catch(Mp)}),H1.apply(this,arguments)}function EW(n,e){return z1.apply(this,arguments)}function z1(){return z1=(0,ut.Z)(function*(n,e){const t=Ut(n),r=e.batch.batchId;try{const i=yield R$(t.localStore,e);q1(t,r,null),W1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ku(t,i)}catch(i){yield Mp(i)}}),z1.apply(this,arguments)}function CW(n,e,t){return G1.apply(this,arguments)}function G1(){return G1=(0,ut.Z)(function*(n,e,t){const r=Ut(n);try{const i=yield function(s,u){const h=Ut(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.Bs.lookupMutationBatch(p,u).next(I=>(Tn(null!==I),y=I.keys(),h.Bs.removeMutationBatch(p,I))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,y))})}(r.localStore,e);q1(r,e,t),W1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ku(r,i)}catch(i){yield Mp(i)}}),G1.apply(this,arguments)}function $1(){return $1=(0,ut.Z)(function*(n,e){const t=Ut(n);_h(t.remoteStore)||Ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Ut(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=C_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),$1.apply(this,arguments)}function W1(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function q1(n,e,t){const r=Ut(n);let i=r.ha[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function S_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||X2(n,r)})}function X2(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(rb(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),K1(n))}function Z1(n,e,t){for(const r of t)r instanceof q2?(n.ca.addReference(r.key,e),TW(n,r)):r instanceof Z2?(Ct("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||X2(n,r.key)):tn()}function TW(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ct("SyncEngine","New document in limbo: "+t),n.oa.add(r),K1(n))}function K1(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Pt(_r.fromString(e)),r=n.fa.next();n.aa.set(r,new gW(t)),n.ua=n.ua.insert(t,r),XI(n.remoteStore,new ph(dl(c_(t.path)),r,2,Fa.A))}}function Ku(n,e,t){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,ut.Z)(function*(n,e,t){const r=Ut(n),i=[],s=[],u=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,p)=>{u.push(r._a(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const I=JM.Ys(p.targetId,y);s.push(I)}}))}),yield Promise.all(u),r.sa.zo(i),yield(h=(0,ut.Z)(function*(p,y){const I=Ut(p);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>st.forEach(y,$=>st.forEach($.Hs,oe=>I.persistence.referenceDelegate.addReference(x,$.targetId,oe)).next(()=>st.forEach($.Js,oe=>I.persistence.referenceDelegate.removeReference(x,$.targetId,oe)))))}catch(x){if(!Ep(x))throw x;Ct("LocalStore","Failed to update sequence numbers: "+x)}for(const x of y){const $=x.targetId;if(!x.fromCache){const oe=I.ui.get($),Ge=oe.withLastLimboFreeSnapshotVersion(oe.snapshotVersion);I.ui=I.ui.insert($,Ge)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),Y1.apply(this,arguments)}function SW(n,e){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,ut.Z)(function*(n,e){const t=Ut(n);if(!t.currentUser.isEqual(e)){Ct("SyncEngine","User change. New user:",e.toKey());const r=yield S2(t.localStore,e);t.currentUser=e,(i=t).la.forEach(u=>{u.forEach(h=>{h.reject(new vt(nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ku(t,r.di)}var i}),Q1.apply(this,arguments)}function DW(n,e){const t=Ut(n),r=t.aa.get(e);if(r&&r.na)return Vr().add(r.key);{let i=Vr();const s=t.ra.get(e);if(!s)return i;for(const u of s){const h=t.ia.get(u);i=i.unionWith(h.view.ju)}return i}}function AW(n,e){return X1.apply(this,arguments)}function X1(){return X1=(0,ut.Z)(function*(n,e){const t=Ut(n),r=yield ZI(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&Z1(t,e.targetId,i.Xu),i}),X1.apply(this,arguments)}function xW(n,e){return J1.apply(this,arguments)}function J1(){return J1=(0,ut.Z)(function*(n,e){const t=Ut(n);return M2(t.localStore,e).then(r=>Ku(t,r))}),J1.apply(this,arguments)}function MW(n,e,t,r){return ek.apply(this,arguments)}function ek(){return ek=(0,ut.Z)(function*(n,e,t,r){const i=Ut(n),s=yield function(u,h){const p=Ut(u),y=Ut(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.fn(I,h).next(x=>x?p.fi.Ks(I,x):st.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield w_(i.remoteStore):"acknowledged"===t||"rejected"===t?(q1(i,e,r||null),W1(i,e),h=e,Ut(Ut(i.localStore).Bs)._n(h)):tn(),yield Ku(i,s)):Ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),ek.apply(this,arguments)}function tk(){return tk=(0,ut.Z)(function*(n,e){const t=Ut(n);if(sk(t),ok(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield J2(t,r.toArray());t.da=!0,yield D1(t.remoteStore,!0);for(const s of i)XI(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(S_(t,u),v_(t.localStore,u,!0))),rb(t.remoteStore,u)}),yield i,yield J2(t,r),function(s){const u=Ut(s);u.aa.forEach((h,p)=>{rb(u.remoteStore,p)}),u.ca.Si(),u.aa=new Map,u.ua=new Ji(Pt.comparator)}(t),t.da=!1,yield D1(t.remoteStore,!1)}}),tk.apply(this,arguments)}function J2(n,e,t){return nk.apply(this,arguments)}function nk(){return nk=(0,ut.Z)(function*(n,e,t){const r=Ut(n),i=[],s=[];for(const u of e){let h;const p=r.ra.get(u);if(p&&0!==p.length){h=yield y_(r.localStore,dl(p[0]));for(const y of p){const I=r.ia.get(y),x=yield AW(r,I);x.snapshot&&s.push(x.snapshot)}}else{const y=yield x2(r.localStore,u);h=yield y_(r.localStore,y),yield L1(r,eB(y),u,!1)}i.push(h)}return r.sa.zo(s),i}),nk.apply(this,arguments)}function eB(n){return hL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function RW(n){const e=Ut(n);return Ut(Ut(e.localStore).persistence).Fs()}function OW(n,e,t,r){return rk.apply(this,arguments)}function rk(){return rk=(0,ut.Z)(function*(n,e,t,r){const i=Ut(n);if(i.da)return void Ct("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield M2(i.localStore,mL(s[0])),h=j0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ku(i,u,h);break}case"rejected":yield v_(i.localStore,e,!0),S_(i,e,r);break;default:tn()}}),rk.apply(this,arguments)}function PW(n,e,t){return ik.apply(this,arguments)}function ik(){return ik=(0,ut.Z)(function*(n,e,t){const r=sk(n);if(r.da){for(const i of e){if(r.ra.has(i)){Ct("SyncEngine","Adding an already active target "+i);continue}const s=yield x2(r.localStore,i),u=yield y_(r.localStore,s);yield L1(r,eB(s),u.targetId,!1),XI(r.remoteStore,u)}for(const i of t)r.ra.has(i)&&(yield v_(r.localStore,i,!1).then(()=>{rb(r.remoteStore,i),S_(r,i)}).catch(Mp))}}),ik.apply(this,arguments)}function sk(n){const e=Ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wW.bind(null,e),e.sa.zo=dW.bind(null,e.eventManager),e.sa.wa=hW.bind(null,e.eventManager),e}function ok(n){const e=Ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CW.bind(null,e),e}class tB{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ut.Z)(function*(){t.M=tb(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return T2(this.persistence,new I2,e.initialUser,this.M)}ya(e){return new z$(o1.Yi,this.M)}ga(e){return new P2}terminate(){var e=this;return(0,ut.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nB extends tB{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ut.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield ok(r.Ta.syncEngine),yield w_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return T2(this.persistence,new I2,e.initialUser,this.M)}pa(e){return new I$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=XM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new QM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,F2(),QI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new P2}}class FW extends nB{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ut.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof u1&&(r.sharedClientState.syncEngine={$r:MW.bind(null,i),Br:OW.bind(null,i),Lr:PW.bind(null,i),Fs:RW.bind(null,i),Fr:xW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var s=(0,ut.Z)(function*(u){yield function(n,e){return tk.apply(this,arguments)}(r.Ta.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}ga(e){const t=F2();if(!u1.vt(t))throw new vt(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new u1(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ak{initialize(e,t){var r=this;return(0,ut.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Q2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=SW.bind(null,r.syncEngine),yield D1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new uW}createDatastore(e){const t=tb(e.databaseInfo.databaseId),r=new Z$(e.databaseInfo);return new Q$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>Q2(this.syncEngine,h,0),u=N2.vt()?new N2:new $$,new J$(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,p,y){const I=new _W(r,i,s,u,h,p);return y&&(I.da=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ut.Z)(function*(t){const r=Ut(t);Ct("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield b_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rB(n,e=10240){let t=0;return{read:()=>(0,ut.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ut.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class LW{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new ks,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ut.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ut.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ut.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const s=yield e.Sa(i);return new fW(JSON.parse(s),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ut.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ut.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ut.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ut.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new vt(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ut.Z)(function*(s,u){const h=Ut(s),p=$0(h.M)+"/documents",y={documents:u.map(oe=>G0(h.M,oe))},I=yield h._o("BatchGetDocuments",p,y),x=new Map;I.forEach(oe=>{const ve=function(n,e){return"found"in e?function(t,r){Tn(!!r.found);const i=Zc(t,r.found.name),s=Rs(r.found.updateTime),u=new vo({mapValue:{fields:r.found.fields}});return mi.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Tn(!!r.missing),Tn(!!r.readTime);const i=Zc(t,r.missing),s=Rs(r.readTime);return mi.newNoDocument(i,s)}(n,e):tn()}(h.M,oe);x.set(ve.key.toString(),ve)});const $=[];return u.forEach(oe=>{const ve=x.get(oe.toString());Tn(!!ve),$.push(ve)}),$}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new V0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ut.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Pt.fromPath(i);e.mutations.push(new NM(s,e.precondition(s)))}),yield(r=(0,ut.Z)(function*(i,s){const u=Ut(i),h=$0(u.M)+"/documents",p={writes:s.map(y=>W0(u.M,y))};yield u.co("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tn();t=wn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new vt(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?as.updateTime(t):as.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wn.min()))throw new vt(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return as.updateTime(t)}return as.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class VW{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.xa=r.maxAttempts,this.No=new d1(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ut.Z)(function*(){const t=new BW(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ma(s)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!x0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ML(t)}return!1}}class UW{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ys.UNAUTHENTICATED,this.clientId=GF.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ut.Z)(function*(h){Ct("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ct("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ut.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ut.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=C_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function iB(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,ut.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ut.Z)(function*(s){r.isEqual(s)||(yield S2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),lk.apply(this,arguments)}function sB(n,e){return ck.apply(this,arguments)}function ck(){return ck=(0,ut.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield uk(n);Ct("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>z2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>z2(e.remoteStore,s)),n.onlineComponents=e}),ck.apply(this,arguments)}function uk(n){return dk.apply(this,arguments)}function dk(){return dk=(0,ut.Z)(function*(n){return n.offlineComponents||(Ct("FirestoreClient","Using default OfflineComponentProvider"),yield iB(n,new tB)),n.offlineComponents}),dk.apply(this,arguments)}function tT(n){return hk.apply(this,arguments)}function hk(){return hk=(0,ut.Z)(function*(n){return n.onlineComponents||(Ct("FirestoreClient","Using default OnlineComponentProvider"),yield sB(n,new ak)),n.onlineComponents}),hk.apply(this,arguments)}function oB(n){return uk(n).then(e=>e.persistence)}function fk(n){return uk(n).then(e=>e.localStore)}function aB(n){return tT(n).then(e=>e.remoteStore)}function pk(n){return tT(n).then(e=>e.syncEngine)}function D_(n){return mk.apply(this,arguments)}function mk(){return mk=(0,ut.Z)(function*(n){const e=yield tT(n),t=e.eventManager;return t.onListen=yW.bind(null,e.syncEngine),t.onUnlisten=vW.bind(null,e.syncEngine),t}),mk.apply(this,arguments)}function lB(n,e,t={}){const r=new ks;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(i,s,u,h,p){const y=new eT({next:x=>{s.enqueueAndForget(()=>R1(i,I));const $=x.docs.has(u);!$&&x.fromCache?p.reject(new vt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&x.fromCache&&h&&"server"===h.source?p.reject(new vt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),I=new N1(c_(u.path),y,{includeMetadataChanges:!0,ku:!0});return M1(i,I)}(yield D_(n),n.asyncQueue,e,t,r)})),r.promise}function cB(n,e,t={}){const r=new ks;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(i,s,u,h,p){const y=new eT({next:x=>{s.enqueueAndForget(()=>R1(i,I)),x.fromCache&&"server"===h.source?p.reject(new vt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),I=new N1(u,y,{includeMetadataChanges:!0,ku:!0});return M1(i,I)}(yield D_(n),n.asyncQueue,e,t,r)})),r.promise}const uB=new Map;function gk(n,e,t){if(!t)throw new vt(nt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dB(n,e,t,r){if(!0===e&&!0===r)throw new vt(nt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hB(n){if(!Pt.isDocumentKey(n))throw new vt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fB(n){if(Pt.isDocumentKey(n))throw new vt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tn()}function fr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new vt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nT(n);throw new vt(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pB(n,e){if(e<=0)throw new vt(nt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new vt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ib{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mB({}),this._settingsFrozen=!1,e instanceof qu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new vt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(i.options.projectId)}(e))}get app(){if(!this._app)throw new vt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Kz;switch(t.type){case"gapi":const r=t.client;return Tn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Jz(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new vt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uB.get(e);t&&(Ct("ComponentProvider","Removing Datastore"),uB.delete(e),t.terminate())}(this),Promise.resolve()}}class gi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gi(this.firestore,e,this._key)}}class bo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class Yc extends bo{constructor(e,t,r){super(e,t,c_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gi(this.firestore,null,new Pt(e))}withConverter(e){return new Yc(this.firestore,e,this._path)}}function gB(n,e,...t){if(n=(0,ae.m9)(n),gk("collection","path",e),n instanceof ib){const r=_r.fromString(e,...t);return fB(r),new Yc(n,null,r)}{if(!(n instanceof gi||n instanceof Yc))throw new vt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_r.fromString(e,...t));return fB(r),new Yc(n.firestore,null,r)}}function rT(n,e,...t){if(n=(0,ae.m9)(n),1===arguments.length&&(e=GF.R()),gk("doc","path",e),n instanceof ib){const r=_r.fromString(e,...t);return hB(r),new gi(n,null,new Pt(r))}{if(!(n instanceof gi||n instanceof Yc))throw new vt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_r.fromString(e,...t));return hB(r),new gi(n.firestore,n instanceof Yc?n.converter:null,new Pt(r))}}function _B(n,e){return n=(0,ae.m9)(n),e=(0,ae.m9)(e),(n instanceof gi||n instanceof Yc)&&(e instanceof gi||e instanceof Yc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yB(n,e){return n=(0,ae.m9)(n),e=(0,ae.m9)(e),n instanceof bo&&e instanceof bo&&n.firestore===e.firestore&&F0(n._query,e._query)&&n.converter===e.converter}class QW{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new d1(this,"async_queue_retry"),this.Qa=()=>{const t=QI();t&&Ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=QI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=QI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new ks;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ut.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Ep(t))throw t;Ct("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,os("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=x1.createAndSchedule(this,e,t,r,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&tn()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ut.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function _k(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class XW{constructor(){this._progressObserver={},this._taskCompletionResolver=new ks,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ci extends ib{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new QW,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vB(this),this._firestoreClient.terminate()}}function cs(n){return n._firestoreClient||vB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vB(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new sG(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new UW(n._authCredentials,n._appCheckCredentials,n._queue,r)}function bB(n,e,t){const r=new ks;return n.asyncQueue.enqueue((0,ut.Z)(function*(){try{yield iB(n,t),yield sB(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===nt.FAILED_PRECONDITION||s.code===nt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function wB(n){if(n._initialized||n._terminated)throw new vt(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new vt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qc(bs.fromBase64String(e))}catch(t){throw new vt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qc(bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rp{constructor(e){this._methodName=e}}class iT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Un(this._lat,e._lat)||Un(this._long,e._long)}}const l6=/^__.*__$/;class c6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wp(e,this.data,this.fieldMask,t,this.fieldTransforms):new B0(e,this.data,t,this.fieldTransforms)}}class EB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class sT{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new sT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return lT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(CB(this.ec)&&l6.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class u6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||tb(e)}lc(e,t,r,i=!1){return new sT({ec:e,methodName:t,hc:r,path:vs.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Op(n){const e=n._freezeSettings(),t=tb(n._databaseId);return new u6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oT(n,e,t,r,i,s={}){const u=n.lc(s.merge||s.mergeFields?2:0,e,t,i);wk("Data must be an object, but it was:",u,r);const h=SB(r,u);let p,y;if(s.merge)p=new s_(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const I=[];for(const x of s.mergeFields){const $=Ek(e,x,t);if(!u.contains($))throw new vt(nt.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);AB(I,$)||I.push($)}p=new s_(I),y=u.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,y=u.fieldTransforms;return new c6(new vo(h),p,y)}class sb extends Rp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sb}}function IB(n,e,t){return new sT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class yk extends Rp{_toFieldTransform(e){return new L0(e.path,new d_)}isEqual(e){return e instanceof yk}}class d6 extends Rp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=IB(this,e,!0),r=this.fc.map(s=>Pp(s,t)),i=new vp(r);return new L0(e.path,i)}isEqual(e){return this===e}}class h6 extends Rp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=IB(this,e,!0),r=this.fc.map(s=>Pp(s,t)),i=new bp(r);return new L0(e.path,i)}isEqual(e){return this===e}}class f6 extends Rp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new h_(e.M,vL(e.M,this.dc));return new L0(e.path,t)}isEqual(e){return this===e}}function vk(n,e,t,r){const i=n.lc(1,e,t);wk("Data must be an object, but it was:",i,r);const s=[],u=vo.empty();fp(r,(p,y)=>{const I=aT(e,p,t);y=(0,ae.m9)(y);const x=i.oc(I);if(y instanceof sb)s.push(I);else{const $=Pp(y,x);null!=$&&(s.push(I),u.set(I,$))}});const h=new s_(s);return new EB(u,h,i.fieldTransforms)}function bk(n,e,t,r,i,s){const u=n.lc(1,e,t),h=[Ek(e,r,t)],p=[i];if(s.length%2!=0)throw new vt(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<s.length;$+=2)h.push(Ek(e,s[$])),p.push(s[$+1]);const y=[],I=vo.empty();for(let $=h.length-1;$>=0;--$)if(!AB(y,h[$])){const oe=h[$];let ve=p[$];ve=(0,ae.m9)(ve);const Ge=u.oc(oe);if(ve instanceof sb)y.push(oe);else{const ot=Pp(ve,Ge);null!=ot&&(y.push(oe),I.set(oe,ot))}}const x=new s_(y);return new EB(I,x,u.fieldTransforms)}function TB(n,e,t,r=!1){return Pp(t,n.lc(r?4:3,e))}function Pp(n,e){if(DB(n=(0,ae.m9)(n)))return wk("Unsupported field value:",e,n),SB(n,e);if(n instanceof Rp)return function(t,r){if(!CB(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=Pp(u,r.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ae.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vL(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xi.fromDate(t);return{timestampValue:z0(r.M,i)}}if(t instanceof Xi){const i=new Xi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:z0(r.M,i)}}if(t instanceof iT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qc)return{bytesValue:LL(r.M,t._byteString)};if(t instanceof gi){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:LM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${nT(t)}`)}(n,e)}function SB(n,e){const t={};return qF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fp(n,(r,i)=>{const s=Pp(i,e.sc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function DB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xi||n instanceof iT||n instanceof Qc||n instanceof gi||n instanceof Rp)}function wk(n,e,t){if(!DB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=nT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function Ek(n,e,t){if((e=(0,ae.m9)(e))instanceof Yu)return e._internalPath;if("string"==typeof e)return aT(n,e);throw lT("Field path arguments must be of type string or ",n,!1,void 0,t)}const p6=new RegExp("[~\\*/\\[\\]]");function aT(n,e,t){if(e.search(p6)>=0)throw lT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yu(...e.split("."))._internalPath}catch(r){throw lT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lT(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new vt(nt.INVALID_ARGUMENT,h+n+p)}function AB(n,e){return n.some(t=>t.isEqual(e))}class ob{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new m6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m6 extends ob{data(){return super.data()}}function cT(n,e){return"string"==typeof e?aT(n,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qu extends ob{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ab(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ab extends Qu{data(e={}){return super.data(e)}}class vh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Np(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ab(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new vt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new ab(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Np(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new ab(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Np(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:g6(u.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function g6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}function xB(n,e){return n instanceof Qu&&e instanceof Qu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vh&&e instanceof vh&&n._firestore===e._firestore&&yB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new vt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lb{}function bh(n,...e){for(const t of e)n=t._apply(n);return n}class _6 extends lb{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Op(e.firestore),r=function(i,s,u,h,p,y,I){let x;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new vt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){FB(I,y);const oe=[];for(const ve of I)oe.push(NB(h,i,ve));x={arrayValue:{values:oe}}}else x=NB(h,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||FB(I,y),x=TB(u,"where",I,"in"===y||"not-in"===y);const $=Xs.create(p,y,x);return function(oe,ve){if(ve.S()){const ot=MM(oe);if(null!==ot&&!ot.isEqual(ve.field))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ot.toString()}' and '${ve.field.toString()}'`);const Tt=xM(oe);null!==Tt&&LB(0,ve.field,Tt)}const Ge=function(ot,Tt){for(const jt of ot.filters)if(Tt.indexOf(jt.op)>=0)return jt.op;return null}(oe,function(ot){switch(ot){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ve.op));if(null!==Ge)throw new vt(nt.INVALID_ARGUMENT,Ge===ve.op?`Invalid query. You cannot use more than one '${ve.op.toString()}' filter.`:`Invalid query. You cannot use '${ve.op.toString()}' filters with '${Ge.toString()}' filters.`)}(i,$),$}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new bo(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Zu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class v6 extends lb{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new vt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new vt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new l_(i,s);return function(h,p){if(null===xM(h)){const y=MM(h);null!==y&&LB(0,y,p.field)}}(r,u),u}(e._query,this._c,this.gc);return new bo(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Zu(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class kB extends lb{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new bo(e.firestore,e.converter,fL(e._query,this.yc,this.Ic))}}class RB extends lb{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=PB(e,this.type,this.Tc,this.Ec);return new bo(e.firestore,e.converter,(i=t,new Zu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class OB extends lb{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=PB(e,this.type,this.Tc,this.Ec);return new bo(e.firestore,e.converter,(i=t,new Zu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function PB(n,e,t,r){if(t[0]=(0,ae.m9)(t[0]),t[0]instanceof ob)return function(i,s,u,h,p){if(!h)throw new vt(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const I of u_(i))if(I.field.isKeyField())y.push(gp(s,h.key));else{const x=h.data.field(I.field);if(TM(x))throw new vt(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const $=I.field.canonicalString();throw new vt(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}y.push(x)}return new hh(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Op(n.firestore);return function(s,u,h,p,y,I){const x=s.explicitOrderBy;if(y.length>x.length)throw new vt(nt.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let oe=0;oe<y.length;oe++){const ve=y[oe];if(x[oe].field.isKeyField()){if("string"!=typeof ve)throw new vt(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof ve}`);if(!kM(s)&&-1!==ve.indexOf("/"))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${ve}' contains a slash.`);const Ge=s.path.child(_r.fromString(ve));if(!Pt.isDocumentKey(Ge))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Ge}' is not because it contains an odd number of segments.`);const ot=new Pt(Ge);$.push(gp(u,ot))}else{const Ge=TB(h,p,ve);$.push(Ge)}}return new hh($,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NB(n,e,t){if("string"==typeof(t=(0,ae.m9)(t))){if(""===t)throw new vt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kM(e)&&-1!==t.indexOf("/"))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_r.fromString(t));if(!Pt.isDocumentKey(r))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gp(n,new Pt(r))}if(t instanceof gi)return gp(n,t._key);throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nT(t)}.`)}function FB(n,e){if(!Array.isArray(n)||0===n.length)throw new vt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new vt(nt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LB(n,e,t){if(!t.isEqual(e))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const D6={maxAttempts:5};class Ck{convertValue(e,t="none"){switch(mp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ji(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tn()}}convertObject(e,t){const r={};return fp(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new iT(ji(e.latitude),ji(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ZF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(A0(e));default:return null}}convertTimestamp(e){const t=ch(e);return new Xi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_r.fromString(e);Tn(qL(r));const i=new qu(r.get(1),r.get(3)),s=new Pt(r.popFirst(5));return i.isEqual(t)||os(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function uT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class A6 extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,t)}}class BB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Op(e)}set(e,t,r){this._verifyNotCommitted();const i=wh(e,this._firestore),s=uT(i.converter,t,r),u=oT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,as.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=wh(e,this._firestore);let u;return u="string"==typeof(t=(0,ae.m9)(t))||t instanceof Yu?bk(this._dataReader,"WriteBatch.update",s._key,t,r,i):vk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,as.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wh(e,this._firestore);return this._mutations=this._mutations.concat(new V0(t._key,as.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wh(n,e){if((n=(0,ae.m9)(n)).firestore!==e)throw new vt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Fp extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,t)}}function VB(n,e,t){n=fr(n,gi);const r=fr(n.firestore,Ci),i=uT(n.converter,e,t);return A_(r,[oT(Op(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,as.none())])}function UB(n,e,t,...r){n=fr(n,gi);const i=fr(n.firestore,Ci),s=Op(i);let u;return u="string"==typeof(e=(0,ae.m9)(e))||e instanceof Yu?bk(s,"updateDoc",n._key,e,t,r):vk(s,"updateDoc",n._key,e),A_(i,[u.toMutation(n._key,as.exists(!0))])}function jB(n,...e){var t,r,i;n=(0,ae.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||_k(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(_k(e[u])){const x=e[u];e[u]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[u+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[u+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let p,y,I;if(n instanceof gi)y=fr(n.firestore,Ci),I=c_(n._key.path),p={next:x=>{e[u]&&e[u](Ik(y,n,x))},error:e[u+1],complete:e[u+2]};else{const x=fr(n,bo);y=fr(x.firestore,Ci),I=x._query;const $=new Fp(y);p={next:oe=>{e[u]&&e[u](new vh(y,$,x,oe))},error:e[u+1],complete:e[u+2]},MB(n._query)}return function(x,$,oe,ve){const Ge=new eT(ve),ot=new N1($,Ge,oe);return x.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return M1(yield D_(x),ot)})),()=>{Ge.Aa(),x.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return R1(yield D_(x),ot)}))}}(cs(y),I,h,p)}function A_(n,e){return function(t,r){const i=new ks;return t.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(n,e,t){return U1.apply(this,arguments)}(yield pk(t),r,i)})),i.promise}(cs(n),e)}function Ik(n,e,t){const r=t.docs.get(e._key),i=new Fp(n);return new Qu(n,i,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}class B6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Op(e)}get(e){const t=wh(e,this._firestore),r=new A6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return tn();const s=i[0];if(s.isFoundDocument())return new ob(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new ob(this._firestore,r,t._key,null,t.converter);throw tn()})}set(e,t,r){const i=wh(e,this._firestore),s=uT(i.converter,t,r),u=oT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=wh(e,this._firestore);let u;return u="string"==typeof(t=(0,ae.m9)(t))||t instanceof Yu?bk(this._dataReader,"Transaction.update",s._key,t,r,i):vk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=wh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wh(e,this._firestore),r=new Fp(this._firestore);return super.get(e).then(i=>new Qu(this._firestore,r,t._key,i._document,new Np(!1,!1),t.converter))}}function Tk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zB(){if("undefined"==typeof Uint8Array)throw new vt("unimplemented","Uint8Arrays are not available in this environment.")}function GB(){if("undefined"==typeof atob)throw new vt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){r_=Oa.SDK_VERSION,(0,Oa._registerComponent)(new rc.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Ci(i,new Qz(t.getProvider("auth-internal")),new eG(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Oa.registerVersion)(jF,"3.4.9",n),(0,Oa.registerVersion)(jF,"3.4.9","esm2017")}();class cb{constructor(e){this._delegate=e}static fromBase64String(e){return GB(),new cb(Qc.fromBase64String(e))}static fromUint8Array(e){return zB(),new cb(Qc.fromUint8Array(e))}toBase64(){return GB(),this._delegate.toBase64()}toUint8Array(){return zB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sk(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Z6{enableIndexedDbPersistence(e,t){return function(n,e){wB(n=fr(n,Ci));const t=cs(n),r=n._freezeSettings(),i=new ak;return bB(t,i,new nB(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){wB(n=fr(n,Ci));const e=cs(n),t=n._freezeSettings(),r=new ak;return bB(e,r,new FW(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new vt(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ks;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ut.Z)(function*(){try{yield(t=(0,ut.Z)(function*(r){if(!oc.vt())return Promise.resolve();const i=r+"main";yield oc.delete(i)}),function(r){return t.apply(this,arguments)})(XM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $B{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&S0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const s=(n=fr(n,ib))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&S0("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Ys.MOCK_USER;else{u=(0,ae.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new vt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ys(p)}n._authCredentials=new Yz(new HF(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ut.Z)(function*(){const e=yield oB(n),t=yield aB(n);return e.setNetworkEnabled(!0),function(r){const i=Ut(r);return i.wu.delete(0),nb(i)}(t)}))}(cs(n=fr(n,Ci)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ut.Z)(function*(){const e=yield oB(n),t=yield aB(n);return e.setNetworkEnabled(!1),(r=(0,ut.Z)(function*(i){const s=Ut(i);s.wu.add(0),yield b_(s),s.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(cs(n=fr(n,Ci)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new ks;return e.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(n,e){return $1.apply(this,arguments)}(yield pk(e),t)})),t.promise}(cs(n=fr(n,Ci)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new eT(e);return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return r=yield D_(n),i=t,Ut(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return r=yield D_(n),i=t,void Ut(r).bu.delete(i);var r,i}))}}(cs(n=fr(n,Ci)),_k(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new vt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new x_(this,gB(this._delegate,e))}catch(t){throw Bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new fl(this,rT(this._delegate,e))}catch(t){throw Bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vo(this,function(n,e){if(n=fr(n,ib),gk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(nt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bo(n,null,(t=e,new Zu(_r.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=fr(n,Ci);const r=Object.assign(Object.assign({},D6),t);return function(i){if(i.maxAttempts<1)throw new vt(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new ks;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){const i=yield(s=n,tT(s).then(u=>u.datastore));var s;new VW(n.asyncQueue,i,t,e,r).run()})),r.promise}(cs(n),i=>e(new B6(n,i)),r)}(this._delegate,t=>e(new WB(this,t)))}batch(){return cs(this._delegate),new qB(new BB(this._delegate,e=>A_(this._delegate,e)))}loadBundle(e){return function(n,e){const t=cs(n=fr(n,Ci)),r=new XW;return function(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return rB(p,y);if(p instanceof ArrayBuffer)return rB(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new LW(p,u);var p}(t,tb(e));n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){!function(n,e,t){const r=Ut(n);var i;(i=(0,ut.Z)(function*(s,u,h){try{const p=yield u.getMetadata();if(yield function($,oe){const ve=Ut($),Ge=Rs(oe.createTime);return ve.persistence.runTransaction("hasNewerBundle","readonly",ot=>ve._s.getBundleMetadata(ot,oe.id)).then(ot=>!!ot&&ot.createTime.compareTo(Ge)>=0)}(s.localStore,p))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:($=p).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);h._updateProgress(W2(p));const y=new pW(p,s.localStore,u.M);let I=yield u.ma();for(;I;){const $=yield y.Fu(I);$&&h._updateProgress($),I=yield u.ma()}const x=yield y.complete();return yield Ku(s,x.Lu,void 0),yield function($,oe){const ve=Ut($);return ve.persistence.runTransaction("Save bundle","readwrite",Ge=>ve._s.saveBundleMetadata(Ge,oe))}(s.localStore,p),h._completeWith(x.progress),Promise.resolve(x.Bu)}catch(p){return S0("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var $}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield pk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ut.Z)(function*(){return function(t,r){const i=Ut(t);return i.persistence.runTransaction("Get named query","readonly",s=>i._s.getNamedQuery(s,r))}(yield fk(n),e)}))}(cs(n=fr(n,Ci)),e).then(t=>t?new bo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vo(this,t):null)}}class dT extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new cb(new Qc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fl.forKey(t,this.firestore,null)}}class WB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dT(e)}get(e){const t=Bp(e);return this._delegate.get(t).then(r=>new ub(this._firestore,new Qu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Bp(e);return r?(Tk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Bp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}}class qB{constructor(e){this._delegate=e}set(e,t,r){const i=Bp(e);return r?(Tk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Bp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ab(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new db(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Lp(e,new dT(e),t),i.set(t,s)),s}}Lp.INSTANCES=new WeakMap;class fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new vt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fl(t,new gi(t._delegate,r,new Pt(e)))}static forKey(e,t,r){return new fl(t,new gi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new x_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new x_(this.firestore,gB(this._delegate,e))}catch(t){throw Bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ae.m9)(e))instanceof gi&&_B(this._delegate,e)}set(e,t){t=Tk("DocumentReference.set",t);try{return t?VB(this._delegate,e,t):VB(this._delegate,e)}catch(r){throw Bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?UB(this._delegate,e):UB(this._delegate,e,t,...r)}catch(i){throw Bo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return A_(fr(n.firestore,Ci),[new V0(n._key,as.none())])}(this._delegate)}onSnapshot(...e){const t=ZB(e),r=KB(e,i=>new ub(this.firestore,new Qu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jB(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=fr(n,gi);const e=fr(n.firestore,Ci),t=cs(e),r=new Fp(e);return function(n,e){const t=new ks;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return(r=(0,ut.Z)(function*(i,s,u){try{const h=yield function(p,y){const I=Ut(p);return I.persistence.runTransaction("read document","readonly",x=>I.fi.Ls(x,y))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new vt(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=C_(h,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield fk(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qu(e,r,n._key,i,new Np(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=fr(n,gi);const e=fr(n.firestore,Ci);return lB(cs(e),n._key,{source:"server"}).then(t=>Ik(e,n,t))}(this._delegate):function(n){n=fr(n,gi);const e=fr(n.firestore,Ci);return lB(cs(e),n._key).then(t=>Ik(e,n,t))}(this._delegate),t.then(r=>new ub(this.firestore,new Qu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fl(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Bo(n,e,t){return n.message=n.message.replace(e,t),n}function ZB(n){for(const e of n)if("object"==typeof e&&!Sk(e))return e;return{}}function KB(n,e){var t,r;let i;return i=Sk(n[0])?n[0]:Sk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ub{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xB(this._delegate,e._delegate)}}class db extends ub{data(e){const t=this._delegate.data(e);return function(n,e){n||tn()}(void 0!==t),t}}class Vo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dT(e)}where(e,t,r){try{return new Vo(this.firestore,bh(this._delegate,function(n,e,t){const r=e,i=cT("where",n);return new _6(i,r,t)}(e,t,r)))}catch(i){throw Bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vo(this.firestore,bh(this._delegate,function(n,e="asc"){const t=e,r=cT("orderBy",n);return new v6(r,t)}(e,t)))}catch(r){throw Bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vo(this.firestore,bh(this._delegate,function(n){return pB("limit",n),new kB("limit",n,"F")}(e)))}catch(t){throw Bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vo(this.firestore,bh(this._delegate,function(n){return pB("limitToLast",n),new kB("limitToLast",n,"L")}(e)))}catch(t){throw Bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vo(this.firestore,bh(this._delegate,function(...n){return new RB("startAt",n,!0)}(...e)))}catch(t){throw Bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vo(this.firestore,bh(this._delegate,function(...n){return new RB("startAfter",n,!1)}(...e)))}catch(t){throw Bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vo(this.firestore,bh(this._delegate,function(...n){return new OB("endBefore",n,!1)}(...e)))}catch(t){throw Bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vo(this.firestore,bh(this._delegate,function(...n){return new OB("endAt",n,!0)}(...e)))}catch(t){throw Bo(t,"endAt()","Query.endAt()")}}isEqual(e){return yB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=fr(n,bo);const e=fr(n.firestore,Ci),t=cs(e),r=new Fp(e);return function(n,e){const t=new ks;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return(r=(0,ut.Z)(function*(i,s,u){try{const h=yield ZI(i,s,!0),p=new K2(s,h._i),y=p.Wu(h.documents),I=p.applyChanges(y,!1);u.resolve(I.snapshot)}catch(h){const p=C_(h,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield fk(n),e,t);var r})),t.promise}(t,n._query).then(i=>new vh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=fr(n,bo);const e=fr(n.firestore,Ci),t=cs(e),r=new Fp(e);return cB(t,n._query,{source:"server"}).then(i=>new vh(e,r,n,i))}(this._delegate):function(n){n=fr(n,bo);const e=fr(n.firestore,Ci),t=cs(e),r=new Fp(e);return MB(n._query),cB(t,n._query).then(i=>new vh(e,r,n,i))}(this._delegate),t.then(r=>new Dk(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZB(e),r=KB(e,i=>new Dk(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jB(this._delegate,t,r)}withConverter(e){return new Vo(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}class Y6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new db(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new db(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Y6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new db(this._firestore,r))})}isEqual(e){return xB(this._delegate,e._delegate)}}class x_ extends Vo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fl(this.firestore,e):null}doc(e){try{return new fl(this.firestore,void 0===e?rT(this._delegate):rT(this._delegate,e))}catch(t){throw Bo(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=fr(n.firestore,Ci),r=rT(n),i=uT(n.converter,e);return A_(t,[oT(Op(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,as.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fl(this.firestore,t))}isEqual(e){return _B(this._delegate,e._delegate)}withConverter(e){return new x_(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Bp(n){return fr(n,gi)}class Ak{constructor(...e){this._delegate=new Yu(...e)}static documentId(){return new Ak(vs.keyField().canonicalString())}isEqual(e){return(e=(0,ae.m9)(e))instanceof Yu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._delegate=e}static serverTimestamp(){const e=new yk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Vp(e)}static delete(){const e=new sb("deleteField");return e._methodName="FieldValue.delete",new Vp(e)}static arrayUnion(...e){const t=function(...n){return new d6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vp(t)}static arrayRemove(...e){const t=function(...n){return new h6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vp(t)}static increment(e){const t=function(n){return new f6("increment",n)}(e);return t._methodName="FieldValue.increment",new Vp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Q6={Firestore:$B,GeoPoint:iT,Timestamp:Xi,Blob:cb,Transaction:WB,WriteBatch:qB,DocumentReference:fl,DocumentSnapshot:ub,Query:Vo,QueryDocumentSnapshot:db,QuerySnapshot:Dk,CollectionReference:x_,FieldPath:Ak,FieldValue:Vp,setLogLevel:function(n){!function(n){lh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new rc.wA("firestore-compat",t=>((e,t)=>new $B(e,t,new Z6))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Q6)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Fv.Z);var hT=R(4763),eq=R(1733);class tq extends rn.x{constructor(e=1/0,t=1/0,r=eq.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)h=p;h&&r.splice(0,h+1)}}}var xk=R(3174);function YB(n,e,t){var r,i;let s,u=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,xk.B)({connector:()=>new tq(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function QB(n,e){return(0,Cs.m)(e)?Qr(()=>n,e):Qr(()=>n)}var Mk=R(5222);const XB=new Map,nq={activated:!1,tokenObservers:[]},rq={initialized:!1,enabled:!1};function Ns(n){return XB.get(n)||nq}function ac(n,e){XB.set(n,e)}function fT(){return rq}class lq{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ut.Z)(function*(){t.stop();try{t.pending=new ae.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ae.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Uo=new ae.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function eV(n){if(!Ns(n).activated)throw Uo.create("use-before-activation",{appName:n.name})}function Ok(n,e){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,ut.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,s)}catch(x){throw Uo.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==u.status)throw Uo.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(x){throw Uo.create("fetch-parse-error",{originalErrorMessage:x.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Uo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),I=Date.now();return{token:h.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}}),Pk.apply(this,arguments)}function pq(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const hb="firebase-app-check-store";let gT=null;function nV(){return gT||(gT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Uo.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hb,{keyPath:"compositeKey"})}}catch(t){e(Uo.create("storage-open",{originalErrorMessage:t.message}))}}),gT)}function Nk(){return Nk=(0,ut.Z)(function*(n,e){const r=(yield nV()).transaction(hb,"readwrite"),s=r.objectStore(hb).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;h(Uo.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),Nk.apply(this,arguments)}const fb=new Pa.Yd("@firebase/app-check");function oV(n,e){return(0,ae.hl)()?function(n,e){return function(n,e){return Nk.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aV(){return fT().enabled}function lV(){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,ut.Z)(function*(){const n=fT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Vk.apply(this,arguments)}const Iq={error:"UNKNOWN_ERROR"};function Tq(n){return ae.US.encodeString(JSON.stringify(n),!1)}function _T(n){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,ut.Z)(function*(n,e=!1){const t=n.app;eV(t);const r=Ns(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&yT(p)&&(i=p)}if(!e&&i&&yT(i))return{token:i.token};let h,u=!1;if(aV()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ok(pq(t,yield lV()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const p=yield r.exchangeTokenPromise;return yield oV(t,p),ac(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?fb.warn(p.message):fb.error(p),s=p}return i?(h={token:i.token},ac(t,Object.assign(Object.assign({},r),{token:i})),yield oV(t,i)):h=Dq(s),u&&uV(t,h),h}),Uk.apply(this,arguments)}function Hk(n,e){const t=Ns(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ac(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function cV(n){const{app:e}=n,t=Ns(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new lq((0,ut.Z)(function*(){let r;if(r=Ns(e).token?yield _T(n,!0):yield _T(n),r.error)throw r.error}),()=>!0,()=>{const t=Ns(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ac(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uV(n,e){const t=Ns(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function yT(n){return n.expireTimeMillis-Date.now()>0}function Dq(n){return{token:Tq(Iq),error:n}}class Aq{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ns(this.app);for(const t of e)Hk(this.app,t.next);return Promise.resolve()}}const yV="app-check-internal";(0,Oa._registerComponent)(new rc.wA("app-check",n=>function(n,e){return new Aq(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yV).initialize()})),(0,Oa._registerComponent)(new rc.wA(yV,n=>function(n){return{getToken:e=>_T(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,s=Ns(i),u={next:t,error:r,type:e};if(ac(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&yT(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),cV(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>cV(n))}(n,"INTERNAL",e),removeTokenListener:e=>Hk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Oa.registerVersion)("@firebase/app-check","0.5.8");class bT{constructor(){return(0,Wr.vb)("app-check")}}"undefined"!=typeof window&&window;var qq=R(7892);const qk=new o.OlP("angularfire2.auth.use-emulator"),Zk=new o.OlP("angularfire2.auth.settings"),Kk=new o.OlP("angularfire2.auth.tenant-id"),Yk=new o.OlP("angularfire2.auth.langugage-code"),Qk=new o.OlP("angularfire2.auth.use-device-language"),Xk=new o.OlP("angularfire.auth.persistence"),Jk=(n,e,t,r,i,s,u,h)=>(0,As.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,I]of Object.entries(u))p.settings[y]=I;return h&&p.setPersistence(h),p},[t,r,i,s,u,h]);let wT=(()=>{class n{constructor(t,r,i,s,u,h,p,y,I,x,$,oe){const ve=new rn.x,Ge=xt(void 0).pipe((0,hT.Q)(u.outsideAngular),Qr(()=>s.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,2115)))),(0,Bt.U)(()=>(0,As.on)(t,s,r)),(0,Bt.U)(ot=>Jk(ot,s,h,y,I,x,p,$)),YB({bufferSize:1,refCount:!1}));if(yt(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=xt(null);else{Ge.pipe(Ul()).subscribe();const Tt=Ge.pipe(Qr(Ht=>Ht.getRedirectResult().then(Sn=>Sn,()=>null)),Wr.iC,YB({bufferSize:1,refCount:!1})),jt=Ge.pipe(Qr(Ht=>new kr.y(Sn=>({unsubscribe:s.runOutsideAngular(()=>Ht.onAuthStateChanged(jn=>Sn.next(jn),jn=>Sn.error(jn),()=>Sn.complete()))})))),Qt=Ge.pipe(Qr(Ht=>new kr.y(Sn=>({unsubscribe:s.runOutsideAngular(()=>Ht.onIdTokenChanged(jn=>Sn.next(jn),jn=>Sn.error(jn),()=>Sn.complete()))}))));this.authState=Tt.pipe(QB(jt),(0,Mk.R)(u.outsideAngular),(0,hT.Q)(u.insideAngular)),this.user=Tt.pipe(QB(Qt),(0,Mk.R)(u.outsideAngular),(0,hT.Q)(u.insideAngular)),this.idToken=this.user.pipe(Qr(Ht=>Ht?(0,Tr.D)(Ht.getIdToken()):xt(null))),this.idTokenResult=this.user.pipe(Qr(Ht=>Ht?(0,Tr.D)(Ht.getIdTokenResult()):xt(null))),this.credential=(0,No.T)(Tt,ve,this.authState.pipe(Xn(Ht=>!Ht))).pipe((0,Bt.U)(Ht=>(null==Ht?void 0:Ht.user)?Ht:null),(0,Mk.R)(u.outsideAngular),(0,hT.Q)(u.insideAngular))}return(0,As.pX)(this,Ge,s,{spy:{apply:(ot,Tt,jt)=>{(ot.startsWith("signIn")||ot.startsWith("createUser"))&&jt.then(Qt=>ve.next(Qt))}}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(As.Dh),o.LFG(As.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wr.HU),o.LFG(qk,8),o.LFG(Zk,8),o.LFG(Kk,8),o.LFG(Yk,8),o.LFG(Qk,8),o.LFG(Xk,8),o.LFG(bT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function bV(n,e){return function(n,e=Nc.z){return new kr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function eR(n,e){return bV(n,e).pipe((0,Bt.U)(t=>({payload:t,type:"query"})))}function ET(n,e){return eR(n,e).pipe(Bi(void 0),Nv(),(0,Bt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const p=i.find(I=>I.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function wV(n,e,t){return ET(n,t).pipe(fs((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return tR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Hm(),(0,Bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function tR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function EV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class CV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ET(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Bi(void 0),Nv(),Xn(([r,i])=>i.length>0||!r),(0,Bt.U)(([r,i])=>i),Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe(fs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EV(e);return wV(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return eR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wr.iC)}get(e){return(0,Tr.D)(this.query.get(e)).pipe(Wr.iC)}add(e){return this.ref.add(e)}doc(e){return new IV(this.ref.doc(e),this.afs)}}class IV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=TV(r,t);return new CV(i,s,this.afs)}snapshotChanges(){return function(n,e){return bV(n,e).pipe(Bi(void 0),Nv(),(0,Bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tr.D)(this.ref.get(e)).pipe(Wr.iC)}}class Jq{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ET(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xn(t=>t.length>0),Wr.iC):ET(this.query,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe(fs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EV(e);return wV(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return eR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Wr.iC)}get(e){return(0,Tr.D)(this.query.get(e)).pipe(Wr.iC)}}const e4=new o.OlP("angularfire2.enableFirestorePersistence"),t4=new o.OlP("angularfire2.firestore.persistenceSettings"),n4=new o.OlP("angularfire2.firestore.settings"),r4=new o.OlP("angularfire2.firestore.use-emulator");function TV(n,e=(t=>t)){return{query:e(n),ref:n}}let nR=(()=>{class n{constructor(t,r,i,s,u,h,p,y,I,x,$,oe,ve,Ge,ot,Tt,jt){this.schedulers=p;const Qt=(0,As.on)(t,h,r),Ht=I;x&&Jk(Qt,h,$,ve,Ge,ot,oe,Tt),[this.firestore,this.persistenceEnabled$]=(0,As.cc)(`${Qt.name}.firestore`,"AngularFirestore",Qt.name,()=>{const Sn=h.runOutsideAngular(()=>Qt.firestore());if(s&&Sn.settings(s),Ht&&Sn.useEmulator(...Ht),i&&!yt(u)){const jn=()=>{try{return(0,Tr.D)(Sn.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Ar){return"undefined"!=typeof console&&console.warn(Ar),xt(!1)}};return[Sn,h.runOutsideAngular(jn)]}return[Sn,xt(!1)]},[s,Ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=TV(i,r),h=this.schedulers.ngZone.run(()=>s);return new CV(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new Jq(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new IV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(As.Dh),o.LFG(As.xv,8),o.LFG(e4,8),o.LFG(n4,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wr.HU),o.LFG(t4,8),o.LFG(r4,8),o.LFG(wT,8),o.LFG(qk,8),o.LFG(Zk,8),o.LFG(Kk,8),o.LFG(Yk,8),o.LFG(Qk,8),o.LFG(Xk,8),o.LFG(bT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CT=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signWithRedirectPromise(){const t=new Hc.Q;t.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,Hc.n)();return r.languageCode="fr",Ov(r,t)}signWithPopupPromise(){const t=new Hc.Q;t.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,Hc.n)();return r.languageCode="fr",(0,Hc.c)(r,t)}signInWithGoogle(){this.signWithPopupPromise().then(t=>{Hc.Q.credentialFromResult(t),this.setUserData(t.user).then(()=>{this.router.navigate(["tracker"])}),this.router.navigate(["tracker"])}).catch(t=>{const r=t.code,i=t.message;Hc.Q.credentialFromError(t),console.log("Code :"+r+"/ Message :"+i)})}setUserData(t){const r=this.afs.doc(`users/${t.uid}`);return this.userData={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},r.set(this.userData,{merge:!0})}setPersonData(t){this.afs.doc(`person/${t}`).set({uid:t},{merge:!0})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["tracker"])})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(nR),o.LFG(wT),o.LFG(gs),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IT=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn||this.router.navigate(["authentication"]),!0}isUserLoggedIn(){return!!this.authService.isLoggedIn}disconnect(){this.authService.signOut().then(()=>{this.router.navigate(["authentication"])})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(CT),o.LFG(gs))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var SV=R(2869);const pb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=pb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new ao.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=pb;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=pb;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var DV=R(8843);new class extends DV.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends SV.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=pb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(pb.cancelAnimationFrame(t),e._scheduled=void 0)}});let rR,a4=1;const TT={};function AV(n){return n in TT&&(delete TT[n],!0)}const l4={setImmediate(n){const e=a4++;return TT[e]=!0,rR||(rR=Promise.resolve()),rR.then(()=>AV(e)&&n()),e},clearImmediate(n){AV(n)}},{setImmediate:c4,clearImmediate:u4}=l4,ST={setImmediate(...n){const{delegate:e}=ST;return((null==e?void 0:e.setImmediate)||c4)(...n)},clearImmediate(n){const{delegate:e}=ST;return((null==e?void 0:e.clearImmediate)||u4)(n)},delegate:void 0};new class extends DV.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends SV.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ST.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(ST.clearImmediate(t),e._scheduled=void 0)}});function xV(n,e=Nc.P){return function(n){return(0,Yr.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}u&&t.complete()},p=()=>{s=null,u&&t.complete()};e.subscribe(new dr.Q(t,y=>{r=!0,i=y,s||(0,Li.Xf)(n()).subscribe(s=new dr.Q(t,h,p))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>Ig(n,e))}let iR=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new rn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new kr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(xV(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):xt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Xn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Ql(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>cl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.R0b),o.LFG(Yi),o.LFG(Y,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sR=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new rn.x,this._elementScrolled=new kr.y(u=>this.ngZone.runOutsideAngular(()=>cl(this.elementRef.nativeElement,"scroll").pipe(ii(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Bm()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Bm()?t.left=t.right:1==Bm()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;ED()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==t?t=u?i:r:"end"==t&&(t=u?r:i),u&&2==Bm()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:u&&1==Bm()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(iR),o.Y36(o.R0b),o.Y36(Td,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),DT=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new rn.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(xV(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi),o.LFG(o.R0b),o.LFG(Y,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),MV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Sd,AT],Sd,AT]}),n})();const kV=["*"],_4=["content"];function y4(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",2),o.NdJ("click",function(){return o.CHM(t),o.oxw()._onBackdropClicked()}),o.qZA()}if(2&n){const t=o.oxw();o.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function v4(n,e){1&n&&(o.TgZ(0,"mat-drawer-content"),o.Hsn(1,2),o.qZA())}const b4=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],w4=["mat-drawer","mat-drawer-content","*"],E4={transformDrawer:Zm("transform",[Ld("open, open-instant",tc({transform:"none",visibility:"visible"})),Ld("void",tc({"box-shadow":"none",visibility:"hidden"})),If("void => open-instant",Fd("0ms")),If("void <=> open, open-instant => void",Fd("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},C4=new o.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),RV=new o.OlP("MAT_DRAWER_CONTAINER");let oR=(()=>{class n extends sR{constructor(t,r,i,s,u){super(i,s,u),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO),o.Y36((0,o.Gpc)(()=>PV)),o.Y36(o.SBq),o.Y36(iR),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&o.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[o._Bn([{provide:sR,useExisting:n}]),o.qOj],ngContentSelectors:kV,decls:1,vars:0,template:function(t,r){1&t&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),OV=(()=>{class n{constructor(t,r,i,s,u,h,p,y){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=u,this._interactivityChecker=h,this._doc=p,this._container=y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new rn.x,this._animationEnd=new rn.x,this._animationState="void",this.openedChange=new o.vpe(!0),this._openedStream=this.openedChange.pipe(Xn(I=>I),(0,Bt.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Xn(I=>I.fromState!==I.toState&&0===I.toState.indexOf("open")),MC(void 0)),this._closedStream=this.openedChange.pipe(Xn(I=>!I),(0,Bt.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Xn(I=>I.fromState!==I.toState&&"void"===I.toState),MC(void 0)),this._destroyed=new rn.x,this.onPositionChanged=new o.vpe,this._modeChanged=new rn.x,this.openedChange.subscribe(I=>{I?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{cl(this._elementRef.nativeElement,"keydown").pipe(Xn(I=>27===I.keyCode&&!this.disableClose&&!yf(I)),ii(this._destroyed)).subscribe(I=>this._ngZone.run(()=>{this.close(),I.stopPropagation(),I.preventDefault()}))}),this._animationEnd.pipe(Hm((I,x)=>I.fromState===x.fromState&&I.toState===x.toState)).subscribe(I=>{const{fromState:x,toState:$}=I;(0===$.indexOf("open")&&"void"===x||"void"===$&&0===x.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=si(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=si(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(si(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null==(t=this._anchor)||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe((0,br.q)(1)).subscribe(u=>s(u?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(uA),o.Y36(Fc),o.Y36(Yi),o.Y36(o.R0b),o.Y36(iA),o.Y36(Y,8),o.Y36(RV,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&o.Gf(_4,5),2&t){let i;o.iGM(i=o.CRH())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&o.WFA("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(o.uIk("align",null),o.d8E("@transform",r._animationState),o.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:kV,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(o.F$t(),o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA())},directives:[sR],encapsulation:2,data:{animation:[E4.transformDrawer]},changeDetection:0}),n})(),PV=(()=>{class n{constructor(t,r,i,s,u,h=!1,p){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new o.n_E,this.backdropClick=new o.vpe,this._destroyed=new rn.x,this._doCheckSubject=new rn.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new rn.x,t&&t.change.pipe(ii(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),u.change().pipe(ii(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=si(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:si(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Bi(this._allDrawers),ii(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Bi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(vf(10),ii(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Xn(r=>r.fromState!==r.toState),ii(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(ii(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(ii(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,br.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(ii((0,No.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Td,8),o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(DT),o.Y36(C4),o.Y36(Ra,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(o.Suo(i,oR,5),o.Suo(i,OV,5)),2&t){let s;o.iGM(s=o.CRH())&&(r._content=s.first),o.iGM(s=o.CRH())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&o.Gf(oR,5),2&t){let i;o.iGM(i=o.CRH())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&o.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[o._Bn([{provide:RV,useExisting:n}])],ngContentSelectors:w4,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(o.F$t(b4),o.YNc(0,y4,1,2,"div",0),o.Hsn(1),o.Hsn(2,1),o.YNc(3,v4,2,0,"mat-drawer-content",1)),2&t&&(o.Q6J("ngIf",r.hasBackdrop),o.xp6(3),o.Q6J("ngIf",!r._content))},directives:[ei,oR],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),T4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[be,ci,AT],AT,ci]}),n})();const NV=["mat-button",""],FV=["*"],A4=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],x4=Bu(dC(hC(class{constructor(n){this._elementRef=n}})));let Up=(()=>{class n extends x4{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of A4)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(Fc),o.Y36(Ra,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&o.Gf(vv,5),2&t){let i;o.iGM(i=o.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(o.uIk("disabled",r.disabled||null),o.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o.qOj],attrs:NV,ngContentSelectors:FV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(o.F$t(),o.TgZ(0,"span",0),o.Hsn(1),o.qZA(),o._UZ(2,"span",1),o._UZ(3,"span",2)),2&t&&(o.xp6(2),o.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),o.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[vv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),LV=(()=>{class n extends Up{constructor(t,r,i,s){super(r,t,i),this._ngZone=s,this._haltDisabledEvents=u=>{this.disabled&&(u.preventDefault(),u.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Fc),o.Y36(o.SBq),o.Y36(Ra,8),o.Y36(o.R0b,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,r){2&t&&(o.uIk("tabindex",r.disabled?-1:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),o.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[o.qOj],attrs:NV,ngContentSelectors:FV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(o.F$t(),o.TgZ(0,"span",0),o.Hsn(1),o.qZA(),o._UZ(2,"span",1),o._UZ(3,"span",2)),2&t&&(o.xp6(2),o.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),o.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[vv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),aR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ax,ci],ci]}),n})();function BV(...n){const e=(0,va.jO)(n),{args:t,keys:r}=Fl(n),i=new kr.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let p=u,y=u;for(let I=0;I<u;I++){let x=!1;(0,Li.Xf)(t[I]).subscribe(new dr.Q(s,$=>{x||(x=!0,y--),h[I]=$},()=>p--,void 0,()=>{(!p||!x)&&(y||s.next(r?Ec(r,h):h),s.complete())}))}});return e?i.pipe(ta(e)):i}class VV{}class UV{}class Xu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Xu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Xu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===s.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class M4{encodeKey(e){return jV(e)}encodeValue(e){return jV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const R4=/%(\d[a-f0-9])/gi,O4={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function jV(n){return encodeURIComponent(n).replace(R4,(e,t)=>{var r;return null!=(r=O4[t])?r:e})}function HV(n){return`${n}`}class Eh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new M4,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(u)||[];p.push(h),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Eh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HV(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HV(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class P4{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function zV(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function GV(n){return"undefined"!=typeof Blob&&n instanceof Blob}function $V(n){return"undefined"!=typeof FormData&&n instanceof FormData}class mb{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Xu),this.context||(this.context=new P4),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new Eh,this.urlWithParams=t}serializeBody(){return null===this.body?null:zV(this.body)||GV(this.body)||$V(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Eh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$V(this.body)?null:GV(this.body)?this.body.type||null:zV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Eh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var x;const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const I=null!=(x=e.context)?x:this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce(($,oe)=>$.set(oe,e.setHeaders[oe]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce(($,oe)=>$.set(oe,e.setParams[oe]),y)),new mb(t,r,s,{params:y,headers:p,context:I,reportProgress:h,responseType:i,withCredentials:u})}}var us=(()=>((us=us||{})[us.Sent=0]="Sent",us[us.UploadProgress=1]="UploadProgress",us[us.ResponseHeader=2]="ResponseHeader",us[us.DownloadProgress=3]="DownloadProgress",us[us.Response=4]="Response",us[us.User=5]="User",us))();class lR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Xu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class cR extends lR{constructor(e={}){super(e),this.type=us.ResponseHeader}clone(e={}){return new cR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xT extends lR{constructor(e={}){super(e),this.type=us.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new xT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class WV extends lR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function uR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let dR=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof mb)s=t;else{let p,y;p=i.headers instanceof Xu?i.headers:new Xu(i.headers),i.params&&(y=i.params instanceof Eh?i.params:new Eh({fromObject:i.params})),s=new mb(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=xt(s).pipe(Wa(p=>this.handler.handle(p)));if(t instanceof mb||"events"===i.observe)return u;const h=u.pipe(Xn(p=>p instanceof xT));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,Bt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,Bt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,Bt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,Bt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Eh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,uR(i,r))}post(t,r,i={}){return this.request("POST",t,uR(i,r))}put(t,r,i={}){return this.request("PUT",t,uR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(VV))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class qV{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ZV=new o.OlP("HTTP_INTERCEPTORS");let L4=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const B4=/^\)\]\}',?\n/;let KV=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new kr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((oe,ve)=>i.setRequestHeader(oe,ve.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const oe=t.detectContentTypeHeader();null!==oe&&i.setRequestHeader("Content-Type",oe)}if(t.responseType){const oe=t.responseType.toLowerCase();i.responseType="json"!==oe?oe:"text"}const s=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const oe=1223===i.status?204:i.status,ve=i.statusText||"OK",Ge=new Xu(i.getAllResponseHeaders()),ot=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new cR({headers:Ge,status:oe,statusText:ve,url:ot}),u},p=()=>{let{headers:oe,status:ve,statusText:Ge,url:ot}=h(),Tt=null;204!==ve&&(Tt=void 0===i.response?i.responseText:i.response),0===ve&&(ve=Tt?200:0);let jt=ve>=200&&ve<300;if("json"===t.responseType&&"string"==typeof Tt){const Qt=Tt;Tt=Tt.replace(B4,"");try{Tt=""!==Tt?JSON.parse(Tt):null}catch(Ht){Tt=Qt,jt&&(jt=!1,Tt={error:Ht,text:Tt})}}jt?(r.next(new xT({body:Tt,headers:oe,status:ve,statusText:Ge,url:ot||void 0})),r.complete()):r.error(new WV({error:Tt,headers:oe,status:ve,statusText:Ge,url:ot||void 0}))},y=oe=>{const{url:ve}=h(),Ge=new WV({error:oe,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ve||void 0});r.error(Ge)};let I=!1;const x=oe=>{I||(r.next(h()),I=!0);let ve={type:us.DownloadProgress,loaded:oe.loaded};oe.lengthComputable&&(ve.total=oe.total),"text"===t.responseType&&!!i.responseText&&(ve.partialText=i.responseText),r.next(ve)},$=oe=>{let ve={type:us.UploadProgress,loaded:oe.loaded};oe.lengthComputable&&(ve.total=oe.total),r.next(ve)};return i.addEventListener("load",p),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",x),null!==s&&i.upload&&i.upload.addEventListener("progress",$)),i.send(s),r.next({type:us.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",p),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",x),null!==s&&i.upload&&i.upload.removeEventListener("progress",$)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ro))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const hR=new o.OlP("XSRF_COOKIE_NAME"),fR=new o.OlP("XSRF_HEADER_NAME");class YV{}let U4=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Or(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y),o.LFG(o.Lbi),o.LFG(hR))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),pR=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(YV),o.LFG(fR))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),j4=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(ZV,[]);this.chain=r.reduceRight((i,s)=>new qV(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(UV),o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),H4=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:pR,useClass:L4}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:hR,useValue:t.cookieName}:[],t.headerName?{provide:fR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[pR,{provide:ZV,useExisting:pR,multi:!0},{provide:YV,useClass:U4},{provide:hR,useValue:"XSRF-TOKEN"},{provide:fR,useValue:"X-XSRF-TOKEN"}]}),n})(),QV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[dR,{provide:VV,useClass:j4},KV,{provide:UV,useExisting:KV}],imports:[[H4.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const z4=["*"];let MT;function gb(n){var e;return(null==(e=function(){if(void 0===MT&&(MT=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(MT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return MT}())?void 0:e.createHTML(n))||n}function XV(n){return Error(`Unable to find icon with the name "${n}"`)}function JV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function eU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class jp{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let kT=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new jp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const u=this._sanitizer.sanitize(o.q3G.HTML,i);if(!u)throw eU(i);const h=gb(u);return this._addSvgIconConfig(t,r,new jp("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new jp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(o.q3G.HTML,r);if(!s)throw eU(r);const u=gb(s);return this._addSvgIconSetConfig(t,new jp("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,t);if(!r)throw JV(t);const i=this._cachedIconsByUrl.get(r);return i?xt(RT(i)):this._loadSvgIconFromConfig(new jp(t,null)).pipe((0,Mi.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,Bt.U)(s=>RT(s)))}getNamedSvgIcon(t,r=""){const i=tU(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):Ev(XV(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?xt(RT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Bt.U)(r=>RT(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?xt(i):BV(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe($s(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(o.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),xt(null)})))).pipe((0,Bt.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw XV(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(u,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Mi.b)(r=>t.svgText=r),(0,Bt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?xt(null):this._fetchIcon(t).pipe((0,Mi.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(gb("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(gb("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:u,value:h}=i[s];"id"!==u&&r.setAttribute(u,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var y;const{url:r,options:i}=t,s=null!=(y=null==i?void 0:i.withCredentials)&&y;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const u=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,r);if(!u)throw JV(r);const h=this._inProgressUrlFetches.get(u);if(h)return h;const p=this._httpClient.get(u,{responseType:"text",withCredentials:s}).pipe((0,Bt.U)(I=>gb(I)),pu(()=>this._inProgressUrlFetches.delete(u)),(0,xk.B)());return this._inProgressUrlFetches.set(u,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(tU(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return q4(s)?new jp(s.url,null,s.options):new jp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(dR,8),o.LFG(za),o.LFG(Y,8),o.LFG(o.qLn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RT(n){return n.cloneNode(!0)}function tU(n,e){return n+":"+e}function q4(n){return!(!n.url||!n.options)}const Z4=Bu(class{constructor(n){this._elementRef=n}}),K4=new o.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,o.f3M)(Y),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),nU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Q4=nU.map(n=>`[${n}]`).join(", "),X4=/^url\(['"]?#(.*?)['"]?\)$/;let _b=(()=>{class n extends Z4{constructor(t,r,i,s,u){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=u,this._inline=!1,this._currentIconFetch=ao.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=si(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(u=>{s.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(Q4),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)nU.forEach(u=>{const h=r[s],p=h.getAttribute(u),y=p?p.match(X4):null;if(y){let I=i.get(h);I||(I=[],i.set(h,I)),I.push({name:u,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,br.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(kT),o.$8M("aria-hidden"),o.Y36(K4),o.Y36(o.qLn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(o.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),o.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.qOj],ngContentSelectors:z4,decls:1,vars:0,template:function(t,r){1&t&&(o.F$t(),o.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),mR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ci],ci]}),n})();const J4=["*",[["mat-toolbar-row"]]],e5=["*","mat-toolbar-row"],t5=Bu(class{constructor(n){this._elementRef=n}});let n5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),r5=(()=>{class n extends t5{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(Yi),o.Y36(Y))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&o.Suo(i,n5,5),2&t){let s;o.iGM(s=o.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&o.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[o.qOj],ngContentSelectors:e5,decls:2,vars:0,template:function(t,r){1&t&&(o.F$t(J4),o.Hsn(0),o.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),s5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ci],ci]}),n})(),o5=(()=>{class n{constructor(){this.menuButtonClicked=new o.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-topbar"]],outputs:{menuButtonClicked:"menuButtonClicked"},decls:8,vars:0,consts:[["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"click"],[1,"appTitle"],[1,"example-spacer"]],template:function(t,r){1&t&&(o.TgZ(0,"mat-toolbar"),o.TgZ(1,"button",0),o.NdJ("click",function(){return r.menuButtonClicked.emit(!0)}),o.TgZ(2,"mat-icon"),o._uU(3,"menu"),o.qZA(),o.qZA(),o.TgZ(4,"div",1),o.TgZ(5,"h1"),o._uU(6,"Minou Tracker"),o.qZA(),o.qZA(),o._UZ(7,"span",2),o.qZA())},directives:[r5,Up,_b],styles:[".appTitle[_ngcontent-%COMP%]{margin:auto}.buttonMenu[_ngcontent-%COMP%]{position:fixed}  .menuCloseButton{border-radius:10px;float:right}"]}),n})();function a5(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",14),o._UZ(2,"br"),o._uU(3),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("src",null==t.connectedUser?null:t.connectedUser.photoURL,o.LSH),o.xp6(2),o.hij(" Hello ",null==t.connectedUser?null:t.connectedUser.displayName," ! ")}}function l5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"a",15),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(),s=o.MAs(2);return i.disconnect(),s.toggle()}),o._uU(1,"Se d\xe9connecter"),o.qZA()}}const c5=function(){return["authentication"]};function u5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"a",16),o.NdJ("click",function(){return o.CHM(t),o.oxw(),o.MAs(2).toggle()}),o._uU(1,"Se connecter"),o.qZA()}2&n&&o.Q6J("routerLink",o.DdM(1,c5))}function d5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"mat-tree-node",20),o._UZ(1,"button",21),o.TgZ(2,"a",22),o.NdJ("click",function(){const s=o.CHM(t).$implicit,u=o.oxw(2),h=o.MAs(2);return u.menuButtonClicked(s),h.toggle()}),o._uU(3),o.qZA(),o.qZA()}if(2&n){const t=e.$implicit;o.xp6(3),o.hij(" ",t.name," ")}}function h5(n,e){if(1&n&&(o.TgZ(0,"mat-tree-node",23),o.TgZ(1,"button",24),o.TgZ(2,"mat-icon",25),o._uU(3),o.qZA(),o.qZA(),o._uU(4),o.qZA()),2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(1),o.uIk("aria-label","Toggle "+t.name),o.xp6(2),o.hij(" ",r.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),o.xp6(1),o.hij(" ",t.name," ")}}function f5(n,e){if(1&n&&(o.TgZ(0,"mat-tree",17),o.YNc(1,d5,4,1,"mat-tree-node",18),o.YNc(2,h5,5,3,"mat-tree-node",19),o.qZA()),2&n){const t=o.oxw();o.Q6J("dataSource",t.dataSource)("treeControl",t.treeControl),o.xp6(2),o.Q6J("matTreeNodeDefWhen",t.hasChild)}}let p5=(()=>{class n{constructor(t,r,i){this.authGuard=r,this.title="foodTrackingApp",this._transformer=(s,u)=>({expandable:!!s.children&&s.children.length>0,name:s.name,isPerson:s.isPerson,navigateUrl:s.navigateUrl,level:u}),this.menuContent=[{name:"Tracker",children:[{name:"Tracking du jour",navigateUrl:"tracker"},{name:"Team tracking",navigateUrl:"teamTracking"}]},{name:"Historique",children:[{name:"Tracking du jour",navigateUrl:"history"}]},{name:"Statistiques",children:[{name:"Evolution poids",navigateUrl:"statistiques"}]}],this.treeControl=new yw(s=>s.level,s=>s.expandable),this.treeFlattener=new Zf(this._transformer,s=>s.level,s=>s.expandable,s=>s.children),this.dataSource=new fx(this.treeControl,this.treeFlattener),this.hasChild=(s,u)=>u.expandable,this.selectedPerson=void 0,t.available.subscribe(s=>{t.activateUpdate().then(u=>{document.location.reload()})}),this.dataSource.data=this.menuContent,this.routing=i}ngOnInit(){this.authGuard.isUserLoggedIn()||this.routing.navigate(["authentication"]),this.setUserIfNotSet()}setUserIfNotSet(){if(this.authGuard.isUserLoggedIn()&&void 0===this.connectedUser&&void 0!==localStorage.getItem("user")){const t=JSON.parse(localStorage.getItem("user"));this.connectedUser={uid:null==t?void 0:t.uid,email:null==t?void 0:t.email,displayName:null==t?void 0:t.displayName,photoURL:null==t?void 0:t.photoURL,emailVerified:null==t?void 0:t.emailVerified}}}disconnect(){this.authGuard.disconnect()}menuButtonClicked(t){t.isPerson?(this.selectedPerson=t.name,this.routing.navigate([`${t.navigateUrl}`])):this.routing.navigate([`${t.navigateUrl}`])}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Sv),o.Y36(IT),o.Y36(gs))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:19,vars:5,consts:[["autosize","",1,"example-container"],["mode","side",1,"sidenavMenu"],["drawer",""],[1,"topMenuContainer"],["mat-button","",1,"menuCloseButton",3,"disableRipple","click"],[1,"userNameButtonMenu"],[4,"ngIf"],[1,"loginLogoutButton"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"routerLink","click",4,"ngIf"],[3,"dataSource","treeControl",4,"ngIf"],[1,"globalContainer"],[3,"menuButtonClicked"],[1,"spacingToolbar"],[1,"imageLoggedUser",3,"src"],["mat-button","",3,"click"],["mat-button","",3,"routerLink","click"],[3,"dataSource","treeControl"],["matTreeNodePadding","1",4,"matTreeNodeDef"],["matTreeNodePadding","0",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","1"],["mat-icon-button","","disabled",""],["mat-raised-button","",3,"click"],["matTreeNodePadding","0"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(t,r){if(1&t){const i=o.EpF();o.TgZ(0,"mat-drawer-container",0),o.TgZ(1,"mat-drawer",1,2),o.TgZ(3,"div",3),o.TgZ(4,"h2"),o._uU(5,"\u{1f63a}MIOUNU"),o.qZA(),o.TgZ(6,"button",4),o.NdJ("click",function(){return o.CHM(i),o.MAs(2).toggle()}),o.TgZ(7,"mat-icon"),o._uU(8,"close"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"div",5),o.YNc(10,a5,4,2,"div",6),o.TgZ(11,"div",7),o.YNc(12,l5,2,0,"a",8),o.YNc(13,u5,2,2,"a",9),o.qZA(),o.qZA(),o.YNc(14,f5,3,3,"mat-tree",10),o.qZA(),o.TgZ(15,"div",11),o.TgZ(16,"app-topbar",12),o.NdJ("menuButtonClicked",function(){return o.CHM(i),o.MAs(2).toggle()}),o.qZA(),o._UZ(17,"div",13),o._UZ(18,"router-outlet"),o.qZA(),o.qZA()}2&t&&(o.xp6(6),o.Q6J("disableRipple",!0),o.xp6(4),o.Q6J("ngIf",r.authGuard.isUserLoggedIn()),o.xp6(2),o.Q6J("ngIf",r.authGuard.isUserLoggedIn()),o.xp6(1),o.Q6J("ngIf",!r.authGuard.isUserLoggedIn()),o.xp6(1),o.Q6J("ngIf",r.authGuard.isUserLoggedIn()))},directives:[PV,OV,Up,_b,ei,o5,yd,LV,Am,DC,bv,TC,wv,qd],styles:[".globalContainer[_ngcontent-%COMP%]{width:100vw;height:100vh}.spacingToolbar[_ngcontent-%COMP%]{height:64px;width:100vw}app-topbar[_ngcontent-%COMP%]{position:fixed!important;width:100vw;z-index:99}.viewport[_ngcontent-%COMP%]  video{width:100%;height:240px;object-fit:cover}.appContent[_ngcontent-%COMP%]{display:flex}.sidenavMenu[_ngcontent-%COMP%]{padding:20px;width:250px}.topMenuContainer[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .topMenuContainer[_ngcontent-%COMP%] > .menuCloseButton[_ngcontent-%COMP%]{display:inline-block}.topMenuContainer[_ngcontent-%COMP%]{width:100%;height:50px}.userNameButtonMenu[_ngcontent-%COMP%]{background-color:#0000004d;text-align:center;padding:10px 0;border-radius:5px;margin-bottom:20px}.imageLoggedUser[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:30px;margin-bottom:5px}.loginLogoutButton[_ngcontent-%COMP%]{color:#ffffffb3}"]}),n})();const iU=Lm({passive:!0});let m5=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return $a.E;const r=Ql(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new rn.x,u="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,iU),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,iU)}}),s}stopMonitoring(t){const r=Ql(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),oU=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Hp=(()=>{class n extends oU{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Xc=new o.OlP("NgValueAccessor"),_5={provide:Xc,useExisting:(0,o.Gpc)(()=>yb),multi:!0},v5=new o.OlP("CompositionEventMode");let yb=(()=>{class n extends oU{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=b()?b().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(v5,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[o._Bn([_5]),o.qOj]}),n})();function Ch(n){return null==n||0===n.length}function lU(n){return null!=n&&"number"==typeof n.length}const wo=new o.OlP("NgValidators"),Ih=new o.OlP("NgAsyncValidators"),b5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pl{static min(e){return function(n){return e=>{if(Ch(e.value)||Ch(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(Ch(e.value)||Ch(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return Ch(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return Ch(n.value)||b5.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>Ch(e.value)||!lU(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>lU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return vb;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ch(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return EU(e)}static composeAsync(e){return CU(e)}}function vb(n){return null}function _U(n){return null!=n}function yU(n){const e=(0,o.QGY)(n)?(0,Tr.D)(n):n;return(0,o.CqO)(e),e}function vU(n){let e={};return n.forEach(t=>{e=null!=t?kt(kt({},e),t):e}),0===Object.keys(e).length?null:e}function bU(n,e){return e.map(t=>t(n))}function wU(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function EU(n){if(!n)return null;const e=n.filter(_U);return 0==e.length?null:function(t){return vU(bU(t,e))}}function gR(n){return null!=n?EU(wU(n)):null}function CU(n){if(!n)return null;const e=n.filter(_U);return 0==e.length?null:function(t){return BV(bU(t,e).map(yU)).pipe((0,Bt.U)(vU))}}function _R(n){return null!=n?CU(wU(n)):null}function IU(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TU(n){return n._rawValidators}function SU(n){return n._rawAsyncValidators}function yR(n){return n?Array.isArray(n)?n:[n]:[]}function OT(n,e){return Array.isArray(n)?n.includes(e):n===e}function DU(n,e){const t=yR(e);return yR(n).forEach(i=>{OT(t,i)||t.push(i)}),t}function AU(n,e){return yR(e).filter(t=>!OT(n,t))}class xU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_R(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jo extends xU{get formDirective(){return null}get path(){return null}}class Jc extends xU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class MU{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}let vR=(()=>{class n extends MU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Jc,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[o.qOj]}),n})(),bR=(()=>{class n extends MU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(jo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[o.qOj]}),n})();function bb(n,e){CR(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&kU(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&kU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),BT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function LT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CR(n,e){const t=TU(n);null!==e.validator?n.setValidators(IU(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=SU(n);null!==e.asyncValidator?n.setAsyncValidators(IU(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();LT(e._rawValidators,i),LT(e._rawAsyncValidators,i)}function BT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=TU(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=SU(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return LT(e._rawValidators,r),LT(e._rawAsyncValidators,r),t}function kU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RU(n,e){CR(n,e)}function OU(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function VT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const wb="VALID",UT="INVALID",M_="PENDING",Eb="DISABLED";function SR(n){return(AR(n)?n.validators:n)||null}function PU(n){return Array.isArray(n)?gR(n):n||null}function DR(n,e){return(AR(e)?e.asyncValidators:n)||null}function NU(n){return Array.isArray(n)?_R(n):n||null}function AR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class xR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=PU(this._rawValidators),this._composedAsyncValidatorFn=NU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===wb}get invalid(){return this.status===UT}get pending(){return this.status==M_}get disabled(){return this.status===Eb}get enabled(){return this.status!==Eb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=PU(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=NU(e)}addValidators(e){this.setValidators(DU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AU(e,this._rawAsyncValidators))}hasValidator(e){return OT(this._rawValidators,e)}hasAsyncValidator(e){return OT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=M_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Eb,this.errors=null,this._forEachChild(r=>{r.disable(ds(kt({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ds(kt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wb,this._forEachChild(r=>{r.enable(ds(kt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ds(kt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wb||this.status===M_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Eb:wb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=M_,this._hasOwnPendingAsyncValidator=!0;const t=yU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof k_?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof O5&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?Eb:this.errors?UT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(M_)?M_:this._anyControlsHaveStatus(UT)?UT:wb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AR(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class da extends xR{constructor(e=null,t,r){super(SR(t),DR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class k_ extends xR{constructor(e,t,r){super(SR(t),DR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof da?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class O5 extends xR{constructor(e,t,r){super(SR(t),DR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof da?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const P5={provide:jo,useExisting:(0,o.Gpc)(()=>Ib)},Cb=(()=>Promise.resolve(null))();let Ib=(()=>{class n extends jo{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new o.vpe,this.form=new k_({},gR(t),_R(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Cb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Cb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),VT(this._directives,t)})}addFormGroup(t){Cb.then(()=>{const r=this._findContainer(t.path),i=new k_({});RU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Cb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Cb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,OU(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wo,10),o.Y36(Ih,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([P5]),o.qOj]}),n})(),MR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const L5={provide:Xc,useExisting:(0,o.Gpc)(()=>kR),multi:!0};let kR=(()=>{class n extends Hp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([L5]),o.qOj]}),n})(),UU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const RR=new o.OlP("NgModelWithFormControlWarning"),H5={provide:jo,useExisting:(0,o.Gpc)(()=>zp)};let zp=(()=>{class n extends jo{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(BT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return bb(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){FT(t.control||null,t,!1),VT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,OU(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(FT(r||null,t),i instanceof da&&(bb(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);RU(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return BT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CR(this.form,this),this._oldForm&&BT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wo,10),o.Y36(Ih,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([H5]),o.qOj,o.TTD]}),n})();const $5={provide:Jc,useExisting:(0,o.Gpc)(()=>jT)};let jT=(()=>{class n extends Jc{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===yb?t=s:function(n){return Object.getPrototypeOf(n.constructor)===Hp}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(o.Y36(jo,13),o.Y36(wo,10),o.Y36(Ih,10),o.Y36(Xc,10),o.Y36(RR,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([$5]),o.qOj,o.TTD]}),n})(),nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[UU]]}),n})(),o8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[nj]}),n})(),a8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[nj]}),n})(),rj=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l8=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Ql(t);return new kr.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new rn.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(rj))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c8=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new o.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=si(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ki(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(vf(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(l8),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),u8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[rj]}),n})();const d8=["connectionContainer"],h8=["inputContainer"],f8=["label"];function p8(n,e){1&n&&(o.ynx(0),o.TgZ(1,"div",14),o._UZ(2,"div",15),o._UZ(3,"div",16),o._UZ(4,"div",17),o.qZA(),o.TgZ(5,"div",18),o._UZ(6,"div",15),o._UZ(7,"div",16),o._UZ(8,"div",17),o.qZA(),o.BQk())}function m8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",19),o.NdJ("cdkObserveContent",function(){return o.CHM(t),o.oxw().updateOutlineGap()}),o.Hsn(1,1),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function g8(n,e){if(1&n&&(o.ynx(0),o.Hsn(1,2),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.BQk()),2&n){const t=o.oxw(2);o.xp6(3),o.Oqu(t._control.placeholder)}}function _8(n,e){1&n&&o.Hsn(0,3,["*ngSwitchCase","true"])}function y8(n,e){1&n&&(o.TgZ(0,"span",23),o._uU(1," *"),o.qZA())}function v8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"label",20,21),o.NdJ("cdkObserveContent",function(){return o.CHM(t),o.oxw().updateOutlineGap()}),o.YNc(2,g8,4,1,"ng-container",12),o.YNc(3,_8,1,0,"ng-content",12),o.YNc(4,y8,2,0,"span",22),o.qZA()}if(2&n){const t=o.oxw();o.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),o.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),o.uIk("for",t._control.id)("aria-owns",t._control.id),o.xp6(2),o.Q6J("ngSwitchCase",!1),o.xp6(1),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function b8(n,e){1&n&&(o.TgZ(0,"div",24),o.Hsn(1,4),o.qZA())}function w8(n,e){if(1&n&&(o.TgZ(0,"div",25),o._UZ(1,"span",26),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function E8(n,e){if(1&n&&(o.TgZ(0,"div"),o.Hsn(1,5),o.qZA()),2&n){const t=o.oxw();o.Q6J("@transitionMessages",t._subscriptAnimationState)}}function C8(n,e){if(1&n&&(o.TgZ(0,"div",30),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.Q6J("id",t._hintLabelId),o.xp6(1),o.Oqu(t.hintLabel)}}function I8(n,e){if(1&n&&(o.TgZ(0,"div",27),o.YNc(1,C8,2,2,"div",28),o.Hsn(2,6),o._UZ(3,"div",29),o.Hsn(4,7),o.qZA()),2&n){const t=o.oxw();o.Q6J("@transitionMessages",t._subscriptAnimationState),o.xp6(1),o.Q6J("ngIf",t.hintLabel)}}const T8=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],S8=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],D8=new o.OlP("MatError"),A8={transitionMessages:Zm("transitionMessages",[Ld("enter",tc({opacity:1,transform:"translateY(0%)"})),If("void => enter",[tc({opacity:0,transform:"translateY(-5px)"}),Fd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let zT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n}),n})();const x8=new o.OlP("MatHint");let GT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-label"]]}),n})(),M8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const k8=new o.OlP("MatPrefix"),ij=new o.OlP("MatSuffix");let R8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","matSuffix",""]],features:[o._Bn([{provide:ij,useExisting:n}])]}),n})(),sj=0;const P8=Bu(class{constructor(n){this._elementRef=n}},"primary"),N8=new o.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),aj=new o.OlP("MatFormField");let lj=(()=>{class n extends P8{constructor(t,r,i,s,u,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=u,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new rn.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+sj++,this._labelId="mat-form-field-label-"+sj++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=si(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Bi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ii(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ii(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,No.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Bi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Bi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ii(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,cl(this._label.nativeElement,"transitionend").pipe((0,br.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const I=r.querySelectorAll(`${i}, ${s}`);for(let x=0;x<I.length;x++)I[x].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const I=r.getBoundingClientRect();if(0===I.width&&0===I.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const x=this._getStartEnd(I),$=t.children,oe=this._getStartEnd($[0].getBoundingClientRect());let ve=0;for(let Ge=0;Ge<$.length;Ge++)ve+=$[Ge].offsetWidth;u=Math.abs(oe-x)-5,h=ve>0?.75*ve+10:0}for(let I=0;I<p.length;I++)p[I].style.width=`${u}px`;for(let I=0;I<y.length;I++)y[I].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Td,8),o.Y36(N8,8),o.Y36(Yi),o.Y36(o.R0b),o.Y36(Ra,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(o.Suo(i,zT,5),o.Suo(i,zT,7),o.Suo(i,GT,5),o.Suo(i,GT,7),o.Suo(i,M8,5),o.Suo(i,D8,5),o.Suo(i,x8,5),o.Suo(i,k8,5),o.Suo(i,ij,5)),2&t){let s;o.iGM(s=o.CRH())&&(r._controlNonStatic=s.first),o.iGM(s=o.CRH())&&(r._controlStatic=s.first),o.iGM(s=o.CRH())&&(r._labelChildNonStatic=s.first),o.iGM(s=o.CRH())&&(r._labelChildStatic=s.first),o.iGM(s=o.CRH())&&(r._placeholderChild=s.first),o.iGM(s=o.CRH())&&(r._errorChildren=s),o.iGM(s=o.CRH())&&(r._hintChildren=s),o.iGM(s=o.CRH())&&(r._prefixChildren=s),o.iGM(s=o.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(o.Gf(d8,7),o.Gf(h8,5),o.Gf(f8,5)),2&t){let i;o.iGM(i=o.CRH())&&(r._connectionContainerRef=i.first),o.iGM(i=o.CRH())&&(r._inputContainerRef=i.first),o.iGM(i=o.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&o.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[o._Bn([{provide:aj,useExisting:n}]),o.qOj],ngContentSelectors:S8,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(o.F$t(T8),o.TgZ(0,"div",0),o.TgZ(1,"div",1,2),o.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),o.YNc(3,p8,9,0,"ng-container",3),o.YNc(4,m8,2,1,"div",4),o.TgZ(5,"div",5,6),o.Hsn(7),o.TgZ(8,"span",7),o.YNc(9,v8,5,16,"label",8),o.qZA(),o.qZA(),o.YNc(10,b8,2,0,"div",9),o.qZA(),o.YNc(11,w8,2,4,"div",10),o.TgZ(12,"div",11),o.YNc(13,E8,2,1,"div",12),o.YNc(14,I8,5,2,"div",13),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngIf","outline"==r.appearance),o.xp6(1),o.Q6J("ngIf",r._prefixChildren.length),o.xp6(5),o.Q6J("ngIf",r._hasFloatingLabel()),o.xp6(1),o.Q6J("ngIf",r._suffixChildren.length),o.xp6(1),o.Q6J("ngIf","outline"!=r.appearance),o.xp6(1),o.Q6J("ngSwitch",r._getDisplayedMessages()),o.xp6(1),o.Q6J("ngSwitchCase","error"),o.xp6(1),o.Q6J("ngSwitchCase","hint"))},directives:[ei,eo,ti,c8],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[A8.transitionMessages]},changeDetection:0}),n})(),BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[be,ci,u8],ci]}),n})();const F8=new o.OlP("MAT_INPUT_VALUE_ACCESSOR"),L8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let B8=0;const V8=pC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let cj=(()=>{class n extends V8{constructor(t,r,i,s,u,h,p,y,I,x){super(h,s,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=x,this._uid="mat-input-"+B8++,this.focused=!1,this.stateChanges=new rn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ve=>wD().has(ve)),this._iOSKeyupListener=ve=>{const Ge=ve.target;!Ge.value&&0===Ge.selectionStart&&0===Ge.selectionEnd&&(Ge.setSelectionRange(1,1),Ge.setSelectionRange(0,0))};const $=this._elementRef.nativeElement,oe=$.nodeName.toLowerCase();this._inputValueAccessor=p||$,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&I.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===oe,this._isTextarea="textarea"===oe,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=$.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=si(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(pl.required))&&s}set required(t){this._required=si(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&wD().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=si(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,i;const t=(null==(i=null==(r=this._formField)?void 0:r._hideControlPlaceholder)?void 0:i.call(r))?null:this.placeholder;if(t!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=t,t?s.setAttribute("placeholder",t):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){L8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(Yi),o.Y36(Jc,10),o.Y36(Ib,8),o.Y36(zp,8),o.Y36(bg),o.Y36(F8,10),o.Y36(m5),o.Y36(o.R0b),o.Y36(aj,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&o.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(o.Ikx("disabled",r.disabled)("required",r.required),o.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),o.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[o._Bn([{provide:zT,useExisting:n}]),o.qOj,o.TTD]}),n})(),uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[bg],imports:[[sU,BR,ci],sU,BR]}),n})();function U8(n,e){if(1&n&&(o.O4$(),o._UZ(0,"circle",4)),2&n){const t=o.oxw(),r=o.MAs(1);o.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),o.uIk("r",t._getCircleRadius())}}function j8(n,e){if(1&n&&(o.O4$(),o._UZ(0,"circle",4)),2&n){const t=o.oxw(),r=o.MAs(1);o.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),o.uIk("r",t._getCircleRadius())}}const z8=Bu(class{constructor(n){this._elementRef=n}},"primary"),G8=new o.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Ju extends z8{constructor(e,t,r,i,s,u,h,p){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=ao.w0.EMPTY,this.mode="determinate";const y=Ju._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),y.has(r.head)||y.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&h&&u&&p&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>u.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Ki(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Ki(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Ki(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=CD(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var r;const t=50*(null!=(r=e.currentScale)?r:1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=Ju._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Ju._diameters=new WeakMap,Ju.\u0275fac=function(e){return new(e||Ju)(o.Y36(o.SBq),o.Y36(Yi),o.Y36(Y,8),o.Y36(Ra,8),o.Y36(G8),o.Y36(o.sBO),o.Y36(DT),o.Y36(o.R0b))},Ju.\u0275cmp=o.Xpm({type:Ju,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(o.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),o.Udp("width",t.diameter,"px")("height",t.diameter,"px"),o.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[o.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(o.O4$(),o.TgZ(0,"svg",0,1),o.YNc(2,U8,1,11,"circle",2),o.YNc(3,j8,1,9,"circle",3),o.qZA()),2&e&&(o.Udp("width",t.diameter,"px")("height",t.diameter,"px"),o.Q6J("ngSwitch","indeterminate"===t.mode),o.uIk("viewBox",t._getViewBox()),o.xp6(2),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngSwitchCase",!1))},directives:[eo,ti],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let dj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ci,be],ci]}),n})();const hj="@firebase/database";let UR="";function pj(n){UR=n}class K8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ae.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ae.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Y8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ae.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mj=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new K8(e)}}catch(e){}return new Y8},Gp=mj("localStorage"),jR=mj("sessionStorage"),R_=new Pa.Yd("@firebase/database"),gj=function(){let n=1;return function(){return n++}}(),_j=function(n){const e=(0,ae.dS)(n),t=new ae.gQ;t.update(e);const r=t.digest();return ae.US.encodeByteArray(r)},Tb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Tb.apply(null,r):e+="object"==typeof r?(0,ae.Pz)(r):r,e+=" "}return e};let $p=null,yj=!0;const vj=function(n,e){(0,ae.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(R_.logLevel=Pa.in.VERBOSE,$p=R_.log.bind(R_),e&&jR.set("logging_enabled",!0)):"function"==typeof n?$p=n:($p=null,jR.remove("logging_enabled"))},Fs=function(...n){if(!0===yj&&(yj=!1,null===$p&&!0===jR.get("logging_enabled")&&vj(!0)),$p){const e=Tb.apply(null,n);$p(e)}},Sb=function(n){return function(...e){Fs(n,...e)}},HR=function(...n){const e="FIREBASE INTERNAL ERROR: "+Tb(...n);R_.error(e)},eu=function(...n){const e=`FIREBASE FATAL ERROR: ${Tb(...n)}`;throw R_.error(e),new Error(e)},Eo=function(...n){const e="FIREBASE WARNING: "+Tb(...n);R_.warn(e)},$T=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ed="[MIN_NAME]",tu="[MAX_NAME]",Wp=function(n,e){if(n===e)return 0;if(n===ed||e===tu)return-1;if(e===ed||n===tu)return 1;{const t=WT(n),r=WT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},J8=function(n,e){return n===e?0:n<e?-1:1},Db=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ae.Pz)(e))},zR=function(n){if("object"!=typeof n||null===n)return(0,ae.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,ae.Pz)(e[r]),t+=":",t+=zR(n[e[r]]);return t+="}",t},bj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ls(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const wj=function(n){(0,ae.hu)(!$T(n),"Invalid JSON number");const r=1023;let i,s,u,h,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const I=y.join("");let x="";for(p=0;p<64;p+=8){let $=parseInt(I.substr(p,8),2).toString(16);1===$.length&&($="0"+$),x+=$}return x.toLowerCase()},rZ=new RegExp("^-?(0*)\\d{1,10}$"),Ej=-2147483648,GR=2147483647,WT=function(n){if(rZ.test(n)){const e=Number(n);if(e>=Ej&&e<=GR)return e}return null},O_=function(n){try{n()}catch(e){setTimeout(()=>{throw Eo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ab=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class sZ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class oZ{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Fs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Eo(e)}}let xb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Dj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Mj="websocket",kj="long_polling";class WR{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Gp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Rj(n,e,t){let r;if((0,ae.hu)("string"==typeof e,"typeof type must == string"),(0,ae.hu)("object"==typeof t,"typeof params must == object"),e===Mj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==kj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ls(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class lZ{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ae.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ae.p$)(this.counters_)}}const qR={},ZR={};function KR(n){const e=n.toString();return qR[e]||(qR[e]=new lZ),qR[e]}class uZ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&O_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Th{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sb(e),this.stats_=KR(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Rj(t,kj,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new uZ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ae.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new YR((...s)=>{const[u,h,p,y,I]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Dj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Th.forceAllow_=!0}static forceDisallow(){Th.forceDisallow_=!0}static isAvailable(){return!((0,ae.Yr)()||!Th.forceAllow_&&(Th.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ae.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,ae.h$)(t),i=bj(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ae.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ae.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class YR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ae.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=YR.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Fs("frame writing exception"),h.stack&&Fs(h.stack),Fs(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fs("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,ae.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Fs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let ZT=null;"undefined"!=typeof MozWebSocket?ZT=MozWebSocket:"undefined"!=typeof WebSocket&&(ZT=WebSocket);let P_=(()=>{class n{constructor(t,r,i,s,u,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sb(this.connId),this.stats_=KR(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const h={v:"5"};return!(0,ae.Yr)()&&"undefined"!=typeof location&&location.hostname&&Dj.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),u&&(h.p=u),Rj(t,Mj,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gp.set("previous_websocket_failure",!0);try{let i;if((0,ae.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${UR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(u.proxy={origin:p})}this.mySock=new ZT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ZT&&!n.forceDisallow_}static previouslyFailed(){return Gp.isInMemoryStorage||!0===Gp.get("previous_websocket_failure")}markConnectionHealthy(){Gp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,ae.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ae.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,ae.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=bj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Vj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Th,P_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=P_&&P_.isAvailable();let i=r&&!P_.previouslyFailed();if(t.webSocketOnly&&(r||Eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[P_];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Wj{constructor(e,t,r,i,s,u,h,p,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sb("c:"+this.id+":"),this.transportManager_=new Vj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ab(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Db("t",e),r=Db("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Db("t",e),r=Db("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Db("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?HR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ab(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ab(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qj{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Zj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ae.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,ae.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class KT extends Zj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ae.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new KT}getInitialEvent(e){return(0,ae.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ur{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Dr(){return new Ur("")}function er(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Sh(n){return n.pieces_.length-n.pieceNum_}function oi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ur(n.pieces_,e)}function XR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Mb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Qj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ur(e,0)}function Ii(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ur)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ur(t,0)}function tr(n){return n.pieceNum_>=n.pieces_.length}function Ho(n,e){const t=er(n),r=er(e);if(null===t)return e;if(t===r)return Ho(oi(n),oi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function RZ(n,e){const t=Mb(n,0),r=Mb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Wp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function JR(n,e){if(Sh(n)!==Sh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ml(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Sh(n)>Sh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class OZ{constructor(e,t){this.errorPrefix_=t,this.parts_=Mb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ae.ug)(this.parts_[r]);Xj(this)}}function Xj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qp(n))}function qp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class eO extends Zj{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new eO}getInitialEvent(e){return(0,ae.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kb=1e3;let QT,Zp=(()=>{class n extends qj{constructor(t,r,i,s,u,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Sb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,ae.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&KT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,ae.Pz)(u)),(0,ae.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new ae.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,ae.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ae.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,I=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==I&&this.removeListen_(i,s),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,ae.r3)(t,"w")){const i=(0,ae.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ae.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,ae.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,ae.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ae.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):HR("Unrecognized action received from server: "+(0,ae.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ae.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ut.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const I=function(){y?y.close():(p=!0,s())};t.realtime_={close:I,sendRequest:function(oe){(0,ae.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(oe)}};const $=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[oe,ve]=yield Promise.all([t.authTokenProvider_.getToken($),t.appCheckTokenProvider_.getToken($)]);p?Fs("getToken() completed but was canceled"):(Fs("getToken() completed. Creating connection."),t.authToken_=oe&&oe.accessToken,t.appCheckToken_=ve&&ve.token,y=new Wj(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Ge=>{Eo(Ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(oe){t.log_("Failed to get token: "+oe),p||(t.repoInfo_.nodeAdmin&&Eo(oe),I())}}})()}interrupt(t){Fs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Fs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ae.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>zR(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Ur(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Fs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Fs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,ae.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+UR.replace(/\./g,"-")]=1,(0,ae.uI)()?t["framework.cordova"]=1:(0,ae.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=KT.getInstance().currentlyOnline();return(0,ae.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rr(e,t)}}class YT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rr(ed,e),i=new rr(ed,t);return 0!==this.compare(r,i)}minPost(){return rr.MIN}}class t3 extends YT{static get __EMPTY_NODE(){return QT}static set __EMPTY_NODE(e){QT=e}compare(e,t){return Wp(e.name,t.name)}isDefinedOn(e){throw(0,ae.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rr.MIN}maxPost(){return new rr(tu,QT)}makePost(e,t){return(0,ae.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rr(e,QT)}toString(){return".key"}}const nu=new t3;class XT{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let nO,lc=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:ha.EMPTY_NODE,this.right=null!=u?u:ha.EMPTY_NODE}copy(t,r,i,s,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ha.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ha.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ha{constructor(e,t=ha.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ha(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,lc.BLACK,null,null))}remove(e){return new ha(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new XT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new XT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new XT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new XT(this.root_,null,this.comparator_,!0,e)}}function HZ(n,e){return Wp(n.name,e.name)}function tO(n,e){return Wp(n,e)}ha.EMPTY_NODE=new class{copy(e,t,r,i,s){return this}insert(e,t,r){return new lc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const n3=function(n){return"number"==typeof n?"number:"+wj(n):"string:"+n},r3=function(n){if(n.isLeafNode()){const e=n.val();(0,ae.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ae.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ae.hu)(n===nO||n.isEmpty(),"priority of unexpected type.");(0,ae.hu)(n===nO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let s3,o3,a3,N_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,ae.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),r3(this.priorityNode_)}static set __childrenNodeConstructor(t){s3=t}static get __childrenNodeConstructor(){return s3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tr(t)?this:".priority"===er(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=er(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,ae.hu)(".priority"!==i||1===Sh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(oi(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+n3(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?wj(this.value_):this.value_,this.lazyHash_=_j(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ae.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,ae.hu)(s>=0,"Unknown leaf type: "+r),(0,ae.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const di=new class extends YT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Wp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rr.MIN}maxPost(){return new rr(tu,new N_("[PRIORITY-POST]",a3))}makePost(e,t){const r=o3(e);return new rr(t,new N_("[PRIORITY-POST]",r))}toString(){return".priority"}},qZ=Math.log(2);class ZZ{constructor(e){this.count=parseInt(Math.log(e+1)/qZ,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const JT=function(n,e,t,r){n.sort(e);const i=function(p,y){const I=y-p;let x,$;if(0===I)return null;if(1===I)return x=n[p],$=t?t(x):x,new lc($,x.node,lc.BLACK,null,null);{const oe=parseInt(I/2,10)+p,ve=i(p,oe),Ge=i(oe+1,y);return x=n[oe],$=t?t(x):x,new lc($,x.node,lc.BLACK,ve,Ge)}},h=function(p){let y=null,I=null,x=n.length;const $=function(ve,Ge){const ot=x-ve,Tt=x;x-=ve;const jt=i(ot+1,Tt),Qt=n[ot],Ht=t?t(Qt):Qt;oe(new lc(Ht,Qt.node,Ge,null,jt))},oe=function(ve){y?(y.left=ve,y=ve):(I=ve,y=ve)};for(let ve=0;ve<p.count;++ve){const Ge=p.nextBitIsOne(),ot=Math.pow(2,p.count-(ve+1));Ge?$(ot,lc.BLACK):($(ot,lc.BLACK),$(ot,lc.RED))}return I}(new ZZ(n.length));return new ha(r||e,h)};let rO;const F_={};class td{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ae.hu)(F_&&di,"ChildrenNode.ts has not been loaded"),rO=rO||new td({".priority":F_},{".priority":di}),rO}get(e){const t=(0,ae.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ha?t:null}hasIndex(e){return(0,ae.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ae.hu)(e!==nu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(rr.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?JT(r,e.getCompare()):F_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const I=Object.assign({},this.indexes_);return I[p]=h,new td(I,y)}addToIndexes(e,t){const r=(0,ae.UI)(this.indexes_,(i,s)=>{const u=(0,ae.DV)(this.indexSet_,s);if((0,ae.hu)(u,"Missing index implementation for "+s),i===F_){if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(rr.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),JT(h,u.getCompare())}return F_}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new rr(e.name,h))),p.insert(e,e.node)}});return new td(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,ae.UI)(this.indexes_,i=>{if(i===F_)return i;{const s=t.get(e.name);return s?i.remove(new rr(e.name,s)):i}});return new td(r,this.indexSet_)}}let Rb,Ln=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&r3(this.priorityNode_),this.children_.isEmpty()&&(0,ae.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rb||(Rb=new n(new ha(tO),null,td.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Rb:r}}getChild(t){const r=er(t);return null===r?this:this.getImmediateChild(r).getChild(oi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,ae.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new rr(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Rb:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=er(t);if(null===i)return r;{(0,ae.hu)(".priority"!==er(t)||1===Sh(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(oi(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(di,(h,p)=>{r[h]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+n3(this.getPriority().val())+":"),this.forEachChild(di,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":_j(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new rr(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rr(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,rr.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,rr.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ob?-1:0}withIndex(t){if(t===nu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===nu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(di),s=r.getIterator(di);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===nu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ob=new class extends Ln{constructor(){super(new ha(tO),Ln.EMPTY_NODE,td.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ln.EMPTY_NODE}isEmpty(){return!1}};function ki(n,e=null){if(null===n)return Ln.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ae.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new N_(n,ki(e));if(n instanceof Array){let t=Ln.EMPTY_NODE;return Ls(n,(r,i)=>{if((0,ae.r3)(n,r)&&"."!==r.substring(0,1)){const s=ki(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(ki(e))}{const t=[];let r=!1;if(Ls(n,(u,h)=>{if("."!==u.substring(0,1)){const p=ki(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new rr(u,p)))}}),0===t.length)return Ln.EMPTY_NODE;const s=JT(t,HZ,u=>u.name,tO);if(r){const u=JT(t,di.getCompare());return new Ln(s,ki(e),new td({".priority":u},{".priority":di}))}return new Ln(s,ki(e),td.Default)}}Object.defineProperties(rr,{MIN:{value:new rr(ed,Ln.EMPTY_NODE)},MAX:{value:new rr(tu,Ob)}}),t3.__EMPTY_NODE=Ln.EMPTY_NODE,N_.__childrenNodeConstructor=Ln,function(n){nO=n}(Ob),function(n){a3=n}(Ob),function(n){o3=n}(ki);class iO extends YT{constructor(e){super(),this.indexPath_=e,(0,ae.hu)(!tr(e)&&".priority"!==er(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Wp(e.name,t.name):s}makePost(e,t){const r=ki(e),i=Ln.EMPTY_NODE.updateChild(this.indexPath_,r);return new rr(t,i)}maxPost(){const e=Ln.EMPTY_NODE.updateChild(this.indexPath_,Ob);return new rr(tu,e)}toString(){return Mb(this.indexPath_,0).join("/")}}const sO=new class extends YT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Wp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rr.MIN}maxPost(){return rr.MAX}makePost(e,t){const r=ki(e);return new rr(t,r)}toString(){return".value"}},L_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",XZ=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=L_.charAt(t%64),t=Math.floor(t/64);(0,ae.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=L_.charAt(e[i]);return(0,ae.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),u3=function(n){if(n===""+GR)return"-";const e=WT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return tu;const s=L_.charAt(L_.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},d3=function(n){if(n===""+Ej)return ed;const e=WT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+GR:(delete t[t.length-1],t.join("")):(t[t.length-1]=L_.charAt(L_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function h3(n){return{type:"value",snapshotNode:n}}function B_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Pb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Nb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class aO{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,ae.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Pb(t,h)):(0,ae.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(B_(t,r)):u.trackChildChange(Nb(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(di,(i,s)=>{t.hasChild(i)||r.trackChildChange(Pb(i,s))}),t.isLeafNode()||t.forEachChild(di,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(Nb(i,s,u))}else r.trackChildChange(B_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ln.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Fb{constructor(e){this.indexedFilter_=new aO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fb.getStartPost_(e),this.endPost_=Fb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new rr(t,r))||(r=Ln.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ln.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ln.EMPTY_NODE);const s=this;return t.forEachChild(di,(u,h)=>{s.matches(new rr(u,h))||(i=i.updateImmediateChild(u,Ln.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class eK{constructor(e){this.rangedFilter_=new Fb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new rr(t,r))||(r=Ln.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ln.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Ln.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Ln.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();h=($,oe)=>x(oe,$)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,I=!1;for(;p.hasNext();){const x=p.getNext();!I&&h(s,x)<=0&&(I=!0),I&&y<this.limit_&&h(x,u)<=0?y++:i=i.updateImmediateChild(x.name,Ln.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const x=this.index_.getCompare();u=($,oe)=>x(oe,$)}else u=this.index_.getCompare();const h=e;(0,ae.hu)(h.numChildren()===this.limit_,"");const p=new rr(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(p);if(h.hasChild(t)){const x=h.getImmediateChild(t);let $=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=$&&($.name===t||h.hasChild($.name));)$=i.getChildAfterChild(this.index_,$,this.reverse_);const oe=null==$?1:u($,p);if(I&&!r.isEmpty()&&oe>=0)return null!=s&&s.trackChildChange(Nb(t,r,x)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(Pb(t,x));const Ge=h.updateImmediateChild(t,Ln.EMPTY_NODE);return null!=$&&this.rangedFilter_.matches($)?(null!=s&&s.trackChildChange(B_($.name,$.node)),Ge.updateImmediateChild($.name,$.node)):Ge}}return r.isEmpty()?e:I&&u(y,p)>=0?(null!=s&&(s.trackChildChange(Pb(y.name,y.node)),s.trackChildChange(B_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Ln.EMPTY_NODE)):e}}class eS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=di}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ed}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ae.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===di}copy(){const e=new eS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lO(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function cO(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function tS(n,e){const t=n.copy();return t.index_=e,t}function f3(n){const e={};if(n.isDefault())return e;let t;return n.index_===di?t="$priority":n.index_===sO?t="$value":n.index_===nu?t="$key":((0,ae.hu)(n.index_ instanceof iO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ae.Pz)(t),n.startSet_&&(e.startAt=(0,ae.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,ae.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,ae.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,ae.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function p3(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==di&&(e.i=n.index_.toString()),e}class nS extends qj{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Sb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ae.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=nS.getListenId_(e,r),h={};this.listens_[u]=h;const p=f3(e._queryParams);this.restRequest_(s+".json",p,(y,I)=>{let x=I;if(404===y&&(x=null,y=null),null===y&&this.onDataUpdate_(s,x,!1,r),(0,ae.DV)(this.listens_,u)===h){let $;$=y?401===y?"permission_denied":"rest_error:"+y:"ok",i($,null)}})}unlisten(e,t){const r=nS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=f3(e._queryParams),r=e._path.toString(),i=new ae.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ae.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,ae.cI)(h.responseText)}catch(y){Eo("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Eo("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class oK{constructor(){this.rootNode_=Ln.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function rS(){return{value:null,children:new Map}}function V_(n,e,t){if(tr(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=er(e);n.children.has(r)||n.children.set(r,rS()),V_(n.children.get(r),e=oi(e),t)}}function uO(n,e){if(tr(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(di,(r,i)=>{V_(n,new Ur(r),i)}),uO(n,e)}}if(n.children.size>0){const t=er(e);return e=oi(e),n.children.has(t)&&uO(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function dO(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{dO(i,new Ur(e.toString()+"/"+r),t)})}class lK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ls(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class dK{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new lK(e);const r=1e4+2e4*Math.random();Ab(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ls(e,(i,s)=>{s>0&&(0,ae.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Ab(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gl||(gl={})),gl))();function pO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=gl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tr(this.path)){if(null!=this.affectedTree.value)return(0,ae.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ur(e));return new iS(Dr(),t,this.revert)}}return(0,ae.hu)(er(this.path)===e,"operationForChild called for unrelated child."),new iS(oi(this.path),this.affectedTree,this.revert)}}class Lb{constructor(e,t){this.source=e,this.path=t,this.type=gl.LISTEN_COMPLETE}operationForChild(e){return tr(this.path)?new Lb(this.source,Dr()):new Lb(this.source,oi(this.path))}}class Kp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=gl.OVERWRITE}operationForChild(e){return tr(this.path)?new Kp(this.source,Dr(),this.snap.getImmediateChild(e)):new Kp(this.source,oi(this.path),this.snap)}}class U_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=gl.MERGE}operationForChild(e){if(tr(this.path)){const t=this.children.subtree(new Ur(e));return t.isEmpty()?null:t.value?new Kp(this.source,Dr(),t.value):new U_(this.source,Dr(),t)}return(0,ae.hu)(er(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new U_(this.source,oi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tr(e))return this.isFullyInitialized()&&!this.filtered_;const t=er(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class hK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Bb(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,p)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,ae.g5)("Should only compare child_ events.");const r=new rr(e.childName,e.snapshotNode),i=new rr(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),u.forEach(h=>{const p=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function sS(n,e){return{eventCache:n,serverCache:e}}function Vb(n,e,t,r){return sS(new Dh(e,t,r),n.serverCache)}function g3(n,e,t,r){return sS(n.eventCache,new Dh(e,t,r))}function oS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mO;class hi{constructor(e,t=(()=>(mO||(mO=new ha(J8)),mO))()){this.value=e,this.children=t}static fromObject(e){let t=new hi(null);return Ls(e,(r,i)=>{t=t.set(new Ur(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Dr(),value:this.value};if(tr(e))return null;{const r=er(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(oi(e),t);return null!=s?{path:Ii(new Ur(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tr(e))return this;{const t=er(e),r=this.children.get(t);return null!==r?r.subtree(oi(e)):new hi(null)}}set(e,t){if(tr(e))return new hi(t,this.children);{const r=er(e),s=(this.children.get(r)||new hi(null)).set(oi(e),t),u=this.children.insert(r,s);return new hi(this.value,u)}}remove(e){if(tr(e))return this.children.isEmpty()?new hi(null):new hi(null,this.children);{const t=er(e),r=this.children.get(t);if(r){const i=r.remove(oi(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new hi(null):new hi(this.value,s)}return this}}get(e){if(tr(e))return this.value;{const t=er(e),r=this.children.get(t);return r?r.get(oi(e)):null}}setTree(e,t){if(tr(e))return t;{const r=er(e),s=(this.children.get(r)||new hi(null)).setTree(oi(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new hi(this.value,u)}}fold(e){return this.fold_(Dr(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ii(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Dr(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tr(e))return null;{const s=er(e),u=this.children.get(s);return u?u.findOnPath_(oi(e),Ii(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Dr(),t)}foreachOnPath_(e,t,r){if(tr(e))return this;{this.value&&r(t,this.value);const i=er(e),s=this.children.get(i);return s?s.foreachOnPath_(oi(e),Ii(t,i),r):new hi(null)}}foreach(e){this.foreach_(Dr(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ii(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class cc{constructor(e){this.writeTree_=e}static empty(){return new cc(new hi(null))}}function Ub(n,e,t){if(tr(e))return new cc(new hi(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=Ho(i,e);return s=s.updateChild(u,t),new cc(n.writeTree_.set(i,s))}{const i=new hi(t),s=n.writeTree_.setTree(e,i);return new cc(s)}}}function gO(n,e,t){let r=n;return Ls(t,(i,s)=>{r=Ub(r,Ii(e,i),s)}),r}function _3(n,e){if(tr(e))return cc.empty();{const t=n.writeTree_.setTree(e,new hi(null));return new cc(t)}}function _O(n,e){return null!=Qp(n,e)}function Qp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ho(t.path,e)):null}function y3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(di,(r,i)=>{e.push(new rr(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new rr(r,i.value))}),e}function Ah(n,e){if(tr(e))return n;{const t=Qp(n,e);return new cc(null!=t?new hi(t):n.writeTree_.subtree(e))}}function yO(n){return n.writeTree_.isEmpty()}function j_(n,e){return v3(Dr(),n.writeTree_,e)}function v3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,ae.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=v3(Ii(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ii(n,".priority"),r)),t}}function aS(n,e){return I3(e,n)}function wK(n,e){if(n.snap)return ml(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ml(Ii(n.path,t),e))return!0;return!1}function CK(n){return n.visible}function b3(n,e,t){let r=cc.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)ml(t,u)?(h=Ho(t,u),r=Ub(r,h,s.snap)):ml(u,t)&&(h=Ho(u,t),r=Ub(r,Dr(),s.snap.getChild(h)));else{if(!s.children)throw(0,ae.g5)("WriteRecord should have .snap or .children");if(ml(t,u))h=Ho(t,u),r=gO(r,h,s.children);else if(ml(u,t))if(h=Ho(u,t),tr(h))r=gO(r,Dr(),s.children);else{const p=(0,ae.DV)(s.children,er(h));if(p){const y=p.getChild(oi(h));r=Ub(r,Dr(),y)}}}}}return r}function w3(n,e,t,r,i){if(r||i){const s=Ah(n.visibleWrites,e);return!i&&yO(s)?t:i||null!=t||_O(s,Dr())?j_(b3(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(ml(y.path,e)||ml(e,y.path))},e),t||Ln.EMPTY_NODE):null}{const s=Qp(n.visibleWrites,e);if(null!=s)return s;{const u=Ah(n.visibleWrites,e);return yO(u)?t:null!=t||_O(u,Dr())?j_(u,t||Ln.EMPTY_NODE):null}}}function lS(n,e,t,r){return w3(n.writeTree,n.treePath,e,t,r)}function vO(n,e){return function(n,e,t){let r=Ln.EMPTY_NODE;const i=Qp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(di,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Ah(n.visibleWrites,e);return t.forEachChild(di,(u,h)=>{const p=j_(Ah(s,new Ur(u)),h);r=r.updateImmediateChild(u,p)}),y3(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return y3(Ah(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function E3(n,e,t,r){return function(n,e,t,r,i){(0,ae.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ii(e,t);if(_O(n.visibleWrites,s))return null;{const u=Ah(n.visibleWrites,s);return yO(u)?i.getChild(t):j_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function cS(n,e){return function(n,e){return Qp(n.visibleWrites,e)}(n.writeTree,Ii(n.treePath,e))}function bO(n,e,t){return function(n,e,t,r){const i=Ii(e,t),s=Qp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?j_(Ah(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function C3(n,e){return I3(Ii(n.treePath,e),n.writeTree)}function I3(n,e){return{treePath:n,writeTree:e}}class kK{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,ae.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ae.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Nb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Pb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,B_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,ae.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Nb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const T3=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class wO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yp(this.viewCache_),s=function(n,e,t,r,i,s){return function(n,e,t,r,i,s,u){let h;const p=Ah(n.visibleWrites,e),y=Qp(p,Dr());if(null!=y)h=y;else{if(null==t)return[];h=j_(p,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const I=[],x=u.getCompare(),$=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let oe=$.getNext();for(;oe&&I.length<i;)0!==x(oe,r)&&I.push(oe),oe=$.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function S3(n,e,t,r,i,s){const u=e.eventCache;if(null!=cS(r,t))return e;{let h,p;if(tr(t))if((0,ae.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Yp(e),x=vO(r,y instanceof Ln?y:Ln.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),x,s)}else{const y=lS(r,Yp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=er(t);if(".priority"===y){(0,ae.hu)(1===Sh(t),"Can't have a priority with additional path components");const I=u.getNode();p=e.serverCache.getNode();const x=E3(r,t,I,p);h=null!=x?n.filter.updatePriority(I,x):u.getNode()}else{const I=oi(t);let x;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const $=E3(r,t,u.getNode(),p);x=null!=$?u.getNode().getImmediateChild(y).updateChild(I,$):u.getNode().getImmediateChild(y)}else x=bO(r,y,e.serverCache);h=null!=x?n.filter.updateChild(u.getNode(),y,x,I,i,s):u.getNode()}}return Vb(e,h,u.isFullyInitialized()||tr(t),n.filter.filtersNodes())}}function uS(n,e,t,r,i,s,u,h){const p=e.serverCache;let y;const I=u?n.filter:n.filter.getIndexedFilter();if(tr(t))y=I.updateFullNode(p.getNode(),r,null);else if(I.filtersNodes()&&!p.isFiltered()){const oe=p.getNode().updateChild(t,r);y=I.updateFullNode(p.getNode(),oe,null)}else{const oe=er(t);if(!p.isCompleteForPath(t)&&Sh(t)>1)return e;const ve=oi(t),ot=p.getNode().getImmediateChild(oe).updateChild(ve,r);y=".priority"===oe?I.updatePriority(p.getNode(),ot):I.updateChild(p.getNode(),oe,ot,ve,T3,null)}const x=g3(e,y,p.isFullyInitialized()||tr(t),I.filtersNodes());return S3(n,x,t,i,new wO(i,x,s),h)}function EO(n,e,t,r,i,s,u){const h=e.eventCache;let p,y;const I=new wO(i,e,s);if(tr(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=Vb(e,y,!0,n.filter.filtersNodes());else{const x=er(t);if(".priority"===x)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=Vb(e,y,h.isFullyInitialized(),h.isFiltered());else{const $=oi(t),oe=h.getNode().getImmediateChild(x);let ve;if(tr($))ve=r;else{const Ge=I.getCompleteChild(x);ve=null!=Ge?".priority"===XR($)&&Ge.getChild(Qj($)).isEmpty()?Ge:Ge.updateChild($,r):Ln.EMPTY_NODE}p=oe.equals(ve)?e:Vb(e,n.filter.updateChild(h.getNode(),x,ve,$,I,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function D3(n,e){return n.eventCache.isCompleteForChild(e)}function A3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function CO(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=tr(t)?r:new hi(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((x,$)=>{if(I.hasChild(x)){const ve=A3(0,e.serverCache.getNode().getImmediateChild(x),$);p=uS(n,p,new Ur(x),ve,i,s,u,h)}}),y.children.inorderTraversal((x,$)=>{const oe=!e.serverCache.isCompleteForChild(x)&&void 0===$.value;if(!I.hasChild(x)&&!oe){const Ge=A3(0,e.serverCache.getNode().getImmediateChild(x),$);p=uS(n,p,new Ur(x),Ge,i,s,u,h)}}),p}class jK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new aO(r.getIndex()),s=function(n){return n.loadsAllData()?new aO(n.getIndex()):n.hasLimit()?new eK(n):new Fb(n)}(r);this.processor_=function(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,p=i.updateFullNode(Ln.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Ln.EMPTY_NODE,h.getNode(),null),I=new Dh(p,u.isFullyInitialized(),i.filtersNodes()),x=new Dh(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=sS(x,I),this.eventGenerator_=new hK(this.query_)}get query(){return this.query_}}function GK(n,e){const t=Yp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tr(e)&&!t.getImmediateChild(er(e)).isEmpty())?t.getChild(e):null}function x3(n){return 0===n.eventRegistrations_.length}function M3(n,e,t){const r=[];if(t){(0,ae.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function k3(n,e,t,r){e.type===gl.MERGE&&null!==e.source.queryId&&((0,ae.hu)(Yp(n.viewCache_),"We should always have a full cache before handling merges"),(0,ae.hu)(oS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function(n,e,t,r,i){const s=new kK;let u,h;if(t.type===gl.OVERWRITE){const y=t;y.source.fromUser?u=EO(n,e,y.path,y.snap,r,i,s):((0,ae.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!tr(y.path),u=uS(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===gl.MERGE){const y=t;y.source.fromUser?u=function(n,e,t,r,i,s,u){let h=e;return r.foreach((p,y)=>{const I=Ii(t,p);D3(e,er(I))&&(h=EO(n,h,I,y,i,s,u))}),r.foreach((p,y)=>{const I=Ii(t,p);D3(e,er(I))||(h=EO(n,h,I,y,i,s,u))}),h}(n,e,y.path,y.children,r,i,s):((0,ae.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=CO(n,e,y.path,y.children,r,i,h,s))}else if(t.type===gl.ACK_USER_WRITE){const y=t;u=y.revert?function(n,e,t,r,i,s){let u;if(null!=cS(r,t))return e;{const h=new wO(r,e,i),p=e.eventCache.getNode();let y;if(tr(t)||".priority"===er(t)){let I;if(e.serverCache.isFullyInitialized())I=lS(r,Yp(e));else{const x=e.serverCache.getNode();(0,ae.hu)(x instanceof Ln,"serverChildren would be complete if leaf node"),I=vO(r,x)}I=I,y=n.filter.updateFullNode(p,I,s)}else{const I=er(t);let x=bO(r,I,e.serverCache);null==x&&e.serverCache.isCompleteForChild(I)&&(x=p.getImmediateChild(I)),y=null!=x?n.filter.updateChild(p,I,x,oi(t),h,s):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(p,I,Ln.EMPTY_NODE,oi(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=lS(r,Yp(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=cS(r,Dr()),Vb(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function(n,e,t,r,i,s,u){if(null!=cS(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(tr(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return uS(n,e,t,p.getNode().getChild(t),i,s,h,u);if(tr(t)){let y=new hi(null);return p.getNode().forEachChild(nu,(I,x)=>{y=y.set(new Ur(I),x)}),CO(n,e,t,y,i,s,h,u)}return e}{let y=new hi(null);return r.foreach((I,x)=>{const $=Ii(t,I);p.isCompleteForPath($)&&(y=y.set(I,p.getNode().getChild($)))}),CO(n,e,t,y,i,s,h,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==gl.LISTEN_COMPLETE)throw(0,ae.g5)("Unknown operation type: "+t.type);u=function(n,e,t,r,i){const s=e.serverCache;return S3(n,g3(e,s.getNode(),s.isFullyInitialized()||tr(t),s.isFiltered()),t,r,T3,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(h3(oS(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function(n,e){(0,ae.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ae.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,ae.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,R3(n,s.changes,s.viewCache.eventCache.getNode(),null)}function R3(n,e,t,r){return function(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Bb(n,i,"child_removed",e,r,t),Bb(n,i,"child_added",e,r,t),Bb(n,i,"child_moved",s,r,t),Bb(n,i,"child_changed",e,r,t),Bb(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dS,fS;class O3{constructor(){this.views=new Map}}function IO(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,ae.hu)(null!=s,"SyncTree gave us an op for an invalid query."),k3(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(k3(u,e,t,r));return s}}function P3(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=lS(t,i?r:null),p=!1;h?p=!0:r instanceof Ln?(h=vO(t,r),p=!1):(h=Ln.EMPTY_NODE,p=!1);const y=sS(new Dh(h,p,!1),new Dh(r,i,!1));return new jK(e,y)}return u}function N3(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function xh(n,e){let t=null;for(const r of n.views.values())t=t||GK(r,e);return t}function F3(n,e){return e._queryParams.loadsAllData()?hS(n):n.views.get(e._queryIdentifier)}function L3(n,e){return null!=F3(n,e)}function Mh(n){return null!=hS(n)}function hS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let eY=1;class B3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new hi(null),this.pendingWriteTree_={visibleWrites:cc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TO(n,e,t,r,i){return function(n,e,t,r,i){(0,ae.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ub(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?H_(n,new Kp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function kh(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,ae.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&wK(h,r.path)?i=!1:ml(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function(n){n.visibleWrites=b3(n.allWrites,CK,Dr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=_3(n.visibleWrites,r.path):Ls(r.children,p=>{n.visibleWrites=_3(n.visibleWrites,Ii(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new hi(null);return null!=r.snap?s=s.set(Dr(),!0):Ls(r.children,u=>{s=s.set(new Ur(u),!0)}),H_(n,new iS(r.path,s,t))}return[]}function jb(n,e,t){return H_(n,new Kp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function SO(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let u=[];if(s&&("default"===e._queryIdentifier||L3(s,e))){const h=function(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=Mh(n);if("default"===i)for(const[p,y]of n.views.entries())u=u.concat(M3(y,t,r)),x3(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(u=u.concat(M3(p,t,r)),x3(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Mh(n)&&s.push(new((0,ae.hu)(dS,"Reference.ts has not been loaded"),dS)(e._repo,e._path)),{removed:s,events:u}}(s,e,t,r);(function(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;u=h.events;const y=-1!==p.findIndex(x=>x._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(i,(x,$)=>Mh($));if(y&&!I){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const $=function(n){return n.fold((e,t,r)=>{if(t&&Mh(t))return[hS(t)];{let i=[];return t&&(i=N3(t)),Ls(r,(s,u)=>{i=i.concat(u)}),i}})}(x);for(let oe=0;oe<$.length;++oe){const ve=$[oe],Ge=ve.query,ot=H3(n,ve);n.listenProvider_.startListening(Hb(Ge),mS(n,Ge),ot.hashFn,ot.onComplete)}}}if(!I&&p.length>0&&!r)if(y){const x=null;n.listenProvider_.stopListening(Hb(e),x)}else p.forEach(x=>{const $=n.queryToTagMap.get(gS(x));n.listenProvider_.stopListening(Hb(x),$)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=gS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return u}function V3(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(x,$)=>{const oe=Ho(x,r);i=i||xh($,oe),s=s||Mh($)});let h,u=n.syncPointTree_.get(r);u?(s=s||Mh(u),i=i||xh(u,Dr())):(u=new O3,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=Ln.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild(($,oe)=>{const ve=xh(oe,Dr());ve&&(i=i.updateImmediateChild($,ve))}));const p=L3(u,e);if(!p&&!e._queryParams.loadsAllData()){const x=gS(e);(0,ae.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const $=eY++;n.queryToTagMap.set(x,$),n.tagToQueryMap.set($,x)}let I=function(n,e,t,r,i,s){const u=P3(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(di,(s,u)=>{r.push(B_(s,u))}),t.isFullyInitialized()&&r.push(h3(t.getNode())),R3(n,r,t.getNode(),e)}(u,t)}(u,e,t,aS(n.pendingWriteTree_,r),i,h);if(!p&&!s){const x=F3(u,e);I=I.concat(function(n,e,t){const r=e._path,i=mS(n,e),s=H3(n,t),u=n.listenProvider_.startListening(Hb(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,ae.hu)(!Mh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,I,x)=>{if(!tr(y)&&I&&Mh(I))return[hS(I).query];{let $=[];return I&&($=$.concat(N3(I).map(oe=>oe.query))),Ls(x,(oe,ve)=>{$=$.concat(ve)}),$}});for(let y=0;y<p.length;++y){const I=p[y];n.listenProvider_.stopListening(Hb(I),mS(n,I))}}return u}(n,e,x))}return I}function pS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=xh(h,Ho(u,e));if(y)return y});return w3(i,e,s,t,!0)}function H_(n,e){return U3(e,n.syncPointTree_,null,aS(n.pendingWriteTree_,Dr()))}function U3(n,e,t,r){if(tr(n.path))return j3(n,e,t,r);{const i=e.get(Dr());null==t&&null!=i&&(t=xh(i,Dr()));let s=[];const u=er(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const y=t?t.getImmediateChild(u):null,I=C3(r,u);s=s.concat(U3(h,p,y,I))}return i&&(s=s.concat(IO(i,n,r,t))),s}}function j3(n,e,t,r){const i=e.get(Dr());null==t&&null!=i&&(t=xh(i,Dr()));let s=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,y=C3(r,u),I=n.operationForChild(u);I&&(s=s.concat(j3(I,h,p,y)))}),i&&(s=s.concat(IO(i,n,r,t))),s}function H3(n,e){const t=e.query,r=mS(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Ln.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=DO(n,t);if(r){const i=AO(r),s=i.path,u=i.queryId,h=Ho(s,e);return xO(n,s,new Lb(pO(u),h))}return[]}(n,t._path,r):function(n,e){return H_(n,new Lb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return SO(n,t,null,s)}}}}function mS(n,e){const t=gS(e);return n.queryToTagMap.get(t)}function gS(n){return n._path.toString()+"$"+n._queryIdentifier}function DO(n,e){return n.tagToQueryMap.get(e)}function AO(n){const e=n.indexOf("$");return(0,ae.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ur(n.substr(0,e))}}function xO(n,e,t){const r=n.syncPointTree_.get(e);return(0,ae.hu)(r,"Missing sync point for query tag that we're tracking"),IO(r,t,aS(n.pendingWriteTree_,e),null)}function Hb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,ae.hu)(fS,"Reference.ts has not been loaded"),fS)(n._repo,n._path):n}class MO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new MO(t)}node(){return this.node_}}class kO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ii(this.path_,e);return new kO(this.syncTree_,t)}node(){return pS(this.syncTree_,this.path_)}}const z3=function(n,e,t){return n&&"object"==typeof n?((0,ae.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fY(n[".sv"],e,t):"object"==typeof n[".sv"]?pY(n[".sv"],e):void(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fY=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ae.hu)(!1,"Unexpected server value: "+n)},pY=function(n,e,t){n.hasOwnProperty("increment")||(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ae.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,ae.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},G3=function(n,e,t,r){return OO(e,new kO(t,n),r)},RO=function(n,e,t){return OO(n,new MO(e),t)};function OO(n,e,t){const r=n.getPriority().val(),i=z3(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=z3(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new N_(h,ki(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new N_(i))),u.forEachChild(di,(h,p)=>{const y=OO(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class PO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function _S(n,e){let t=e instanceof Ur?e:new Ur(e),r=n,i=er(t);for(;null!==i;){const s=(0,ae.DV)(r.node.children,i)||{children:{},childCount:0};r=new PO(i,r,s),t=oi(t),i=er(t)}return r}function Xp(n){return n.node.value}function NO(n,e){n.node.value=e,FO(n)}function $3(n){return n.node.childCount>0}function yS(n,e){Ls(n.node.children,(t,r)=>{e(new PO(t,n,r))})}function W3(n,e,t,r){t&&!r&&e(n),yS(n,i=>{W3(i,e,!0,r)}),t&&r&&e(n)}function zb(n){return new Ur(null===n.parent?n.name:zb(n.parent)+"/"+n.name)}function FO(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Xp(n)&&!$3(n)}(t),i=(0,ae.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,FO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,FO(n))}(n.parent,n.name,n)}const yY=/[\[\].#$\/\u0000-\u001F\u007F]/,vY=/[\[\].#$\u0000-\u001F\u007F]/,LO=10485760,vS=function(n){return"string"==typeof n&&0!==n.length&&!yY.test(n)},q3=function(n){return"string"==typeof n&&0!==n.length&&!vY.test(n)},Gb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!$T(n)||n&&"object"==typeof n&&(0,ae.r3)(n,".sv")},ru=function(n,e,t,r){r&&void 0===e||$b((0,ae.gK)(n,"value"),e,t)},$b=function(n,e,t){const r=t instanceof Ur?new OZ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+qp(r));if("function"==typeof e)throw new Error(n+"contains a function "+qp(r)+" with contents = "+e.toString());if($T(e))throw new Error(n+"contains "+e.toString()+" "+qp(r));if("string"==typeof e&&e.length>LO/3&&(0,ae.ug)(e)>LO)throw new Error(n+"contains a string greater than "+LO+" utf8 bytes "+qp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ls(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!vS(u)))throw new Error(n+" contains an invalid key ("+u+") "+qp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ae.ug)(e),Xj(n)})(r,u),$b(n,h,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,ae.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+qp(r)+" in addition to actual children.")}},Z3=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,ae.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ls(e,(u,h)=>{const p=new Ur(u);if($b(i,h,Ii(t,p)),".priority"===XR(p)&&!Gb(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Mb(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!vS(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(RZ);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ml(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},BO=function(n,e,t){if(!t||void 0!==e){if($T(e))throw new Error((0,ae.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gb(e))throw new Error((0,ae.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wb=function(n,e,t,r){if(!(r&&void 0===t||vS(t)))throw new Error((0,ae.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qb=function(n,e,t,r){if(!(r&&void 0===t||q3(t)))throw new Error((0,ae.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_l=function(n,e){if(".info"===er(e))throw new Error(n+" failed = Can't modify data under /.info/")},K3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),q3(n)}(t))throw new Error((0,ae.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class CY{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!JR(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function VO(n,e,t){bS(n,t),Y3(n,r=>JR(r,e))}function yl(n,e,t){bS(n,t),Y3(n,r=>ml(r,e)||ml(e,r))}function Y3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(IY(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function IY(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$p&&Fs("event: "+t.toString()),O_(r)}}}const Q3="repo_interrupt";class SY{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CY,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rS(),this.transactionQueueTree_=new PO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X3(n){const t=n.infoData_.getNode(new Ur(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Zb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:X3(n)})}function J3(n,e,t,r,i){n.dataUpdateCount++;const s=new Ur(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,ae.UI)(t,y=>ki(y));u=function(n,e,t,r){const i=DO(n,r);if(i){const s=AO(i),u=s.path,h=s.queryId,p=Ho(u,e),y=hi.fromObject(t);return xO(n,u,new U_(pO(h),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=ki(t);u=function(n,e,t,r){const i=DO(n,r);if(null!=i){const s=AO(i),u=s.path,h=s.queryId,p=Ho(u,e);return xO(n,u,new Kp(pO(h),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,ae.UI)(t,y=>ki(y));u=function(n,e,t){const r=hi.fromObject(t);return H_(n,new U_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=ki(t);u=jb(n.serverSyncTree_,s,p)}let h=s;u.length>0&&(h=G_(n,s)),yl(n.eventQueue_,h,u)}function eH(n,e){UO(n,"connected",e),!1===e&&function(n){z_(n,"onDisconnectEvents");const e=Zb(n),t=rS();dO(n.onDisconnect_,Dr(),(i,s)=>{const u=G3(i,s,n.serverSyncTree_,e);V_(t,i,u)});let r=[];dO(t,Dr(),(i,s)=>{r=r.concat(jb(n.serverSyncTree_,i,s));const u=GO(n,i);G_(n,u)}),n.onDisconnect_=rS(),yl(n.eventQueue_,Dr(),r)}(n)}function UO(n,e,t){const r=new Ur("/.info/"+e),i=ki(t);n.infoData_.updateSnapshot(r,i);const s=jb(n.infoSyncTree_,r,i);yl(n.eventQueue_,r,s)}function wS(n){return n.nextWriteId_++}function jO(n,e,t,r,i){z_(n,"set",{path:e.toString(),value:t,priority:r});const s=Zb(n),u=ki(t,r),h=pS(n.serverSyncTree_,e),p=RO(u,h,s),y=wS(n),I=TO(n.serverSyncTree_,e,p,y,!0);bS(n.eventQueue_,I),n.server_.put(e.toString(),u.val(!0),($,oe)=>{const ve="ok"===$;ve||Eo("set at "+e+" failed: "+$);const Ge=kh(n.serverSyncTree_,y,!ve);yl(n.eventQueue_,e,Ge),Rh(0,i,$,oe)});const x=GO(n,e);G_(n,x),yl(n.eventQueue_,x,[])}function RY(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&uO(n.onDisconnect_,e),Rh(0,t,r,i)})}function tH(n,e,t,r){const i=ki(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&V_(n.onDisconnect_,e,i),Rh(0,r,s,u)})}function HO(n,e,t){let r;r=".info"===er(e._path)?SO(n.infoSyncTree_,e,t):SO(n.serverSyncTree_,e,t),VO(n.eventQueue_,e._path,r)}function nH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Q3)}function z_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Fs(t,...e)}function Rh(n,e,t,r){e&&O_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function zO(n,e,t){return pS(n.serverSyncTree_,e,t)||Ln.EMPTY_NODE}function ES(n,e=n.transactionQueueTree_){if(e||CS(n,e),Xp(e)){const t=iH(n,e);(0,ae.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(y=>y.currentWriteId),i=zO(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,ae.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const x=Ho(e,I.path);s=s.updateChild(x,I.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{z_(n,"transaction put response",{path:p.toString(),status:y});let I=[];if("ok"===y){const x=[];for(let $=0;$<t.length;$++)t[$].status=2,I=I.concat(kh(n.serverSyncTree_,t[$].currentWriteId)),t[$].onComplete&&x.push(()=>t[$].onComplete(null,!0,t[$].currentOutputSnapshotResolved)),t[$].unwatcher();CS(n,_S(n.transactionQueueTree_,e)),ES(n,n.transactionQueueTree_),yl(n.eventQueue_,e,I);for(let $=0;$<x.length;$++)O_(x[$])}else{if("datastale"===y)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Eo("transaction at "+p.toString()+" failed: "+y);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=y}G_(n,e)}},u)}(n,zb(e),t)}else $3(e)&&yS(e,t=>{ES(n,t)})}function G_(n,e){const t=rH(n,e),r=zb(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=Ho(t,p.path);let x,I=!1;if((0,ae.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)I=!0,x=p.abortReason,i=i.concat(kh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)I=!0,x="maxretry",i=i.concat(kh(n.serverSyncTree_,p.currentWriteId,!0));else{const $=zO(n,p.path,u);p.currentInputSnapshot=$;const oe=e[h].update($.val());if(void 0!==oe){$b("transaction failed: Data returned ",oe,p.path);let ve=ki(oe);"object"==typeof oe&&null!=oe&&(0,ae.r3)(oe,".priority")||(ve=ve.updatePriority($.getPriority()));const ot=p.currentWriteId,Tt=Zb(n),jt=RO(ve,$,Tt);p.currentOutputSnapshotRaw=ve,p.currentOutputSnapshotResolved=jt,p.currentWriteId=wS(n),u.splice(u.indexOf(ot),1),i=i.concat(TO(n.serverSyncTree_,p.path,jt,p.currentWriteId,p.applyLocally)),i=i.concat(kh(n.serverSyncTree_,ot,!0))}else I=!0,x="nodata",i=i.concat(kh(n.serverSyncTree_,p.currentWriteId,!0))}yl(n.eventQueue_,t,i),i=[],I&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===x?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(x),!1,null)))}CS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)O_(r[h]);ES(n,n.transactionQueueTree_)}(n,iH(n,t),r),r}function rH(n,e){let t,r=n.transactionQueueTree_;for(t=er(e);null!==t&&void 0===Xp(r);)r=_S(r,t),t=er(e=oi(e));return r}function iH(n,e){const t=[];return sH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function sH(n,e,t){const r=Xp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yS(e,i=>{sH(n,i,t)})}function CS(n,e){const t=Xp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,NO(e,t.length>0?t:void 0)}yS(e,r=>{CS(n,r)})}function GO(n,e){const t=zb(rH(n,e)),r=_S(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{$O(n,i)}),$O(n,r),W3(r,i=>{$O(n,i)}),t}function $O(n,e){const t=Xp(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,ae.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,ae.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(kh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?NO(e,void 0):t.length=s+1,yl(n.eventQueue_,zb(e),i);for(let u=0;u<r.length;u++)O_(r[u])}}const WO=function(n,e){const t=HY(n),r=t.namespace;return"firebase.com"===t.domain&&eu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&eu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new WR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ur(t.pathString)}},HY=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(I,x)),I<x&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(I,x)));const $=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Eo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const oe=e.slice(0,y);if("localhost"===oe.toLowerCase())t="localhost";else if(oe.split(".").length<=2)t=oe;else{const ve=e.indexOf(".");r=e.substring(0,ve).toLowerCase(),t=e.substring(ve+1),s=r}"ns"in $&&(s=$.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class oH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ae.Pz)(this.snapshot.exportVal())}}class aH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class lH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,ae.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class cH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new ae.BH;return RY(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_l("OnDisconnect.remove",this._path);const e=new ae.BH;return tH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_l("OnDisconnect.set",this._path),ru("OnDisconnect.set",e,this._path,!1);const t=new ae.BH;return tH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_l("OnDisconnect.setWithPriority",this._path),ru("OnDisconnect.setWithPriority",e,this._path,!1),BO("OnDisconnect.setWithPriority",t,!1);const r=new ae.BH;return function(n,e,t,r,i){const s=ki(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&V_(n.onDisconnect_,e,s),Rh(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_l("OnDisconnect.update",this._path),Z3("OnDisconnect.update",e,this._path,!1);const t=new ae.BH;return function(n,e,t,r){if((0,ae.xb)(t))return Fs("onDisconnect().update() called with empty data.  Don't do anything."),void Rh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Ls(t,(u,h)=>{const p=ki(h);V_(n.onDisconnect_,Ii(e,u),p)}),Rh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fa{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tr(this._path)?null:XR(this._path)}get ref(){return new vl(this._repo,this._path)}get _queryIdentifier(){const e=p3(this._queryParams),t=zR(e);return"{}"===t?"default":t}get _queryObject(){return p3(this._queryParams)}isEqual(e){if(!((e=(0,ae.m9)(e))instanceof fa))return!1;const t=this._repo===e._repo,r=JR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function IS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Oh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===nu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ed)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==tu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===di){if(null!=e&&!Gb(e)||null!=t&&!Gb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ae.hu)(n.getIndex()instanceof iO||n.getIndex()===sO,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function TS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vl extends fa{constructor(e,t){super(e,t,new eS,!1)}get parent(){const e=Qj(this._path);return null===e?null:new vl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Jp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ur(e),r=em(this.ref,e);return new Jp(this._node.getChild(t),r,di)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Jp(i,em(this.ref,r),di)))}hasChild(e){const t=new Ur(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uH(n,e){return(n=(0,ae.m9)(n))._checkNotDeleted("ref"),void 0!==e?em(n._root,e):n._root}function dH(n,e){(n=(0,ae.m9)(n))._checkNotDeleted("refFromURL");const t=WO(e,n._repo.repoInfo_.nodeAdmin);K3("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&eu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),uH(n,t.path.toString())}function em(n,e){return null===er((n=(0,ae.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qb("child","path",t,!1)):qb("child","path",e,!1),new vl(n._repo,Ii(n._path,e));var t}function qO(n,e){n=(0,ae.m9)(n),_l("set",n._path),ru("set",e,n._path,!1);const t=new ae.BH;return jO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qY(n,e){Z3("update",e,n._path,!1);const t=new ae.BH;return function(n,e,t,r){z_(n,"update",{path:e.toString(),value:t});let i=!0;const s=Zb(n),u={};if(Ls(t,(h,p)=>{i=!1,u[h]=G3(Ii(e,h),ki(p),n.serverSyncTree_,s)}),i)Fs("update() called with empty data.  Don't do anything."),Rh(0,r,"ok",void 0);else{const h=wS(n),p=function(n,e,t,r){!function(n,e,t,r){(0,ae.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=gO(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=hi.fromObject(t);return H_(n,new U_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);bS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,I)=>{const x="ok"===y;x||Eo("update at "+e+" failed: "+y);const $=kh(n.serverSyncTree_,h,!x),oe=$.length>0?G_(n,e):e;yl(n.eventQueue_,oe,$),Rh(0,r,y,I)}),Ls(t,y=>{const I=GO(n,Ii(e,y));G_(n,I)}),yl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ZY(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const x=Ho(y,t);r=r||xh(I,x)});let i=n.syncPointTree_.get(t);i?r=r||xh(i,Dr()):(i=new O3,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new Dh(r,!0,!1):null;return function(n){return oS(n.viewCache_)}(P3(i,e,aS(n.pendingWriteTree_,e._path),s?u.getNode():Ln.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=ki(r).withIndex(e._queryParams.getIndex()),s=jb(n.serverSyncTree_,e._path,i);return VO(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(z_(n,"get for query "+(0,ae.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,ae.m9)(n))._repo,n).then(e=>new Jp(e,new vl(n._repo,n._path),n._queryParams.getIndex()))}class SS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new oH("value",this,new Jp(e.snapshotNode,new vl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aH(this,e,t):null}matches(e){return e instanceof SS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class DS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aH(this,e,t):null}createEvent(e,t){(0,ae.hu)(null!=e.childName,"Child events should have a childName.");const r=em(new vl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new oH(e.type,this,new Jp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof DS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Kb(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(I,x)=>{HO(n._repo,n,h),p(I,x)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new lH(t,s||void 0),h="value"===e?new SS(u):new DS(e,u);return function(n,e,t){let r;r=".info"===er(e._path)?V3(n.infoSyncTree_,e,t):V3(n.serverSyncTree_,e,t),VO(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>HO(n._repo,n,h)}function ZO(n,e,t,r){return Kb(n,"value",e,t,r)}function hH(n,e,t,r){return Kb(n,"child_added",e,t,r)}function fH(n,e,t,r){return Kb(n,"child_changed",e,t,r)}function pH(n,e,t,r){return Kb(n,"child_moved",e,t,r)}function mH(n,e,t,r){return Kb(n,"child_removed",e,t,r)}function gH(n,e,t){let r=null;const i=t?new lH(t):null;"value"===e?r=new SS(i):e&&(r=new DS(e,i)),HO(n._repo,n,r)}class uc{}class _H extends uc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("endAt",this._value,e._path,!0);const t=cO(e._queryParams,this._value,this._key);if(TS(t),Oh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class YY extends uc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===nu?("string"==typeof e&&(e=d3(e)),i=cO(n,e,t)):(r=null==t?ed:d3(t),i=cO(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(TS(t),Oh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class yH extends uc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("startAt",this._value,e._path,!0);const t=lO(e._queryParams,this._value,this._key);if(TS(t),Oh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class JY extends uc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===nu)"string"==typeof e&&(e=u3(e)),r=lO(n,e,t);else{let i;i=null==t?tu:u3(t),r=lO(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(TS(t),Oh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class t7 extends uc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class r7 extends uc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class s7 extends uc{constructor(e){super(),this._path=e}_apply(e){IS(e,"orderByChild");const t=new Ur(this._path);if(tr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new iO(t),i=tS(e._queryParams,r);return Oh(i),new fa(e._repo,e._path,i,!0)}}class a7 extends uc{_apply(e){IS(e,"orderByKey");const t=tS(e._queryParams,nu);return Oh(t),new fa(e._repo,e._path,t,!0)}}class c7 extends uc{_apply(e){IS(e,"orderByPriority");const t=tS(e._queryParams,di);return Oh(t),new fa(e._repo,e._path,t,!0)}}class d7 extends uc{_apply(e){IS(e,"orderByValue");const t=tS(e._queryParams,sO);return Oh(t),new fa(e._repo,e._path,t,!0)}}class f7 extends uc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ru("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _H(this._value,this._key)._apply(new yH(this._value,this._key)._apply(e))}}function dc(n,...e){let t=(0,ae.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,ae.hu)(!dS,"__referenceConstructor has already been defined"),dS=n})(vl),function(n){(0,ae.hu)(!fS,"__referenceConstructor has already been defined"),fS=n}(vl);const KO={};function bH(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||eu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fs("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=WO(s,i),h=u.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,u=WO(s,i),h=u.repoInfo):p=!u.repoInfo.secure;const I=i&&p?new xb(xb.OWNER):new oZ(n.name,n.options,e);K3("Invalid Firebase Database URL",u),tr(u.path)||eu("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let i=KO[e.name];i||(i={},KO[e.name]=i);let s=i[n.toURLString()];return s&&eu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new SY(n,false,t,r),i[n.toURLString()]=s,s}(h,n,I,new sZ(n.name,t));return new b7(x,n)}class b7{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=KR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new nS(n.repoInfo_,(r,i,s,u)=>{J3(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>eH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ae.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zp(n.repoInfo_,e,(r,i,s,u)=>{J3(n,r,i,s,u)},r=>{eH(n,r)},r=>{!function(n,e){Ls(e,(t,r)=>{UO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return ZR[t]||(ZR[t]=e()),ZR[t]}(n.repoInfo_,()=>new dK(n.stats_,n.server_)),n.infoData_=new oK,n.infoSyncTree_=new B3({startListening:(r,i,s,u)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=jb(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),UO(n,"connected",!1),n.serverSyncTree_=new B3({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,p)=>{const y=u(h,p);yl(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vl(this._repo,Dr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=KO[e];(!t||t[n.key]!==n)&&eu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),nH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&eu("Cannot call "+e+" on a deleted database.")}}function wH(){Vj.IS_TRANSPORT_INITIALIZED&&Eo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function w7(){wH(),Th.forceDisallow()}function E7(){wH(),P_.forceDisallow(),Th.forceAllow()}function S7(n,e){vj(n,e)}class k7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},pj(Oa.SDK_VERSION),(0,Oa._registerComponent)(new rc.wA("database",(e,{instanceIdentifier:t})=>bH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Oa.registerVersion)(hj,"0.13.0",void 0),(0,Oa.registerVersion)(hj,"0.13.0","esm2017");const N7=new Pa.Yd("@firebase/database-compat"),EH=function(n){N7.warn("FIREBASE WARNING: "+n)};class B7{constructor(e){this._delegate=e}cancel(e){(0,ae.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ae.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,ae.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ae.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,ae.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ae.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,ae.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ae.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,ae.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,EH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ae.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class V7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,ae.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ph{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,ae.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ae.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ae.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ae.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,ae.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),qb("DataSnapshot.child","path",e,!1),new Ph(this._database,this._delegate.child(e))}hasChild(e){return(0,ae.Dv)("DataSnapshot.hasChild",1,1,arguments.length),qb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,ae.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,ae.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ae.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ph(this._database,t)))}hasChildren(){return(0,ae.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ae.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ae.Dv)("DataSnapshot.ref",0,0,arguments.length),new La(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Js{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,ae.Dv)("Query.on",2,4,arguments.length),(0,ae.Wj)("Query.on","callback",t,!1);const u=Js.getCancelAndContextArgs_("Query.on",r,i),h=(y,I)=>{t.call(u.context,new Ph(this.database,y),I)};h.userCallback=t,h.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return ZO(this._delegate,h,p),t;case"child_added":return hH(this._delegate,h,p),t;case"child_removed":return mH(this._delegate,h,p),t;case"child_changed":return fH(this._delegate,h,p),t;case"child_moved":return pH(this._delegate,h,p),t;default:throw new Error((0,ae.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,ae.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ae.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,ae.Wj)("Query.off","callback",t,!0),(0,ae.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,gH(this._delegate,e,i)}else gH(this._delegate,e)}get(){return ZY(this._delegate).then(e=>new Ph(this.database,e))}once(e,t,r,i){(0,ae.Dv)("Query.once",1,4,arguments.length),(0,ae.Wj)("Query.once","callback",t,!0);const s=Js.getCancelAndContextArgs_("Query.once",r,i),u=new ae.BH,h=(y,I)=>{const x=new Ph(this.database,y);t&&t.call(s.context,x,I),u.resolve(x)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":ZO(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":hH(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":mH(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":fH(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":pH(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,ae.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,ae.Dv)("Query.limitToFirst",1,1,arguments.length),new Js(this.database,dc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new t7(n)}(e)))}limitToLast(e){return(0,ae.Dv)("Query.limitToLast",1,1,arguments.length),new Js(this.database,dc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new r7(n)}(e)))}orderByChild(e){return(0,ae.Dv)("Query.orderByChild",1,1,arguments.length),new Js(this.database,dc(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qb("orderByChild","path",n,!1),new s7(n)}(e)))}orderByKey(){return(0,ae.Dv)("Query.orderByKey",0,0,arguments.length),new Js(this.database,dc(this._delegate,new a7))}orderByPriority(){return(0,ae.Dv)("Query.orderByPriority",0,0,arguments.length),new Js(this.database,dc(this._delegate,new c7))}orderByValue(){return(0,ae.Dv)("Query.orderByValue",0,0,arguments.length),new Js(this.database,dc(this._delegate,new d7))}startAt(e=null,t){return(0,ae.Dv)("Query.startAt",0,2,arguments.length),new Js(this.database,dc(this._delegate,function(n=null,e){return Wb("startAt","key",e,!0),new yH(n,e)}(e,t)))}startAfter(e=null,t){return(0,ae.Dv)("Query.startAfter",0,2,arguments.length),new Js(this.database,dc(this._delegate,function(n,e){return Wb("startAfter","key",e,!0),new JY(n,e)}(e,t)))}endAt(e=null,t){return(0,ae.Dv)("Query.endAt",0,2,arguments.length),new Js(this.database,dc(this._delegate,function(n,e){return Wb("endAt","key",e,!0),new _H(n,e)}(e,t)))}endBefore(e=null,t){return(0,ae.Dv)("Query.endBefore",0,2,arguments.length),new Js(this.database,dc(this._delegate,function(n,e){return Wb("endBefore","key",e,!0),new YY(n,e)}(e,t)))}equalTo(e,t){return(0,ae.Dv)("Query.equalTo",1,2,arguments.length),new Js(this.database,dc(this._delegate,function(n,e){return Wb("equalTo","key",e,!0),new f7(n,e)}(e,t)))}toString(){return(0,ae.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ae.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,ae.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Js))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,ae.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,ae.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,ae.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new La(this.database,new vl(this._delegate._repo,this._delegate._path))}}class La extends Js{constructor(e,t){super(e,new fa(t._repo,t._path,new eS,!1)),this.database=e,this._delegate=t}getKey(){return(0,ae.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,ae.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new La(this.database,em(this._delegate,e))}getParent(){(0,ae.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new La(this.database,e):null}getRoot(){return(0,ae.Dv)("Reference.root",0,0,arguments.length),new La(this.database,this._delegate.root)}set(e,t){(0,ae.Dv)("Reference.set",1,2,arguments.length),(0,ae.Wj)("Reference.set","onComplete",t,!0);const r=qO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,ae.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,EH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_l("Reference.update",this._delegate._path),(0,ae.Wj)("Reference.update","onComplete",t,!0);const r=qY(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,ae.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ae.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(_l("setWithPriority",n._path),ru("setWithPriority",e,n._path,!1),BO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new ae.BH;return jO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,ae.Dv)("Reference.remove",0,1,arguments.length),(0,ae.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return _l("remove",n._path),qO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,ae.Dv)("Reference.transaction",1,3,arguments.length),(0,ae.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,ae.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,ae.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,ae.m9)(n),_l("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new ae.BH,h=ZO(n,()=>{});return function(n,e,t,r,i,s){z_(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:gj(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=zO(n,e,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{$b("transaction failed: Data returned ",p,u.path),u.status=0;const y=_S(n.transactionQueueTree_,e),I=Xp(y)||[];let x;I.push(u),NO(y,I),"object"==typeof p&&null!==p&&(0,ae.r3)(p,".priority")?(x=(0,ae.DV)(p,".priority"),(0,ae.hu)(Gb(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(pS(n.serverSyncTree_,e)||Ln.EMPTY_NODE).getPriority().val();const $=Zb(n),oe=ki(p,x),ve=RO(oe,h,$);u.currentOutputSnapshotRaw=oe,u.currentOutputSnapshotResolved=ve,u.currentWriteId=wS(n);const Ge=TO(n.serverSyncTree_,e,ve,u.currentWriteId,u.applyLocally);yl(n.eventQueue_,e,Ge),ES(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,I)=>{let x=null;p?s.reject(p):(x=new Jp(I,new vl(n._repo,n._path),di),s.resolve(new k7(y,x)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new V7(s.committed,new Ph(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,ae.Dv)("Reference.setPriority",1,2,arguments.length),(0,ae.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,ae.m9)(n),_l("setPriority",n._path),BO("setPriority",e,!1);const t=new ae.BH;return jO(n._repo,Ii(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,ae.Dv)("Reference.push",0,2,arguments.length),(0,ae.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,ae.m9)(n),_l("push",n._path),ru("push",e,n._path,!0);const t=X3(n._repo),r=XZ(t),i=em(n,r),s=em(n,r);let u;return u=null!=e?qO(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new La(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new La(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return _l("Reference.onDisconnect",this._delegate._path),new B7(new cH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Yb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:w7,forceLongPolling:E7}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,ae.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&eu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&eu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xb(xb.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,ae.Sg)(r.mockUserToken,n.app.options.projectId);s=new xb(u)}!function(n,e,t,r){n.repoInfo_=new WR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,ae.Dv)("database.ref",0,1,arguments.length),e instanceof La){const t=dH(this._delegate,e.toString());return new La(this,t)}{const t=uH(this._delegate,e);return new La(this,t)}}refFromURL(e){(0,ae.Dv)("database.refFromURL",1,1,arguments.length);const r=dH(this._delegate,e);return new La(this,r)}goOffline(){return(0,ae.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,ae.m9)(n))._checkNotDeleted("goOffline"),nH(n._repo)}(this._delegate)}goOnline(){return(0,ae.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,ae.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(Q3)}(n._repo)}(this._delegate)}}Yb.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var j7=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){pj(t);const u=new rc.zt("auth-internal",new rc.H0("database-standalone"));return u.setComponent(new rc.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Yb(bH(n,u,void 0,e,s),n),namespace:i}}});const H7=Yb.ServerValue;function CH(n){return null==n}function IH(n){return"function"==typeof n.set}function TH(n,e){return IH(e)?e:n.ref(e)}function SH(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(IH(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Qb(n,e,t="on",r=Nc.z){return new kr.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Bt.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,xk.B)())}function DH(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Z7(n,e){const{payload:t,prevKey:r,key:i}=e,s=DH(n,i),u=function(n,e){if(CH(e))return 0;{const t=DH(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function AH(n){return(CH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function xH(n,e,t){return function(n,e,t){return Qb(n,"value","once",t).pipe(Qr(r=>{const i=[xt(r)];return e.forEach(s=>i.push(Qb(n,s,"on",t))),(0,No.T)(...i).pipe(fs(Z7,[]))}),Hm())}(n,e=AH(e),t)}function MH(n,e,t){const r=(e=AH(e)).map(i=>Qb(n,i,"on",t));return(0,No.T)(...r)}function kH(n,e){return function(r,i){return SH(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function X7(n){return function(t){return t?SH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function RH(n,e){return function(){return Qb(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new rc.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Yb(i,r)},"PUBLIC").setServiceProps({Reference:La,Query:Js,Database:Yb,DataSnapshot:Ph,enableLogging:S7,INTERNAL:j7,ServerValue:H7}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(Fv.Z);const t9=new o.OlP("angularfire2.realtimeDatabaseURL"),n9=new o.OlP("angularfire2.database.use-emulator");let r9=(()=>{class n{constructor(t,r,i,s,u,h,p,y,I,x,$,oe,ve,Ge,ot){this.schedulers=h;const Tt=p,jt=(0,As.on)(t,u,r);y&&Jk(jt,u,I,$,oe,ve,x,Ge),this.database=(0,As.cc)(`${jt.name}.database.${i}`,"AngularFireDatabase",jt.name,()=>{const Qt=u.runOutsideAngular(()=>jt.database(i||void 0));return Tt&&Qt.useEmulator(...Tt),Qt},[Tt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>TH(this.database,t));let s=i;return r&&(s=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:kH(r,"update"),set:kH(r,"set"),push:i=>r.push(i),remove:X7(r),snapshotChanges:i=>xH(n,i,t).pipe(Wr.iC),stateChanges:i=>MH(n,i,t).pipe(Wr.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return Qb(n,"value","on",e).pipe((0,Bt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,va.jO)(n);return(0,Yr.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Li.Xf)(n[p]).subscribe(new dr.Q(r,y=>{s[p]=y,!h&&!u[p]&&(u[p]=!0,(h=u.every(ea.y))&&(u=null))},lf.Z));t.subscribe(new dr.Q(r,p=>{if(h){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,Bt.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),(0,Yr.e)((e,t)=>{let r=!1;e.subscribe(new dr.Q(t,s=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(s)))&&t.next(s)))}),(0,Bt.U)(i=>i.actions))}(n,MH(n,e).pipe(fs((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Wr.iC),valueChanges:(i,s)=>xH(n,i,t).pipe((0,Bt.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Wr.iC)}}(s,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>RH(n,e.schedulers.outsideAngular)().pipe(Wr.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>RH(n,e.schedulers.outsideAngular)().pipe(Wr.iC,(0,Bt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>TH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(As.Dh),o.LFG(As.xv,8),o.LFG(t9,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wr.HU),o.LFG(n9,8),o.LFG(wT,8),o.LFG(qk,8),o.LFG(Zk,8),o.LFG(Kk,8),o.LFG(Yk,8),o.LFG(Qk,8),o.LFG(Xk,8),o.LFG(bT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i9=(()=>{class n{constructor(){qq.Z.registerVersion("angularfire",Wr.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[r9]}),n})(),s9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-page-not-found"]],decls:4,vars:0,consts:[["routerLink","/home"]],template:function(t,r){1&t&&(o.TgZ(0,"p"),o._uU(1,"Page non trouv\xe9e"),o.qZA(),o.TgZ(2,"li",0),o._uU(3,"Aller \xe0 la page d'accueil"),o.qZA())},directives:[Ed],styles:[""]}),n})(),o9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-history"]],decls:2,vars:0,template:function(t,r){1&t&&(o.TgZ(0,"p"),o._uU(1,"history works!"),o.qZA())},styles:[""]}),n})(),a9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[be,Id.forChild([{path:"history",component:o9}])]]}),n})();class YO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class QO extends YO{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class OH extends YO{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class c9 extends YO{constructor(e){super(),this.element=e instanceof o.SBq?e.nativeElement:e}}class XO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof QO?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof OH?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof c9?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class u9 extends XO{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=u=>{const h=u.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=u,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let PH=(()=>{class n extends XO{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=s=>{const u=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),u.parentNode.insertBefore(h,u),this._getRootNode().appendChild(u),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(u,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(Y))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),n})(),NH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const FH=ED();class d9{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Vi(-this._previousScrollPosition.left),e.style.top=Vi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",u=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),FH&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),FH&&(r.scrollBehavior=s,i.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class h9{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class LH{enable(){}disable(){}attach(){}}function JO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function BH(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class f9{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();JO(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let p9=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new LH,this.close=u=>new h9(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new d9(this._viewportRuler,this._document),this.reposition=u=>new f9(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(iR),o.LFG(DT),o.LFG(o.R0b),o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VH{constructor(e){if(this.scrollStrategy=new LH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class m9{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let UH=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g9=(()=>{class n extends UH{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const h=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_9=(()=>{class n extends UH{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Rd(s)},this._clickListener=s=>{const u=Rd(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const I=p[y];if(I._outsidePointerEvents.observers.length<1||!I.hasAttached())continue;if(I.overlayElement.contains(u)||I.overlayElement.contains(h))break;const x=I._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(s)):x.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y),o.LFG(Yi),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jH=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null==(t=this._containerElement)||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Tw()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),Tw()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y),o.LFG(Yi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class y9{constructor(e,t,r,i,s,u,h,p,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=u,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new rn.x,this._attachments=new rn.x,this._detachments=new rn.x,this._locationChanges=ao.w0.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new rn.x,this._outsidePointerEvents=new rn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,br.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(t=this._host)||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=kt(kt({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ds(kt({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Vi(this._config.width),e.height=Vi(this._config.height),e.minWidth=Vi(this._config.minWidth),e.minHeight=Vi(this._config.minHeight),e.maxWidth=Vi(this._config.maxWidth),e.maxHeight=Vi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=cf(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(ii((0,No.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const HH="cdk-overlay-connected-position-bounding-box",v9=/([A-Za-z%]+)$/;class b9{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new rn.x,this._resizeSubscription=ao.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(HH),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let u;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),I=this._getOverlayFit(y,t,r,h);if(I.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(I,y,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!u||u.overlayFit.visibleArea<I.visibleArea)&&(u={overlayFit:I,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const I=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);I>p&&(p=I,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&tm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(HH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?u:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=GH(t);let{x:u,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(u+=p),y&&(h+=y);let $=0-h,oe=h+s.height-r.height,ve=this._subtractOverflows(s.width,0-u,u+s.width-r.width),Ge=this._subtractOverflows(s.height,$,oe),ot=ve*Ge;return{visibleArea:ot,isCompletelyWithinViewport:s.width*s.height===ot,fitsInViewportVertically:Ge===s.height,fitsInViewportHorizontally:ve==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,u=zH(this._overlayRef.getConfig().minHeight),h=zH(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=u&&u<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=GH(t),s=this._viewportRect,u=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let I=0,x=0;return I=i.width<=s.width?y||-u:e.x<this._viewportMargin?s.left-r.left-e.x:0,x=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:I,y:x},{x:e.x+I,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new m9(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,u,h,I,x,$;if("top"===t.overlayY)u=e.y,s=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const oe=Math.min(r.bottom-e.y+r.top,e.y),ve=this._lastBoundingBoxSize.height;s=2*oe,u=e.y-oe,s>ve&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-ve/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)$=r.width-e.x+this._viewportMargin,I=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)x=e.x,I=r.right-e.x;else{const oe=Math.min(r.right-e.x+r.left,e.x),ve=this._lastBoundingBoxSize.width;I=2*oe,x=e.x-oe,I>ve&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-ve/2)}return{top:u,left:x,bottom:h,right:$,width:I,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;i.height=Vi(r.height),i.top=Vi(r.top),i.bottom=Vi(r.bottom),i.width=Vi(r.width),i.left=Vi(r.left),i.right=Vi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Vi(s)),u&&(i.maxWidth=Vi(u))}this._lastBoundingBoxSize=r,tm(this._boundingBox.style,i)}_resetBoundingBoxStyles(){tm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){tm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(i){const I=this._viewportRuler.getViewportScrollPosition();tm(r,this._getExactOverlayY(t,e,I)),tm(r,this._getExactOverlayX(t,e,I))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),u.maxHeight&&(i?r.maxHeight=Vi(u.maxHeight):s&&(r.maxHeight="")),u.maxWidth&&(i?r.maxWidth=Vi(u.maxWidth):s&&(r.maxWidth="")),tm(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Vi(s.y),i}_getExactOverlayX(e,t,r){let u,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Vi(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BH(e,r),isOriginOutsideView:JO(e,r),isOverlayClipped:BH(t,r),isOverlayOutsideView:JO(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&cf(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof o.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function tm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function zH(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(v9);return t&&"px"!==t?null:parseFloat(e)}return n||null}function GH(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const $H="cdk-global-overlay-wrapper";class w9{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add($H),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:u,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||u&&"100%"!==u&&"100vw"!==u),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove($H),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let E9=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new w9}flexibleConnectedTo(t){return new b9(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(DT),o.LFG(Y),o.LFG(Yi),o.LFG(jH))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C9=0,AS=(()=>{class n{constructor(t,r,i,s,u,h,p,y,I,x,$){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=h,this._ngZone=p,this._document=y,this._directionality=I,this._location=x,this._outsideClickDispatcher=$}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),u=new VH(t);return u.direction=u.direction||this._directionality.value,new y9(s,r,i,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+C9++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(o.z2F)),new u9(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(p9),o.LFG(jH),o.LFG(o._Vd),o.LFG(E9),o.LFG(g9),o.LFG(o.zs3),o.LFG(o.R0b),o.LFG(Y),o.LFG(Td),o.LFG(Fe),o.LFG(_9))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const S9={provide:new o.OlP("cdk-connected-overlay-scroll-strategy"),deps:[AS],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let D9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[AS,S9],imports:[[Sd,NH,MV],MV]}),n})();const WH=new Set;let $_,A9=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):M9}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function(n){if(!WH.has(n))try{$_||($_=document.createElement("style"),$_.setAttribute("type","text/css"),document.head.appendChild($_)),$_.sheet&&($_.sheet.insertRule(`@media ${n} {body{ }}`,0),WH.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M9(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let qH=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new rn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ZH(cf(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=zs(ZH(cf(t)).map(u=>this._registerQuery(u).observable));return s=Ao(s.pipe((0,br.q)(1)),s.pipe(Zw(1),vf(0))),s.pipe((0,Bt.U)(u=>{const h={matches:!1,breakpoints:{}};return u.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new kr.y(u=>{const h=p=>this._zone.run(()=>u.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(Bi(r),(0,Bt.U)(({matches:u})=>({query:t,matches:u})),ii(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(A9),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ZH(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function R9(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"button",3),o.NdJ("click",function(){return o.CHM(t),o.oxw().action()}),o._uU(2),o.qZA(),o.qZA()}if(2&n){const t=o.oxw();o.xp6(2),o.Oqu(t.data.action)}}function O9(n,e){}const eP=new o.OlP("MatSnackBarData");class xS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const P9=Math.pow(2,31)-1;class tP{constructor(e,t){this._overlayRef=t,this._afterDismissed=new rn.x,this._afterOpened=new rn.x,this._onAction=new rn.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,P9))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let N9=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(tP),o.Y36(eP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"span",0),o._uU(1),o.qZA(),o.YNc(2,R9,3,1,"div",1)),2&t&&(o.xp6(1),o.Oqu(r.data.message),o.xp6(1),o.Q6J("ngIf",r.hasAction))},directives:[ei,Up],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const F9={snackBarState:Zm("state",[Ld("void, hidden",tc({transform:"scale(0.8)",opacity:0})),Ld("visible",tc({transform:"scale(1)",opacity:1})),If("* => visible",Fd("150ms cubic-bezier(0, 0, 0.2, 1)")),If("* => void, * => hidden",Fd("75ms cubic-bezier(0.4, 0.0, 1, 1)",tc({opacity:0})))])};let L9=(()=>{class n extends XO{constructor(t,r,i,s,u){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=u,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new rn.x,this._onExit=new rn.x,this._onEnter=new rn.x,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==u.politeness||u.announcementMessage?"off"===u.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,br.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Yi),o.Y36(xS))},n.\u0275cmp=o.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,r){if(1&t&&o.Gf(PH,7),2&t){let i;o.iGM(i=o.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&o.WFA("@state.done",function(s){return r.onAnimationEnd(s)}),2&t&&o.d8E("@state",r._animationState)},features:[o.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,O9,0,0,"ng-template",1),o.qZA(),o._UZ(2,"div")),2&t&&(o.xp6(2),o.uIk("aria-live",r._live)("role",r._role))},directives:[PH],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[F9.snackBarState]}}),n})(),KH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[D9,NH,be,aR,ci],ci]}),n})();const YH=new o.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new xS}});let V9=(()=>{class n{constructor(t,r,i,s,u,h){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=u,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const s=kt(kt({},this._defaultConfig),i);return s.data={message:t,action:r},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const s=o.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:xS,useValue:r}]}),u=new QO(this.snackBarContainerComponent,r.viewContainerRef,s),h=t.attach(u);return h.instance.snackBarConfig=r,h.instance}_attach(t,r){const i=kt(kt(kt({},new xS),this._defaultConfig),r),s=this._createOverlay(i),u=this._attachSnackBarContainer(s,i),h=new tP(u,s);if(t instanceof o.Rgc){const p=new OH(t,null,{$implicit:i.data,snackBarRef:h});h.instance=u.attachTemplatePortal(p)}else{const p=this._createInjector(i,h),y=new QO(t,void 0,p),I=u.attachComponentPortal(y);h.instance=I.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ii(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(h,i),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new VH;r.direction=t.direction;let i=this._overlay.position().global();const s="rtl"===t.direction,u="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,h=!u&&"center"!==t.horizontalPosition;return u?i.left("0"):h?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return o.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:tP,useValue:r},{provide:eP,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(AS),o.LFG(Ru),o.LFG(o.zs3),o.LFG(qH),o.LFG(n,12),o.LFG(YH))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),nP=(()=>{class n extends V9{constructor(t,r,i,s,u,h){super(t,r,i,s,u,h),this.simpleSnackBarComponent=N9,this.snackBarContainerComponent=L9,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(AS),o.LFG(Ru),o.LFG(o.zs3),o.LFG(qH),o.LFG(n,12),o.LFG(YH))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:KH}),n})(),rP=(()=>{class n{constructor(t){this.data=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(eP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-snackbar"]],decls:2,vars:1,template:function(t,r){1&t&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&t&&(o.xp6(1),o.Oqu(r.data.text))},styles:[""]}),n})(),MS=(()=>{class n{constructor(t,r){this.authService=r,this.database=t}addIntakes(t,r,i,s,u,h){this.authService.userData.uid&&this.database.collection("intakes").add({nickname:t,intakeValue:r,titleIntake:i,protein:s,carbohydrates:u,fat:h,date:new Date,uid:this.authService.userData.uid})}addTargetIntake(t,r,i,s){if(JSON.parse(localStorage.getItem("user")).uid){const u=this.database.doc(`person/${this.authService.userData.uid}`),h=JSON.parse(localStorage.getItem("user"));u.set({uid:h.uid,nickname:h.displayName,targetIntake:t,proteinTarget:r,carbohydratesTarget:i,fatTarget:s},{merge:!0}),this.database.doc(`person/${this.authService.userData.uid}`).update({targetIntake:t,proteinTarget:r,carbohydratesTarget:i,fatTarget:s}),this.database.doc(`users/${this.authService.userData.uid}`).update({targetIntake:t,proteinTarget:r,carbohydratesTarget:i,fatTarget:s})}}addNewTeam(t){JSON.parse(localStorage.getItem("user")).uid&&this.database.collection("teams").add({teamName:t,ownerUid:this.authService.userData.uid}).then(r=>{this.database.collection("teamMembers").add({teamId:r.id,memberUid:this.authService.userData.uid,ownerUid:this.authService.userData.uid})})}getAllTeamsForUser(){if(JSON.parse(localStorage.getItem("user")).uid)return this.database.collection("teamMembers",t=>t.where("memberUid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamFromOwnerId(t){return console.log(t),this.database.collection("teams",r=>r.where("ownerUid","==",t)).valueChanges({idField:"eventId"})}getAllIntakesDocuments(){if(void 0!==localStorage.getItem("user"))return this.database.collection("intakes",t=>t.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges({idField:"eventId"})}getPersonConnectedInfos(){if(void 0!==localStorage.getItem("user"))return this.database.collection("person",t=>t.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamMembersWithTeamId(t){return this.database.collection("teamMembers",r=>r.where("teamId","==",t)).valueChanges()}getUserByUid(t){return this.database.collection("users",r=>r.where("uid","==",t)).valueChanges()}getAllIntakesDocumentsByUid(t){return this.database.collection("intakes",r=>r.where("uid","==",t)).valueChanges()}deleteIntake(t){this.database.doc("intakes/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(nR),o.LFG(CT))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const U9=["*"],QH=new o.OlP("MatChipRemove"),XH=new o.OlP("MatChipAvatar"),JH=new o.OlP("MatChipTrailingIcon");class j9{constructor(e){this._elementRef=e}}const H9=fC(Bu(hC(j9),"primary"),-1);let kS=(()=>{class n extends H9{constructor(t,r,i,s,u,h,p,y){super(t),this._ngZone=r,this._changeDetectorRef=u,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new rn.x,this._onBlur=new rn.x,this.selectionChange=new o.vpe,this.destroyed=new o.vpe,this.removed=new o.vpe,this._addHostClassName(),this._chipRippleTarget=h.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new yC(this,r,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===p,this.tabIndex=null!=y&&parseInt(y)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const r=si(t);r!==this._selected&&(this._selected=r,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=si(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=si(t)}get removable(){return this._removable}set removable(t){this._removable=si(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",r=this._elementRef.nativeElement;r.hasAttribute(t)||r.tagName.toLowerCase()===t?r.classList.add(t):r.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled&&t.preventDefault()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,br.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Yi),o.Y36(vC,8),o.Y36(o.sBO),o.Y36(Y),o.Y36(Ra,8),o.$8M("tabindex"))},n.\u0275dir=o.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,r,i){if(1&t&&(o.Suo(i,XH,5),o.Suo(i,JH,5),o.Suo(i,QH,5)),2&t){let s;o.iGM(s=o.CRH())&&(r.avatar=s.first),o.iGM(s=o.CRH())&&(r.trailingIcon=s.first),o.iGM(s=o.CRH())&&(r.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,r){1&t&&o.NdJ("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&t&&(o.uIk("tabindex",r.disabled?null:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString())("aria-selected",r.ariaSelected),o.ekj("mat-chip-selected",r.selected)("mat-chip-with-avatar",r.avatar)("mat-chip-with-trailing-icon",r.trailingIcon||r.removeIcon)("mat-chip-disabled",r.disabled)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[o.qOj]}),n})(),ez=(()=>{class n{constructor(t,r){this._parentChip=t,"BUTTON"===r.nativeElement.nodeName&&r.nativeElement.setAttribute("type","button")}_handleClick(t){const r=this._parentChip;r.removable&&!r.disabled&&r.remove(),t.stopPropagation(),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(kS),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,r){1&t&&o.NdJ("click",function(s){return r._handleClick(s)})},features:[o._Bn([{provide:QH,useExisting:n}])]}),n})();const tz=new o.OlP("mat-chips-default-options"),$9=pC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let W9=0;class q9{constructor(e,t){this.source=e,this.value=t}}let nz=(()=>{class n extends $9{constructor(t,r,i,s,u,h,p){super(h,s,u,p),this._elementRef=t,this._changeDetectorRef=r,this._dir=i,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new rn.x,this._uid="mat-chip-list-"+W9++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(y,I)=>y===I,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new o.vpe,this.valueChange=new o.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var t,r;return this.multiple?(null==(t=this._selectionModel)?void 0:t.selected)||[]:null==(r=this._selectionModel)?void 0:r.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=si(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(pl.required))&&s}set required(t){this._required=si(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=si(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=si(t),this.chips&&this.chips.forEach(r=>r.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return(0,No.T)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return(0,No.T)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return(0,No.T)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return(0,No.T)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new Ma(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(ii(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(ii(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Bi(null),ii(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new Pm(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const r=t.target;r&&r.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,r=!0){if(this._clearSelection(),this.chips.forEach(i=>i.deselect()),Array.isArray(t))t.forEach(i=>this._selectValue(i,r)),this._sortValues();else{const i=this._selectValue(t,r);i&&r&&this._keyManager.setActiveItem(i)}}_selectValue(t,r=!0){const i=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,t));return i&&(r?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(r=>{r!==t&&r.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let r=null;r=Array.isArray(this.selected)?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.change.emit(new q9(this,r)),this.valueChange.emit(r),this._onChange(r),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(r=>{!this._selectionModel.isSelected(r)&&r.selected&&r.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let r=this.chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&this._keyManager.updateActiveItem(r),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const r=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&r._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let r=t.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-chip"))return!0;r=r.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Td,8),o.Y36(Ib,8),o.Y36(zp,8),o.Y36(bg),o.Y36(Jc,10))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(t,r,i){if(1&t&&o.Suo(i,kS,5),2&t){let s;o.iGM(s=o.CRH())&&(r.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,r){1&t&&o.NdJ("focus",function(){return r.focus()})("blur",function(){return r._blur()})("keydown",function(s){return r._keydown(s)}),2&t&&(o.Ikx("id",r._uid),o.uIk("tabindex",r.disabled?null:r._tabIndex)("aria-describedby",r._ariaDescribedby||null)("aria-required",r.role?r.required:null)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-multiselectable",r.multiple)("role",r.role)("aria-orientation",r.ariaOrientation),o.ekj("mat-chip-list-disabled",r.disabled)("mat-chip-list-invalid",r.errorState)("mat-chip-list-required",r.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[o._Bn([{provide:zT,useExisting:n}]),o.qOj],ngContentSelectors:U9,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,r){1&t&&(o.F$t(),o.TgZ(0,"div",0),o.Hsn(1),o.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),Y9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[bg,{provide:tz,useValue:{separatorKeyCodes:[13]}}],imports:[[ci]]}),n})();function Q9(n,e){1&n&&(o.TgZ(0,"div"),o.TgZ(1,"div",3),o._uU(2,"\u{1f914}"),o.qZA(),o.qZA())}function X9(n,e){if(1&n&&(o.TgZ(0,"div"),o.TgZ(1,"div",4),o.TgZ(2,"b"),o._uU(3),o.qZA(),o._uU(4," total calories"),o.qZA(),o.qZA()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.calculateTotalCalories())}}function J9(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"mat-chip-list",5),o.TgZ(2,"mat-chip"),o._uU(3),o.TgZ(4,"button",6),o.TgZ(5,"mat-icon",7),o.NdJ("click",function(){const s=o.CHM(t).$implicit;return o.oxw().removeIntake(s)}),o._uU(6,"cancel"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&n){const t=e.$implicit;o.xp6(3),o.AsE(" ",t.titleIntake," | ",t.intakeValue," cal. ")}}let eQ=(()=>{class n{constructor(t,r){this.serviceIntake=t,this._snackBar=r,this.currentIntakes=[],this.totalIntakes=0}ngOnInit(){}calculateTotalCalories(){return this.totalIntakes=0,this.currentIntakes.length>0&&this.currentIntakes.forEach(t=>{this.totalIntakes+=t.intakeValue}),this.totalIntakes}removeIntake(t){this.serviceIntake.deleteIntake(t.eventId),this.confirmDelete(t)}confirmDelete(t){this._snackBar.openFromComponent(rP,{duration:5e3,data:{text:"\u26d4 "+t.titleIntake+" supprim\xe9 --\x3e "+t.intakeValue+" cal. retir\xe9s du total journalier."}})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(MS),o.Y36(nP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-intakes-history"]],inputs:{currentIntakes:"currentIntakes"},decls:6,vars:3,consts:[[1,"historiqueContainer"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"textVide"],[1,"totalCaloriesText"],["aria-label","Intakes"],["matChipRemove",""],[3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"h2"),o._uU(2,"Historique journalier"),o.qZA(),o.YNc(3,Q9,3,0,"div",1),o.YNc(4,X9,5,1,"div",1),o.YNc(5,J9,7,2,"div",2),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngIf",0===r.currentIntakes.length),o.xp6(1),o.Q6J("ngIf",r.currentIntakes.length>0),o.xp6(1),o.Q6J("ngForOf",r.currentIntakes))},directives:[ei,es,nz,kS,ez,_b],styles:["h2[_ngcontent-%COMP%]{margin:20px 0}.textVide[_ngcontent-%COMP%]{font-size:25px}.totalCaloriesText[_ngcontent-%COMP%]{margin:10px 0 20px;font-size:18px}.historiqueContainer[_ngcontent-%COMP%]{margin:40px 0 0;padding:0 0 40px}"]}),n})();function tQ(n,e){1&n&&(o.TgZ(0,"h1",20),o._uU(1,"OW ! STOP MANGER GROS PORC"),o.qZA())}function nQ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",21),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).switchIntakeMacrosDisplay()}),o._uU(1),o.qZA()}if(2&n){const t=o.oxw(2);o.Q6J("ngStyle",t.getSpinnerTextStyle()),o.xp6(1),o.AsE(" ",t.getTotalCurrentIntakesFromSelectedUser()," / ",null==t.selectedPerson?null:t.selectedPerson.targetIntake," ")}}function rQ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",21),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).switchIntakeMacrosDisplay()}),o._uU(1),o._UZ(2,"br"),o._UZ(3,"br"),o._uU(4),o._UZ(5,"br"),o._UZ(6,"br"),o._uU(7),o._UZ(8,"br"),o.qZA()}if(2&n){const t=o.oxw(2);o.Q6J("ngStyle",t.getSpinnerTextStyleMacros()),o.xp6(1),o.AsE(" P : ",t.getCurrentProtein()," / ",null==t.selectedPerson?null:t.selectedPerson.proteinTarget,""),o.xp6(3),o.AsE(" G : ",t.getCurrentCarbohydrates()," / ",null==t.selectedPerson?null:t.selectedPerson.carbohydratesTarget," "),o.xp6(3),o.AsE(" L : ",t.getCurrentFat()," / ",null==t.selectedPerson?null:t.selectedPerson.fatTarget," ")}}function iQ(n,e){if(1&n&&(o.TgZ(0,"div",22),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.Q6J("ngStyle",t.getSpinnerTextStyle()),o.xp6(1),o.hij(" ",t.getCurrentSmiley()," ")}}function sQ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",1),o.TgZ(2,"div"),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"div",2),o.TgZ(5,"form",3),o.YNc(6,tQ,2,0,"h1",4),o.TgZ(7,"div",5),o._UZ(8,"mat-progress-spinner",6),o._UZ(9,"mat-progress-spinner",7),o.qZA(),o.YNc(10,nQ,2,3,"div",8),o.YNc(11,rQ,9,7,"div",8),o.YNc(12,iQ,2,2,"div",9),o.TgZ(13,"button",10),o.NdJ("click",function(){return o.CHM(t),o.oxw().goToScanner()}),o._uU(14," Scanner le code barre "),o.qZA(),o._UZ(15,"br"),o._UZ(16,"br"),o._UZ(17,"br"),o.TgZ(18,"p"),o.TgZ(19,"b"),o._uU(20,"OU"),o.qZA(),o.qZA(),o.TgZ(21,"mat-form-field",11),o.TgZ(22,"mat-label"),o._uU(23,"Titre de l'apport calorique"),o.qZA(),o._UZ(24,"input",12),o.TgZ(25,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw().resetTitleIntake()}),o.TgZ(26,"mat-icon"),o._uU(27,"close"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(28,"mat-form-field",11),o.TgZ(29,"mat-label"),o._uU(30,"Montant calorique"),o.qZA(),o._UZ(31,"input",14),o.TgZ(32,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw().resetIntakeValue()}),o.TgZ(33,"mat-icon"),o._uU(34,"close"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"mat-form-field",11),o.TgZ(36,"mat-label"),o._uU(37,"Prot\xe9ines"),o.qZA(),o._UZ(38,"input",15),o.TgZ(39,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw().resetProteinValue()}),o.TgZ(40,"mat-icon"),o._uU(41,"close"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(42,"mat-form-field",11),o.TgZ(43,"mat-label"),o._uU(44,"Glucides"),o.qZA(),o._UZ(45,"input",16),o.TgZ(46,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw().resetCarbohydratesValue()}),o.TgZ(47,"mat-icon"),o._uU(48,"close"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(49,"mat-form-field",11),o.TgZ(50,"mat-label"),o._uU(51,"Lipides"),o.qZA(),o._UZ(52,"input",17),o.TgZ(53,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw().resetFatValue()}),o.TgZ(54,"mat-icon"),o._uU(55,"close"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(56,"button",18),o.NdJ("click",function(){return o.CHM(t),o.oxw().ajouterApport()}),o._uU(57," Ajouter l'apport "),o.qZA(),o.qZA(),o._UZ(58,"app-intakes-history",19),o.qZA(),o.qZA()}if(2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.getSelectedPerson().displayName),o.xp6(2),o.Q6J("formGroup",t.intakeFormGroup),o.xp6(1),o.Q6J("ngIf",t.isOverMaxIntake()),o.xp6(2),o.Q6J("color","warn")("diameter",t.spinnerDiameter)("strokeWidth",14)("mode","determinate")("value",100),o.xp6(1),o.Q6J("color",t.getColorStateOfSpinner())("diameter",t.spinnerDiameter)("strokeWidth",15)("mode","determinate")("value",t.getSpinnerProgressValue()),o.xp6(1),o.Q6J("ngIf",t.getTargetIntakeOfSelectedUser()>0&&t.isInIntakeView),o.xp6(1),o.Q6J("ngIf",t.getTargetIntakeOfSelectedUser()>0&&!t.isInIntakeView),o.xp6(1),o.Q6J("ngIf",0===t.getTargetIntakeOfSelectedUser()),o.xp6(46),o.Q6J("currentIntakes",t.selectedUserIntakes)}}function oQ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",23),o.TgZ(2,"p",24),o._uU(3,"Il semblerait que vous n'ayez pas d'objectif calorique journalier ..."),o.qZA(),o.TgZ(4,"div",25),o._uU(5,"\u{1f914}"),o.qZA(),o.TgZ(6,"p",26),o._uU(7,"Fixez-vous en un pour commencer \xe0 utiliser le tracker !"),o.qZA(),o.TgZ(8,"form",3),o.TgZ(9,"mat-form-field",11),o.TgZ(10,"mat-label"),o._uU(11,"Objectif calorique journalier"),o.qZA(),o._UZ(12,"input",27),o.TgZ(13,"mat-label"),o._uU(14,"Objectif prot\xe9ines journalier"),o.qZA(),o._UZ(15,"input",28),o.TgZ(16,"mat-label"),o._uU(17,"Objectif glucides journalier"),o.qZA(),o._UZ(18,"input",29),o.TgZ(19,"mat-label"),o._uU(20,"Objectif lipides journalier"),o.qZA(),o._UZ(21,"input",30),o.qZA(),o.TgZ(22,"button",31),o.NdJ("click",function(){return o.CHM(t),o.oxw().ajouterObjectif()}),o._uU(23," Confirmer cet objectif (YOLO) "),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&n){const t=o.oxw();o.xp6(8),o.Q6J("formGroup",t.targetIntakeSetupFormGroup)}}let aQ=(()=>{class n{constructor(t,r,i,s){var u,h;this._snackbar=i,this.router=s,this.selectedPerson=void 0,this.lastPersonSelected=void 0,this.isInIntakeView=!0,this.currentIntakeValue=1200,this.maxIntakeForTheDay=1300,this.spinnerDiameter=250,this.items=[],this.itemForSelectedUser={nickname:"",currentIntake:"",targetIntake:""},this.selectedUserIntakes=[],this.sportiveSmileyAnimation=["\u{1f975}","\u{1f919}","\u{1f957}","\u{1f346}","\u{1f34c}","\u{1f345}","\u{1f680}","\u{1f3c6}","\u{1f947}","\u{1f6bf}","\u{1f373}","\u{1f3c3}","\u{1f938}"],this.indexRandomIcon=0,this.emojiSubscription=new ao.w0,this.intakeFormGroup=new k_({titleIntake:new da("",pl.minLength(1)),intakeValue:new da("",pl.min(1)),protein:new da("",pl.min(1)),carbohydrates:new da("",pl.min(1)),fat:new da("",pl.min(1))}),this.targetIntakeSetupFormGroup=new k_({targetIntake:new da("",pl.minLength(1)),proteinTarget:new da("",pl.minLength(1)),carbohydratesTarget:new da("",pl.minLength(1)),fatTarget:new da("",pl.minLength(1))}),this.serviceIntake=r,null===(u=this.serviceIntake.getAllIntakesDocuments())||void 0===u||u.subscribe(p=>{this.items=p}),null===(h=this.serviceIntake.getPersonConnectedInfos())||void 0===h||h.subscribe(p=>{this.selectedPerson=p.length>0?p[0]:{displayName:"",targetIntake:0}})}ngOnInit(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0,protein:void 0,carbohydrates:void 0,fat:void 0}),this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1);const t=function(n=0,e=Nc.z){return n<0&&(n=0),Ig(n,n,e)}(2e3);this.emojiSubscription=t.subscribe(r=>{this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1)}),this.setIntakesFromSelectedUser()}resetTitleIntake(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{titleIntake:""}))}resetIntakeValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{intakeValue:void 0}))}resetProteinValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{protein:void 0}))}resetCarbohydratesValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{carbohydrates:void 0}))}resetFatValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{fat:void 0}))}resetAllForm(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0}),this.targetIntakeSetupFormGroup.reset({targetIntake:void 0})}getCurrentProtein(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.protein}),t}getCurrentCarbohydrates(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.carbohydrates}),t}getCurrentFat(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.fat}),t}getSpinnerProgressValue(){var t,r;let i=this.getTotalCurrentIntakesFromSelectedUser();return this.selectedPerson&&i/(null===(t=this.selectedPerson)||void 0===t?void 0:t.targetIntake)*100<100?i/(null===(r=this.selectedPerson)||void 0===r?void 0:r.targetIntake)*100:100}getColorStateOfSpinner(){return this.isOverMaxIntake()?"accent":"primary"}getSpinnerTextStyle(){return{"margin-top":"-"+(this.spinnerDiameter/2+16)+"px","padding-bottom":this.spinnerDiameter/2+26+"px"}}getSpinnerTextStyleMacros(){return{"margin-top":"-"+(this.spinnerDiameter/2+55)+"px","padding-bottom":this.spinnerDiameter/2-15+"px"}}isOverMaxIntake(){return this.getTotalCurrentIntakesFromSelectedUser()>this.maxIntakeForTheDay}ajouterApport(){this.intakeFormGroup.value.intakeValue&&this.intakeFormGroup.value.titleIntake&&this.intakeFormGroup.value.protein&&this.intakeFormGroup.value.carbohydrates&&this.intakeFormGroup.value.fat&&(this.serviceIntake.addIntakes(this.itemForSelectedUser.nickname,this.intakeFormGroup.value.intakeValue,this.intakeFormGroup.value.titleIntake,this.intakeFormGroup.value.protein,this.intakeFormGroup.value.carbohydrates,this.intakeFormGroup.value.fat),this.setItemsForSelectedUser(),this._snackbar.openFromComponent(rP,{duration:5e3,data:{text:"\u{1f374} "+this.intakeFormGroup.value.titleIntake+" ajout\xe9 --\x3e "+this.intakeFormGroup.value.intakeValue+" cal. ajout\xe9s au total journalier."}}),this.resetAllForm())}ajouterObjectif(){this.targetIntakeSetupFormGroup.value.targetIntake&&(this.serviceIntake.addTargetIntake(this.targetIntakeSetupFormGroup.value.targetIntake,this.targetIntakeSetupFormGroup.value.proteinTarget,this.targetIntakeSetupFormGroup.value.carbohydratesTarget,this.targetIntakeSetupFormGroup.value.fatTarget),this.setItemsForSelectedUser(),this.resetAllForm())}getTotalCurrentIntakesFromSelectedUser(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.intakeValue}),t}getSelectedPerson(){return JSON.parse(localStorage.getItem("user"))||{}}getTargetIntakeOfSelectedUser(){var t;return(null===(t=this.selectedPerson)||void 0===t?void 0:t.targetIntake)?this.selectedPerson.targetIntake:0}isUserLoggedAndWithoutTargetIntake(){return!!this.selectedPerson&&(void 0===this.selectedPerson.targetIntake||this.selectedPerson.targetIntake<=0||(this.selectedPerson.targetIntake>0&&(this.maxIntakeForTheDay=this.selectedPerson.targetIntake),!1))}getSmileyAnimation(){return this.sportiveSmileyAnimation[this.indexRandomIcon]}getCurrentSmiley(){return this.getSmileyAnimation()}switchIntakeMacrosDisplay(){this.isInIntakeView=!this.isInIntakeView}setIntakesFromSelectedUser(){this.serviceIntake.getAllIntakesDocuments().subscribe(t=>{this.selectedUserIntakes=[],t.forEach(r=>{r.dateFormatted=r.date.toDate(),r.dateFormatted.getDate()===(new Date).getDate()&&r.dateFormatted.getMonth()===(new Date).getMonth()&&r.dateFormatted.getFullYear()===(new Date).getFullYear()&&this.selectedUserIntakes.push(r)})})}setItemsForSelectedUser(){this.items.forEach(t=>{t.nickname===this.selectedPerson&&(this.itemForSelectedUser=t)}),this.setIntakesFromSelectedUser()}goToScanner(){this.router.navigate(["scanner"])}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(nR),o.Y36(MS),o.Y36(nP),o.Y36(gs))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"selectionButtonContainer"],[1,"formIntake"],[3,"formGroup"],["style","color: red; margin-top: 15px",4,"ngIf"],[1,"spinnerContainer"],[1,"progressSpinnerBackground",3,"color","diameter","strokeWidth","mode","value"],[1,"progressSpinner",3,"color","diameter","strokeWidth","mode","value"],["class","textInSpinner",3,"ngStyle","click",4,"ngIf"],["class","textInSpinnerNotSelected",3,"ngStyle",4,"ngIf"],["mat-raised-button","","aria-label","Scanner code barre",3,"click"],["appearance","standard"],["matInput","","type","text","formControlName","titleIntake"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","number","formControlName","intakeValue"],["matInput","","type","number","formControlName","protein"],["matInput","","type","number","formControlName","carbohydrates"],["matInput","","type","number","formControlName","fat"],["mat-raised-button","","aria-label","Ajouter cet apport",3,"click"],[3,"currentIntakes"],[2,"color","red","margin-top","15px"],[1,"textInSpinner",3,"ngStyle","click"],[1,"textInSpinnerNotSelected",3,"ngStyle"],[1,"setTargetIntakeContainer"],[2,"font-size","20px"],[1,"textVide",2,"padding","20px 0 50px 0"],[2,"font-size","15px"],["matInput","","type","number","formControlName","targetIntake"],["matInput","","type","number","formControlName","proteinTarget"],["matInput","","type","number","formControlName","carbohydratesTarget"],["matInput","","type","number","formControlName","fatTarget"],["mat-raised-button","","aria-label","Confirmer cet objectif (YOLO)",3,"click"]],template:function(t,r){1&t&&(o.YNc(0,sQ,59,17,"div",0),o.YNc(1,oQ,24,1,"div",0)),2&t&&(o.Q6J("ngIf",!r.isUserLoggedAndWithoutTargetIntake()),o.xp6(1),o.Q6J("ngIf",r.isUserLoggedAndWithoutTargetIntake()))},directives:[ei,MR,bR,zp,Ju,Up,lj,GT,cj,yb,vR,jT,R8,_b,kR,eQ,Zr],styles:["@keyframes circleAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.formIntake[_ngcontent-%COMP%]{margin:auto;width:min-content;text-align:center}.formIntake[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.spinnerContainer[_ngcontent-%COMP%]{margin:35px 0 10px}.textMacroInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center;margin-top:-26px}.textInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center}.textInSpinnerNotSelected[_ngcontent-%COMP%]{margin:auto;width:80%;font-size:50px;text-align:center}.topButton[_ngcontent-%COMP%]{margin:10px}.progressSpinnerBackground[_ngcontent-%COMP%]{animation:circleAnimation linear 30s infinite;position:absolute}.selectionButtonContainer[_ngcontent-%COMP%]{margin:15px 0 2px;text-align:center;font-size:20px}  .spinnerContainer>.progressSpinnerBackground>svg>.mat-progress-spinner.mat-warn circle,   .mat-spinner.mat-warn circle{stroke:#0000004d;stroke-dasharray:17.9!important;overflow-x:hidden}.setTargetIntakeContainer[_ngcontent-%COMP%]{text-align:center;margin:auto;width:80vw}.setTargetIntakeContainer[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){padding:10px 0}.textVide[_ngcontent-%COMP%]{font-size:40px}"]}),n})();const lQ=["*",[["mat-card-footer"]]],cQ=["*","mat-card-footer"],uQ=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],dQ=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let hQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),fQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),pQ=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&o.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),mQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),gQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),_Q=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ra,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&o.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:cQ,decls:2,vars:0,template:function(t,r){1&t&&(o.F$t(lQ),o.Hsn(0),o.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),yQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:dQ,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,r){1&t&&(o.F$t(uQ),o.Hsn(0),o.TgZ(1,"div",0),o.Hsn(2,1),o.qZA(),o.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),vQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ci],ci]}),n})();function bQ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div"),o._uU(1," Il semblerait que vous ne soyez dans aucune \xe9quipe. "),o._UZ(2,"br"),o._uU(3," Vous pouvez cr\xe9er la votre si vous le souhaitez "),o.TgZ(4,"form",2),o.TgZ(5,"mat-form-field",3),o.TgZ(6,"mat-label"),o._uU(7,"Nom de l'\xe9quipe"),o.qZA(),o._UZ(8,"input",4),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return o.CHM(t),o.oxw().ajouterEquipe()}),o._uU(10," Cr\xe9er l'\xe9quipe "),o.qZA(),o.qZA(),o.qZA()}if(2&n){const t=o.oxw();o.xp6(4),o.Q6J("formGroup",t.createTeamFormGroup)}}const wQ=function(n){return[n]};function EQ(n,e){if(1&n&&(o.TgZ(0,"div"),o.TgZ(1,"mat-card"),o.TgZ(2,"mat-card-header"),o._UZ(3,"div",8),o.TgZ(4,"mat-card-title"),o._uU(5),o.qZA(),o.TgZ(6,"mat-card-subtitle"),o._uU(7,":("),o.qZA(),o.qZA(),o._UZ(8,"img",9),o.TgZ(9,"mat-card-actions"),o.TgZ(10,"button",10),o._uU(11,"Membres"),o.qZA(),o.TgZ(12,"button",11),o._uU(13,"Modifier"),o.qZA(),o.qZA(),o.qZA(),o._UZ(14,"div",12),o.qZA()),2&n){const t=e.$implicit;o.xp6(5),o.Oqu(t.teamName),o.xp6(5),o.Q6J("routerLink",o.VKq(4,wQ,t.eventId))("color","primary"),o.xp6(2),o.Q6J("disabled",!0)}}function CQ(n,e){if(1&n&&(o.TgZ(0,"div"),o.TgZ(1,"h2"),o._uU(2,"Vos \xe9quipes"),o.qZA(),o.TgZ(3,"div",6),o.TgZ(4,"i"),o._uU(5,"C'est toujours mieux d'avancer ensemble"),o.qZA(),o.qZA(),o.YNc(6,EQ,15,6,"div",7),o.qZA()),2&n){const t=o.oxw();o.xp6(6),o.Q6J("ngForOf",t.teams)}}let IQ=(()=>{class n{constructor(t){this.serviceIntakes=t,this.userTeams=void 0,this.teams=[],this.createTeamFormGroup=new k_({teamName:new da("",pl.minLength(1))})}ngOnInit(){this.getTeamsFromConnectedUser()}resetAllForms(){this.createTeamFormGroup.reset({teamName:""})}ajouterEquipe(){this.createTeamFormGroup.invalid||(this.serviceIntakes.addNewTeam(this.createTeamFormGroup.value.teamName),this.getTeamsFromConnectedUser(),this.resetAllForms())}getTeamsFromConnectedUser(){var t;null===(t=this.serviceIntakes.getAllTeamsForUser())||void 0===t||t.subscribe(r=>{r.forEach(i=>{var s;null===(s=this.serviceIntakes.getTeamFromOwnerId(i.ownerUid))||void 0===s||s.subscribe(u=>{this.teams=u})}),this.userTeams=r})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(MS))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"teamTrackerContainer"],[4,"ngIf"],[3,"formGroup"],["appearance","standard"],["matInput","","type","text","formControlName","teamName"],["mat-raised-button","","aria-label","Cr\xe9er l'\xe9quipe",3,"click"],[1,"subtitleTeam"],[4,"ngFor","ngForOf"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","src","https://www.signupgenius.com/images/new-landing/sports/get-started-background.jpg","alt","Happy smiling team"],["mat-raised-button","",3,"routerLink","color"],["mat-button","",3,"disabled"],[1,"card-separator"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,bQ,11,1,"div",1),o.YNc(2,CQ,7,1,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",void 0!==r.userTeams&&0===r.userTeams.length),o.xp6(1),o.Q6J("ngIf",r.teams.length>0))},directives:[ei,MR,bR,zp,lj,GT,cj,yb,vR,jT,Up,es,_Q,yQ,gQ,hQ,fQ,mQ,pQ,Ed],styles:[".teamTrackerContainer[_ngcontent-%COMP%]{margin:auto}.card-separator[_ngcontent-%COMP%]{width:100%;height:30px}h2[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{width:80vw;margin:auto}.subtitleTeam[_ngcontent-%COMP%]{width:100vw;text-align:center;margin-bottom:10px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://i1.sndcdn.com/artworks-BUOQ4gYsZfCCcg4I-YocETQ-t500x500.jpg);background-size:cover}"]}),n})();const TQ=["primaryValueBar"],SQ=Bu(class{constructor(n){this._elementRef=n}},"primary"),DQ=new o.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const n=(0,o.f3M)(Y),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),xQ=new o.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let MQ=0,kQ=(()=>{class n extends SQ{constructor(t,r,i,s,u,h){super(t),this._ngZone=r,this._animationMode=i,this._changeDetectorRef=h,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new o.vpe,this._animationEndSubscription=ao.w0.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+MQ++;const p=s?s.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${p}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===i,u&&(u.color&&(this.color=this.defaultColor=u.color),this.mode=u.mode||this.mode)}get value(){return this._value}set value(t){var r;this._value=rz(Ki(t)||0),null==(r=this._changeDetectorRef)||r.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(t){var r;this._bufferValue=rz(t||0),null==(r=this._changeDetectorRef)||r.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=cl(t,"transitionend").pipe(Xn(r=>r.target===t)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Ra,8),o.Y36(DQ,8),o.Y36(xQ,8),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(t,r){if(1&t&&o.Gf(TQ,5),2&t){let i;o.iGM(i=o.CRH())&&(r._primaryValueBar=i.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,r){2&t&&(o.uIk("aria-valuenow","indeterminate"===r.mode||"query"===r.mode?null:r.value)("mode",r.mode),o.ekj("_mat-animation-noopable",r._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[o.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.O4$(),o.TgZ(1,"svg",1),o.TgZ(2,"defs"),o.TgZ(3,"pattern",2),o._UZ(4,"circle",3),o.qZA(),o.qZA(),o._UZ(5,"rect",4),o.qZA(),o.kcU(),o._UZ(6,"div",5),o._UZ(7,"div",6,7),o._UZ(9,"div",8),o.qZA()),2&t&&(o.xp6(3),o.Q6J("id",r.progressbarId),o.xp6(2),o.uIk("fill",r._rectangleFillValue),o.xp6(1),o.Q6J("ngStyle",r._bufferTransform()),o.xp6(1),o.Q6J("ngStyle",r._primaryTransform()))},directives:[Zr],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),n})();function rz(n,e=0,t=100){return Math.max(e,Math.min(t,n))}let RQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[be,ci],ci]}),n})();function OQ(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"mat-progress-bar",6),o.qZA()),2&n){const t=o.oxw().$implicit,r=o.oxw();o.xp6(1),o.Q6J("value",r.getValueForUser(t))}}function PQ(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"mat-progress-bar",7),o.qZA()),2&n){const t=o.oxw().$implicit,r=o.oxw();o.xp6(1),o.Q6J("value",r.getValueForUser(t))("color","warn")}}function NQ(n,e){if(1&n&&(o.TgZ(0,"div"),o.TgZ(1,"h3"),o._uU(2),o.qZA(),o.YNc(3,OQ,2,1,"div",4),o.YNc(4,PQ,2,2,"div",4),o.TgZ(5,"div",5),o._uU(6),o.qZA(),o.qZA()),2&n){const t=e.$implicit,r=o.oxw();o.xp6(2),o.Oqu(t.displayName),o.xp6(1),o.Q6J("ngIf",r.getValueForUser(t)<=100),o.xp6(1),o.Q6J("ngIf",r.getValueForUser(t)>100),o.xp6(2),o.AsE(" ",r.getTotalCurrentIntakesFromSelectedUser(t.intakes)," / ",t.targetIntake," ")}}let FQ=(()=>{class n{constructor(t,r){this.serviceIntake=t,this.route=r,this.teamId=void 0,this.teamMembers=[]}ngOnInit(){this.teamId=this.route.snapshot.paramMap.get("id"),this.serviceIntake.getTeamMembersWithTeamId(this.teamId).subscribe(t=>{t.forEach(r=>{this.serviceIntake.getUserByUid(r.memberUid).subscribe(i=>{const s=i[0];this.serviceIntake.getAllIntakesDocumentsByUid(r.memberUid).subscribe(u=>{const h=[];u.forEach(y=>{y.dateFormatted=y.date.toDate(),y.dateFormatted.getDate()===(new Date).getDate()&&y.dateFormatted.getMonth()===(new Date).getMonth()&&y.dateFormatted.getFullYear()===(new Date).getFullYear()&&h.push(y)});let p=-1;for(let y=0;y<this.teamMembers.length;y++)this.teamMembers[y].uid===s.uid&&(p=y);-1!==p?this.teamMembers[p]=Object.assign(Object.assign({},s),{intakes:h}):this.teamMembers.push(Object.assign(Object.assign({},s),{intakes:h}))})})})})}getTotalCurrentIntakesFromSelectedUser(t){if(t){let r=0;return t.forEach(i=>{r+=i.intakeValue}),r}return 0}getValueForUser(t){return this.getTotalCurrentIntakesFromSelectedUser(t.intakes)/t.targetIntake*100}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(MS),o.Y36(Sc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-team-tracker-progress"]],decls:10,vars:2,consts:[[1,"goBackArrow"],["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"routerLink"],[1,"membersContainer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"membersContainer","statusBarNumber"],["mode","determinate",3,"value"],["mode","determinate",3,"value","color"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"button",1),o.TgZ(2,"mat-icon"),o._uU(3," keyboard_arrow_left "),o.qZA(),o.TgZ(4,"mat-icon"),o._uU(5," keyboard_arrow_left "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(6,"div",2),o.TgZ(7,"h2"),o._uU(8,"Progression de l'\xe9quipe"),o.qZA(),o.YNc(9,NQ,7,5,"div",3),o.qZA()),2&t&&(o.xp6(1),o.Q6J("routerLink","/teamTracking"),o.xp6(8),o.Q6J("ngForOf",r.teamMembers))},directives:[Up,Ed,_b,es,ei,kQ],styles:[".goBackArrow[_ngcontent-%COMP%]{position:absolute}mat-icon[_ngcontent-%COMP%]{width:10px}.membersContainer[_ngcontent-%COMP%]{width:95vw;margin:auto}h2[_ngcontent-%COMP%]{text-align:center}h3[_ngcontent-%COMP%]{margin:0}.statusBarNumber[_ngcontent-%COMP%]{text-align:right}"]}),n})(),LQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[be,Id.forChild([{path:"tracker",component:aQ,canActivate:[IT]},{path:"teamTracking",component:IQ,canActivate:[IT]},{path:"teamTracking/:id",component:FQ,canActivate:[IT]}]),dj,BR,mR,Y9,o8,a8,Ml,QV,yv,aR,uj,mR,vQ,RQ]]}),n})(),BQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}connectWithGoogle(){this.authService.signInWithGoogle()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(CT))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-authentication"]],decls:2,vars:0,consts:[["mat-button","",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"a",0),o.NdJ("click",function(){return r.connectWithGoogle()}),o._uU(1,"Connect with GOOGLE"),o.qZA())},directives:[LV],styles:[""]}),n})();var VQ=R(4762),UQ=R(2501),hc=R.n(UQ),jQ=R(5477),HQ=R.n(jQ);const zQ=["BarcodeScanner"],GQ={inputStream:{name:"Live",type:"LiveStream",target:null,constraints:{width:{min:640},height:{min:480},aspectRatio:{min:1,max:2},facingMode:"environment"},singleChannel:!1},locator:{patchSize:"medium",halfSample:!0},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]}},$Q=["code_128","code_39","code_39_vin","ean","ean_extended","ean_8","upc","upc_e","codabar","i2of5","2of5","code_93"];function iz(n){if(!$Q.some(e=>e===n))throw new Error(`This barcode type '${n}' is not valid.`)}function sz(n){return`${n}_reader`}let oz=(()=>{class n{constructor(){this.maxWidth="100%",this._valueChanges=new rn.x,this.valueChanges=new o.vpe,this.started=new o.vpe,this._started=!1,this._destroyed=new rn.x,this._valueChanges.pipe(ii(this._destroyed),Xn(t=>{const r=t.codeResult.decodedCodes.filter(s=>void 0!==s.error).map(s=>s.error),i=this._getMedian(r);return!this.errorFilter||!(this.errorFilter.median&&i>this.errorFilter.median||this.errorFilter.threshold&&r.some(s=>s>this.errorFilter.threshold))})).subscribe(t=>{const r=hc().canvas.ctx.overlay;hc().ImageDebug.drawPath(t.line,{x:"x",y:"y"},r,{color:"red",lineWidth:3}),this.valueChanges.next(t)})}get _maxWidth(){return this.maxWidth?`${this.maxWidth}`:"auto"}get _maxHeight(){return this.maxHeight?`${this.maxHeight}`:"auto"}get isStarted(){return this._started}ngOnDestroy(){this.stop(),this._destroyed.next(!0),this._destroyed.complete()}ngOnChanges(){this.restart()}_init(){return new Promise((t,r)=>{hc().onProcessed(i=>this.onProcessed(i)),hc().onDetected(i=>this.onDetected(i)),this.configQuagga=HQ()({},this.config,GQ),this.configQuagga.inputStream.target=this.barcodeScanner.nativeElement,this.type&&(this.configQuagga.decoder.readers=function(n){return"string"==typeof n?(iz(n),[sz(n)]):n.map(e=>(iz(e),sz(e)))}(this.type)),this.deviceId&&(this.configQuagga.inputStream.constraints.deviceId=this.deviceId),hc().init(this.configQuagga,i=>{if(i)return console.log(i),r(i);t()})})}_getMedian(t){t.sort((i,s)=>i-s);const r=Math.floor(t.length/2);return t.length%2==1?t[r]:(t[r-1]+t[r])/2}start(){return(0,VQ.mG)(this,void 0,void 0,function*(){this._started||(yield this._init(),hc().start(),this._started=!0,this.started.next(!0))})}stop(){this._started&&(hc().stop(),this._started=!1,this.started.next(!1))}restart(){this._started&&(this.stop(),this.start())}onProcessed(t){const r=hc().canvas.ctx.overlay,i=hc().canvas.dom.overlay;t&&(t.boxes&&(r.clearRect(0,0,parseInt(i.getAttribute("width"),10),parseInt(i.getAttribute("height"),10)),t.boxes.filter(s=>s!==t.box).forEach(s=>{hc().ImageDebug.drawPath(s,{x:0,y:1},r,{color:"green",lineWidth:2})})),t.box&&hc().ImageDebug.drawPath(t.box,{x:0,y:1},r,{color:"#00F",lineWidth:2}))}onDetected(t){this._valueChanges.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["barcode-scanner-livestream"]],viewQuery:function(t,r){if(1&t&&o.Gf(zQ,5),2&t){let i;o.iGM(i=o.CRH())&&(r.barcodeScanner=i.first)}},inputs:{type:"type",deviceId:"deviceId",maxWidth:"maxWidth",maxHeight:"maxHeight",config:"config",errorFilter:"errorFilter"},outputs:{valueChanges:"valueChanges",started:"started"},features:[o.TTD],decls:4,vars:13,consts:[[1,"scanner",3,"hidden"],["BarcodeScanner",""],[1,"drawingBuffer"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0,1),o._UZ(2,"video"),o._UZ(3,"canvas",2),o.qZA()),2&t&&(o.Udp("max-height",r._maxHeight)("max-width",r._maxWidth),o.Q6J("hidden",!r.isStarted),o.xp6(2),o.Udp("max-height",r._maxHeight)("max-width",r._maxWidth),o.xp6(1),o.Udp("max-height",r._maxHeight)("max-width",r._maxWidth))},styles:[".scanner{position:relative}.scanner video,.scanner canvas{width:100%;height:100%}.scanner canvas.drawingBuffer{position:absolute;left:0;top:0}\n"],encapsulation:2}),n})(),qQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[be]]}),n})();const ZQ=function(){return["code_128","code_39","ean_8","ean"]},KQ=function(){return{median:.08,threshold:.1}},YQ=[{path:"authentication",component:BQ},{path:"scanner",component:(()=>{class n{constructor(t){this._snackBar=t,this.barcodeValue=void 0}ngOnInit(){}ngAfterViewInit(){var t;null===(t=this.barcodeScanner)||void 0===t||t.start()}onValueChanges(t){this.barcodeValue=t.codeResult.code,this._snackBar.openFromComponent(rP,{duration:5e3,data:{text:"Code : "+this.barcodeValue}})}onStarted(t){console.log(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(nP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,r){if(1&t&&o.Gf(oz,5),2&t){let i;o.iGM(i=o.CRH())&&(r.barcodeScanner=i.first)}},decls:3,vars:6,consts:[[3,"type","errorFilter","valueChanges","started"],[3,"hidden"]],template:function(t,r){1&t&&(o.TgZ(0,"barcode-scanner-livestream",0),o.NdJ("valueChanges",function(s){return r.onValueChanges(s)})("started",function(){return r.onStarted}),o.qZA(),o.TgZ(1,"div",1),o._uU(2),o.qZA()),2&t&&(o.Q6J("type",o.DdM(4,ZQ))("errorFilter",o.DdM(5,KQ)),o.xp6(1),o.Q6J("hidden",!r.barcodeValue),o.xp6(1),o.hij(" ",r.barcodeValue,"\n"))},directives:[oz],styles:[""]}),n})()},{path:"",redirectTo:"tracker",pathMatch:"full"},{path:"**",component:s9}];let QQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[p5]}),n.\u0275inj=o.cJS({providers:[CT],imports:[[Ml,QV,af,yv,uj,mR,aR,s5,dj,Ix.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),As.hO.initializeApp({apiKey:"AIzaSyDwY0ustgrbdUrkt0FXwseq89vcH_zirJo",authDomain:"personnaltrack.firebaseapp.com",projectId:"personnaltrack",storageBucket:"personnaltrack.appspot.com",messagingSenderId:"588509586658",appId:"1:588509586658:web:334cb1ed45319ff2592abb",measurementId:"G-G9PZNFDF99"}),i9,T4,Zd,Id.forRoot(YQ),a9,LQ,KH,qQ]]}),n})();(0,o.G48)(),mc().bootstrapModule(QQ).catch(n=>console.error(n))},9162:(St,M,R)=>{"use strict";function re(q,Q,ne,ie){return new(ne||(ne=Promise))(function(W,ce){function Ve(rt){try{Je(ie.next(rt))}catch(dt){ce(dt)}}function lt(rt){try{Je(ie.throw(rt))}catch(dt){ce(dt)}}function Je(rt){rt.done?W(rt.value):function(W){return W instanceof ne?W:new ne(function(ce){ce(W)})}(rt.value).then(Ve,lt)}Je((ie=ie.apply(q,Q||[])).next())})}function Ie(q){return this instanceof Ie?(this.v=q,this):new Ie(q)}function ge(q,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ie=ne.apply(q,Q||[]),W=[];return Ee={},ce("next"),ce("throw"),ce("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee;function ce($t){ie[$t]&&(Ee[$t]=function(Jt){return new Promise(function(vn,Rt){W.push([$t,Jt,vn,Rt])>1||Ve($t,Jt)})})}function Ve($t,Jt){try{!function($t){$t.value instanceof Ie?Promise.resolve($t.value.v).then(Je,rt):dt(W[0][2],$t)}(ie[$t](Jt))}catch(vn){dt(W[0][3],vn)}}function Je($t){Ve("next",$t)}function rt($t){Ve("throw",$t)}function dt($t,Jt){$t(Jt),W.shift(),W.length&&Ve(W[0][0],W[0][1])}}function Se(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=q[Symbol.asyncIterator];return Q?Q.call(q):(q=function(q){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&q[Q],ie=0;if(ne)return ne.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ie>=q.length&&(q=void 0),{value:q&&q[ie++],done:!q}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ne={},ie("next"),ie("throw"),ie("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ie(W){ne[W]=q[W]&&function(ce){return new Promise(function(Ve,lt){!function(W,ce,Ve,lt){Promise.resolve(lt).then(function(Je){W({value:Je,done:Ve})},ce)}(Ve,lt,(ce=q[W](ce)).done,ce.value)})}}}R.d(M,{mG:()=>re,qq:()=>Ie,FC:()=>ge,KL:()=>Se})},4762:(St,M,R)=>{"use strict";function k(Q,ne){var ie={};for(var Ee in Q)Object.prototype.hasOwnProperty.call(Q,Ee)&&ne.indexOf(Ee)<0&&(ie[Ee]=Q[Ee]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var W=0;for(Ee=Object.getOwnPropertySymbols(Q);W<Ee.length;W++)ne.indexOf(Ee[W])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ee[W])&&(ie[Ee[W]]=Q[Ee[W]])}return ie}function re(Q,ne,ie,Ee){return new(ie||(ie=Promise))(function(ce,Ve){function lt(dt){try{rt(Ee.next(dt))}catch($t){Ve($t)}}function Je(dt){try{rt(Ee.throw(dt))}catch($t){Ve($t)}}function rt(dt){dt.done?ce(dt.value):function(ce){return ce instanceof ie?ce:new ie(function(Ve){Ve(ce)})}(dt.value).then(lt,Je)}rt((Ee=Ee.apply(Q,ne||[])).next())})}R.d(M,{_T:()=>k,mG:()=>re})},3668:(St,M,R)=>{"use strict";R.d(M,{deG:()=>qa,tb:()=>jv,AFp:()=>Ms,ip1:()=>eh,CZH:()=>ju,hGG:()=>p0,z2F:()=>Hu,sBO:()=>Jv,Sil:()=>Lg,_Vd:()=>qd,EJc:()=>QC,SBq:()=>Zf,qLn:()=>nf,vpe:()=>ic,tBr:()=>ni,XFs:()=>en,OlP:()=>Lr,zs3:()=>xa,ZZ4:()=>sp,aQg:()=>zu,soG:()=>th,YKP:()=>Ig,h0i:()=>Kd,PXZ:()=>tI,R0b:()=>Ks,FiY:()=>hr,Lbi:()=>Fg,g9A:()=>Uv,n_E:()=>Yf,Qsj:()=>px,FYo:()=>Ev,JOm:()=>el,q3G:()=>ri,tp0:()=>Is,Rgc:()=>Vu,dDg:()=>eI,q4F:()=>Cv,GfV:()=>cl,s_b:()=>Mg,ifc:()=>Nt,eFA:()=>rI,G48:()=>oI,Gpc:()=>J,f3M:()=>bt,X6Q:()=>aM,_c5:()=>op,VLi:()=>iM,c2e:()=>Hv,zSh:()=>zw,wAp:()=>mn,vHH:()=>je,EiD:()=>bd,mCW:()=>Kl,qzn:()=>Dc,JVY:()=>Iu,pB0:()=>ny,eBb:()=>fm,L6k:()=>Tu,LAX:()=>Yh,cg1:()=>jf,kL8:()=>Hf,yhl:()=>Zl,dqk:()=>Mn,sIi:()=>Gm,CqO:()=>yE,QGY:()=>nc,F4k:()=>Ud,RDi:()=>ln,AaK:()=>re,z3N:()=>Ta,qOj:()=>Ly,TTD:()=>se,_Bn:()=>IC,xp6:()=>Sd,uIk:()=>Vy,ekj:()=>Lf,Suo:()=>Nx,Xpm:()=>fn,lG2:()=>It,Yz7:()=>Rt,cJS:()=>_n,oAB:()=>Be,Yjl:()=>sn,Y36:()=>Bc,_UZ:()=>gE,GkF:()=>ev,BQk:()=>Jm,ynx:()=>ol,qZA:()=>Vd,TgZ:()=>xf,EpF:()=>ka,n5z:()=>Vl,Ikx:()=>fg,LFG:()=>ke,$8M:()=>br,$Z:()=>Df,NdJ:()=>kf,CRH:()=>Fx,kcU:()=>W_,O4$:()=>du,oxw:()=>bE,Hsn:()=>mo,F$t:()=>tv,Q6J:()=>Xm,DdM:()=>xv,VKq:()=>Mv,iGM:()=>Ox,MAs:()=>Ld,CHM:()=>Do,LSH:()=>vm,Udp:()=>zd,WFA:()=>eg,d8E:()=>mv,YNc:()=>Hy,_uU:()=>FE,Oqu:()=>lg,hij:()=>Vf,AsE:()=>lv,Gf:()=>Px});var o=R(273),C=R(7908),b=R(8305),k=R(3719),O=R(3174);function U(a){for(let l in a)if(a[l]===U)return l;throw Error("Could not find renamed property on target object.")}function Y(a,l){for(const c in l)l.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=l[c])}function re(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(re).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function he(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const te=U({__forward_ref__:U});function J(a){return a.__forward_ref__=J,a.toString=function(){return re(this())},a}function we(a){return Xe(a)?a():a}function Xe(a){return"function"==typeof a&&a.hasOwnProperty(te)&&a.__forward_ref__===J}class je extends Error{constructor(l,c){super(function(a,l){return`${a?`NG0${a}: `:""}${l}`}(l,c)),this.code=l}}function ge(a){return"string"==typeof a?a:null==a?"":String(a)}function X(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ge(a)}function Ne(a,l){const c=l?` in ${l}`:"";throw new je("201",`No provider for ${X(a)} found${c}`)}function rt(a,l){null==a&&function(a,l,c,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${c} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function Rt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function _n(a){return{providers:a.providers||[],imports:a.imports||[]}}function ar(a){return ir(a,Xr)||ir(a,Si)}function ir(a,l){return a.hasOwnProperty(l)?a[l]:null}function Ti(a){return a&&(a.hasOwnProperty(vr)||a.hasOwnProperty(_i))?a[vr]:null}const Xr=U({\u0275prov:U}),vr=U({\u0275inj:U}),Si=U({ngInjectableDef:U}),_i=U({ngInjectorDef:U});var en=(()=>((en=en||{})[en.Default=0]="Default",en[en.Host=1]="Host",en[en.Self=2]="Self",en[en.SkipSelf=4]="SkipSelf",en[en.Optional=8]="Optional",en))();let Nn;function Qn(a){const l=Nn;return Nn=a,l}function Hn(a,l,c){const d=ar(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&en.Optional?null:void 0!==l?l:void Ne(re(a),"Injector")}function or(a){return{toString:a}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),Nt=(()=>{return(a=Nt||(Nt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Nt;var a})();const Ft="undefined"!=typeof globalThis&&globalThis,ai="undefined"!=typeof window&&window,li="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Mn=Ft||"undefined"!=typeof global&&global||ai||li,Re={},Ae=[],Le=U({\u0275cmp:U}),it=U({\u0275dir:U}),xe=U({\u0275pipe:U}),$e=U({\u0275mod:U}),ht=U({\u0275fac:U}),wt=U({__NG_ELEMENT_ID__:U});let Xt=0;function fn(a){return or(()=>{const c={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||Ae,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Nt.Emulated,id:"c",styles:a.styles||Ae,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,m=a.features,v=a.pipes;return d.id+=Xt++,d.inputs=ct(a.inputs,c),d.outputs=ct(a.outputs),m&&m.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(on):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(Cr):null,d})}function on(a){return Wt(a)||function(a){return a[it]||null}(a)}function Cr(a){return function(a){return a[xe]||null}(a)}const Ke={};function Be(a){return or(()=>{const l={type:a.type,bootstrap:a.bootstrap||Ae,declarations:a.declarations||Ae,imports:a.imports||Ae,exports:a.exports||Ae,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Ke[a.id]=a.type),l})}function ct(a,l){if(null==a)return Re;const c={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,l&&(l[f]=m)}return c}const It=fn;function sn(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function Wt(a){return a[Le]||null}function Gn(a,l){const c=a[$e]||null;if(!c&&!0===l)throw new Error(`Type ${re(a)} does not have '\u0275mod' property.`);return c}function ti(a){return Array.isArray(a)&&"object"==typeof a[1]}function fi(a){return Array.isArray(a)&&!0===a[1]}function Us(a){return 0!=(8&a.flags)}function $i(a){return 2==(2&a.flags)}function js(a){return 1==(1&a.flags)}function Zr(a){return null!==a.template}function Co(a){return 0!=(512&a[2])}function L(a,l){return a.hasOwnProperty(ht)?a[ht]:null}class V{constructor(l,c,d){this.previousValue=l,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function se(){return ye}function ye(a){return a.type.prototype.ngOnChanges&&(a.setInput=be),de}function de(){const a=j(this),l=null==a?void 0:a.current;if(l){const c=a.previous;if(c===Re)a.previous=l;else for(let d in l)c[d]=l[d];a.current=null,this.ngOnChanges(l)}}function be(a,l,c,d){const f=j(a)||function(a,l){return a[He]=l}(a,{previous:Re,current:null}),m=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[c],D=v[E];m[E]=new V(D&&D.currentValue,l,v===Re),a[d]=l}se.ngInherit=!0;const He="__ngSimpleChanges__";function j(a){return a[He]||null}const Ot="http://www.w3.org/2000/svg";let Vt;function ln(a){Vt=a}function On(a){return!!a.listen}const To={createRenderer:(a,l)=>void 0!==Vt?Vt:"undefined"!=typeof document?document:void 0};function Ir(a){for(;Array.isArray(a);)a=a[0];return a}function pa(a,l){return Ir(l[a])}function xi(a,l){return Ir(l[a.index])}function qo(a,l){return a.data[l]}function sr(a,l){const c=l[a];return ti(c)?c:c[0]}function bl(a){return 4==(4&a[2])}function ma(a){return 128==(128&a[2])}function Wi(a,l){return null==l?null:a[l]}function pc(a){a[18]=0}function Zo(a,l){a[5]+=l;let c=a,d=a[3];for(;null!==d&&(1===l&&1===c[5]||-1===l&&0===c[5]);)d[5]+=l,c=d,d=d[3]}const cn={lFrame:kl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ou(){return cn.bindingsEnabled}function _t(){return cn.lFrame.lView}function Yn(){return cn.lFrame.tView}function Do(a){return cn.lFrame.contextLView=a,a[8]}function Kr(){let a=Tl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Tl(){return cn.lFrame.currentTNode}function Ni(a,l){const c=cn.lFrame;c.currentTNode=a,c.isParent=l}function au(){return cn.lFrame.isParent}function ga(){cn.lFrame.isParent=!1}function Ua(){return cn.isInCheckNoChangesMode}function Sl(a){cn.isInCheckNoChangesMode=a}function Fi(){const a=cn.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Qo(){return cn.lFrame.bindingIndex++}function io(a){const l=cn.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,c}function xl(a,l){const c=cn.lFrame;c.bindingIndex=c.bindingRootIndex=a,_a(l)}function _a(a){cn.lFrame.currentDirectiveIndex=a}function mc(a){const l=cn.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function ja(){return cn.lFrame.currentQueryIndex}function Ml(a){cn.lFrame.currentQueryIndex=a}function gc(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function od(a,l,c){if(c&en.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||c&en.Host||(f=gc(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const d=cn.lFrame=_c();return d.currentTNode=l,d.lView=a,!0}function lu(a){const l=_c(),c=a[1];cn.lFrame=l,l.currentTNode=c.firstChild,l.lView=a,l.tView=c,l.contextLView=a,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function _c(){const a=cn.lFrame,l=null===a?null:a.child;return null===l?kl(a):l}function kl(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function cu(){const a=cn.lFrame;return cn.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const ya=cu;function yc(){const a=cu();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Nr(){return cn.lFrame.selectedIndex}function Xo(a){cn.lFrame.selectedIndex=a}function Fr(){const a=cn.lFrame;return qo(a.tView,a.selectedIndex)}function du(){cn.lFrame.currentNamespace=Ot}function W_(){cn.lFrame.currentNamespace=null}function Rl(a,l){for(let c=l.directiveStart,d=l.directiveEnd;c<d;c++){const m=a.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:B,ngOnDestroy:G}=m;v&&(a.contentHooks||(a.contentHooks=[])).push(-c,v),E&&((a.contentHooks||(a.contentHooks=[])).push(c,E),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(c,E)),D&&(a.viewHooks||(a.viewHooks=[])).push(-c,D),B&&((a.viewHooks||(a.viewHooks=[])).push(c,B),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(c,B)),null!=G&&(a.destroyHooks||(a.destroyHooks=[])).push(c,G)}}function hu(a,l,c){fu(a,l,3,c)}function Ol(a,l,c,d){(3&a[2])===c&&fu(a,l,c,d)}function Jo(a,l){let c=a[2];(3&c)===l&&(c&=2047,c+=1,a[2]=c)}function fu(a,l,c,d){const m=null!=d?d:-1,v=l.length-1;let E=0;for(let D=void 0!==d?65535&a[18]:0;D<v;D++)if("number"==typeof l[D+1]){if(E=l[D],null!=d&&E>=d)break}else l[D]<0&&(a[18]+=65536),(E<m||-1==m)&&(ad(a,c,l,D),a[18]=(4294901760&a[18])+D+2),D++}function ad(a,l,c,d){const f=c[d]<0,m=c[d+1],E=a[f?-c[d]:c[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class Pl{constructor(l,c,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Tr(a,l,c){const d=On(a);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const v=c[f++],E=c[f++],D=c[f++];d?a.setAttribute(l,E,D,v):l.setAttributeNS(v,E,D)}else{const v=m,E=c[++f];xt(v)?d&&a.setProperty(l,v,E):d?a.setAttribute(l,v,E):l.setAttribute(v,E),f++}}return f}function va(a){return 3===a||4===a||6===a}function xt(a){return 64===a.charCodeAt(0)}function rn(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let c=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?c=f:0===c||pi(a,c,f,null,-1===c||2===c?l[++d]:null)}}return a}function pi(a,l,c,d,f){let m=0,v=a.length;if(-1===l)v=-1;else for(;m<a.length;){const E=a[m++];if("number"==typeof E){if(E===l){v=-1;break}if(E>l){v=m-1;break}}}for(;m<a.length;){const E=a[m];if("number"==typeof E)break;if(E===c){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(a.splice(v,0,l),m=v+1),a.splice(m++,0,c),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function kr(a){return-1!==a}function ba(a){return 32767&a}function Ga(a,l){let c=function(a){return a>>16}(a),d=l;for(;c>0;)d=d[15],c--;return d}let Gr=!0;function Fl(a){const l=Gr;return Gr=a,l}let Uh=0;function ta(a,l){const c=dr(a,l);if(-1!==c)return c;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,Ec(d.data,a),Ec(l,null),Ec(d.blueprint,null));const f=Ll(a,l),m=a.injectorIndex;if(kr(f)){const v=ba(f),E=Ga(f,l),D=E[1].data;for(let B=0;B<8;B++)l[m+B]=E[v+B]|D[v+B]}return l[m+8]=f,m}function Ec(a,l){a.push(0,0,0,0,0,0,0,0,l)}function dr(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Ll(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,d=null,f=l;for(;null!==f;){const m=f[1],v=m.type;if(d=2===v?m.declTNode:1===v?f[6]:null,null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function zs(a,l,c){!function(a,l,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(wt)&&(d=c[wt]),null==d&&(d=c[wt]=Uh++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,c)}function Gs(a,l,c){if(c&en.Optional)return a;Ne(l,"NodeInjector")}function Bl(a,l,c,d){if(c&en.Optional&&void 0===d&&(d=null),0==(c&(en.Self|en.Host))){const f=a[9],m=Qn(void 0);try{return f?f.get(l,d,c&en.Optional):Hn(l,d,c&en.Optional)}finally{Qn(m)}}return Gs(d,l,c)}function wa(a,l,c,d=en.Default,f){if(null!==a){const m=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(wt)?a[wt]:void 0;return"number"==typeof l?l>=0?255&l:cd:l}(c);if("function"==typeof m){if(!od(l,a,d))return d&en.Host?Gs(f,c,d):Bl(l,c,d,f);try{const v=m(d);if(null!=v||d&en.Optional)return v;Ne(c)}finally{ya()}}else if("number"==typeof m){let v=null,E=dr(a,l),D=-1,B=d&en.Host?l[16][6]:null;for((-1===E||d&en.SkipSelf)&&(D=-1===E?Ll(a,l):l[E+8],-1!==D&&Yr(d,!1)?(v=l[1],E=ba(D),l=Ga(D,l)):E=-1);-1!==E;){const G=l[1];if(ao(m,E,G.data)){const me=Ao(E,l,c,v,d,B);if(me!==so)return me}D=l[E+8],-1!==D&&Yr(d,l[1].data[E+8]===B)&&ao(m,E,l)?(v=G,E=ba(D),l=Ga(D,l)):E=-1}}}return Bl(l,c,d,f)}const so={};function cd(){return new Ea(Kr(),_t())}function Ao(a,l,c,d,f,m){const v=l[1],E=v.data[a+8],G=Li(E,v,c,null==d?$i(E)&&Gr:d!=v&&0!=(3&E.type),f&en.Host&&m===E);return null!==G?oo(l,v,G,E):so}function Li(a,l,c,d,f){const m=a.providerIndexes,v=l.data,E=1048575&m,D=a.directiveStart,G=m>>20,Pe=f?E+G:a.directiveEnd;for(let We=d?E:E+G;We<Pe;We++){const at=v[We];if(We<D&&c===at||We>=D&&at.type===c)return We}if(f){const We=v[D];if(We&&Zr(We)&&We.type===c)return D}return null}function oo(a,l,c,d){let f=a[c];const m=l.data;if(function(a){return a instanceof Pl}(f)){const v=f;v.resolving&&function(a,l){throw new je("200",`Circular dependency in DI detected for ${a}`)}(X(m[c]));const E=Fl(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Qn(v.injectImpl):null;od(a,d,en.Default);try{f=a[c]=v.factory(void 0,m,a,d),l.firstCreatePass&&c>=d.directiveStart&&function(a,l,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const v=ye(l);(c.preOrderHooks||(c.preOrderHooks=[])).push(a,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,v)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-a,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,m))}(c,m[c],l)}finally{null!==D&&Qn(D),Fl(E),v.resolving=!1,ya()}}return f}function ao(a,l,c){return!!(c[l+(a>>5)]&1<<a)}function Yr(a,l){return!(a&en.Self||a&en.Host&&l)}class Ea{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,d){return wa(this._tNode,this._lView,l,d,c)}}function Vl(a){return or(()=>{const l=a.prototype.constructor,c=l[ht]||Qr(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[ht]||Qr(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Qr(a){return Xe(a)?()=>{const l=Qr(we(a));return l&&l()}:L(a)}function br(a){return function(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const c=a.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(va(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===l)return c[f+1];f+=2}}}return null}(Kr(),a)}const xo="__parameters__";function gr(a,l,c){return or(()=>{const d=function(a){return function(...c){if(a){const d=a(...c);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return E.annotation=v,E;function E(D,B,G){const me=D.hasOwnProperty(xo)?D[xo]:Object.defineProperty(D,xo,{value:[]})[xo];for(;me.length<=G;)me.push(null);return(me[G]=me[G]||[]).push(v),D}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class Lr{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Rt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qa=new Lr("AnalyzeForEntryComponents");function ps(a,l){void 0===l&&(l=a);for(let c=0;c<a.length;c++){let d=a[c];Array.isArray(d)?(l===a&&(l=a.slice(0,c)),ps(d,l)):l!==a&&l.push(d)}return l}function lo(a,l){a.forEach(c=>Array.isArray(c)?lo(c,l):l(c))}function Hl(a,l,c){l>=a.length?a.push(c):a.splice(l,0,c)}function na(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Mo(a,l){const c=[];for(let d=0;d<a;d++)c.push(l);return c}function qi(a,l,c){let d=Ws(a,l);return d>=0?a[1|d]=c:(d=~d,function(a,l,c,d){let f=a.length;if(f==l)a.push(c,d);else if(1===f)a.push(d,a[0]),a[0]=c;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=c,a[l+1]=d}}(a,d,l,c)),d}function co(a,l){const c=Ws(a,l);if(c>=0)return a[1|c]}function Ws(a,l){return function(a,l,c){let d=0,f=a.length>>c;for(;f!==d;){const m=d+(f-d>>1),v=a[m<<c];if(l===v)return m<<c;v>l?f=m:d=m+1}return~(f<<c)}(a,l,1)}const qs={},fd="__NG_DI_FLAG__",Ka="ngTempTokenPath",bu=/\n/gm,wu="__source",A=U({provide:String,useValue:U});let P;function Z(a){const l=P;return P=a,l}function Ce(a,l=en.Default){if(void 0===P)throw new Error("inject() must be called from an injection context");return null===P?Hn(a,void 0,l):P.get(a,l&en.Optional?null:void 0,l)}function ke(a,l=en.Default){return(Nn||Ce)(we(a),l)}const bt=ke;function Mt(a){const l=[];for(let c=0;c<a.length;c++){const d=we(a[c]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,m=en.Default;for(let v=0;v<d.length;v++){const E=d[v],D=yn(E);"number"==typeof D?-1===D?f=E.token:m|=D:f=E}l.push(ke(f,m))}else l.push(ke(d))}return l}function pn(a,l){return a[fd]=l,a.prototype[fd]=l,a}function yn(a){return a[fd]}const ni=pn(gr("Inject",a=>({token:a})),-1),hr=pn(gr("Optional"),8),Is=pn(gr("SkipSelf"),4);let fo;function Wl(a){var l;return(null==(l=function(){if(void 0===fo&&(fo=null,Mn.trustedTypes))try{fo=Mn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return fo}())?void 0:l.createHTML(a))||a}class Ja{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zh extends Ja{getTypeName(){return"HTML"}}class Kh extends Ja{getTypeName(){return"Style"}}class hm extends Ja{getTypeName(){return"Script"}}class Cu extends Ja{getTypeName(){return"URL"}}class ty extends Ja{getTypeName(){return"ResourceURL"}}function Ta(a){return a instanceof Ja?a.changingThisBreaksApplicationSecurity:a}function Dc(a,l){const c=Zl(a);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===l}function Zl(a){return a instanceof Ja&&a.getTypeName()||null}function Iu(a){return new Zh(a)}function Tu(a){return new Kh(a)}function fm(a){return new hm(a)}function Yh(a){return new Cu(a)}function ny(a){return new ty(a)}class ry{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const c=(new window.DOMParser).parseFromString(Wl(l),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(l):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class pm{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(l){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Wl(l),c;const d=this.inertDocument.createElement("body");return d.innerHTML=Wl(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const c=l.attributes;for(let f=c.length-1;0<f;f--){const v=c.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&l.removeAttribute(v)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const gm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,iy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kl(a){return(a=String(a)).match(gm)||a.match(iy)?a:"unsafe:"+a}function g(a){const l={};for(const c of a.split(","))l[c]=!0;return l}function _(...a){const l={};for(const c of a)for(const d in c)c.hasOwnProperty(d)&&(l[d]=!0);return l}const T=g("area,br,col,hr,img,wbr"),H=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),le=g("rp,rt"),Zt=_(T,_(H,g("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_(le,g("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_(le,H)),An=g("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Br=g("srcset"),Da=_(An,Br,g("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),g("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xc=g("script,style,template");class Xh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let c=l.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(l){const c=l.nodeName.toLowerCase();if(!Zt.hasOwnProperty(c))return this.sanitizedSomething=!0,!xc.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=l.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),v=m.name,E=v.toLowerCase();if(!Da.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let D=m.value;An[E]&&(D=Kl(D)),Br[E]&&(a=D,D=(a=String(a)).split(",").map(l=>Kl(l.trim())).join(", ")),this.buf.push(" ",v,'="',vd(D),'"')}var a;return this.buf.push(">"),!0}endElement(l){const c=l.nodeName.toLowerCase();Zt.hasOwnProperty(c)&&!T.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(l){this.buf.push(vd(l))}checkClobberedElement(l,c){if(c&&(l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return c}}const Mc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yd=/([^\#-~ |!])/g;function vd(a){return a.replace(/&/g,"&amp;").replace(Mc,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(yd,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kc;function bd(a,l){let c=null;try{kc=kc||function(a){const l=new pm(a);return function(){try{return!!(new window.DOMParser).parseFromString(Wl(""),"text/html")}catch(a){return!1}}()?new ry(l):l}(a);let d=l?String(l):"";c=kc.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=c.innerHTML,c=kc.getInertBodyElement(d)}while(d!==m);return Wl((new Xh).sanitizeChildren(Su(c)||c))}finally{if(c){const d=Su(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Su(a){return"content"in a&&function(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var ri=(()=>((ri=ri||{})[ri.NONE=0]="NONE",ri[ri.HTML=1]="HTML",ri[ri.STYLE=2]="STYLE",ri[ri.SCRIPT=3]="SCRIPT",ri[ri.URL=4]="URL",ri[ri.RESOURCE_URL=5]="RESOURCE_URL",ri))();function vm(a){const l=function(){const a=_t();return a&&a[12]}();return l?l.sanitize(ri.URL,a)||"":Dc(a,"URL")?Ta(a):Kl(ge(a))}const oy="__ngContext__";function Ds(a,l){a[oy]=l}function ay(a){const l=function(a){return a[oy]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function cy(a){return a.ngOriginalError}function WS(a,...l){a.error(...l)}class nf{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l),d=(a=l)&&a.ngErrorLogger||WS;var a;d(this._console,"ERROR",l),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&cy(l);for(;c&&cy(c);)c=cy(c);return c||null}}const iw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mn))();function Aa(a){return a instanceof Function?a():a}var el=(()=>((el=el||{})[el.Important=1]="Important",el[el.DashCase=2]="DashCase",el))();function rf(a,l){return undefined(a,l)}function sf(a){const l=a[3];return fi(l)?l[3]:l}function fy(a){return cw(a[13])}function py(a){return cw(a[4])}function cw(a){for(;null!==a&&!fi(a);)a=a[4];return a}function xu(a,l,c,d,f){if(null!=d){let m,v=!1;fi(d)?m=d:ti(d)&&(v=!0,d=d[0]);const E=Ir(d);0===a&&null!==c?null==f?dw(l,c,E):Mu(l,c,E,f||null,!0):1===a&&null!==c?Mu(l,c,E,f||null,!0):2===a?function(a,l,c){const d=Mm(a,l);d&&function(a,l,c,d){On(a)?a.removeChild(l,c,d):l.removeChild(c)}(a,d,l,c)}(l,E,v):3===a&&l.destroyNode(E),null!=m&&function(a,l,c,d,f){const m=c[7];m!==Ir(c)&&xu(l,a,d,m,f);for(let E=10;E<c.length;E++){const D=c[E];af(D[1],D,a,l,d,m)}}(l,a,m,c,f)}}function gy(a,l,c){return On(a)?a.createElement(l,c):null===c?a.createElement(l):a.createElementNS(c,l)}function _y(a,l){const c=a[9],d=c.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,Zo(f,-1)),c.splice(d,1)}function yy(a,l){if(a.length<=10)return;const c=10+l,d=a[c];if(d){const f=d[17];null!==f&&f!==a&&_y(f,d),l>0&&(a[c-1][4]=d[4]);const m=na(a,10+l);!function(a,l){af(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function vy(a,l){if(!(256&l[2])){const c=l[11];On(c)&&c.destroyNode&&af(a,l,c,3,null,null),function(a){let l=a[13];if(!l)return xm(a[1],a);for(;l;){let c=null;if(ti(l))c=l[13];else{const d=l[10];d&&(c=d)}if(!c){for(;l&&!l[4]&&l!==a;)ti(l)&&xm(l[1],l),l=l[3];null===l&&(l=a),ti(l)&&xm(l[1],l),c=l&&l[4]}l=c}}(l)}}function xm(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function(a,l){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let d=0;d<c.length;d+=2){const f=l[c[d]];if(!(f instanceof Pl)){const m=c[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=f[m[v]],D=m[v+1];try{D.call(E)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function(a,l){const c=a.cleanup,d=l[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+1],E="function"==typeof v?v(l):Ir(l[v]),D=d[f=c[m+2]],B=c[m+3];"boolean"==typeof B?E.removeEventListener(c[m],D,B):B>=0?d[f=B]():d[f=-B].unsubscribe(),m+=2}else{const v=d[f=c[m+1]];c[m].call(v)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();l[7]=null}}(a,l),1===l[1].type&&On(l[11])&&l[11].destroy();const c=l[17];if(null!==c&&fi(l[3])){c!==l[3]&&_y(c,l);const d=l[19];null!==d&&d.detachView(a)}}}function Rc(a,l,c){return function(a,l,c){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return c[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===Nt.None||f===Nt.Emulated)return null}return xi(d,c)}(a,l.parent,c)}function Mu(a,l,c,d,f){On(a)?a.insertBefore(l,c,d,f):l.insertBefore(c,d,f)}function dw(a,l,c){On(a)?a.appendChild(l,c):l.appendChild(c)}function Id(a,l,c,d,f){null!==d?Mu(a,l,c,d,f):dw(a,l,c)}function Mm(a,l){return On(a)?a.parentNode(l):l.parentNode}function Ey(a,l,c){return fw(a,l,c)}let fw=function(a,l,c){return 40&a.type?xi(a,c):null};function Rm(a,l,c,d){const f=Rc(a,d,l),m=l[11],E=Ey(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(c))for(let D=0;D<c.length;D++)Id(m,f,c[D],E,!1);else Id(m,f,c,E,!1)}function Om(a,l){if(null!==l){const c=l.type;if(3&c)return xi(l,a);if(4&c)return Ty(-1,a[l.index]);if(8&c){const d=l.child;if(null!==d)return Om(a,d);{const f=a[l.index];return fi(f)?Ty(-1,f):Ir(f)}}if(32&c)return rf(l,a)()||Ir(a[l.index]);{const d=Iy(a,l);return null!==d?Array.isArray(d)?d[0]:Om(sf(a[16]),d):Om(a,l.next)}}return null}function Iy(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Ty(a,l){const c=10+a+1;if(c<l.length){const d=l[c],f=d[1].firstChild;if(null!==f)return Om(d,f)}return l[7]}function Sy(a,l,c,d,f,m,v){for(;null!=c;){const E=d[c.index],D=c.type;if(v&&0===l&&(E&&Ds(Ir(E),d),c.flags|=4),64!=(64&c.flags))if(8&D)Sy(a,l,c.child,d,f,m,!1),xu(l,a,f,E,m);else if(32&D){const B=rf(c,d);let G;for(;G=B();)xu(l,a,f,G,m);xu(l,a,f,E,m)}else 16&D?pw(a,l,d,c,f,m):xu(l,a,f,E,m);c=v?c.projectionNext:c.next}}function af(a,l,c,d,f,m){Sy(c,d,a.firstChild,l,f,m,!1)}function pw(a,l,c,d,f,m){const v=c[16],D=v[6].projection[d.projection];if(Array.isArray(D))for(let B=0;B<D.length;B++)xu(l,a,f,D[B],m);else Sy(a,l,D,v[3],f,m,!0)}function uD(a,l,c){On(a)?a.setAttribute(l,"style",c):l.style.cssText=c}function Pm(a,l,c){On(a)?""===c?a.removeAttribute(l,"class"):a.setAttribute(l,"class",c):l.className=c}function dD(a,l,c){let d=a.length;for(;;){const f=a.indexOf(l,c);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}c=f+1}}const hD="ng-template";function mw(a,l,c){let d=0;for(;d<a.length;){let f=a[d++];if(c&&"class"===f){if(f=a[d],-1!==dD(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function lf(a){return 4===a.type&&a.value!==hD}function ii(a,l,c){return l===(4!==a.type||c?a.value:hD)}function si(a,l,c){let d=4;const f=a.attrs||[],m=function(a){for(let l=0;l<a.length;l++)if(va(a[l]))return l;return a.length}(f);let v=!1;for(let E=0;E<l.length;E++){const D=l[E];if("number"!=typeof D){if(!v)if(4&d){if(d=2|1&d,""!==D&&!ii(a,D,c)||""===D&&1===l.length){if(Ki(d))return!1;v=!0}}else{const B=8&d?D:l[++E];if(8&d&&null!==a.attrs){if(!mw(a.attrs,B,c)){if(Ki(d))return!1;v=!0}continue}const me=fD(8&d?"class":D,f,lf(a),c);if(-1===me){if(Ki(d))return!1;v=!0;continue}if(""!==B){let Pe;Pe=me>m?"":f[me+1].toLowerCase();const We=8&d?Pe:null;if(We&&-1!==dD(We,B,0)||2&d&&B!==Pe){if(Ki(d))return!1;v=!0}}}}else{if(!v&&!Ki(d)&&!Ki(D))return!1;if(v&&Ki(D))continue;v=!1,d=D|1&d}}return Ki(d)||v}function Ki(a){return 0==(1&a)}function fD(a,l,c,d){if(null===l)return-1;let f=0;if(d||!c){let m=!1;for(;f<l.length;){const v=l[f];if(v===a)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=l[++f];for(;"string"==typeof E;)E=l[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function(a,l){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const d=a[c];if("number"==typeof d)return-1;if(d===l)return c;c++}return-1}(l,a)}function cf(a,l,c=!1){for(let d=0;d<l.length;d++)if(si(a,l[d],c))return!0;return!1}function pD(a,l){e:for(let c=0;c<l.length;c++){const d=l[c];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function gw(a,l){return a?":not("+l.trim()+")":l}function mD(a){let l=a[0],c=1,d=2,f="",m=!1;for(;c<a.length;){let v=a[c];if("string"==typeof v)if(2&d){const E=a[++c];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Ki(v)&&(l+=gw(m,f),f=""),d=v,m=m||!Ki(d);c++}return""!==f&&(l+=gw(m,f)),l}const kn={};function Sd(a){_w(Yn(),_t(),Nr()+a,Ua())}function _w(a,l,c,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&hu(l,m,c)}else{const m=a.preOrderHooks;null!==m&&Ol(l,m,0,c)}Xo(c)}function Dy(a,l){return a<<17|l<<2}function po(a){return a>>17&32767}function Ad(a){return 2|a}function Oc(a){return(131068&a)>>2}function vw(a,l){return-131069&a|l<<2}function bw(a){return 1|a}function Mw(a,l){const c=a.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const v=a.data[m];Ml(f),v.contentQueries(2,l[m],m)}}}function ff(a,l,c,d,f,m,v,E,D,B){const G=l.blueprint.slice();return G[0]=f,G[2]=140|d,pc(G),G[3]=G[15]=a,G[8]=c,G[10]=v||a&&a[10],G[11]=E||a&&a[11],G[12]=D||a&&a[12]||null,G[9]=B||a&&a[9]||null,G[6]=m,G[16]=2==l.type?a[16]:G,G}function Od(a,l,c,d,f){let m=a.data[l];if(null===m)m=function(a,l,c,d,f){const m=Tl(),v=au(),D=a.data[l]=function(a,l,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,l,d,f);return null===a.firstChild&&(a.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(a,l,c,d,f),cn.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const v=function(){const a=cn.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Ni(m,!0),m}function pf(a,l,c,d){if(0===c)return-1;const f=l.length;for(let m=0;m<c;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function Um(a,l,c){lu(l);try{const d=a.viewQuery;null!==d&&jw(1,d,c);const f=a.template;null!==f&&kw(a,l,f,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Mw(a,l),a.staticViewQueries&&jw(2,a.viewQuery,c);const m=a.components;null!==m&&function(a,l){for(let c=0;c<l.length;c++)FP(a,l[c])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,yc()}}function mf(a,l,c,d){const f=l[2];if(256==(256&f))return;lu(l);const m=Ua();try{pc(l),function(a){cn.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&kw(a,l,c,2,d);const v=3==(3&f);if(!m)if(v){const B=a.preOrderCheckHooks;null!==B&&hu(l,B,null)}else{const B=a.preOrderHooks;null!==B&&Ol(l,B,0,null),Jo(l,0)}if(function(a){for(let l=fy(a);null!==l;l=py(l)){if(!l[2])continue;const c=l[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(1024&f[2])&&Zo(m,1),f[2]|=1024}}}(l),function(a){for(let l=fy(a);null!==l;l=py(l))for(let c=10;c<l.length;c++){const d=l[c],f=d[1];ma(d)&&mf(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&Mw(a,l),!m)if(v){const B=a.contentCheckHooks;null!==B&&hu(l,B)}else{const B=a.contentHooks;null!==B&&Ol(l,B,1),Jo(l,1)}!function(a,l){const c=a.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Xo(~f);else{const m=f,v=c[++d],E=c[++d];xl(v,m),E(2,l[m])}}}finally{Xo(-1)}}(a,l);const E=a.components;null!==E&&function(a,l){for(let c=0;c<l.length;c++)NP(a,l[c])}(l,E);const D=a.viewQuery;if(null!==D&&jw(2,D,d),!m)if(v){const B=a.viewCheckHooks;null!==B&&hu(l,B)}else{const B=a.viewHooks;null!==B&&Ol(l,B,2),Jo(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),m||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Zo(l[3],-1))}finally{yc()}}function DD(a,l,c,d){const f=l[10],m=!Ua(),v=bl(l);try{m&&!v&&f.begin&&f.begin(),v&&Um(a,l,d),mf(a,l,c,d)}finally{m&&!v&&f.end&&f.end()}}function kw(a,l,c,d,f){const m=Nr(),v=2&d;try{Xo(-1),v&&l.length>20&&_w(a,l,20,Ua()),c(d,f)}finally{Xo(m)}}function AD(a,l,c){if(Us(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const v=a.data[m];v.contentQueries&&v.contentQueries(1,c[m],m)}}}function Rw(a,l,c){!ou()||(function(a,l,c,d){const f=c.directiveStart,m=c.directiveEnd;a.firstCreatePass||ta(c,l),Ds(d,l);const v=c.initialInputs;for(let E=f;E<m;E++){const D=a.data[E],B=Zr(D);B&&MP(l,c,D);const G=oo(l,a,E,c);Ds(G,l),null!==v&&kP(0,E-f,G,D,0,v),B&&(sr(c.index,l)[8]=G)}}(a,l,c,xi(c,l)),128==(128&c.flags)&&function(a,l,c){const d=c.directiveStart,f=c.directiveEnd,v=c.index,E=cn.lFrame.currentDirectiveIndex;try{Xo(v);for(let D=d;D<f;D++){const B=a.data[D],G=l[D];_a(D),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&FD(B,G)}}finally{Xo(-1),_a(E)}}(a,l,c))}function Ow(a,l,c=xi){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],E=-1===v?c(l,a):a[v];a[f++]=E}}}function xD(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Oy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Oy(a,l,c,d,f,m,v,E,D,B){const G=20+d,me=G+f,Pe=function(a,l){const c=[];for(let d=0;d<l;d++)c.push(d<a?null:kn);return c}(G,me),We="function"==typeof B?B():B;return Pe[1]={type:a,blueprint:Pe,template:c,queries:null,viewQuery:E,declTNode:l,data:Pe.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:We,incompleteFirstPass:!1}}function kD(a,l,c,d){const f=zD(l);null===c?f.push(d):(f.push(c),a.firstCreatePass&&GD(a).push(d,f.length-1))}function RD(a,l,c){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(l,f):c[d]=[l,f]}return c}function sa(a,l,c,d,f,m,v,E){const D=xi(l,c);let G,B=l.inputs;!E&&null!=B&&(G=B[d])?(qD(a,c,G,d,f),$i(l)&&function(a,l){const c=sr(l,a);16&c[2]||(c[2]|=64)}(c,l.index)):3&l.type&&(d=function(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=v?v(f,l.value||"",d):f,On(m)?m.setProperty(D,d,f):xt(d)||(D.setProperty?D.setProperty(d,f):D[d]=f))}function Nw(a,l,c,d){let f=!1;if(ou()){const m=function(a,l,c){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];cf(c,v.selectors,!1)&&(f||(f=[]),zs(ta(c,l),a,v.type),Zr(v)?(LD(a,c),f.unshift(v)):f.push(v))}return f}(a,l,c),v=null===d?null:{"":-1};if(null!==m){f=!0,BD(c,a.data.length,m.length);for(let G=0;G<m.length;G++){const me=m[G];me.providersResolver&&me.providersResolver(me)}let E=!1,D=!1,B=pf(a,l,m.length,null);for(let G=0;G<m.length;G++){const me=m[G];c.mergedAttrs=rn(c.mergedAttrs,me.hostAttrs),VD(a,c,l,B,me),xP(B,me,v),null!==me.contentQueries&&(c.flags|=8),(null!==me.hostBindings||null!==me.hostAttrs||0!==me.hostVars)&&(c.flags|=128);const Pe=me.type.prototype;!E&&(Pe.ngOnChanges||Pe.ngOnInit||Pe.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c.index),E=!0),!D&&(Pe.ngOnChanges||Pe.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c.index),D=!0),B++}!function(a,l){const d=l.directiveEnd,f=a.data,m=l.attrs,v=[];let E=null,D=null;for(let B=l.directiveStart;B<d;B++){const G=f[B],me=G.inputs,Pe=null===m||lf(l)?null:UD(me,m);v.push(Pe),E=RD(me,B,E),D=RD(G.outputs,B,D)}null!==E&&(E.hasOwnProperty("class")&&(l.flags|=16),E.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=v,l.inputs=E,l.outputs=D}(a,c)}v&&function(a,l,c){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=c[l[f+1]];if(null==m)throw new je("301",`Export of name '${l[f+1]}' not found!`);d.push(l[f],m)}}}(c,d,v)}return c.mergedAttrs=rn(c.mergedAttrs,c.attrs),f}function ND(a,l,c,d,f,m){const v=m.hostBindings;if(v){let E=a.hostBindingOpCodes;null===E&&(E=a.hostBindingOpCodes=[]);const D=~l.index;(function(a){let l=a.length;for(;l>0;){const c=a[--l];if("number"==typeof c&&c<0)return c}return 0})(E)!=D&&E.push(D),E.push(d,f,v)}}function FD(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function LD(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function xP(a,l,c){if(c){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)c[l.exportAs[d]]=a;Zr(l)&&(c[""]=a)}}function BD(a,l,c){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+c,a.providerIndexes=l}function VD(a,l,c,d,f){a.data[d]=f;const m=f.factory||(f.factory=L(f.type)),v=new Pl(m,Zr(f),null);a.blueprint[d]=v,c[d]=v,ND(a,l,0,d,pf(a,c,f.hostVars,kn),f)}function MP(a,l,c){const d=xi(l,a),f=xD(c),m=a[10],v=Py(a,ff(a,f,null,c.onPush?64:16,d,l,m,m.createRenderer(d,c),null,null));a[l.index]=v}function Jl(a,l,c,d,f,m){const v=xi(a,l);!function(a,l,c,d,f,m,v){if(null==m)On(a)?a.removeAttribute(l,f,c):l.removeAttribute(f);else{const E=null==v?ge(m):v(m,d||"",f);On(a)?a.setAttribute(l,f,E,c):c?l.setAttributeNS(c,f,E):l.setAttribute(f,E)}}(l[11],v,m,a.value,c,d,f)}function kP(a,l,c,d,f,m){const v=m[l];if(null!==v){const E=d.setInput;for(let D=0;D<v.length;){const B=v[D++],G=v[D++],me=v[D++];null!==E?d.setInput(c,me,B,G):c[G]=me}}}function UD(a,l){let c=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return c}function jD(a,l,c,d){return new Array(a,!0,!1,l,null,0,d,c,null,null)}function NP(a,l){const c=sr(l,a);if(ma(c)){const d=c[1];80&c[2]?mf(d,c,d.template,c[8]):c[5]>0&&Lw(c)}}function Lw(a){for(let d=fy(a);null!==d;d=py(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const v=m[1];mf(v,m,v.template,m[8])}else m[5]>0&&Lw(m)}const c=a[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=sr(c[d],a);ma(f)&&f[5]>0&&Lw(f)}}function FP(a,l){const c=sr(l,a),d=c[1];(function(a,l){for(let c=l.length;c<a.blueprint.length;c++)l.push(a.blueprint[c])})(d,c),Um(d,c,c[8])}function Py(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Bw(a){for(;a;){a[2]|=64;const l=sf(a);if(Co(a)&&!l)return a;a=l}return null}function Uw(a,l,c){const d=l[10];d.begin&&d.begin();try{mf(a,l,a.template,c)}catch(f){throw WD(l,f),f}finally{d.end&&d.end()}}function HD(a){!function(a){for(let l=0;l<a.components.length;l++){const c=a.components[l],d=ay(c),f=d[1];DD(f,d,f.template,c)}}(a[8])}function jw(a,l,c){Ml(0),l(a,c)}const jP=(()=>Promise.resolve(null))();function zD(a){return a[7]||(a[7]=[])}function GD(a){return a.cleanup||(a.cleanup=[])}function $D(a,l,c){return(null===a||Zr(a))&&(c=function(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(c[l.index])),c[11]}function WD(a,l){const c=a[9],d=c?c.get(nf,null):null;d&&d.handleError(l)}function qD(a,l,c,d,f){for(let m=0;m<c.length;){const v=c[m++],E=c[m++],D=l[v],B=a.data[v];null!==B.setInput?B.setInput(D,f,d,E):D[E]=f}}function Pc(a,l,c){const d=pa(l,a);!function(a,l,c){On(a)?a.setValue(l,c):l.textContent=c}(a[11],d,c)}function Ny(a,l,c){let d=c?a.styles:null,f=c?a.classes:null,m=0;if(null!==l)for(let v=0;v<l.length;v++){const E=l[v];"number"==typeof E?m=E:1==m?f=he(f,E):2==m&&(d=he(d,E+": "+l[++v]+";"))}c?a.styles=d:a.stylesWithoutHost=d,c?a.classes=f:a.classesWithoutHost=f}const Hw=new Lr("INJECTOR",-1);class ZD{get(l,c=qs){if(c===qs){const d=new Error(`NullInjectorError: No provider for ${re(l)}!`);throw d.name="NullInjectorError",d}return c}}const zw=new Lr("Set Injector scope."),jm={},GP={};let Gw;function KD(){return void 0===Gw&&(Gw=new ZD),Gw}function YD(a,l=null,c=null,d){const f=QD(a,l,c,d);return f._resolveInjectorDefTypes(),f}function QD(a,l=null,c=null,d){return new $P(a,c,l||KD(),d)}class $P{constructor(l,c,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&lo(c,E=>this.processProvider(E,l,c)),lo([l],E=>this.processInjectorType(E,[],m)),this.records.set(Hw,gf(void 0,this));const v=this.records.get(zw);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof l?null:re(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,c=qs,d=en.Default){this.assertNotDestroyed();const f=Z(this),m=Qn(void 0);try{if(!(d&en.SkipSelf)){let E=this.records.get(l);if(void 0===E){const D=("function"==typeof(a=l)||"object"==typeof a&&a instanceof Lr)&&ar(l);E=D&&this.injectableDefInScope(D)?gf($w(l),jm):null,this.records.set(l,E)}if(null!=E)return this.hydrate(l,E)}return(d&en.Self?KD():this.parent).get(l,c=d&en.Optional&&c===qs?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[Ka]=v[Ka]||[]).unshift(re(l)),f)throw v;return function(a,l,c,d){const f=a[Ka];throw l[wu]&&f.unshift(l[wu]),a.message=function(a,l,c,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=re(l);if(Array.isArray(l))f=l.map(re).join(" -> ");else if("object"==typeof l){let m=[];for(let v in l)if(l.hasOwnProperty(v)){let E=l[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):re(E)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${a.replace(bu,"\n  ")}`}("\n"+a.message,f,c,d),a.ngTokenPath=f,a[Ka]=null,a}(v,l,"R3InjectorError",this.source)}throw v}finally{Qn(m),Z(f)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(re(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(l,c,d){if(!(l=we(l)))return!1;let f=Ti(l);const m=null==f&&l.ngModule||void 0,v=void 0===m?l:m,E=-1!==d.indexOf(v);if(void 0!==m&&(f=Ti(m)),null==f)return!1;if(null!=f.imports&&!E){let G;d.push(v);try{lo(f.imports,me=>{this.processInjectorType(me,c,d)&&(void 0===G&&(G=[]),G.push(me))})}finally{}if(void 0!==G)for(let me=0;me<G.length;me++){const{ngModule:Pe,providers:We}=G[me];lo(We,at=>this.processProvider(at,Pe,We||Ae))}}this.injectorDefTypes.add(v);const D=L(v)||(()=>new v);this.records.set(v,gf(D,jm));const B=f.providers;if(null!=B&&!E){const G=l;lo(B,me=>this.processProvider(me,G,B))}return void 0!==m&&void 0!==l.providers}processProvider(l,c,d){let f=_f(l=we(l))?l:we(l&&l.provide);const m=(a=l,JD(a)?gf(void 0,a.useValue):gf(XD(a),jm));var a;if(_f(l)||!0!==l.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=gf(void 0,jm,!0),v.factory=()=>Mt(v.multi),this.records.set(f,v)),f=l,v.multi.push(l)}this.records.set(f,m)}hydrate(l,c){return c.value===jm&&(c.value=GP,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(a=c.value)&&"object"==typeof a&&"function"==typeof a.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var a}injectableDefInScope(l){if(!l.providedIn)return!1;const c=we(l.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function $w(a){const l=ar(a),c=null!==l?l.factory:L(a);if(null!==c)return c;if(a instanceof Lr)throw new Error(`Token ${re(a)} is missing a \u0275prov definition.`);if(a instanceof Function)return function(a){const l=a.length;if(l>0){const d=Mo(l,"?");throw new Error(`Can't resolve all parameters for ${re(a)}: (${d.join(", ")}).`)}const c=function(a){const l=a&&(a[Xr]||a[Si]);if(l){const c=function(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),l}return null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new Error("unreachable")}function XD(a,l,c){let d;if(_f(a)){const f=we(a);return L(f)||$w(f)}if(JD(a))d=()=>we(a.useValue);else if(function(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Mt(a.deps||[]));else if(function(a){return!(!a||!a.useExisting)}(a))d=()=>ke(we(a.useExisting));else{const f=we(a&&(a.useClass||a.provide));if(!function(a){return!!a.deps}(a))return L(f)||$w(f);d=()=>new f(...Mt(a.deps))}return d}function gf(a,l,c=!1){return{factory:a,value:l,multi:c?[]:void 0}}function JD(a){return null!==a&&"object"==typeof a&&A in a}function _f(a){return"function"==typeof a}let xa=(()=>{class a{static create(c,d){var f;if(Array.isArray(c))return YD({name:""},d,c,"");{const m=null!=(f=c.name)?f:"";return YD({name:m},c.parent,c.providers,m)}}}return a.THROW_IF_NOT_FOUND=qs,a.NULL=new ZD,a.\u0275prov=Rt({token:a,providedIn:"any",factory:()=>ke(Hw)}),a.__NG_ELEMENT_ID__=-1,a})();function sA(a,l){Rl(ay(a)[1],Kr())}function Ly(a){let l=function(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const d=[a];for(;l;){let f;if(Zr(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Error("Directives cannot inherit Components");f=l.\u0275dir}if(f){if(c){d.push(f);const v=a;v.inputs=zm(a.inputs),v.declaredInputs=zm(a.declaredInputs),v.outputs=zm(a.outputs);const E=f.hostBindings;E&&lA(a,E);const D=f.viewQuery,B=f.contentQueries;if(D&&oA(a,D),B&&aA(a,B),Y(a.inputs,f.inputs),Y(a.declaredInputs,f.declaredInputs),Y(a.outputs,f.outputs),Zr(f)&&f.data.animation){const G=a.data;G.animation=(G.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(a),E===Ly&&(c=!1)}}l=Object.getPrototypeOf(l)}!function(a){let l=0,c=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=rn(f.hostAttrs,c=rn(c,f.hostAttrs))}}(d)}function zm(a){return a===Re?{}:a===Ae?[]:a}function oA(a,l){const c=a.viewQuery;a.viewQuery=c?(d,f)=>{l(d,f),c(d,f)}:l}function aA(a,l){const c=a.contentQueries;a.contentQueries=c?(d,f,m)=>{l(d,f,m),c(d,f,m)}:l}function lA(a,l){const c=a.hostBindings;a.hostBindings=c?(d,f)=>{l(d,f),c(d,f)}:l}let By=null;function bf(){if(!By){const a=Mn.Symbol;if(a&&a.iterator)By=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<l.length;++c){const d=l[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(By=d)}}}return By}function Gm(a){return!!$m(a)&&(Array.isArray(a)||!(a instanceof Map)&&bf()in a)}function $m(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function rl(a,l,c){return a[l]=c}function _s(a,l,c){return!Object.is(a[l],c)&&(a[l]=c,!0)}function Vy(a,l,c,d){const f=_t();return _s(f,Qo(),l)&&(Yn(),Jl(Fr(),f,a,l,c,d)),Vy}function Ef(a,l,c,d,f,m){const E=function(a,l,c,d){const f=_s(a,l,c);return _s(a,l+1,d)||f}(a,cn.lFrame.bindingIndex,c,f);return io(2),E?l+ge(c)+d+ge(f)+m:kn}function Hy(a,l,c,d,f,m,v,E){const D=_t(),B=Yn(),G=a+20,me=B.firstCreatePass?function(a,l,c,d,f,m,v,E,D){const B=l.consts,G=Od(l,a,4,v||null,Wi(B,E));Nw(l,c,G,Wi(B,D)),Rl(l,G);const me=G.tViews=Oy(2,G,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,B);return null!==l.queries&&(l.queries.template(l,G),me.queries=l.queries.embeddedTView(G)),G}(G,B,D,l,c,d,f,m,v):B.data[G];Ni(me,!1);const Pe=D[11].createComment("");Rm(B,D,Pe,me),Ds(Pe,D),Py(D,D[G]=jD(Pe,D,Pe,me)),js(me)&&Rw(B,D,me),null!=v&&Ow(D,me,E)}function Ld(a){return function(a,l){return a[l]}(cn.lFrame.contextLView,20+a)}function Bc(a,l=en.Default){const c=_t();return null===c?ke(a,l):wa(Kr(),c,we(a),l)}function Df(){throw new Error("invalid")}function Xm(a,l,c){const d=_t();return _s(d,Qo(),l)&&sa(Yn(),Fr(),d,a,l,d[11],c,!1),Xm}function Af(a,l,c,d,f){const v=f?"class":"style";qD(a,c,l.inputs[v],v,d)}function xf(a,l,c,d){const f=_t(),m=Yn(),v=20+a,E=f[11],D=f[v]=gy(E,l,cn.lFrame.currentNamespace),B=m.firstCreatePass?function(a,l,c,d,f,m,v){const E=l.consts,B=Od(l,a,2,f,Wi(E,m));return Nw(l,c,B,Wi(E,v)),null!==B.attrs&&Ny(B,B.attrs,!1),null!==B.mergedAttrs&&Ny(B,B.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,B),B}(v,m,f,0,l,c,d):m.data[v];Ni(B,!0);const G=B.mergedAttrs;null!==G&&Tr(E,D,G);const me=B.classes;null!==me&&Pm(E,D,me);const Pe=B.styles;null!==Pe&&uD(E,D,Pe),64!=(64&B.flags)&&Rm(m,f,D,B),0===cn.lFrame.elementDepthCount&&Ds(D,f),cn.lFrame.elementDepthCount++,js(B)&&(Rw(m,f,B),AD(m,B,f)),null!==d&&Ow(f,B)}function Vd(){let a=Kr();au()?ga():(a=a.parent,Ni(a,!1));const l=a;cn.lFrame.elementDepthCount--;const c=Yn();c.firstCreatePass&&(Rl(c,a),Us(a)&&c.queries.elementEnd(a)),null!=l.classesWithoutHost&&function(a){return 0!=(16&a.flags)}(l)&&Af(c,l,_t(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function(a){return 0!=(32&a.flags)}(l)&&Af(c,l,_t(),l.stylesWithoutHost,!1)}function gE(a,l,c,d){xf(a,l,c,d),Vd()}function ol(a,l,c){const d=_t(),f=Yn(),m=a+20,v=f.firstCreatePass?function(a,l,c,d,f){const m=l.consts,v=Wi(m,d),E=Od(l,a,8,"ng-container",v);return null!==v&&Ny(E,v,!0),Nw(l,c,E,Wi(m,f)),null!==l.queries&&l.queries.elementStart(l,E),E}(m,f,d,l,c):f.data[m];Ni(v,!0);const E=d[m]=d[11].createComment("");Rm(f,d,E,v),Ds(E,d),js(v)&&(Rw(f,d,v),AD(f,v,d)),null!=c&&Ow(d,v)}function Jm(){let a=Kr();const l=Yn();au()?ga():(a=a.parent,Ni(a,!1)),l.firstCreatePass&&(Rl(l,a),Us(a)&&l.queries.elementEnd(a))}function ev(a,l,c){ol(a,l,c),Jm()}function ka(){return _t()}function nc(a){return!!a&&"function"==typeof a.then}function Ud(a){return!!a&&"function"==typeof a.subscribe}const yE=Ud;function kf(a,l,c,d){const f=_t(),m=Yn(),v=Kr();return Rf(m,f,f[11],v,a,l,!!c,d),kf}function eg(a,l){const c=Kr(),d=_t(),f=Yn();return Rf(f,d,$D(mc(f.data),c,d),c,a,l,!1),eg}function Rf(a,l,c,d,f,m,v,E){const D=js(d),G=a.firstCreatePass&&GD(a),me=l[8],Pe=zD(l);let We=!0;if(3&d.type||E){const At=xi(d,l),qt=E?E(At):At,ft=Pe.length,un=E?Jn=>E(Ir(Jn[d.index])):d.index;if(On(c)){let Jn=null;if(!E&&D&&(Jn=function(a,l,c,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===d){const E=l[7],D=f[m+2];return E.length>D?E[D]:null}"string"==typeof v&&(m+=2)}return null}(a,l,f,d.index)),null!==Jn)(Jn.__ngLastListenerFn__||Jn).__ngNextListenerFn__=m,Jn.__ngLastListenerFn__=m,We=!1;else{m=Of(d,l,me,m,!1);const wr=c.listen(qt,f,m);Pe.push(m,wr),G&&G.push(f,un,ft,ft+1)}}else m=Of(d,l,me,m,!0),qt.addEventListener(f,m,v),Pe.push(m),G&&G.push(f,un,ft,v)}else m=Of(d,l,me,m,!1);const at=d.outputs;let Et;if(We&&null!==at&&(Et=at[f])){const At=Et.length;if(At)for(let qt=0;qt<At;qt+=2){const Fo=l[Et[qt]][Et[qt+1]].subscribe(m),Wc=Pe.length;Pe.push(m,Fo),G&&G.push(f,d.index,Wc,-(Wc+1))}}}function vE(a,l,c,d){try{return!1!==c(d)}catch(f){return WD(a,f),!1}}function Of(a,l,c,d,f){return function m(v){if(v===Function)return d;const E=2&a.flags?sr(a.index,l):l;0==(32&l[2])&&Bw(E);let D=vE(l,0,d,v),B=m.__ngNextListenerFn__;for(;B;)D=vE(l,0,B,v)&&D,B=B.__ngNextListenerFn__;return f&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function bE(a=1){return function(a){return(cn.lFrame.contextLView=function(a,l){for(;a>0;)l=l[15],a--;return l}(a,cn.lFrame.contextLView))[8]}(a)}function wE(a,l){let c=null;const d=function(a){const l=a.attrs;if(null!=l){const c=l.indexOf(5);if(0==(1&c))return l[c+1]}return null}(a);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===d?cf(a,m,!0):pD(d,m))return f}else c=f}return c}function tv(a){const l=_t()[16][6];if(!l.projection){const d=l.projection=Mo(a?a.length:1,null),f=d.slice();let m=l.child;for(;null!==m;){const v=a?wE(m,a):0;null!==v&&(f[v]?f[v].projectionNext=m:d[v]=m,f[v]=m),m=m.next}}}function mo(a,l=0,c){const d=_t(),f=Yn(),m=Od(f,20+a,16,null,c||null);null===m.projection&&(m.projection=l),ga(),64!=(64&m.flags)&&function(a,l,c){pw(l[11],0,l,c,Rc(a,c,l),Ey(c.parent||l[6],c,l))}(f,d,m)}function AE(a,l,c,d,f){const m=a[c+1],v=null===l;let E=d?po(m):Oc(m),D=!1;for(;0!==E&&(!1===D||v);){const G=a[E+1];yA(a[E],l)&&(D=!0,a[E+1]=d?bw(G):Ad(G)),E=d?po(G):Oc(G)}D&&(a[c+1]=d?Ad(m):bw(m))}function yA(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Ws(a,l)>=0}function zd(a,l,c){return ll(a,l,c,!1),zd}function Lf(a,l){return ll(a,l,null,!0),Lf}function ll(a,l,c,d){const f=_t(),m=Yn(),v=io(2);m.firstUpdatePass&&function(a,l,c,d){const f=a.data;if(null===f[c+1]){const m=f[Nr()],v=function(a,l){return l>=a.expandoStartIndex}(a,c);(function(a,l){return 0!=(a.flags&(l?16:32))})(m,d)&&null===l&&!v&&(l=!1),l=function(a,l,c,d){const f=mc(a);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(c=Bf(c=og(null,a,l,c,d),l.attrs,d),m=null);else{const v=l.directiveStylingLast;if(-1===v||a[v]!==f)if(c=og(f,a,l,c,d),null===m){let D=function(a,l,c){const d=c?l.classBindings:l.styleBindings;if(0!==Oc(d))return a[po(d)]}(a,l,d);void 0!==D&&Array.isArray(D)&&(D=og(null,a,l,D[1],d),D=Bf(D,l.attrs,d),function(a,l,c,d){a[po(c?l.classBindings:l.styleBindings)]=d}(a,l,d,D))}else m=function(a,l,c){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=Bf(d,a[m].hostAttrs,c);return Bf(d,l.attrs,c)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),c}(f,m,l,d),function(a,l,c,d,f,m){let v=m?l.classBindings:l.styleBindings,E=po(v),D=Oc(v);a[d]=c;let G,B=!1;if(Array.isArray(c)){const me=c;G=me[1],(null===G||Ws(me,G)>0)&&(B=!0)}else G=c;if(f)if(0!==D){const Pe=po(a[E+1]);a[d+1]=Dy(Pe,E),0!==Pe&&(a[Pe+1]=vw(a[Pe+1],d)),a[E+1]=function(a,l){return 131071&a|l<<17}(a[E+1],d)}else a[d+1]=Dy(E,0),0!==E&&(a[E+1]=vw(a[E+1],d)),E=d;else a[d+1]=Dy(D,0),0===E?E=d:a[D+1]=vw(a[D+1],d),D=d;B&&(a[d+1]=Ad(a[d+1])),AE(a,G,d,!0),AE(a,G,d,!1),function(a,l,c,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&Ws(m,l)>=0&&(c[d+1]=bw(c[d+1]))}(l,G,a,d,m),v=Dy(E,D),m?l.classBindings=v:l.styleBindings=v}(f,m,l,c,v,d)}}(m,a,v,d),l!==kn&&_s(f,v,l)&&function(a,l,c,d,f,m,v,E){if(!(3&l.type))return;const D=a.data,B=D[E+1];ag(function(a){return 1==(1&a)}(B)?ov(D,l,c,f,Oc(B),v):void 0)||(ag(m)||function(a){return 2==(2&a)}(B)&&(m=ov(D,null,c,f,E,v)),function(a,l,c,d,f){const m=On(a);if(l)f?m?a.addClass(c,d):c.classList.add(d):m?a.removeClass(c,d):c.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:el.DashCase;if(null==f)m?a.removeStyle(c,d,v):c.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),v|=el.Important),m?a.setStyle(c,d,f,v):c.style.setProperty(d,f,E?"important":"")}}}(d,v,pa(Nr(),c),f,m))}(m,m.data[Nr()],f,f[11],a,f[v+1]=function(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=re(Ta(a)))),a}(l,c),d,v)}function og(a,l,c,d,f){let m=null;const v=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<v&&(m=l[E],d=Bf(d,m.hostAttrs,f),m!==a);)E++;return null!==a&&(c.directiveStylingLast=E),d}function Bf(a,l,c){const d=c?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const v=l[m];"number"==typeof v?f=v:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),qi(a,v,!!c||l[++m]))}return void 0===a?null:a}function ov(a,l,c,d,f,m){const v=null===l;let E;for(;f>0;){const D=a[f],B=Array.isArray(D),G=B?D[1]:D,me=null===G;let Pe=c[f+1];Pe===kn&&(Pe=me?Ae:void 0);let We=me?co(Pe,d):G===d?Pe:void 0;if(B&&!ag(We)&&(We=co(D,d)),ag(We)&&(E=We,v))return E;const at=a[f+1];f=v?po(at):Oc(at)}if(null!==l){let D=m?l.residualClasses:l.residualStyles;null!=D&&(E=co(D,d))}return E}function ag(a){return void 0!==a}function FE(a,l=""){const c=_t(),d=Yn(),f=a+20,m=d.firstCreatePass?Od(d,f,1,l,null):d.data[f],v=c[f]=function(a,l){return On(a)?a.createText(l):a.createTextNode(l)}(c[11],l);Rm(d,c,v,m),Ni(m,!1)}function lg(a){return Vf("",a,""),lg}function Vf(a,l,c){const d=_t(),f=function(a,l,c,d){return _s(a,Qo(),c)?l+ge(c)+d:kn}(d,a,l,c);return f!==kn&&Pc(d,Nr(),f),Vf}function lv(a,l,c,d,f){const m=_t(),v=Ef(m,a,l,c,d,f);return v!==kn&&Pc(m,Nr(),v),lv}function fg(a,l,c){const d=_t();return _s(d,Qo(),l)&&sa(Yn(),Fr(),d,a,l,d[11],c,!0),fg}function mv(a,l,c){const d=_t();if(_s(d,Qo(),l)){const m=Yn(),v=Fr();sa(m,v,d,a,l,$D(mc(m.data),v,d),c,!0)}return mv}const Lu=void 0;var LA=["en",[["a","p"],["AM","PM"],Lu],[["AM","PM"],Lu,Lu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lu,"{1} 'at' {0}",Lu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(a){const c=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Wd={};function jf(a){const l=function(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=pg(l);if(c)return c;const d=l.split("-")[0];if(c=pg(d),c)return c;if("en"===d)return LA;throw new Error(`Missing locale data for the locale "${a}".`)}function Hf(a){return jf(a)[mn.PluralCase]}function pg(a){return a in Wd||(Wd[a]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[a]),Wd[a]}var mn=(()=>((mn=mn||{})[mn.LocaleId=0]="LocaleId",mn[mn.DayPeriodsFormat=1]="DayPeriodsFormat",mn[mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",mn[mn.DaysFormat=3]="DaysFormat",mn[mn.DaysStandalone=4]="DaysStandalone",mn[mn.MonthsFormat=5]="MonthsFormat",mn[mn.MonthsStandalone=6]="MonthsStandalone",mn[mn.Eras=7]="Eras",mn[mn.FirstDayOfWeek=8]="FirstDayOfWeek",mn[mn.WeekendRange=9]="WeekendRange",mn[mn.DateFormat=10]="DateFormat",mn[mn.TimeFormat=11]="TimeFormat",mn[mn.DateTimeFormat=12]="DateTimeFormat",mn[mn.NumberSymbols=13]="NumberSymbols",mn[mn.NumberFormats=14]="NumberFormats",mn[mn.CurrencyCode=15]="CurrencyCode",mn[mn.CurrencySymbol=16]="CurrencySymbol",mn[mn.CurrencyName=17]="CurrencyName",mn[mn.Currencies=18]="Currencies",mn[mn.Directionality=19]="Directionality",mn[mn.PluralCase=20]="PluralCase",mn[mn.ExtraData=21]="ExtraData",mn))();const mg="en-US";let gv=mg;function bC(a,l,c,d,f){if(a=we(a),Array.isArray(a))for(let m=0;m<a.length;m++)bC(a[m],l,c,d,f);else{const m=Yn(),v=_t();let E=_f(a)?a:we(a.provide),D=XD(a);const B=Kr(),G=1048575&B.providerIndexes,me=B.directiveStart,Pe=B.providerIndexes>>20;if(_f(a)||!a.multi){const We=new Pl(D,f,Bc),at=EC(E,l,f?G:G+Pe,me);-1===at?(zs(ta(B,v),m,E),wC(m,a,l.length),l.push(E),B.directiveStart++,B.directiveEnd++,f&&(B.providerIndexes+=1048576),c.push(We),v.push(We)):(c[at]=We,v[at]=We)}else{const We=EC(E,l,G+Pe,me),at=EC(E,l,G,G+Pe),Et=We>=0&&c[We],At=at>=0&&c[at];if(f&&!At||!f&&!Et){zs(ta(B,v),m,E);const qt=function(a,l,c,d,f){const m=new Pl(a,c,Bc);return m.multi=[],m.index=l,m.componentProviders=0,dx(m,f,d&&!c),m}(f?ON:RN,c.length,f,d,D);!f&&At&&(c[at].providerFactory=qt),wC(m,a,l.length,0),l.push(E),B.directiveStart++,B.directiveEnd++,f&&(B.providerIndexes+=1048576),c.push(qt),v.push(qt)}else wC(m,a,We>-1?We:at,dx(c[f?at:We],D,!f&&d));!f&&d&&At&&c[at].componentProviders++}}}function wC(a,l,c,d){const f=_f(l),m=function(a){return!!a.useClass}(l);if(f||m){const D=(m?we(l.useClass):l).prototype.ngOnDestroy;if(D){const B=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const G=B.indexOf(c);-1===G?B.push(c,[d,D]):B[G+1].push(d,D)}else B.push(c,D)}}}function dx(a,l,c){return c&&a.componentProviders++,a.multi.push(l)-1}function EC(a,l,c,d){for(let f=c;f<d;f++)if(l[f]===a)return f;return-1}function RN(a,l,c,d){return CC(this.multi,[])}function ON(a,l,c,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=oo(c,c[1],this.providerFactory.index,d);m=E.slice(0,v),CC(f,m);for(let D=v;D<E.length;D++)m.push(E[D])}else m=[],CC(f,m);return m}function CC(a,l){for(let c=0;c<a.length;c++)l.push((0,a[c])());return l}function IC(a,l=[]){return c=>{c.providersResolver=(d,f)=>function(a,l,c){const d=Yn();if(d.firstCreatePass){const f=Zr(a);bC(c,d.data,d.blueprint,f,!0),bC(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class bv{}class DC{resolveComponentFactory(l){throw function(a){const l=Error(`No component factory found for ${re(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let qd=(()=>{class a{}return a.NULL=new DC,a})();function PN(){return Zd(Kr(),_t())}function Zd(a,l){return new Zf(xi(a,l))}let Zf=(()=>{class a{constructor(c){this.nativeElement=c}}return a.__NG_ELEMENT_ID__=PN,a})();function fx(a){return a instanceof Zf?a.nativeElement:a}class Ev{}let px=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function(){const a=_t(),c=sr(Kr().index,a);return function(a){return a[11]}(ti(c)?c:a)}(),a})(),_x=(()=>{class a{}return a.\u0275prov=Rt({token:a,providedIn:"root",factory:()=>null}),a})();class cl{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Cv=new cl("13.0.3"),Iv={};function Cg(a,l,c,d,f=!1){for(;null!==c;){const m=l[c.index];if(null!==m&&d.push(Ir(m)),fi(m))for(let E=10;E<m.length;E++){const D=m[E],B=D[1].firstChild;null!==B&&Cg(D[1],D,B,d)}const v=c.type;if(8&v)Cg(a,l,c.child,d);else if(32&v){const E=rf(c,l);let D;for(;D=E();)d.push(D)}else if(16&v){const E=Iy(l,c);if(Array.isArray(E))d.push(...E);else{const D=sf(l[16]);Cg(D[1],D,E,d,!0)}}c=f?c.projectionNext:c.next}return d}class Kf{constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,c=l[1];return Cg(c,l,c.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(fi(l)){const c=l[8],d=c?c.indexOf(this):-1;d>-1&&(yy(l,d),na(c,d))}this._attachedToViewContainer=!1}vy(this._lView[1],this._lView)}onDestroy(l){kD(this._lView[1],this._lView,null,l)}markForCheck(){Bw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Uw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(a,l,c){Sl(!0);try{Uw(a,l,c)}finally{Sl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var l;this._appRef=null,af(this._lView[1],l=this._lView,l[11],2,null,null)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=l}}class jc extends Kf{constructor(l){super(l),this._view=l}detectChanges(){HD(this._view)}checkNoChanges(){!function(a){Sl(!0);try{HD(a)}finally{Sl(!1)}}(this._view)}get context(){return null}}class yx extends qd{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=Wt(l);return new Tv(c,this.ngModule)}}function AC(a){const l=[];for(let c in a)a.hasOwnProperty(c)&&l.push({propName:a[c],templateName:c});return l}const xC=new Lr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>iw});class Tv extends bv{constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=l.selectors.map(mD).join(","),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return AC(this.componentDef.inputs)}get outputs(){return AC(this.componentDef.outputs)}create(l,c,d,f){const m=(f=f||this.ngModule)?function(a,l){return{get:(c,d,f)=>{const m=a.get(c,Iv,f);return m!==Iv||d===Iv?m:l.get(c,d,f)}}}(l,f.injector):l,v=m.get(Ev,To),E=m.get(_x,null),D=v.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",G=d?function(a,l,c){if(On(a))return a.selectRootElement(l,c===Nt.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(D,d,this.componentDef.encapsulation):gy(v.createRenderer(null,this.componentDef),B,function(a){const l=a.toLowerCase();return"svg"===l?Ot:"math"===l?"http://www.w3.org/1998/MathML/":null}(B)),me=this.componentDef.onPush?576:528,Pe=function(a,l){return{components:[],scheduler:a||iw,clean:jP,playerHandler:l||null,flags:0}}(),We=Oy(0,null,null,1,0,null,null,null,null,null),at=ff(null,We,Pe,me,null,null,v,D,E,m);let Et,At;lu(at);try{const qt=function(a,l,c,d,f,m){const v=c[1];c[20]=a;const D=Od(v,20,2,"#host",null),B=D.mergedAttrs=l.hostAttrs;null!==B&&(Ny(D,B,!0),null!==a&&(Tr(f,a,B),null!==D.classes&&Pm(f,a,D.classes),null!==D.styles&&uD(f,a,D.styles)));const G=d.createRenderer(a,l),me=ff(c,xD(l),null,l.onPush?64:16,c[20],D,d,G,m||null,null);return v.firstCreatePass&&(zs(ta(D,c),v,l.type),LD(v,D),BD(D,c.length,1)),Py(c,me),c[20]=me}(G,this.componentDef,at,v,D);if(G)if(d)Tr(D,G,["ng-version",Cv.full]);else{const{attrs:ft,classes:un}=function(a){const l=[],c=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++d]):8===f&&c.push(m);else{if(!Ki(f))break;f=m}d++}return{attrs:l,classes:c}}(this.componentDef.selectors[0]);ft&&Tr(D,G,ft),un&&un.length>0&&Pm(D,G,un.join(" "))}if(At=qo(We,20),void 0!==c){const ft=At.projection=[];for(let un=0;un<this.ngContentSelectors.length;un++){const Jn=c[un];ft.push(null!=Jn?Array.from(Jn):null)}}Et=function(a,l,c,d,f){const m=c[1],v=function(a,l,c){const d=Kr();a.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),VD(a,d,l,pf(a,l,1,null),c));const f=oo(l,a,d.directiveStart,d);Ds(f,l);const m=xi(d,l);return m&&Ds(m,l),f}(m,c,l);if(d.components.push(v),a[8]=v,f&&f.forEach(D=>D(v,l)),l.contentQueries){const D=Kr();l.contentQueries(1,v,D.directiveStart)}const E=Kr();return!m.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(Xo(E.index),ND(c[1],E,0,E.directiveStart,E.directiveEnd,l),FD(l,v)),v}(qt,this.componentDef,at,Pe,[sA]),Um(We,at,null)}finally{yc()}return new kC(this.componentType,Et,Zd(At,at),at,At)}}class kC extends class{}{constructor(l,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new jc(f),this.componentType=l}get injector(){return new Ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class Kd{}class Ig{}const Yd=new Map;class Dv extends Kd{constructor(l,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yx(this);const d=Gn(l);this._bootstrapComponents=Aa(d.bootstrap),this._r3Injector=QD(l,c,[{provide:Kd,useValue:this},{provide:qd,useValue:this.componentFactoryResolver}],re(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,c=xa.THROW_IF_NOT_FOUND,d=en.Default){return l===xa||l===Kd||l===Hw?this:this._r3Injector.get(l,c,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Av extends Ig{constructor(l){super(),this.moduleType=l,null!==Gn(l)&&function(a){const l=new Set;!function c(d){const f=Gn(d,!0),m=f.id;null!==m&&(function(a,l,c){if(l&&l!==c)throw new Error(`Duplicate module registered for ${a} - ${re(l)} vs ${re(l.name)}`)}(m,Yd.get(m),d),Yd.set(m,d));const v=Aa(f.imports);for(const E of v)l.has(E)||(l.add(E),c(E))}(a)}(l)}create(l){return new Dv(this.moduleType,l)}}function xv(a,l,c){const d=Fi()+a,f=_t();return f[d]===kn?rl(f,d,c?l.call(c):l()):function(a,l){return a[l]}(f,d)}function Mv(a,l,c,d){return function(a,l,c,d,f,m){const v=l+c;return _s(a,v,f)?rl(a,v+1,m?d.call(m,f):d(f)):function(a,l){const c=a[l];return c===kn?void 0:c}(a,v+1)}(_t(),Fi(),a,l,c,d)}function FC(a){return l=>{setTimeout(a,void 0,l)}}const ic=class extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,d){var D,B,G;let f=l,m=c||(()=>null),v=d;if(l&&"object"==typeof l){const me=l;f=null==(D=me.next)?void 0:D.bind(me),m=null==(B=me.error)?void 0:B.bind(me),v=null==(G=me.complete)?void 0:G.bind(me)}this.__isAsync&&(m=FC(m),f&&(f=FC(f)),v&&(v=FC(v)));const E=super.subscribe({next:f,error:m,complete:v});return l instanceof C.w0&&l.add(E),E}};function HN(){return this._results[bf()]()}class Yf{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=bf(),d=Yf.prototype;d[c]||(d[c]=HN)}get changes(){return this._changes||(this._changes=new ic)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const d=this;d.dirty=!1;const f=ps(l);(this._changesDetected=!function(a,l,c){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=l[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Vu=(()=>{class a{}return a.__NG_ELEMENT_ID__=kv,a})();const Ax=Vu,zN=class extends Ax{constructor(l,c,d){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(l){const c=this._declarationTContainer.tViews,d=ff(this._declarationLView,c,l,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(c)),Um(c,d,l),new Kf(d)}};function kv(){return xg(Kr(),_t())}function xg(a,l){return 4&a.type?new zN(l,a,Zd(a,l)):null}let Mg=(()=>{class a{}return a.__NG_ELEMENT_ID__=GN,a})();function GN(){return Mx(Kr(),_t())}const $N=Mg,LC=class extends $N{constructor(l,c,d){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=d}get element(){return Zd(this._hostTNode,this._hostLView)}get injector(){return new Ea(this._hostTNode,this._hostLView)}get parentInjector(){const l=Ll(this._hostTNode,this._hostLView);if(kr(l)){const c=Ga(l,this._hostLView),d=ba(l);return new Ea(c[1].data[d+8],c)}return new Ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=xx(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,c,d){const f=l.createEmbeddedView(c||{});return this.insert(f,d),f}createComponent(l,c,d,f,m){const v=l&&!("function"==typeof l);let E;if(v)E=c;else{const me=c||{};E=me.index,d=me.injector,f=me.projectableNodes,m=me.ngModuleRef}const D=v?l:new Tv(Wt(l)),B=d||this.parentInjector;if(!m&&null==D.ngModule&&B){const me=B.get(Kd,null);me&&(m=me)}const G=D.create(B,f,void 0,m);return this.insert(G.hostView,E),G}insert(l,c){const d=l._lView,f=d[1];if(fi(d[3])){const G=this.indexOf(l);if(-1!==G)this.detach(G);else{const me=d[3],Pe=new LC(me,me[6],me[3]);Pe.detach(Pe.indexOf(l))}}const m=this._adjustIndex(c),v=this._lContainer;!function(a,l,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=l),d<m-10?(l[4]=c[f],Hl(c,10+d,l)):(c.push(l),l[4]=null),l[3]=c;const v=l[17];null!==v&&c!==v&&function(a,l){const c=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===c?a[9]=[l]:c.push(l)}(v,l);const E=l[19];null!==E&&E.insertView(a),l[2]|=128}(f,d,v,m);const E=Ty(m,v),D=d[11],B=Mm(D,v[7]);return null!==B&&function(a,l,c,d,f,m){d[0]=f,d[6]=l,af(a,d,c,1,f,m)}(f,v[6],D,d,B,E),l.attachToViewContainerRef(),Hl(BC(v),m,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=xx(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),d=yy(this._lContainer,c);d&&(na(BC(this._lContainer),c),vy(d[1],d))}detach(l){const c=this._adjustIndex(l,-1),d=yy(this._lContainer,c);return d&&null!=na(BC(this._lContainer),c)?new Kf(d):null}_adjustIndex(l,c=0){return null==l?this.length+c:l}};function xx(a){return a[8]}function BC(a){return a[8]||(a[8]=[])}function Mx(a,l){let c;const d=l[a.index];if(fi(d))c=d;else{let f;if(8&a.type)f=Ir(d);else{const m=l[11];f=m.createComment("");const v=xi(a,l);Mu(m,Mm(m,v),f,function(a,l){return On(a)?a.nextSibling(l):l.nextSibling}(m,v),!1)}l[a.index]=c=jD(d,l,f,a),Py(l,c)}return new LC(c,a,l)}class VC{constructor(l){this.queryList=l,this.matches=null}clone(){return new VC(this.queryList)}setDirty(){this.queryList.setDirty()}}class UC{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const d=null!==l.contentQueries?l.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new UC(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==Vx(l,c).matches&&this.queries[c].setDirty()}}class kx{constructor(l,c,d=null){this.predicate=l,this.flags=c,this.read=d}}class jC{constructor(l=[]){this.queries=l}elementStart(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new jC(c):null}template(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class HC{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new HC(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,c,ZN(c,m)),this.matchTNodeWithReadOption(l,c,Li(c,l,m,!1,!1))}else d===Vu?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,Li(c,l,d,!1,!1))}matchTNodeWithReadOption(l,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Zf||f===Mg||f===Vu&&4&c.type)this.addMatch(c.index,-2);else{const m=Li(c,l,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function ZN(a,l){const c=a.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===l)return c[d+1];return null}function YN(a,l,c,d){return-1===c?function(a,l){return 11&a.type?Zd(a,l):4&a.type?xg(a,l):null}(l,a):-2===c?function(a,l,c){return c===Zf?Zd(l,a):c===Vu?xg(l,a):c===Mg?Mx(l,a):void 0}(a,l,d):oo(a,a[1],c,l)}function Rx(a,l,c,d){const f=l[19].queries[d];if(null===f.matches){const m=a.data,v=c.matches,E=[];for(let D=0;D<v.length;D+=2){const B=v[D];E.push(B<0?null:YN(l,m[B],v[D+1],c.metadata.read))}f.matches=E}return f.matches}function zC(a,l,c,d){const f=a.queries.getByIndex(c),m=f.matches;if(null!==m){const v=Rx(a,l,f,c);for(let E=0;E<m.length;E+=2){const D=m[E];if(D>0)d.push(v[E/2]);else{const B=m[E+1],G=l[-D];for(let me=10;me<G.length;me++){const Pe=G[me];Pe[17]===Pe[3]&&zC(Pe[1],Pe,B,d)}if(null!==G[9]){const me=G[9];for(let Pe=0;Pe<me.length;Pe++){const We=me[Pe];zC(We[1],We,B,d)}}}}}return d}function Ox(a){const l=_t(),c=Yn(),d=ja();Ml(d+1);const f=Vx(c,d);if(a.dirty&&bl(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?zC(c,l,d,[]):Rx(c,l,f,d);a.reset(m,fx),a.notifyOnChanges()}return!0}return!1}function Px(a,l,c){const d=Yn();d.firstCreatePass&&(Bx(d,new kx(a,l,c),-1),2==(2&l)&&(d.staticViewQueries=!0)),Lx(d,_t(),l)}function Nx(a,l,c,d){const f=Yn();if(f.firstCreatePass){const m=Kr();Bx(f,new kx(l,c,d),m.index),function(a,l){const c=a.contentQueries||(a.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,l)}(f,a),2==(2&c)&&(f.staticContentQueries=!0)}Lx(f,_t(),c)}function Fx(){return a=_t(),l=ja(),a[19].queries[l].queryList;var a,l}function Lx(a,l,c){const d=new Yf(4==(4&c));kD(a,l,d,d.destroy),null===l[19]&&(l[19]=new UC),l[19].queries.push(new VC(d))}function Bx(a,l,c){null===a.queries&&(a.queries=new jC),a.queries.track(new HC(l,c))}function Vx(a,l){return a.queries.getByIndex(l)}function Xf(...a){}const eh=new Lr("Application Initializer");let ju=(()=>{class a{constructor(c){this.appInits=c,this.resolve=Xf,this.reject=Xf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(nc(m))c.push(m);else if(yE(m)){const v=new Promise((E,D)=>{m.subscribe({complete:E,error:D})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return a.\u0275fac=function(c){return new(c||a)(ke(eh,8))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})();const Ms=new Lr("AppId"),Zs={provide:Ms,useFactory:function(){return`${Ng()}${Ng()}${Ng()}`},deps:[]};function Ng(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Uv=new Lr("Platform Initializer"),Fg=new Lr("Platform ID"),jv=new Lr("appBootstrapListener");let Hv=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})();const th=new Lr("LocaleId"),QC=new Lr("DefaultCurrencyCode");class zv{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let Lg=(()=>{class a{compileModuleSync(c){return new Av(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=Aa(Gn(c).declarations).reduce((v,E)=>{const D=Wt(E);return D&&v.push(new Tv(D)),v},[]);return new zv(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})();const Bg=(()=>Promise.resolve(0))();function ep(a){"undefined"==typeof Zone?Bg.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Ks{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ic(!1),this.onMicrotaskEmpty=new ic(!1),this.onStable=new ic(!1),this.onError=new ic(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let a=Mn.requestAnimationFrame,l=Mn.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(a){const l=()=>{!function(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Mn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,qv(a),a.isCheckStableRunning=!0,$v(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),qv(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,v,E)=>{try{return JC(a),c.invokeTask(f,m,v,E)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),ys(a)}},onInvoke:(c,d,f,m,v,E,D)=>{try{return JC(a),c.invoke(f,m,v,E,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),ys(a)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,qv(a),$v(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ks.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ks.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,c,d){return this._inner.run(l,c,d)}runTask(l,c,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,l,nM,Xf,Xf);try{return m.runTask(v,c,d)}finally{m.cancelTask(v)}}runGuarded(l,c,d){return this._inner.runGuarded(l,c,d)}runOutsideAngular(l){return this._outer.run(l)}}const nM={};function $v(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function qv(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function JC(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function ys(a){a._nesting--,$v(a)}class tp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ic,this.onMicrotaskEmpty=new ic,this.onStable=new ic,this.onError=new ic}run(l,c,d){return l.apply(c,d)}runGuarded(l,c,d){return l.apply(c,d)}runOutsideAngular(l){return l()}runTask(l,c,d,f){return l.apply(c,d)}}let eI=(()=>{class a{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ks.assertNotInAngularZone(),ep(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ep(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,f){return[]}}return a.\u0275fac=function(c){return new(c||a)(ke(Ks))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})(),nh=(()=>{class a{constructor(){this._applications=new Map,rh.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return rh.findTestabilityInTree(this,c,d)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})();class rM{addToWindow(l){}findTestabilityInTree(l,c,d){return null}}function iM(a){rh=a}let _o,rh=new rM;const Vg=new Lr("AllowMultipleToken");class tI{constructor(l,c){this.name=l,this.token=c}}function rI(a,l,c=[]){const d=`Platform: ${l}`,f=new Lr(d);return(m=[])=>{let v=Ug();if(!v||v.injector.get(Vg,!1))if(a)a(c.concat(m).concat({provide:f,useValue:!0}));else{const E=c.concat(m).concat({provide:f,useValue:!0},{provide:zw,useValue:"platform"});!function(a){if(_o&&!_o.destroyed&&!_o.injector.get(Vg,!1))throw new je("400","");_o=a.get(Qv);const l=a.get(Uv,null);l&&l.forEach(c=>c())}(xa.create({providers:E,name:d}))}return function(a){const l=Ug();if(!l)throw new je("401","");return l}()}}function Ug(){return _o&&!_o.destroyed?_o:null}let Qv=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const E=function(a,l){let c;return c="noop"===a?new tp:("zone.js"===a?void 0:a)||new Ks({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:Ks,useValue:E}];return E.run(()=>{const B=xa.create({providers:D,parent:this.injector,name:c.moduleType.name}),G=c.create(B),me=G.injector.get(nf,null);if(!me)throw new je("402","");return E.runOutsideAngular(()=>{const Pe=E.onError.subscribe({next:We=>{me.handleError(We)}});G.onDestroy(()=>{Ui(this._modules,G),Pe.unsubscribe()})}),function(a,l,c){try{const d=c();return nc(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(me,E,()=>{const Pe=G.injector.get(ju);return Pe.runInitializers(),Pe.donePromise.then(()=>(function(a){rt(a,"Expected localeId to be defined"),"string"==typeof a&&(gv=a.toLowerCase().replace(/_/g,"-"))}(G.injector.get(th,mg)||mg),this._moduleDoBootstrap(G),G))})})}bootstrapModule(c,d=[]){const f=jg({},d);return function(a,l,c){const d=new Av(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Hu);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new je("403","");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je("404","");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(c){return new(c||a)(ke(xa))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})();function jg(a,l){return Array.isArray(l)?l.reduce(jg,a):kt(kt({},a),l)}let Hu=(()=>{class a{constructor(c,d,f,m,v){this._zone=c,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new b.y(B=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{B.next(this._stable),B.complete()})}),D=new b.y(B=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{Ks.assertNotInAngularZone(),ep(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,B.next(!0))})})});const me=this._zone.onUnstable.subscribe(()=>{Ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{B.next(!1)}))});return()=>{G.unsubscribe(),me.unsubscribe()}});this.isStable=(0,k.T)(E,D.pipe((0,O.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new je("405","");let f;f=c instanceof bv?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function(a){return a.isBoundToModule}(f)?void 0:this._injector.get(Kd),E=f.create(xa.NULL,[],d||f.selector,m),D=E.location.nativeElement,B=E.injector.get(eI,null),G=B&&E.injector.get(nh);return B&&G&&G.registerApplication(D,B),E.onDestroy(()=>{this.detachView(E.hostView),Ui(this.components,E),G&&G.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new je("101","");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Ui(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(jv,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(c){return new(c||a)(ke(Ks),ke(xa),ke(nf),ke(qd),ke(ju))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})();function Ui(a,l){const c=a.indexOf(l);c>-1&&a.splice(c,1)}let zg=!0,sI=!1;function aM(){return sI=!0,zg}function oI(){if(sI)throw new Error("Cannot enable prod mode after platform setup.");zg=!1}let Jv=(()=>{class a{}return a.__NG_ELEMENT_ID__=lM,a})();function lM(a){return function(a,l,c){if($i(a)&&!c){const d=sr(a.index,l);return new Kf(d,d)}return 47&a.type?new Kf(l[16],l):null}(Kr(),_t(),16==(16&a))}class ip{constructor(){}supports(l){return Gm(l)}create(l){return new u0(l)}}const dI=(a,l)=>l;class u0{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||dI}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const v=!d||c&&c.currentIndex<Zg(d,f,m)?c:d,E=Zg(v,f,m),D=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const B=E-f,G=D-f;if(B!=G){for(let Pe=0;Pe<B;Pe++){const We=Pe<m.length?m[Pe]:m[Pe]=0,at=We+Pe;G<=at&&at<B&&(m[Pe]=We+1)}m[v.previousIndex]=G-B}}E!==D&&l(v,E,D)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!Gm(l))throw new Error(`Error trying to diff '${re(l)}'. Only arrays and iterables are allowed`);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,v,c=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let E=0;E<this.length;E++)m=l[E],v=this._trackByFn(E,m),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,m,v,E)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,E),d=!0),c=c._next}else f=0,function(a,l){if(Array.isArray(a))for(let c=0;c<a.length;c++)l(a[c]);else{const c=a[bf()]();let d;for(;!(d=c.next()).done;)l(d.value)}}(l,E=>{v=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,E,v,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,m,f)):l=this._addAfter(new hI(c,d),m,f),l}_verifyReinsertion(l,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,c,d),this._addToMoves(l,d),l}_moveAfter(l,c,d){return this._unlink(l),this._insertAfter(l,c,d),this._addToMoves(l,d),l}_addAfter(l,c,d){return this._insertAfter(l,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,d){const f=null===c?this._itHead:c._next;return l._next=f,l._prev=c,null===f?this._itTail=l:f._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new sh),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,d=l._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sh),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class hI{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const c=l._prevDup,d=l._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class sh{constructor(){this.map=new Map}put(l){const c=l.trackById;let d=this.map.get(c);d||(d=new fI,this.map.set(c,d)),d.add(l)}get(l,c){const f=this.map.get(l);return f?f.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zg(a,l,c){const d=a.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+l+f}class Kg{constructor(){}supports(l){return l instanceof Map||$m(l)}create(){return new d0}}class d0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||$m(l)))throw new Error(`Error trying to diff '${re(l)}'. Only maps and objects are allowed`)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const d=l._prev;return c._next=l,c._prev=d,l._prev=c,d&&(d._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new Yg(l);return this._records.set(l,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(d=>c(l[d],d))}}class Yg{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oh(){return new sp([new ip])}let sp=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||oh()),deps:[[a,new Is,new hr]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(a){return a.name||typeof a}(c)}'`)}}return a.\u0275prov=Rt({token:a,providedIn:"root",factory:oh}),a})();function Qg(){return new zu([new Kg])}let zu=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||Qg()),deps:[[a,new Is,new hr]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return a.\u0275prov=Rt({token:a,providedIn:"root",factory:Qg}),a})();const h0=[new Kg],mI=new sp([new ip]),gI=new zu(h0),op=rI(null,"core",[{provide:Fg,useValue:"unknown"},{provide:Qv,deps:[xa]},{provide:nh,deps:[]},{provide:Hv,deps:[]}]),f0=[{provide:Hu,useClass:Hu,deps:[Ks,xa,nf,qd,ju]},{provide:xC,deps:[Ks],useFactory:function(a){let l=[];return a.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(c){l.push(c)}}},{provide:ju,useClass:ju,deps:[[new hr,eh]]},{provide:Lg,useClass:Lg,deps:[]},Zs,{provide:sp,useFactory:function(){return mI},deps:[]},{provide:zu,useFactory:function(){return gI},deps:[]},{provide:th,useFactory:function(a){return a||"undefined"!=typeof $localize&&$localize.locale||mg},deps:[[new ni(th),new hr,new Is]]},{provide:QC,useValue:"USD"}];let p0=(()=>{class a{constructor(c){}}return a.\u0275fac=function(c){return new(c||a)(ke(Hu))},a.\u0275mod=Be({type:a}),a.\u0275inj=_n({providers:f0}),a})()},6293:(St,M,R)=>{"use strict";R.d(M,{Z:()=>je});var o=R(4213),C=R(1177),b=R(1572),k=R(3855);class O{constructor(Ie,ge){this._delegate=Ie,this.firebase=ge,(0,b._addComponent)(Ie,new C.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,b.deleteApp)(this._delegate)))}_getService(Ie,ge=b._DEFAULT_ENTRY_NAME){var X;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(Ie);return!Se.isInitialized()&&"EXPLICIT"===(null===(X=Se.getComponent())||void 0===X?void 0:X.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:ge})}_removeServiceInstance(Ie,ge=b._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(ge)}_addComponent(Ie){(0,b._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,b._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Y=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function he(){const ze=function(ze){const Ie={},ge={__esModule:!0,initializeApp:function(ue,Me={}){const q=b.initializeApp(ue,Me);if((0,o.r3)(Ie,q.name))return Ie[q.name];const Q=new ze(q,ge);return Ie[q.name]=Q,Q},app:Se,registerVersion:b.registerVersion,setLogLevel:b.setLogLevel,onLog:b.onLog,apps:null,SDK_VERSION:b.SDK_VERSION,INTERNAL:{registerComponent:function(ue){const Me=ue.name,q=Me.replace("-compat","");if(b._registerComponent(ue)&&"PUBLIC"===ue.type){const Q=(ne=Se())=>{if("function"!=typeof ne[q])throw Y.create("invalid-app-argument",{appName:Me});return ne[q]()};void 0!==ue.serviceProps&&(0,o.ZB)(Q,ue.serviceProps),ge[q]=Q,ze.prototype[q]=function(...ne){return this._getService.bind(this,Me).apply(this,ue.multipleInstances?ne:[])}}return"PUBLIC"===ue.type?ge[q]:null},removeApp:function(ue){delete Ie[ue]},useAsService:function(ue,Me){return"serverAuth"===Me?null:Me},modularAPIs:b}};function Se(ue){if(!(0,o.r3)(Ie,ue=ue||b._DEFAULT_ENTRY_NAME))throw Y.create("no-app",{appName:ue});return Ie[ue]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function(){return Object.keys(Ie).map(ue=>Ie[ue])}}),Se.App=ze,ge}(O);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function(ge){(0,o.ZB)(ze,ge)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),ze}(),J=new k.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=te;(0,b.registerVersion)("@firebase/app-compat","0.1.25",undefined)},1572:(St,M,R)=>{"use strict";R.r(M),R.d(M,{FirebaseError:()=>k.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>Je,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>vn,_apps:()=>dt,_clearComponents:()=>ar,_components:()=>$t,_getProvider:()=>dn,_registerComponent:()=>Rt,_removeServiceInstance:()=>_n,deleteApp:()=>_i,getApp:()=>vr,getApps:()=>Si,initializeApp:()=>Xr,onLog:()=>qn,registerVersion:()=>Nn,setLogLevel:()=>Qn});var o=R(8239),C=R(1177),b=R(3855),k=R(4213),O=R(5600);class U{constructor($e){this.container=$e}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function(xe){const $e=xe.getComponent();return"VERSION"===(null==$e?void 0:$e.type)}(ht)){const wt=ht.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(ht=>ht).join(" ")}}const re="@firebase/app",te=new b.Yd("@firebase/app"),Je="[DEFAULT]",rt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,$t=new Map;function Jt(xe,$e){try{xe.container.addComponent($e)}catch(ht){te.debug(`Component ${$e.name} failed to register with FirebaseApp ${xe.name}`,ht)}}function vn(xe,$e){xe.container.addOrOverwriteComponent($e)}function Rt(xe){const $e=xe.name;if($t.has($e))return te.debug(`There were multiple attempts to register component ${$e}.`),!1;$t.set($e,xe);for(const ht of dt.values())Jt(ht,xe);return!0}function dn(xe,$e){const ht=xe.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),xe.container.getProvider($e)}function _n(xe,$e,ht=Je){dn(xe,$e).clearInstance(ht)}function ar(){$t.clear()}const Pn=new k.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rr{constructor($e,ht,wt){this._isDeleted=!1,this._options=Object.assign({},$e),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new C.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this.checkDestroyed(),this._automaticDataCollectionEnabled=$e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($e){this._isDeleted=$e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const Ti="9.8.1";function Xr(xe,$e={}){"object"!=typeof $e&&($e={name:$e});const ht=Object.assign({name:Je,automaticDataCollectionEnabled:!1},$e),wt=ht.name;if("string"!=typeof wt||!wt)throw Pn.create("bad-app-name",{appName:String(wt)});const Xt=dt.get(wt);if(Xt){if((0,k.vZ)(xe,Xt.options)&&(0,k.vZ)(ht,Xt.config))return Xt;throw Pn.create("duplicate-app",{appName:wt})}const fn=new C.H0(wt);for(const on of $t.values())fn.addComponent(on);const zn=new Rr(xe,ht,fn);return dt.set(wt,zn),zn}function vr(xe=Je){const $e=dt.get(xe);if(!$e)throw Pn.create("no-app",{appName:xe});return $e}function Si(){return Array.from(dt.values())}function _i(xe){return en.apply(this,arguments)}function en(){return(en=(0,o.Z)(function*(xe){const $e=xe.name;dt.has($e)&&(dt.delete($e),yield Promise.all(xe.container.getProviders().map(ht=>ht.delete())),xe.isDeleted=!0)})).apply(this,arguments)}function Nn(xe,$e,ht){var wt;let Xt=null!==(wt=rt[xe])&&void 0!==wt?wt:xe;ht&&(Xt+=`-${ht}`);const fn=Xt.match(/\s|\//),zn=$e.match(/\s|\//);if(fn||zn){const on=[`Unable to register library "${Xt}" with version "${$e}":`];return fn&&on.push(`library name "${Xt}" contains illegal characters (whitespace or "/")`),fn&&zn&&on.push("and"),zn&&on.push(`version name "${$e}" contains illegal characters (whitespace or "/")`),void te.warn(on.join(" "))}Rt(new C.wA(`${Xt}-version`,()=>({library:Xt,version:$e}),"VERSION"))}function qn(xe,$e){if(null!==xe&&"function"!=typeof xe)throw Pn.create("invalid-log-argument");(0,b.Am)(xe,$e)}function Qn(xe){(0,b.Ub)(xe)}const or="firebase-heartbeat-store";let Fn=null;function Ri(){return Fn||(Fn=(0,O.X3)("firebase-heartbeat-database",1,{upgrade:(xe,$e)=>{0===$e&&xe.createObjectStore(or)}}).catch(xe=>{throw Pn.create("storage-open",{originalErrorMessage:xe.message})})),Fn}function Nt(){return(Nt=(0,o.Z)(function*(xe){try{return(yield Ri()).transaction(or).objectStore(or).get(li(xe))}catch($e){throw Pn.create("storage-get",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function Ft(xe,$e){return ai.apply(this,arguments)}function ai(){return(ai=(0,o.Z)(function*(xe,$e){try{const wt=(yield Ri()).transaction(or,"readwrite");return yield wt.objectStore(or).put($e,li(xe)),wt.done}catch(ht){throw Pn.create("storage-set",{originalErrorMessage:ht.message})}})).apply(this,arguments)}function li(xe){return`${xe.name}!${xe.options.appId}`}class Zn{constructor($e){this.container=$e,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new Ae(ht),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var $e=this;return(0,o.Z)(function*(){const wt=$e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xt=Kn();if(null===$e._heartbeatsCache&&($e._heartbeatsCache=yield $e._heartbeatsCachePromise),$e._heartbeatsCache.lastSentHeartbeatDate!==Xt&&!$e._heartbeatsCache.heartbeats.some(fn=>fn.date===Xt))return $e._heartbeatsCache.heartbeats.push({date:Xt,agent:wt}),$e._heartbeatsCache.heartbeats=$e._heartbeatsCache.heartbeats.filter(fn=>{const zn=new Date(fn.date).valueOf();return Date.now()-zn<=2592e6}),$e._storage.overwrite($e._heartbeatsCache)})()}getHeartbeatsHeader(){var $e=this;return(0,o.Z)(function*(){if(null===$e._heartbeatsCache&&(yield $e._heartbeatsCachePromise),null===$e._heartbeatsCache||0===$e._heartbeatsCache.heartbeats.length)return"";const ht=Kn(),{heartbeatsToSend:wt,unsentEntries:Xt}=function(xe,$e=1024){const ht=[];let wt=xe.slice();for(const Xt of xe){const fn=ht.find(zn=>zn.agent===Xt.agent);if(fn){if(fn.dates.push(Xt.date),Le(ht)>$e){fn.dates.pop();break}}else if(ht.push({agent:Xt.agent,dates:[Xt.date]}),Le(ht)>$e){ht.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:ht,unsentEntries:wt}}($e._heartbeatsCache.heartbeats),fn=(0,k.L)(JSON.stringify({version:2,heartbeats:wt}));return $e._heartbeatsCache.lastSentHeartbeatDate=ht,Xt.length>0?($e._heartbeatsCache.heartbeats=Xt,yield $e._storage.overwrite($e._heartbeatsCache)):($e._heartbeatsCache.heartbeats=[],$e._storage.overwrite($e._heartbeatsCache)),fn})()}}function Kn(){return(new Date).toISOString().substring(0,10)}class Ae{constructor($e){this.app=$e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,k.hl)()&&(0,k.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $e=this;return(0,o.Z)(function*(){return(yield $e._canUseIndexedDBPromise)&&(yield function(xe){return Nt.apply(this,arguments)}($e.app))||{heartbeats:[]}})()}overwrite($e){var ht=this;return(0,o.Z)(function*(){var wt;if(yield ht._canUseIndexedDBPromise){const fn=yield ht.read();return Ft(ht.app,{lastSentHeartbeatDate:null!==(wt=$e.lastSentHeartbeatDate)&&void 0!==wt?wt:fn.lastSentHeartbeatDate,heartbeats:$e.heartbeats})}})()}add($e){var ht=this;return(0,o.Z)(function*(){var wt;if(yield ht._canUseIndexedDBPromise){const fn=yield ht.read();return Ft(ht.app,{lastSentHeartbeatDate:null!==(wt=$e.lastSentHeartbeatDate)&&void 0!==wt?wt:fn.lastSentHeartbeatDate,heartbeats:[...fn.heartbeats,...$e.heartbeats]})}})()}}function Le(xe){return(0,k.L)(JSON.stringify({version:2,heartbeats:xe})).length}Rt(new C.wA("platform-logger",$e=>new U($e),"PRIVATE")),Rt(new C.wA("heartbeat",$e=>new Zn($e),"PRIVATE")),Nn(re,"0.7.24",""),Nn(re,"0.7.24","esm2017"),Nn("fire-js","")},1177:(St,M,R)=>{"use strict";R.d(M,{wA:()=>b,H0:()=>re,zt:()=>O});var o=R(8239),C=R(4213);class b{constructor(te,J,we){this.name=te,this.instanceFactory=J,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const k="[DEFAULT]";class O{constructor(te,J){this.name=te,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const J=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(J)){const we=new C.BH;if(this.instancesDeferred.set(J,we),this.isInitialized(J)||this.shouldAutoInitialize())try{const Xe=this.getOrInitializeService({instanceIdentifier:J});Xe&&we.resolve(Xe)}catch(Xe){}}return this.instancesDeferred.get(J).promise}getImmediate(te){var J;const we=this.normalizeInstanceIdentifier(null==te?void 0:te.identifier),Xe=null!==(J=null==te?void 0:te.optional)&&void 0!==J&&J;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(Xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(qe){if(Xe)return null;throw qe}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if("EAGER"===te.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:k})}catch(J){}for(const[J,we]of this.instancesDeferred.entries()){const Xe=this.normalizeInstanceIdentifier(J);try{const qe=this.getOrInitializeService({instanceIdentifier:Xe});we.resolve(qe)}catch(qe){}}}}clearInstance(te=k){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,o.Z)(function*(){const J=Array.from(te.instances.values());yield Promise.all([...J.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...J.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=k){return this.instances.has(te)}getOptions(te=k){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:J={}}=te,we=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Xe=this.getOrInitializeService({instanceIdentifier:we,options:J});for(const[qe,je]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(qe)&&je.resolve(Xe);return Xe}onInit(te,J){var we;const Xe=this.normalizeInstanceIdentifier(J),qe=null!==(we=this.onInitCallbacks.get(Xe))&&void 0!==we?we:new Set;qe.add(te),this.onInitCallbacks.set(Xe,qe);const je=this.instances.get(Xe);return je&&te(je,Xe),()=>{qe.delete(te)}}invokeOnInitCallbacks(te,J){const we=this.onInitCallbacks.get(J);if(we)for(const Xe of we)try{Xe(te,J)}catch(qe){}}getOrInitializeService({instanceIdentifier:te,options:J={}}){let we=this.instances.get(te);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(he=te,he===k?void 0:he),options:J}),this.instances.set(te,we),this.instancesOptions.set(te,J),this.invokeOnInitCallbacks(we,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,we)}catch(Xe){}var he;return we||null}normalizeInstanceIdentifier(te=k){return this.component?this.component.multipleInstances?te:k:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class re{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const J=this.getProvider(te.name);if(J.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);J.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const J=new O(te,this);return this.providers.set(te,J),J}getProviders(){return Array.from(this.providers.values())}}},3855:(St,M,R)=>{"use strict";R.d(M,{in:()=>C,Yd:()=>Y,Ub:()=>re,Am:()=>he});const o=[];var C=(()=>{return(te=C||(C={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",C;var te})();const b={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},k=C.INFO,O={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},U=(te,J,...we)=>{if(J<te.logLevel)return;const Xe=(new Date).toISOString(),qe=O[J];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[qe](`[${Xe}]  ${te.name}:`,...we)};class Y{constructor(J){this.name=J,this._logLevel=k,this._logHandler=U,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in C))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?b[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...J),this._logHandler(this,C.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...J),this._logHandler(this,C.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,C.INFO,...J),this._logHandler(this,C.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,C.WARN,...J),this._logHandler(this,C.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,C.ERROR,...J),this._logHandler(this,C.ERROR,...J)}}function re(te){o.forEach(J=>{J.setLogLevel(te)})}function he(te,J){for(const we of o){let Xe=null;J&&J.level&&(Xe=b[J.level]),we.userLogHandler=null===te?null:(qe,je,...ze)=>{const Ie=ze.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch(X){return null}}).filter(ge=>ge).join(" ");je>=(null!=Xe?Xe:qe.logLevel)&&te({level:C[je].toLowerCase(),message:Ie,args:ze,type:qe.name})}}}},5600:(St,M,R)=>{"use strict";R.d(M,{Lj:()=>De,X3:()=>Se});var o=R(8239);let b,k;const Y=new WeakMap,re=new WeakMap,he=new WeakMap,te=new WeakMap,J=new WeakMap;let qe={get(Me,q,Q){if(Me instanceof IDBTransaction){if("done"===q)return re.get(Me);if("objectStoreNames"===q)return Me.objectStoreNames||he.get(Me);if("store"===q)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ge(Me[q])},set:(Me,q,Q)=>(Me[q]=Q,!0),has:(Me,q)=>Me instanceof IDBTransaction&&("done"===q||"store"===q)||q in Me};function Ie(Me){return"function"==typeof Me?function(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(k||(k=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Me)?function(...q){return Me.apply(X(this),q),ge(Y.get(this))}:function(...q){return ge(Me.apply(X(this),q))}:function(q,...Q){const ne=Me.call(X(this),q,...Q);return he.set(ne,q.sort?q.sort():[q]),ge(ne)}}(Me):(Me instanceof IDBTransaction&&function(Me){if(re.has(Me))return;const q=new Promise((Q,ne)=>{const ie=()=>{Me.removeEventListener("complete",Ee),Me.removeEventListener("error",W),Me.removeEventListener("abort",W)},Ee=()=>{Q(),ie()},W=()=>{ne(Me.error||new DOMException("AbortError","AbortError")),ie()};Me.addEventListener("complete",Ee),Me.addEventListener("error",W),Me.addEventListener("abort",W)});re.set(Me,q)}(Me),((Me,q)=>q.some(Q=>Me instanceof Q))(Me,b||(b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Me,qe):Me)}function ge(Me){if(Me instanceof IDBRequest)return function(Me){const q=new Promise((Q,ne)=>{const ie=()=>{Me.removeEventListener("success",Ee),Me.removeEventListener("error",W)},Ee=()=>{Q(ge(Me.result)),ie()},W=()=>{ne(Me.error),ie()};Me.addEventListener("success",Ee),Me.addEventListener("error",W)});return q.then(Q=>{Q instanceof IDBCursor&&Y.set(Q,Me)}).catch(()=>{}),J.set(q,Me),q}(Me);if(te.has(Me))return te.get(Me);const q=Ie(Me);return q!==Me&&(te.set(Me,q),J.set(q,Me)),q}const X=Me=>J.get(Me);function Se(Me,q,{blocked:Q,upgrade:ne,blocking:ie,terminated:Ee}={}){const W=indexedDB.open(Me,q),ce=ge(W);return ne&&W.addEventListener("upgradeneeded",Ve=>{ne(ge(W.result),Ve.oldVersion,Ve.newVersion,ge(W.transaction))}),Q&&W.addEventListener("blocked",()=>Q()),ce.then(Ve=>{Ee&&Ve.addEventListener("close",()=>Ee()),ie&&Ve.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ce}function De(Me,{blocked:q}={}){const Q=indexedDB.deleteDatabase(Me);return q&&Q.addEventListener("blocked",()=>q()),ge(Q).then(()=>{})}const Fe=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],Ue=new Map;function ue(Me,q){if(!(Me instanceof IDBDatabase)||q in Me||"string"!=typeof q)return;if(Ue.get(q))return Ue.get(q);const Q=q.replace(/FromIndex$/,""),ne=q!==Q,ie=Ne.includes(Q);if(!(Q in(ne?IDBIndex:IDBObjectStore).prototype)||!ie&&!Fe.includes(Q))return;const Ee=function(){var W=(0,o.Z)(function*(ce,...Ve){const lt=this.transaction(ce,ie?"readwrite":"readonly");let Je=lt.store;return ne&&(Je=Je.index(Ve.shift())),(yield Promise.all([Je[Q](...Ve),ie&&lt.done]))[0]});return function(Ve){return W.apply(this,arguments)}}();return Ue.set(q,Ee),Ee}var Me;qe=ds(kt({},Me=qe),{get:(q,Q,ne)=>ue(q,Q)||Me.get(q,Q,ne),has:(q,Q)=>!!ue(q,Q)||Me.has(q,Q)})},8239:(St,M,R)=>{"use strict";function o(b,k,O,U,Y,re,he){try{var te=b[re](he),J=te.value}catch(we){return void O(we)}te.done?k(J):Promise.resolve(J).then(U,Y)}function C(b){return function(){var k=this,O=arguments;return new Promise(function(U,Y){var re=b.apply(k,O);function he(J){o(re,U,Y,he,te,"next",J)}function te(J){o(re,U,Y,he,te,"throw",J)}he(void 0)})}}R.d(M,{Z:()=>C})}},St=>{St(St.s=6945)}]);