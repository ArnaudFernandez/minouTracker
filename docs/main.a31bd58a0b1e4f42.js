"use strict";var p7=Object.defineProperty,g7=Object.defineProperties,m7=Object.getOwnPropertyDescriptors,bG=Object.getOwnPropertySymbols,_7=Object.prototype.hasOwnProperty,y7=Object.prototype.propertyIsEnumerable,wG=(Qe,_e,O)=>_e in Qe?p7(Qe,_e,{enumerable:!0,configurable:!0,writable:!0,value:O}):Qe[_e]=O,tt=(Qe,_e)=>{for(var O in _e||(_e={}))_7.call(_e,O)&&wG(Qe,O,_e[O]);if(bG)for(var O of bG(_e))y7.call(_e,O)&&wG(Qe,O,_e[O]);return Qe},hi=(Qe,_e)=>g7(Qe,m7(_e));(self.webpackChunkfoodTrackingApp=self.webpackChunkfoodTrackingApp||[]).push([[179],{7905:(Qe,_e,O)=>{O.d(_e,{hO:()=>$e,xv:()=>pe,Dh:()=>ue,GT:()=>ye,cc:()=>De,on:()=>G,pX:()=>le});var c=O(3668),te=O(7892),F=O(7233);Qe=O.hmd(Qe);const ce=["ngOnDestroy"],le=(ie,Ce,Be,Pe={})=>new Proxy(ie,{get:(at,Ne)=>Be.runOutsideAngular(()=>{var He;if(ie[Ne])return(null===(He=null==Pe?void 0:Pe.spy)||void 0===He?void 0:He.get)&&Pe.spy.get(Ne,ie[Ne]),ie[Ne];if(ce.indexOf(Ne)>-1)return()=>{};const Ke=Ce.toPromise().then(be=>{const Z=be&&be[Ne];return"function"==typeof Z?Z.bind(be):Z&&Z.then?Z.then(ee=>Be.run(()=>ee)):Be.run(()=>Z)});return new Proxy(()=>{},{get:(be,Z)=>Ke[Z],apply:(be,Z,ee)=>Ke.then(de=>{var ge;const Me=de&&de(...ee);return(null===(ge=null==Pe?void 0:Pe.spy)||void 0===ge?void 0:ge.apply)&&Pe.spy.apply(Ne,ee,Me),Me})})})}),ye=(ie,Ce)=>{Ce.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(Pe=>{Object.defineProperty(ie.prototype,Pe,Object.getOwnPropertyDescriptor(Be.prototype||Be,Pe))})})};class se{constructor(Ce){return Ce}}const ue=new c.OlP("angularfire2.app.options"),pe=new c.OlP("angularfire2.app.name");function G(ie,Ce,Be){const at="object"==typeof Be&&Be||{};at.name=at.name||"string"==typeof Be&&Be||"[DEFAULT]";const He=te.Z.apps.filter(Ke=>Ke&&Ke.name===at.name)[0]||Ce.runOutsideAngular(()=>te.Z.initializeApp(ie,at));try{JSON.stringify(ie)!==JSON.stringify(He.options)&&W("error",`${He.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ke){}return new se(He)}const W=(ie,...Ce)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[ie](...Ce)},oe={provide:se,useFactory:G,deps:[ue,c.R0b,[new c.FiY,pe]]};let $e=(()=>{class ie{constructor(Be){te.Z.registerVersion("angularfire",F.q4.full,"core"),te.Z.registerVersion("angularfire",F.q4.full,"app-compat"),te.Z.registerVersion("angular",c.q4F.full,Be.toString())}static initializeApp(Be,Pe){return{ngModule:ie,providers:[{provide:ue,useValue:Be},{provide:pe,useValue:Pe}]}}}return ie.\u0275fac=function(Be){return new(Be||ie)(c.LFG(c.Lbi))},ie.\u0275mod=c.oAB({type:ie}),ie.\u0275inj=c.cJS({providers:[oe]}),ie})();function De(ie,Ce,Be,Pe,at){const[,Ne,He]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===ie)||[];if(Ne)return function(ie,Ce){try{return ie.toString()===Ce.toString()}catch(Be){return ie===Ce}}(at,He)||(Fe("error",`${Ce} was already initialized on the ${Be} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:at,was:He})),Ne;{const Ke=Pe();return globalThis.\u0275AngularfireInstanceCache.push([ie,Ke,at]),Ke}}const Ue=!!Qe.hot,Fe=(ie,...Ce)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[ie](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(Qe,_e,O)=>{O.d(_e,{q4:()=>hc,iC:()=>co,HU:()=>pc,vb:()=>uf,JM:()=>lf});var c=O(3668),te=O(7713),F=O(8239),ce=O(1572),le=O(4213),ye=O(1177),se=O(3855),ue=O(5600);const pe="@firebase/installations",G="0.5.9",oe=`w:${G}`,$e="FIS_v2",Ce=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(T){return T instanceof le.ZR&&T.code.includes("request-failed")}function Pe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function at(T){return{token:T.token,requestStatus:2,expiresIn:de(T.expiresIn),creationTime:Date.now()}}function Ne(T,A){return He.apply(this,arguments)}function He(){return(He=(0,F.Z)(function*(T,A){const B=(yield A.json()).error;return Ce.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Ke({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function be(T,{refreshToken:A}){const N=Ke(T);return N.append("Authorization",function(T){return`${$e} ${T}`}(A)),N}function Z(T){return ee.apply(this,arguments)}function ee(){return(ee=(0,F.Z)(function*(T){const A=yield T();return A.status>=500&&A.status<600?T():A})).apply(this,arguments)}function de(T){return Number(T.replace("s","000"))}function Me(T,A){return ae.apply(this,arguments)}function ae(){return(ae=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:A},{fid:N}){const B=Pe(T),Q=Ke(T),Y=A.getImmediate({optional:!0});if(Y){const _t=yield Y.getHeartbeatsHeader();_t&&Q.append("x-firebase-client",_t)}const it={method:"POST",headers:Q,body:JSON.stringify({fid:N,authVersion:$e,appId:T.appId,sdkVersion:oe})},gt=yield Z(()=>fetch(B,it));if(gt.ok){const _t=yield gt.json();return{fid:_t.fid||N,registrationStatus:2,refreshToken:_t.refreshToken,authToken:at(_t.authToken)}}throw yield Ne("Create Installation",gt)})).apply(this,arguments)}function yt(T){return new Promise(A=>{setTimeout(A,T)})}const Tn=/^[cdef][\w-]{21}$/;function Wt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Tn.test(N)?N:""}catch(T){return""}}function on(T){return`${T.appName}!${T.appId}`}const ur=new Map;function fi(T,A){const N=on(T);Qn(N,A),function(T,A){const N=(!Ir&&"BroadcastChannel"in self&&(Ir=new BroadcastChannel("[Firebase] FID Change"),Ir.onmessage=T=>{Qn(T.data.key,T.data.fid)}),Ir);N&&N.postMessage({key:T,fid:A}),0===ur.size&&Ir&&(Ir.close(),Ir=null)}(N,A)}function Qn(T,A){const N=ur.get(T);if(N)for(const B of N)B(A)}let Ir=null;const mr="firebase-installations-store";let Re=null;function _r(){return Re||(Re=(0,ue.X3)("firebase-installations-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(mr)}})),Re}function dt(T,A){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,F.Z)(function*(T,A){const N=on(T),Q=(yield _r()).transaction(mr,"readwrite"),Y=Q.objectStore(mr),xe=yield Y.get(N);return yield Y.put(A,N),yield Q.done,(!xe||xe.fid!==A.fid)&&fi(T,A.fid),A})).apply(this,arguments)}function kn(T){return Or.apply(this,arguments)}function Or(){return(Or=(0,F.Z)(function*(T){const A=on(T),B=(yield _r()).transaction(mr,"readwrite");yield B.objectStore(mr).delete(A),yield B.done})).apply(this,arguments)}function Yr(T,A){return bs.apply(this,arguments)}function bs(){return(bs=(0,F.Z)(function*(T,A){const N=on(T),Q=(yield _r()).transaction(mr,"readwrite"),Y=Q.objectStore(mr),xe=yield Y.get(N),it=A(xe);return void 0===it?yield Y.delete(N):yield Y.put(it,N),yield Q.done,it&&(!xe||xe.fid!==it.fid)&&fi(T,it.fid),it})).apply(this,arguments)}function zn(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,F.Z)(function*(T){let A;const N=yield Yr(T.appConfig,B=>{const Q=Ha(B),Y=On(T,Q);return A=Y.registrationPromise,Y.installationEntry});return""===N.fid?{installationEntry:yield A}:{installationEntry:N,registrationPromise:A}})).apply(this,arguments)}function Ha(T){return It(T||{fid:Wt(),registrationStatus:0})}function On(T,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Ce.create("app-offline"))};const N={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},B=function(T,A){return vt.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:B}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Ks(T)}:{installationEntry:A}}function vt(){return(vt=(0,F.Z)(function*(T,A){try{const N=yield Me(T,A);return dt(T.appConfig,N)}catch(N){throw Be(N)&&409===N.customData.serverCode?yield kn(T.appConfig):yield dt(T.appConfig,{fid:A.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Ks(T){return ki.apply(this,arguments)}function ki(){return(ki=(0,F.Z)(function*(T){let A=yield Qr(T.appConfig);for(;1===A.registrationStatus;)yield yt(100),A=yield Qr(T.appConfig);if(0===A.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield zn(T);return B||N}return A})).apply(this,arguments)}function Qr(T){return Yr(T,A=>{if(!A)throw Ce.create("installation-not-found");return It(A)})}function It(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function To(T,A){return q.apply(this,arguments)}function q(){return(q=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:A},N){const B=j(T,N),Q=be(T,N),Y=A.getImmediate({optional:!0});if(Y){const _t=yield Y.getHeartbeatsHeader();_t&&Q.append("x-firebase-client",_t)}const it={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:oe,appId:T.appId}})},gt=yield Z(()=>fetch(B,it));if(gt.ok)return at(yield gt.json());throw yield Ne("Generate Auth Token",gt)})).apply(this,arguments)}function j(T,{fid:A}){return`${Pe(T)}/${A}/authTokens:generate`}function K(T){return we.apply(this,arguments)}function we(){return(we=(0,F.Z)(function*(T,A=!1){let N;const B=yield Yr(T.appConfig,Y=>{if(!xt(Y))throw Ce.create("not-registered");const xe=Y.authToken;if(!A&&fn(xe))return Y;if(1===xe.requestStatus)return N=$(T,A),Y;{if(!navigator.onLine)throw Ce.create("app-offline");const it=Pr(Y);return N=et(T,it),it}});return N?yield N:B.authToken})).apply(this,arguments)}function $(T,A){return re.apply(this,arguments)}function re(){return(re=(0,F.Z)(function*(T,A){let N=yield Ae(T.appConfig);for(;1===N.authToken.requestStatus;)yield yt(100),N=yield Ae(T.appConfig);const B=N.authToken;return 0===B.requestStatus?K(T,A):B})).apply(this,arguments)}function Ae(T){return Yr(T,A=>{if(!xt(A))throw Ce.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function et(T,A){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,F.Z)(function*(T,A){try{const N=yield To(T,A),B=Object.assign(Object.assign({},A),{authToken:N});return yield dt(T.appConfig,B),N}catch(N){if(!Be(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield dt(T.appConfig,B)}else yield kn(T.appConfig);throw N}})).apply(this,arguments)}function xt(T){return void 0!==T&&2===T.registrationStatus}function fn(T){return 2===T.requestStatus&&!function(T){const A=Date.now();return A<T.creationTime||T.creationTime+T.expiresIn<A+36e5}(T)}function Pr(T){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:A})}function Zu(){return(Zu=(0,F.Z)(function*(T){const A=T,{installationEntry:N,registrationPromise:B}=yield zn(A);return B?B.catch(console.error):K(A).catch(console.error),N.fid})).apply(this,arguments)}function ia(){return(ia=(0,F.Z)(function*(T,A=!1){const N=T;return yield sa(N),(yield K(N,A)).token})).apply(this,arguments)}function sa(T){return nr.apply(this,arguments)}function nr(){return(nr=(0,F.Z)(function*(T){const{registrationPromise:A}=yield zn(T);A&&(yield A)})).apply(this,arguments)}function Xr(T){return Ce.create("missing-app-config-values",{valueName:T})}const Jn="installations";(0,ce._registerComponent)(new ye.wA(Jn,T=>{const A=T.getProvider("app").getImmediate(),N=function(T){if(!T||!T.options)throw Xr("App Configuration");if(!T.name)throw Xr("App Name");const A=["projectId","apiKey","appId"];for(const N of A)if(!T.options[N])throw Xr(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(A);return{app:A,appConfig:N,heartbeatServiceProvider:(0,ce._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new ye.wA("installations-internal",T=>{const A=T.getProvider("app").getImmediate(),N=(0,ce._getProvider)(A,Jn).getImmediate();return{getId:()=>function(T){return Zu.apply(this,arguments)}(N),getToken:Q=>function(T){return ia.apply(this,arguments)}(N,Q)}},"PRIVATE")),(0,ce.registerVersion)(pe,G),(0,ce.registerVersion)(pe,G,"esm2017");const bt="@firebase/remote-config",Jt=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kh{constructor(A,N,B,Q){this.client=A,this.storage=N,this.storageCache=B,this.logger=Q}isCachedDataFresh(A,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,Q=B<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Q}.`),Q}fetch(A){var N=this;return(0,F.Z)(function*(){const[B,Q]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Q&&N.isCachedDataFresh(A.cacheMaxAgeMillis,B))return Q;A.eTag=Q&&Q.eTag;const Y=yield N.client.fetch(A),xe=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&xe.push(N.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(xe),Y})()}}function xg(T=navigator){return T.languages&&T.languages[0]||T.language}class Fi{constructor(A,N,B,Q,Y,xe){this.firebaseInstallations=A,this.sdkVersion=N,this.namespace=B,this.projectId=Q,this.apiKey=Y,this.appId=xe}fetch(A){var N=this;return(0,F.Z)(function*(){const[B,Q]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,it={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},gt={sdk_version:N.sdkVersion,app_instance_id:B,app_instance_id_token:Q,app_id:N.appId,language_code:xg()},_t={method:"POST",headers:it,body:JSON.stringify(gt)},zt=fetch(xe,_t),Mt=new Promise((Ms,Gi)=>{A.signal.addEventListener(()=>{const zo=new Error("The operation was aborted.");zo.name="AbortError",Gi(zo)})});let yi;try{yield Promise.race([zt,Mt]),yi=yield zt}catch(Ms){let Gi="fetch-client-network";throw"AbortError"===Ms.name&&(Gi="fetch-timeout"),Jt.create(Gi,{originalErrorMessage:Ms.message})}let yn=yi.status;const Br=yi.headers.get("ETag")||void 0;let $o,oi;if(200===yi.status){let Ms;try{Ms=yield yi.json()}catch(Gi){throw Jt.create("fetch-client-parse",{originalErrorMessage:Gi.message})}$o=Ms.entries,oi=Ms.state}if("INSTANCE_STATE_UNSPECIFIED"===oi?yn=500:"NO_CHANGE"===oi?yn=304:("NO_TEMPLATE"===oi||"EMPTY_CONFIG"===oi)&&($o={}),304!==yn&&200!==yn)throw Jt.create("fetch-status",{httpStatus:yn});return{status:yn,eTag:Br,config:$o}})()}}class qa{constructor(A,N){this.client=A,this.storage=N}fetch(A){var N=this;return(0,F.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(A,B)})()}attemptFetch(A,{throttleEndTimeMillis:N,backoffCount:B}){var Q=this;return(0,F.Z)(function*(){yield function(T,A){return new Promise((N,B)=>{const Q=Math.max(A-Date.now(),0),Y=setTimeout(N,Q);T.addEventListener(()=>{clearTimeout(Y),B(Jt.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,N);try{const Y=yield Q.client.fetch(A);return yield Q.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function(T){if(!(T instanceof le.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}(Y))throw Y;const xe={throttleEndTimeMillis:Date.now()+(0,le.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(xe),Q.attemptFetch(A,xe)}})()}}class Yh{constructor(A,N,B,Q,Y){this.app=A,this._client=N,this._storageCache=B,this._storage=Q,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wa(T,A){const N=T.target.error||void 0;return Jt.create(A,{originalErrorMessage:N&&N.message})}const oa="app_namespace_store";class Yu{constructor(A,N,B,Q=function(){return new Promise((T,A)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=B=>{A(Wa(B,"storage-open"))},N.onsuccess=B=>{T(B.target.result)},N.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(oa,{keyPath:"compositeKey"})}}catch(N){A(Jt.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=A,this.appName=N,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var N=this;return(0,F.Z)(function*(){const B=yield N.openDbPromise;return new Promise((Q,Y)=>{const it=B.transaction([oa],"readonly").objectStore(oa),gt=N.createCompositeKey(A);try{const _t=it.get(gt);_t.onerror=zt=>{Y(Wa(zt,"storage-get"))},_t.onsuccess=zt=>{const Mt=zt.target.result;Q(Mt?Mt.value:void 0)}}catch(_t){Y(Jt.create("storage-get",{originalErrorMessage:_t&&_t.message}))}})})()}set(A,N){var B=this;return(0,F.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((Y,xe)=>{const gt=Q.transaction([oa],"readwrite").objectStore(oa),_t=B.createCompositeKey(A);try{const zt=gt.put({compositeKey:_t,value:N});zt.onerror=Mt=>{xe(Wa(Mt,"storage-set"))},zt.onsuccess=()=>{Y()}}catch(zt){xe(Jt.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(A){var N=this;return(0,F.Z)(function*(){const B=yield N.openDbPromise;return new Promise((Q,Y)=>{const it=B.transaction([oa],"readwrite").objectStore(oa),gt=N.createCompositeKey(A);try{const _t=it.delete(gt);_t.onerror=zt=>{Y(Wa(zt,"storage-delete"))},_t.onsuccess=()=>{Q()}}catch(_t){Y(Jt.create("storage-delete",{originalErrorMessage:_t&&_t.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class ld{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,F.Z)(function*(){const N=A.storage.getLastFetchStatus(),B=A.storage.getLastSuccessfulFetchTimestampMillis(),Q=A.storage.getActiveConfig(),Y=yield N;Y&&(A.lastFetchStatus=Y);const xe=yield B;xe&&(A.lastSuccessfulFetchTimestampMillis=xe);const it=yield Q;it&&(A.activeConfig=it)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Ka(){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new ye.wA("remote-config",function(A,{instanceIdentifier:N}){const B=A.getProvider("app").getImmediate(),Q=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Jt.create("registration-window");if(!(0,le.hl)())throw Jt.create("indexed-db-unavailable");const{projectId:Y,apiKey:xe,appId:it}=B.options;if(!Y)throw Jt.create("registration-project-id");if(!xe)throw Jt.create("registration-api-key");if(!it)throw Jt.create("registration-app-id");const gt=new Yu(it,B.name,N=N||"firebase"),_t=new ld(gt),zt=new se.Yd(bt);zt.logLevel=se.in.ERROR;const Mt=new Fi(Q,ce.SDK_VERSION,N,Y,xe,it),yi=new qa(Mt,gt),yn=new Kh(yi,gt,_t,zt),Br=new Yh(B,yn,_t,gt,zt);return function(T){const A=(0,le.m9)(T);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Br),Br},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(bt,"0.3.8"),(0,ce.registerVersion)(bt,"0.3.8","esm2017");const ud="/firebase-messaging-sw.js",Og="/firebase-cloud-messaging-push-scope",es="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Js="google.c.a.c_id",cd="google.c.a.c_l",dd="google.c.a.ts",Xs="google.c.a.e";var Es=(()=>{return(T=Es||(Es={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Es;var T})();function Cs(T){const A=new Uint8Array(T);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mi(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),Q=new Uint8Array(B.length);for(let Y=0;Y<B.length;++Y)Q[Y]=B.charCodeAt(Y);return Q}const Za="fcm_token_details_db",hd="fcm_token_object_Store";function Xu(T){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Za))return null;let A=null;return(yield(0,ue.X3)(Za,5,{upgrade:(B=(0,F.Z)(function*(Q,Y,xe,it){var gt;if(Y<2||!Q.objectStoreNames.contains(hd))return;const _t=it.objectStore(hd),zt=yield _t.index("fcmSenderId").get(T);if(yield _t.clear(),zt)if(2===Y){const Mt=zt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;A={token:Mt.fcmToken,createTime:null!==(gt=Mt.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:Cs(Mt.vapidKey)}}}else if(3===Y){const Mt=zt;A={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Cs(Mt.auth),p256dh:Cs(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Cs(Mt.vapidKey)}}}else if(4===Y){const Mt=zt;A={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Cs(Mt.auth),p256dh:Cs(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Cs(Mt.vapidKey)}}}}),function(Y,xe,it,gt){return B.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Za),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),ec(A)?A:null;var B}),Zl.apply(this,arguments)}function ec(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:A}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const nn="firebase-messaging-store";let Is=null;function nc(){return Is||(Is=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(nn)}})),Is}function Un(T){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,F.Z)(function*(T){const A=Li(T),B=yield(yield nc()).transaction(nn).objectStore(nn).get(A);if(B)return B;{const Q=yield Xu(T.appConfig.senderId);if(Q)return yield Ya(T,Q),Q}})).apply(this,arguments)}function Ya(T,A){return eo.apply(this,arguments)}function eo(){return(eo=(0,F.Z)(function*(T,A){const N=Li(T),Q=(yield nc()).transaction(nn,"readwrite");return yield Q.objectStore(nn).put(A,N),yield Q.done,A})).apply(this,arguments)}function Rn(T){return to.apply(this,arguments)}function to(){return(to=(0,F.Z)(function*(T){const A=Li(T),B=(yield nc()).transaction(nn,"readwrite");yield B.objectStore(nn).delete(A),yield B.done})).apply(this,arguments)}function Li({appConfig:T}){return T.appId}const rn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qa(T,A){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,F.Z)(function*(T,A){const N=yield Xa(T),B=el(A),Q={method:"POST",headers:N,body:JSON.stringify(B)};let Y;try{Y=yield(yield fetch(pt(T.appConfig),Q)).json()}catch(xe){throw rn.create("token-subscribe-failed",{errorInfo:xe})}if(Y.error)throw rn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw rn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Ds(T,A){return ri.apply(this,arguments)}function ri(){return(ri=(0,F.Z)(function*(T,A){const N=yield Xa(T),B=el(A.subscriptionOptions),Q={method:"PATCH",headers:N,body:JSON.stringify(B)};let Y;try{Y=yield(yield fetch(`${pt(T.appConfig)}/${A.token}`,Q)).json()}catch(xe){throw rn.create("token-update-failed",{errorInfo:xe})}if(Y.error)throw rn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw rn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function xo(T,A){return ko.apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*(T,A){const B={method:"DELETE",headers:yield Xa(T)};try{const Y=yield(yield fetch(`${pt(T.appConfig)}/${A}`,B)).json();if(Y.error)throw rn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(Q){throw rn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function pt({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Xa(T){return br.apply(this,arguments)}function br(){return(br=(0,F.Z)(function*({appConfig:T,installations:A}){const N=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function el({p256dh:T,auth:A,endpoint:N,vapidKey:B}){const Q={web:{endpoint:N,auth:A,p256dh:T}};return B!==es&&(Q.web.applicationPubKey=B),Q}const fd=6048e5;function tl(T){return aa.apply(this,arguments)}function aa(){return(aa=(0,F.Z)(function*(T){const A=yield Vi(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:A.endpoint,auth:Cs(A.getKey("auth")),p256dh:Cs(A.getKey("p256dh"))},B=yield Un(T.firebaseDependencies);if(B){if(Yl(B.subscriptionOptions,N))return Date.now()>=B.createTime+fd?$t(T,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield xo(T.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return Nn(T.firebaseDependencies,N)}return Nn(T.firebaseDependencies,N)})).apply(this,arguments)}function rc(T){return Se.apply(this,arguments)}function Se(){return(Se=(0,F.Z)(function*(T){const A=yield Un(T.firebaseDependencies);A&&(yield xo(T.firebaseDependencies,A.token),yield Rn(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function $t(T,A){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,F.Z)(function*(T,A){try{const N=yield Ds(T.firebaseDependencies,A),B=Object.assign(Object.assign({},A),{token:N,createTime:Date.now()});return yield Ya(T.firebaseDependencies,B),N}catch(N){throw yield rc(T),N}})).apply(this,arguments)}function Nn(T,A){return nl.apply(this,arguments)}function nl(){return(nl=(0,F.Z)(function*(T,A){const B={token:yield Qa(T,A),createTime:Date.now(),subscriptionOptions:A};return yield Ya(T,B),B.token})).apply(this,arguments)}function Vi(T,A){return wr.apply(this,arguments)}function wr(){return(wr=(0,F.Z)(function*(T,A){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mi(A)})})).apply(this,arguments)}function Yl(T,A){return A.vapidKey===T.vapidKey&&A.endpoint===T.endpoint&&A.auth===T.auth&&A.p256dh===T.p256dh}function Ro(T){const A={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,A){if(!A.notification)return;T.notification={};const N=A.notification.title;N&&(T.notification.title=N);const B=A.notification.body;B&&(T.notification.body=B);const Q=A.notification.image;Q&&(T.notification.image=Q)}(A,T),function(T,A){!A.data||(T.data=A.data)}(A,T),function(T,A){if(!A.fcmOptions)return;T.fcmOptions={};const N=A.fcmOptions.link;N&&(T.fcmOptions.link=N);const B=A.fcmOptions.analytics_label;B&&(T.fcmOptions.analyticsLabel=B)}(A,T),A}function Oo(T){return"object"==typeof T&&!!T&&Js in T}function dr(T,A){const N=[];for(let B=0;B<T.length;B++)N.push(T.charAt(B)),B<A.length&&N.push(A.charAt(B));return N.join("")}function la(T){return rn.create("missing-app-config-values",{valueName:T})}dr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class no{constructor(A,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function(T){if(!T||!T.options)throw la("App Configuration Object");if(!T.name)throw la("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const B of A)if(!N[B])throw la(B);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Q,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function ns(T){return rl.apply(this,arguments)}function rl(){return(rl=(0,F.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(ud,{scope:Og}),T.swRegistration.update().catch(()=>{})}catch(A){throw rn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function pd(T,A){return il.apply(this,arguments)}function il(){return(il=(0,F.Z)(function*(T,A){if(!A&&!T.swRegistration&&(yield ns(T)),A||!T.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");T.swRegistration=A}})).apply(this,arguments)}function Ql(T,A){return Po.apply(this,arguments)}function Po(){return(Po=(0,F.Z)(function*(T,A){A?T.vapidKey=A:T.vapidKey||(T.vapidKey=es)})).apply(this,arguments)}function Jl(){return(Jl=(0,F.Z)(function*(T,A){if(!navigator)throw rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rn.create("permission-blocked");return yield Ql(T,null==A?void 0:A.vapidKey),yield pd(T,null==A?void 0:A.serviceWorkerRegistration),tl(T)})).apply(this,arguments)}function ua(T,A,N){return gd.apply(this,arguments)}function gd(){return(gd=(0,F.Z)(function*(T,A,N){const B=Xl(A);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[Js],message_name:N[cd],message_time:N[dd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xl(T){switch(T){case Es.NOTIFICATION_CLICKED:return"notification_open";case Es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sl(){return(sl=(0,F.Z)(function*(T,A){const N=A.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===Es.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Ro(N)):T.onMessageHandler.next(Ro(N)));const B=N.data;Oo(B)&&"1"===B[Xs]&&(yield ua(T,N.messageType,B))})).apply(this,arguments)}const eu="@firebase/messaging";function ll(){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,F.Z)(function*(){try{yield(0,le.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new ye.wA("messaging",T=>{const A=new no(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function(T,A){return sl.apply(this,arguments)}(A,N)),A},"PUBLIC")),(0,ce._registerComponent)(new ye.wA("messaging-internal",T=>{const A=T.getProvider("messaging").getImmediate();return{getToken:B=>function(T,A){return Jl.apply(this,arguments)}(A,B)}},"PRIVATE")),(0,ce.registerVersion)(eu,"0.9.13"),(0,ce.registerVersion)(eu,"0.9.13","esm2017");const io="analytics",nu="firebase_id",oc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vd="https://www.googletagmanager.com/gtag/js",En=new se.Yd("@firebase/analytics");function cl(T){return Promise.all(T.map(A=>A.catch(N=>N)))}function bd(T,A){const N=document.createElement("script");N.src=`${vd}?l=${T}&id=${A}`,N.async=!0,document.head.appendChild(N)}function ru(T,A,N,B,Q,Y){return dl.apply(this,arguments)}function dl(){return(dl=(0,F.Z)(function*(T,A,N,B,Q,Y){const xe=B[Q];try{if(xe)yield A[xe];else{const gt=(yield cl(N)).find(_t=>_t.measurementId===Q);gt&&(yield A[gt.appId])}}catch(it){En.error(it)}T("config",Q,Y)})).apply(this,arguments)}function hl(T,A,N,B,Q){return ac.apply(this,arguments)}function ac(){return(ac=(0,F.Z)(function*(T,A,N,B,Q){try{let Y=[];if(Q&&Q.send_to){let xe=Q.send_to;Array.isArray(xe)||(xe=[xe]);const it=yield cl(N);for(const gt of xe){const _t=it.find(Mt=>Mt.measurementId===gt),zt=_t&&A[_t.appId];if(!zt){Y=[];break}Y.push(zt)}}0===Y.length&&(Y=Object.values(A)),yield Promise.all(Y),T("event",B,Q||{})}catch(Y){En.error(Y)}})).apply(this,arguments)}function mn(){const T=window.document.getElementsByTagName("script");for(const A of Object.values(T))if(A.src&&A.src.includes(vd))return A;return null}const qe=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),da=new class{constructor(A={},N=1e3){this.throttleMetadata=A,this.intervalMillis=N}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,N){this.throttleMetadata[A]=N}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Bg(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function fl(T){return iu.apply(this,arguments)}function iu(){return(iu=(0,F.Z)(function*(T){var A;const{appId:N,apiKey:B}=T,Q={method:"GET",headers:Bg(B)},Y=oc.replace("{app-id}",N),xe=yield fetch(Y,Q);if(200!==xe.status&&304!==xe.status){let it="";try{const gt=yield xe.json();(null===(A=gt.error)||void 0===A?void 0:A.message)&&(it=gt.error.message)}catch(gt){}throw qe.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:it})}return xe.json()})).apply(this,arguments)}function su(T){return rf.apply(this,arguments)}function rf(){return(rf=(0,F.Z)(function*(T,A=da,N){const{appId:B,apiKey:Q,measurementId:Y}=T.options;if(!B)throw qe.create("no-app-id");if(!Q){if(Y)return{measurementId:Y,appId:B};throw qe.create("no-api-key")}const xe=A.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},it=new Bo;return setTimeout((0,F.Z)(function*(){it.abort()}),void 0!==N?N:6e4),Lo({appId:B,apiKey:Q,measurementId:Y},xe,it,A)})).apply(this,arguments)}function Lo(T,A,N){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,F.Z)(function*(T,{throttleEndTimeMillis:A,backoffCount:N},B,Q=da){const{appId:Y,measurementId:xe}=T;try{yield Vo(B,A)}catch(it){if(xe)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${it.message}]`),{appId:Y,measurementId:xe};throw it}try{const it=yield fl(T);return Q.deleteThrottleMetadata(Y),it}catch(it){if(!lc(it)){if(Q.deleteThrottleMetadata(Y),xe)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${it.message}]`),{appId:Y,measurementId:xe};throw it}const gt=503===Number(it.customData.httpStatus)?(0,le.$s)(N,Q.intervalMillis,30):(0,le.$s)(N,Q.intervalMillis),_t={throttleEndTimeMillis:Date.now()+gt,backoffCount:N+1};return Q.setThrottleMetadata(Y,_t),En.debug(`Calling attemptFetch again in ${gt} millis`),Lo(T,_t,B,Q)}})).apply(this,arguments)}function Vo(T,A){return new Promise((N,B)=>{const Q=Math.max(A-Date.now(),0),Y=setTimeout(N,Q);T.addEventListener(()=>{clearTimeout(Y),B(qe.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function lc(T){if(!(T instanceof le.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Bo{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function ou(){return _n.apply(this,arguments)}function _n(){return(_n=(0,F.Z)(function*(){if(!(0,le.hl)())return En.warn(qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(T){return En.warn(qe.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function oo(){return(oo=(0,F.Z)(function*(T,A,N,B,Q,Y,xe){var it;const gt=su(T);gt.then(yn=>{N[yn.measurementId]=yn.appId,T.options.measurementId&&yn.measurementId!==T.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yn=>En.error(yn)),A.push(gt);const _t=ou().then(yn=>{if(yn)return B.getId()}),[zt,Mt]=yield Promise.all([gt,_t]);mn()||bd(Y,zt.measurementId),Q("js",new Date);const yi=null!==(it=null==xe?void 0:xe.config)&&void 0!==it?it:{};return yi.origin="firebase",yi.update=!0,null!=Mt&&(yi[nu]=Mt),Q("config",zt.measurementId,yi),zt.measurementId})).apply(this,arguments)}class uc{constructor(A){this.app=A}_delete(){return delete Ui[this.app.options.appId],Promise.resolve()}}let Ui={},ha=[];const Uo={};let fa,Lr,ao="dataLayer",ii=!1;function jn(T,A,N){!function(){const T=[];if((0,le.ru)()&&T.push("This is a browser extension environment."),(0,le.zI)()||T.push("Cookies are not available."),T.length>0){const A=T.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),N=qe.create("invalid-analytics-context",{errorInfo:A});En.warn(N.message)}}();const B=T.options.appId;if(!B)throw qe.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw qe.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ui[B])throw qe.create("already-exists",{id:B});if(!ii){!function(T){let A=[];Array.isArray(window[T])?A=window[T]:window[T]=A}(ao);const{wrappedGtag:Y,gtagCore:xe}=function(T,A,N,B,Q){let Y=function(...xe){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(Y=window[Q]),window[Q]=function(T,A,N,B){function Y(){return(Y=(0,F.Z)(function*(xe,it,gt){try{"event"===xe?yield hl(T,A,N,it,gt):"config"===xe?yield ru(T,A,N,B,it,gt):T("set",it)}catch(_t){En.error(_t)}})).apply(this,arguments)}return function(xe,it,gt){return Y.apply(this,arguments)}}(Y,T,A,N),{gtagCore:Y,wrappedGtag:window[Q]}}(Ui,ha,Uo,ao,"gtag");Lr=Y,fa=xe,ii=!0}return Ui[B]=function(T,A,N,B,Q,Y,xe){return oo.apply(this,arguments)}(T,ha,Uo,A,fa,ao,N),new uc(T)}function As(){return(As=(0,F.Z)(function*(T,A,N,B,Q){if(Q&&Q.global)T("event",N,B);else{const Y=yield A;T("event",N,Object.assign(Object.assign({},B),{send_to:Y}))}})).apply(this,arguments)}function dn(){return gl.apply(this,arguments)}function gl(){return(gl=(0,F.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(T){return!1}})).apply(this,arguments)}const lu="@firebase/analytics";(0,ce._registerComponent)(new ye.wA(io,(A,{options:N})=>jn(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ce._registerComponent)(new ye.wA("analytics-internal",function(A){try{const N=A.getProvider(io).getImmediate();return{logEvent:(B,Q,Y)=>function(T,A,N,B){T=(0,le.m9)(T),function(T,A,N,B,Q){return As.apply(this,arguments)}(Lr,Ui[T.app.options.appId],A,N,B).catch(Q=>En.error(Q))}(N,B,Q,Y)}}catch(N){throw qe.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ce.registerVersion)(lu,"0.7.9"),(0,ce.registerVersion)(lu,"0.7.9","esm2017");var An=O(2869),ml=O(8843);const ga=new class extends ml.v{}(class extends An.o{constructor(A,N){super(A,N),this.scheduler=A,this.work=N}schedule(A,N=0){return N>0?super.schedule(A,N):(this.delay=N,this.state=A,this.scheduler.flush(this),this)}execute(A,N){return N>0||this.closed?super.execute(A,N):this._execute(A,N)}requestAsyncId(A,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(A,N,B):A.flush(this)}});var is=O(2210),Ed=O(7384),Go=O(5222),ma=O(4763);const hc=new c.GfV("7.3.0"),du="__angularfire_symbol__analyticsIsSupportedValue",fc="__angularfire_symbol__analyticsIsSupported",Cd="__angularfire_symbol__remoteConfigIsSupportedValue",_a="__angularfire_symbol__remoteConfigIsSupported",Nt="__angularfire_symbol__messagingIsSupportedValue",Ar="__angularfire_symbol__messagingIsSupported";function lf(T,A,N){if(A){if(1===A.length)return A[0];const Y=A.filter(xe=>xe.app===N);if(1===Y.length)return Y[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[fc]||(globalThis[fc]=dn().then(T=>globalThis[du]=T).catch(()=>globalThis[du]=!1)),globalThis[Ar]||(globalThis[Ar]=ll().then(T=>globalThis[Nt]=T).catch(()=>globalThis[Nt]=!1)),globalThis[_a]||(globalThis[_a]=Ka().then(T=>globalThis[Cd]=T).catch(()=>globalThis[Cd]=!1));const uf=(T,A)=>{const N=A?[A]:(0,te.C6)(),B=[];return N.forEach(Q=>{Q.container.getProvider(T).instances.forEach(xe=>{B.includes(xe)||B.push(xe)})}),B};function Mr(){}class hu{constructor(A,N=ga){this.zone=A,this.delegate=N}now(){return this.delegate.now()}schedule(A,N,B){const Q=this.zone;return this.delegate.schedule(function(xe){Q.runGuarded(()=>{A.apply(this,[xe])})},N,B)}}class Id{constructor(A){this.zone=A,this.task=null}call(A,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mr,{},Mr,Mr)),N.pipe((0,Ed.b)({next:B,complete:B,error:B})).subscribe(A).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pc=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new hu(Zone.current)),this.insideAngular=N.run(()=>new hu(Zone.current,is.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(c.LFG(c.R0b))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function uo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function co(T){return uo(),function(T){return function(N){return(N=N.lift(new Id(T.ngZone))).pipe((0,Go.R)(T.outsideAngular),(0,ma.Q)(T.insideAngular))}}(uo())(T)}},4213:(Qe,_e,O)=>{O.d(_e,{BH:()=>$e,LL:()=>ae,ZR:()=>Me,gQ:()=>mr,zI:()=>ee,hu:()=>te,g5:()=>F,US:()=>ye,tV:()=>pe,h$:()=>se,L:()=>ue,$s:()=>Qr,r3:()=>cn,Sg:()=>De,ne:()=>Re,p$:()=>G,vZ:()=>Ir,ZB:()=>W,gK:()=>Yr,pd:()=>Zr,m9:()=>To,z$:()=>je,GJ:()=>fi,jU:()=>ie,ru:()=>Ce,d:()=>Pe,xb:()=>Qn,w1:()=>at,hl:()=>be,uI:()=>Ue,UG:()=>Fe,Yr:()=>He,b$:()=>Be,G6:()=>Ke,Mn:()=>Ne,w9:()=>ur,cI:()=>Tn,UI:()=>Ji,xO:()=>Vn,zd:()=>Io,DV:()=>vs,ug:()=>On,dS:()=>Ha,Pz:()=>wt,Dv:()=>Or,Wj:()=>zn,lb:()=>wn,eu:()=>Z});const te=function(q,j){if(!q)throw F(j)},F=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ce=function(q){const j=[];let K=0;for(let we=0;we<q.length;we++){let $=q.charCodeAt(we);$<128?j[K++]=$:$<2048?(j[K++]=$>>6|192,j[K++]=63&$|128):55296==(64512&$)&&we+1<q.length&&56320==(64512&q.charCodeAt(we+1))?($=65536+((1023&$)<<10)+(1023&q.charCodeAt(++we)),j[K++]=$>>18|240,j[K++]=$>>12&63|128,j[K++]=$>>6&63|128,j[K++]=63&$|128):(j[K++]=$>>12|224,j[K++]=$>>6&63|128,j[K++]=63&$|128)}return j},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,j){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let $=0;$<q.length;$+=3){const re=q[$],Ae=$+1<q.length,et=Ae?q[$+1]:0,Dt=$+2<q.length,xt=Dt?q[$+2]:0;let Pr=(15&et)<<2|xt>>6,pi=63&xt;Dt||(pi=64,Ae||(Pr=64)),we.push(K[re>>2],K[(3&re)<<4|et>>4],K[Pr],K[pi])}return we.join("")},encodeString(q,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(q):this.encodeByteArray(ce(q),j)},decodeString(q,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(q):function(q){const j=[];let K=0,we=0;for(;K<q.length;){const $=q[K++];if($<128)j[we++]=String.fromCharCode($);else if($>191&&$<224){const re=q[K++];j[we++]=String.fromCharCode((31&$)<<6|63&re)}else if($>239&&$<365){const Dt=((7&$)<<18|(63&q[K++])<<12|(63&q[K++])<<6|63&q[K++])-65536;j[we++]=String.fromCharCode(55296+(Dt>>10)),j[we++]=String.fromCharCode(56320+(1023&Dt))}else{const re=q[K++],Ae=q[K++];j[we++]=String.fromCharCode((15&$)<<12|(63&re)<<6|63&Ae)}}return j.join("")}(this.decodeStringToByteArray(q,j))},decodeStringToByteArray(q,j){this.init_();const K=j?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let $=0;$<q.length;){const re=K[q.charAt($++)],et=$<q.length?K[q.charAt($)]:0;++$;const xt=$<q.length?K[q.charAt($)]:64;++$;const kt=$<q.length?K[q.charAt($)]:64;if(++$,null==re||null==et||null==xt||null==kt)throw Error();we.push(re<<2|et>>4),64!==xt&&(we.push(et<<4&240|xt>>2),64!==kt&&we.push(xt<<6&192|kt))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},se=function(q){const j=ce(q);return ye.encodeByteArray(j,!0)},ue=function(q){return se(q).replace(/\./g,"")},pe=function(q){try{return ye.decodeString(q,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G(q){return W(void 0,q)}function W(q,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return j}for(const K in j)!j.hasOwnProperty(K)||!oe(K)||(q[K]=W(q[K],j[K]));return q}function oe(q){return"__proto__"!==q}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,K)=>{this.resolve=j,this.reject=K})}wrapCallback(j){return(K,we)=>{K?this.reject(K):this.resolve(we),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(K):j(K,we))}}}function De(q,j){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=j||"demo-project",$=q.iat||0,re=q.sub||q.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ae=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:$,exp:$+3600,auth_time:$,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},q);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Ae)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function ie(){return"object"==typeof self&&self.self===self}function Ce(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pe(){return je().indexOf("Electron/")>=0}function at(){const q=je();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Ne(){return je().indexOf("MSAppHost/")>=0}function He(){return!1}function Ke(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){return"object"==typeof indexedDB}function Z(){return new Promise((q,j)=>{try{let K=!0;const we="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(we);$.onsuccess=()=>{$.result.close(),K||self.indexedDB.deleteDatabase(we),q(!0)},$.onupgradeneeded=()=>{K=!1},$.onerror=()=>{var re;j((null===(re=$.error)||void 0===re?void 0:re.message)||"")}}catch(K){j(K)}})}function ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Me extends Error{constructor(j,K,we){super(K),this.code=j,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(j,K,we){this.service=j,this.serviceName=K,this.errors=we}create(j,...K){const we=K[0]||{},$=`${this.service}/${j}`,re=this.errors[j],Ae=re?function(q,j){return q.replace(jt,(K,we)=>{const $=j[we];return null!=$?String($):`<${we}?>`})}(re,we):"Error";return new Me($,`${this.serviceName}: ${Ae} (${$}).`,we)}}const jt=/\{\$([^}]+)}/g;function Tn(q){return JSON.parse(q)}function wt(q){return JSON.stringify(q)}const Wt=function(q){let j={},K={},we={},$="";try{const re=q.split(".");j=Tn(pe(re[0])||""),K=Tn(pe(re[1])||""),$=re[2],we=K.d||{},delete K.d}catch(re){}return{header:j,claims:K,data:we,signature:$}},ur=function(q){const K=Wt(q).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},fi=function(q){const j=Wt(q).claims;return"object"==typeof j&&!0===j.admin};function cn(q,j){return Object.prototype.hasOwnProperty.call(q,j)}function vs(q,j){if(Object.prototype.hasOwnProperty.call(q,j))return q[j]}function Qn(q){for(const j in q)if(Object.prototype.hasOwnProperty.call(q,j))return!1;return!0}function Ji(q,j,K){const we={};for(const $ in q)Object.prototype.hasOwnProperty.call(q,$)&&(we[$]=j.call(K,q[$],$,q));return we}function Ir(q,j){if(q===j)return!0;const K=Object.keys(q),we=Object.keys(j);for(const $ of K){if(!we.includes($))return!1;const re=q[$],Ae=j[$];if(tn(re)&&tn(Ae)){if(!Ir(re,Ae))return!1}else if(re!==Ae)return!1}for(const $ of we)if(!K.includes($))return!1;return!0}function tn(q){return null!==q&&"object"==typeof q}function Vn(q){const j=[];for(const[K,we]of Object.entries(q))Array.isArray(we)?we.forEach($=>{j.push(encodeURIComponent(K)+"="+encodeURIComponent($))}):j.push(encodeURIComponent(K)+"="+encodeURIComponent(we));return j.length?"&"+j.join("&"):""}function Io(q){const j={};return q.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[$,re]=we.split("=");j[decodeURIComponent($)]=decodeURIComponent(re)}}),j}function Zr(q){const j=q.indexOf("?");if(!j)return"";const K=q.indexOf("#",j);return q.substring(j,K>0?K:void 0)}class mr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,K){K||(K=0);const we=this.W_;if("string"==typeof j)for(let kt=0;kt<16;kt++)we[kt]=j.charCodeAt(K)<<24|j.charCodeAt(K+1)<<16|j.charCodeAt(K+2)<<8|j.charCodeAt(K+3),K+=4;else for(let kt=0;kt<16;kt++)we[kt]=j[K]<<24|j[K+1]<<16|j[K+2]<<8|j[K+3],K+=4;for(let kt=16;kt<80;kt++){const Pr=we[kt-3]^we[kt-8]^we[kt-14]^we[kt-16];we[kt]=4294967295&(Pr<<1|Pr>>>31)}let xt,fn,$=this.chain_[0],re=this.chain_[1],Ae=this.chain_[2],et=this.chain_[3],Dt=this.chain_[4];for(let kt=0;kt<80;kt++){kt<40?kt<20?(xt=et^re&(Ae^et),fn=1518500249):(xt=re^Ae^et,fn=1859775393):kt<60?(xt=re&Ae|et&(re|Ae),fn=2400959708):(xt=re^Ae^et,fn=3395469782);const Pr=($<<5|$>>>27)+xt+Dt+fn+we[kt]&4294967295;Dt=et,et=Ae,Ae=4294967295&(re<<30|re>>>2),re=$,$=Pr}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+re&4294967295,this.chain_[2]=this.chain_[2]+Ae&4294967295,this.chain_[3]=this.chain_[3]+et&4294967295,this.chain_[4]=this.chain_[4]+Dt&4294967295}update(j,K){if(null==j)return;void 0===K&&(K=j.length);const we=K-this.blockSize;let $=0;const re=this.buf_;let Ae=this.inbuf_;for(;$<K;){if(0===Ae)for(;$<=we;)this.compress_(j,$),$+=this.blockSize;if("string"==typeof j){for(;$<K;)if(re[Ae]=j.charCodeAt($),++Ae,++$,Ae===this.blockSize){this.compress_(re),Ae=0;break}}else for(;$<K;)if(re[Ae]=j[$],++Ae,++$,Ae===this.blockSize){this.compress_(re),Ae=0;break}}this.inbuf_=Ae,this.total_+=K}digest(){const j=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&K,K/=256;this.compress_(this.buf_);let we=0;for(let $=0;$<5;$++)for(let re=24;re>=0;re-=8)j[we]=this.chain_[$]>>re&255,++we;return j}}function Re(q,j){const K=new _r(q,j);return K.subscribe.bind(K)}class _r{constructor(j,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{j(this)}).catch(we=>{this.error(we)})}next(j){this.forEachObserver(K=>{K.next(j)})}error(j){this.forEachObserver(K=>{K.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,K,we){let $;if(void 0===j&&void 0===K&&void 0===we)throw new Error("Missing Observer.");$=function(q,j){if("object"!=typeof q||null===q)return!1;for(const K of["next","error","complete"])if(K in q&&"function"==typeof q[K])return!0;return!1}(j)?j:{next:j,error:K,complete:we},void 0===$.next&&($.next=kn),void 0===$.error&&($.error=kn),void 0===$.complete&&($.complete=kn);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Ae){}}),this.observers.push($),re}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,j)}sendOne(j,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{K(this.observers[j])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const Or=function(q,j,K,we){let $;if(we<j?$="at least "+j:we>K&&($=0===K?"none":"no more than "+K),$)throw new Error(q+" failed: Was called with "+we+(1===we?" argument.":" arguments.")+" Expects "+$+".")};function Yr(q,j){return`${q} failed: ${j} argument `}function zn(q,j,K,we){if((!we||K)&&"function"!=typeof K)throw new Error(Yr(q,j)+"must be a valid function.")}function wn(q,j,K,we){if((!we||K)&&("object"!=typeof K||null===K))throw new Error(Yr(q,j)+"must be a valid context object.")}const Ha=function(q){const j=[];let K=0;for(let we=0;we<q.length;we++){let $=q.charCodeAt(we);if($>=55296&&$<=56319){const re=$-55296;we++,te(we<q.length,"Surrogate pair missing trail surrogate."),$=65536+(re<<10)+(q.charCodeAt(we)-56320)}$<128?j[K++]=$:$<2048?(j[K++]=$>>6|192,j[K++]=63&$|128):$<65536?(j[K++]=$>>12|224,j[K++]=$>>6&63|128,j[K++]=63&$|128):(j[K++]=$>>18|240,j[K++]=$>>12&63|128,j[K++]=$>>6&63|128,j[K++]=63&$|128)}return j},On=function(q){let j=0;for(let K=0;K<q.length;K++){const we=q.charCodeAt(K);we<128?j++:we<2048?j+=2:we>=55296&&we<=56319?(j+=4,K++):j+=3}return j};function Qr(q,j=1e3,K=2){const we=j*Math.pow(K,q),$=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+$)}function To(q){return q&&q._delegate?q._delegate:q}},7713:(Qe,_e,O)=>{O.d(_e,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=O(1572);(0,c.registerVersion)("firebase","9.8.1","app")},7892:(Qe,_e,O)=>{O.d(_e,{Z:()=>c.Z});var c=O(6293);c.Z.registerVersion("firebase","9.8.1","app-compat")},6600:(Qe,_e,O)=>{O.r(_e);var c=O(8239),te=O(6293),F=O(4213),ce=O(1572);function ue(y,p){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&p.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(w=Object.getOwnPropertySymbols(y);S<w.length;S++)p.indexOf(w[S])<0&&Object.prototype.propertyIsEnumerable.call(y,w[S])&&(g[w[S]]=y[w[S]])}return g}var ae=O(3855),yt=O(1177);const fi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},cn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vs=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ji=new ae.Yd("@firebase/auth");function Ir(y,...p){Ji.logLevel<=ae.in.ERROR&&Ji.error(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}function tn(y,...p){throw mr(y,...p)}function Vn(y,...p){return mr(y,...p)}function Io(y,p,g){const w=Object.assign(Object.assign({},cn()),{[p]:g});return new F.LL("auth","Firebase",w).create(p,{appName:y.name})}function Zr(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&tn(y,"argument-error"),Io(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mr(y,...p){if("string"!=typeof y){const g=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return vs.create(y,...p)}function Re(y,p,...g){if(!y)throw mr(p,...g)}function _r(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Ir(p),new Error(p)}function dt(y,p){y||_r(p)}const Dn=new Map;function kn(y){dt(y instanceof Function,"Expected a class definition");let p=Dn.get(y);return p?(dt(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Dn.set(y,p),p)}function bs(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function zn(){return"http:"===wn()||"https:"===wn()}function wn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Xe{constructor(p,g){this.shortDelay=p,this.longDelay=g,dt(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zn()||(0,F.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function vt(y,p){dt(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class Ks{static initialize(p,g,w){this.fetchImpl=p,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ki={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qr=new Xe(3e4,6e4);function It(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function en(y,p,g,w){return To.apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(y,p,g,w,S={}){return q(y,S,(0,c.Z)(function*(){let x={},H={};w&&("GET"===p?H=w:x={body:JSON.stringify(w)});const ne=(0,F.xO)(Object.assign({key:y.config.apiKey},H)).slice(1),Oe=yield y._getAdditionalHeaders();return Oe["Content-Type"]="application/json",y.languageCode&&(Oe["X-Firebase-Locale"]=y.languageCode),Ks.fetch()($(y,y.config.apiHost,g,ne),Object.assign({method:p,headers:Oe,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function q(y,p,g){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)(function*(y,p,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},ki),p);try{const S=new re(y),x=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const H=yield x.json();if("needConfirmation"in H)throw Ae(y,"account-exists-with-different-credential",H);if(x.ok&&!("errorMessage"in H))return H;{const ne=x.ok?H.errorMessage:H.error.message,[Oe,Ie]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw Ae(y,"credential-already-in-use",H);if("EMAIL_EXISTS"===Oe)throw Ae(y,"email-already-in-use",H);const st=w[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw Io(y,st,Ie);tn(y,st)}}catch(S){if(S instanceof F.ZR)throw S;tn(y,"network-request-failed")}})).apply(this,arguments)}function K(y,p,g,w){return we.apply(this,arguments)}function we(){return(we=(0,c.Z)(function*(y,p,g,w,S={}){const x=yield en(y,p,g,w,S);return"mfaPendingCredential"in x&&tn(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function $(y,p,g,w){const S=`${p}${g}?${w}`;return y.config.emulator?vt(y.config,S):`${y.config.apiScheme}://${S}`}class re{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Vn(this.auth,"network-request-failed")),Qr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ae(y,p,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=Vn(y,p,w);return S.customData._tokenResponse=g,S}function Dt(){return(Dt=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function xt(y,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function kt(y,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function pi(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function zl(){return(zl=(0,c.Z)(function*(y,p=!1){const g=(0,F.m9)(y),w=yield g.getIdToken(p),S=sa(w);Re(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const x="object"==typeof S.firebase?S.firebase:void 0,H=null==x?void 0:x.sign_in_provider;return{claims:S,token:w,authTime:pi(ia(S.auth_time)),issuedAtTime:pi(ia(S.iat)),expirationTime:pi(ia(S.exp)),signInProvider:H||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function ia(y){return 1e3*Number(y)}function sa(y){const[p,g,w]=y.split(".");if(void 0===p||void 0===g||void 0===w)return Ir("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(g);return S?JSON.parse(S):(Ir("Failed to decode base64 JWT payload"),null)}catch(S){return Ir("Caught error parsing JWT payload as JSON",S),null}}function cr(y,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(w){throw w instanceof F.ZR&&yr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function yr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ri{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),w)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class ze{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=pi(this.lastLoginAt),this.creationTime=pi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function At(y){return pn.apply(this,arguments)}function pn(){return(pn=(0,c.Z)(function*(y){var p;const g=y.auth,w=yield y.getIdToken(),S=yield cr(y,kt(g,{idToken:w}));Re(null==S?void 0:S.users.length,g,"internal-error");const x=S.users[0];y._notifyReloadListener(x);const H=(null===(p=x.providerUserInfo)||void 0===p?void 0:p.length)?Do(x.providerUserInfo):[],ne=Jn(y.providerData,H),st=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==ne?void 0:ne.length)),lt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ne,metadata:new ze(x.createdAt,x.lastLoginAt),isAnonymous:st};Object.assign(y,lt)})).apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(y){const p=(0,F.m9)(y);yield At(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Jn(y,p){return[...y.filter(w=>!p.some(S=>S.providerId===w.providerId)),...p]}function Do(y){return y.map(p=>{var{providerId:g}=p,w=ue(p,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function ws(){return(ws=(0,c.Z)(function*(y,p){const g=yield q(y,{},(0,c.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:x}=y.config,H=$(y,S,"/v1/token",`key=${x}`),ne=yield y._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",Ks.fetch()(H,{method:"POST",headers:ne,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Re(p.idToken,"internal-error"),Re(void 0!==p.idToken,"internal-error"),Re(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(y){const p=sa(y);return Re(p,"internal-error"),Re(void 0!==p.exp,"internal-error"),Re(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var w=this;return(0,c.Z)(function*(){return Re(!w.accessToken||w.refreshToken,p,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var w=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:x,expiresIn:H}=yield function(y,p){return ws.apply(this,arguments)}(p,g);w.updateTokensAndExpiration(S,x,Number(H))})()}updateTokensAndExpiration(p,g,w){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,g){const{refreshToken:w,accessToken:S,expirationTime:x}=g,H=new Xi;return w&&(Re("string"==typeof w,"internal-error",{appName:p}),H.refreshToken=w),S&&(Re("string"==typeof S,"internal-error",{appName:p}),H.accessToken=S),x&&(Re("number"==typeof x,"internal-error",{appName:p}),H.expirationTime=x),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Xi,this.toJSON())}_performRefresh(){return _r("not implemented")}}function bt(y,p){Re("string"==typeof y||void 0===y,"internal-error",{appName:p})}class Ni{constructor(p){var{uid:g,auth:w,stsTokenManager:S}=p,x=ue(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ri(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new ze(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,c.Z)(function*(){const w=yield cr(g,g.stsTokenManager.getToken(g.auth,p));return Re(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(p){return function(y){return zl.apply(this,arguments)}(this,p)}reload(){return function(y){return Xr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ni(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var w=this;return(0,c.Z)(function*(){let S=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),S=!0),g&&(yield At(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,c.Z)(function*(){const g=yield p.getIdToken();return yield cr(p,function(y,p){return Dt.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var w,S,x,H,ne,Oe,Ie,st;const lt=null!==(w=g.displayName)&&void 0!==w?w:void 0,qt=null!==(S=g.email)&&void 0!==S?S:void 0,Xn=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,Ca=null!==(H=g.photoURL)&&void 0!==H?H:void 0,Iu=null!==(ne=g.tenantId)&&void 0!==ne?ne:void 0,Gd=null!==(Oe=g._redirectEventId)&&void 0!==Oe?Oe:void 0,Of=null!==(Ie=g.createdAt)&&void 0!==Ie?Ie:void 0,$d=null!==(st=g.lastLoginAt)&&void 0!==st?st:void 0,{uid:Tu,emailVerified:Mc,isAnonymous:xc,providerData:kc,stsTokenManager:zd}=g;Re(Tu&&zd,p,"internal-error");const Qy=Xi.fromJSON(this.name,zd);Re("string"==typeof Tu,p,"internal-error"),bt(lt,p.name),bt(qt,p.name),Re("boolean"==typeof Mc,p,"internal-error"),Re("boolean"==typeof xc,p,"internal-error"),bt(Xn,p.name),bt(Ca,p.name),bt(Iu,p.name),bt(Gd,p.name),bt(Of,p.name),bt($d,p.name);const Rc=new Ni({uid:Tu,auth:p,email:qt,emailVerified:Mc,displayName:lt,isAnonymous:xc,photoURL:Ca,phoneNumber:Xn,tenantId:Iu,stsTokenManager:Qy,createdAt:Of,lastLoginAt:$d});return kc&&Array.isArray(kc)&&(Rc.providerData=kc.map(Nc=>Object.assign({},Nc))),Gd&&(Rc._redirectEventId=Gd),Rc}static _fromIdTokenResponse(p,g,w=!1){return(0,c.Z)(function*(){const S=new Xi;S.updateFromServerResponse(g);const x=new Ni({uid:g.localId,auth:p,stsTokenManager:S,isAnonymous:w});return yield At(x),x})()}}const gi=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,c.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,c.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,c.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function ei(y,p,g){return`firebase:${y}:${p}:${g}`}class Jt{constructor(p,g,w){this.persistence=p,this.auth=g,this.userKey=w;const{config:S,name:x}=this.auth;this.fullUserKey=ei(this.userKey,S.apiKey,x),this.fullPersistenceKey=ei("persistence",S.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Ni._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,c.Z)(function*(){if(g.persistence===p)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,w="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Jt(kn(gi),p,w);const S=(yield Promise.all(g.map(function(){var Ie=(0,c.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let x=S[0]||kn(gi);const H=ei(w,p.config.apiKey,p.name);let ne=null;for(const Ie of g)try{const st=yield Ie._get(H);if(st){const lt=Ni._fromJSON(p,st);Ie!==x&&(ne=lt),x=Ie;break}}catch(st){}const Oe=S.filter(Ie=>Ie._shouldAllowMigration);return x._shouldAllowMigration&&Oe.length?(x=Oe[0],ne&&(yield x._set(H,ne.toJSON())),yield Promise.all(g.map(function(){var Ie=(0,c.Z)(function*(st){if(st!==x)try{yield st._remove(H)}catch(lt){}});return function(st){return Ie.apply(this,arguments)}}())),new Jt(x,p,w)):new Jt(x,p,w)})()}}function Ga(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(rd(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ao(p))return"Firefox";if(p.includes("silk/"))return"Silk";if($a(p))return"Blackberry";if(ql(p))return"Webos";if(ti(p))return"Safari";if((p.includes("chrome/")||an(p))&&!p.includes("edge/"))return"Chrome";if(Zs(p))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ao(y=(0,F.z$)()){return/firefox\//i.test(y)}function ti(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function an(y=(0,F.z$)()){return/crios\//i.test(y)}function rd(y=(0,F.z$)()){return/iemobile/i.test(y)}function Zs(y=(0,F.z$)()){return/android/i.test(y)}function $a(y=(0,F.z$)()){return/blackberry/i.test(y)}function ql(y=(0,F.z$)()){return/webos/i.test(y)}function vr(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function za(y=(0,F.z$)()){return vr(y)||Zs(y)||ql(y)||$a(y)||/windows phone/i.test(y)||rd(y)}function Pi(y,p=[]){let g;switch(y){case"Browser":g=Ga((0,F.z$)());break;case"Worker":g=`${Ga((0,F.z$)())}-${y}`;break;default:g=y}const w=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${w}`}class Wh{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const w=x=>new Promise((H,ne)=>{try{H(p(x))}catch(Oe){ne(Oe)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,c.Z)(function*(){if(g.auth.currentUser===p)return;const w=[];try{for(const S of g.queue)yield S(p),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const x of w)try{x()}catch(H){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S.message})}})()}}class Qs{constructor(p,g,w){this.app=p,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ni(this),this.idTokenSubscription=new ni(this),this.beforeStateQueue=new Wh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vs,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,g){var w=this;return g&&(this._popupRedirectResolver=kn(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,x;if(!w._deleted&&(w.persistenceManager=yield Jt.create(w,p),!w._deleted)){if(null===(S=w._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(H){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(x=w.currentUser)||void 0===x?void 0:x.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,c.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let x=S,H=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ne=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Oe=null==x?void 0:x._redirectEventId,Ie=yield g.tryRedirectSignIn(p);(!ne||ne===Oe)&&(null==Ie?void 0:Ie.user)&&(x=Ie.user,H=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(H)try{yield g.beforeStateQueue.runMiddleware(x)}catch(ne){x=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ne))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return Re(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(p){var g=this;return(0,c.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(S){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,c.Z)(function*(){try{yield At(p)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,c.Z)(function*(){const w=p?(0,F.m9)(p):null;return w&&Re(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(p,g=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return p&&Re(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(kn(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,g,w){return this.registerStateListener(this.authStateSubscription,p,g,w)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,w){return this.registerStateListener(this.idTokenSubscription,p,g,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var w=this;return(0,c.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const w=p&&kn(p)||g._popupRedirectResolver;Re(w,g,"argument-error"),g.redirectPersistenceManager=yield Jt.create(g,[kn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,c.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===p?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,c.Z)(function*(){if(p===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,w,S){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),H=this._isInitialized?Promise.resolve():this._initializationPromise;return Re(H,this,"internal-error"),H.then(()=>x(this.currentUser)),"function"==typeof g?p.addObserver(g,w,S):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var g;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function Wn(y){return(0,F.m9)(y)}class ni{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xg(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function id(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class qa{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return _r("not implemented")}_getIdTokenResponse(p){return _r("not implemented")}_linkToIdToken(p,g){return _r("not implemented")}_getReauthenticationResolver(p){return _r("not implemented")}}function Zh(y,p){return sd.apply(this,arguments)}function sd(){return(sd=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:resetPassword",It(y,p))})).apply(this,arguments)}function Yh(y,p){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function oa(y,p){return od.apply(this,arguments)}function od(){return(od=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",It(y,p))})).apply(this,arguments)}function ad(){return(ad=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithPassword",It(y,p))})).apply(this,arguments)}function Yu(y,p){return ld.apply(this,arguments)}function ld(){return(ld=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:sendOobCode",It(y,p))})).apply(this,arguments)}function Ng(y,p){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,c.Z)(function*(y,p){return Yu(y,p)})).apply(this,arguments)}function Kl(y,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,c.Z)(function*(y,p){return Yu(y,p)})).apply(this,arguments)}function Qu(y,p){return ud.apply(this,arguments)}function ud(){return(ud=(0,c.Z)(function*(y,p){return Yu(y,p)})).apply(this,arguments)}function Og(y,p){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(y,p){return Yu(y,p)})).apply(this,arguments)}function Js(){return(Js=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithEmailLink",It(y,p))})).apply(this,arguments)}function dd(){return(dd=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithEmailLink",It(y,p))})).apply(this,arguments)}class Xs extends qa{constructor(p,g,w,S=null){super("password",w),this._email=p,this._password=g,this._tenantId=S}static _fromEmailAndPassword(p,g){return new Xs(p,g,"password")}static _fromEmailAndCode(p,g,w=null){return new Xs(p,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function(y,p){return ad.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(y,p){return Js.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:tn(p,"internal-error")}})()}_linkToIdToken(p,g){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return Yh(p,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(y,p){return dd.apply(this,arguments)}(p,{idToken:g,email:w._email,oobCode:w._password});default:tn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ts(y,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithIdp",It(y,p))})).apply(this,arguments)}class mi extends qa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new mi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):tn("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:S}=g,x=ue(g,["providerId","signInMethod"]);if(!w||!S)return null;const H=new mi(w,S);return H.idToken=x.idToken||void 0,H.accessToken=x.accessToken||void 0,H.secret=x.secret,H.nonce=x.nonce,H.pendingToken=x.pendingToken||null,H}_getIdTokenResponse(p){return ts(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,ts(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,ts(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,F.xO)(g)}return p}}function Za(y,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:sendVerificationCode",It(y,p))})).apply(this,arguments)}function Xu(){return(Xu=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithPhoneNumber",It(y,p))})).apply(this,arguments)}function ec(){return(ec=(0,c.Z)(function*(y,p){const g=yield K(y,"POST","/v1/accounts:signInWithPhoneNumber",It(y,p));if(g.temporaryProof)throw Ae(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const tc={USER_NOT_FOUND:"user-not-found"};function nn(){return(nn=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithPhoneNumber",It(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),tc)})).apply(this,arguments)}class Is extends qa{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Is({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Is({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function(y,p){return Xu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function(y,p){return ec.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(y,p){return nn.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:x}=p;return w||g||S||x?new Is({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:x}):null}}class Ts{constructor(p){var g,w,S,x,H,ne;const Oe=(0,F.zd)((0,F.pd)(p)),Ie=null!==(g=Oe.apiKey)&&void 0!==g?g:null,st=null!==(w=Oe.oobCode)&&void 0!==w?w:null,lt=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Oe.mode)&&void 0!==S?S:null);Re(Ie&&st&&lt,"argument-error"),this.apiKey=Ie,this.operation=lt,this.code=st,this.continueUrl=null!==(x=Oe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(H=Oe.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ne=Oe.tenantId)&&void 0!==ne?ne:null}static parseLink(p){const g=function(y){const p=(0,F.zd)((0,F.pd)(y)).link,g=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||p||y}(p);try{return new Ts(g)}catch(w){return null}}}let eo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Xs._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=Ts.parseLink(w);return Re(S,"argument-error"),Xs._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Rn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class to extends Rn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Li extends to{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return Re("providerId"in g&&"signInMethod"in g,"argument-error"),mi._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Re(p.idToken||p.accessToken,"argument-error"),mi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Li.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Li.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:x,nonce:H,providerId:ne}=p;if(!w&&!S&&!g&&!x||!ne)return null;try{return new Li(ne)._credential({idToken:g,accessToken:w,nonce:H,pendingToken:x})}catch(Oe){return null}}}let Mo=(()=>{class y extends to{constructor(){super("facebook.com")}static credential(g){return mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),rn=(()=>{class y extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return y.credential(w,S)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Qa=(()=>{class y extends to{constructor(){super("github.com")}static credential(g){return mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ds extends qa{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return ts(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,ts(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,ts(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:S,pendingToken:x}=g;return w&&S&&x&&w===S?new Ds(w,x):null}static _create(p,g){return new Ds(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xo extends Rn{constructor(p){Re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return xo.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return xo.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Ds.fromJSON(p);return Re(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:w}=p;if(!g||!w)return null;try{return Ds._create(w,g)}catch(S){return null}}}let ko=(()=>{class y extends to{constructor(){super("twitter.com")}static credential(g,w){return mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return y.credential(w,S)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function pt(y,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signUp",It(y,p))})).apply(this,arguments)}class br{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,w,S=!1){return(0,c.Z)(function*(){const x=yield Ni._fromIdTokenResponse(p,w,S),H=el(w);return new br({user:x,providerId:H,_tokenResponse:w,operationType:g})})()}static _forOperation(p,g,w){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const S=el(w);return new br({user:p,providerId:S,_tokenResponse:w,operationType:g})})()}}function el(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function tl(){return(tl=(0,c.Z)(function*(y){var p;const g=Wn(y);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new br({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield pt(g,{returnSecureToken:!0}),S=yield br._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class aa extends F.ZR{constructor(p,g,w,S){var x;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,aa.prototype),this.customData={appName:p.name,tenantId:null!==(x=p.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,g,w,S){return new aa(p,g,w,S)}}function rc(y,p,g,w){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?aa._fromErrorAndOperation(y,x,p,w):x})}function Se(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Ss(){return(Ss=(0,c.Z)(function*(y,p){const g=(0,F.m9)(y);yield Vi(!0,g,p);const{providerUserInfo:w}=yield xt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),S=Se(w||[]);return g.providerData=g.providerData.filter(x=>S.has(x.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Nn(y,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,c.Z)(function*(y,p,g=!1){const w=yield cr(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return br._forOperation(y,"link",w)})).apply(this,arguments)}function Vi(y,p,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,c.Z)(function*(y,p,g){yield At(p);const S=!1===y?"provider-already-linked":"no-such-provider";Re(Se(p.providerData).has(g)===y,p.auth,S)})).apply(this,arguments)}function Yl(y,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,c.Z)(function*(y,p,g=!1){const{auth:w}=y,S="reauthenticate";try{const x=yield cr(y,rc(w,S,p,y),g);Re(x.idToken,w,"internal-error");const H=sa(x.idToken);Re(H,w,"internal-error");const{sub:ne}=H;return Re(y.uid===ne,w,"user-mismatch"),br._forOperation(y,S,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&tn(w,"user-mismatch"),x}})).apply(this,arguments)}function Xh(y,p){return ic.apply(this,arguments)}function ic(){return(ic=(0,c.Z)(function*(y,p,g=!1){const w="signIn",S=yield rc(y,w,p),x=yield br._fromIdTokenResponse(y,w,S);return g||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function No(y,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,c.Z)(function*(y,p){return Xh(Wn(y),p)})).apply(this,arguments)}function dr(y,p){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(y,p){const g=(0,F.m9)(y);return yield Vi(!1,g,p.providerId),Nn(g,p)})).apply(this,arguments)}function la(y,p){return no.apply(this,arguments)}function no(){return(no=(0,c.Z)(function*(y,p){return Yl((0,F.m9)(y),p)})).apply(this,arguments)}function ns(y,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,c.Z)(function*(y,p){return K(y,"POST","/v1/accounts:signInWithCustomToken",It(y,p))})).apply(this,arguments)}function il(){return(il=(0,c.Z)(function*(y,p){const g=Wn(y),w=yield ns(g,{token:p,returnSecureToken:!0}),S=yield br._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ql{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Po._fromServerResponse(p,g):tn(p,"internal-error")}}class Po extends Ql{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Po(g)}}function Fo(y,p,g){var w;Re((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Re(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Re(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(Re(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function ua(){return(ua=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y),S={requestType:"PASSWORD_RESET",email:p};g&&Fo(w,S,g),yield Kl(w,S)})).apply(this,arguments)}function Xl(){return(Xl=(0,c.Z)(function*(y,p,g){yield Zh((0,F.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function sl(){return(sl=(0,c.Z)(function*(y,p){yield oa((0,F.m9)(y),{oobCode:p})})).apply(this,arguments)}function eu(y,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,c.Z)(function*(y,p){const g=(0,F.m9)(y),w=yield Zh(g,{oobCode:p}),S=w.requestType;switch(Re(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(w.mfaInfo,g,"internal-error");default:Re(w.email,g,"internal-error")}let x=null;return w.mfaInfo&&(x=Ql._fromServerResponse(Wn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:x},operation:S}})).apply(this,arguments)}function al(){return(al=(0,c.Z)(function*(y,p){const{data:g}=yield eu((0,F.m9)(y),p);return g.email})).apply(this,arguments)}function ll(){return(ll=(0,c.Z)(function*(y,p,g){const w=Wn(y),S=yield pt(w,{returnSecureToken:!0,email:p,password:g}),x=yield br._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(x.user),x})).apply(this,arguments)}function gn(){return(gn=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y),S={requestType:"EMAIL_SIGNIN",email:p};Re(g.handleCodeInApp,w,"argument-error"),g&&Fo(w,S,g),yield Qu(w,S)})).apply(this,arguments)}function tf(){return(tf=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y),S=eo.credentialWithLink(p,g||bs());return Re(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),No(w,S)})).apply(this,arguments)}function _d(y,p){return nf.apply(this,arguments)}function nf(){return(nf=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:createAuthUri",It(y,p))})).apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(y,p){const w={identifier:p,continueUri:zn()?bs():"http://localhost"},{signinMethods:S}=yield _d((0,F.m9)(y),w);return S||[]})).apply(this,arguments)}function ul(){return(ul=(0,c.Z)(function*(y,p){const g=(0,F.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Fo(g.auth,S,p);const{email:x}=yield Ng(g.auth,S);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function oc(){return(oc=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&Fo(w.auth,x,g);const{email:H}=yield Og(w.auth,x);H!==y.email&&(yield y.reload())})).apply(this,arguments)}function vd(y,p){return En.apply(this,arguments)}function En(){return(En=(0,c.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bd(){return(bd=(0,c.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const w=(0,F.m9)(y),x={idToken:yield w.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},H=yield cr(w,vd(w.auth,x));w.displayName=H.displayName||null,w.photoURL=H.photoUrl||null;const ne=w.providerData.find(({providerId:Oe})=>"password"===Oe);ne&&(ne.displayName=w.displayName,ne.photoURL=w.photoURL),yield w._updateTokensIfNecessary(H)})).apply(this,arguments)}function dl(y,p,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,c.Z)(function*(y,p,g){const{auth:w}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(x.email=p),g&&(x.password=g);const H=yield cr(y,Yh(w,x));yield y._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class ca{constructor(p,g,w={}){this.isNewUser=p,this.providerId=g,this.profile=w}}class Vg extends ca{constructor(p,g,w,S){super(p,g,w),this.username=S}}class mn extends ca{constructor(p,g){super(p,"facebook.com",g)}}class so extends Vg{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class qe extends ca{constructor(p,g){super(p,"google.com",g)}}class Rt extends Vg{constructor(p,g,w){super(p,"twitter.com",g,w)}}function hr(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(y){var p,g;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const H=null===(g=null===(p=sa(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(H)return new ca(x,"anonymous"!==H&&"custom"!==H?H:null)}if(!w)return null;switch(w){case"facebook.com":return new mn(x,S);case"github.com":return new so(x,S);case"google.com":return new qe(x,S);case"twitter.com":return new Rt(x,S,y.screenName||null);case"custom":case"anonymous":return new ca(x,null);default:return new ca(x,w,S)}}(g)}class Vo{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new Vo("enroll",p)}static _fromMfaPendingCredential(p){return new Vo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,w;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Vo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return Vo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class lc{constructor(p,g,w){this.session=p,this.hints=g,this.signInResolver=w}static _fromError(p,g){const w=Wn(p),S=g.customData._serverResponse,x=(S.mfaInfo||[]).map(ne=>Ql._fromServerResponse(w,ne));Re(S.mfaPendingCredential,w,"internal-error");const H=Vo._fromMfaPendingCredential(S.mfaPendingCredential);return new lc(H,x,function(){var ne=(0,c.Z)(function*(Oe){const Ie=yield Oe._process(w,H);delete S.mfaInfo,delete S.mfaPendingCredential;const st=Object.assign(Object.assign({},S),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(g.operationType){case"signIn":const lt=yield br._fromIdTokenResponse(w,g.operationType,st);return yield w._updateCurrentUser(lt.user),lt;case"reauthenticate":return Re(g.user,w,"internal-error"),br._forOperation(g.user,g.operationType,st);default:tn(w,"internal-error")}});return function(Oe){return ne.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,c.Z)(function*(){return g.signInResolver(p)})()}}function ou(y,p){return en(y,"POST","/v2/accounts/mfaEnrollment:start",It(y,p))}class oo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Ql._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new oo(p)}getSession(){var p=this;return(0,c.Z)(function*(){return Vo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var w=this;return(0,c.Z)(function*(){const S=p,x=yield w.getSession(),H=yield cr(w.user,S._process(w.user.auth,x,g));return yield w.user._updateTokensIfNecessary(H),w.user.reload()})()}unenroll(p){var g=this;return(0,c.Z)(function*(){const w="string"==typeof p?p:p.uid,S=yield g.user.getIdToken(),x=yield cr(g.user,function(y,p){return en(y,"POST","/v2/accounts/mfaEnrollment:withdraw",It(y,p))}(g.user.auth,{idToken:S,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:H})=>H!==w),yield g.user._updateTokensIfNecessary(x);try{yield g.user.reload()}catch(H){if("auth/user-token-expired"!==H.code)throw H}})()}}const uc=new WeakMap,ha="__sak";class Uo{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ha,"1"),this.storage.removeItem(ha),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ii=(()=>{class y extends Uo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,F.z$)();return ti(y)||vr(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=za(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),x=this.localCache[w];S!==x&&g(w,x,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ne,Oe,Ie)=>{this.notifyListeners(ne,Ie)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(S);if(g.newValue!==ne)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const x=()=>{const ne=this.storage.getItem(S);!w&&this.localCache[S]===ne||this.notifyListeners(S,ne)},H=this.storage.getItem(S);(0,F.w1)()&&10===document.documentMode&&H!==g.newValue&&g.newValue!==g.oldValue?setTimeout(x,10):x()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const x of Array.from(S))x(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,x=this;return(0,c.Z)(function*(){yield S().call(x,g,w),x.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,c.Z)(function*(){const x=yield w().call(S,g);return S.localCache[g]=JSON.stringify(x),x})()}_remove(g){var w=()=>super._remove,S=this;return(0,c.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Dr=(()=>{class y extends Uo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let jo=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(x=>x.isListeningto(g));if(w)return w;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,c.Z)(function*(){const S=g,{eventId:x,eventType:H,data:ne}=S.data,Oe=w.handlersMap[H];if(!(null==Oe?void 0:Oe.size))return;S.ports[0].postMessage({status:"ack",eventId:x,eventType:H});const Ie=Array.from(Oe).map(function(){var lt=(0,c.Z)(function*(qt){return qt(S.origin,ne)});return function(qt){return lt.apply(this,arguments)}}()),st=yield function(y){return Promise.all(y.map(function(){var p=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return p.apply(this,arguments)}}()))}(Ie);S.ports[0].postMessage({status:"done",eventId:x,eventType:H,response:st})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function As(y="",p=10){let g="";for(let w=0;w<p;w++)g+=Math.floor(10*Math.random());return y+g}class Fn{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,w=50){var S=this;return(0,c.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let H,ne;return new Promise((Oe,Ie)=>{const st=As("",20);x.port1.start();const lt=setTimeout(()=>{Ie(new Error("unsupported_event"))},w);ne={messageChannel:x,onMessage(qt){const Xn=qt;if(Xn.data.eventId===st)switch(Xn.data.status){case"ack":clearTimeout(lt),H=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Oe(Xn.data.response);break;default:clearTimeout(lt),clearTimeout(H),Ie(new Error("invalid_response"))}}},S.handlers.add(ne),x.port1.addEventListener("message",ne.onMessage),S.target.postMessage({eventType:p,eventId:st,data:g},[x.port2])}).finally(()=>{ne&&S.removeMessageHandler(ne)})})()}}function Ft(){return window}function rs(){return void 0!==Ft().WorkerGlobalScope&&"function"==typeof Ft().importScripts}function Kt(){return(Kt=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const si="firebaseLocalStorageDb",dn="firebaseLocalStorage",gl="fbase_key";class cc{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function dc(y,p){return y.transaction([dn],p?"readwrite":"readonly").objectStore(dn)}function Ho(){const y=indexedDB.open(si,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(dn,{keyPath:gl})}catch(S){g(S)}}),y.addEventListener("success",(0,c.Z)(function*(){const w=y.result;w.objectStoreNames.contains(dn)?p(w):(w.close(),yield function(){const y=indexedDB.deleteDatabase(si);return new cc(y).toPromise()}(),p(yield Ho()))}))})}function rr(y,p,g){return lu.apply(this,arguments)}function lu(){return(lu=(0,c.Z)(function*(y,p,g){const w=dc(y,!0).put({[gl]:p,value:g});return new cc(w).toPromise()})).apply(this,arguments)}function uu(){return(uu=(0,c.Z)(function*(y,p){const g=dc(y,!1).get(p),w=yield new cc(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function An(y,p){const g=dc(y,!0).delete(p);return new cc(g).toPromise()}const ga=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield Ho()),g.db})()}_withRetries(g){var w=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const x=yield w._openDb();return yield g(x)}catch(x){if(S++>3)throw x;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return rs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=jo._getInstance(rs()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(S,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(S,x){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(S,x){return["keyChanged"]});return function(S,x){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function(){return Kt.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Fn(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);!x||(null===(w=x[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=x[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ho();return yield rr(g,ha,"1"),yield An(g,ha),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(x=>rr(x,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,c.Z)(function*(){const S=yield w._withRetries(x=>function(y,p){return uu.apply(this,arguments)}(x,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(S=>An(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const w=yield g._withRetries(H=>{const ne=dc(H,!1).getAll();return new cc(ne).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],x=new Set;for(const{fbase_key:H,value:ne}of w)x.add(H),JSON.stringify(g.localCache[H])!==JSON.stringify(ne)&&(g.notifyListeners(H,ne),S.push(H));for(const H of Object.keys(g.localCache))g.localCache[H]&&!x.has(H)&&(g.notifyListeners(H,null),S.push(H));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const x of Array.from(S))x(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Hi(y,p){return en(y,"POST","/v2/accounts/mfaSignIn:start",It(y,p))}function Go(){return(Go=(0,c.Z)(function*(y){return(yield en(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hc(y){return new Promise((p,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=p,w.onerror=S=>{const x=Vn("internal-error");x.customData=S,g(x)},w.type="text/javascript",w.charset="UTF-8",function(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(w)})}function du(y){return`__${y}${Math.floor(1e6*Math.random())}`}const _a=1e12;class Nt{constructor(p){this.auth=p,this.counter=_a,this._widgets=new Map}render(p,g){const w=this.counter;return this._widgets.set(w,new Ar(p,this.auth.name,g||{})),this.counter++,w}reset(p){var g;const w=p||_a;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(p){var g;return(null===(g=this._widgets.get(p||_a))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,c.Z)(function*(){var w;return null===(w=g._widgets.get(p||_a))||void 0===w||w.execute(),""})()}}class Ar{constructor(p,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;Re(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}();const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lo=du("rcb"),sf=new Xe(3e4,6e4);class lf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ft().grecaptcha}load(p,g=""){return Re((y=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Ft().grecaptcha):new Promise((w,S)=>{const x=Ft().setTimeout(()=>{S(Vn(p,"network-request-failed"))},sf.get());Ft()[lo]=()=>{Ft().clearTimeout(x),delete Ft()[lo];const ne=Ft().grecaptcha;if(!ne)return void S(Vn(p,"internal-error"));const Oe=ne.render;ne.render=(Ie,st)=>{const lt=Oe(Ie,st);return this.counter++,lt},this.hostLanguage=g,w(ne)},hc(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:lo,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),S(Vn(p,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Ft().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mr{load(p){return(0,c.Z)(function*(){return new Nt(p)})()}clearedOneInstance(){}}const hu="recaptcha",Id={theme:"light",type:"image"};class pc{constructor(p,g=Object.assign({},Id),w){this.parameters=g,this.type=hu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(w),this.isInvisible="invisible"===this.parameters.size,Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;Re(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mr:new lf,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(g)||new Promise(x=>{const H=ne=>{!ne||(p.tokenChangeListeners.delete(H),x(ne))};p.tokenChangeListeners.add(H),p.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof p)p(g);else if("string"==typeof p){const w=Ft()[p];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){Re(zn()&&!rs(),p.auth,"internal-error"),yield function(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function(y){return Go.apply(this,arguments)}(p.auth);Re(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ln{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Is._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function ya(){return(ya=(0,c.Z)(function*(y,p,g){const w=Wn(y),S=yield fu(w,p,(0,F.m9)(g));return new Ln(S,x=>No(w,x))})).apply(this,arguments)}function co(){return(co=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y);yield Vi(!1,w,"phone");const S=yield fu(w.auth,p,(0,F.m9)(g));return new Ln(S,x=>dr(w,x))})).apply(this,arguments)}function gc(){return(gc=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y),S=yield fu(w.auth,p,(0,F.m9)(g));return new Ln(S,x=>la(w,x))})).apply(this,arguments)}function fu(y,p,g){return T.apply(this,arguments)}function T(){return(T=(0,c.Z)(function*(y,p,g){var w;const S=yield g.verify();try{let x;if(Re("string"==typeof S,y,"argument-error"),Re(g.type===hu,y,"argument-error"),x="string"==typeof p?{phoneNumber:p}:p,"session"in x){const H=x.session;if("phoneNumber"in x)return Re("enroll"===H.type,y,"internal-error"),(yield ou(y,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Re("signin"===H.type,y,"internal-error");const ne=(null===(w=x.multiFactorHint)||void 0===w?void 0:w.uid)||x.multiFactorUid;return Re(ne,y,"missing-multi-factor-info"),(yield Hi(y,{mfaPendingCredential:H.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield Za(y,{phoneNumber:x.phoneNumber,recaptchaToken:S});return H}}finally{g._reset()}})).apply(this,arguments)}function N(){return(N=(0,c.Z)(function*(y,p){yield Nn((0,F.m9)(y),p)})).apply(this,arguments)}let B=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Wn(g)}verifyPhoneNumber(g,w){return fu(this.auth,g,(0,F.m9)(w))}static credential(g,w){return Is._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?Is._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Q(y,p){return p?kn(p):(Re(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Y extends qa{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ts(p,this._buildIdpRequest())}_linkToIdToken(p,g){return ts(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return ts(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function xe(y){return Xh(y.auth,new Y(y),y.bypassAuthState)}function it(y){const{auth:p,user:g}=y;return Re(g,p,"internal-error"),Yl(g,new Y(y),y.bypassAuthState)}function gt(y){return _t.apply(this,arguments)}function _t(){return(_t=(0,c.Z)(function*(y){const{auth:p,user:g}=y;return Re(g,p,"internal-error"),Nn(g,new Y(y),y.bypassAuthState)})).apply(this,arguments)}class zt{constructor(p,g,w,S,x=!1){this.auth=p,this.resolver=w,this.user=S,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,c.Z)(function*(w,S){p.pendingPromise={resolve:w,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(x){p.reject(x)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:x,tenantId:H,error:ne,type:Oe}=p;if(ne)return void g.reject(ne);const Ie={auth:g.auth,requestUri:w,sessionId:S,tenantId:H||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Oe)(Ie))}catch(st){g.reject(st)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return xe;case"linkViaPopup":case"linkViaRedirect":return gt;case"reauthViaPopup":case"reauthViaRedirect":return it;default:tn(this.auth,"internal-error")}}resolve(p){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mt=new Xe(2e3,1e4);function yn(){return(yn=(0,c.Z)(function*(y,p,g){const w=Wn(y);Zr(y,p,Rn);const S=Q(w,g);return new Gi(w,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function $o(){return($o=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y);Zr(w.auth,p,Rn);const S=Q(w.auth,g);return new Gi(w.auth,"reauthViaPopup",p,S,w).executeNotNull()})).apply(this,arguments)}function Ms(){return(Ms=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y);Zr(w.auth,p,Rn);const S=Q(w.auth,g);return new Gi(w.auth,"linkViaPopup",p,S,w).executeNotNull()})).apply(this,arguments)}let Gi=(()=>{class y extends zt{constructor(g,w,S,x,H){super(g,w,x,H),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const w=yield g.execute();return Re(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,c.Z)(function*(){dt(1===g.filter.length,"Popup operations only handle one event");const w=As();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Vn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=(null===(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Mt.get())};g()}}return y.currentPopupAction=null,y})();const qo=new Map;class cf extends zt{constructor(p,g,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,c.Z)(function*(){let w=qo.get(g.auth._key());if(!w){try{const x=(yield function(y,p){return df.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;w=()=>Promise.resolve(x)}catch(S){w=()=>Promise.reject(S)}qo.set(g.auth._key(),w)}return g.bypassAuthState||qo.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(w,p);if("unknown"!==p.type){if(p.eventId){const S=yield w.auth._redirectUserForId(p.eventId);if(S)return w.user=S,g().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function df(){return(df=(0,c.Z)(function*(y,p){const g=jg(p),w=hf(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function va(y,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,c.Z)(function*(y,p){return hf(y)._set(jg(p),"true")})).apply(this,arguments)}function Ug(y,p){qo.set(y._key(),p)}function hf(y){return kn(y._redirectPersistence)}function jg(y){return ei("pendingRedirect",y.config.apiKey,y.name)}function mc(){return(mc=(0,c.Z)(function*(y,p,g){const w=Wn(y);Zr(y,p,Rn);const S=Q(w,g);return yield va(S,w),S._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y);Zr(w.auth,p,Rn);const S=Q(w.auth,g);yield va(S,w.auth);const x=yield Sd(w);return S._openRedirect(w.auth,p,"reauthViaRedirect",x)})).apply(this,arguments)}function pf(){return(pf=(0,c.Z)(function*(y,p,g){const w=(0,F.m9)(y);Zr(w.auth,p,Rn);const S=Q(w.auth,g);yield Vi(!1,w,p.providerId),yield va(S,w.auth);const x=yield Sd(w);return S._openRedirect(w.auth,p,"linkViaRedirect",x)})).apply(this,arguments)}function yl(){return(yl=(0,c.Z)(function*(y,p){return yield Wn(y)._initializationPromise,pu(y,p,!1)})).apply(this,arguments)}function pu(y,p){return vl.apply(this,arguments)}function vl(){return(vl=(0,c.Z)(function*(y,p,g=!1){const w=Wn(y),S=Q(w,p),H=yield new cf(w,S,g).execute();return H&&!g&&(delete H.user._redirectEventId,yield w._persistUserIfCurrent(H.user),yield w._setRedirectUser(null,p)),H})).apply(this,arguments)}function Sd(y){return gu.apply(this,arguments)}function gu(){return(gu=(0,c.Z)(function*(y){const p=As(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Ad{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(g=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $g(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var w;if(p.error&&!$g(p)){const S=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Vn(this.auth,S))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const w=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Md(p))}saveEventToCache(p){this.cachedEventUids.add(Md(p)),this.lastProcessedEventTime=Date.now()}}function Md(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function $g({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function zg(y){return xs.apply(this,arguments)}function xs(){return(xs=(0,c.Z)(function*(y,p={}){return en(y,"GET","/v1/projects",p)})).apply(this,arguments)}const mu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vc=/^https?/;function wc(){return(wc=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield zg(y);for(const g of p)try{if(qg(g))return}catch(w){}tn(y,"unauthorized-domain")})).apply(this,arguments)}function qg(y){const p=bs(),{protocol:g,hostname:w}=new URL(p);if(y.startsWith("chrome-extension://")){const H=new URL(y);return""===H.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&H.hostname===w}if(!vc.test(g))return!1;if(mu.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Wg=new Xe(3e4,6e4);function Kg(){const y=Ft().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let kd=null;function xy(y){return kd=kd||function(y){return new Promise((p,g)=>{var w,S,x;function H(){Kg(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Kg(),g(Vn(y,"network-request-failed"))},timeout:Wg.get()})}if(null===(S=null===(w=Ft().gapi)||void 0===w?void 0:w.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(x=Ft().gapi)||void 0===x?void 0:x.load)){const ne=du("iframefcb");return Ft()[ne]=()=>{gapi.load?H():g(Vn(y,"network-request-failed"))},hc(`https://apis.google.com/js/api.js?onload=${ne}`).catch(Oe=>g(Oe))}H()}}).catch(p=>{throw kd=null,p})}(y),kd}const ky=new Xe(5e3,15e3),Ry={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yg(y){const p=y.config;Re(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?vt(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:y.name,v:ce.SDK_VERSION},S=bl.get(y.config.apiHost);S&&(w.eid=S);const x=y._getFrameworks();return x.length&&(w.fw=x.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function wa(){return wa=(0,c.Z)(function*(y){const p=yield xy(y),g=Ft().gapi;return Re(g,y,"internal-error"),p.open({where:document.body,url:Yg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ry,dontclear:!0},w=>new Promise(function(){var S=(0,c.Z)(function*(x,H){yield w.restyle({setHideOnLeave:!1});const ne=Vn(y,"network-request-failed"),Oe=Ft().setTimeout(()=>{H(ne)},ky.get());function Ie(){Ft().clearTimeout(Oe),x(w)}w.ping(Ie).then(Ie,()=>{H(ne)})});return function(x,H){return S.apply(this,arguments)}}()))}),wa.apply(this,arguments)}const Qg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ny{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function tm(y,p,g,w,S,x){Re(y.config.authDomain,y,"auth-domain-config-required"),Re(y.config.apiKey,y,"invalid-api-key");const H={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:ce.SDK_VERSION,eventId:S};if(p instanceof Rn){p.setDefaultLanguage(y.languageCode),H.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(H.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Oe,Ie]of Object.entries(x||{}))H[Oe]=Ie}if(p instanceof to){const Oe=p.getScopes().filter(Ie=>""!==Ie);Oe.length>0&&(H.scopes=Oe.join(","))}y.tenantId&&(H.tid=y.tenantId);const ne=H;for(const Oe of Object.keys(ne))void 0===ne[Oe]&&delete ne[Oe];return`${function({config:y}){return y.emulator?vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(ne).slice(1)}`}const El="webStorageSupport";class Rd extends class{constructor(p){this.factorId=p}_process(p,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,w);case"signin":return this._finalizeSignIn(p,g.credential);default:return _r("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Rd(p)}_finalizeEnroll(p,g,w){return function(y,p){return en(y,"POST","/v2/accounts/mfaEnrollment:finalize",It(y,p))}(p,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function(y,p){return en(y,"POST","/v2/accounts/mfaSignIn:finalize",It(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ec=(()=>{class y{constructor(){}static assertion(g){return Rd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var y,Nd="@firebase/auth";class Py{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(w=>{var S;p((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function po(){return window}function yf(){return yf=(0,c.Z)(function*(y,p,g){var w;const{BuildInfo:S}=po();dt(p.sessionId,"AuthEvent did not contain a session ID");const x=yield fr(p.sessionId),H={};return vr()?H.ibi=S.packageName:Zs()?H.apn=S.packageName:tn(y,"operation-not-supported-in-this-environment"),S.displayName&&(H.appDisplayName=S.displayName),H.sessionId=x,tm(y,g,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,H)}),yf.apply(this,arguments)}function vf(){return vf=(0,c.Z)(function*(y){const{BuildInfo:p}=po(),g={};vr()?g.iosBundleId=p.packageName:Zs()?g.androidPackageName=p.packageName:tn(y,"operation-not-supported-in-this-environment"),yield zg(y,g)}),vf.apply(this,arguments)}function wf(){return wf=(0,c.Z)(function*(y,p,g){const{cordova:w}=po();let S=()=>{};try{yield new Promise((x,H)=>{let ne=null;function Oe(){var lt;x();const qt=null===(lt=w.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof qt&&qt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ie(){ne||(ne=window.setTimeout(()=>{H(Vn(y,"redirect-cancelled-by-user"))},2e3))}function st(){"visible"===(null==document?void 0:document.visibilityState)&&Ie()}p.addPassiveListener(Oe),document.addEventListener("resume",Ie,!1),Zs()&&document.addEventListener("visibilitychange",st,!1),S=()=>{p.removePassiveListener(Oe),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",st,!1),ne&&window.clearTimeout(ne)}})}finally{S()}}),wf.apply(this,arguments)}function fr(y){return bu.apply(this,arguments)}function bu(){return bu=(0,c.Z)(function*(y){const p=Ic(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")}),bu.apply(this,arguments)}function Ic(y){if(dt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}y="Browser",(0,ce._registerComponent)(new yt.wA("auth",(p,{options:g})=>{const w=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:x,authDomain:H}=w.options;return((ne,Oe)=>{Re(x&&!x.includes(":"),"invalid-api-key",{appName:ne.name}),Re(!(null==H?void 0:H.includes(":")),"argument-error",{appName:ne.name});const Ie={apiKey:x,authDomain:H,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pi(y)},st=new Qs(ne,Oe,Ie);return function(y,p){const g=(null==p?void 0:p.persistence)||[],w=(Array.isArray(g)?g:[g]).map(kn);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(st,g),st})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,w)=>{p.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new yt.wA("auth-internal",p=>{const g=Wn(p.getProvider("auth").getImmediate());return new Py(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Nd,"0.20.1",void 0),(0,ce.registerVersion)(Nd,"0.20.1","esm2017");class Ur extends Ad{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,c.Z)(function*(){yield p.initPromise})()}}function rm(y){return If.apply(this,arguments)}function If(){return If=(0,c.Z)(function*(y){const p=yield Dc()._get(wu(y));return p&&(yield Dc()._remove(wu(y))),p}),If.apply(this,arguments)}function By(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*p.length);y.push(p.charAt(w))}return y.join("")}function Dc(){return kn(ii)}function wu(y){return ei("authEvent",y.config.apiKey,y.name)}function Cl(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function sm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vn("no-auth-event")}}function Ea(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function om(y=(0,F.z$)()){return!("file:"!==Ea()&&"ionic:"!==Ea()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function am(){try{const y=self.localStorage,p=As();if(y)return y.setItem(p,"1"),y.removeItem(p),!function(y=(0,F.z$)()){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return Sf()&&(0,F.hl)()}return!1}function Sf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Af(){return("http:"===Ea()||"https:"===Ea()||(0,F.ru)()||om())&&!((0,F.b$)()||(0,F.UG)())&&am()&&!Sf()}function lm(){return om()&&"undefined"!=typeof document}function Vd(){return Vd=(0,c.Z)(function*(){return!!lm()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})}),Vd.apply(this,arguments)}const vi={LOCAL:"local",NONE:"none",SESSION:"session"},Rs=Re,ls="persistence";function cm(y){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,c.Z)(function*(y){yield y._initializationPromise;const p=Ns(),g=ei(ls,y.config.apiKey,y.name);p&&p.setItem(g,y._getPersistence())}),Bd.apply(this,arguments)}function Ns(){var y;try{return(null===(y="undefined"!=typeof window?window:null)||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Mf=Re;class us{constructor(){this.browserResolver=kn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dr,this._completeRedirectFn=pu,this._overrideRedirectResult=Ug}_openPopup(p,g,w,S){var x=this;return(0,c.Z)(function*(){var H;dt(null===(H=x.eventManagers[p._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ne=tm(p,g,w,bs(),S);return function(y,p,g,w=500,S=600){const x=Math.max((window.screen.availHeight-S)/2,0).toString(),H=Math.max((window.screen.availWidth-w)/2,0).toString();let ne="";const Oe=Object.assign(Object.assign({},Qg),{width:w.toString(),height:S.toString(),top:x,left:H}),Ie=(0,F.z$)().toLowerCase();g&&(ne=an(Ie)?"_blank":g),Ao(Ie)&&(p=p||"http://localhost",Oe.scrollbars="yes");const st=Object.entries(Oe).reduce((qt,[Xn,Ca])=>`${qt}${Xn}=${Ca},`,"");if(function(y=(0,F.z$)()){var p;return vr(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ie)&&"_self"!==ne)return function(y,p){const g=document.createElement("a");g.href=y,g.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(p||"",ne),new Ny(null);const lt=window.open(p||"",ne,st);Re(lt,y,"popup-blocked");try{lt.focus()}catch(qt){}return new Ny(lt)}(p,ne,As())})()}_openRedirect(p,g,w,S){var x=this;return(0,c.Z)(function*(){return yield x._originValidation(p),y=tm(p,g,w,bs(),S),Ft().location.href=y,new Promise(()=>{});var y})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:S,promise:x}=this.eventManagers[g];return S?Promise.resolve(S):(dt(x,"If manager is not set, promise should be"),x)}const w=this.initAndGetManager(p);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(p){var g=this;return(0,c.Z)(function*(){const w=yield function(y){return wa.apply(this,arguments)}(p),S=new Ad(p);return w.register("authEvent",x=>(Re(null==x?void 0:x.authEvent,p,"invalid-auth-event"),{status:S.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:S},g.iframes[p._key()]=w,S})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(El,{type:El},S=>{var x;const H=null===(x=null==S?void 0:S[0])||void 0===x?void 0:x[El];void 0!==H&&g(!!H),tn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return wc.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return za()||ti()||vr()}}),this.cordovaResolver=kn(class{constructor(){this._redirectPersistence=Dr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pu,this._overrideRedirectResult=Ug}_initialize(p){var g=this;return(0,c.Z)(function*(){const w=p._key();let S=g.eventManagers.get(w);return S||(S=new Ur(p),g.eventManagers.set(w,S),g.attachCallbackListeners(p,S)),S})()}_openPopup(p){tn(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,w,S){var x=this;return(0,c.Z)(function*(){!function(y){var p,g,w,S,x,H,ne,Oe,Ie,st;const lt=po();Re("function"==typeof(null===(p=null==lt?void 0:lt.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re("function"==typeof(null===(x=null===(S=null===(w=null==lt?void 0:lt.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Oe=null===(ne=null===(H=null==lt?void 0:lt.cordova)||void 0===H?void 0:H.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Oe?void 0:Oe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(st=null===(Ie=null==lt?void 0:lt.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===st?void 0:st.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const H=yield x._initialize(p);yield H.initialized(),H.resetRedirect(),qo.clear(),yield x._originValidation(p);const ne=function(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:By(),postBody:null,tenantId:y.tenantId,error:Vn(y,"no-auth-event")}}(p,w,S);yield function(y,p){return Dc()._set(wu(y),p)}(p,ne);const Oe=yield function(y,p,g){return yf.apply(this,arguments)}(p,ne,g),Ie=yield function(y){const{cordova:p}=po();return new Promise(g=>{p.plugins.browsertab.isAvailable(w=>{let S=null;w?p.plugins.browsertab.openUrl(y):S=p.InAppBrowser.open(y,function(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Oe);return function(y,p,g){return wf.apply(this,arguments)}(p,H,Ie)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return vf.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:x}=po(),H=setTimeout((0,c.Z)(function*(){yield rm(p),g.onEvent(sm())}),500),ne=function(){var st=(0,c.Z)(function*(lt){clearTimeout(H);const qt=yield rm(p);let Xn=null;qt&&(null==lt?void 0:lt.url)&&(Xn=function(y,p){var g,w;const S=function(y){const p=Cl(y),g=p.link?decodeURIComponent(p.link):void 0,w=Cl(g).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Cl(S).link||S||w||g||y}(p);if(S.includes("/__/auth/callback")){const x=Cl(S),H=x.firebaseError?function(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(x.firebaseError)):null,ne=null===(w=null===(g=null==H?void 0:H.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Oe=ne?Vn(ne):null;return Oe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(qt,lt.url)),g.onEvent(Xn||sm())});return function(qt){return st.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ne);const Oe=S,Ie=`${x.packageName.toLowerCase()}://`;po().handleOpenURL=function(){var st=(0,c.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ie)&&ne({url:lt}),"function"==typeof Oe)try{Oe(lt)}catch(qt){console.error(qt)}});return function(lt){return st.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Dr,this._completeRedirectFn=pu,this._overrideRedirectResult=Ug}_initialize(p){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,w,S){var x=this;return(0,c.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(p,g,w,S)})()}_openRedirect(p,g,w,S){var x=this;return(0,c.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(p,g,w,S)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return lm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,c.Z)(function*(){if(p.underlyingResolver)return;const g=yield function(){return Vd.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function dm(y){return y.unwrap()}function Sc(y){return jd(y)}function jd(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return B.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=rn;break;case"facebook.com":w=Mo;break;case"github.com":w=Qa;break;case"twitter.com":w=ko;break;default:const{oauthIdToken:S,oauthAccessToken:x,oauthTokenSecret:H,pendingToken:ne,nonce:Oe}=p;return x||H||S||ne?ne?g.startsWith("saml.")?Ds._create(g,ne):mi._fromParams({providerId:g,signInMethod:g,pendingToken:ne,idToken:S,accessToken:x}):new Li(g).credential({idToken:S,accessToken:x,rawNonce:Oe}):null}return y instanceof F.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function jr(y,p){return p.catch(g=>{throw g instanceof F.ZR&&function(y,p){var g;const w=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new D0(y,function(y,p){var g;const w=(0,F.m9)(y),S=p;return Re(p.customData.operationType,w,"argument-error"),Re(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),lc._fromError(w,S)}(y,p));else if(w){const S=jd(p),x=p;S&&(x.credential=S,x.tenantId=w.tenantId||void 0,x.email=w.email||void 0,x.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Sc(g),additionalUserInfo:hr(g),user:ai.getOrCreate(S)}})}function Ac(y,p){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,c.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:w=>jr(y,g.confirm(w))}}),Hd.apply(this,arguments)}class D0{constructor(p,g){this.resolver=g,this.auth=function(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return jr(dm(this.auth),this.resolver.resolveSignIn(p))}}class ai{constructor(p){this._delegate=p,this.multiFactor=function(y){const p=(0,F.m9)(y);return uc.has(p)||uc.set(p,oo._fromUser(p)),uc.get(p)}(p)}static getOrCreate(p){return ai.USER_MAP.has(p)||ai.USER_MAP.set(p,new ai(p)),ai.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,c.Z)(function*(){return jr(g.auth,dr(g._delegate,p))})()}linkWithPhoneNumber(p,g){var w=this;return(0,c.Z)(function*(){return Ac(w.auth,function(y,p,g){return co.apply(this,arguments)}(w._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,c.Z)(function*(){return jr(g.auth,function(y,p,g){return Ms.apply(this,arguments)}(g._delegate,p,us))})()}linkWithRedirect(p){var g=this;return(0,c.Z)(function*(){return yield cm(Wn(g.auth)),function(y,p,g){return function(y,p,g){return pf.apply(this,arguments)}(y,p,g)}(g._delegate,p,us)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,c.Z)(function*(){return jr(g.auth,la(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Ac(this.auth,function(y,p,g){return gc.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return jr(this.auth,function(y,p,g){return $o.apply(this,arguments)}(this._delegate,p,us))}reauthenticateWithRedirect(p){var g=this;return(0,c.Z)(function*(){return yield cm(Wn(g.auth)),function(y,p,g){return function(y,p,g){return fo.apply(this,arguments)}(y,p,g)}(g._delegate,p,us)})()}sendEmailVerification(p){return function(y,p){return ul.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,c.Z)(function*(){return yield function(y,p){return Ss.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function(y,p){return dl((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function(y,p){return dl((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(y,p){return N.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(y,p){return bd.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function(y,p,g){return oc.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ai.USER_MAP=new WeakMap;const Tl=Re;let xf=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Tl(S,"invalid-api-key",{appName:g.name}),Tl(S,"invalid-api-key",{appName:g.name});const x="undefined"!=typeof window?us:void 0;this._delegate=w.initialize({options:{persistence:kf(S,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(fi),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ai.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(y,p,g){const w=Wn(y);Re(w._canInitEmulator,w,"emulator-config-failed"),Re(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),x=xg(p),{host:H,port:ne}=function(y){const p=xg(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const x=S[1];return{host:x,port:id(w.substr(x.length+1))}}{const[x,H]=w.split(":");return{host:x,port:id(H)}}}(p);w.config.emulator={url:`${x}//${H}${null===ne?"":`:${ne}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:H,port:ne,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function(y,p){return sl.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return eu(this._delegate,g)}confirmPasswordReset(g,w){return function(y,p,g){return Xl.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,c.Z)(function*(){return jr(S._delegate,function(y,p,g){return ll.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(y,p){return io.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(y,p){const g=Ts.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){Tl(Af(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(y,p){return yl.apply(this,arguments)}(g._delegate,us);return w?jr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(y,p){Wn(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:x,error:H,complete:ne}=bi(g,w,S);return this._delegate.onAuthStateChanged(x,H,ne)}onIdTokenChanged(g,w,S){const{next:x,error:H,complete:ne}=bi(g,w,S);return this._delegate.onIdTokenChanged(x,H,ne)}sendSignInLinkToEmail(g,w){return function(y,p,g){return gn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(y,p,g){return ua.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,c.Z)(function*(){let S;switch(function(y,p){Rs(Object.values(vi).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?Rs(p!==vi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Rs(p===vi.NONE,y,"unsupported-persistence-type"):Sf()?Rs(p===vi.NONE||p===vi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Rs(p===vi.NONE||am(),y,"unsupported-persistence-type")}(w._delegate,g),g){case vi.SESSION:S=Dr;break;case vi.LOCAL:S=(yield kn(ga)._isAvailable())?ga:ii;break;case vi.NONE:S=gi;break;default:return tn("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return jr(this._delegate,function(y){return tl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return jr(this._delegate,No(this._delegate,g))}signInWithCustomToken(g){return jr(this._delegate,function(y,p){return il.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return jr(this._delegate,function(y,p,g){return No((0,F.m9)(y),eo.credential(p,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return jr(this._delegate,function(y,p,g){return tf.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Ac(this._delegate,function(y,p,g){return ya.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,c.Z)(function*(){return Tl(Af(),w._delegate,"operation-not-supported-in-this-environment"),jr(w._delegate,function(y,p,g){return yn.apply(this,arguments)}(w._delegate,g,us))})()}signInWithRedirect(g){var w=this;return(0,c.Z)(function*(){return Tl(Af(),w._delegate,"operation-not-supported-in-this-environment"),yield cm(w._delegate),function(y,p,g){return function(y,p,g){return mc.apply(this,arguments)}(y,p,g)}(w._delegate,g,us)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(y,p){return al.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=vi,y})();function bi(y,p,g){let w=y;"function"!=typeof y&&({next:w,error:p,complete:g}=y);const S=w;return{next:H=>S(H&&ai.getOrCreate(H)),error:p,complete:g}}function kf(y,p){const g=function(y,p){const g=Ns();if(!g)return[];const w=ei(ls,y,p);switch(g.getItem(w)){case vi.NONE:return[gi];case vi.LOCAL:return[ga,Dr];case vi.SESSION:return[Dr];default:return[]}}(y,p);if("undefined"!=typeof self&&!g.includes(ga)&&g.push(ga),"undefined"!=typeof window)for(const w of[ii,Dr])g.includes(w)||g.push(w);return g.includes(gi)||g.push(gi),g}class Eu{constructor(){this.providerId="phone",this._delegate=new B(dm(te.Z.auth()))}static credential(p,g){return B.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Eu.PHONE_SIGN_IN_METHOD=B.PHONE_SIGN_IN_METHOD,Eu.PROVIDER_ID=B.PROVIDER_ID;const Rf=Re;class Nf{constructor(p,g,w=te.Z.app()){var S;Rf(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new pc(p,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new yt.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new xf(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:eo,FacebookAuthProvider:Mo,GithubAuthProvider:Qa,GoogleAuthProvider:rn,OAuthProvider:Li,SAMLAuthProvider:xo,PhoneAuthProvider:Eu,PhoneMultiFactorGenerator:Ec,RecaptchaVerifier:Nf,TwitterAuthProvider:ko,Auth:xf,AuthCredential:qa,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(te.Z)},8305:(Qe,_e,O)=>{O.d(_e,{y:()=>G});var c=O(584),te=O(7908),F=O(4816),ce=O(4623);var se=O(5367),ue=O(5044),pe=O(8706);let G=(()=>{class De{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const Fe=new De;return Fe.source=this,Fe.operator=Ue,Fe}subscribe(Ue,Fe,ie){const Ce=function(De){return De&&De instanceof c.Lv||function(De){return De&&(0,ue.m)(De.next)&&(0,ue.m)(De.error)&&(0,ue.m)(De.complete)}(De)&&(0,te.Nn)(De)}(Ue)?Ue:new c.Hp(Ue,Fe,ie);return(0,pe.x)(()=>{const{operator:Be,source:Pe}=this;Ce.add(Be?Be.call(Ce,Pe):Pe?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Fe){Ue.error(Fe)}}forEach(Ue,Fe){return new(Fe=W(Fe))((ie,Ce)=>{let Be;Be=this.subscribe(Pe=>{try{Ue(Pe)}catch(at){Ce(at),null==Be||Be.unsubscribe()}},Ce,ie)})}_subscribe(Ue){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(Ue)}[F.L](){return this}pipe(...Ue){return function(De){return 0===De.length?ce.y:1===De.length?De[0]:function(Ue){return De.reduce((Fe,ie)=>ie(Fe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=W(Ue))((Fe,ie)=>{let Ce;this.subscribe(Be=>Ce=Be,Be=>ie(Be),()=>Fe(Ce))})}}return De.create=je=>new De(je),De})();function W(De){var je;return null!==(je=null!=De?De:se.v.Promise)&&void 0!==je?je:Promise}},273:(Qe,_e,O)=>{O.d(_e,{x:()=>se});var c=O(8305),te=O(7908);const ce=(0,O(4893).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=O(3980),ye=O(8706);let se=(()=>{class pe extends c.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const oe=new ue(this,this);return oe.operator=W,oe}_throwIfClosed(){if(this.closed)throw new ce}next(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const oe=this.observers.slice();for(const $e of oe)$e.next(W)}})}error(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:oe}=this;for(;oe.length;)oe.shift().error(W)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:oe,isStopped:$e,observers:De}=this;return oe||$e?te.Lc:(De.push(W),new te.w0(()=>(0,le.P)(De,W)))}_checkFinalizedStatuses(W){const{hasError:oe,thrownError:$e,isStopped:De}=this;oe?W.error($e):De&&W.complete()}asObservable(){const W=new c.y;return W.source=this,W}}return pe.create=(G,W)=>new ue(G,W),pe})();class ue extends se{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,oe;null===(oe=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===oe||oe.call(W,G)}error(G){var W,oe;null===(oe=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===oe||oe.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,oe;return null!==(oe=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==oe?oe:te.Lc}}},584:(Qe,_e,O)=>{O.d(_e,{Hp:()=>$e,Lv:()=>oe});var c=O(5044),te=O(7908),F=O(5367),ce=O(5160),le=O(6921);const ye=pe("C",void 0,void 0);function pe(ie,Ce,Be){return{kind:ie,value:Ce,error:Be}}var G=O(2496),W=O(8706);class oe extends te.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,te.Nn)(Ce)&&Ce.add(this)):this.destination=Fe}static create(Ce,Be,Pe){return new $e(Ce,Be,Pe)}next(Ce){this.isStopped?Ue(pe("N",Ce,void 0),this):this._next(Ce)}error(Ce){this.isStopped?Ue(pe("E",void 0,Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Ue(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $e extends oe{constructor(Ce,Be,Pe){let at;if(super(),(0,c.m)(Ce))at=Ce;else if(Ce){let Ne;({next:at,error:Be,complete:Pe}=Ce),this&&F.v.useDeprecatedNextContext?(Ne=Object.create(Ce),Ne.unsubscribe=()=>this.unsubscribe()):Ne=Ce,at=null==at?void 0:at.bind(Ne),Be=null==Be?void 0:Be.bind(Ne),Pe=null==Pe?void 0:Pe.bind(Ne)}this.destination={next:at?De(at):le.Z,error:De(null!=Be?Be:je),complete:Pe?De(Pe):le.Z}}}function De(ie,Ce){return(...Be)=>{try{ie(...Be)}catch(Pe){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Pe):(0,ce.h)(Pe)}}}function je(ie){throw ie}function Ue(ie,Ce){const{onStoppedNotification:Be}=F.v;Be&&G.z.setTimeout(()=>Be(ie,Ce))}const Fe={closed:!0,next:le.Z,error:je,complete:le.Z}},7908:(Qe,_e,O)=>{O.d(_e,{Lc:()=>ye,w0:()=>le,Nn:()=>se});var c=O(5044);const F=(0,O(4893).d)(pe=>function(W){pe(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((oe,$e)=>`${$e+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ce=O(3980);class le{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const De of W)De.remove(this);else W.remove(this);const{initialTeardown:oe}=this;if((0,c.m)(oe))try{oe()}catch(De){G=De instanceof F?De.errors:[De]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const De of $e)try{ue(De)}catch(je){G=null!=G?G:[],je instanceof F?G=[...G,...je.errors]:G.push(je)}}if(G)throw new F(G)}}add(G){var W;if(G&&G!==this)if(this.closed)ue(G);else{if(G instanceof le){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(W=this._teardowns)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,ce.P)(W,G)}remove(G){const{_teardowns:W}=this;W&&(0,ce.P)(W,G),G instanceof le&&G._removeParent(this)}}le.EMPTY=(()=>{const pe=new le;return pe.closed=!0,pe})();const ye=le.EMPTY;function se(pe){return pe instanceof le||pe&&"closed"in pe&&(0,c.m)(pe.remove)&&(0,c.m)(pe.add)&&(0,c.m)(pe.unsubscribe)}function ue(pe){(0,c.m)(pe)?pe():pe.unsubscribe()}},5367:(Qe,_e,O)=>{O.d(_e,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(Qe,_e,O)=>{O.d(_e,{E:()=>te});const te=new(O(8305).y)(le=>le.complete())},5947:(Qe,_e,O)=>{O.d(_e,{D:()=>at});var c=O(9985),te=O(4763),F=O(5222),ye=O(8305),ue=O(5497),pe=O(5044),G=O(8395);function oe(Ne,He){if(!Ne)throw new Error("Iterable cannot be null");return new ye.y(Ke=>{(0,G.f)(Ke,He,()=>{const be=Ne[Symbol.asyncIterator]();(0,G.f)(Ke,He,()=>{be.next().then(Z=>{Z.done?Ke.complete():Ke.next(Z.value)})},0,!0)})})}var $e=O(1073),De=O(2442),je=O(1537),Ue=O(2317),Fe=O(9908),ie=O(3754),Ce=O(7751);function at(Ne,He){return He?function(Ne,He){if(null!=Ne){if((0,$e.c)(Ne))return function(Ne,He){return(0,c.Xf)(Ne).pipe((0,F.R)(He),(0,te.Q)(He))}(Ne,He);if((0,je.z)(Ne))return function(Ne,He){return new ye.y(Ke=>{let be=0;return He.schedule(function(){be===Ne.length?Ke.complete():(Ke.next(Ne[be++]),Ke.closed||this.schedule())})})}(Ne,He);if((0,De.t)(Ne))return function(Ne,He){return(0,c.Xf)(Ne).pipe((0,F.R)(He),(0,te.Q)(He))}(Ne,He);if((0,Fe.D)(Ne))return oe(Ne,He);if((0,Ue.T)(Ne))return function(Ne,He){return new ye.y(Ke=>{let be;return(0,G.f)(Ke,He,()=>{be=Ne[ue.h](),(0,G.f)(Ke,He,()=>{let Z,ee;try{({value:Z,done:ee}=be.next())}catch(de){return void Ke.error(de)}ee?Ke.complete():Ke.next(Z)},0,!0)}),()=>(0,pe.m)(null==be?void 0:be.return)&&be.return()})}(Ne,He);if((0,Ce.L)(Ne))return function(Ne,He){return oe((0,Ce.Q)(Ne),He)}(Ne,He)}throw(0,ie.z)(Ne)}(Ne,He):(0,c.Xf)(Ne)}},9985:(Qe,_e,O)=>{O.d(_e,{Xf:()=>$e});var c=O(9162),te=O(1537),F=O(2442),ce=O(8305),le=O(1073),ye=O(9908),se=O(3754),ue=O(2317),pe=O(7751),G=O(5044),W=O(5160),oe=O(4816);function $e(Pe){if(Pe instanceof ce.y)return Pe;if(null!=Pe){if((0,le.c)(Pe))return function(Pe){return new ce.y(at=>{const Ne=Pe[oe.L]();if((0,G.m)(Ne.subscribe))return Ne.subscribe(at);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,te.z)(Pe))return function(Pe){return new ce.y(at=>{for(let Ne=0;Ne<Pe.length&&!at.closed;Ne++)at.next(Pe[Ne]);at.complete()})}(Pe);if((0,F.t)(Pe))return function(Pe){return new ce.y(at=>{Pe.then(Ne=>{at.closed||(at.next(Ne),at.complete())},Ne=>at.error(Ne)).then(null,W.h)})}(Pe);if((0,ye.D)(Pe))return ie(Pe);if((0,ue.T)(Pe))return function(Pe){return new ce.y(at=>{for(const Ne of Pe)if(at.next(Ne),at.closed)return;at.complete()})}(Pe);if((0,pe.L)(Pe))return function(Pe){return ie((0,pe.Q)(Pe))}(Pe)}throw(0,se.z)(Pe)}function ie(Pe){return new ce.y(at=>{(function(Pe,at){var Ne,He,Ke,be;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,c.KL)(Pe);!(He=yield Ne.next()).done;)if(at.next(He.value),at.closed)return}catch(Z){Ke={error:Z}}finally{try{He&&!He.done&&(be=Ne.return)&&(yield be.call(Ne))}finally{if(Ke)throw Ke.error}}at.complete()})})(Pe,at).catch(Ne=>at.error(Ne))})}},3719:(Qe,_e,O)=>{O.d(_e,{T:()=>ye});var c=O(5373),te=O(9985),F=O(5583),ce=O(7613),le=O(5947);function ye(...se){const ue=(0,ce.yG)(se),pe=(0,ce._6)(se,1/0),G=se;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,c.J)(pe)((0,le.D)(G,ue)):F.E}},8889:(Qe,_e,O)=>{O.d(_e,{Q:()=>te});var c=O(584);class te extends c.Lv{constructor(ce,le,ye,se,ue){super(ce),this.onFinalize=ue,this._next=le?function(pe){try{le(pe)}catch(G){ce.error(G)}}:super._next,this._error=se?function(pe){try{se(pe)}catch(G){ce.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(pe){ce.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;const{closed:le}=this;super.unsubscribe(),!le&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}},4753:(Qe,_e,O)=>{O.d(_e,{U:()=>F});var c=O(9947),te=O(8889);function F(ce,le){return(0,c.e)((ye,se)=>{let ue=0;ye.subscribe(new te.Q(se,pe=>{se.next(ce.call(le,pe,ue++))}))})}},5373:(Qe,_e,O)=>{O.d(_e,{J:()=>F});var c=O(5724),te=O(4623);function F(ce=1/0){return(0,c.z)(te.y,ce)}},5724:(Qe,_e,O)=>{O.d(_e,{z:()=>ue});var c=O(4753),te=O(9985),F=O(9947),le=(O(8395),O(8889)),se=O(5044);function ue(pe,G,W=1/0){return(0,se.m)(G)?ue((oe,$e)=>(0,c.U)((De,je)=>G(oe,De,$e,je))((0,te.Xf)(pe(oe,$e))),W):("number"==typeof G&&(W=G),(0,F.e)((oe,$e)=>function(pe,G,W,oe,$e,De,je,Ue){const Fe=[];let ie=0,Ce=0,Be=!1;const Pe=()=>{Be&&!Fe.length&&!ie&&G.complete()},at=He=>ie<oe?Ne(He):Fe.push(He),Ne=He=>{ie++;let Ke=!1;(0,te.Xf)(W(He,Ce++)).subscribe(new le.Q(G,be=>{G.next(be)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(ie--;Fe.length&&ie<oe;){const be=Fe.shift();Ne(be)}Pe()}catch(be){G.error(be)}}))};return pe.subscribe(new le.Q(G,at,()=>{Be=!0,Pe()})),()=>{}}(oe,$e,pe,W)))}},4763:(Qe,_e,O)=>{O.d(_e,{Q:()=>ce});var c=O(8395),te=O(9947),F=O(8889);function ce(le,ye=0){return(0,te.e)((se,ue)=>{se.subscribe(new F.Q(ue,pe=>(0,c.f)(ue,le,()=>ue.next(pe),ye),()=>(0,c.f)(ue,le,()=>ue.complete(),ye),pe=>(0,c.f)(ue,le,()=>ue.error(pe),ye)))})}},3174:(Qe,_e,O)=>{O.d(_e,{B:()=>ye});var c=O(5947),te=O(9468),F=O(273),ce=O(584),le=O(9947);function ye(ue={}){const{connector:pe=(()=>new F.x),resetOnError:G=!0,resetOnComplete:W=!0,resetOnRefCountZero:oe=!0}=ue;return $e=>{let De=null,je=null,Ue=null,Fe=0,ie=!1,Ce=!1;const Be=()=>{null==je||je.unsubscribe(),je=null},Pe=()=>{Be(),De=Ue=null,ie=Ce=!1},at=()=>{const Ne=De;Pe(),null==Ne||Ne.unsubscribe()};return(0,le.e)((Ne,He)=>{Fe++,!Ce&&!ie&&Be();const Ke=Ue=null!=Ue?Ue:pe();He.add(()=>{Fe--,0===Fe&&!Ce&&!ie&&(je=se(at,oe))}),Ke.subscribe(He),De||(De=new ce.Hp({next:be=>Ke.next(be),error:be=>{Ce=!0,Be(),je=se(Pe,G,be),Ke.error(be)},complete:()=>{ie=!0,Be(),je=se(Pe,W),Ke.complete()}}),(0,c.D)(Ne).subscribe(De))})($e)}}function se(ue,pe,...G){return!0===pe?(ue(),null):!1===pe?null:pe(...G).pipe((0,te.q)(1)).subscribe(()=>ue())}},5222:(Qe,_e,O)=>{O.d(_e,{R:()=>te});var c=O(9947);function te(F,ce=0){return(0,c.e)((le,ye)=>{ye.add(F.schedule(()=>le.subscribe(ye),ce))})}},9468:(Qe,_e,O)=>{O.d(_e,{q:()=>ce});var c=O(5583),te=O(9947),F=O(8889);function ce(le){return le<=0?()=>c.E:(0,te.e)((ye,se)=>{let ue=0;ye.subscribe(new F.Q(se,pe=>{++ue<=le&&(se.next(pe),le<=ue&&se.complete())}))})}},7384:(Qe,_e,O)=>{O.d(_e,{b:()=>le});var c=O(5044),te=O(9947),F=O(8889),ce=O(4623);function le(ye,se,ue){const pe=(0,c.m)(ye)||se||ue?{next:ye,error:se,complete:ue}:ye;return pe?(0,te.e)((G,W)=>{var oe;null===(oe=pe.subscribe)||void 0===oe||oe.call(pe);let $e=!0;G.subscribe(new F.Q(W,De=>{var je;null===(je=pe.next)||void 0===je||je.call(pe,De),W.next(De)},()=>{var De;$e=!1,null===(De=pe.complete)||void 0===De||De.call(pe),W.complete()},De=>{var je;$e=!1,null===(je=pe.error)||void 0===je||je.call(pe,De),W.error(De)},()=>{var De,je;$e&&(null===(De=pe.unsubscribe)||void 0===De||De.call(pe)),null===(je=pe.finalize)||void 0===je||je.call(pe)}))}):ce.y}},2869:(Qe,_e,O)=>{O.d(_e,{o:()=>le});var c=O(7908);class te extends c.w0{constructor(se,ue){super()}schedule(se,ue=0){return this}}const F={setInterval(...ye){const{delegate:se}=F;return((null==se?void 0:se.setInterval)||setInterval)(...ye)},clearInterval(ye){const{delegate:se}=F;return((null==se?void 0:se.clearInterval)||clearInterval)(ye)},delegate:void 0};var ce=O(3980);class le extends te{constructor(se,ue){super(se,ue),this.scheduler=se,this.work=ue,this.pending=!1}schedule(se,ue=0){if(this.closed)return this;this.state=se;const pe=this.id,G=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(G,pe,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(G,this.id,ue),this}requestAsyncId(se,ue,pe=0){return F.setInterval(se.flush.bind(se,this),pe)}recycleAsyncId(se,ue,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ue;F.clearInterval(ue)}execute(se,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(se,ue);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ue){let G,pe=!1;try{this.work(se)}catch(W){pe=!0,G=W||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:se,scheduler:ue}=this,{actions:pe}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(pe,this),null!=se&&(this.id=this.recycleAsyncId(ue,se,null)),this.delay=null,super.unsubscribe()}}}},8843:(Qe,_e,O)=>{O.d(_e,{v:()=>F});var c=O(1733);class te{constructor(le,ye=te.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,se){return new this.schedulerActionCtor(this,le).schedule(se,ye)}}te.now=c.l.now;class F extends te{constructor(le,ye=te.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let se;this._active=!0;do{if(se=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,se){for(;le=ye.shift();)le.unsubscribe();throw se}}}},2210:(Qe,_e,O)=>{O.d(_e,{z:()=>F,P:()=>ce});var c=O(2869);const F=new(O(8843).v)(c.o),ce=F},1733:(Qe,_e,O)=>{O.d(_e,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},2496:(Qe,_e,O)=>{O.d(_e,{z:()=>c});const c={setTimeout(...te){const{delegate:F}=c;return((null==F?void 0:F.setTimeout)||setTimeout)(...te)},clearTimeout(te){const{delegate:F}=c;return((null==F?void 0:F.clearTimeout)||clearTimeout)(te)},delegate:void 0}},5497:(Qe,_e,O)=>{O.d(_e,{h:()=>te});const te="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(Qe,_e,O)=>{O.d(_e,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(Qe,_e,O)=>{O.d(_e,{jO:()=>ce,yG:()=>le,_6:()=>ye});var c=O(5044),te=O(7398);function F(se){return se[se.length-1]}function ce(se){return(0,c.m)(F(se))?se.pop():void 0}function le(se){return(0,te.K)(F(se))?se.pop():void 0}function ye(se,ue){return"number"==typeof F(se)?se.pop():ue}},3980:(Qe,_e,O)=>{function c(te,F){if(te){const ce=te.indexOf(F);0<=ce&&te.splice(ce,1)}}O.d(_e,{P:()=>c})},4893:(Qe,_e,O)=>{function c(te){const ce=te(le=>{Error.call(le),le.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}O.d(_e,{d:()=>c})},8706:(Qe,_e,O)=>{O.d(_e,{x:()=>F,O:()=>ce});var c=O(5367);let te=null;function F(le){if(c.v.useDeprecatedSynchronousErrorHandling){const ye=!te;if(ye&&(te={errorThrown:!1,error:null}),le(),ye){const{errorThrown:se,error:ue}=te;if(te=null,se)throw ue}}else le()}function ce(le){c.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=le)}},8395:(Qe,_e,O)=>{function c(te,F,ce,le=0,ye=!1){const se=F.schedule(function(){ce(),ye?te.add(this.schedule(null,le)):this.unsubscribe()},le);if(te.add(se),!ye)return se}O.d(_e,{f:()=>c})},4623:(Qe,_e,O)=>{function c(te){return te}O.d(_e,{y:()=>c})},1537:(Qe,_e,O)=>{O.d(_e,{z:()=>c});const c=te=>te&&"number"==typeof te.length&&"function"!=typeof te},9908:(Qe,_e,O)=>{O.d(_e,{D:()=>te});var c=O(5044);function te(F){return Symbol.asyncIterator&&(0,c.m)(null==F?void 0:F[Symbol.asyncIterator])}},5044:(Qe,_e,O)=>{function c(te){return"function"==typeof te}O.d(_e,{m:()=>c})},1073:(Qe,_e,O)=>{O.d(_e,{c:()=>F});var c=O(4816),te=O(5044);function F(ce){return(0,te.m)(ce[c.L])}},2317:(Qe,_e,O)=>{O.d(_e,{T:()=>F});var c=O(5497),te=O(5044);function F(ce){return(0,te.m)(null==ce?void 0:ce[c.h])}},2442:(Qe,_e,O)=>{O.d(_e,{t:()=>te});var c=O(5044);function te(F){return(0,c.m)(null==F?void 0:F.then)}},7751:(Qe,_e,O)=>{O.d(_e,{Q:()=>F,L:()=>ce});var c=O(9162),te=O(5044);function F(le){return(0,c.FC)(this,arguments,function*(){const se=le.getReader();try{for(;;){const{value:ue,done:pe}=yield(0,c.qq)(se.read());if(pe)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ue)}}finally{se.releaseLock()}})}function ce(le){return(0,te.m)(null==le?void 0:le.getReader)}},7398:(Qe,_e,O)=>{O.d(_e,{K:()=>te});var c=O(5044);function te(F){return F&&(0,c.m)(F.schedule)}},9947:(Qe,_e,O)=>{O.d(_e,{A:()=>te,e:()=>F});var c=O(5044);function te(ce){return(0,c.m)(null==ce?void 0:ce.lift)}function F(ce){return le=>{if(te(le))return le.lift(function(ye){try{return ce(ye,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(Qe,_e,O)=>{function c(){}O.d(_e,{Z:()=>c})},5160:(Qe,_e,O)=>{O.d(_e,{h:()=>F});var c=O(5367),te=O(2496);function F(ce){te.z.setTimeout(()=>{const{onUnhandledError:le}=c.v;if(!le)throw ce;le(ce)})}},3754:(Qe,_e,O)=>{function c(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(_e,{z:()=>c})},1728:(Qe,_e,O)=>{var c=O(3668);let te=null;function F(){return te}const se=new c.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.LFG)(W)},providedIn:"platform"}),n})();const G=new c.OlP("Location Initialized");let W=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new W((0,c.LFG)(se))},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function je(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function(n){const e=(0,c.LFG)(se).location;return new Be((0,c.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ce=new c.OlP("appBaseHref");let Be=(()=>{class n extends Fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+Ue(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+Ue(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(Ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+Ue(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+Ue(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(Ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),at=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=je(Ke(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ke(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=De,n.stripTrailingSlash=je,n.\u0275fac=function(t){return new(t||n)(c.LFG(Fe),c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new at((0,c.LFG)(Fe),(0,c.LFG)(ue))},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}var ee=(()=>((ee=ee||{})[ee.Zero=0]="Zero",ee[ee.One=1]="One",ee[ee.Two=2]="Two",ee[ee.Few=3]="Few",ee[ee.Many=4]="Many",ee[ee.Other=5]="Other",ee))();const Zr=c.kL8;class gi{}let Jt=(()=>{class n extends gi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Zr(r||this.locale)(t)){case ee.Zero:return"zero";case ee.One:return"one";case ee.Two:return"two";case ee.Few:return"few";case ee.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class rd{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,u)=>{if(null==i.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new rd(null,this._ngForOf,-1,-1),null===u?void 0:u),m=new $a(i,h);r.push(m)}else if(null==u)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const h=this._viewContainer.get(s);this._viewContainer.move(h,u);const m=new $a(i,h);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const u=this._viewContainer.get(i);u.context.index=i,u.context.count=s,u.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class $a{constructor(e,t){this.record=e,this.view=t}}let vr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ys("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ys("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Wl{constructor(){this.$implicit=null,this.ngIf=null}}function Ys(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class qn{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let za=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Oi=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new qn(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(za,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),ni=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Xs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:gi,useClass:Jt}]}),n})();const ts="browser";function Za(n){return n===ts}function Tr(n){return"server"===n}let ec=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new tc((0,c.LFG)(se),window)}),n})();class tc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Jh(this.window.history)||Jh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Jh(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ts extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ts,te||(te=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null);return null==t?null:function(n){Rn=Rn||document.createElement("a"),Rn.setAttribute("href",n);const e=Rn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Rn,Ya=null;const Li=new c.OlP("TRANSITION_ID"),rn=[{provide:c.ip1,useFactory:function(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Li,se,c.zs3],multi:!0}];class Qa{static init(){(0,c.VLi)(new Qa)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(m){u=u||m,s--,0==s&&r(u)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ja=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new c.OlP("EventManagerPlugins");let ri=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ds),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class xo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ko=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),pt=(()=>{class n extends ko{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Xa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Xa))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Xa(n){F().remove(n)}const br={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},el=/%COMP%/g;function Ss(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ss(n,i,t):(i=i.replace(el,n),t.push(i))}return t}function Nn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new wr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Xh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new ic(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ss(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ri),c.LFG(pt),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class wr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(br[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=br[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=br[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nn(r)):this.eventManager.addEventListener(e,t,Nn(r))}}class Xh extends wr{constructor(e,t,r,i){super(e),this.component=r;const s=Ss(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(el,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(el,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ic extends wr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ss(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let No=(()=>{class n extends xo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Oo=["alt","control","meta","shift"],Bi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},la={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},no={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ns=(()=>{class n extends xo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="";if(Oo.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),u+=m+".")}),u+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&la.hasOwnProperty(e)&&(e=la[e]))}return Bi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Oo.forEach(s=>{s!=i&&no[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:ts},{provide:c.g9A,useValue:function(){Ts.makeCurrent(),Qa.init()},multi:!0},{provide:se,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),Jl=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:Ds,useClass:No,multi:!0,deps:[se,c.R0b,c.Lbi]},{provide:Ds,useClass:ns,multi:!0,deps:[se]},{provide:Vi,useClass:Vi,deps:[ri,pt,c.AFp]},{provide:c.FYo,useExisting:Vi},{provide:ko,useExisting:pt},{provide:pt,useClass:pt,deps:[se]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:ri,useClass:ri,deps:[Ds,c.R0b]},{provide:class{},useClass:Ja,deps:[]}];let ua=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Li,useExisting:c.AFp},rn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Jl,imports:[Xs,c.hGG]}),n})();"undefined"!=typeof window&&window;let hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(ca),r},providedIn:"root"}),n})(),ca=(()=>{class n extends hl{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function(n){return new ca(n.get(se))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var mn=O(5947),so=O(7613);function qe(...n){const e=(0,so.yG)(n);return(0,mn.D)(n,e)}var Rt=O(273);class hr extends Rt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Pn=O(8305);const{isArray:da}=Array,{getPrototypeOf:Bg,prototype:fl,keys:iu}=Object;function su(n){if(1===n.length){const e=n[0];if(da(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&Bg(n)===fl}(e)){const t=iu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Lo=O(4623),Ze=O(4753);const{isArray:Vo}=Array;function Bo(n){return(0,Ze.U)(e=>function(n,e){return Vo(e)?n(...e):n(e)}(n,e))}function ou(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var _n=O(8889),au=O(8395);function Ui(n,e,t){n?(0,au.f)(t,n,e):e()}const Uo=(0,O(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ao=O(5373);function fa(...n){return(0,ao.J)(1)((0,mn.D)(n,(0,so.yG)(n)))}var Lr=O(9985);function ii(n){return new Pn.y(e=>{(0,Lr.Xf)(n()).subscribe(e)})}var pl=O(5583),Dr=O(7908),jn=O(9947);function jo(){return(0,jn.e)((n,e)=>{let t=null;n._refCount++;const r=new _n.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class As extends Pn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dr.w0;const t=this.getSubject();e.add(this.source.subscribe(new _n.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dr.w0.EMPTY)}return e}refCount(){return jo()(this)}}function Fn(n,e){return(0,jn.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new _n.Q(r,m=>{null==i||i.unsubscribe();let v=0;const C=s++;(0,Lr.Xf)(n(m,C)).subscribe(i=new _n.Q(r,D=>r.next(e?e(m,D,C,v++):D),()=>{i=null,h()}))},()=>{u=!0,h()}))})}var Ft=O(9468);function Sr(...n){const e=(0,so.yG)(n);return(0,jn.e)((t,r)=>{(e?fa(n,t,e):fa(n,t)).subscribe(r)})}function rs(n,e,t,r,i){return(s,u)=>{let h=t,m=e,v=0;s.subscribe(new _n.Q(u,C=>{const D=v++;m=h?n(m,C,D):(h=!0,C),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}function _i(n,e){return(0,jn.e)(rs(n,e,arguments.length>=2,!0))}function Kt(n,e){return(0,jn.e)((t,r)=>{let i=0;t.subscribe(new _n.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ji(n){return(0,jn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new _n.Q(t,void 0,void 0,u=>{s=(0,Lr.Xf)(n(u,ji(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var Cn=O(5724),si=O(5044);function pa(n,e){return(0,si.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function dn(n){return n<=0?()=>pl.E:(0,jn.e)((e,t)=>{let r=[];e.subscribe(new _n.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gl(n=cc){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe(new _n.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cc(){return new Uo}function dc(n){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe(new _n.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kt((i,s)=>n(i,s,r)):Lo.y,(0,Ft.q)(1),t?dc(e):gl(()=>new Uo))}var rr=O(7384);function lu(n){return(0,jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Vr{constructor(e,t){this.id=e,this.url=t}}class uu extends Vr{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class An extends Vr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cu extends Vr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ml extends Vr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sy extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ga extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hi extends Vr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class is extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ed extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Go{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ma{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class du{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _a{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class Ar{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ss(n){return new Ar(n)}const lo="ngNavigationCancelingError";function sf(n){const e=Error("NavigationCancelingError: "+n);return e[lo]=!0,e}function lf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!hu(n[i],e[i]))return!1;return!0}function hu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Id(n){return Array.prototype.concat.apply([],n)}function pc(n){return n.length>0?n[n.length-1]:null}function Ln(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xr(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,mn.D)(Promise.resolve(n)):qe(n)}const Td={exact:function fu(n,e,t){if(!gt(n.segments,e.segments)||!B(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!fu(n.children[r],e.children[r],t))return!1;return!0},subset:A},co={exact:function(n,e){return Mr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hu(n[t],e[t]))},ignored:()=>!0};function Dd(n,e,t){return Td[t.paths](n.root,e.root,t.matrixParams)&&co[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function A(n,e,t){return N(n,e,e.segments,t)}function N(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!gt(i,t)||e.hasChildren()||!B(i,t,r))}if(n.segments.length===t.length){if(!gt(n.segments,t)||!B(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!A(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gt(n.segments,i)&&B(n.segments,i,r)&&n.children[Nt])&&N(n.children[Nt],e,s,r)}}function B(n,e,t){return e.every((r,i)=>co[t](n[i].parameters,r.parameters))}class Q{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ss(this.queryParams)),this._queryParamMap}toString(){return yi.serialize(this)}}class Y{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ln(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yn(this)}}class xe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ss(this.parameters)),this._parameterMap}toString(){return cf(this)}}function gt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class zt{}class Mt{parse(e){const t=new E0(e);return new Q(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Br(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${oi(t)}=${oi(i)}`).join("&"):`${oi(t)}=${oi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const yi=new Mt;function yn(n){return n.segments.map(e=>cf(e)).join("/")}function Br(n,e){if(!n.hasChildren())return yn(n);if(e){const t=n.children[Nt]?Br(n.children[Nt],!1):"",r=[];return Ln(n.children,(i,s)=>{s!==Nt&&r.push(`${s}:${Br(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Ln(n.children,(r,i)=>{i===Nt&&(t=t.concat(e(r,i)))}),Ln(n.children,(r,i)=>{i!==Nt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Nt?[Br(n.children[Nt],!1)]:[`${i}:${Br(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${yn(n)}/${t[0]}`:`${yn(n)}/(${t.join("//")})`}}function $o(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oi(n){return $o(n).replace(/%3B/gi,";")}function Gi(n){return $o(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zo(n){return decodeURIComponent(n)}function qo(n){return zo(n.replace(/\+/g,"%20"))}function cf(n){return`${Gi(n.path)}${function(n){return Object.keys(n).map(e=>`;${Gi(e)}=${Gi(n[e])}`).join("")}(n.parameters)}`}const va=/^[^\/()?;=#]+/;function ho(n){const e=n.match(va);return e?e[0]:""}const My=/^[^=?&#]+/,hf=/^[^&#]+/;class E0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new Y(e,t)),r}parseSegment(){const e=ho(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new xe(zo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ho(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ho(this.remaining);i&&(r=i,this.capture(r))}e[zo(t)]=zo(r)}parseQueryParam(e){const t=function(n){const e=n.match(My);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(hf);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=qo(t),s=qo(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ho(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Nt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Nt]:new Y([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Hg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=mc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ff(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ff(e,this._root).map(t=>t.value)}}function mc(n,e){if(n===e.value)return e;for(const t of e.children){const r=mc(n,t);if(r)return r}return null}function ff(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ff(n,t);if(r.length)return r.unshift(e),r}return[]}class os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _l extends Hg{constructor(e,t){super(e),this.snapshot=t,gu(this,e)}toString(){return this.snapshot.toString()}}function Gg(n,e){const t=function(n,e){const u=new vl([],{},{},"",{},Nt,e,null,n.root,-1,{});return new Sd("",new os(u,[]))}(n,e),r=new hr([new xe("",{})]),i=new hr({}),s=new hr({}),u=new hr({}),h=new hr(""),m=new _c(r,i,u,h,s,Nt,e,t.root);return m.snapshot=t.root,new _l(new os(m,[]),t)}class _c{constructor(e,t,r,i,s,u,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ze.U)(e=>ss(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ze.U)(e=>ss(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:tt(tt({},e.params),t.params),data:tt(tt({},e.data),t.data),resolve:tt(tt({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vl{constructor(e,t,r,i,s,u,h,m,v,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ss(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ss(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sd extends Hg{constructor(e,t){super(t),this.url=e,gu(this,t)}toString(){return ba(this._root)}}function gu(n,e){e.value._routerState=n,e.children.forEach(t=>gu(n,t))}function ba(n){const e=n.children.length>0?` { ${n.children.map(ba).join(", ")} } `:"";return`${n.value}${e}`}function Ad(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Md(n,e){const t=Mr(n.params,e.params)&&function(n,e){return gt(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Md(n.parent,e.parent))}function yc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return yc(n,r,i);return yc(n,r)})}(n,e,t);return new os(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>yc(n,h)),u}}const r=function(n){return new _c(new hr(n.url),new hr(n.params),new hr(n.queryParams),new hr(n.fragment),new hr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>yc(n,s));return new os(r,i)}}function vc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function bc(n){return"object"==typeof n&&null!=n&&n.outlets}function wc(n,e,t,r,i){let s={};return r&&Ln(r,(u,h)=>{s[h]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`}),new Q(t.root===n?e:qg(t.root,n,e),s,i)}function qg(n,e,t){const r={};return Ln(n.children,(i,s)=>{r[s]=i===e?t:qg(i,e,t)}),new Y(n.segments,r)}class Wg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(bc);if(i&&i!==pc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Zg(n,e,t){if(n||(n=new Y([],{})),0===n.segments.length&&n.hasChildren())return gf(n,e,t);const r=function(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(bc(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!wa(m,v,u))return s;r+=2}else{if(!wa(m,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Y(n.segments.slice(0,r.pathIndex),{});return s.children[Nt]=new Y(n.segments.slice(r.pathIndex),n.children),gf(s,0,i)}return r.match&&0===i.length?new Y(n.segments,{}):r.match&&!n.hasChildren()?bl(n,e,t):r.match?gf(n,0,i):bl(n,e,t)}function gf(n,e,t){if(0===t.length)return new Y(n.segments,{});{const r=function(n){return bc(n[0])?n[0].outlets:{[Nt]:n}}(t),i={};return Ln(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=Zg(n.children[u],e,s))}),Ln(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new Y(n.segments,i)}}function bl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(bc(s)){const m=Yg(s.outlets);return new Y(r,m)}if(0===i&&vc(t[0])){r.push(new xe(n.segments[e].path,ks(t[0]))),i++;continue}const u=bc(s)?s.outlets[Nt]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&vc(h)?(r.push(new xe(u,ks(h))),i+=2):(r.push(new xe(u,{})),i++)}return new Y(r,{})}function Yg(n){const e={};return Ln(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bl(new Y([],{}),0,t))}),e}function ks(n){const e={};return Ln(n,(t,r)=>e[r]=`${t}`),e}function wa(n,e,t){return n==t.path&&Mr(e,t.parameters)}class Jg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ad(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=fo(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Ln(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fo(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fo(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=fo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Cd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new du(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Ad(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Ad(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=m,u.outlet&&u.outlet.activateWith(i,m),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class em{constructor(e,t){this.routes=e,this.module=t}}function wl(n){return"function"==typeof n}function Wo(n){return n instanceof Q}const _u=Symbol("INITIAL_VALUE");function El(){return Fn(n=>function(...n){const e=(0,so.yG)(n),t=(0,so.jO)(n),{args:r,keys:i}=su(n);if(0===r.length)return(0,mn.D)([],e);const s=new Pn.y(function(n,e,t=Lo.y){return r=>{Ui(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let m=0;m<i;m++)Ui(e,()=>{const v=(0,mn.D)(n[m],e);let C=!1;v.subscribe(new _n.Q(r,D=>{s[m]=D,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>ou(i,u):Lo.y));return t?s.pipe(Bo(t)):s}(n.map(e=>e.pipe((0,Ft.q)(1),Sr(_u)))).pipe(_i((e,t)=>{let r=!1;return t.reduce((i,s,u)=>i!==_u?i:(s===_u&&(r=!0),r||!1!==s&&u!==t.length-1&&!Wo(s)?i:s),e)},_u),Kt(e=>e!==_u),(0,Ze.U)(e=>Wo(e)?e:!0===e),(0,Ft.q)(1)))}class Oy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new yu,this.attachRef=null}}class yu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Oy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let nm=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new Rd(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(yu),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Rd{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_c?this.route:e===yu?this.childContexts:this.parent.get(e,t)}}let Ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[nm],encapsulation:2}),n})();function Nd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Od(r,Py(e,r))}}function Od(n,e){n.children&&Nd(n.children,e)}function Py(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Hn(n){const e=n.children&&n.children.map(Hn),t=e?hi(tt({},n),{children:e}):tt({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=Ec),t}function as(n){return n.outlet||Nt}function Fy(n,e){const t=n.filter(r=>as(r)===e);return t.push(...n.filter(r=>as(r)!==e)),t}const po={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cc(n,e,t){var h;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?tt({},po):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||lf)(t,n,e);if(!i)return tt({},po);const s={};Ln(i.posParams,(m,v)=>{s[v]=m.path});const u=i.consumed.length>0?tt(tt({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:u,positionalParamSegments:null!=(h=i.posParams)?h:{}}}function Pd(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>bf(n,e,r)&&as(r)!==Nt)}(n,t,r)){const u=new Y(e,function(n,e,t,r){const i={};i[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&as(s)!==Nt){const u=new Y([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[as(s)]=u}return i}(n,e,r,new Y(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>bf(n,e,r))}(n,t,r)){const u=new Y(n.segments,function(n,e,t,r,i,s){const u={};for(const h of r)if(bf(n,t,h)&&!i[as(h)]){const m=new Y([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[as(h)]=m}return tt(tt({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Y(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function bf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wf(n,e,t,r){return!!(as(n)===r||r!==Nt&&bf(e,t,n))&&("**"===n.path||Cc(e,n,t).matched)}function vu(n,e,t){return 0===e.length&&!n.children[t]}class fr{constructor(e){this.segmentGroup=e||null}}class bu{constructor(e){this.urlTree=e}}function Ic(n){return new Pn.y(e=>e.error(new fr(n)))}function Ef(n){return new Pn.y(e=>e.error(new bu(n)))}function Ur(n){return new Pn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class rm{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Pd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Y(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,Ze.U)(s=>this.createUrlTree(Fd(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ji(s=>{if(s instanceof bu)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof fr?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,Ze.U)(i=>this.createUrlTree(Fd(i),e.queryParams,e.fragment))).pipe(ji(i=>{throw i instanceof fr?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Y([],{[Nt]:e}):e;return new Q(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ze.U)(s=>new Y([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,mn.D)(i).pipe(pa(s=>{const u=r.children[s],h=Fy(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,Ze.U)(m=>({segment:m,outlet:s})))}),_i((s,u)=>(s[u.outlet]=u.segment,s),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kt((i,s)=>n(i,s,r)):Lo.y,dn(1),t?dc(e):gl(()=>new Uo))}())}expandSegment(e,t,r,i,s,u){return(0,mn.D)(r).pipe(pa(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe(ji(v=>{if(v instanceof fr)return qe(null);throw v}))),Ho(h=>!!h),ji((h,m)=>{if(h instanceof Uo||"EmptyError"===h.name){if(vu(t,i,s))return qe(new Y([],{}));throw new fr(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return wf(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Ic(t):Ic(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ef(s):this.lineralizeSegments(r,s).pipe((0,Cn.z)(u=>{const h=new Y(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:m,lastChild:v,positionalParamSegments:C}=Cc(t,i,s);if(!h)return Ic(t);const D=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?Ef(D):this.lineralizeSegments(i,D).pipe((0,Cn.z)(R=>this.expandSegment(e,t,r,R.concat(s.slice(v)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?qe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ze.U)(R=>(r._loadedConfig=R,new Y(i,{})))):qe(new Y(i,{}));const{matched:u,consumedSegments:h,lastChild:m}=Cc(t,r,i);if(!u)return Ic(t);const v=i.slice(m);return this.getChildConfig(e,r,i).pipe((0,Cn.z)(D=>{const R=D.module,L=D.routes,{segmentGroup:U,slicedSegments:X}=Pd(t,h,v,L),me=new Y(U.segments,U.children);if(0===X.length&&me.hasChildren())return this.expandChildren(R,L,me).pipe((0,Ze.U)(rt=>new Y(h,rt)));if(0===L.length&&0===X.length)return qe(new Y(h,{}));const Je=as(r)===s;return this.expandSegment(R,me,L,X,Je?Nt:s,!0).pipe((0,Ze.U)(ct=>new Y(h.concat(ct.segments),ct.children)))}))}getChildConfig(e,t,r){return t.children?qe(new em(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?qe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,Ze.U)(s=>(t._loadedConfig=s,s))):(n=t,new Pn.y(e=>e.error(sf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):qe(new em([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?qe(i.map(u=>{const h=e.get(u);let m;if((n=h)&&wl(n.canLoad))m=h.canLoad(t,r);else{if(!wl(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}var n;return xr(m)})).pipe(El(),(0,rr.b)(u=>{if(!Wo(u))return;const h=sf(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,Ze.U)(u=>!0===u)):qe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qe(r);if(i.numberOfChildren>1||!i.children[Nt])return Ur(e.redirectTo);i=i.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Q(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ln(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Ln(t.children,(h,m)=>{u[m]=this.createSegmentGroup(e,h,r,i)}),new Y(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Fd(n){const e={};for(const r of Object.keys(n.children)){const s=Fd(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new Y(n.segments.concat(e.segments),e.children)}return n}(new Y(n.segments,e))}class Dc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wu{constructor(e,t){this.component=e,this.route=t}}function im(n,e,t){const r=n._root;return Il(r,e?e._root:null,t,[r.value])}function Cl(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Il(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=fo(e);return n.children.forEach(u=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const m=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gt(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Md(n,e)||!Mr(n.queryParams,e.queryParams);default:return!Md(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Dc(r)):(s.data=u.data,s._resolvedData=u._resolvedData),Il(n,e,s.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new wu(h.outlet.component,u))}else u&&Ld(e,h,i),i.canActivateChecks.push(new Dc(r)),Il(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Ln(s,(u,h)=>Ld(u,t.getContext(h),i)),i}function Ld(n,e,t){const r=fo(n),i=n.value;Ln(r,(s,u)=>{Ld(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new wu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ky{}function Df(n){return new Pn.y(e=>e.error(n))}class Sf{constructor(e,t,r,i,s,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const e=Pd(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const r=new vl([],Object.freeze({}),Object.freeze(tt({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new os(r,t),s=new Sd(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=yl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const u=t.children[s],h=Fy(e,s),m=this.processSegmentGroup(h,u,s);if(null===m)return null;r.push(...m)}const i=Vd(r);return i.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const s of e){const u=this.processSegmentAgainstRoute(s,t,r,i);if(null!==u)return u}return vu(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!wf(e,t,r,i))return null;let s,u=[],h=[];if("**"===e.path){const L=r.length>0?pc(r).parameters:{};s=new vl(r,L,Object.freeze(tt({},this.urlTree.queryParams)),this.urlTree.fragment,ls(e),as(e),e.component,e,vi(t),Rs(t)+r.length,Zy(e))}else{const L=Cc(t,e,r);if(!L.matched)return null;u=L.consumedSegments,h=r.slice(L.lastChild),s=new vl(u,L.parameters,Object.freeze(tt({},this.urlTree.queryParams)),this.urlTree.fragment,ls(e),as(e),e.component,e,vi(t),Rs(t)+u.length,Zy(e))}const m=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:v,slicedSegments:C}=Pd(t,u,h,m.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);var n;if(0===C.length&&v.hasChildren()){const L=this.processChildren(m,v);return null===L?null:[new os(s,L)]}if(0===m.length&&0===C.length)return[new os(s,[])];const D=as(e)===i,R=this.processSegment(m,v,C,D?Nt:i);return null===R?null:[new os(s,R)]}}function um(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Vd(n){const e=[],t=new Set;for(const r of n){if(!um(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Vd(r.children);e.push(new os(r.value,i))}return e.filter(r=>!t.has(r))}function vi(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Rs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ls(n){return n.data||{}}function Zy(n){return n.resolve||{}}function us(n){return Fn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,Ze.U)(()=>e)):qe(e)})}class Sc extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ud=new c.OlP("ROUTES");class jd{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ze.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=s.create(e);return new em(Id(u.injector.get(Ud,void 0,c.XFs.Self|c.XFs.Optional)).map(Hn),u)}),ji(s=>{throw t._loader$=void 0,s}));return t._loader$=new As(i,()=>new Rt.x).pipe(jo()),t._loader$}loadModuleFactory(e){return xr(e()).pipe((0,Cn.z)(t=>t instanceof c.YKP?qe(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class Ac{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Hd(n){throw n}function D0(n,e,t){return e.parse("/")}function ai(n,e){return qe(null)}const Tl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class n{constructor(t,r,i,s,u,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Rt.x,this.errorHandler=Hd,this.malformedUriErrorHandler=D0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ai,afterPreactivation:ai},this.urlHandlingStrategy=new Ac,this.routeReuseStrategy=new Sc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(c.h0i),this.console=u.get(c.c2e);const D=u.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=new Q(new Y([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jd(u,h,R=>this.triggerEvent(new Go(R)),R=>this.triggerEvent(new ma(R))),this.routerState=Gg(this.currentUrlTree,this.rootComponentType),this.transitions=new hr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Kt(i=>0!==i.id),(0,Ze.U)(i=>hi(tt({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Fn(i=>{let s=!1,u=!1;return qe(i).pipe((0,rr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?hi(tt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Eu(h.source)&&(this.browserUrlTree=h.extractedUrl),qe(h).pipe(Fn(D=>{const R=this.transitions.getValue();return r.next(new uu(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions.getValue()?pl.E:Promise.resolve(D)}),function(n,e,t,r){return Fn(i=>function(n,e,t,r,i){return new rm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ze.U)(s=>hi(tt({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,rr.b)(D=>{this.currentNavigation=hi(tt({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Cn.z)(s=>function(n,e,t,r,i="emptyOnly",s="legacy"){try{const u=new Sf(n,e,t,r,i,s).recognize();return null===u?Df(new Ky):qe(u)}catch(u){return Df(u)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,Ze.U)(u=>hi(tt({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,rr.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const R=new Sy(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(R)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:L,source:U,restoredState:X,extras:me}=h,Je=new uu(R,this.serializeUrl(L),U,X);r.next(Je);const nt=Gg(L,this.rootComponentType).snapshot;return qe(hi(tt({},h),{targetSnapshot:nt,urlAfterRedirects:L,extras:hi(tt({},me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),pl.E}),us(h=>{const{targetSnapshot:m,id:v,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:L}}=h;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!L})}),(0,rr.b)(h=>{const m=new ga(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,Ze.U)(h=>hi(tt({},h),{guards:im(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?qe(hi(tt({},t),{guardsResult:!0})):function(n,e,t,r){return(0,mn.D)(n).pipe((0,Cn.z)(i=>function(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?qe(s.map(h=>{const m=Cl(h,e,i);let v;if(function(n){return n&&wl(n.canDeactivate)}(m))v=xr(m.canDeactivate(n,e,t,r));else{if(!wl(m))throw new Error("Invalid CanDeactivate guard");v=xr(m(n,e,t,r))}return v.pipe(Ho())})).pipe(El()):qe(!0)}(i.component,i.route,t,e,r)),Ho(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Cn.z)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,e,t,r){return(0,mn.D)(e).pipe(pa(i=>fa(function(n,e){return null!==n&&e&&e(new hc(n)),qe(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new fc(n)),qe(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>ii(()=>qe(u.guards.map(m=>{const v=Cl(m,u.node,t);let C;if(function(n){return n&&wl(n.canActivateChild)}(v))C=xr(v.canActivateChild(r,n));else{if(!wl(v))throw new Error("Invalid CanActivateChild guard");C=xr(v(r,n))}return C.pipe(Ho())})).pipe(El())));return qe(s).pipe(El())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return qe(!0);const i=r.map(s=>ii(()=>{const u=Cl(s,e,t);let h;if(function(n){return n&&wl(n.canActivate)}(u))h=xr(u.canActivate(e,n));else{if(!wl(u))throw new Error("Invalid CanActivate guard");h=xr(u(e,n))}return h.pipe(Ho())}));return qe(i).pipe(El())}(n,i.route,t))),Ho(i=>!0!==i,!0))}(r,s,n,e):qe(h)),(0,Ze.U)(h=>hi(tt({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,rr.b)(h=>{if(Wo(h.guardsResult)){const v=sf(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const m=new Hi(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Kt(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),us(h=>{if(h.guards.canActivateChecks.length)return qe(h).pipe((0,rr.b)(m=>{const v=new is(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Fn(m=>{let v=!1;return qe(m).pipe(function(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qe(t);let s=0;return(0,mn.D)(i).pipe(pa(u=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return qe({});const s={};return(0,mn.D)(i).pipe((0,Cn.z)(u=>function(n,e,t,r){const i=Cl(n,e,r);return xr(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,rr.b)(h=>{s[u]=h}))),dn(1),(0,Cn.z)(()=>Object.keys(s).length===i.length?qe(s):pl.E))}(n._resolve,n,e,r).pipe((0,Ze.U)(s=>(n._resolvedData=s,n.data=tt(tt({},n.data),yl(n,t).resolve),null)))}(u.route,r,n,e)),(0,rr.b)(()=>s++),dn(1),(0,Cn.z)(u=>s===i.length?qe(t):pl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,rr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,rr.b)(m=>{const v=new Ed(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),us(h=>{const{targetSnapshot:m,id:v,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:L}}=h;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!L})}),(0,Ze.U)(h=>{const m=function(n,e,t){const r=yc(n,e._root,t?t._root:void 0);return new _l(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return hi(tt({},h),{targetRouterState:m})}),(0,rr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Ze.U)(r=>(new Jg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,rr.b)({next(){s=!0},complete(){s=!0}}),lu(()=>{var h;s||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(h=this.currentNavigation)?void 0:h.id)===i.id&&(this.currentNavigation=null)}),ji(h=>{if(u=!0,function(n){return n&&n[lo]}(h)){const m=Wo(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new cu(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),m?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Eu(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new ml(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return pl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(tt(tt({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var h;const i={replaceUrl:!0},s=(null==(h=t.state)?void 0:h.navigationId)?t.state:null;if(s){const m=tt({},s);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(i.state=m)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Nd(t),this.config=t.map(Hn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,C=m?this.currentUrlTree.fragment:u;let D=null;switch(h){case"merge":D=tt(tt({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function(n,e,t,r,i){if(0===t.length)return wc(e.root,e.root,e,r,i);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Wg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Ln(s.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Wg(t,e,r)}(t);if(s.toRoot())return wc(e.root,new Y([],{}),e,r,i);const u=function(n,e,t){if(n.isAbsolute)return new xd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new xd(s,s===e.root,0)}const r=vc(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new xd(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=u.processChildren?gf(u.segmentGroup,u.index,s.commands):Zg(u.segmentGroup,u.index,s.commands);return wc(u.segmentGroup,h,e,r,i)}(v,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?tt({},Tl):!1===r?tt({},xf):r,Wo(t))return Dd(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Dd(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new An(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){var Je,nt,ct;if(this.disposed)return Promise.resolve(!1);const h=this.transitions.value,m=Eu(r)&&h&&!Eu(h.source),v=h.rawUrl.toString()===t.toString(),C=h.id===(null==(Je=this.currentNavigation)?void 0:Je.id);if(m&&v&&C)return Promise.resolve(!0);let R,L,U;u?(R=u.resolve,L=u.reject,U=u.promise):U=new Promise((rt,Pt)=>{R=rt,L=Pt});const X=++this.navigationId;let me;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),me=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(nt=this.browserPageId)?nt:0:(null!=(ct=this.browserPageId)?ct:0)+1):me=0,this.setTransition({id:X,targetPageId:me,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:R,reject:L,promise:U,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),U.catch(rt=>Promise.reject(rt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=tt(tt({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new cu(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Eu(n){return"imperative"!==n}class p{}class w{preload(e,t){return qe(null)}}let S=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new jd(i,r,m=>t.triggerEvent(new Go(m)),m=>t.triggerEvent(new ma(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Kt(t=>t instanceof An),pa(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,mn.D)(i).pipe((0,ao.J)(),(0,Ze.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?qe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bi),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(p))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),x=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof An&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _a&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _a(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ne=new c.OlP("ROUTER_CONFIGURATION"),Oe=new c.OlP("ROUTER_FORROOT_GUARD"),Ie=[at,{provide:zt,useClass:Mt},{provide:bi,useFactory:function(n,e,t,r,i,s,u={},h,m){const v=new bi(null,n,e,t,r,i,Id(s));return h&&(v.urlHandlingStrategy=h),m&&(v.routeReuseStrategy=m),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,v),u.enableTracing&&v.events.subscribe(C=>{var D,R;null==(D=console.group)||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null==(R=console.groupEnd)||R.call(console)}),v},deps:[zt,yu,at,c.zs3,c.Sil,Ud,ne,[class{},new c.FiY],[class{},new c.FiY]]},yu,{provide:_c,useFactory:function(n){return n.routerState.root},deps:[bi]},S,w,class{preload(e,t){return t().pipe(ji(()=>qe(null)))}},{provide:ne,useValue:{enableTracing:!1}}];function st(){return new c.PXZ("Router",bi)}let lt=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Ie,Iu(t),{provide:Oe,useFactory:Ca,deps:[[bi,new c.FiY,new c.tp0]]},{provide:ne,useValue:r||{}},{provide:Fe,useFactory:Xn,deps:[ue,[new c.tBr(Ce),new c.FiY],ne]},{provide:x,useFactory:qt,deps:[bi,ec,ne]},{provide:p,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:w},{provide:c.PXZ,multi:!0,useFactory:st},[Tu,{provide:c.ip1,multi:!0,useFactory:Mc,deps:[Tu]},{provide:kc,useFactory:xc,deps:[Tu]},{provide:c.tb,multi:!0,useExisting:kc}]]}}static forChild(t){return{ngModule:n,providers:[Iu(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Oe,8),c.LFG(bi,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function qt(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new x(n,e,t)}function Xn(n,e,t={}){return t.useHash?new Pe(n,e):new Be(n,e)}function Ca(n){return"guarded"}function Iu(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Ud,multi:!0,useValue:n}]}let Tu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Rt.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(bi),u=this.injector.get(ne);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?qe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ne),i=this.injector.get(S),s=this.injector.get(x),u=this.injector.get(bi),h=this.injector.get(c.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Mc(n){return n.appInitializer.bind(n)}function xc(n){return n.bootstrapListener.bind(n)}const kc=new c.OlP("Router Initializer"),Rc=[];let Nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lt.forRoot(Rc)],lt]}),n})();class fm{constructor(e=!1,t,r=!0){this._multiple=e,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Rt.x,t&&t.length&&(e?t.forEach(i=>this._markSelected(i)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}var Pf=O(6921);function pr(n){return(0,jn.e)((e,t)=>{(0,Lr.Xf)(n).subscribe(new _n.Q(t,()=>t.complete(),Pf.Z)),!t.closed&&e.subscribe(t)})}function Gn(n){return null!=n&&"false"!=`${n}`}function Hr(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Dl(n){return n instanceof c.SBq?n.nativeElement:n}const lS=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,c.f3M)(se)}}),uS=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ff=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?uS.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(lS,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();class k0 extends class{constructor(){this.expansionModel=new fm(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(r=>this._trackByValue(r)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(r=>this._trackByValue(r)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}{constructor(e,t,r){super(),this.getLevel=e,this.isExpandable=t,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const r=[];for(let i=this.dataNodes.indexOf(e)+1;i<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[i]);i++)r.push(this.dataNodes[i]);return r}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}const cs=new c.OlP("CDK_TREE_NODE_OUTLET_NODE");let qd=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(cs,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class dS{constructor(e){this.$implicit=e}}let Wd=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),Ia=(()=>{class n{constructor(t,r){this._differs=t,this._changeDetectorRef=r,this._onDestroy=new Rt.x,this._levels=new Map,this.viewChange=new hr({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(r=>!r.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;!function(n){return n&&"function"==typeof n.connect}(this._dataSource)?function(n){return!!n&&(n instanceof Pn.y||(0,si.m)(n.lift)&&(0,si.m)(n.subscribe))}(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=qe(this._dataSource)):t=this._dataSource.connect(this),t&&(this._dataSubscription=t.pipe(pr(this._onDestroy)).subscribe(r=>this.renderNodeChanges(r)))}renderNodeChanges(t,r=this._dataDiffer,i=this._nodeOutlet.viewContainer,s){const u=r.diff(t);!u||(u.forEachOperation((h,m,v)=>{if(null==h.previousIndex)this.insertNode(t[v],v,i,s);else if(null==v)i.remove(m),this._levels.delete(h.item);else{const C=i.get(m);i.move(C,v)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,r){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(r,t))||this._defaultNodeDef}insertNode(t,r,i,s){const u=this._getNodeDef(t,r),h=new dS(t);h.level=this.treeControl.getLevel?this.treeControl.getLevel(t):void 0!==s&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,h.level),(i||this._nodeOutlet.viewContainer).createEmbeddedView(u.template,h,r),Sl.mostRecentTreeNode&&(Sl.mostRecentTreeNode.data=t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,Wd,5),2&t){let s;c.iGM(s=c.CRH())&&(r._nodeDefs=s)}},viewQuery:function(t,r){if(1&t&&c.Gf(qd,7),2&t){let i;c.iGM(i=c.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[qd],encapsulation:2}),n})(),Sl=(()=>{class n{constructor(t,r){this._elementRef=t,this._tree=r,this._destroyed=new Rt.x,this._dataChanges=new Rt.x,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(n){let e=n.parentElement;for(;e&&!gm(e);)e=e.parentElement;return e?e.classList.contains("cdk-nested-tree-node")?Hr(e.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Ia))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("aria-expanded",r.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();function gm(n){const e=n.classList;return!(!(null==e?void 0:e.contains("cdk-nested-tree-node"))&&!(null==e?void 0:e.contains("cdk-tree")))}const ev=/([A-Za-z%]+)$/;let tv,Vf=(()=>{class n{constructor(t,r,i,s){this._treeNode=t,this._tree=r,this._element=i,this._dir=s,this._destroyed=new Rt.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe(pr(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,r=null==this._level?t:this._level;return"number"==typeof r?`${r*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const r=this._paddingIndent();if(r!==this._currentPadding||t){const i=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",u="paddingLeft"===s?"paddingRight":"paddingLeft";i.style[s]=r||"",i.style[u]="",this._currentPadding=r}}_setLevelInput(t){this._level=Hr(t,null),this._setPadding()}_setIndentInput(t){let r=t,i="px";if("string"==typeof t){const s=t.split(ev);r=s[0],i=s[1]||i}this.indentUnits=i,this._indent=Hr(r),this._setPadding()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sl),c.Y36(Ia),c.Y36(c.SBq),c.Y36(Ff,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),O0=(()=>{class n{constructor(t,r){this._tree=t,this._treeNode=r,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=Gn(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ia),c.Y36(Sl))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),fS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();try{tv="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){tv=!1}let Bf,ds=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Za(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!tv)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const P0=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function gS(){if(Bf)return Bf;if("object"!=typeof document||!document)return Bf=new Set(P0),Bf;let n=document.createElement("input");return Bf=new Set(P0.filter(e=>(n.setAttribute("type",e),n.type===e))),Bf}let Kd,Zd,Yd,L0;function mm(n){return function(){if(null==Kd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kd=!0}))}finally{Kd=Kd||!1}return Kd}()?n:!!n.capture}function _m(){if("object"!=typeof document||!document)return 0;if(null==Zd){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),Zd=0,0===n.scrollLeft&&(n.scrollLeft=1,Zd=0===n.scrollLeft?1:2),n.remove()}return Zd}function mS(n){if(function(){if(null==L0){const n="undefined"!=typeof document?document.head:null;L0=!(!n||!n.createShadowRoot&&!n.attachShadow)}return L0}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ym(n){return n.composedPath?n.composedPath()[0]:n.target}function zf(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Au=O(2210);function Em(n,e=Au.z){return(0,jn.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=s;s=null,r.next(v)}};function m(){const v=u+n,C=e.now();if(C<v)return i=this.schedule(void 0,v-C),void r.add(i);h()}t.subscribe(new _n.Q(r,v=>{s=v,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}function Cm(n,e=Lo.y){return n=null!=n?n:KS,(0,jn.e)((t,r)=>{let i,s=!0;t.subscribe(new _n.Q(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function KS(n,e){return n===e}class Zo extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Rt.x,this._typeaheadSubscription=Dr.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Rt.x,this.change=new Rt.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,rr.b)(t=>this._pressedLetters.push(t)),Em(e),Kt(()=>this._pressedLetters.length>0),(0,Ze.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,u=r[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||zf(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let JS=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===Im(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=Im(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||fE(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ds))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Im(n){if(!fE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class rA{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Ft.q)(1)).subscribe(e)}}let iA=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new rA(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(JS),c.LFG(c.R0b),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Dm(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Da=new c.OlP("cdk-input-modality-detector-options"),Wf={ignoreKeys:[18,17,224,91,16]},mo=mm({passive:!0,capture:!0});let Sm=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new hr(null),this._lastTouchMs=0,this._onKeydown=u=>{var h,m;(null==(m=null==(h=this._options)?void 0:h.ignoreKeys)?void 0:m.some(v=>v===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ym(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(pE(u)?"keyboard":"mouse"),this._mostRecentTarget=ym(u))},this._onTouchstart=u=>{Dm(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ym(u))},this._options=tt(tt({},Wf),s),this.modalityDetected=this._modality.pipe(Kt((e,t)=>1<=t)),this.modalityChanged=this.modalityDetected.pipe(Cm()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,mo),i.addEventListener("mousedown",this._onMousedown,mo),i.addEventListener("touchstart",this._onTouchstart,mo)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mo),document.removeEventListener("mousedown",this._onMousedown,mo),document.removeEventListener("touchstart",this._onTouchstart,mo))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ds),c.LFG(c.R0b),c.LFG(se),c.LFG(Da,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jd=new c.OlP("cdk-focus-monitor-default-options"),Ml=mm({passive:!0,capture:!0});let Pc=(()=>{class n{constructor(t,r,i,s,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Rt.x,this._rootNodeFocusAndBlurListener=h=>{const m=ym(h),v="focus"===h.type?this._onFocus:this._onBlur;for(let C=m;C;C=C.parentElement)v.call(this,h,C)},this._document=s,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=Dl(t);if(!this._platform.isBrowser||1!==i.nodeType)return qe(null);const s=mS(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const h={checkChildren:r,subject:new Rt.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=Dl(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Dl(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,m])=>this._originChanged(h,r,m)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=ym(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ml),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ml)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(pr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ml),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ml),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(ds),c.LFG(Sm),c.LFG(se,8),c.LFG(Jd,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fc="cdk-high-contrast-black-on-white",Lc="cdk-high-contrast-white-on-black",Am="cdk-high-contrast-active";let gE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Am),t.remove(Fc),t.remove(Lc),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(Am),t.add(Fc)):2===r&&(t.add(Am),t.add(Lc))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ds),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class fv{}const Sa="*";function pv(n,e){return{type:7,name:n,definitions:e,options:{}}}function Mm(n,e=null){return{type:4,styles:e,timings:n}}function gv(n,e=null){return{type:2,steps:n,options:e}}function Xd(n){return{type:6,styles:n,offset:null}}function xm(n,e,t){return{type:0,name:n,styles:e,options:t}}function mv(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function _E(n){Promise.resolve(null).then(n)}class Jf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){_E(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class yE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?_E(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function km(){return"undefined"!=typeof window&&void 0!==window.document}function _v(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Vc(n){switch(n.length){case 0:return new Jf;case 1:return n[0];default:return new yE(n)}}function uA(n,e,t,r,i={},s={}){const u=[],h=[];let m=-1,v=null;if(r.forEach(C=>{const D=C.offset,R=D==m,L=R&&v||{};Object.keys(C).forEach(U=>{let X=U,me=C[U];if("offset"!==U)switch(X=e.normalizePropertyName(X,u),me){case"!":me=i[U];break;case Sa:me=s[U];break;default:me=e.normalizeStyleValue(U,X,me,u)}L[X]=me}),R||h.push(L),v=L,m=D}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return h}function vE(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&yv(t,"start",n)));break;case"done":n.onDone(()=>r(t&&yv(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&yv(t,"destroy",n)))}}function yv(n,e,t){const r=t.totalTime,s=Rm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function Rm(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function _o(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function bE(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Mu=(n,e)=>!1,vv=(n,e)=>!1,bv=(n,e,t)=>[];const wE=_v();(wE||"undefined"!=typeof Element)&&(Mu=km()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),vv=(()=>{if(wE||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):vv}})(),bv=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let Aa=null,CE=!1;function Nm(n){Aa||(Aa=("undefined"!=typeof document?document.body:null)||{},CE=!!Aa.style&&"WebkitAppearance"in Aa.style);let e=!0;return Aa.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Aa.style,!e&&CE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Aa.style)),e}const wv=vv,Ev=Mu,Cv=bv;function IE(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let Iv=(()=>{class n{validateStyleProperty(t){return Nm(t)}matchesElement(t,r){return wv(t,r)}containsElement(t,r){return Ev(t,r)}query(t,r,i){return Cv(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],m){return new Jf(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Tv=(()=>{class n{}return n.NOOP=new Iv,n})();const DE="ng-enter",eh="ng-leave",xu="ng-trigger",ep=".ng-trigger",Om="ng-animating",tp=".ng-animating";function Bc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:np(parseFloat(e[1]),e[2])}function np(n,e){return"s"===e?1e3*n:n}function th(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=np(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(s=np(parseFloat(m),h[4]));const v=h[5];v&&(u=v)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(m,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:u}}(n,e,t)}function rp(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ma(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else rp(n,t);return t}function Pm(n,e,t){return t?e+":"+t+";":""}function Av(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Pm(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Pm(0,kE(t),n.style[t]));n.setAttribute("style",e)}function Qo(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=op(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),_v()&&Av(n))}function xl(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=op(t);n.style[r]=""}),_v()&&Av(n))}function nh(n){return Array.isArray(n)?1==n.length?n[0]:gv(n):n}const ip=new RegExp("{{\\s*(.+?)\\s*}}","g");function Fm(n){let e=[];if("string"==typeof n){let t;for(;t=ip.exec(n);)e.push(t[1]);ip.lastIndex=0}return e}function Lm(n,e,t){const r=n.toString(),i=r.replace(ip,(s,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function sp(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const xE=/-+([a-z0-9])/g;function op(n){return n.replace(xE,(...e)=>e[1].toUpperCase())}function kE(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function RE(n,e){return 0===n||0===e}function Mv(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],u=[];if(r.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(m){h[m]=Vm(n,m)})}}return e}function hs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Vm(n,e){return window.getComputedStyle(n)[e]}function NE(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const m=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],u=r[3];e.push(xv(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(xv(u,i))}(r,t,e)):t.push(n),t}const ap=new Set(["true","1"]),lp=new Set(["false","0"]);function xv(n,e){const t=ap.has(n)||lp.has(n),r=ap.has(e)||lp.has(e);return(i,s)=>{let u="*"==n||n==i,h="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?ap.has(n):lp.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?ap.has(e):lp.has(e)),u&&h}}const FE=new RegExp("s*:selfs*,?","g");function LE(n,e,t){return new dA(n).build(e,t)}class dA{constructor(e){this._driver=e}build(e,t){const r=new kr(t);return this._resetContextStyleTimingState(r),hs(this,nh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,v=m.name;v.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,s.push(this.visitState(m,t))}),m.name=v}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};if(r.styles.forEach(h=>{if(Bm(h)){const m=h;Object.keys(m).forEach(v=>{Fm(m[v]).forEach(C=>{u.hasOwnProperty(C)||s.add(C)})})}}),s.size){const h=sp(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=hs(this,nh(e.animation),t);return{type:1,matchers:NE(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ku(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>hs(this,r,t)),options:ku(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=hs(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:ku(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Rv(th(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Rv(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||th(r,e),Rv(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Xd({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const v={};r.easing&&(v.easing=r.easing),u=Xd(v)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Sa?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,s=null;return r.forEach(u=>{if(Bm(u)){const h=u,m=h.easing;if(m&&(s=m,delete h.easing),!i)for(let v in h)if(h[v].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const m=t.collectedStyles[t.currentQuerySelector],v=m[h];let C=!0;v&&(s!=i&&s>=v.startTime&&i<=v.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${v.startTime}ms" and "${v.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),C=!1),s=v.startTime),C&&(m[h]={startTime:s,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=Fm(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const u=[];let h=!1,m=!1,v=0;const C=e.steps.map(Je=>{const nt=this._makeStyleAst(Je,t);let ct=null!=nt.offset?nt.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Bm(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Bm(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(nt.styles),rt=0;return null!=ct&&(s++,rt=nt.offset=ct),m=m||rt<0||rt>1,h=h||rt<v,v=rt,u.push(rt),nt});m&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let R=0;s>0&&s<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(R=1/(D-1));const L=D-1,U=t.currentTime,X=t.currentAnimateTimings,me=X.duration;return C.forEach((Je,nt)=>{const ct=R>0?nt==L?1:R*nt:u[nt],rt=ct*me;t.currentTime=U+X.delay+rt,X.duration=rt,this._validateStyleAst(Je,t),Je.offset=ct,r.styles.push(Je)}),r}visitReference(e,t){return{type:8,animation:hs(this,nh(e.animation),t),options:ku(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ku(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ku(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(FE,"")),n=n.replace(/@\*/g,ep).replace(/@\w+/g,t=>ep+"-"+t.substr(1)).replace(/:animating/g,tp),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,_o(t.collectedStyles,t.currentQuerySelector,{});const h=hs(this,nh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:ku(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:th(e.timings,t.errors,!0);return{type:12,animation:hs(this,nh(e.animation),t),timings:r,options:null}}}class kr{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Bm(n){return!Array.isArray(n)&&"object"==typeof n}function ku(n){return n?(n=rp(n)).params&&(n.params=function(n){return n?rp(n):null}(n.params)):n={},n}function Rv(n,e,t){return{duration:n,delay:e,easing:t}}function Um(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class up{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const gA=new RegExp(":enter","g"),mA=new RegExp(":leave","g");function jm(n,e,t,r,i,s={},u={},h,m,v=[]){return(new v1).buildKeyframes(n,e,t,r,i,s,u,h,m,v)}class v1{buildKeyframes(e,t,r,i,s,u,h,m,v,C=[]){v=v||new up;const D=new cp(e,t,v,i,s,C,[]);D.options=m,D.currentTimeline.setStyles([u],null,D.errors,m),hs(this,r,D);const R=D.timelines.filter(L=>L.containsAnimation());if(R.length&&Object.keys(h).length){const L=R[R.length-1];L.allowOnlyTimelineStyles()||L.setStyles([h],null,D.errors,m)}return R.length?R.map(L=>L.buildKeyframes()):[Um(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?Bc(r.duration):null,h=null!=r.delay?Bc(r.delay):null;return 0!==u&&e.forEach(m=>{const v=t.appendInstructionToTimeline(m,u,h);s=Math.max(s,v.duration+v.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),hs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=sh);const u=Bc(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>hs(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Bc(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),hs(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return th(t.params?Lm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*s),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Bc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sh);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((v,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,v);s&&D.delayNextStep(s),v===t.element&&(m=D.currentTimeline),hs(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const D=C.currentTime;hs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const sh={};class cp{constructor(e,t,r,i,s,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Os(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Bc(r.duration)),null!=r.delay&&(i.delay=Bc(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=Lm(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new cp(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=sh,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new _A(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(gA,"."+this._enterClassName)).replace(mA,"."+this._leaveClassName);let v=this._driver.query(this.element,e,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),h.push(...v)}return!s&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class Os{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Os(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Sa,this._currentKeyframe[t]=Sa}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},u=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Sa})):Ma(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const m=Lm(u[h],s,r);this._pendingStyles[h]=m,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Sa),this._updateStyle(h,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const v=Ma(h,!0);Object.keys(v).forEach(C=>{const D=v[C];"!"==D?e.add(C):D==Sa&&t.add(C)}),r||(v.offset=m/this.duration),i.push(v)});const s=e.size?sp(e.values()):[],u=t.size?sp(t.values()):[];if(r){const h=i[0],m=rp(h);h.offset=0,m.offset=1,i=[h,m]}return Um(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class _A extends Os{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,m=Ma(e[0],!1);m.offset=0,s.push(m);const v=Ma(e[0],!1);v.offset=HE(h),s.push(v);const C=e.length-1;for(let D=1;D<=C;D++){let R=Ma(e[D],!1);R.offset=HE((t+R.offset*r)/u),s.push(R)}r=u,t=0,i="",e=s}return Um(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function HE(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Ps{}class GE extends Ps{normalizePropertyName(e,t){return op(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(vA[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+s}}const vA=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function $E(n,e,t,r,i,s,u,h,m,v,C,D,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:v,postStyleProps:C,totalTime:D,errors:R}}const Nv={};class Hm{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):u}build(e,t,r,i,s,u,h,m,v,C){const D=[],R=this.ast.options&&this.ast.options.params||Nv,U=this.buildStyles(r,h&&h.params||Nv,D),X=m&&m.params||Nv,me=this.buildStyles(i,X,D),Je=new Set,nt=new Map,ct=new Map,rt="void"===i,Pt={params:tt(tt({},R),X)},Gt=C?[]:jm(e,t,this.ast.animation,s,u,U,me,Pt,v,D);let bn=0;if(Gt.forEach(td=>{bn=Math.max(td.duration+td.delay,bn)}),D.length)return $E(t,this._triggerName,r,i,rt,U,me,[],[],nt,ct,bn,D);Gt.forEach(td=>{const nd=td.element,_G=_o(nt,nd,{});td.preStyleProps.forEach(Ag=>_G[Ag]=!0);const b0=_o(ct,nd,{});td.postStyleProps.forEach(Ag=>b0[Ag]=!0),nd!==t&&Je.add(nd)});const Ws=sp(Je.values());return $E(t,this._triggerName,r,i,rt,U,me,Gt,Ws,nt,ct,bn)}}class wA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=rp(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!=u&&(i[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let m=u[h];m.length>1&&(m=Lm(m,i,t));const v=this.normalizer.normalizePropertyName(h,t);m=this.normalizer.normalizeStyleValue(h,v,m,t),r[v]=m})}}),r}}class EA{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new wA(i.style,i.options&&i.options.params||{},r)}),Ov(this.states,"true","1"),Ov(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Hm(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new Hm(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Ov(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Gm=new up;class CA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=LE(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=uA(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let u;const h=new Map;if(s?(u=jm(this._driver,t,s,DE,eh,{},{},r,Gm,i),u.forEach(C=>{const D=_o(h,C.element,{});C.postStyleProps.forEach(R=>D[R]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((C,D)=>{Object.keys(C).forEach(R=>{C[R]=this._driver.computeStyle(D,R,Sa)})});const v=Vc(u.map(C=>{const D=h.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=v,v.onDestroy(()=>this.destroy(e)),this.players.push(v),v}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=Rm(t,"","","");return vE(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Pv="ng-animate-queued",$m="ng-animate-disabled",hp=".ng-animate-disabled",ZE=[],Lv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},YE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fs="__ng_removed";class zm{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const s=rp(e);delete s.value,this.options=s}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const oh="void",Vv=new zm(oh);class IA{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,yo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const s=_o(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=_o(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(yo(e,xu),yo(e,xu+"-"+t),h[t]=Vv),()=>{this._engine.afterFlush(()=>{const m=s.indexOf(u);m>=0&&s.splice(m,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new Bv(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(yo(e,xu),yo(e,xu+"-"+t),this._engine.statesByElement.set(e,h={}));let m=h[t];const v=new zm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),h[t]=v,m||(m=Vv),v.value!==oh&&m.value===v.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(m.params,v.params)){const X=[],me=s.matchStyles(m.value,m.params,X),Je=s.matchStyles(v.value,v.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{xl(e,me),Qo(e,Je)})}return}const R=_o(this._engine.playersByElement,e,[]);R.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let L=s.matchTransition(m.value,v.value,e,v.params),U=!1;if(!L){if(!i)return;L=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:m,toState:v,player:u,isFallbackTransition:U}),U||(yo(e,Pv),u.onStart(()=>{ah(e,Pv)})),u.onDone(()=>{let X=this.players.indexOf(u);X>=0&&this.players.splice(X,1);const me=this._engine.playersByElement.get(e);if(me){let Je=me.indexOf(u);Je>=0&&me.splice(Je,1)}}),this.players.push(u),R.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ep,!0);r.forEach(i=>{if(i[Fs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e);if(s){const u=[];if(Object.keys(s).forEach(h=>{if(this._triggers[h]){const m=this.trigger(e,h,oh,i);m&&u.push(m)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Vc(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const m=this._triggers[u].fallbackTransition,v=r[u]||Vv,C=new zm(oh),D=new Bv(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:v,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Fs];(!s||s===Lv)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){yo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=Rm(s,r.triggerName,r.fromState.value,r.toState.value);m._data=e,vE(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class TA{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new IA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const u=r[i[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(qm(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qm(t))return;const s=t[Fs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),yo(e,$m)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ah(e,$m))}removeNode(e,t,r,i){if(qm(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[Fs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,s){return qm(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,ep,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,tp,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Fs];if(t&&t.setForRemoval){if(e[Fs]=Lv,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,hp)&&this.markElementAsDisabled(e,!1),this.driver.query(e,hp,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)yo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Vc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new up,i=[],s=new Map,u=[],h=new Map,m=new Map,v=new Map,C=new Set;this.disabledNodes.forEach(ft=>{C.add(ft);const Tt=this.driver.query(ft,".ng-animate-queued",!0);for(let Bt=0;Bt<Tt.length;Bt++)C.add(Tt[Bt])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=XE(R,this.collectedEnterElements),U=new Map;let X=0;L.forEach((ft,Tt)=>{const Bt=DE+X++;U.set(Tt,Bt),ft.forEach(hn=>yo(hn,Bt))});const me=[],Je=new Set,nt=new Set;for(let ft=0;ft<this.collectedLeaveElements.length;ft++){const Tt=this.collectedLeaveElements[ft],Bt=Tt[Fs];Bt&&Bt.setForRemoval&&(me.push(Tt),Je.add(Tt),Bt.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(hn=>Je.add(hn)):nt.add(Tt))}const ct=new Map,rt=XE(R,Array.from(Je));rt.forEach((ft,Tt)=>{const Bt=eh+X++;ct.set(Tt,Bt),ft.forEach(hn=>yo(hn,Bt))}),e.push(()=>{L.forEach((ft,Tt)=>{const Bt=U.get(Tt);ft.forEach(hn=>ah(hn,Bt))}),rt.forEach((ft,Tt)=>{const Bt=ct.get(Tt);ft.forEach(hn=>ah(hn,Bt))}),me.forEach(ft=>{this.processLeaveNode(ft)})});const Pt=[],Gt=[];for(let ft=this._namespaceList.length-1;ft>=0;ft--)this._namespaceList[ft].drainQueuedTransitions(t).forEach(Bt=>{const hn=Bt.player,xi=Bt.element;if(Pt.push(hn),this.collectedEnterElements.length){const Ku=xi[Fs];if(Ku&&Ku.setForMove)return void hn.destroy()}const Wu=!D||!this.driver.containsElement(D,xi),ra=ct.get(xi),qh=U.get(xi),Cr=this._buildInstruction(Bt,r,qh,ra,Wu);if(Cr.errors&&Cr.errors.length)Gt.push(Cr);else{if(Wu)return hn.onStart(()=>xl(xi,Cr.fromStyles)),hn.onDestroy(()=>Qo(xi,Cr.toStyles)),void i.push(hn);if(Bt.isFallbackTransition)return hn.onStart(()=>xl(xi,Cr.fromStyles)),hn.onDestroy(()=>Qo(xi,Cr.toStyles)),void i.push(hn);Cr.timelines.forEach(Ku=>Ku.stretchStartingKeyframe=!0),r.append(xi,Cr.timelines),u.push({instruction:Cr,player:hn,element:xi}),Cr.queriedElements.forEach(Ku=>_o(h,Ku,[]).push(hn)),Cr.preStyleProps.forEach((Ku,w0)=>{const tS=Object.keys(Ku);if(tS.length){let Mg=m.get(w0);Mg||m.set(w0,Mg=new Set),tS.forEach(hP=>Mg.add(hP))}}),Cr.postStyleProps.forEach((Ku,w0)=>{const tS=Object.keys(Ku);let Mg=v.get(w0);Mg||v.set(w0,Mg=new Set),tS.forEach(hP=>Mg.add(hP))})}});if(Gt.length){const ft=[];Gt.forEach(Tt=>{ft.push(`@${Tt.triggerName} has failed due to:\n`),Tt.errors.forEach(Bt=>ft.push(`- ${Bt}\n`))}),Pt.forEach(Tt=>Tt.destroy()),this.reportError(ft)}const bn=new Map,Ws=new Map;u.forEach(ft=>{const Tt=ft.element;r.has(Tt)&&(Ws.set(Tt,Tt),this._beforeAnimationBuild(ft.player.namespaceId,ft.instruction,bn))}),i.forEach(ft=>{const Tt=ft.element;this._getPreviousPlayers(Tt,!1,ft.namespaceId,ft.triggerName,null).forEach(hn=>{_o(bn,Tt,[]).push(hn),hn.destroy()})});const td=me.filter(ft=>Uv(ft,m,v)),nd=new Map;JE(nd,this.driver,nt,v,Sa).forEach(ft=>{Uv(ft,m,v)&&td.push(ft)});const b0=new Map;L.forEach((ft,Tt)=>{JE(b0,this.driver,new Set(ft),m,"!")}),td.forEach(ft=>{const Tt=nd.get(ft),Bt=b0.get(ft);nd.set(ft,tt(tt({},Tt),Bt))});const Ag=[],yG=[],vG={};u.forEach(ft=>{const{element:Tt,player:Bt,instruction:hn}=ft;if(r.has(Tt)){if(C.has(Tt))return Bt.onDestroy(()=>Qo(Tt,hn.toStyles)),Bt.disabled=!0,Bt.overrideTotalTime(hn.totalTime),void i.push(Bt);let xi=vG;if(Ws.size>1){let ra=Tt;const qh=[];for(;ra=ra.parentNode;){const Cr=Ws.get(ra);if(Cr){xi=Cr;break}qh.push(ra)}qh.forEach(Cr=>Ws.set(Cr,xi))}const Wu=this._buildAnimation(Bt.namespaceId,hn,bn,s,b0,nd);if(Bt.setRealPlayer(Wu),xi===vG)Ag.push(Bt);else{const ra=this.playersByElement.get(xi);ra&&ra.length&&(Bt.parentPlayer=Vc(ra)),i.push(Bt)}}else xl(Tt,hn.fromStyles),Bt.onDestroy(()=>Qo(Tt,hn.toStyles)),yG.push(Bt),C.has(Tt)&&i.push(Bt)}),yG.forEach(ft=>{const Tt=s.get(ft.element);if(Tt&&Tt.length){const Bt=Vc(Tt);ft.setRealPlayer(Bt)}}),i.forEach(ft=>{ft.parentPlayer?ft.syncPlayerEvents(ft.parentPlayer):ft.destroy()});for(let ft=0;ft<me.length;ft++){const Tt=me[ft],Bt=Tt[Fs];if(ah(Tt,eh),Bt&&Bt.hasAnimation)continue;let hn=[];if(h.size){let Wu=h.get(Tt);Wu&&Wu.length&&hn.push(...Wu);let ra=this.driver.query(Tt,tp,!0);for(let qh=0;qh<ra.length;qh++){let Cr=h.get(ra[qh]);Cr&&Cr.length&&hn.push(...Cr)}}const xi=hn.filter(Wu=>!Wu.destroyed);xi.length?MA(this,Tt,xi):this.processLeaveNode(Tt)}return me.length=0,Ag.forEach(ft=>{this.players.push(ft),ft.onDone(()=>{ft.destroy();const Tt=this.players.indexOf(ft);this.players.splice(Tt,1)}),ft.play()}),Ag}elementContainsData(e,t){let r=!1;const i=t[Fs];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!s||s==oh;h.forEach(v=>{v.queued||!m&&v.triggerName!=i||u.push(v)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const v=m.element,C=v!==s,D=_o(r,v,[]);this._getPreviousPlayers(v,C,u,h,t.toState).forEach(L=>{const U=L.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),L.destroy(),D.push(L)})}xl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,m=t.element,v=[],C=new Set,D=new Set,R=t.timelines.map(U=>{const X=U.element;C.add(X);const me=X[Fs];if(me&&me.removedBeforeQueried)return new Jf(U.duration,U.delay);const Je=X!==m,nt=function(n){const e=[];return eC(n,e),e}((r.get(X)||ZE).map(bn=>bn.getRealPlayer())).filter(bn=>!!bn.element&&bn.element===X),ct=s.get(X),rt=u.get(X),Pt=uA(0,this._normalizer,0,U.keyframes,ct,rt),Gt=this._buildPlayer(U,Pt,nt);if(U.subTimeline&&i&&D.add(X),Je){const bn=new Bv(e,h,X);bn.setRealPlayer(Gt),v.push(bn)}return Gt});v.forEach(U=>{_o(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,U.element,U))}),C.forEach(U=>yo(U,Om));const L=Vc(R);return L.onDestroy(()=>{C.forEach(U=>ah(U,Om)),Qo(m,t.toStyles)}),D.forEach(U=>{_o(i,U,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Jf(e.duration,e.delay)}}class Bv{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Jf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>vE(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_o(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qm(n){return n&&1===n.nodeType}function QE(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function JE(n,e,t,r,i){const s=[];t.forEach(m=>s.push(QE(m)));const u=[];r.forEach((m,v)=>{const C={};m.forEach(D=>{const R=C[D]=e.computeStyle(v,D,i);(!R||0==R.length)&&(v[Fs]=YE,u.push(v))}),n.set(v,C)});let h=0;return t.forEach(m=>QE(m,s[h++])),u}function XE(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(h){if(!h)return 1;let m=s.get(h);if(m)return m;const v=h.parentNode;return m=t.has(v)?v:i.has(v)?1:u(v),s.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}const Wm="$$classes";function yo(n,e){if(n.classList)n.classList.add(e);else{let t=n[Wm];t||(t=n[Wm]={}),t[e]=!0}}function ah(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Wm];t&&delete t[e]}}function MA(n,e,t){Vc(t).onDone(()=>n.processLeaveNode(e))}function eC(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof yE?eC(r.players,e):e.push(r)}}function Uv(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class fp{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new TA(e,t,r),this._timelineEngine=new CA(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const m=[],v=LE(this._driver,s,m);if(m.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);h=function(n,e,t){return new EA(n,e,t)}(i,v,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=bE(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=bE(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function jv(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Km(e[0]),e.length>1&&(r=Km(e[e.length-1]))):e&&(t=Km(e)),t||r?new nC(n,t,r):null}let nC=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Qo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qo(this._element,this._initialStyles),this._endStyles&&(Qo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(xl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xl(this._element,this._endStyles),this._endStyles=null),Qo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Km(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];rC(i)&&(e=e||{},e[i]=n[i])}return e}function rC(n){return"display"===n||"position"===n}const Hv="animation",Zm="animationend";class Uc{constructor(e,t,r,i,s,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function(n,e){const t=Ym(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),gp(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),NA(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){sC(this._element,this._name,"paused")}resume(){sC(this._element,this._name,"running")}setPosition(e){const t=RA(this._element,this._name);this._position=e*this._duration,gp(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),NA(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=Ym(n,"").split(","),i=pp(r,e);i>=0&&(r.splice(i,1),gp(n,"",r.join(",")))}(this._element,this._name))}}function sC(n,e,t){gp(n,"PlayState",t,RA(n,e))}function RA(n,e){const t=Ym(n,"");return t.indexOf(",")>0?pp(t.split(","),e):pp([t],e)}function pp(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function NA(n,e,t){t?n.removeEventListener(Zm,e):n.addEventListener(Zm,e)}function gp(n,e,t,r){const i=Hv+e;if(null!=r){const s=n.style[i];if(s.length){const u=s.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function Ym(n,e){return n.style[Hv+e]||""}class oC{constructor(e,t,r,i,s,u,h,m){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=h,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Uc(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:Vm(this.element,r))})}this.currentSnapshot=e}}class PA extends Jf{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=IE(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class mp{constructor(){this._count=0}validateStyleProperty(e){return Nm(e)}matchesElement(e,t){return wv(e,t)}containsElement(e,t){return Ev(e,t)}query(e,t,r){return Cv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>IE(h));let i=`@keyframes ${t} {\n`,s="";r.forEach(h=>{s=" ";const m=parseFloat(h.offset);i+=`${s}${100*m}% {\n`,s+=" ",Object.keys(h).forEach(v=>{const C=h[v];switch(v){case"offset":return;case"easing":return void(C&&(i+=`${s}animation-timing-function: ${C};\n`));default:return void(i+=`${s}${v}: ${C};\n`)}}),i+=`${s}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,s,u=[],h){const m=u.filter(me=>me instanceof oC),v={};RE(r,i)&&m.forEach(me=>{let Je=me.currentSnapshot;Object.keys(Je).forEach(nt=>v[nt]=Je[nt])});const C=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=Mv(e,t,v));if(0==r)return new PA(e,C);const D="gen_css_kf_"+this._count++,R=this.buildKeyframeElement(e,D,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(R);const U=jv(e,t),X=new oC(e,t,D,r,i,s,C,U);return X.onDestroy(()=>{var n;(n=R).parentNode.removeChild(n)}),X}}class lC{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Vm(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uC{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(zv().toString()),this._cssKeyframesDriver=new mp}validateStyleProperty(e){return Nm(e)}matchesElement(e,t){return wv(e,t)}containsElement(e,t){return Ev(e,t)}query(e,t,r){return Cv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(C.easing=s);const D={},R=u.filter(U=>U instanceof lC);RE(r,i)&&R.forEach(U=>{let X=U.currentSnapshot;Object.keys(X).forEach(me=>D[me]=X[me])});const L=jv(e,t=Mv(e,t=t.map(U=>Ma(U,!1)),D));return new lC(e,t,C,L)}}function zv(){return km()&&Element.prototype.animate||{}}let dC=(()=>{class n extends fv{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?gv(t):t;return hC(this._renderer,null,r,"register",[i]),new FA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class FA extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new LA(this._id,e,t||{},this._renderer)}}class LA{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return hC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function hC(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const fC="@.disabled";let VA=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new pC("",s,this.engine),this._rendererCache.set(s,C)),C}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(u,h,t,C.name,C)};return r.data.animation.forEach(m),new Xm(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(fp),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class pC{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==fC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Xm extends pC{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==fC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let _C=(()=>{class n extends fp{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(Tv),c.LFG(Ps))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=new c.OlP("AnimationModuleType"),yC=[{provide:fv,useClass:dC},{provide:Ps,useFactory:function(){return new GE}},{provide:fp,useClass:_C},{provide:c.FYo,useFactory:function(n,e,t){return new VA(n,e,t)},deps:[Vi,fp,c.R0b]}],vC=[{provide:Tv,useFactory:function(){return"function"==typeof zv()?new uC:new mp}},{provide:Nu,useValue:"BrowserAnimations"},...yC],bC=[{provide:Tv,useClass:Iv},{provide:Nu,useValue:"NoopAnimations"},...yC];let wC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?bC:vC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:vC,imports:[ua]}),n})();const e_=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Gr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!("undefined"!=typeof __karma__&&__karma__||"undefined"!=typeof jasmine&&jasmine||"undefined"!=typeof jest&&jest||"undefined"!=typeof Mocha&&Mocha)&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(gE),c.LFG(e_,8),c.LFG(se))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jy],Jy]}),n})();function CC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Gn(e)}}}function uh(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function IC(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Gn(e)}}}function TC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Hr(t):this.defaultTabIndex}}}function DC(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Rt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let n_=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QA{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const r_={enterDuration:225,exitDuration:150},i_=mm({passive:!0}),AC=["mousedown","touchstart"],MC=["mouseup","mouseleave","touchend","touchcancel"];class xC{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Dl(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=tt(tt({},r_),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,m=t-i.top,v=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-u+"px",C.style.top=m-u+"px",C.style.height=2*u+"px",C.style.width=2*u+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(C),window.getComputedStyle(C).getPropertyValue("opacity"),C.style.transform="scale(1)";const D=new QA(this,C,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const R=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!R||!this._isPointerDown)&&D.fadeOut()},v),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=tt(tt({},r_),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Dl(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(AC))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(MC),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=pE(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Dm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,i_)})})}_removeTriggerEvents(){this._triggerElement&&(AC.forEach(e=>{this._triggerElement.removeEventListener(e,this,i_)}),this._pointerUpEventsRegistered&&MC.forEach(e=>{this._triggerElement.removeEventListener(e,this,i_)}))}}const kC=new c.OlP("mat-ripple-global-options");let RC=(()=>{class n{constructor(t,r,i,s,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new xC(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:tt(tt(tt({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,tt(tt({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,tt(tt({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(ds),c.Y36(kC,8),c.Y36(Nu,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Gr],Gr]}),n})();var vo=O(3719);const LC=TC(CC(Sl));let VC=(()=>{class n extends LC{constructor(t,r,i){super(t,r),this.tabIndex=Number(i)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Ia),c.$8M("tabindex"))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[c._Bn([{provide:Sl,useExisting:n}]),c.qOj]}),n})(),qv=(()=>{class n extends Wd{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[c._Bn([{provide:Wd,useExisting:n}]),c.qOj]}),n})(),Wv=(()=>{class n extends Vf{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[c._Bn([{provide:Vf,useExisting:n}]),c.qOj]}),n})(),BC=(()=>{class n{constructor(t,r){this.viewContainer=t,this._node=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(cs,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[c._Bn([{provide:qd,useExisting:n}])]}),n})(),UC=(()=>{class n extends Ia{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-tree"]],viewQuery:function(t,r){if(1&t&&c.Gf(BC,7),2&t){let i;c.iGM(i=c.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[c._Bn([{provide:Ia,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,r){1&t&&c.GkF(0,0)},directives:[BC],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),ch=(()=>{class n extends O0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[c._Bn([{provide:O0,useExisting:n}]),c.qOj]}),n})(),dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[fS,Gr],Gr]}),n})();class wp{constructor(e,t,r,i){this.transformFunction=e,this.getLevel=t,this.isExpandable=r,this.getChildren=i}_flattenNode(e,t,r,i){const s=this.transformFunction(e,t);if(r.push(s),this.isExpandable(s)){const u=this.getChildren(e);u&&(Array.isArray(u)?this._flattenChildren(u,t,r,i):u.pipe((0,Ft.q)(1)).subscribe(h=>{this._flattenChildren(h,t,r,i)}))}return r}_flattenChildren(e,t,r,i){e.forEach((s,u)=>{let h=i.slice();h.push(u!=e.length-1),this._flattenNode(s,t+1,r,h)})}flattenNodes(e){let t=[];return e.forEach(r=>this._flattenNode(r,0,t,[])),t}expandFlattenedNodes(e,t){let r=[],i=[];return i[0]=!0,e.forEach(s=>{let u=!0;for(let h=0;h<=this.getLevel(s);h++)u=u&&i[h];u&&r.push(s),this.isExpandable(s)&&(i[this.getLevel(s)+1]=t.isExpanded(s))}),r}}class aM extends class{}{constructor(e,t,r){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new hr([]),this._expandedData=new hr([]),this._data=new hr([]),r&&(this.data=r)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){return(0,vo.T)(e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,Ze.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function Kv(n,e){const t=(0,si.m)(n)?n:()=>n,r=i=>i.error(t());return new Pn.y(e?i=>e.schedule(r,0,i):r)}var lM=O(1537);const uM=["addListener","removeListener"],cM=["addEventListener","removeEventListener"],dM=["on","off"];function kl(n,e,t,r){if((0,si.m)(t)&&(r=t,t=void 0),r)return kl(n,e,t).pipe(Bo(r));const[i,s]=function(n){return(0,si.m)(n.addEventListener)&&(0,si.m)(n.removeEventListener)}(n)?cM.map(u=>h=>n[u](e,h,t)):function(n){return(0,si.m)(n.addListener)&&(0,si.m)(n.removeListener)}(n)?uM.map(Zv(n,e)):function(n){return(0,si.m)(n.on)&&(0,si.m)(n.off)}(n)?dM.map(Zv(n,e)):[];if(!i&&(0,lM.z)(n))return(0,Cn.z)(u=>kl(u,e,t))((0,Lr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Pn.y(u=>{const h=(...m)=>u.next(1<m.length?m:m[0]);return i(h),()=>s(h)})}function Zv(n,e){return t=>r=>n[t](e,r)}const Ou=new Pn.y(Pf.Z),fM={connector:()=>new Rt.x};function HC(n,e=fM){const{connector:t}=e;return(0,jn.e)((r,i)=>{const s=t();(0,mn.D)(n(function(n){return new Pn.y(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function GC(n){return(0,Ze.U)(()=>n)}function $C(n,e){return e?t=>fa(e.pipe((0,Ft.q)(1),(0,jn.e)((n,e)=>{n.subscribe(new _n.Q(e,Pf.Z))})),t.pipe($C(n))):(0,Cn.z)((t,r)=>n(t,r).pipe((0,Ft.q)(1),GC(t)))}var mM=O(7398);function o_(n=0,e,t=Au.P){let r=-1;return null!=e&&((0,mM.K)(e)?t=e:r=e),new Pn.y(i=>{let s=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const a_="Service workers are disabled or not supported by this browser";class l_{constructor(e){if(this.serviceWorker=e,e){const r=kl(e,"controllerchange").pipe((0,Ze.U)(()=>e.controller)),s=fa(ii(()=>qe(e.controller)),r);this.worker=s.pipe(Kt(C=>!!C)),this.registration=this.worker.pipe(Fn(()=>e.getRegistration()));const v=kl(e,"message").pipe((0,Ze.U)(C=>C.data)).pipe(Kt(C=>C&&C.type)).pipe(function(n){return n?e=>HC(n)(e):e=>function(n,e){const t=(0,si.m)(n)?n:()=>n;return(0,si.m)(e)?HC(e,{connector:t}):r=>new As(r,t)}(new Rt.x)(e)}());v.connect(),this.events=v}else this.worker=this.events=this.registration=(a_,ii(()=>Kv(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe((0,Ft.q)(1),(0,rr.b)(r=>{r.postMessage(tt({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Kt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Ft.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Kt(t=>t.nonce===e),(0,Ft.q)(1),(0,Ze.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let H1=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Rt.x,!t.isEnabled)return this.messages=Ou,this.notificationClicks=Ou,void(this.subscription=Ou);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ze.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ze.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,Ze.U)(i=>i.pushManager));const r=this.pushManager.pipe(Fn(i=>i.getSubscription()));this.subscription=(0,vo.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(a_));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return r.applicationServerKey=s,this.pushManager.pipe(Fn(u=>u.subscribe(r)),(0,Ft.q)(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Ft.q)(1),Fn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(a_))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(l_))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Jv=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Ou,this.available=Ou,this.activated=Ou,void(this.unrecoverable=Ou);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Kt(r=>"VERSION_READY"===r.type),(0,Ze.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(a_));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(a_));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(l_))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class qC{}const Xv=new c.OlP("NGSW_REGISTER_SCRIPT");function eb(n,e,t,r){return()=>{if(!Za(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[h,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":s=qe(null);break;case"registerWithDelay":s=WC(+m[0]||0);break;case"registerWhenStable":s=m[0]?(0,vo.T)(KC(n),WC(+m[0])):KC(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(c.R0b).runOutsideAngular(()=>s.pipe((0,Ft.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function WC(n){return qe(null).pipe(function(n,e=Au.z){const t=o_(n,e);return $C(()=>t)}(n))}function KC(n){return n.get(c.z2F).isStable.pipe(Kt(t=>t))}function _M(n,e){return new l_(Za(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let yM=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:Xv,useValue:t},{provide:qC,useValue:r},{provide:l_,useFactory:_M,deps:[qC,c.Lbi]},{provide:c.ip1,useFactory:eb,deps:[c.zs3,Xv,qC,c.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[H1,Jv]}),n})();var ZC=O(2869);const Cp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Cp;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Dr.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Cp;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Cp;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var YC=O(8843);new class extends YC.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends ZC.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Cp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(Cp.cancelAnimationFrame(t),e._scheduled=void 0)}});let c_,QC=1;const Ip={};function tb(n){return n in Ip&&(delete Ip[n],!0)}const JC={setImmediate(n){const e=QC++;return Ip[e]=!0,c_||(c_=Promise.resolve()),c_.then(()=>tb(e)&&n()),e},clearImmediate(n){tb(n)}},{setImmediate:EM,clearImmediate:CM}=JC,d_={setImmediate(...n){const{delegate:e}=d_;return((null==e?void 0:e.setImmediate)||EM)(...n)},clearImmediate(n){const{delegate:e}=d_;return((null==e?void 0:e.clearImmediate)||CM)(n)},delegate:void 0};new class extends YC.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends ZC.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=d_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(d_.clearImmediate(t),e._scheduled=void 0)}});function f_(n,e=Au.P){return function(n){return(0,jn.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const v=i;i=null,t.next(v)}u&&t.complete()},m=()=>{s=null,u&&t.complete()};e.subscribe(new _n.Q(t,v=>{r=!0,i=v,s||(0,Lr.Xf)(n()).subscribe(s=new _n.Q(t,h,m))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>o_(n,e))}let Tp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Rt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Pn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(f_(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Kt(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Dl(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>kl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(ds),c.LFG(se,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ph=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new Rt.x,this._elementScrolled=new Pn.y(u=>this.ngZone.runOutsideAngular(()=>kl(this.elementRef.nativeElement,"scroll").pipe(pr(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=_m()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==_m()?t.left=t.right:1==_m()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;!function(){if(null==Yd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Yd=!1,Yd;if("scrollBehavior"in document.documentElement.style)Yd=!0;else{const n=Element.prototype.scrollTo;Yd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Yd}()?(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left)):r.scrollTo(t)}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==t?t=u?i:r:"end"==t&&(t=u?r:i),u&&2==_m()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:u&&1==_m()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Tp),c.Y36(c.R0b),c.Y36(Ff,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),XC=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Rt.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(f_(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ds),c.LFG(c.R0b),c.LFG(se,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const g_=["*"],rb=["content"];function nI(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",2),c.NdJ("click",function(){return c.CHM(t),c.oxw()._onBackdropClicked()}),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function ib(n,e){1&n&&(c.TgZ(0,"mat-drawer-content"),c.Hsn(1,2),c.qZA())}const sb=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],NM=["mat-drawer","mat-drawer-content","*"],iI={transformDrawer:pv("transform",[xm("open, open-instant",Xd({transform:"none",visibility:"visible"})),xm("void",Xd({"box-shadow":"none",visibility:"hidden"})),mv("void => open-instant",Mm("0ms")),mv("void <=> open, open-instant => void",Mm("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},sI=new c.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ob=new c.OlP("MAT_DRAWER_CONTAINER");let m_=(()=>{class n extends ph{constructor(t,r,i,s,u){super(i,s,u),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO),c.Y36((0,c.Gpc)(()=>oI)),c.Y36(c.SBq),c.Y36(Tp),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&c.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[c._Bn([{provide:ph,useExisting:n}]),c.qOj],ngContentSelectors:g_,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),ab=(()=>{class n{constructor(t,r,i,s,u,h,m,v){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=u,this._interactivityChecker=h,this._doc=m,this._container=v,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Rt.x,this._animationEnd=new Rt.x,this._animationState="void",this.openedChange=new c.vpe(!0),this._openedStream=this.openedChange.pipe(Kt(C=>C),(0,Ze.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Kt(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),GC(void 0)),this._closedStream=this.openedChange.pipe(Kt(C=>!C),(0,Ze.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Kt(C=>C.fromState!==C.toState&&"void"===C.toState),GC(void 0)),this._destroyed=new Rt.x,this.onPositionChanged=new c.vpe,this._modeChanged=new Rt.x,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{kl(this._elementRef.nativeElement,"keydown").pipe(Kt(C=>27===C.keyCode&&!this.disableClose&&!zf(C)),pr(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(Cm((C,D)=>C.fromState===D.fromState&&C.toState===D.toState)).subscribe(C=>{const{fromState:D,toState:R}=C;(0===R.indexOf("open")&&"void"===D||"void"===R&&0===D.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Gn(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Gn(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Gn(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null==(t=this._anchor)||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe((0,Ft.q)(1)).subscribe(u=>s(u?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(iA),c.Y36(Pc),c.Y36(ds),c.Y36(c.R0b),c.Y36(JS),c.Y36(se,8),c.Y36(ob,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&c.Gf(rb,5),2&t){let i;c.iGM(i=c.CRH())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&c.WFA("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(c.uIk("align",null),c.d8E("@transform",r._animationState),c.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:g_,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0,1),c.Hsn(2),c.qZA())},directives:[ph],encapsulation:2,data:{animation:[iI.transformDrawer]},changeDetection:0}),n})(),oI=(()=>{class n{constructor(t,r,i,s,u,h=!1,m){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=m,this._drawers=new c.n_E,this.backdropClick=new c.vpe,this._destroyed=new Rt.x,this._doCheckSubject=new Rt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Rt.x,t&&t.change.pipe(pr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),u.change().pipe(pr(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Gn(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Gn(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Sr(this._allDrawers),pr(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Sr(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Em(10),pr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Kt(r=>r.fromState!==r.toState),pr(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(pr(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(pr(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Ft.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(pr((0,vo.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ff,8),c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(c.sBO),c.Y36(XC),c.Y36(sI),c.Y36(Nu,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,m_,5),c.Suo(i,ab,5)),2&t){let s;c.iGM(s=c.CRH())&&(r._content=s.first),c.iGM(s=c.CRH())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&c.Gf(m_,5),2&t){let i;c.iGM(i=c.CRH())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[c._Bn([{provide:ob,useExisting:n}])],ngContentSelectors:NM,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(c.F$t(sb),c.YNc(0,nI,1,2,"div",0),c.Hsn(1),c.Hsn(2,1),c.YNc(3,ib,2,0,"mat-drawer-content",1)),2&t&&(c.Q6J("ngIf",r.hasBackdrop),c.xp6(3),c.Q6J("ngIf",!r._content))},directives:[vr,m_],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),gh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Xs,Gr,tI],tI,Gr]}),n})();const VM=["mat-button",""],BM=["*"],UM=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],lb=uh(CC(IC(class{constructor(n){this._elementRef=n}})));let ub=(()=>{class n extends lb{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of UM)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Pc),c.Y36(Nu,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&c.Gf(RC,5),2&t){let i;c.iGM(i=c.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:VM,ngContentSelectors:BM,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1),c._UZ(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[RC],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),HM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tM,Gr],Gr]}),n})();function aI(...n){const e=(0,so.jO)(n),{args:t,keys:r}=su(n),i=new Pn.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let m=u,v=u;for(let C=0;C<u;C++){let D=!1;(0,Lr.Xf)(t[C]).subscribe(new _n.Q(s,R=>{D||(D=!0,v--),h[C]=R},()=>m--,void 0,()=>{(!m||!D)&&(v||s.next(r?ou(r,h):h),s.complete())}))}});return e?i.pipe(Bo(e)):i}var Sp=O(3174);class lI{}class Jo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Jo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Jo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===s.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class cb{encodeKey(e){return db(e)}encodeValue(e){return db(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const uI=/%(\d[a-f0-9])/gi,$M={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function db(n){return encodeURIComponent(n).replace(uI,(e,t)=>{var r;return null!=(r=$M[t])?r:e})}function Ap(n){return`${n}`}class Nl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],m=t.get(u)||[];m.push(h),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Nl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ap(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Ap(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class hb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function cI(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function dI(n){return"undefined"!=typeof Blob&&n instanceof Blob}function pb(n){return"undefined"!=typeof FormData&&n instanceof FormData}class mh{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Jo),this.context||(this.context=new hb),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new Nl,this.urlWithParams=t}serializeBody(){return null===this.body?null:cI(this.body)||dI(this.body)||pb(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Nl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pb(this.body)?null:dI(this.body)?this.body.type||null:cI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var D;const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const C=null!=(D=e.context)?D:this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((R,L)=>R.set(L,e.setHeaders[L]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((R,L)=>R.set(L,e.setParams[L]),v)),new mh(t,r,s,{params:v,headers:m,context:C,reportProgress:h,responseType:i,withCredentials:u})}}var ui=(()=>((ui=ui||{})[ui.Sent=0]="Sent",ui[ui.UploadProgress=1]="UploadProgress",ui[ui.ResponseHeader=2]="ResponseHeader",ui[ui.DownloadProgress=3]="DownloadProgress",ui[ui.Response=4]="Response",ui[ui.User=5]="User",ui))();class mb extends class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Jo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ui.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new mb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function __(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let pI=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof mh)s=t;else{let m,v;m=i.headers instanceof Jo?i.headers:new Jo(i.headers),i.params&&(v=i.params instanceof Nl?i.params:new Nl({fromObject:i.params})),s=new mh(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=qe(s).pipe(pa(m=>this.handler.handle(m)));if(t instanceof mh||"events"===i.observe)return u;const h=u.pipe(Kt(m=>m instanceof mb));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,Ze.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,Ze.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,Ze.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,Ze.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Nl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,__(i,r))}post(t,r,i={}){return this.request("POST",t,__(i,r))}put(t,r,i={}){return this.request("PUT",t,__(i,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(lI))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const yI=["*"];let xp;function _h(n){var e;return(null==(e=function(){if(void 0===xp&&(xp=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(xp=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return xp}())?void 0:e.createHTML(n))||n}function kp(n){return Error(`Unable to find icon with the name "${n}"`)}function QM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function JM(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class yh{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let y_=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new yh(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const u=this._sanitizer.sanitize(c.q3G.HTML,i);if(!u)throw JM(i);const h=_h(u);return this._addSvgIconConfig(t,r,new yh("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new yh(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(c.q3G.HTML,r);if(!s)throw JM(r);const u=_h(s);return this._addSvgIconSetConfig(t,new yh("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!r)throw QM(t);const i=this._cachedIconsByUrl.get(r);return i?qe(vb(i)):this._loadSvgIconFromConfig(new yh(t,null)).pipe((0,rr.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,Ze.U)(s=>vb(s)))}getNamedSvgIcon(t,r=""){const i=bI(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):Kv(kp(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?qe(vb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Ze.U)(r=>vb(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?qe(i):aI(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(ji(h=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(v)),qe(null)})))).pipe((0,Ze.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw kp(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(u,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,rr.b)(r=>t.svgText=r),(0,Ze.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?qe(null):this._fetchIcon(t).pipe((0,rr.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(_h("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(_h("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:u,value:h}=i[s];"id"!==u&&r.setAttribute(u,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var v;const{url:r,options:i}=t,s=null!=(v=null==i?void 0:i.withCredentials)&&v;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const u=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,r);if(!u)throw QM(r);const h=this._inProgressUrlFetches.get(u);if(h)return h;const m=this._httpClient.get(u,{responseType:"text",withCredentials:s}).pipe((0,Ze.U)(C=>_h(C)),lu(()=>this._inProgressUrlFetches.delete(u)),(0,Sp.B)());return this._inProgressUrlFetches.set(u,m),m}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(bI(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return bb(s)?new yh(s.url,null,s.options):new yh(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(pI,8),c.LFG(hl),c.LFG(se,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vb(n){return n.cloneNode(!0)}function bI(n,e){return n+":"+e}function bb(n){return!(!n.url||!n.options)}const XM=uh(class{constructor(n){this._elementRef=n}}),Ls=new c.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,c.f3M)(se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),v_=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],tx=v_.map(n=>`[${n}]`).join(", "),nx=/^url\(['"]?#(.*?)['"]?\)$/;let vh=(()=>{class n extends XM{constructor(t,r,i,s,u){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=u,this._inline=!1,this._currentIconFetch=Dr.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Gn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(u=>{s.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(tx),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)v_.forEach(u=>{const h=r[s],m=h.getAttribute(u),v=m?m.match(nx):null;if(v){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:u,value:v[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,Ft.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(y_),c.$8M("aria-hidden"),c.Y36(Ls),c.Y36(c.qLn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:yI,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),wI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Gr],Gr]}),n})();const EI=["*",[["mat-toolbar-row"]]],rx=["*","mat-toolbar-row"],CI=uh(class{constructor(n){this._elementRef=n}});let II=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),ix=(()=>{class n extends CI{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(ds),c.Y36(se))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,II,5),2&t){let s;c.iGM(s=c.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&c.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[c.qOj],ngContentSelectors:rx,decls:2,vars:0,template:function(t,r){1&t&&(c.F$t(EI),c.Hsn(0),c.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Gr],Gr]}),n})(),Xo=(()=>{class n{constructor(){this.menuButtonClicked=new c.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-topbar"]],outputs:{menuButtonClicked:"menuButtonClicked"},decls:8,vars:0,consts:[["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"click"],[1,"appTitle"],[1,"example-spacer"]],template:function(t,r){1&t&&(c.TgZ(0,"mat-toolbar"),c.TgZ(1,"button",0),c.NdJ("click",function(){return r.menuButtonClicked.emit(!0)}),c.TgZ(2,"mat-icon"),c._uU(3,"menu"),c.qZA(),c.qZA(),c.TgZ(4,"div",1),c.TgZ(5,"h1"),c._uU(6,"Minou Tracker"),c.qZA(),c.qZA(),c._UZ(7,"span",2),c.qZA())},directives:[ix,ub,vh],styles:[".appTitle[_ngcontent-%COMP%]{margin:auto}.buttonMenu[_ngcontent-%COMP%]{position:fixed}  .menuCloseButton{border-radius:10px;float:right}"]}),n})(),TI=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),jc=(()=>{class n extends TI{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Ra=new c.OlP("NgValueAccessor"),sx={provide:Ra,useExisting:(0,c.Gpc)(()=>Eb),multi:!0},ox=new c.OlP("CompositionEventMode");let Eb=(()=>{class n extends TI{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(ox,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([sx]),c.qOj]}),n})();function Ol(n){return null==n||0===n.length}function Cb(n){return null!=n&&"number"==typeof n.length}const wi=new c.OlP("NgValidators"),Pu=new c.OlP("NgAsyncValidators"),MI=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fu{static min(e){return function(n){return e=>{if(Ol(e.value)||Ol(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(Ol(e.value)||Ol(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return Ol(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return Ol(n.value)||MI.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>Ol(e.value)||!Cb(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>Cb(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return w_;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ol(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return ux(e)}static composeAsync(e){return cx(e)}}function w_(n){return null}function Sb(n){return null!=n}function NI(n){const e=(0,c.QGY)(n)?(0,mn.D)(n):n;return(0,c.CqO)(e),e}function OI(n){let e={};return n.forEach(t=>{e=null!=t?tt(tt({},e),t):e}),0===Object.keys(e).length?null:e}function PI(n,e){return e.map(t=>t(n))}function lx(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function ux(n){if(!n)return null;const e=n.filter(Sb);return 0==e.length?null:function(t){return OI(PI(t,e))}}function FI(n){return null!=n?ux(lx(n)):null}function cx(n){if(!n)return null;const e=n.filter(Sb);return 0==e.length?null:function(t){return aI(PI(t,e).map(NI)).pipe((0,Ze.U)(OI))}}function Ab(n){return null!=n?cx(lx(n)):null}function Rp(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LI(n){return n._rawValidators}function VI(n){return n._rawAsyncValidators}function E_(n){return n?Array.isArray(n)?n:[n]:[]}function Na(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mb(n,e){const t=E_(e);return E_(n).forEach(i=>{Na(t,i)||t.push(i)}),t}function C_(n,e){return E_(e).filter(t=>!Na(n,t))}class I_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ab(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $i extends I_{get formDirective(){return null}get path(){return null}}class bo extends I_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class T_{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}let fx=(()=>{class n extends T_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bo,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),px=(()=>{class n extends T_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($i,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Op(n,e){kb(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&HI(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&HI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function D_(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Fp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Pp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kb(n,e){const t=LI(n);null!==e.validator?n.setValidators(Rp(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=VI(n);null!==e.asyncValidator?n.setAsyncValidators(Rp(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Pp(e._rawValidators,i),Pp(e._rawAsyncValidators,i)}function Fp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=LI(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=VI(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Pp(e._rawValidators,r),Pp(e._rawAsyncValidators,r),t}function HI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GI(n,e){kb(n,e)}function $I(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function M_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const x_="VALID",Ob="INVALID",Lp="PENDING",k_="DISABLED";function Pb(n){return(qI(n)?n.validators:n)||null}function wx(n){return Array.isArray(n)?FI(n):n||null}function zI(n,e){return(qI(e)?e.asyncValidators:n)||null}function Ex(n){return Array.isArray(n)?Ab(n):n||null}function qI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class o{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=wx(this._rawValidators),this._composedAsyncValidatorFn=Ex(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===x_}get invalid(){return this.status===Ob}get pending(){return this.status==Lp}get disabled(){return this.status===k_}get enabled(){return this.status!==k_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=wx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ex(e)}addValidators(e){this.setValidators(Mb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C_(e,this._rawAsyncValidators))}hasValidator(e){return Na(this._rawValidators,e)}hasAsyncValidator(e){return Na(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=k_,this.errors=null,this._forEachChild(r=>{r.disable(hi(tt({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(hi(tt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=x_,this._forEachChild(r=>{r.enable(hi(tt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(hi(tt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===x_||this.status===Lp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?k_:x_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lp,this._hasOwnPendingAsyncValidator=!0;const t=NI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof l?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof d&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?k_:this.errors?Ob:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lp)?Lp:this._anyControlsHaveStatus(Ob)?Ob:x_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class a extends o{constructor(e=null,t,r){super(Pb(t),zI(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){M_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){M_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class l extends o{constructor(e,t,r){super(Pb(t),zI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof a?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class d extends o{constructor(e,t,r){super(Pb(t),zI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof a?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const f={provide:$i,useExisting:(0,c.Gpc)(()=>b)},_=(()=>Promise.resolve(null))();let b=(()=>{class n extends $i{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new c.vpe,this.form=new l({},FI(t),Ab(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Op(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),M_(this._directives,t)})}addFormGroup(t){_.then(()=>{const r=this._findContainer(t.path),i=new l({});GI(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,$I(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wi,10),c.Y36(Pu,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([f]),c.qOj]}),n})(),ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Te={provide:Ra,useExisting:(0,c.Gpc)(()=>mt),multi:!0};let mt=(()=>{class n extends jc{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([Te]),c.qOj]}),n})(),ps=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Vp=new c.OlP("NgModelWithFormControlWarning"),Vb={provide:$i,useExisting:(0,c.Gpc)(()=>Lu)};let Lu=(()=>{class n extends $i{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Op(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){D_(t.control||null,t,!1),M_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,$I(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(D_(r||null,t),i instanceof a&&(Op(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);GI(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Fp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kb(this.form,this),this._oldForm&&Fp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wi,10),c.Y36(Pu,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Vb]),c.qOj,c.TTD]}),n})();const XG={provide:bo,useExisting:(0,c.Gpc)(()=>Tx)};let Tx=(()=>{class n extends bo{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Eb?t=s:function(n){return Object.getPrototypeOf(n.constructor)===jc}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36($i,13),c.Y36(wi,10),c.Y36(Pu,10),c.Y36(Ra,10),c.Y36(Vp,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([XG]),c.qOj,c.TTD]}),n})(),RF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ps]]}),n})(),g3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[RF]}),n})(),m3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[RF]}),n})();var sr=O(7233);function Mx(){return(0,jn.e)((n,e)=>{let t,r=!1;n.subscribe(new _n.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ut,Vs=O(7905),NF=(O(6600),O(6293)),Ee=O(8239),Pl=O(1572),Gc=O(1177),Fl=O(3855),P=O(4213),y3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$c={},xx=xx||{},Vt=y3||self;function KI(){}function kx(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ub(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rx="closure_uid_"+(1e9*Math.random()>>>0),b3=0;function w3(n,e,t){return n.call.apply(n.bind,arguments)}function E3(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function zi(n,e,t){return(zi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w3:E3).apply(null,arguments)}function ZI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function bh(){this.s=this.s,this.o=this.o}var I3={};bh.prototype.s=!1,bh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Rx)&&n[Rx]||(n[Rx]=++b3)}(this);delete I3[n]}},bh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},PF=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function FF(n){return Array.prototype.concat.apply([],arguments)}function Nx(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function YI(n){return/^[\s\xa0]*$/.test(n)}var Us,LF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bs(n,e){return-1!=n.indexOf(e)}function Ox(n,e){return n<e?-1:n>e?1:0}e:{var VF=Vt.navigator;if(VF){var BF=VF.userAgent;if(BF){Us=BF;break e}}Us=""}function Px(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function UF(n){const e={};for(const t in n)e[t]=n[t];return e}var jF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function HF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<jF.length;s++)t=jF[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Fx(n){return Fx[" "](n),n}Fx[" "]=KI;var QI,n,S3=Bs(Us,"Opera"),P_=Bs(Us,"Trident")||Bs(Us,"MSIE"),GF=Bs(Us,"Edge"),Lx=GF||P_,$F=Bs(Us,"Gecko")&&!(Bs(Us.toLowerCase(),"webkit")&&!Bs(Us,"Edge"))&&!(Bs(Us,"Trident")||Bs(Us,"MSIE"))&&!Bs(Us,"Edge"),A3=Bs(Us.toLowerCase(),"webkit")&&!Bs(Us,"Edge");function zF(){var n=Vt.document;return n?n.documentMode:void 0}e:{var Vx="",Bx=(n=Us,$F?/rv:([^\);]+)(\)|;)/.exec(n):GF?/Edge\/([\d\.]+)/.exec(n):P_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):A3?/WebKit\/(\S+)/.exec(n):S3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bx&&(Vx=Bx?Bx[1]:""),P_){var Ux=zF();if(null!=Ux&&Ux>parseFloat(Vx)){QI=String(Ux);break e}}QI=Vx}var M3={};function x3(){return e=M3,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=LF(String(QI)).split("."),t=LF("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Ox(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Ox(0==i[2].length,0==s[2].length)||Ox(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n}();var e}var k3=Vt.document&&P_&&(zF()||parseInt(QI,10))||void 0,R3=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",KI,e),Vt.removeEventListener("test",KI,e)}catch(t){}return n}();function gs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function jb(n,e){if(gs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($F){e:{try{Fx(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:N3[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jb.Z.h.call(this)}}gs.prototype.h=function(){this.defaultPrevented=!0},qi(jb,gs);var N3={2:"touch",3:"pen",4:"mouse"};jb.prototype.h=function(){jb.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hb="closure_listenable_"+(1e6*Math.random()|0),O3=0;function P3(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++O3,this.ca=this.fa=!1}function JI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function XI(n){this.src=n,this.g={},this.h=0}function Hx(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=OF(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(JI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Gx(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}XI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Gx(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new P3(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var $x="closure_lm_"+(1e6*Math.random()|0),zx={};function WF(n,e,t,r,i){if(r&&r.once)return ZF(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)WF(n,e[s],t,r,i);return null}return t=Zx(t),n&&n[Hb]?n.N(e,t,Ub(r)?!!r.capture:!!r,i):KF(n,e,t,!1,r,i)}function KF(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=Ub(i)?!!i.capture:!!i,h=Wx(n);if(h||(n[$x]=h=new XI(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function(){var e=L3;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)R3||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(QF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZF(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZF(n,e[s],t,r,i);return null}return t=Zx(t),n&&n[Hb]?n.O(e,t,Ub(r)?!!r.capture:!!r,i):KF(n,e,t,!0,r,i)}function YF(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)YF(n,e[s],t,r,i);else r=Ub(r)?!!r.capture:!!r,t=Zx(t),n&&n[Hb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Gx(s=n.g[e],t,r,i))&&(JI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Wx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Gx(e,t,r,i)),(t=-1<n?e[n]:null)&&qx(t))}function qx(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Hb])Hx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(QF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Wx(e))?(Hx(t,n),0==t.h&&(t.src=null,e[$x]=null)):JI(n)}}}function QF(n){return n in zx?zx[n]:zx[n]="on"+n}function L3(n,e){if(n.ca)n=!0;else{e=new jb(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&qx(n),n=t.call(r,e)}return n}function Wx(n){return(n=n[$x])instanceof XI?n:null}var Kx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zx(n){return"function"==typeof n?n:(n[Kx]||(n[Kx]=function(e){return n.handleEvent(e)}),n[Kx])}function Ei(){bh.call(this),this.i=new XI(this),this.P=this,this.I=null}function Wi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gs(e,n);else if(e instanceof gs)e.target=e.target||n;else{var i=e;HF(e=new gs(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=eT(u,r,!0,e)&&i}if(i=eT(u=e.g=n,r,!0,e)&&i,i=eT(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=eT(u=e.g=t[s],r,!1,e)&&i}function eT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&Hx(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}qi(Ei,bh),Ei.prototype[Hb]=!0,Ei.prototype.removeEventListener=function(n,e,t,r){YF(this,n,e,t,r)},Ei.prototype.M=function(){if(Ei.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)JI(t[r]);delete n.g[e],n.h--}}this.I=null},Ei.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ei.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Yx=Vt.JSON.stringify;function V3(){var n=XF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jx,JF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new U3,n=>n.reset());class U3{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function j3(n){Vt.setTimeout(()=>{throw n},0)}function Qx(n,e){Jx||function(){var n=Vt.Promise.resolve(void 0);Jx=function(){n.then(G3)}}(),Xx||(Jx(),Xx=!0),XF.add(n,e)}var Xx=!1,XF=new class{constructor(){this.h=this.g=null}add(e,t){const r=JF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function G3(){for(var n;n=V3();){try{n.h.call(n.g)}catch(t){j3(t)}var e=JF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Xx=!1}function tT(n,e){Ei.call(this),this.h=n||1,this.g=e||Vt,this.j=zi(this.kb,this),this.l=Date.now()}function ek(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function tk(n,e,t){if("function"==typeof n)t&&(n=zi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function eL(n){n.g=tk(()=>{n.g=null,n.i&&(n.i=!1,eL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qi(tT,Ei),(ut=tT.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wi(this,"tick"),this.da&&(ek(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){tT.Z.M.call(this),ek(this),delete this.g};class $3 extends bh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eL(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gb(n){bh.call(this),this.h=n,this.g={}}qi(Gb,bh);var tL=[];function nL(n,e,t,r){Array.isArray(t)||(t&&(tL[0]=t.toString()),t=tL);for(var i=0;i<t.length;i++){var s=WF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function rL(n){Px(n.g,function(e,t){this.g.hasOwnProperty(t)&&qx(e)},n),n.g={}}function nT(){this.g=!0}function F_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return Yx(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Gb.prototype.M=function(){Gb.Z.M.call(this),rL(this)},Gb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nT.prototype.Aa=function(){this.g=!1},nT.prototype.info=function(){};var Bp={},iL=null;function rT(){return iL=iL||new Ei}function sL(n){gs.call(this,Bp.Ma,n)}function $b(n){const e=rT();Wi(e,new sL(e,n))}function oL(n,e){gs.call(this,Bp.STAT_EVENT,n),this.stat=e}function js(n){const e=rT();Wi(e,new oL(e,n))}function aL(n,e){gs.call(this,Bp.Na,n),this.size=e}function zb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}Bp.Ma="serverreachability",qi(sL,gs),Bp.STAT_EVENT="statevent",qi(oL,gs),Bp.Na="timingevent",qi(aL,gs);var iT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},lL={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function nk(){}function cL(){}nk.prototype.h=null;var sk,qb={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rk(){gs.call(this,"d")}function ik(){gs.call(this,"c")}function sT(){}function Wb(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Gb(this),this.P=Z3,this.W=new tT(n=Lx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new dL}function dL(){this.i=null,this.g="",this.h=!1}qi(rk,gs),qi(ik,gs),qi(sT,nk),sT.prototype.g=function(){return new XMLHttpRequest},sT.prototype.i=function(){return{}},sk=new sT;var Z3=45e3,ok={},oT={};function ak(n,e,t){n.K=1,n.v=dT(zc(e)),n.s=t,n.U=!0,hL(n,null)}function hL(n,e){n.F=Date.now(),Kb(n),n.A=zc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),wL(t.h,"t",r),n.C=0,t=n.l.H,n.h=new dL,n.g=$L(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $3(zi(n.Ia,n,n.g),n.O)),nL(n.V,n.g,"readystatechange",n.gb),e=n.H?UF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),$b(1),function(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var C=v[0];v=v[1];var D=C.split("_");u=2<=D.length&&"type"==D[1]?u+(C+"=")+v+"&":u+(C+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function fL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function pL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Y3(n,t),i==oT){4==e&&(n.o=4,js(14),r=!1),F_(n.j,n.m,null,"[Incomplete Response]");break}if(i==ok){n.o=4,js(15),F_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}F_(n.j,n.m,i,null),lk(n,i)}fL(n)&&i!=oT&&i!=ok&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,js(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),vk(e),e.L=!0,js(11))):(F_(n.j,n.m,t,"[Invalid Chunked Response]"),Up(n),Zb(n))}function Y3(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?oT:(t=Number(e.substring(t,r)),isNaN(t)?ok:(r+=1)+t>e.length?oT:(e=e.substr(r,t),n.C=r+t,e))}function Kb(n){n.Y=Date.now()+n.P,gL(n,n.P)}function gL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zb(zi(n.eb,n),e)}function aT(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Zb(n){0==n.l.G||n.I||UL(n.l,n)}function Up(n){aT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ek(n.W),rL(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function lk(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dk(t.i,n)))if(t.I=n.N,!n.J&&dk(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=zb(zi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;_T(t),gT(t)}yk(t),js(18)}if(1>=IL(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else Gp(t,11)}else if((n.J||t.g==n)&&_T(t),!YI(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const C=v[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=v[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const R=v[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const U=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.i;!s.g&&(Bs(U,"spdy")||Bs(U,"quic")||Bs(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(hk(s,s.h),s.h=null))}if(r.D){const X=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.sa=X,or(r.F,r.D,X))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=GL(r,r.H?r.la:null,r.W),u.J){TL(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(aT(h),Kb(h)),r.g=u}else VL(r);0<t.l.length&&mT(t)}else"stop"!=v[0]&&"close"!=v[0]||Gp(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Gp(t,7):mk(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}$b(4)}catch(v){}}function uk(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(kx(n)||"string"==typeof n)PF(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(kx(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(kx(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function L_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof L_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ck(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];jp(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)jp(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function jp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=Wb.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==qc(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const C=qc(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||Lx||this.g&&(this.h.h||this.g.ga()||NL(this.g)))){this.I||4!=C||7==e||$b(8==e||0>=D?3:2),aT(this);var t=this.g.ba();this.N=t;t:if(fL(this)){var r=NL(this.g);n="";var i=r.length,s=4==qc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Up(this),Zb(this);var u="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!YI(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,js(12),Up(this),Zb(this);break e}F_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lk(this,t)}this.U?(pL(this,C,u),Lx&&this.i&&3==C&&(nL(this.V,this.W,"tick",this.fb),this.W.start())):(F_(this.j,this.m,u,null),lk(this,u)),4==C&&Up(this),this.i&&!this.I&&(4==C?UL(this.l,this):(this.i=!1,Kb(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,js(12)):(this.o=0,js(13)),Up(this),Zb(this)}}}catch(C){}},ut.fb=function(){if(this.g){var n=qc(this.g),e=this.g.ga();this.C<e.length&&(aT(this),pL(this,n,e),this.i&&4!=n&&Kb(this))}},ut.cancel=function(){this.I=!0,Up(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($b(3),js(17)),Up(this),this.o=2,Zb(this)):gL(this,this.Y-n)},(ut=L_.prototype).R=function(){ck(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return ck(this),this.g.concat()},ut.get=function(n,e){return jp(this.h,n)?this.h[n]:e},ut.set=function(n,e){jp(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var mL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Hp){this.g=void 0!==e?e:n.g,lT(this,n.j),this.s=n.s,uT(this,n.i),cT(this,n.m),this.l=n.l,e=n.h;var t=new Jb;t.i=e.i,e.g&&(t.g=new L_(e.g),t.h=e.h),_L(this,t),this.o=n.o}else n&&(t=String(n).match(mL))?(this.g=!!e,lT(this,t[1]||"",!0),this.s=Yb(t[2]||""),uT(this,t[3]||"",!0),cT(this,t[4]),this.l=Yb(t[5]||"",!0),_L(this,t[6]||"",!0),this.o=Yb(t[7]||"")):(this.g=!!e,this.h=new Jb(null,this.g))}function zc(n){return new Hp(n)}function lT(n,e,t){n.j=t?Yb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uT(n,e,t){n.i=t?Yb(e,!0):e}function cT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _L(n,e,t){e instanceof Jb?(n.h=e,function(n,e){e&&!n.j&&(wh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(vL(this,r),wL(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Qb(e,i$)),n.h=new Jb(e,n.g))}function or(n,e,t){n.h.set(e,t)}function dT(n){return or(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,t$),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function t$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Hp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qb(e,yL,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qb(e,yL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qb(t,"/"==t.charAt(0)?r$:n$,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qb(t,s$)),n.join("")};var yL=/[#\/\?@]/g,n$=/[#\?:]/g,r$=/[#\?]/g,i$=/[#\?@]/g,s$=/#/g;function Jb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function wh(n){n.g||(n.g=new L_,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function vL(n,e){wh(n),e=V_(n,e),jp(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,jp((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ck(n)))}function bL(n,e){return wh(n),e=V_(n,e),jp(n.g.h,e)}function wL(n,e,t){vL(n,e),0<t.length&&(n.i=null,n.g.set(V_(n,e),Nx(t)),n.h+=t.length)}function V_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function EL(n){this.l=n||l$,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Jb.prototype).add=function(n,e){wh(this),this.i=null,n=V_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){wh(this),this.g.forEach(function(t,r){PF(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){wh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},ut.R=function(n){wh(this);var e=[];if("string"==typeof n)bL(this,n)&&(e=FF(e,this.g.get(V_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=FF(e,n[t])}return e},ut.set=function(n,e){return wh(this),this.i=null,bL(this,n=V_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;""!==r[s]&&(u+="="+encodeURIComponent(String(r[s]))),n.push(u)}}return this.i=n.join("&")};var l$=10;function CL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function IL(n){return n.h?1:n.g?n.g.size:0}function dk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function hk(n,e){n.g?n.g.add(e):n.h=e}function TL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function DL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Nx(n.i)}function fk(){}function u$(){this.g=new fk}function c$(n,e,t){const r=t||"";try{uk(n,function(i,s){let u=i;Ub(i)&&(u=Yx(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Xb(n){this.l=n.$b||null,this.j=n.ib||!1}function fT(n,e){Ei.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=pk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}EL.prototype.cancel=function(){if(this.i=DL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},fk.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},fk.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},qi(Xb,nk),Xb.prototype.g=function(){return new fT(this.l,this.j)},Xb.prototype.i=function(n){return function(){return n}}({}),qi(fT,Ei);var pk=0;function SL(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ew(n){n.readyState=4,n.l=null,n.j=null,n.A=null,tw(n)}function tw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=fT.prototype).open=function(n,e){if(this.readyState!=pk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,tw(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ew(this)),this.readyState=pk},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,tw(this)),this.g&&(this.readyState=3,tw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SL(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ew(this):tw(this),3==this.readyState&&SL(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,ew(this))},ut.Ta=function(n){this.g&&(this.response=n,ew(this))},ut.ha=function(){this.g&&ew(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var h$=Vt.JSON.parse;function $r(n){Ei.call(this),this.headers=new L_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AL,this.K=this.L=!1}qi($r,Ei);var AL="",f$=/^https?$/i,p$=["POST","PUT"];function m$(n){return"content-type"==n.toLowerCase()}function ML(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,xL(n),pT(n)}function xL(n){n.D||(n.D=!0,Wi(n,"complete"),Wi(n,"error"))}function kL(n){if(n.h&&void 0!==xx&&(!n.C[1]||4!=qc(n)||2!=n.ba()))if(n.v&&4==qc(n))tk(n.Fa,0,n);else if(Wi(n,"readystatechange"),4==qc(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(mL)[1]||null;if(!i&&Vt.self&&Vt.self.location){var s=Vt.self.location.protocol;i=s.substr(0,s.length-1)}r=!f$.test(i?i.toLowerCase():"")}t=r}if(t)Wi(n,"complete"),Wi(n,"success");else{n.m=6;try{var u=2<qc(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.ba()+"]",xL(n)}}finally{pT(n)}}}function pT(n,e){if(n.g){RL(n);const t=n.g,r=n.C[0]?KI:null;n.g=null,n.C=null,e||Wi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function RL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function qc(n){return n.g?n.g.readyState:0}function NL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case AL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gk(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return Px(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):or(n,e,t))}function nw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function OL(n){this.za=0,this.l=[],this.h=new nT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nw("baseRetryDelayMs",5e3,n),this.$a=nw("retryDelaySeedMs",1e4,n),this.Ya=nw("forwardChannelMaxRetries",2,n),this.ra=nw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new EL(n&&n.concurrentRequestLimit),this.Ca=new u$,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function mk(n){if(PL(n),3==n.G){var e=n.V++,t=zc(n.F);or(t,"SID",n.J),or(t,"RID",e),or(t,"TYPE","terminate"),rw(n,t),(e=new Wb(n,n.h,e,void 0)).K=2,e.v=dT(zc(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=$L(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kb(e)}HL(n)}function gT(n){n.g&&(vk(n),n.g.cancel(),n.g=null)}function PL(n){gT(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),_T(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function _k(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mT(n)}function mT(n){CL(n.i)||n.m||(n.m=!0,Qx(n.Ha,n),n.C=0)}function FL(n,e){var t;t=e?e.m:n.V++;const r=zc(n.F);or(r,"SID",n.J),or(r,"RID",t),or(r,"AID",n.U),rw(n,r),n.o&&n.s&&gk(r,n.o,n.s),t=new Wb(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=LL(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),hk(n.i,t),ak(t,r,e)}function rw(n,e){n.j&&uk({},function(t,r){or(e,r,t)})}function LL(n,e,t){t=Math.min(n.l.length,t);var r=n.j?zi(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const C=i[m].g;if(v-=s,0>v)s=Math.max(0,i[m].h-100),h=!1;else try{c$(C,u,"req"+v+"_")}catch(D){r&&r(C)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function VL(n){n.g||n.u||(n.Y=1,Qx(n.Ga,n),n.A=0)}function yk(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zb(zi(n.Ga,n),jL(n,n.A)),n.A++,0))}function vk(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function BL(n){n.g=new Wb(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=zc(n.oa);or(e,"RID","rpc"),or(e,"SID",n.J),or(e,"CI",n.N?"0":"1"),or(e,"AID",n.U),rw(n,e),or(e,"TYPE","xmlhttp"),n.o&&n.s&&gk(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=dT(zc(e)),t.s=null,t.U=!0,hL(t,n)}function _T(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function UL(n,e){var t=null;if(n.g==e){_T(n),vk(n),n.g=null;var r=2}else{if(!dk(n.i,e))return;t=e.D,TL(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Wi(r=rT(),new aL(r,t,e,i)),mT(n)}else VL(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(IL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zb(zi(n.Ha,n,e),jL(n,n.C)),n.C++,0)))}(n,e)||2==r&&yk(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Gp(n,5);break;case 4:Gp(n,10);break;case 3:Gp(n,6);break;default:Gp(n,2)}}function jL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Gp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=zi(n.jb,n);t||(t=new Hp("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||lT(t,"https"),dT(t)),function(n,e){const t=new nT;if(Vt.Image){const r=new Image;r.onload=ZI(hT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ZI(hT,t,r,"TestLoadImage: error",!1,e),r.onabort=ZI(hT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ZI(hT,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else js(2);n.G=0,n.j&&n.j.va(e),HL(n),PL(n)}function HL(n){n.G=0,n.I=-1,n.j&&((0!=DL(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Nx(n.l),n.l.length=0),n.j.ua())}function GL(n,e,t){let r=function(n){return n instanceof Hp?zc(n):new Hp(n,void 0)}(t);if(""!=r.i)e&&uT(r,e+"."+r.i),cT(r,r.m);else{const i=Vt.location;r=function(n,e,t,r){var i=new Hp(null,void 0);return n&&lT(i,n),e&&uT(i,e),t&&cT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Px(n.aa,function(i,s){or(r,s,i)}),t=n.sa,(e=n.D)&&t&&or(r,e,t),or(r,"VER",n.ma),rw(n,r),r}function $L(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $r(t&&n.Ba&&!n.qa?new Xb({ib:!0}):n.qa)).L=n.H,e}function zL(){}function yT(){if(P_&&!(10<=Number(k3)))throw Error("Environmental error: no available transport.")}function ea(n,e){Ei.call(this),this.g=new OL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!YI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!YI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new B_(this)}function qL(n){rk.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function WL(){ik.call(this),this.status=1}function B_(n){this.g=n}(ut=$r.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sk.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:sk),this.g.onreadystatechange=zi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void ML(this,s)}n=t||"";const i=new L_(this.headers);r&&uk(r,function(s,u){i.set(u,s)}),r=function(n){e:{var e=m$;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Vt.FormData&&n instanceof Vt.FormData,!(0<=OF(p$,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{RL(this),0<this.B&&((this.K=function(n){return P_&&x3()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zi(this.pa,this)):this.A=tk(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){ML(this,s)}},ut.pa=function(){void 0!==xx&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wi(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wi(this,"complete"),Wi(this,"abort"),pT(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pT(this,!0)),$r.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?kL(this):this.cb())},ut.cb=function(){kL(this)},ut.ba=function(){try{return 2<qc(this)?this.g.status:-1}catch(n){return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),h$(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=OL.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Wb(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=UF(s),HF(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=LL(this,i,e),or(t=zc(this.F),"RID",n),or(t,"CVER",22),this.D&&or(t,"X-HTTP-Session-Id",this.D),rw(this,t),this.o&&s&&gk(t,this.o,s),hk(this.i,i),this.Ra&&or(t,"TYPE","init"),this.ja?(or(t,"$req",e),or(t,"SID","null"),i.$=!0,ak(i,t,null)):ak(i,t,e),this.G=2}}else 3==this.G&&(n?FL(this,n):0==this.l.length||CL(this.i)||FL(this))},ut.Ga=function(){if(this.u=null,BL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zb(zi(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,js(10),gT(this),BL(this))},ut.ab=function(){null!=this.v&&(this.v=null,gT(this),yk(this),js(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),js(2)):(this.h.info("Failed to ping google.com"),js(1))},(ut=zL.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},yT.prototype.g=function(n,e){return new ea(n,e)},qi(ea,Ei),ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Qx(zi(n.hb,n,e))),js(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=GL(n,null,n.W),mT(n)},ea.prototype.close=function(){mk(this.g)},ea.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_k(this.g,e)}else this.v?((e={}).__data__=Yx(n),_k(this.g,e)):_k(this.g,n)},ea.prototype.M=function(){this.g.j=null,delete this.j,mk(this.g),delete this.g,ea.Z.M.call(this)},qi(qL,rk),qi(WL,ik),qi(B_,zL),B_.prototype.xa=function(){Wi(this.g,"a")},B_.prototype.wa=function(n){Wi(this.g,new qL(n))},B_.prototype.va=function(n){Wi(this.g,new WL(n))},B_.prototype.ua=function(){Wi(this.g,"b")},yT.prototype.createWebChannel=yT.prototype.g,ea.prototype.send=ea.prototype.u,ea.prototype.open=ea.prototype.m,ea.prototype.close=ea.prototype.close,iT.NO_ERROR=0,iT.TIMEOUT=8,iT.HTTP_ERROR=6,lL.COMPLETE="complete",cL.EventType=qb,qb.OPEN="a",qb.CLOSE="b",qb.ERROR="c",qb.MESSAGE="d",Ei.prototype.listen=Ei.prototype.N,$r.prototype.listenOnce=$r.prototype.O,$r.prototype.getLastError=$r.prototype.La,$r.prototype.getLastErrorCode=$r.prototype.Da,$r.prototype.getStatus=$r.prototype.ba,$r.prototype.getResponseJson=$r.prototype.Qa,$r.prototype.getResponseText=$r.prototype.ga,$r.prototype.send=$r.prototype.ea;var v$=$c.createWebChannelTransport=function(){return new yT},b$=$c.getStatEventTarget=function(){return rT()},bk=$c.ErrorCode=iT,w$=$c.EventType=lL,E$=$c.Event=Bp,KL=$c.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},C$=$c.FetchXmlHttpFactory=Xb,vT=$c.WebChannel=cL,I$=$c.XhrIo=$r;const ZL="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let U_="9.8.0";const Eh=new Fl.Yd("@firebase/firestore");function wk(){return Eh.logLevel}function Ve(n,...e){if(Eh.logLevel<=Fl.in.DEBUG){const t=e.map(Ek);Eh.debug(`Firestore (${U_}): ${n}`,...t)}}function zr(n,...e){if(Eh.logLevel<=Fl.in.ERROR){const t=e.map(Ek);Eh.error(`Firestore (${U_}): ${n}`,...t)}}function iw(n,...e){if(Eh.logLevel<=Fl.in.WARN){const t=e.map(Ek);Eh.warn(`Firestore (${U_}): ${n}`,...t)}}function Ek(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${U_}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function Ot(n,e){n||ht()}function Ye(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class YL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class A${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class M${constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ci,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const v=u;e.enqueueRetryable((0,Ee.Z)(function*(){yield v.promise,yield s(r.currentUser)}))},m=v=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ci)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot("string"==typeof r.accessToken),new YL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new Ki(e)}}class x${constructor(e,t,r){this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class k${constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new x$(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R${constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.p=t.token,new QL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function N$(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ta.A=-1;class JL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=N$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function j_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function XL(n){return n+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Rr(0,0))}static max(){return new St(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function eV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $p(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sw{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===sw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends sw{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const O$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends sw{construct(e,t,r){return new ci(e,t,r)}static isValidIdentifier(e){return O$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ci(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ke(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new ke(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new ke(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new ke(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ci(t)}static emptyPath(){return new ci([])}}class H_{constructor(e){this.fields=e,e.sort(ci.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return j_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new di(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}di.EMPTY_BYTE_STRING=new di("");const F$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ch(n){if(Ot(!!n),"string"==typeof n){let e=0;const t=F$.exec(n);if(Ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(n.seconds),nanos:Er(n.nanos)}}function Er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zp(n){return"string"==typeof n?di.fromBase64String(n):di.fromUint8Array(n)}function Ck(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nV(n){const e=n.mapValue.fields.__previous_value__;return Ck(e)?nV(e):e}function ow(n){const e=Ch(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class L${constructor(e,t,r,i,s,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class Wc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}function aw(n){return null==n}function lw(n){return 0===n&&1/n==-1/0}function rV(n){return"number"==typeof n&&Number.isInteger(n)&&!lw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class We{constructor(e){this.path=e}static fromPath(e){return new We(ln.fromString(e))}static fromName(e){return new We(ln.fromString(e).popFirst(5))}static empty(){return new We(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new ln(e.slice()))}}const Ih={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bT={nullValue:"NULL_VALUE"};function qp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ck(n)?4:aV(n)?9007199254740991:10:ht()}function Vu(n,e){if(n===e)return!0;const t=qp(n);if(t!==qp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ow(n).isEqual(ow(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ch(r.timestampValue),u=Ch(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,zp(n.bytesValue).isEqual(zp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Er(r.geoPointValue.latitude)===Er(i.geoPointValue.latitude)&&Er(r.geoPointValue.longitude)===Er(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Er(r.integerValue)===Er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Er(r.doubleValue),u=Er(i.doubleValue);return s===u?lw(s)===lw(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return j_(n.arrayValue.values||[],e.arrayValue.values||[],Vu);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(eV(s)!==eV(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!Vu(s[h],u[h])))return!1;return!0}(n,e);default:return ht()}var i}function uw(n,e){return void 0!==(n.values||[]).find(t=>Vu(t,e))}function Th(n,e){if(n===e)return 0;const t=qp(n),r=qp(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Er(i.integerValue||i.doubleValue),h=Er(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return iV(n.timestampValue,e.timestampValue);case 4:return iV(ow(n),ow(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,s){const u=zp(i),h=zp(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let m=0;m<u.length&&m<h.length;m++){const v=Ht(u[m],h[m]);if(0!==v)return v}return Ht(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Ht(Er(i.latitude),Er(s.latitude));return 0!==u?u:Ht(Er(i.longitude),Er(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let m=0;m<u.length&&m<h.length;++m){const v=Th(u[m],h[m]);if(v)return v}return Ht(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Ih.mapValue&&s===Ih.mapValue)return 0;if(i===Ih.mapValue)return 1;if(s===Ih.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),m=s.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let C=0;C<h.length&&C<v.length;++C){const D=Ht(h[C],v[C]);if(0!==D)return D;const R=Th(u[h[C]],m[v[C]]);if(0!==R)return R}return Ht(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ht()}}function iV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Ch(n),r=Ch(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function G_(n){return Ik(n)}function Ik(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ch(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zp(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=Ik(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${Ik(r.fields[h])}`;return s+"}"}(n.mapValue):ht();var e}function Wp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tk(n){return!!n&&"integerValue"in n}function cw(n){return!!n&&"arrayValue"in n}function sV(n){return!!n&&"nullValue"in n}function oV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wT(n){return!!n&&"mapValue"in n}function dw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $p(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function V$(n){return"nullValue"in n?bT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wp(Wc.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function B$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wp(Wc.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ih:ht()}function lV(n,e){const t=Th(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function uV(n,e){const t=Th(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dw(t)}setAll(e){let t=ci.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=dw(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());wT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$p(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ms(dw(this.value))}}function cV(n){const e=[];return $p(n.fields,(t,r)=>{const i=new ci([t]);if(wT(r)){const s=cV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new H_(e)}class er{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new er(e,0,St.min(),St.min(),ms.empty(),0)}static newFoundDocument(e,t,r){return new er(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new er(e,2,t,St.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,St.min(),ms.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ET{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Dk(n){return n.fields.find(e=>2===e.kind)}function Kp(n){return n.fields.filter(e=>2!==e.kind)}ET.UNKNOWN_ID=-1;class CT{constructor(e,t){this.fieldPath=e,this.kind=t}}class hw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hw(0,Ll.min())}}function dV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new Rr(t+1,0):new Rr(t,r));return new Ll(i,We.empty(),e)}function U$(n){return new Ll(n.readTime,n.key,-1)}class Ll{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ll(St.min(),We.empty(),-1)}static max(){return new Ll(St.max(),We.empty(),-1)}}function hV(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}class Nr{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new Nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new Nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new IT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new IT(this.root,e,this.comparator,!1)}getReverseIterator(){return new IT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new IT(this.root,e,this.comparator,!0)}}class IT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Zi.RED,this.left=null!=i?i:Zi.EMPTY,this.right=null!=s?s:Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Zi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Zi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fV(this.data.getIterator())}getIteratorFrom(e){return new fV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class fV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $_(n){return n.hasNext()?n.getNext():void 0}class j${constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function pV(n,e=null,t=[],r=[],i=null,s=null,u=null){return new j$(n,e,t,r,i,s,u)}function Zp(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+G_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),aw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>G_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>G_(r)).join(",")),e.P=t}return e.P}function fw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Y$(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Vu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vV(n.startAt,e.startAt)&&vV(n.endAt,e.endAt)}function TT(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function DT(n,e){return n.filters.filter(t=>t instanceof Yi&&t.field.isEqual(e))}function gV(n,e,t){let r=bT,i=!0;for(const s of DT(n,e)){let u=bT,h=!0;switch(s.op){case"<":case"<=":u=V$(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=bT}lV({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];lV({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function mV(n,e,t){let r=Ih,i=!0;for(const s of DT(n,e)){let u=Ih,h=!0;switch(s.op){case">=":case">":u=B$(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=Ih}uV({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];uV({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new G$(e,t,r):"array-contains"===t?new q$(e,r):"in"===t?new W$(e,r):"not-in"===t?new K$(e,r):"array-contains-any"===t?new Z$(e,r):new Yi(e,t,r)}static V(e,t,r){return"in"===t?new $$(e,r):new z$(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Th(t,this.value)):null!==t&&qp(this.value)===qp(t)&&this.v(Th(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class G$ extends Yi{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.v(t)}}class $$ extends Yi{constructor(e,t){super(e,"in",t),this.keys=_V(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z$ extends Yi{constructor(e,t){super(e,"not-in",t),this.keys=_V(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _V(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class q$ extends Yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cw(t)&&uw(t.arrayValue,this.value)}}class W$ extends Yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uw(this.value.arrayValue,t)}}class K$ extends Yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(uw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uw(this.value.arrayValue,t)}}class Z$ extends Yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uw(this.value.arrayValue,r))}}class Dh{constructor(e,t){this.position=e,this.inclusive=t}}class z_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function yV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?We.comparator(We.fromName(u.referenceValue),t.key):Th(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vu(n.position[t],e.position[t]))return!1;return!0}class Kc{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function bV(n,e,t,r,i,s,u,h){return new Kc(n,e,t,r,i,s,u,h)}function q_(n){return new Kc(n)}function Sk(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ak(n){for(const e of n.filters)if(e.S())return e.field;return null}function Mk(n){return null!==n.collectionGroup}function W_(n){const e=Ye(n);if(null===e.D){e.D=[];const t=Ak(e),r=Sk(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new z_(t)),e.D.push(new z_(ci.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new z_(ci.keyField(),s))}}}return e.D}function Oa(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=pV(e.path,e.collectionGroup,W_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of W_(e))t.push(new z_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Dh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Dh(e.startAt.position,e.startAt.inclusive):null;e.C=pV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function wV(n,e,t){return new Kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pw(n,e){return fw(Oa(n),Oa(e))&&n.limitType===e.limitType}function EV(n){return`${Zp(Oa(n))}|lt:${n.limitType}`}function xk(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${G_(r.value)}`;var r}).join(", ")}]`),aw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>G_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>G_(t)).join(",")),`Target(${e})`}(Oa(n))}; limitType=${n.limitType})`}function kk(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=yV(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,W_(t),r)||t.endAt&&!function(i,s,u){const h=yV(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,W_(t),r)));var t,r}function CV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IV(n){return(e,t)=>{let r=!1;for(const i of W_(n)){const s=J$(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function J$(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Th(h,m):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function TV(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lw(e)?"-0":e}}function DV(n){return{integerValue:""+n}}function SV(n,e){return rV(e)?DV(e):TV(n,e)}class ST{constructor(){this._=void 0}}function X$(n,e,t){return n instanceof K_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Yp?MV(n,e):n instanceof Qp?xV(n,e):function(r,i){const s=AV(r,i),u=kV(s)+kV(r.k);return Tk(s)&&Tk(r.k)?DV(u):TV(r.M,u)}(n,e)}function ez(n,e,t){return n instanceof Yp?MV(n,e):n instanceof Qp?xV(n,e):t}function AV(n,e){return n instanceof Z_?Tk(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class K_ extends ST{}class Yp extends ST{constructor(e){super(),this.elements=e}}function MV(n,e){const t=RV(e);for(const r of n.elements)t.some(i=>Vu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Qp extends ST{constructor(e){super(),this.elements=e}}function xV(n,e){let t=RV(e);for(const r of n.elements)t=t.filter(i=>!Vu(i,r));return{arrayValue:{values:t}}}class Z_ extends ST{constructor(e,t){super(),this.M=e,this.k=t}}function kV(n){return Er(n.integerValue||n.doubleValue)}function RV(n){return cw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gw{constructor(e,t){this.field=e,this.transform=t}}class nz{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class MT{}function rz(n,e,t){n instanceof mw?function(r,i,s){const u=r.value.clone(),h=FV(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Jp?function(r,i,s){if(!AT(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=FV(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(PV(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Rk(n,e,t){var i;n instanceof mw?function(r,i,s){if(!AT(r.precondition,i))return;const u=r.value.clone(),h=LV(r.fieldTransforms,s,i);u.setAll(h),i.convertToFoundDocument(OV(i),u).setHasLocalMutations()}(n,e,t):n instanceof Jp?function(r,i,s){if(!AT(r.precondition,i))return;const u=LV(r.fieldTransforms,s,i),h=i.data;h.setAll(PV(r)),h.setAll(u),i.convertToFoundDocument(OV(i),h).setHasLocalMutations()}(n,e,t):AT(n.precondition,i=e)&&i.convertToNoDocument(St.min())}function iz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=AV(r.transform,i||null);null!=s&&(null==t&&(t=ms.empty()),t.set(r.field,s))}return t||null}function NV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&j_(t,r,(i,s)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Yp&&r instanceof Yp||t instanceof Qp&&r instanceof Qp?j_(t.elements,r.elements,Vu):t instanceof Z_&&r instanceof Z_?Vu(t.k,r.k):t instanceof K_&&r instanceof K_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function OV(n){return n.isFoundDocument()?n.version:St.min()}class mw extends MT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Jp extends MT{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function PV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function FV(n,e,t){const r=new Map;Ot(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,ez(u,h,t[i]))}return r}function LV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,X$(s,u,e))}return r}class _w extends MT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Nk extends MT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class sz{constructor(e){this.count=e}}var Wr,un;function VV(n){switch(n){default:return ht();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function BV(n){if(void 0===n)return zr("GRPC error has no .code"),he.UNKNOWN;switch(n){case Wr.OK:return he.OK;case Wr.CANCELLED:return he.CANCELLED;case Wr.UNKNOWN:return he.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return he.INTERNAL;case Wr.UNAVAILABLE:return he.UNAVAILABLE;case Wr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Wr.NOT_FOUND:return he.NOT_FOUND;case Wr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Wr.ABORTED:return he.ABORTED;case Wr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Wr.DATA_LOSS:return he.DATA_LOSS;default:return ht()}}(un=Wr||(Wr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Sh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$p(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tV(this.inner)}size(){return this.innerSize}}const oz=new Nr(We.comparator);function Pa(){return oz}const az=new Nr(We.comparator);function Ok(...n){let e=az;for(const t of n)e=e.insert(t.key,t);return e}function yw(){return new Sh(n=>n.toString(),(n,e)=>n.isEqual(e))}const lz=new Nr(We.comparator),uz=new Kn(We.comparator);function Mn(...n){let e=uz;for(const t of n)e=e.add(t);return e}const cz=new Kn(Ht);function xT(){return cz}class vw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,bw.createSynthesizedTargetChangeForCurrentChange(e,t)),new vw(St.min(),r,xT(),Pa(),Mn())}}class bw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new bw(di.EMPTY_BYTE_STRING,t,Mn(),Mn(),Mn())}}class kT{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class UV{constructor(e,t){this.targetId=e,this.$=t}}class jV{constructor(e,t,r=di.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class HV{constructor(){this.B=0,this.L=$V(),this.U=di.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Mn(),t=Mn(),r=Mn();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new bw(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=$V()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class dz{constructor(e){this.nt=e,this.st=new Map,this.it=Pa(),this.rt=GV(),this.ot=new Kn(Ht)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(TT(s))if(0===r){const u=new We(s.path);this.ct(t,u,er.newNoDocument(u,St.min()))}else Ot(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&TT(h.target)){const m=new We(h.target.path);null!==this.it.get(m)||this.It(u,m)||this.ct(u,m,er.newNoDocument(m,e))}s.j&&(t.set(u,s.H()),s.J())}});let r=Mn();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(m=>{const v=this.wt(m);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,u)=>u.setReadTime(e));const i=new vw(e,t,this.ot,this.it,r);return this.it=Pa(),this.rt=GV(),this.ot=new Kn(Ht),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new HV,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Kn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new HV),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function GV(){return new Nr(We.comparator)}function $V(){return new Nr(We.comparator)}const hz={asc:"ASCENDING",desc:"DESCENDING"},fz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pz{constructor(e,t){this.databaseId=e,this.N=t}}function ww(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zV(n,e){return n.N?e.toBase64():e.toUint8Array()}function gz(n,e){return ww(n,e.toTimestamp())}function Ii(n){return Ot(!!n),St.fromTimestamp(function(e){const t=Ch(e);return new Rr(t.seconds,t.nanos)}(n))}function Pk(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qV(n){const e=ln.fromString(n);return Ot(tB(e)),e}function Ew(n,e){return Pk(n.databaseId,e.path)}function Bu(n,e){const t=qV(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(KV(t))}function Fk(n,e){return Pk(n.databaseId,e)}function WV(n){const e=qV(n);return 4===e.length?ln.emptyPath():KV(e)}function Cw(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KV(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ZV(n,e,t){return{name:Ew(n,e),fields:t.value.mapValue.fields}}function YV(n,e,t){const r=Bu(n,e.name),i=Ii(e.updateTime),s=new ms({mapValue:{fields:e.fields}}),u=er.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Iw(n,e){let t;if(e instanceof mw)t={update:ZV(n,e.key,e.value)};else if(e instanceof _w)t={delete:Ew(n,e.key)};else if(e instanceof Jp)t={update:ZV(n,e.key,e.data),updateMask:Iz(e.fieldMask)};else{if(!(e instanceof Nk))return ht();t={verify:Ew(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof K_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Z_)return{fieldPath:s.field.canonicalString(),increment:u.k};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:gz(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function Lk(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qr.updateTime(Ii(i.updateTime)):void 0!==i.exists?qr.exists(i.exists):qr.none():qr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(Ot("REQUEST_TIME"===u.setToServerValue),h=new K_):"appendMissingElements"in u?h=new Yp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Qp(u.removeAllFromArray.values||[]):"increment"in u?h=new Z_(s,u.increment):ht();const m=ci.fromServerFormat(u.fieldPath);return new gw(m,h)}(n,i)):[];var i;if(e.update){const i=Bu(n,e.update.name),s=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new H_((e.updateMask.fieldPaths||[]).map(v=>ci.fromServerFormat(v)));return new Jp(i,s,u,t,r)}return new mw(i,s,t,r)}if(e.delete){const i=Bu(n,e.delete);return new _w(i,t)}if(e.verify){const i=Bu(n,e.verify);return new Nk(i,t)}return ht()}function QV(n,e){return{documents:[Fk(n,e.path)]}}function JV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Fk(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Fk(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(C=>function(D){if("=="===D.op){if(oV(D.value))return{unaryFilter:{field:Y_(D.field),op:"IS_NAN"}};if(sV(D.value))return{unaryFilter:{field:Y_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(oV(D.value))return{unaryFilter:{field:Y_(D.field),op:"IS_NOT_NAN"}};if(sV(D.value))return{unaryFilter:{field:Y_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Y_(D.field),op:wz(D.op),value:D.value}}}(C));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(m){if(0!==m.length)return m.map(v=>{return{field:Y_((C=v).field),direction:bz(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(v=e.limit,n.N||aw(v)?v:{value:v});var v,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function XV(n){let e=WV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ot(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=eB(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new z_(Q_((D=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(C){let D;return D="object"==typeof C?C.value:C,aw(D)?null:D}(t.limit));let m=null;var C;t.startAt&&(m=new Dh((C=t.startAt).values||[],!!C.before));let v=null;return t.endAt&&(v=function(C){return new Dh(C.values||[],!C.before)}(t.endAt)),bV(e,i,u,s,h,"F",m,v)}function eB(n){return n?void 0!==n.unaryFilter?[Cz(n)]:void 0!==n.fieldFilter?[Ez(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>eB(e)).reduce((e,t)=>e.concat(t)):ht():[]}function bz(n){return hz[n]}function wz(n){return fz[n]}function Y_(n){return{fieldPath:n.canonicalString()}}function Q_(n){return ci.fromServerFormat(n.fieldPath)}function Ez(n){return Yi.create(Q_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function Cz(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Q_(n.unaryFilter.field);return Yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Q_(n.unaryFilter.field);return Yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Q_(n.unaryFilter.field);return Yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Q_(n.unaryFilter.field);return Yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function Iz(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nB(e)),e=Tz(n.get(t),e);return nB(e)}function Tz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function nB(n){return n+"\x01\x01"}function Uu(n){const e=n.length;if(Ot(e>=2),2===e)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&ht(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:ht()}s=u+2}return new ln(r)}const rB=["userId","batchId"];function RT(n,e){return[n,Hs(e)]}function iB(n,e,t){return[n,Hs(e),t]}const Dz={},Sz=["prefixPath","collectionGroup","readTime","documentId"],Az=["prefixPath","collectionGroup","documentId"],Mz=["collectionGroup","readTime","prefixPath","documentId"],xz=["canonicalId","targetId"],kz=["targetId","path"],Rz=["path","targetId"],Nz=["collectionId","parent"],Oz=["indexId","uid"],Pz=["uid","sequenceNumber"],Fz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lz=["indexId","uid","orderedDocumentKey"],Vz=["userId","collectionPath","documentId"],Bz=["userId","collectionPath","largestBatchId"],Uz=["userId","collectionGroup","largestBatchId"],sB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jz=[...sB,"documentOverlays"],oB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hz=[...oB,"indexConfiguration","indexState","indexEntries"],aB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},m=>r(m))}),u=!0,s===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class NT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ci,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Tw(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Vk(r.target.error);this.At.reject(new Tw(e,i))}}static open(e,t,r,i){try{return new NT(t,e.transaction(i,r))}catch(s){throw new Tw(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $z(t)}}class Vl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Vl.Vt((0,P.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),eg(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,P.hl)())return!1;if(Vl.St())return!0;const e=(0,P.z$)(),t=Vl.Vt(e),r=0<t&&t<10,i=Vl.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Tw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new ke(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Tw(e,h))},s.onupgradeneeded=u=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Ee.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.Nt(e);const m=NT.open(s.db,e,u?"readonly":"readwrite",r),v=i(m).next(C=>(m.bt(),C)).catch(C=>(m.abort(C),fe.reject(C))).toPromise();return v.catch(()=>{}),yield m.Rt,v}catch(m){const v="FirebaseError"!==m.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",m.message,"Retrying:",v),s.close(),!v)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gz{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return eg(this.Ft.delete())}}class Tw extends ke{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xp(n){return"IndexedDbTransactionError"===n.name}class $z{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eg(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),eg(this.store.add(e))}get(e){return eg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),eg(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),eg(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Kt(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new fe((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,u,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new fe((r,i)=>{t.onerror=s=>{const u=Vk(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const m=new Gz(h),v=t(h.primaryKey,h.value,m);if(v instanceof fe){const C=v.catch(D=>(m.done(),fe.reject(D)));r.push(C)}m.isDone?i():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function eg(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Vk(r.target.error);t(i)}})}let uB=!1;function Vk(n){const e=Vl.Vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uB||(uB=!0,setTimeout(()=>{throw r},0)),r}}return n}class cB extends lB{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=Ye(n);return Vl.xt(t.Ht,e)}class Bk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&rz(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Rk(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Rk(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mn())}isEqual(e){return this.batchId===e.batchId&&j_(this.mutations,e.mutations,(t,r)=>NV(t,r))&&j_(this.baseMutations,e.baseMutations,(t,r)=>NV(t,r))}}class Uk{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ot(e.mutations.length===r.length);let i=lz;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new Uk(e,t,r,i)}}class jk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ah{constructor(e,t,r,i,s=St.min(),u=St.min(),h=di.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Ah(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dB{constructor(e){this.Jt=e}}function hB(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ew(i=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:ww(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:tg(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:tg(e.version)}}var i,s;return r}function OT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ng(n){const e=new Rr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function J_(n,e){const t=(e.baseMutations||[]).map(s=>Lk(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>Lk(n.Jt,s)),i=Rr.fromMillis(e.localWriteTimeMs);return new Bk(e.batchId,i,t,r)}function Dw(n){const e=ng(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ng(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(Ot(1===(i=n.query).documents.length),r=Oa(q_(WV(i.documents[0])))):r=Oa(XV(n.query)),new Ah(r,n.targetId,0,n.lastListenSequenceNumber,e,t,di.fromBase64String(n.resumeToken))}function fB(n,e){const t=tg(e.snapshotVersion),r=tg(e.lastLimboFreeSnapshotVersion);let i;i=TT(e.target)?QV(n.Jt,e.target):JV(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hk(n){const e=XV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wV(e,e.limit,"L"):e}function Gk(n,e){return new jk(e.largestBatchId,Lk(n.Jt,e.overlayMutation))}function pB(n,e){const t=e.path.lastSegment();return[n,Hs(e.path.popLast()),t]}class qz{getBundleMetadata(e,t){return gB(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ng(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return gB(e).put({bundleId:(r=t).id,createTime:tg(Ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return mB(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Hk(i.bundledQuery),readTime:ng(i.readTime)};var i})}saveNamedQuery(e,t){return mB(e).put({name:(r=t).name,readTime:tg(Ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function gB(n){return Ti(n,"bundles")}function mB(n){return Ti(n,"namedQueries")}class $k{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new $k(e,t.uid||"")}getOverlay(e,t){return Sw(e).get(pB(this.userId,t)).next(r=>r?Gk(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const h=new jk(t,u);i.push(this.Xt(e,h))}),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Hs(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Sw(e).Qt("collectionPathOverlayIndex",h))}),fe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=yw(),s=Hs(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Sw(e).qt("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const v=Gk(this.M,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=yw();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sw(e).Wt({index:"collectionGroupOverlayIndex",range:h},(m,v,C)=>{const D=Gk(this.M,v);s.size()<i||D.largestBatchId===u?(s.set(D.getKey(),D),u=D.largestBatchId):C.done()}).next(()=>s)}Xt(e,t){return Sw(e).put(function(r,i,s){const[u,h,m]=pB(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Iw(r.Jt,s.mutation)}}(this.M,this.userId,t))}}function Sw(n){return Ti(n,"documentOverlays")}class rg{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Er(e.integerValue));else if("doubleValue"in e){const r=Er(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),lw(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(zp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?aV(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ht()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),We.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Wz(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _B(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=Wz(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}rg.fe=new rg;class Kz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=_B(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=_B(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Zz{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Yz{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Aw{constructor(){this.De=new Kz,this.Ce=new Zz(this.De),this.xe=new Yz(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ig{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ig(this.indexId,this.documentKey,this.arrayValue,r)}}function sg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=yB(n.arrayValue,e.arrayValue),0!==t?t:(t=yB(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function yB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Qz{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Dk(e);if(void 0!==t&&!this.Be(t))return!1;const r=Kp(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Jz{constructor(){this.qe=new zk}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ll.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class zk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kn(ln.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kn(ln.comparator)).toArray()}}const PT=new Uint8Array(0);class Xz{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new zk,this.Ge=new Sh(r=>Zp(r),(r,i)=>fw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:r,parent:Hs(i)};return vB(e).put(s)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[XL(t),""],!1,!0);return vB(e).qt(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Uu(u.parent))}return r})}addFieldIndex(e,t){const r=FT(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=FT(e),i=LT(e),s=Mw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Mw(e);let i=!0;const s=new Map;return fe.forEach(this.Qe(t),u=>this.je(e,u).next(h=>{i&&(i=!!h),s.set(u,h)})).next(()=>{if(i){let u=Mn();const h=[];return fe.forEach(s,(m,v)=>{var C;Ve("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${Zp(t)}`);const D=function(ct,rt){const Pt=Dk(rt);if(void 0===Pt)return null;for(const Gt of DT(ct,Pt.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(v,m),R=function(ct,rt){const Pt=new Map;for(const Gt of Kp(rt))for(const bn of DT(ct,Gt.fieldPath))switch(bn.op){case"==":case"in":Pt.set(Gt.fieldPath.canonicalString(),bn.value);break;case"not-in":case"!=":return Pt.set(Gt.fieldPath.canonicalString(),bn.value),Array.from(Pt.values())}return null}(v,m),L=function(ct,rt){const Pt=[];let Gt=!0;for(const bn of Kp(rt)){const Ws=0===bn.kind?gV(ct,bn.fieldPath,ct.startAt):mV(ct,bn.fieldPath,ct.startAt);Pt.push(Ws.value),Gt&&(Gt=Ws.inclusive)}return new Dh(Pt,Gt)}(v,m),U=function(ct,rt){const Pt=[];let Gt=!0;for(const bn of Kp(rt)){const Ws=0===bn.kind?mV(ct,bn.fieldPath,ct.endAt):gV(ct,bn.fieldPath,ct.endAt);Pt.push(Ws.value),Gt&&(Gt=Ws.inclusive)}return new Dh(Pt,Gt)}(v,m),X=this.We(m,v,L),me=this.We(m,v,U),Je=this.ze(m,v,R),nt=this.He(m.indexId,D,X,L.inclusive,me,U.inclusive,Je);return fe.forEach(nt,ct=>r.Gt(ct,t.limit).next(rt=>{rt.forEach(Pt=>{const Gt=We.fromSegments(Pt.documentKey);u.has(Gt)||(u=u.add(Gt),h.push(Gt))})}))}).next(()=>h)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,s,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,s.length),v=m/(null!=t?t.length:1),C=[];for(let D=0;D<m;++D){const R=t?this.Je(t[D/v]):PT,L=this.Ye(e,R,r[D%v],i),U=this.Xe(e,R,s[D%v],u),X=h.map(me=>this.Ye(e,R,me,!0));C.push(...this.createRange(L,U,X))}return C}Ye(e,t,r,i){const s=new ig(e,We.empty(),t,r);return i?s:s.ke()}Xe(e,t,r,i){const s=new ig(e,We.empty(),t,r);return i?s.ke():s}je(e,t){const r=new Qz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const h of s)r.$e(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return fe.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let h=new Kn(ci.comparator),m=!1;for(const v of u.filters){const C=v;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:h=h.add(C.field))}for(const v of u.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Aw;for(const i of Kp(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Ne(i.kind);rg.fe.Zt(s,u)}return r.Se()}Je(e){const t=new Aw;return rg.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Aw;return rg.fe.Zt(Wp(this.databaseId,t),r.Ne(function(i){const s=Kp(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Aw);let s=0;for(const u of Kp(e)){const h=r[s++];for(const m of i)if(this.en(t,u.fieldPath)&&cw(h))i=this.nn(i,u,h);else{const v=m.Ne(u.kind);rg.fe.Zt(h,v)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const h of i){const m=new Aw;m.seed(h.Se()),rg.fe.Zt(u,m.Ne(t.kind)),s.push(m)}return s}en(e,t){return!!e.filters.find(r=>r instanceof Yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=FT(e),i=LT(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const u=[];return fe.forEach(s,h=>i.get([h.indexId,this.uid]).next(m=>{u.push(function(v,C){const D=C?new hw(C.sequenceNumber,new Ll(ng(C.readTime),new We(Uu(C.documentKey)),C.largestBatchId)):hw.empty(),R=v.fields.map(([L,U])=>new CT(ci.fromServerFormat(L),U));return new ET(v.indexId,v.collectionGroup,R,D)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=FT(e),s=LT(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>fe.forEach(h,m=>{return s.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:tg((R=r).readTime),documentKey:Hs(R.documentKey.path),largestBatchId:R.largestBatchId});var R})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?fe.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),fe.forEach(h,m=>this.on(e,i,m).next(v=>{const C=this.un(s,m);return v.isEqual(C)?fe.resolve():this.an(e,s,m,v,C)}))))})}cn(e,t,r,i){return Mw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Mw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Mw(e);let s=new Kn(sg);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,h)=>{s=s.add(new ig(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}un(e,t){let r=new Kn(sg);const i=this.Ze(t,e);if(null==i)return r;const s=Dk(t);if(null!=s){const u=e.data.field(s.fieldPath);if(cw(u))for(const h of u.arrayValue.values||[])r=r.add(new ig(t.indexId,e.key,this.Je(h),i))}else r=r.add(new ig(t.indexId,e.key,PT,i));return r}an(e,t,r,i,s){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,v,C,D){const R=h.getIterator(),L=m.getIterator();let U=$_(R),X=$_(L);for(;U||X;){let me=!1,Je=!1;if(U&&X){const nt=v(U,X);nt<0?Je=!0:nt>0&&(me=!0)}else null!=U?Je=!0:me=!0;me?(C(X),X=$_(L)):Je?(D(U),U=$_(R)):(U=$_(R),X=$_(L))}}(i,s,sg,h=>{u.push(this.cn(e,t,r,h))},h=>{u.push(this.hn(e,t,r,h))}),fe.waitFor(u)}rn(e){let t=1;return LT(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>sg(u,h)).filter((u,h,m)=>!h||0!==sg(u,m[h-1]));const i=[];i.push(e);for(const u of r){const h=sg(u,e),m=sg(u,t);if(0===h)i[0]=e.ke();else if(h>0&&m<0)i.push(u),i.push(u.ke());else if(m>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,PT,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,PT,[]]));return s}getMinOffset(e,t){let r;return fe.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?(!r||hV(s.indexState.offset,r)<0)&&(r=s.indexState.offset):r=Ll.min()})).next(()=>r)}}function vB(n){return Ti(n,"collectionParents")}function Mw(n){return Ti(n,"indexEntries")}function FT(n){return Ti(n,"indexConfiguration")}function LT(n){return Ti(n,"indexState")}const bB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wo(e,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.Wt({range:u},(C,D,R)=>(h++,R.delete()));s.push(m.next(()=>{Ot(1===h)}));const v=[];for(const C of t.mutations){const D=iB(e,C.key.path,t.batchId);s.push(i.delete(D)),v.push(C.key)}return fe.waitFor(s).next(()=>v)}function VT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);class qk{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ot(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new qk(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mh(e).Wt({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=X_(e),u=Mh(e);return u.add({}).next(h=>{Ot("number"==typeof h);const m=new Bk(h,t,r,i),v=function(R,L,U){const X=U.baseMutations.map(Je=>Iw(R.Jt,Je)),me=U.mutations.map(Je=>Iw(R.Jt,Je));return{userId:L,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:X,mutations:me}}(this.M,this.userId,m),C=[];let D=new Kn((R,L)=>Ht(R.canonicalString(),L.canonicalString()));for(const R of i){const L=iB(this.userId,R.key.path,h);D=D.add(R.key.path.popLast()),C.push(u.put(v)),C.push(s.put(L,Dz))}return D.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.ln[h]=m.keys()}),fe.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return Mh(e).get(t).next(r=>r?(Ot(r.userId===this.userId),J_(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Mh(e).Wt({index:"userMutationsIndex",range:i},(u,h,m)=>{h.userId===this.userId&&(Ot(h.batchId>=r),s=J_(this.M,h)),m.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>J_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=RT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return X_(e).Wt({range:i},(u,h,m)=>{const[v,C,D]=u,R=Uu(C);if(v===this.userId&&t.path.isEqual(R))return Mh(e).get(D).next(L=>{if(!L)throw ht();Ot(L.userId===this.userId),s.push(J_(this.M,L))});m.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Ht);const i=[];return t.forEach(s=>{const u=RT(this.userId,s.path),h=IDBKeyRange.lowerBound(u),m=X_(e).Wt({range:h},(v,C,D)=>{const[R,L,U]=v,X=Uu(L);R===this.userId&&s.path.isEqual(X)?r=r.add(U):D.done()});i.push(m)}),fe.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=RT(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new Kn(Ht);return X_(e).Wt({range:u},(m,v,C)=>{const[D,R,L]=m,U=Uu(R);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(h=h.add(L)):C.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Mh(e).get(s).next(u=>{if(null===u)throw ht();Ot(u.userId===this.userId),r.push(J_(this.M,u))}))}),fe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wB(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return X_(e).Wt({range:r},(s,u,h)=>{if(s[0]===this.userId){const m=Uu(s[1]);i.push(m)}else h.done()}).next(()=>{Ot(0===i.length)})})}containsKey(e,t){return EB(e,this.userId,t)}wn(e){return CB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EB(n,e,t){const r=RT(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return X_(n).Wt({range:s,jt:!0},(h,m,v)=>{const[C,D,R]=h;C===e&&D===i&&(u=!0),v.done()}).next(()=>u)}function Mh(n){return Ti(n,"mutations")}function X_(n){return Ti(n,"documentMutations")}function CB(n){return Ti(n,"mutationQueues")}class og{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new og(0)}static yn(){return new og(-1)}}class eq{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new og(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>St.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ey(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ot(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ey(e).Wt((u,h)=>{const m=Dw(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,s.push(this.removeTargetData(e,m)))}).next(()=>fe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ey(e).Wt((r,i)=>{const s=Dw(i);t(s)})}pn(e){return IB(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}In(e,t){return IB(e).put("targetGlobalKey",t)}Tn(e,t){return ey(e).put(fB(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ey(e).Wt({range:i,index:"queryTargetsIndex"},(u,h,m)=>{const v=Dw(h);fw(t,v.target)&&(s=v,m.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=xh(e);return t.forEach(u=>{const h=Hs(u.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=xh(e);return fe.forEach(t,s=>{const u=Hs(s.path);return fe.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=xh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xh(e);let s=Mn();return i.Wt({range:r,jt:!0},(u,h,m)=>{const v=Uu(u[1]),C=new We(v);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Hs(t.path),i=IDBKeyRange.bound([r],[XL(r)],!1,!0);let s=0;return xh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,h],m,v)=>{0!==u&&(s++,v.done())}).next(()=>s>0)}Et(e,t){return ey(e).get(t).next(r=>r?Dw(r):null)}}function ey(n){return Ti(n,"targets")}function IB(n){return Ti(n,"targetGlobal")}function xh(n){return Ti(n,"targetDocuments")}function ag(n){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,Ee.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==aB)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Wk.apply(this,arguments)}function TB([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class tq{constructor(e){this.An=e,this.buffer=new Kn(TB),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nq{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Xp(i)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ag(i)}yield t.Sn(e)}))}}class rq{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(ta.A);const r=new tq(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(bB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bB):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,s,u,h,m,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(v=Date.now(),wk()<=Fl.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(m-h)+`ms\n\tRemoved ${D} documents in `+(v-m)+`ms\nTotal Duration: ${v-C}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class iq{constructor(e,t){this.db=e,this.garbageCollector=new rq(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return BT(e,r)}removeReference(e,t,r){return BT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return BT(e,t)}On(e,t){return function(r,i){let s=!1;return CB(r).zt(u=>EB(r,u,i).next(h=>(h&&(s=!0),fe.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(e,(u,h)=>{if(h<=t){const m=this.On(e,u).next(v=>{if(!v)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,St.min()),xh(e).delete([0,Hs(u.path)])))});i.push(m)}}).next(()=>fe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return BT(e,t)}Mn(e,t){const r=xh(e);let i,s=ta.A;return r.Wt({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:v})=>{0===u?(s!==ta.A&&t(new We(Uu(i)),s),s=v,i=m):s=ta.A}).next(()=>{s!==ta.A&&t(new We(Uu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function BT(n,e){return xh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hs(e.path),sequenceNumber:r}));var r}class DB{constructor(){this.changes=new Sh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sq{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lg(e).put(r)}removeEntry(e,t,r){return lg(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],OT(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=er.newInvalidDocument(t);return lg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xw(t))},(i,s)=>{r=this.$n(t,s)}).next(()=>r)}Bn(e,t){let r={size:0,document:er.newInvalidDocument(t)};return lg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xw(t))},(i,s)=>{r={document:this.$n(t,s),size:VT(s)}}).next(()=>r)}getEntries(e,t){let r=Pa();return this.Ln(e,t,(i,s)=>{const u=this.$n(i,s);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=Pa(),i=new Nr(We.comparator);return this.Ln(e,t,(s,u)=>{const h=this.$n(s,u);r=r.insert(s,h),i=i.insert(s,VT(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let i=new Kn(MB);t.forEach(m=>i=i.add(m));const s=IDBKeyRange.bound(xw(i.first()),xw(i.last())),u=i.getIterator();let h=u.getNext();return lg(e).Wt({index:"documentKeyIndex",range:s},(m,v,C)=>{const D=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&MB(h,D)<0;)r(h,null),h=u.getNext();h&&h.isEqual(D)&&(r(h,v),h=u.hasNext()?u.getNext():null),h?C.Ut(xw(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),OT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lg(e).qt(IDBKeyRange.bound(i,s,!0)).next(u=>{let h=Pa();for(const m of u){const v=this.$n(We.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Pa();const u=AB(t,r),h=AB(t,Ll.max());return lg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,v,C)=>{const D=this.$n(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);s=s.insert(D.key,D),s.size===i&&C.done()}).next(()=>s)}newChangeBuffer(e){return new oq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SB(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Fn(e,t){return SB(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=YV(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=ng(e.noDocument.readTime);t=er.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=We.fromSegments(e.unknownDocument.path),i=ng(e.unknownDocument.version);t=er.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Rr(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return er.newInvalidDocument(e)}}class oq extends DB{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Sh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kn((s,u)=>Ht(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,h.readTime)),u.isValidDocument()){const m=hB(this.Kn.M,u);i=i.add(s.path.popLast()),r+=VT(m)-h.size,t.push(this.Kn.addEntry(e,s,m))}else if(r-=h.size,this.trackRemovals){const m=hB(this.Kn.M,u.convertToNoDocument(St.min()));t.push(this.Kn.addEntry(e,s,m))}}),i.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((s,u)=>{this.Gn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function SB(n){return Ti(n,"remoteDocumentGlobal")}function lg(n){return Ti(n,"remoteDocumentsV14")}function xw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AB(n,e){const t=e.documentKey.path.toArray();return[n,OT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ht(t[s],r[s]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class aq{constructor(e){this.M=e}kt(e,t,r,i){const s=new NT("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rB,{unique:!0}),h.createObjectStore("documentMutations"),xB(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=fe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),xB(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").qt().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rB,{unique:!0});const C=m.store("mutations"),D=v.map(R=>C.put(R));return fe.waitFor(D)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(s))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:Vz});m.createIndex("collectionPathOverlayIndex",Bz,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Uz,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:Sz});m.createIndex("documentKeyIndex",Az),m.createIndex("collectionGroupIndex",Mz)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Oz}).createIndex("sequenceNumberIndex",Pz,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Fz}).createIndex("documentKeyIndex",Lz,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=VT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>fe.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(h=>fe.forEach(h,m=>{Ot(m.userId===s.userId);const v=J_(this.M,m);return wB(e,s.userId,v).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((u,h)=>{const m=new ln(u),v=[0,Hs(m)];s.push(t.get(v).next(C=>C?fe.resolve():t.put({targetId:0,path:Hs(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>fe.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Nz});const r=t.store("collectionParents"),i=new zk,s=u=>{if(i.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:Hs(m)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,h)=>{const m=new ln(u);return s(m.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,h,m],v)=>{const C=Uu(h);return s(C.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const s=Dw(i),u=fB(this.M,s);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((s,u)=>{const h=t.store("remoteDocumentsV14"),m=(v=u,v.document?new We(ln.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):ht()).path.toArray();var v;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(C))}).next(()=>fe.waitFor(i))}}function xB(n){n.createObjectStore("targetDocuments",{keyPath:kz}).createIndex("documentTargetsIndex",Rz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xz,{unique:!0}),n.createObjectStore("targetGlobal")}const Kk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zk{constructor(e,t,r,i,s,u,h,m,v,C,D=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=s,this.window=u,this.document=h,this.Xn=v,this.Zn=C,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=R=>Promise.resolve(),!Zk.vt())throw new ke(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iq(this,i),this.hs=t+"main",this.M=new dB(m),this.ls=new Vl(this.hs,this.ts,new aq(this.M)),this.fs=new eq(this.referenceDelegate,this.M),this.ds=new sq(this.M),this._s=new qz,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Kk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ta(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>UT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Xp(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return kw(e).get("owner").next(t=>fe.resolve(this.Ps(t)))}Vs(e){return UT(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ti(r,"clientMetadata");return i.qt().next(s=>{const u=e.Ds(s,18e5),h=s.filter(m=>-1===u.indexOf(m));return fe.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):kw(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Kk);return!1}}return!(!this.networkEnabled||!this.inForeground)||UT(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new cB(t,ta.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>UT(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return qk.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Xz(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return $k.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(u=this.ts)?Hz:13===u?oB:12===u?jz:11===u?sB:void ht();var u;let h;return this.ls.runTransaction(e,i,s,m=>(h=new cB(m,this.es?this.es.next():ta.A),"readwrite-primary"===t?this.Es(h).next(v=>!!v||this.As(h)).next(v=>{if(!v)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ke(he.FAILED_PRECONDITION,aB);return r(h)}).next(v=>this.bs(h).next(()=>v)):this.$s(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}$s(e){return kw(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(he.FAILED_PRECONDITION,Kk)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kw(e).put("owner",t)}static vt(){return Vl.vt()}Rs(e){const t=kw(e);return t.get("owner").next(r=>this.Ps(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kw(n){return Ti(n,"owner")}function UT(n){return Ti(n,"clientMetadata")}function Yk(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lq{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):Mk(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new We(t)).next(r=>{let i=Ok();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let s=Ok();return this.indexManager.getCollectionParents(e,i).next(u=>fe.forEach(u,h=>{const m=(v=t,C=h.child(i),new Kc(C,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,C;return this.zs(e,m,r).next(v=>{v.forEach((C,D)=>{s=s.insert(C,D)})})}).next(()=>s))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const u of s)for(const h of u.mutations){const m=h.key;let v=i.get(m);null==v&&(v=er.newInvalidDocument(m),i=i.insert(m,v)),Rk(h,v,u.localWriteTime),v.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((s,u)=>{kk(t,u)||(i=i.remove(s))}),i))}}class Qk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Mn(),i=Mn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Qk(e,t.fromCache,r,i)}}class kB{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(s=>s||this.ei(e,t,i,r)).next(s=>s||this.ni(e,t))}ti(e,t){return fe.resolve(null)}ei(e,t,r,i){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(St.min())?this.ni(e,t):this.Zs.Ks(e,r).next(s=>{const u=this.si(t,s);return this.ii(t,u,r,i)?this.ni(e,t):(wk()<=Fl.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xk(t)),this.ri(e,u,t,dV(i,-1)))})}si(e,t){let r=new Kn(IV(e));return t.forEach((i,s)=>{kk(e,s)&&(r=r.add(s))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,t){return wk()<=Fl.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",xk(t)),this.Zs.Qs(e,t,Ll.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class uq{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Nr(Ht),this.ai=new Sh(s=>Zp(s),fw),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new lq(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function RB(n,e,t,r){return new uq(n,e,t,r)}function NB(n,e){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,Ee.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(s=>(i=s,t.li(e),t.Bs.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let m=Mn();for(const v of i){u.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}for(const v of s){h.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}return t.fi.Ks(r,m).next(v=>({di:v,removedBatchIds:u,addedBatchIds:h}))})})}),Jk.apply(this,arguments)}function cq(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(u,h,m,v){const C=m.batch,D=C.keys();let R=fe.resolve();return D.forEach(L=>{R=R.next(()=>v.getEntry(h,L)).next(U=>{const X=m.docVersions.get(L);Ot(null!==X),U.version.compareTo(X)<0&&(C.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),v.addEntry(U)))})}),R.next(()=>u.Bs.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function OB(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function dq(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((v,C)=>{const D=i.get(C);if(!D)return;h.push(t.fs.removeMatchingKeys(s,v.removedDocuments,C).next(()=>t.fs.addMatchingKeys(s,v.addedDocuments,C)));let R=D.withSequenceNumber(s.currentSequenceNumber);var L,U,X;e.targetMismatches.has(C)?R=R.withResumeToken(di.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),i=i.insert(C,R),U=R,X=v,(0===(L=D).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(s,R))});let m=Pa();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,v))}),h.push(PB(s,u,e.documentUpdates).next(v=>{m=v})),!r.isEqual(St.min())){const v=t.fs.getLastRemoteSnapshotVersion(s).next(C=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(v)}return fe.waitFor(h).next(()=>u.apply(s)).next(()=>t.fi.Gs(s,m)).next(()=>m)}).then(s=>(t.ui=i,s))}function PB(n,e,t){let r=Mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=Pa();return t.forEach((u,h)=>{const m=i.get(u);h.isNoDocument()&&h.version.isEqual(St.min())?(e.removeEntry(u,h.readTime),s=s.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),s=s.insert(u,h)):Ve("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),s})}function hq(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function ty(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(s=>s?(i=s,fe.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new Ah(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function ny(n,e,t){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),i=r.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Xp(u))throw u;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),Xk.apply(this,arguments)}function jT(n,e,t){const r=Ye(n);let i=St.min(),s=Mn();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,v){const C=Ye(h),D=C.ai.get(v);return void 0!==D?fe.resolve(C.ui.get(D)):C.fs.getTargetData(m,v)}(r,u,Oa(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{s=m})}).next(()=>r.oi.Qs(u,e,t?i:St.min(),t?s:Mn())).next(h=>(VB(r,CV(e),h),{documents:h,_i:s})))}function FB(n,e){const t=Ye(n),r=Ye(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(u=>u?u.target:null))}function LB(n,e){const t=Ye(n),r=t.ci.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,dV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(VB(t,e,i),i))}function VB(n,e,t){let r=St.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ci.set(e,r)}function eR(){return eR=(0,Ee.Z)(function*(n,e,t,r){const i=Ye(n);let s=Mn(),u=Pa();for(const v of t){const C=e.wi(v.metadata.name);v.document&&(s=s.add(C));const D=e.mi(v);D.setReadTime(e.gi(v.metadata.readTime)),u=u.insert(C,D)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),m=yield ty(i,(v=r,Oa(q_(ln.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>PB(v,h,u).next(C=>(h.apply(v),C)).next(C=>i.fs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.fs.addMatchingKeys(v,s,m.targetId)).next(()=>i.fi.Gs(v,C)).next(()=>C)))}),eR.apply(this,arguments)}function pq(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,Ee.Z)(function*(n,e,t=Mn()){const r=yield ty(n,Oa(Hk(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Ii(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(s,e);const h=r.withResumeToken(di.EMPTY_BYTE_STRING,u);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(s,h).next(()=>i.fs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.fs.addMatchingKeys(s,t,r.targetId)).next(()=>i._s.saveNamedQuery(s,e))})}),tR.apply(this,arguments)}class gq{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return fe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ii(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Hk(r.bundledQuery),readTime:Ii(r.readTime)}),fe.resolve();var r}}class mq{constructor(){this.overlays=new Nr(We.comparator),this.Ii=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=yw(),s=t.length+1,u=new We(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===s&&m.largestBatchId>r&&i.set(m.getKey(),m)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Nr((v,C)=>v-C);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=s.get(v.largestBatchId);null===C&&(C=yw(),s=s.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const h=yw(),m=s.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,C)=>h.set(v,C)),!(h.size()>=i)););return fe.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new jk(t,r));let s=this.Ii.get(t);void 0===s&&(s=Mn(),this.Ii.set(t,s)),this.Ii.set(t,s.add(r.key))}}class nR{constructor(){this.Ti=new Kn(Di.Ei),this.Ai=new Kn(Di.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Di(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Di(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new We(new ln([])),r=new Di(t,e),i=new Di(t,e+1),s=[];return this.Ai.forEachInRange([r,i],u=>{this.Pi(u),s.push(u.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new We(new ln([])),r=new Di(t,e),i=new Di(t,e+1);let s=Mn();return this.Ai.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Di(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return We.comparator(e.key,t.key)||Ht(e.Ci,t.Ci)}static Ri(e,t){return Ht(e.Ci,t.Ci)||We.comparator(e.key,t.key)}}class _q{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Kn(Di.Ei)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const s=this.xi;this.xi++;const u=new Bk(s,t,r,i);this.Bs.push(u);for(const h of i)this.Ni=this.Ni.add(new Di(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return fe.resolve(u)}lookupMutationBatch(e,t){return fe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),s=i<0?0:i;return fe.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([r,i],u=>{const h=this.ki(u.Ci);s.push(h)}),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Ht);return t.forEach(i=>{const s=new Di(i,0),u=new Di(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,u],h=>{r=r.add(h.Ci)})}),fe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;We.isDocumentKey(s)||(s=s.child(""));const u=new Di(new We(s),0);let h=new Kn(Ht);return this.Ni.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.Ci)),!0)},u),fe.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ot(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return fe.forEach(t.mutations,i=>{const s=new Di(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Di(t,0),i=this.Ni.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return fe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class yq{constructor(e){this.$i=e,this.docs=new Nr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let r=Pa();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():er.newInvalidDocument(i))}),fe.resolve(r)}getAllFromCollection(e,t,r){let i=Pa();const s=new We(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||hV(U$(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}Bi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vq(this)}getSize(e){return fe.resolve(this.size)}}class vq extends DB{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class bq{constructor(e){this.persistence=e,this.Li=new Sh(t=>Zp(t),fw),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ui=0,this.qi=new nR,this.targetCount=0,this.Ki=og.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),fe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new og(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Li.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),fe.waitFor(s).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),fe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.qi.containsKey(t))}}class wq{constructor(e,t){this.Gi={},this.overlays={},this.es=new ta(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new bq(this),this.indexManager=new Jz,this.ds=new yq(r=>this.referenceDelegate.Qi(r)),this.M=new dB(t),this._s=new gq(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new _q(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new Eq(this.es.next());return this.referenceDelegate.ji(),r(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,t){return fe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class Eq extends lB{constructor(e){super(),this.currentSequenceNumber=e}}class rR{constructor(e){this.persistence=e,this.Hi=new nR,this.Ji=null}static Yi(e){return new rR(e)}get Xi(){if(this.Ji)return this.Ji;throw ht()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xi,r=>{const i=We.fromPath(r);return this.Zi(e,i).next(s=>{s||t.removeEntry(i,St.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return fe.or([()=>fe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function BB(n,e){return`firestore_clients_${n}_${e}`}function UB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iR(n,e){return`firestore_targets_${n}_${e}`}class HT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new ke(i.error.code,i.error.message))),u?new HT(e,t,i.state,s):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ke(r.error.code,r.error.message))),s?new Rw(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=xT();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=rV(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new GT(e,s):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sR{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sR(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oR{constructor(){this.activeTargetIds=xT()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aR{constructor(e,t,r,i,s){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Nr(Ht),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=BB(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new oR),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const s=e.getItem(BB(e.persistenceKey,i));if(s){const u=GT.tr(i,s);u&&(e.ar=e.ar.insert(u.clientId,u))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iR(this.persistenceKey,e));if(r){const i=Rw.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iR(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(s){let u=ta.A;if(null!=s)try{const h=JSON.parse(s);Ot("number"==typeof h),u=h}catch(h){zr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==ta.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new HT(this.currentUser,e,t,r),s=UB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.er())}Ar(e){const t=UB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=iR(this.persistenceKey,e),s=new Rw(e,t,r);this.setItem(i,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return GT.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return HT.tr(new Ki(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return Rw.tr(i,t)}pr(e){return sR.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),s=this.Tr(r),u=[],h=[];return s.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{s.has(m)||h.push(m)}),this.syncEngine.Lr(u,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=xT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class jB{constructor(){this.Ur=new oR,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new oR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cq{Kr(e){}shutdown(){}}class HB{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Iq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Tq{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Dq extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const u=this.ho(e,t);Ve("RestConnection","Sending: ",u,r);const h={};return this.lo(h,i,s),this.fo(e,u,h,r).then(m=>(Ve("RestConnection","Received: ",m),m),m=>{throw iw("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}_o(e,t,r,i,s){return this.co(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+U_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.uo}/v1/${t}:${Iq[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const h=new I$;h.listenOnce(w$.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case bk.NO_ERROR:const v=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(v)),s(v);break;case bk.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),u(new ke(he.DEADLINE_EXCEEDED,"Request time out"));break;case bk.HTTP_ERROR:const C=h.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const R=function(L){const U=L.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(U)>=0?U:he.UNKNOWN}(D.status);u(new ke(R,D.message))}else u(new ke(he.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ke(he.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=v$(),u=b$(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new C$({})),this.lo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Ve("Connection","Creating WebChannel: "+m,h);const v=s.createWebChannel(m,h);let C=!1,D=!1;const R=new Tq({Jr:U=>{D?Ve("Connection","Not sending because WebChannel is closed:",U):(C||(Ve("Connection","Opening WebChannel transport."),v.open(),C=!0),Ve("Connection","WebChannel sending:",U),v.send(U))},Yr:()=>v.close()}),L=(U,X,me)=>{U.listen(X,Je=>{try{me(Je)}catch(nt){setTimeout(()=>{throw nt},0)}})};return L(v,vT.EventType.OPEN,()=>{D||Ve("Connection","WebChannel transport opened.")}),L(v,vT.EventType.CLOSE,()=>{D||(D=!0,Ve("Connection","WebChannel transport closed"),R.ro())}),L(v,vT.EventType.ERROR,U=>{D||(D=!0,iw("Connection","WebChannel transport errored:",U),R.ro(new ke(he.UNAVAILABLE,"The operation could not be completed")))}),L(v,vT.EventType.MESSAGE,U=>{var X;if(!D){const me=U.data[0];Ot(!!me);const Je=me,nt=Je.error||(null===(X=Je[0])||void 0===X?void 0:X.error);if(nt){Ve("Connection","WebChannel received error:",nt);const ct=nt.status;let rt=function(Gt){const bn=Wr[Gt];if(void 0!==bn)return BV(bn)}(ct),Pt=nt.message;void 0===rt&&(rt=he.INTERNAL,Pt="Unknown error status: "+ct+" with message "+nt.message),D=!0,R.ro(new ke(rt,Pt)),v.close()}else Ve("Connection","WebChannel received:",me),R.oo(me)}}),L(u,E$.STAT_EVENT,U=>{U.stat===KL.PROXY?Ve("Connection","Detected buffering proxy"):U.stat===KL.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.io()},0),R}}function GB(){return"undefined"!=typeof window?window:null}function $T(){return"undefined"!=typeof document?document:null}function Nw(n){return new pz(n,!0)}class lR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class $B{constructor(e,t,r,i,s,u,h,m){this.Yn=e,this.Vo=r,this.vo=i,this.So=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new lR(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new ke(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sq extends $B{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=e.targetChange.targetIds||[],s=function(m,v){return m.N?(Ot(void 0===v||"string"==typeof v),di.fromBase64String(v||"")):(Ot(void 0===v||v instanceof Uint8Array),di.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const v=void 0===m.code?he.UNKNOWN:BV(m.code);return new ke(v,m.message||"")}(u);t=new jV(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Bu(n,r.document.name),s=Ii(r.document.updateTime),u=new ms({mapValue:{fields:r.document.fields}}),h=er.newFoundDocument(i,s,u);t=new kT(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Bu(n,r.document),s=r.readTime?Ii(r.readTime):St.min(),u=er.newNoDocument(i,s);t=new kT([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Bu(n,r.document);t=new kT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,s=new sz(r.count||0);t=new UV(r.targetId,s)}}var m;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return St.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?St.min():s.readTime?Ii(s.readTime):St.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Cw(this.M),t.addTarget=function(i,s){let u;const h=s.target;return u=TT(h)?{documents:QV(i,h)}:{query:JV(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=zV(i,s.resumeToken):s.snapshotVersion.compareTo(St.min())>0&&(u.readTime=ww(i,s.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Cw(this.M),t.removeTarget=e,this.Lo(t)}}class Aq extends $B{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Ot(void 0!==e),n.map(t=>function(r,i){let s=Ii(r.updateTime?r.updateTime:i);return s.isEqual(St.min())&&(s=Ii(i)),new nz(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.tu(r,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Cw(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Iw(this.M,r))};this.Lo(t)}}class Mq extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(he.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(he.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class xq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(zr(t),this.uu=!1):Ve("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class kq{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var m;kh(u)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ee.Z)(function*(v){const C=Ye(v);C.wu.add(4),yield ry(C),C.yu.set("Unknown"),C.wu.delete(4),yield Ow(C)}),function(v){return m.apply(this,arguments)})(u))}))}),this.yu=new xq(r,i)}}function Ow(n){return uR.apply(this,arguments)}function uR(){return uR=(0,Ee.Z)(function*(n){if(kh(n))for(const e of n.mu)yield e(!0)}),uR.apply(this,arguments)}function ry(n){return cR.apply(this,arguments)}function cR(){return cR=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),cR.apply(this,arguments)}function zT(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),fR(t)?hR(t):sy(t).Mo()&&dR(t,e))}function Pw(n,e){const t=Ye(n),r=sy(t);t._u.delete(e),r.Mo()&&zB(t,e),0===t._u.size&&(r.Mo()?r.$o():kh(t)&&t.yu.set("Unknown"))}function dR(n,e){n.pu.Z(e.targetId),sy(n).Ho(e)}function zB(n,e){n.pu.Z(e),sy(n).Jo(e)}function hR(n){n.pu=new dz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),sy(n).start(),n.yu.au()}function fR(n){return kh(n)&&!sy(n).ko()&&n._u.size>0}function kh(n){return 0===Ye(n).wu.size}function qB(n){n.pu=void 0}function Rq(n){return pR.apply(this,arguments)}function pR(){return pR=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{dR(n,e)})}),pR.apply(this,arguments)}function Nq(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,Ee.Z)(function*(n,e){qB(n),fR(n)?(n.yu.lu(e),hR(n)):n.yu.set("Unknown")}),gR.apply(this,arguments)}function Oq(n,e,t){return mR.apply(this,arguments)}function mR(){return mR=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof jV&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i._u.delete(h),i.pu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qT(n,r)}else if(e instanceof kT?n.pu.ut(e):e instanceof UV?n.pu._t(e):n.pu.ht(e),!t.isEqual(St.min()))try{const r=yield OB(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.pu.yt(s);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i._u.get(m);v&&i._u.set(m,v.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const m=i._u.get(h);if(!m)return;i._u.set(h,m.withResumeToken(di.EMPTY_BYTE_STRING,m.snapshotVersion)),zB(i,h);const v=new Ah(m.target,h,1,m.sequenceNumber);dR(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield qT(n,r)}var r}),mR.apply(this,arguments)}function qT(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,Ee.Z)(function*(n,e,t){if(!Xp(e))throw e;n.wu.add(1),yield ry(n),n.yu.set("Offline"),t||(t=()=>OB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Ow(n)}))}),_R.apply(this,arguments)}function WB(n,e){return e().catch(t=>qT(n,t,e))}function iy(n){return yR.apply(this,arguments)}function yR(){return yR=(0,Ee.Z)(function*(n){const e=Ye(n),t=Rh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Pq(e);)try{const i=yield hq(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,Fq(e,i)}catch(i){yield qT(e,i)}KB(e)&&ZB(e)}),yR.apply(this,arguments)}function Pq(n){return kh(n)&&n.du.length<10}function Fq(n,e){n.du.push(e);const t=Rh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function KB(n){return kh(n)&&!Rh(n).ko()&&n.du.length>0}function ZB(n){Rh(n).start()}function Lq(n){return vR.apply(this,arguments)}function vR(){return vR=(0,Ee.Z)(function*(n){Rh(n).nu()}),vR.apply(this,arguments)}function Vq(n){return bR.apply(this,arguments)}function bR(){return bR=(0,Ee.Z)(function*(n){const e=Rh(n);for(const t of n.du)e.Zo(t.mutations)}),bR.apply(this,arguments)}function Bq(n,e,t){return wR.apply(this,arguments)}function wR(){return wR=(0,Ee.Z)(function*(n,e,t){const r=n.du.shift(),i=Uk.from(r,e,t);yield WB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield iy(n)}),wR.apply(this,arguments)}function Uq(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,Ee.Z)(function*(n,e){var t;e&&Rh(n).Xo&&(yield(t=(0,Ee.Z)(function*(r,i){if(VV(s=i.code)&&s!==he.ABORTED){const u=r.du.shift();Rh(r).Fo(),yield WB(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield iy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),KB(n)&&ZB(n)}),ER.apply(this,arguments)}function YB(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,Ee.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=kh(t);t.wu.add(3),yield ry(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Ow(t)}),CR.apply(this,arguments)}function IR(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,Ee.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield Ow(t)):e||(t.wu.add(2),yield ry(t),t.yu.set("Unknown"))}),TR.apply(this,arguments)}function sy(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ye(e);return i.iu(),new Sq(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Rq.bind(null,n),eo:Nq.bind(null,n),zo:Oq.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),fR(n)?hR(n):n.yu.set("Unknown")):(yield n.Iu.stop(),qB(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Rh(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ye(e);return i.iu(),new Aq(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Lq.bind(null,n),eo:Uq.bind(null,n),eu:Vq.bind(null,n),tu:Bq.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield iy(n)):(yield n.Tu.stop(),n.du.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class DR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new DR(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Xp(n))return new ke(he.UNAVAILABLE,`${e}: ${n}`);throw n}class ay{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Ok(),this.sortedSet=new Nr(this.comparator)}static emptySet(e){return new ay(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ay)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ay;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QB{constructor(){this.Eu=new Nr(We.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ht():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ly{constructor(e,t,r,i,s,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new ly(e,t,ay.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jq{constructor(){this.Ru=void 0,this.listeners=[]}}class Hq{constructor(){this.queries=new Sh(e=>EV(e),pw),this.onlineState="Unknown",this.bu=new Set}}function SR(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new jq),i)try{s.Ru=yield t.onListen(r)}catch(u){const h=oy(u,`Initialization of query '${xk(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&kR(t)}),AR.apply(this,arguments)}function MR(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),xR.apply(this,arguments)}function Gq(n,e){const t=Ye(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Vu(i)&&(r=!0);u.Ru=i}}r&&kR(t)}function $q(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function kR(n){n.bu.forEach(e=>{e.next()})}class RR{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ly(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ly.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class zq{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class JB{constructor(e){this.M=e}wi(e){return Bu(this.M,e)}mi(e){return e.metadata.exists?YV(this.M,e.document,!1):er.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ii(e)}}class qq{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XB(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new JB(this.M);for(const i of e)if(i.metadata.queries){const s=r.wi(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Mn()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function(n,e,t,r){return eR.apply(this,arguments)}(e.localStore,new JB(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield pq(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function XB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eU{constructor(e){this.key=e}}class tU{constructor(e){this.key=e}}class nU{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Mn(),this.mutatedKeys=Mn(),this.Gu=IV(e),this.Qu=new ay(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new QB,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const R=i.get(C),L=kk(this.query,D)?D:null,U=!!R&&this.mutatedKeys.has(R.key),X=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let me=!1;R&&L?R.data.isEqual(L.data)?U!==X&&(r.track({type:3,doc:L}),me=!0):this.Hu(R,L)||(r.track({type:2,doc:L}),me=!0,(m&&this.Gu(L,m)>0||v&&this.Gu(L,v)<0)&&(h=!0)):!R&&L?(r.track({type:0,doc:L}),me=!0):R&&!L&&(r.track({type:1,doc:R}),me=!0,(m||v)&&(h=!0)),me&&(L?(u=u.add(L),s=X?s.add(C):s.delete(C)):(u=u.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{Qu:u,zu:r,ii:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((v,C)=>function(D,R){const L=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return L(D)-L(R)}(v.type,C.type)||this.Gu(v.doc,C.doc)),this.Ju(r);const u=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,m=h!==this.qu;return this.qu=h,0!==s.length||m?{snapshot:new ly(this.query,e.Qu,i,s,e.mutatedKeys,0===h,m,!1),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new QB,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Mn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new tU(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new eU(r))}),t}ta(e){this.Uu=e._i,this.Ku=Mn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return ly.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Wq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Kq{constructor(e){this.key=e,this.na=!1}}class Zq{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new Sh(h=>EV(h),pw),this.ra=new Map,this.oa=new Set,this.ua=new Nr(We.comparator),this.aa=new Map,this.ca=new nR,this.ha={},this.la=new Map,this.fa=og.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Yq(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,Ee.Z)(function*(n,e){const t=nN(n);let r,i;const s=t.ia.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const u=yield ty(t.localStore,Oa(e));t.isPrimaryClient&&zT(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield OR(t,e,r,"current"===h)}return i}),NR.apply(this,arguments)}function OR(n,e,t,r){return PR.apply(this,arguments)}function PR(){return PR=(0,Ee.Z)(function*(n,e,t,r){n._a=(C,D,R)=>{return(L=(0,Ee.Z)(function*(U,X,me,Je){let nt=X.view.Wu(me);nt.ii&&(nt=yield jT(U.localStore,X.query,!1).then(({documents:Pt})=>X.view.Wu(Pt,nt)));const ct=Je&&Je.targetChanges.get(X.targetId),rt=X.view.applyChanges(nt,U.isPrimaryClient,ct);return zR(U,X.targetId,rt.Xu),rt.snapshot}),function(U,X,me,Je){return L.apply(this,arguments)})(n,C,D,R);var L};const i=yield jT(n.localStore,e,!0),s=new nU(e,i._i),u=s.Wu(i.documents),h=bw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=s.applyChanges(u,n.isPrimaryClient,h);zR(n,t,m.Xu);const v=new Wq(e,t,s);return n.ia.set(e,v),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),m.snapshot}),PR.apply(this,arguments)}function Qq(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(s=>!pw(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ny(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Pw(t.remoteStore,r.targetId),uy(t,r.targetId)}).catch(ag))):(uy(t,r.targetId),yield ny(t.localStore,r.targetId,!0))}),FR.apply(this,arguments)}function LR(){return LR=(0,Ee.Z)(function*(n,e,t){const r=rN(n);try{const i=yield function(s,u){const h=Ye(s),m=Rr.now(),v=u.reduce((D,R)=>D.add(R.key),Mn());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>h.fi.Ks(D,v).next(R=>{C=R;const L=[];for(const U of u){const X=iz(U,C.get(U.key));null!=X&&L.push(new Jp(U.key,X,cV(X.value.mapValue),qr.exists(!0)))}return h.Bs.addMutationBatch(D,m,L,u)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let m=s.ha[s.currentUser.toKey()];m||(m=new Nr(Ht)),m=m.insert(u,h),s.ha[s.currentUser.toKey()]=m}(r,i.batchId,t),yield Zc(r,i.changes),yield iy(r.remoteStore)}catch(i){const s=oy(i,"Failed to persist write");t.reject(s)}}),LR.apply(this,arguments)}function rU(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,Ee.Z)(function*(n,e){const t=Ye(n);try{const r=yield dq(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.aa.get(s);u&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.na=!0:i.modifiedDocuments.size>0?Ot(u.na):i.removedDocuments.size>0&&(Ot(u.na),u.na=!1))}),yield Zc(t,r,e)}catch(r){yield ag(r)}}),VR.apply(this,arguments)}function iU(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((s,u)=>{const h=u.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=Ye(s);h.onlineState=u;let m=!1;h.queries.forEach((v,C)=>{for(const D of C.listeners)D.Pu(u)&&(m=!0)}),m&&kR(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xq(n,e,t){return BR.apply(this,arguments)}function BR(){return BR=(0,Ee.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),s=i&&i.key;if(s){let u=new Nr(We.comparator);u=u.insert(s,er.newNoDocument(s,St.min()));const h=Mn().add(s),m=new vw(St.min(),new Map,new Kn(Ht),u,h);yield rU(r,m),r.ua=r.ua.remove(s),r.aa.delete(e),qR(r)}else yield ny(r.localStore,e,!1).then(()=>uy(r,e,t)).catch(ag)}),BR.apply(this,arguments)}function eW(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield cq(t.localStore,e);$R(t,r,null),GR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zc(t,i)}catch(i){yield ag(i)}}),UR.apply(this,arguments)}function tW(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,Ee.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(s,u){const h=Ye(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.Bs.lookupMutationBatch(m,u).next(C=>(Ot(null!==C),v=C.keys(),h.Bs.removeMutationBatch(m,C))).next(()=>h.Bs.performConsistencyCheck(m)).next(()=>h.fi.Ks(m,v))})}(r.localStore,e);$R(r,e,t),GR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zc(r,i)}catch(i){yield ag(i)}}),jR.apply(this,arguments)}function HR(){return HR=(0,Ee.Z)(function*(n,e){const t=Ye(n);kh(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Ye(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),HR.apply(this,arguments)}function GR(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function $R(n,e,t){const r=Ye(n);let i=r.ha[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||sU(n,r)})}function sU(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Pw(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),qR(n))}function zR(n,e,t){for(const r of t)r instanceof eU?(n.ca.addReference(r.key,e),rW(n,r)):r instanceof tU?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||sU(n,r.key)):ht()}function rW(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oa.add(r),qR(n))}function qR(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new We(ln.fromString(e)),r=n.fa.next();n.aa.set(r,new Kq(t)),n.ua=n.ua.insert(t,r),zT(n.remoteStore,new Ah(Oa(q_(t.path)),r,2,ta.A))}}function Zc(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),i=[],s=[],u=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,m)=>{u.push(r._a(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const C=Qk.Ys(m.targetId,v);s.push(C)}}))}),yield Promise.all(u),r.sa.zo(i),yield(h=(0,Ee.Z)(function*(m,v){const C=Ye(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>fe.forEach(v,R=>fe.forEach(R.Hs,L=>C.persistence.referenceDelegate.addReference(D,R.targetId,L)).next(()=>fe.forEach(R.Js,L=>C.persistence.referenceDelegate.removeReference(D,R.targetId,L)))))}catch(D){if(!Xp(D))throw D;Ve("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const R=D.targetId;if(!D.fromCache){const L=C.ui.get(R),X=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);C.ui=C.ui.insert(R,X)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,s))}),WR.apply(this,arguments)}function iW(n,e){return KR.apply(this,arguments)}function KR(){return KR=(0,Ee.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield NB(t.localStore,e);t.currentUser=e,(i=t).la.forEach(u=>{u.forEach(h=>{h.reject(new ke(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zc(t,r.di)}var i}),KR.apply(this,arguments)}function sW(n,e){const t=Ye(n),r=t.aa.get(e);if(r&&r.na)return Mn().add(r.key);{let i=Mn();const s=t.ra.get(e);if(!s)return i;for(const u of s){const h=t.ia.get(u);i=i.unionWith(h.view.ju)}return i}}function oW(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=yield jT(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&zR(t,e.targetId,i.Xu),i}),ZR.apply(this,arguments)}function aW(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,Ee.Z)(function*(n,e){const t=Ye(n);return LB(t.localStore,e).then(r=>Zc(t,r))}),YR.apply(this,arguments)}function lW(n,e,t,r){return QR.apply(this,arguments)}function QR(){return QR=(0,Ee.Z)(function*(n,e,t,r){const i=Ye(n),s=yield function(u,h){const m=Ye(u),v=Ye(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>v.fn(C,h).next(D=>D?m.fi.Ks(C,D):fe.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield iy(i.remoteStore):"acknowledged"===t||"rejected"===t?($R(i,e,r||null),GR(i,e),h=e,Ye(Ye(i.localStore).Bs)._n(h)):ht(),yield Zc(i,s)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),QR.apply(this,arguments)}function JR(){return JR=(0,Ee.Z)(function*(n,e){const t=Ye(n);if(nN(t),rN(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield oU(t,r.toArray());t.da=!0,yield IR(t.remoteStore,!0);for(const s of i)zT(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(uy(t,u),ny(t.localStore,u,!0))),Pw(t.remoteStore,u)}),yield i,yield oU(t,r),function(s){const u=Ye(s);u.aa.forEach((h,m)=>{Pw(u.remoteStore,m)}),u.ca.Si(),u.aa=new Map,u.ua=new Nr(We.comparator)}(t),t.da=!1,yield IR(t.remoteStore,!1)}}),JR.apply(this,arguments)}function oU(n,e,t){return XR.apply(this,arguments)}function XR(){return XR=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),i=[],s=[];for(const u of e){let h;const m=r.ra.get(u);if(m&&0!==m.length){h=yield ty(r.localStore,Oa(m[0]));for(const v of m){const C=r.ia.get(v),D=yield oW(r,C);D.snapshot&&s.push(D.snapshot)}}else{const v=yield FB(r.localStore,u);h=yield ty(r.localStore,v),yield OR(r,aU(v),u,!1)}i.push(h)}return r.sa.zo(s),i}),XR.apply(this,arguments)}function aU(n){return bV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cW(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function dW(n,e,t,r){return eN.apply(this,arguments)}function eN(){return eN=(0,Ee.Z)(function*(n,e,t,r){const i=Ye(n);if(i.da)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield LB(i.localStore,CV(s[0])),h=vw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Zc(i,u,h);break}case"rejected":yield ny(i.localStore,e,!0),uy(i,e,r);break;default:ht()}}),eN.apply(this,arguments)}function hW(n,e,t){return tN.apply(this,arguments)}function tN(){return tN=(0,Ee.Z)(function*(n,e,t){const r=nN(n);if(r.da){for(const i of e){if(r.ra.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const s=yield FB(r.localStore,i),u=yield ty(r.localStore,s);yield OR(r,aU(s),u.targetId,!1),zT(r.remoteStore,u)}for(const i of t)r.ra.has(i)&&(yield ny(r.localStore,i,!1).then(()=>{Pw(r.remoteStore,i),uy(r,i)}).catch(ag))}}),tN.apply(this,arguments)}function nN(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xq.bind(null,e),e.sa.zo=Gq.bind(null,e.eventManager),e.sa.wa=$q.bind(null,e.eventManager),e}function rN(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tW.bind(null,e),e}class lU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=Nw(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return RB(this.persistence,new kB,e.initialUser,this.M)}ya(e){return new wq(rR.Yi,this.M)}ga(e){return new jB}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uU extends lU{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield rN(r.Ta.syncEngine),yield iy(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return RB(this.persistence,new kB,e.initialUser,this.M)}pa(e){return new nq(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Yk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new Zk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GB(),$T(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new jB}}class pW extends uU{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof aR&&(r.sharedClientState.syncEngine={$r:lW.bind(null,i),Br:dW.bind(null,i),Lr:hW.bind(null,i),Fs:cW.bind(null,i),Fr:aW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var s=(0,Ee.Z)(function*(u){yield function(n,e){return JR.apply(this,arguments)}(r.Ta.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}ga(e){const t=GB();if(!aR.vt(t))throw new ke(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Yk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iN{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=iW.bind(null,r.syncEngine),yield IR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Hq}createDatastore(e){const t=Nw(e.databaseInfo.databaseId),r=new Dq(e.databaseInfo);return new Mq(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>iU(this.syncEngine,h,0),u=HB.vt()?new HB:new Cq,new kq(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,m,v){const C=new Zq(r,i,s,u,h,m);return v&&(C.da=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ye(t);Ve("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield ry(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cU(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class WT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gW{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ci,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const s=yield e.Sa(i);return new zq(JSON.parse(s),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ee.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class mW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(s,u){const h=Ye(s),m=Cw(h.M)+"/documents",v={documents:u.map(L=>Ew(h.M,L))},C=yield h._o("BatchGetDocuments",m,v),D=new Map;C.forEach(L=>{const U=function(n,e){return"found"in e?function(t,r){Ot(!!r.found);const i=Bu(t,r.found.name),s=Ii(r.found.updateTime),u=new ms({mapValue:{fields:r.found.fields}});return er.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Ot(!!r.missing),Ot(!!r.readTime);const i=Bu(t,r.missing),s=Ii(r.readTime);return er.newNoDocument(i,s)}(n,e):ht()}(h.M,L);D.set(U.key.toString(),U)});const R=[];return u.forEach(L=>{const U=D.get(L.toString());Ot(!!U),R.push(U)}),R}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _w(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=We.fromPath(i);e.mutations.push(new Nk(s,e.precondition(s)))}),yield(r=(0,Ee.Z)(function*(i,s){const u=Ye(i),h=Cw(u.M)+"/documents",m={writes:s.map(v=>Iw(u.M,v))};yield u.co("Commit",h,m)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?qr.updateTime(t):qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new ke(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qr.updateTime(t)}return qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _W{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.xa=r.maxAttempts,this.No=new lR(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new mW(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ma(s)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!aw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!VV(t)}return!1}}class yW{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ki.UNAUTHENTICATED,this.clientId=JL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ee.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=oy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function dU(n,e){return sN.apply(this,arguments)}function sN(){return sN=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(s){r.isEqual(s)||(yield NB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sN.apply(this,arguments)}function hU(n,e){return oN.apply(this,arguments)}function oN(){return oN=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aN(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>YB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>YB(e.remoteStore,s)),n.onlineComponents=e}),oN.apply(this,arguments)}function aN(n){return lN.apply(this,arguments)}function lN(){return lN=(0,Ee.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield dU(n,new lU)),n.offlineComponents}),lN.apply(this,arguments)}function KT(n){return uN.apply(this,arguments)}function uN(){return uN=(0,Ee.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield hU(n,new iN)),n.onlineComponents}),uN.apply(this,arguments)}function fU(n){return aN(n).then(e=>e.persistence)}function cN(n){return aN(n).then(e=>e.localStore)}function pU(n){return KT(n).then(e=>e.remoteStore)}function dN(n){return KT(n).then(e=>e.syncEngine)}function cy(n){return hN.apply(this,arguments)}function hN(){return hN=(0,Ee.Z)(function*(n){const e=yield KT(n),t=e.eventManager;return t.onListen=Yq.bind(null,e.syncEngine),t.onUnlisten=Qq.bind(null,e.syncEngine),t}),hN.apply(this,arguments)}function gU(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,s,u,h,m){const v=new WT({next:D=>{s.enqueueAndForget(()=>MR(i,C));const R=D.docs.has(u);!R&&D.fromCache?m.reject(new ke(he.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&h&&"server"===h.source?m.reject(new ke(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new RR(q_(u.path),v,{includeMetadataChanges:!0,ku:!0});return SR(i,C)}(yield cy(n),n.asyncQueue,e,t,r)})),r.promise}function mU(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,s,u,h,m){const v=new WT({next:D=>{s.enqueueAndForget(()=>MR(i,C)),D.fromCache&&"server"===h.source?m.reject(new ke(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new RR(u,v,{includeMetadataChanges:!0,ku:!0});return SR(i,C)}(yield cy(n),n.asyncQueue,e,t,r)})),r.promise}const _U=new Map;function fN(n,e,t){if(!t)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yU(n,e,t,r){if(!0===e&&!0===r)throw new ke(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vU(n){if(!We.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bU(n){if(We.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZT(n);throw new ke(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wU(n,e){if(e<=0)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class EU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EU({}),this._settingsFrozen=!1,e instanceof Wc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new S$;switch(t.type){case"gapi":const r=t.client;return Ot(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new k$(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_U.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),_U.delete(e),t.terminate())}(this),Promise.resolve()}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class _s{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class ju extends _s{constructor(e,t,r){super(e,t,q_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new We(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function CU(n,e,...t){if(n=(0,P.m9)(n),fN("collection","path",e),n instanceof Fw){const r=ln.fromString(e,...t);return bU(r),new ju(n,null,r)}{if(!(n instanceof tr||n instanceof ju))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return bU(r),new ju(n.firestore,null,r)}}function YT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=JL.R()),fN("doc","path",e),n instanceof Fw){const r=ln.fromString(e,...t);return vU(r),new tr(n,null,new We(r))}{if(!(n instanceof tr||n instanceof ju))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return vU(r),new tr(n.firestore,n instanceof ju?n.converter:null,new We(r))}}function IU(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof tr||n instanceof ju)&&(e instanceof tr||e instanceof ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function TU(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof _s&&e instanceof _s&&n.firestore===e.firestore&&pw(n._query,e._query)&&n.converter===e.converter}class MW{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new lR(this,"async_queue_retry"),this.Qa=()=>{const t=$T();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=$T();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=$T();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ci;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Xp(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,zr("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=DR.createAndSchedule(this,e,t,r,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&ht()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function pN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class xW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends Fw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new MW,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||DU(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||DU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DU(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new L$(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new yW(n._authCredentials,n._appCheckCredentials,n._queue,r)}function SU(n,e,t){const r=new Ci;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield dU(n,t),yield hU(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===he.FAILED_PRECONDITION||s.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function AU(n){if(n._initialized||n._terminated)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(di.fromBase64String(e))}catch(t){throw new ke(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hu(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ug{constructor(e){this._methodName=e}}class QT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const UW=/^__.*__$/;class jW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jp(e,this.data,this.fieldMask,t,this.fieldTransforms):new mw(e,this.data,t,this.fieldTransforms)}}class MU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class JT{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new JT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return tD(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(xU(this.ec)&&UW.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class HW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Nw(e)}lc(e,t,r,i=!1){return new JT({ec:e,methodName:t,hc:r,path:ci.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function cg(n){const e=n._freezeSettings(),t=Nw(n._databaseId);return new HW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XT(n,e,t,r,i,s={}){const u=n.lc(s.merge||s.mergeFields?2:0,e,t,i);yN("Data must be an object, but it was:",u,r);const h=NU(r,u);let m,v;if(s.merge)m=new H_(u.fieldMask),v=u.fieldTransforms;else if(s.mergeFields){const C=[];for(const D of s.mergeFields){const R=vN(e,D,t);if(!u.contains(R))throw new ke(he.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);PU(C,R)||C.push(R)}m=new H_(C),v=u.fieldTransforms.filter(D=>m.covers(D.field))}else m=null,v=u.fieldTransforms;return new jW(new ms(h),m,v)}class Lw extends ug{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lw}}function kU(n,e,t){return new JT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class gN extends ug{_toFieldTransform(e){return new gw(e.path,new K_)}isEqual(e){return e instanceof gN}}class GW extends ug{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=kU(this,e,!0),r=this.fc.map(s=>dg(s,t)),i=new Yp(r);return new gw(e.path,i)}isEqual(e){return this===e}}class $W extends ug{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=kU(this,e,!0),r=this.fc.map(s=>dg(s,t)),i=new Qp(r);return new gw(e.path,i)}isEqual(e){return this===e}}class zW extends ug{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Z_(e.M,SV(e.M,this.dc));return new gw(e.path,t)}isEqual(e){return this===e}}function mN(n,e,t,r){const i=n.lc(1,e,t);yN("Data must be an object, but it was:",i,r);const s=[],u=ms.empty();$p(r,(m,v)=>{const C=eD(e,m,t);v=(0,P.m9)(v);const D=i.oc(C);if(v instanceof Lw)s.push(C);else{const R=dg(v,D);null!=R&&(s.push(C),u.set(C,R))}});const h=new H_(s);return new MU(u,h,i.fieldTransforms)}function _N(n,e,t,r,i,s){const u=n.lc(1,e,t),h=[vN(e,r,t)],m=[i];if(s.length%2!=0)throw new ke(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<s.length;R+=2)h.push(vN(e,s[R])),m.push(s[R+1]);const v=[],C=ms.empty();for(let R=h.length-1;R>=0;--R)if(!PU(v,h[R])){const L=h[R];let U=m[R];U=(0,P.m9)(U);const X=u.oc(L);if(U instanceof Lw)v.push(L);else{const me=dg(U,X);null!=me&&(v.push(L),C.set(L,me))}}const D=new H_(v);return new MU(C,D,u.fieldTransforms)}function RU(n,e,t,r=!1){return dg(t,n.lc(r?4:3,e))}function dg(n,e){if(OU(n=(0,P.m9)(n)))return yN("Unsupported field value:",e,n),NU(n,e);if(n instanceof ug)return function(t,r){if(!xU(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=dg(u,r.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return SV(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Rr.fromDate(t);return{timestampValue:ww(r.M,i)}}if(t instanceof Rr){const i=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ww(r.M,i)}}if(t instanceof QT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hu)return{bytesValue:zV(r.M,t._byteString)};if(t instanceof tr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pk(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${ZT(t)}`)}(n,e)}function NU(n,e){const t={};return tV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$p(n,(r,i)=>{const s=dg(i,e.sc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function OU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof QT||n instanceof Hu||n instanceof tr||n instanceof ug)}function yN(n,e,t){if(!OU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ZT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function vN(n,e,t){if((e=(0,P.m9)(e))instanceof Yc)return e._internalPath;if("string"==typeof e)return eD(n,e);throw tD("Field path arguments must be of type string or ",n,!1,void 0,t)}const qW=new RegExp("[~\\*/\\[\\]]");function eD(n,e,t){if(e.search(qW)>=0)throw tD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yc(...e.split("."))._internalPath}catch(r){throw tD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tD(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(s||u)&&(m+=" (found",s&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new ke(he.INVALID_ARGUMENT,h+n+m)}function PU(n,e){return n.some(t=>t.isEqual(e))}class Vw{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new WW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class WW extends Vw{data(){return super.data()}}function nD(n,e){return"string"==typeof e?eD(n,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}class hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qc extends Vw{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Bw extends Qc{data(e={}){return super.data(e)}}class Nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Bw(this._firestore,this._userDataWriter,r.key,r,new hg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Bw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new hg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new Bw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new hg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),v=s.indexOf(u.doc.key)),{type:KW(u.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function KW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function FU(n,e){return n instanceof Qc&&e instanceof Qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nh&&e instanceof Nh&&n._firestore===e._firestore&&TU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function LU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uw{}function Oh(n,...e){for(const t of e)n=t._apply(n);return n}class ZW extends Uw{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=cg(e.firestore),r=function(i,s,u,h,m,v,C){let D;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){GU(C,v);const L=[];for(const U of C)L.push(HU(h,i,U));D={arrayValue:{values:L}}}else D=HU(h,i,C)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||GU(C,v),D=RU(u,"where",C,"in"===v||"not-in"===v);const R=Yi.create(m,v,D);return function(L,U){if(U.S()){const me=Ak(L);if(null!==me&&!me.isEqual(U.field))throw new ke(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${me.toString()}' and '${U.field.toString()}'`);const Je=Sk(L);null!==Je&&$U(0,U.field,Je)}const X=function(me,Je){for(const nt of me.filters)if(Je.indexOf(nt.op)>=0)return nt.op;return null}(L,function(me){switch(me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==X)throw new ke(he.INVALID_ARGUMENT,X===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${X.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new _s(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Kc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class QW extends Uw{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new z_(i,s);return function(h,m){if(null===Sk(h)){const v=Ak(h);null!==v&&$U(0,v,m.field)}}(r,u),u}(e._query,this._c,this.gc);return new _s(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Kc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class VU extends Uw{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new _s(e.firestore,e.converter,wV(e._query,this.yc,this.Ic))}}class BU extends Uw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=jU(e,this.type,this.Tc,this.Ec);return new _s(e.firestore,e.converter,(i=t,new Kc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class UU extends Uw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=jU(e,this.type,this.Tc,this.Ec);return new _s(e.firestore,e.converter,(i=t,new Kc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function jU(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof Vw)return function(i,s,u,h,m){if(!h)throw new ke(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const C of W_(i))if(C.field.isKeyField())v.push(Wp(s,h.key));else{const D=h.data.field(C.field);if(Ck(D))throw new ke(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=C.field.canonicalString();throw new ke(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}v.push(D)}return new Dh(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=cg(n.firestore);return function(s,u,h,m,v,C){const D=s.explicitOrderBy;if(v.length>D.length)throw new ke(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<v.length;L++){const U=v[L];if(D[L].field.isKeyField()){if("string"!=typeof U)throw new ke(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof U}`);if(!Mk(s)&&-1!==U.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${U}' contains a slash.`);const X=s.path.child(ln.fromString(U));if(!We.isDocumentKey(X))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const me=new We(X);R.push(Wp(u,me))}else{const X=RU(h,m,U);R.push(X)}}return new Dh(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function HU(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new ke(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mk(e)&&-1!==t.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!We.isDocumentKey(r))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wp(n,new We(r))}if(t instanceof tr)return Wp(n,t._key);throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZT(t)}.`)}function GU(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $U(n,e,t){if(!t.isEqual(e))throw new ke(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const s6={maxAttempts:5};class bN{convertValue(e,t="none"){switch(qp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return $p(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new QT(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ow(e));default:return null}}convertTimestamp(e){const t=Ch(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);Ot(tB(r));const i=new Wc(r.get(1),r.get(3)),s=new We(r.popFirst(5));return i.isEqual(t)||zr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function rD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class o6 extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class zU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cg(e)}set(e,t,r){this._verifyNotCommitted();const i=Ph(e,this._firestore),s=rD(i.converter,t,r),u=XT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,qr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ph(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof Yc?_N(this._dataReader,"WriteBatch.update",s._key,t,r,i):mN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ph(e,this._firestore);return this._mutations=this._mutations.concat(new _w(t._key,qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ph(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new ke(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fg extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function qU(n,e,t){n=sn(n,tr);const r=sn(n.firestore,ar),i=rD(n.converter,e,t);return dy(r,[XT(cg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qr.none())])}function WU(n,e,t,...r){n=sn(n,tr);const i=sn(n.firestore,ar),s=cg(i);let u;return u="string"==typeof(e=(0,P.m9)(e))||e instanceof Yc?_N(s,"updateDoc",n._key,e,t,r):mN(s,"updateDoc",n._key,e),dy(i,[u.toMutation(n._key,qr.exists(!0))])}function KU(n,...e){var t,r,i;n=(0,P.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||pN(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(pN(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let m,v,C;if(n instanceof tr)v=sn(n.firestore,ar),C=q_(n._key.path),m={next:D=>{e[u]&&e[u](wN(v,n,D))},error:e[u+1],complete:e[u+2]};else{const D=sn(n,_s);v=sn(D.firestore,ar),C=D._query;const R=new fg(v);m={next:L=>{e[u]&&e[u](new Nh(v,R,D,L))},error:e[u+1],complete:e[u+2]},LU(n._query)}return function(D,R,L,U){const X=new WT(U),me=new RR(R,X,L);return D.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return SR(yield cy(D),me)})),()=>{X.Aa(),D.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return MR(yield cy(D),me)}))}}(Kr(v),C,h,m)}function dy(n,e){return function(t,r){const i=new Ci;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e,t){return LR.apply(this,arguments)}(yield dN(t),r,i)})),i.promise}(Kr(n),e)}function wN(n,e,t){const r=t.docs.get(e._key),i=new fg(n);return new Qc(n,i,e._key,r,new hg(t.hasPendingWrites,t.fromCache),e.converter)}class m6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cg(e)}get(e){const t=Ph(e,this._firestore),r=new o6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const s=i[0];if(s.isFoundDocument())return new Vw(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Vw(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Ph(e,this._firestore),s=rD(i.converter,t,r),u=XT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=Ph(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof Yc?_N(this._dataReader,"Transaction.update",s._key,t,r,i):mN(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Ph(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ph(e,this._firestore),r=new fg(this._firestore);return super.get(e).then(i=>new Qc(this._firestore,r,t._key,i._document,new hg(!1,!1),t.converter))}}function EN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YU(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function QU(){if("undefined"==typeof atob)throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){U_=Pl.SDK_VERSION,(0,Pl._registerComponent)(new Gc.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new ar(i,new M$(t.getProvider("auth-internal")),new R$(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Pl.registerVersion)(ZL,"3.4.9",n),(0,Pl.registerVersion)(ZL,"3.4.9","esm2017")}();class jw{constructor(e){this._delegate=e}static fromBase64String(e){return QU(),new jw(Hu.fromBase64String(e))}static fromUint8Array(e){return YU(),new jw(Hu.fromUint8Array(e))}toBase64(){return QU(),this._delegate.toBase64()}toUint8Array(){return YU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CN(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class D6{enableIndexedDbPersistence(e,t){return function(n,e){AU(n=sn(n,ar));const t=Kr(n),r=n._freezeSettings(),i=new iN;return SU(t,i,new uU(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){AU(n=sn(n,ar));const e=Kr(n),t=n._freezeSettings(),r=new iN;return SU(e,r,new pW(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new ke(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Vl.vt())return Promise.resolve();const i=r+"main";yield Vl.delete(i)}),function(r){return t.apply(this,arguments)})(Yk(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&iw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const s=(n=sn(n,Fw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&iw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Ki.MOCK_USER;else{u=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ke(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ki(m)}n._authCredentials=new A$(new YL(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield fU(n),t=yield pU(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.wu.delete(0),Ow(i)}(t)}))}(Kr(n=sn(n,ar)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield fU(n),t=yield pU(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const s=Ye(i);s.wu.add(0),yield ry(s),s.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=sn(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Ci;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e){return HR.apply(this,arguments)}(yield dN(e),t)})),t.promise}(Kr(n=sn(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new WT(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield cy(n),i=t,Ye(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield cy(n),i=t,void Ye(r).bu.delete(i);var r,i}))}}(Kr(n=sn(n,ar)),pN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hy(this,CU(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fa(this,YT(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $s(this,function(n,e){if(n=sn(n,Fw),fN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(n,null,(t=e,new Kc(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=sn(n,ar);const r=Object.assign(Object.assign({},s6),t);return function(i){if(i.maxAttempts<1)throw new ke(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const i=yield(s=n,KT(s).then(u=>u.datastore));var s;new _W(n.asyncQueue,i,t,e,r).run()})),r.promise}(Kr(n),i=>e(new m6(n,i)),r)}(this._delegate,t=>e(new XU(this,t)))}batch(){return Kr(this._delegate),new e2(new zU(this._delegate,e=>dy(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Kr(n=sn(n,ar)),r=new xW;return function(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,m=function(m,v){if(m instanceof Uint8Array)return cU(m,v);if(m instanceof ArrayBuffer)return cU(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new gW(m,u);var m}(t,Nw(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(n,e,t){const r=Ye(n);var i;(i=(0,Ee.Z)(function*(s,u,h){try{const m=yield u.getMetadata();if(yield function(R,L){const U=Ye(R),X=Ii(L.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",me=>U._s.getBundleMetadata(me,L.id)).then(me=>!!me&&me.createTime.compareTo(X)>=0)}(s.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(XB(m));const v=new qq(m,s.localStore,u.M);let C=yield u.ma();for(;C;){const R=yield v.Fu(C);R&&h._updateProgress(R),C=yield u.ma()}const D=yield v.complete();return yield Zc(s,D.Lu,void 0),yield function(R,L){const U=Ye(R);return U.persistence.runTransaction("Save bundle","readwrite",X=>U._s.saveBundleMetadata(X,L))}(s.localStore,m),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(m){return iw("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var R}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield dN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",s=>i._s.getNamedQuery(s,r))}(yield cN(n),e)}))}(Kr(n=sn(n,ar)),e).then(t=>t?new _s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $s(this,t):null)}}class iD extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new jw(new Hu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fa.forKey(t,this.firestore,null)}}class XU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new iD(e)}get(e){const t=gg(e);return this._delegate.get(t).then(r=>new Hw(this._firestore,new Qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=gg(e);return r?(EN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=gg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=gg(e);return this._delegate.delete(t),this}}class e2{constructor(e){this._delegate=e}set(e,t,r){const i=gg(e);return r?(EN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=gg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=gg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Bw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new pg(e,new iD(e),t),i.set(t,s)),s}}pg.INSTANCES=new WeakMap;class Fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fa(t,new tr(t._delegate,r,new We(e)))}static forKey(e,t,r){return new Fa(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hy(this.firestore,CU(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof tr&&IU(this._delegate,e)}set(e,t){t=EN("DocumentReference.set",t);try{return t?qU(this._delegate,e,t):qU(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WU(this._delegate,e):WU(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return dy(sn(n.firestore,ar),[new _w(n._key,qr.none())])}(this._delegate)}onSnapshot(...e){const t=t2(e),r=n2(e,i=>new Hw(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return KU(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=sn(n,tr);const e=sn(n.firestore,ar),t=Kr(e),r=new fg(e);return function(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,s,u){try{const h=yield function(m,v){const C=Ye(m);return C.persistence.runTransaction("read document","readonly",D=>C.fi.Ls(D,v))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ke(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=oy(h,`Failed to get document '${s} from cache`);u.reject(m)}}),function(i,s,u){return r.apply(this,arguments)})(yield cN(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qc(e,r,n._key,i,new hg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=sn(n,tr);const e=sn(n.firestore,ar);return gU(Kr(e),n._key,{source:"server"}).then(t=>wN(e,n,t))}(this._delegate):function(n){n=sn(n,tr);const e=sn(n.firestore,ar);return gU(Kr(e),n._key).then(t=>wN(e,n,t))}(this._delegate),t.then(r=>new Hw(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fa(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function t2(n){for(const e of n)if("object"==typeof e&&!CN(e))return e;return{}}function n2(n,e){var t,r;let i;return i=CN(n[0])?n[0]:CN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Hw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FU(this._delegate,e._delegate)}}class Gw extends Hw{data(e){const t=this._delegate.data(e);return function(n,e){n||ht()}(void 0!==t),t}}class $s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iD(e)}where(e,t,r){try{return new $s(this.firestore,Oh(this._delegate,function(n,e,t){const r=e,i=nD("where",n);return new ZW(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $s(this.firestore,Oh(this._delegate,function(n,e="asc"){const t=e,r=nD("orderBy",n);return new QW(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $s(this.firestore,Oh(this._delegate,function(n){return wU("limit",n),new VU("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $s(this.firestore,Oh(this._delegate,function(n){return wU("limitToLast",n),new VU("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $s(this.firestore,Oh(this._delegate,function(...n){return new BU("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $s(this.firestore,Oh(this._delegate,function(...n){return new BU("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $s(this.firestore,Oh(this._delegate,function(...n){return new UU("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $s(this.firestore,Oh(this._delegate,function(...n){return new UU("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return TU(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=sn(n,_s);const e=sn(n.firestore,ar),t=Kr(e),r=new fg(e);return function(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,s,u){try{const h=yield jT(i,s,!0),m=new nU(s,h._i),v=m.Wu(h.documents),C=m.applyChanges(v,!1);u.resolve(C.snapshot)}catch(h){const m=oy(h,`Failed to execute query '${s} against cache`);u.reject(m)}}),function(i,s,u){return r.apply(this,arguments)})(yield cN(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Nh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=sn(n,_s);const e=sn(n.firestore,ar),t=Kr(e),r=new fg(e);return mU(t,n._query,{source:"server"}).then(i=>new Nh(e,r,n,i))}(this._delegate):function(n){n=sn(n,_s);const e=sn(n.firestore,ar),t=Kr(e),r=new fg(e);return LU(n._query),mU(t,n._query).then(i=>new Nh(e,r,n,i))}(this._delegate),t.then(r=>new IN(this.firestore,new Nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=t2(e),r=n2(e,i=>new IN(this.firestore,new Nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return KU(this._delegate,t,r)}withConverter(e){return new $s(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}class A6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new A6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Gw(this._firestore,r))})}isEqual(e){return FU(this._delegate,e._delegate)}}class hy extends $s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fa(this.firestore,e):null}doc(e){try{return new Fa(this.firestore,void 0===e?YT(this._delegate):YT(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=sn(n.firestore,ar),r=YT(n),i=rD(n.converter,e);return dy(t,[XT(cg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fa(this.firestore,t))}isEqual(e){return IU(this._delegate,e._delegate)}withConverter(e){return new hy(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function gg(n){return sn(n,tr)}class TN{constructor(...e){this._delegate=new Yc(...e)}static documentId(){return new TN(ci.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Yc&&this._delegate._internalPath.isEqual(e._internalPath)}}class mg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new gN("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new mg(e)}static delete(){const e=new Lw("deleteField");return e._methodName="FieldValue.delete",new mg(e)}static arrayUnion(...e){const t=function(...n){return new GW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mg(t)}static arrayRemove(...e){const t=function(...n){return new $W("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mg(t)}static increment(e){const t=function(n){return new zW("increment",n)}(e);return t._methodName="FieldValue.increment",new mg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const M6={Firestore:JU,GeoPoint:QT,Timestamp:Rr,Blob:jw,Transaction:XU,WriteBatch:e2,DocumentReference:Fa,DocumentSnapshot:Hw,Query:$s,QueryDocumentSnapshot:Gw,QuerySnapshot:IN,CollectionReference:hy,FieldPath:TN,FieldValue:mg,setLogLevel:function(n){!function(n){Eh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Gc.wA("firestore-compat",t=>((e,t)=>new JU(e,t,new D6))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},M6)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(NF.Z);var sD=O(4763),R6=O(1733);class N6 extends Rt.x{constructor(e=1/0,t=1/0,r=R6.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}function r2(n,e,t){var r,i;let s,u=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,Sp.B)({connector:()=>new N6(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function s2(n,e){return(0,si.m)(e)?Fn(()=>n,e):Fn(()=>n)}var DN=O(5222);O(7713);const a2=new Map,V6={activated:!1,tokenObservers:[]},B6={initialized:!1,enabled:!1};function Si(n){return a2.get(n)||V6}function Bl(n,e){a2.set(n,e)}function aD(){return B6}class $6{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function u2(n){if(!Si(n).activated)throw zs.create("use-before-activation",{appName:n.name})}function xN(n,e){return kN.apply(this,arguments)}function kN(){return kN=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,s)}catch(D){throw zs.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==u.status)throw zs.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(D){throw zs.create("fetch-parse-error",{originalErrorMessage:D.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+v,issuedAtTimeMillis:C}}),kN.apply(this,arguments)}function Y6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const $w="firebase-app-check-store";let cD=null;function d2(){return cD||(cD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(zs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($w,{keyPath:"compositeKey"})}}catch(t){e(zs.create("storage-open",{originalErrorMessage:t.message}))}}),cD)}function RN(){return RN=(0,Ee.Z)(function*(n,e){const r=(yield d2()).transaction($w,"readwrite"),s=r.objectStore($w).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=m=>{u()},r.onerror=m=>{var v;h(zs.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),RN.apply(this,arguments)}const zw=new Fl.Yd("@firebase/app-check");function g2(n,e){return(0,P.hl)()?function(n,e){return function(n,e){return RN.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function m2(){return aD().enabled}function _2(){return FN.apply(this,arguments)}function FN(){return FN=(0,Ee.Z)(function*(){const n=aD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FN.apply(this,arguments)}const oK={error:"UNKNOWN_ERROR"};function aK(n){return P.US.encodeString(JSON.stringify(n),!1)}function dD(n){return LN.apply(this,arguments)}function LN(){return LN=(0,Ee.Z)(function*(n,e=!1){const t=n.app;u2(t);const r=Si(t);let s,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&hD(m)&&(i=m)}if(!e&&i&&hD(i))return{token:i.token};let h,u=!1;if(m2()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xN(Y6(t,yield _2()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),u=!0);const m=yield r.exchangeTokenPromise;return yield g2(t,m),Bl(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?zw.warn(m.message):zw.error(m),s=m}return i?(h={token:i.token},Bl(t,Object.assign(Object.assign({},r),{token:i})),yield g2(t,i)):h=uK(s),u&&v2(t,h),h}),LN.apply(this,arguments)}function BN(n,e){const t=Si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Bl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function y2(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new $6((0,Ee.Z)(function*(){let r;if(r=Si(e).token?yield dD(n,!0):yield dD(n),r.error)throw r.error}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Bl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function v2(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function hD(n){return n.expireTimeMillis-Date.now()>0}function uK(n){return{token:aK(oK),error:n}}class cK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)BN(this.app,t.next);return Promise.resolve()}}const S2="app-check-internal";(0,Pl._registerComponent)(new Gc.wA("app-check",n=>function(n,e){return new cK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(S2).initialize()})),(0,Pl._registerComponent)(new Gc.wA(S2,n=>function(n){return{getToken:e=>dD(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,s=Si(i),u={next:t,error:r,type:e};if(Bl(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&hD(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),y2(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>y2(n))}(n,"INTERNAL",e),removeTokenListener:e=>BN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pl.registerVersion)("@firebase/app-check","0.5.8");class pD{constructor(){return(0,sr.vb)("app-check")}}"undefined"!=typeof window&&window;var MK=O(7892);const $N=new c.OlP("angularfire2.auth.use-emulator"),zN=new c.OlP("angularfire2.auth.settings"),qN=new c.OlP("angularfire2.auth.tenant-id"),WN=new c.OlP("angularfire2.auth.langugage-code"),KN=new c.OlP("angularfire2.auth.use-device-language"),ZN=new c.OlP("angularfire.auth.persistence"),YN=(n,e,t,r,i,s,u,h)=>(0,Vs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,s&&m.useDeviceLanguage(),u)for(const[v,C]of Object.entries(u))m.settings[v]=C;return h&&m.setPersistence(h),m},[t,r,i,s,u,h]);let QN=(()=>{class n{constructor(t,r,i,s,u,h,m,v,C,D,R,L){const U=new Rt.x,X=qe(void 0).pipe((0,sD.Q)(u.outsideAngular),Fn(()=>s.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,6600)))),(0,Ze.U)(()=>(0,Vs.on)(t,s,r)),(0,Ze.U)(me=>YN(me,s,h,v,C,D,m,R)),r2({bufferSize:1,refCount:!1}));if(Tr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=qe(null);else{X.pipe(Ho()).subscribe();const Je=X.pipe(Fn(rt=>rt.getRedirectResult().then(Pt=>Pt,()=>null)),sr.iC,r2({bufferSize:1,refCount:!1})),nt=X.pipe(Fn(rt=>new Pn.y(Pt=>({unsubscribe:s.runOutsideAngular(()=>rt.onAuthStateChanged(Gt=>Pt.next(Gt),Gt=>Pt.error(Gt),()=>Pt.complete()))})))),ct=X.pipe(Fn(rt=>new Pn.y(Pt=>({unsubscribe:s.runOutsideAngular(()=>rt.onIdTokenChanged(Gt=>Pt.next(Gt),Gt=>Pt.error(Gt),()=>Pt.complete()))}))));this.authState=Je.pipe(s2(nt),(0,DN.R)(u.outsideAngular),(0,sD.Q)(u.insideAngular)),this.user=Je.pipe(s2(ct),(0,DN.R)(u.outsideAngular),(0,sD.Q)(u.insideAngular)),this.idToken=this.user.pipe(Fn(rt=>rt?(0,mn.D)(rt.getIdToken()):qe(null))),this.idTokenResult=this.user.pipe(Fn(rt=>rt?(0,mn.D)(rt.getIdTokenResult()):qe(null))),this.credential=(0,vo.T)(Je,U,this.authState.pipe(Kt(rt=>!rt))).pipe((0,Ze.U)(rt=>(null==rt?void 0:rt.user)?rt:null),(0,DN.R)(u.outsideAngular),(0,sD.Q)(u.insideAngular))}return(0,Vs.pX)(this,X,s,{spy:{apply:(me,Je,nt)=>{(me.startsWith("signIn")||me.startsWith("createUser"))&&nt.then(ct=>U.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vs.Dh),c.LFG(Vs.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(sr.HU),c.LFG($N,8),c.LFG(zN,8),c.LFG(qN,8),c.LFG(WN,8),c.LFG(KN,8),c.LFG(ZN,8),c.LFG(pD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function M2(n,e){return function(n,e=Au.z){return new Pn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function JN(n,e){return M2(n,e).pipe((0,Ze.U)(t=>({payload:t,type:"query"})))}function gD(n,e){return JN(n,e).pipe(Sr(void 0),Mx(),(0,Ze.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=i.find(C=>C.doc.ref.isEqual(u.ref)),v=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function x2(n,e,t){return gD(n,t).pipe(_i((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Cm(),(0,Ze.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function k2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class R2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ze.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Sr(void 0),Mx(),Kt(([r,i])=>i.length>0||!r),(0,Ze.U)(([r,i])=>i),sr.iC)}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k2(e);return x2(this.query,t,this.afs.schedulers.outsideAngular).pipe(sr.iC)}valueChanges(e={}){return JN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),sr.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(sr.iC)}add(e){return this.ref.add(e)}doc(e){return new N2(this.ref.doc(e),this.afs)}}class N2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=O2(r,t);return new R2(i,s,this.afs)}snapshotChanges(){return function(n,e){return M2(n,e).pipe(Sr(void 0),Mx(),(0,Ze.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(sr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ze.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(sr.iC)}}class PK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Kt(t=>t.length>0),sr.iC):gD(this.query,this.afs.schedulers.outsideAngular).pipe(sr.iC)}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k2(e);return x2(this.query,t,this.afs.schedulers.outsideAngular).pipe(sr.iC)}valueChanges(e={}){return JN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),sr.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(sr.iC)}}const FK=new c.OlP("angularfire2.enableFirestorePersistence"),LK=new c.OlP("angularfire2.firestore.persistenceSettings"),VK=new c.OlP("angularfire2.firestore.settings"),BK=new c.OlP("angularfire2.firestore.use-emulator");function O2(n,e=(t=>t)){return{query:e(n),ref:n}}let P2=(()=>{class n{constructor(t,r,i,s,u,h,m,v,C,D,R,L,U,X,me,Je,nt){this.schedulers=m;const ct=(0,Vs.on)(t,h,r),rt=C;D&&YN(ct,h,R,U,X,me,L,Je),[this.firestore,this.persistenceEnabled$]=(0,Vs.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Pt=h.runOutsideAngular(()=>ct.firestore());if(s&&Pt.settings(s),rt&&Pt.useEmulator(...rt),i&&!Tr(u)){const Gt=()=>{try{return(0,mn.D)(Pt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(bn){return"undefined"!=typeof console&&console.warn(bn),qe(!1)}};return[Pt,h.runOutsideAngular(Gt)]}return[Pt,qe(!1)]},[s,rt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=O2(i,r),h=this.schedulers.ngZone.run(()=>s);return new R2(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new PK(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new N2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vs.Dh),c.LFG(Vs.xv,8),c.LFG(FK,8),c.LFG(VK,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(sr.HU),c.LFG(LK,8),c.LFG(BK,8),c.LFG(QN,8),c.LFG($N,8),c.LFG(zN,8),c.LFG(qN,8),c.LFG(WN,8),c.LFG(KN,8),c.LFG(ZN,8),c.LFG(pD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UK=(()=>{class n{constructor(t){this.database=t}addIntakes(t,r,i){this.database.collection("intakes").add({nickname:t,intakeValue:r,titleIntake:i,date:new Date})}getAllIntakesDocuments(){return this.database.collection("intakes").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(P2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jK(n,e){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const t=c.oxw(),r=c.MAs(1);c.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),c.uIk("r",t._getCircleRadius())}}function HK(n,e){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const t=c.oxw(),r=c.MAs(1);c.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),c.uIk("r",t._getCircleRadius())}}const $K=uh(class{constructor(n){this._elementRef=n}},"primary"),zK=new c.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Jc extends $K{constructor(e,t,r,i,s,u,h,m){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=Dr.w0.EMPTY,this.mode="determinate";const v=Jc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),v.has(r.head)||v.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&h&&u&&m&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&m.run(()=>u.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Hr(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Hr(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Hr(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=mS(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var r;const t=50*(null!=(r=e.currentScale)?r:1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=Jc._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Jc._diameters=new WeakMap,Jc.\u0275fac=function(e){return new(e||Jc)(c.Y36(c.SBq),c.Y36(ds),c.Y36(se,8),c.Y36(Nu,8),c.Y36(zK),c.Y36(c.sBO),c.Y36(XC),c.Y36(c.R0b))},Jc.\u0275cmp=c.Xpm({type:Jc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(c.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),c.Udp("width",t.diameter,"px")("height",t.diameter,"px"),c.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[c.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(c.O4$(),c.TgZ(0,"svg",0,1),c.YNc(2,jK,1,11,"circle",2),c.YNc(3,HK,1,9,"circle",3),c.qZA()),2&e&&(c.Udp("width",t.diameter,"px")("height",t.diameter,"px"),c.Q6J("ngSwitch","indeterminate"===t.mode),c.uIk("viewBox",t._getViewBox()),c.xp6(2),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1))},directives:[za,Oi],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let KK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Gr,Xs],Gr]}),n})(),F2=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZK=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Dl(t);return new Pn.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Rt.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(F2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YK=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Hr(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Em(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ZK),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),QK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[F2]}),n})();const JK=["connectionContainer"],XK=["inputContainer"],e8=["label"];function t8(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15),c._UZ(3,"div",16),c._UZ(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15),c._UZ(7,"div",16),c._UZ(8,"div",17),c.qZA(),c.BQk())}function n8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function r8(n,e){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(t._control.placeholder)}}function i8(n,e){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function s8(n,e){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function o8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.YNc(2,r8,4,1,"ng-container",12),c.YNc(3,i8,1,0,"ng-content",12),c.YNc(4,s8,2,0,"span",22),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),c.uIk("for",t._control.id)("aria-owns",t._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function a8(n,e){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function l8(n,e){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function u8(n,e){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function c8(n,e){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function d8(n,e){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,c8,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const h8=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],f8=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],p8=new c.OlP("MatError"),g8={transitionMessages:pv("transitionMessages",[xm("enter",Xd({opacity:1,transform:"translateY(0%)"})),mv("void => enter",[Xd({opacity:0,transform:"translateY(-5px)"}),Mm("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let mD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})();const m8=new c.OlP("MatHint");let tO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),_8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const y8=new c.OlP("MatPrefix"),L2=new c.OlP("MatSuffix");let v8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSuffix",""]],features:[c._Bn([{provide:L2,useExisting:n}])]}),n})(),V2=0;const w8=uh(class{constructor(n){this._elementRef=n}},"primary"),E8=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),U2=new c.OlP("MatFormField");let C8=(()=>{class n extends w8{constructor(t,r,i,s,u,h,m){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=u,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Rt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+V2++,this._labelId="mat-form-field-label-"+V2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==m,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Gn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Sr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(pr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(pr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,vo.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Sr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Sr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(pr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,kl(this._label.nativeElement,"transitionend").pipe((0,Ft.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let D=0;D<C.length;D++)C[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,h=0;const m=r.querySelectorAll(i),v=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(C),R=t.children,L=this._getStartEnd(R[0].getBoundingClientRect());let U=0;for(let X=0;X<R.length;X++)U+=R[X].offsetWidth;u=Math.abs(L-D)-5,h=U>0?.75*U+10:0}for(let C=0;C<m.length;C++)m[C].style.width=`${u}px`;for(let C=0;C<v.length;C++)v[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(Ff,8),c.Y36(E8,8),c.Y36(ds),c.Y36(c.R0b),c.Y36(Nu,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,mD,5),c.Suo(i,mD,7),c.Suo(i,tO,5),c.Suo(i,tO,7),c.Suo(i,_8,5),c.Suo(i,p8,5),c.Suo(i,m8,5),c.Suo(i,y8,5),c.Suo(i,L2,5)),2&t){let s;c.iGM(s=c.CRH())&&(r._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(r._controlStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(r._placeholderChild=s.first),c.iGM(s=c.CRH())&&(r._errorChildren=s),c.iGM(s=c.CRH())&&(r._hintChildren=s),c.iGM(s=c.CRH())&&(r._prefixChildren=s),c.iGM(s=c.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(c.Gf(JK,7),c.Gf(XK,5),c.Gf(e8,5)),2&t){let i;c.iGM(i=c.CRH())&&(r._connectionContainerRef=i.first),c.iGM(i=c.CRH())&&(r._inputContainerRef=i.first),c.iGM(i=c.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&c.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:U2,useExisting:n}]),c.qOj],ngContentSelectors:f8,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(c.F$t(h8),c.TgZ(0,"div",0),c.TgZ(1,"div",1,2),c.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),c.YNc(3,t8,9,0,"ng-container",3),c.YNc(4,n8,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,o8,5,16,"label",8),c.qZA(),c.qZA(),c.YNc(10,a8,2,0,"div",9),c.qZA(),c.YNc(11,l8,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,u8,2,1,"div",12),c.YNc(14,d8,5,2,"div",13),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf","outline"==r.appearance),c.xp6(1),c.Q6J("ngIf",r._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",r._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",r._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=r.appearance),c.xp6(1),c.Q6J("ngSwitch",r._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[vr,za,Oi,YK],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[g8.transitionMessages]},changeDetection:0}),n})(),j2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Xs,Gr,QK],Gr]}),n})();const H2=mm({passive:!0});let I8=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return pl.E;const r=Dl(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new Rt.x,u="cdk-text-field-autofilled",h=m=>{"cdk-text-field-autofill-start"!==m.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===m.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>s.next({target:m.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>s.next({target:m.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,H2),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,H2)}}),s}stopMonitoring(t){const r=Dl(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ds),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),G2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const T8=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),D8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let S8=0;const A8=DC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let M8=(()=>{class n extends A8{constructor(t,r,i,s,u,h,m,v,C,D){super(h,s,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=v,this._formField=D,this._uid="mat-input-"+S8++,this.focused=!1,this.stateChanges=new Rt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>gS().has(U)),this._iOSKeyupListener=U=>{const X=U.target;!X.value&&0===X.selectionStart&&0===X.selectionEnd&&(X.setSelectionRange(1,1),X.setSelectionRange(0,0))};const R=this._elementRef.nativeElement,L=R.nodeName.toLowerCase();this._inputValueAccessor=m||R,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===L,this._isTextarea="textarea"===L,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Gn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(Fu.required))&&s}set required(t){this._required=Gn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&gS().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Gn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,i;const t=(null==(i=null==(r=this._formField)?void 0:r._hideControlPlaceholder)?void 0:i.call(r))?null:this.placeholder;if(t!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=t,t?s.setAttribute("placeholder",t):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){D8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(ds),c.Y36(bo,10),c.Y36(b,8),c.Y36(Lu,8),c.Y36(n_),c.Y36(T8,10),c.Y36(I8),c.Y36(c.R0b),c.Y36(U2,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&c.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(c.Ikx("disabled",r.disabled)("required",r.required),c.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),c.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:mD,useExisting:n}]),c.qOj,c.TTD]}),n})(),x8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[n_],imports:[[G2,j2,Gr],G2,j2]}),n})();const k8=["*"],$2=new c.OlP("MatChipRemove"),z2=new c.OlP("MatChipAvatar"),q2=new c.OlP("MatChipTrailingIcon");class R8{constructor(e){this._elementRef=e}}const N8=TC(uh(IC(R8),"primary"),-1);let _D=(()=>{class n extends N8{constructor(t,r,i,s,u,h,m,v){super(t),this._ngZone=r,this._changeDetectorRef=u,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new Rt.x,this._onBlur=new Rt.x,this.selectionChange=new c.vpe,this.destroyed=new c.vpe,this.removed=new c.vpe,this._addHostClassName(),this._chipRippleTarget=h.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new xC(this,r,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===m,this.tabIndex=null!=v&&parseInt(v)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const r=Gn(t);r!==this._selected&&(this._selected=r,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Gn(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Gn(t)}get removable(){return this._removable}set removable(t){this._removable=Gn(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",r=this._elementRef.nativeElement;r.hasAttribute(t)||r.tagName.toLowerCase()===t?r.classList.add(t):r.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled&&t.preventDefault()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,Ft.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(ds),c.Y36(kC,8),c.Y36(c.sBO),c.Y36(se),c.Y36(Nu,8),c.$8M("tabindex"))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,z2,5),c.Suo(i,q2,5),c.Suo(i,$2,5)),2&t){let s;c.iGM(s=c.CRH())&&(r.avatar=s.first),c.iGM(s=c.CRH())&&(r.trailingIcon=s.first),c.iGM(s=c.CRH())&&(r.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&t&&(c.uIk("tabindex",r.disabled?null:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString())("aria-selected",r.ariaSelected),c.ekj("mat-chip-selected",r.selected)("mat-chip-with-avatar",r.avatar)("mat-chip-with-trailing-icon",r.trailingIcon||r.removeIcon)("mat-chip-disabled",r.disabled)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[c.qOj]}),n})(),W2=(()=>{class n{constructor(t,r){this._parentChip=t,"BUTTON"===r.nativeElement.nodeName&&r.nativeElement.setAttribute("type","button")}_handleClick(t){const r=this._parentChip;r.removable&&!r.disabled&&r.remove(),t.stopPropagation(),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_D),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._handleClick(s)})},features:[c._Bn([{provide:$2,useExisting:n}])]}),n})();const K2=new c.OlP("mat-chips-default-options"),F8=DC(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let L8=0;class V8{constructor(e,t){this.source=e,this.value=t}}let Z2=(()=>{class n extends F8{constructor(t,r,i,s,u,h,m){super(h,s,u,m),this._elementRef=t,this._changeDetectorRef=r,this._dir=i,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new Rt.x,this._uid="mat-chip-list-"+L8++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(v,C)=>v===C,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new c.vpe,this.valueChange=new c.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var t,r;return this.multiple?(null==(t=this._selectionModel)?void 0:t.selected)||[]:null==(r=this._selectionModel)?void 0:r.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Gn(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var t,r,i,s;return null!=(s=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(Fu.required))&&s}set required(t){this._required=Gn(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Gn(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Gn(t),this.chips&&this.chips.forEach(r=>r.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return(0,vo.T)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return(0,vo.T)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return(0,vo.T)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return(0,vo.T)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new Zo(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(pr(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(pr(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Sr(null),pr(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new fm(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const r=t.target;r&&r.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,r=!0){if(this._clearSelection(),this.chips.forEach(i=>i.deselect()),Array.isArray(t))t.forEach(i=>this._selectValue(i,r)),this._sortValues();else{const i=this._selectValue(t,r);i&&r&&this._keyManager.setActiveItem(i)}}_selectValue(t,r=!0){const i=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,t));return i&&(r?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(r=>{r!==t&&r.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let r=null;r=Array.isArray(this.selected)?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.change.emit(new V8(this,r)),this.valueChange.emit(r),this._onChange(r),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(r=>{!this._selectionModel.isSelected(r)&&r.selected&&r.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let r=this.chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&this._keyManager.updateActiveItem(r),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const r=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&r._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let r=t.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-chip"))return!0;r=r.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(Ff,8),c.Y36(b,8),c.Y36(Lu,8),c.Y36(n_),c.Y36(bo,10))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,_D,5),2&t){let s;c.iGM(s=c.CRH())&&(r.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,r){1&t&&c.NdJ("focus",function(){return r.focus()})("blur",function(){return r._blur()})("keydown",function(s){return r._keydown(s)}),2&t&&(c.Ikx("id",r._uid),c.uIk("tabindex",r.disabled?null:r._tabIndex)("aria-describedby",r._ariaDescribedby||null)("aria-required",r.role?r.required:null)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-multiselectable",r.multiple)("role",r.role)("aria-orientation",r.ariaOrientation),c.ekj("mat-chip-list-disabled",r.disabled)("mat-chip-list-invalid",r.errorState)("mat-chip-list-required",r.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[c._Bn([{provide:mD,useExisting:n}]),c.qOj],ngContentSelectors:k8,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),j8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[n_,{provide:K2,useValue:{separatorKeyCodes:[13]}}],imports:[[Gr]]}),n})();function H8(n,e){1&n&&(c.TgZ(0,"div"),c.TgZ(1,"div",3),c._uU(2,"\u{1f914}"),c.qZA(),c.qZA())}function G8(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"div",4),c.TgZ(2,"b"),c._uU(3),c.qZA(),c._uU(4," total calories"),c.qZA(),c.qZA()),2&n){const t=c.oxw();c.xp6(3),c.Oqu(t.calculateTotalCalories())}}function $8(n,e){if(1&n&&(c.TgZ(0,"div"),c.TgZ(1,"mat-chip-list",5),c.TgZ(2,"mat-chip"),c._uU(3),c.TgZ(4,"button",6),c.TgZ(5,"mat-icon"),c._uU(6,"cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&n){const t=e.$implicit;c.xp6(3),c.AsE(" ",t.titleIntake," | ",t.intakeValue," cal. ")}}let z8=(()=>{class n{constructor(){this.currentIntakes=[],this.totalIntakes=0}ngOnInit(){}ngOnChanges(t){console.log(this.currentIntakes)}calculateTotalCalories(){return this.totalIntakes=0,this.currentIntakes.length>0&&this.currentIntakes.forEach(t=>{this.totalIntakes+=t.intakeValue}),this.totalIntakes}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-intakes-history"]],inputs:{currentIntakes:"currentIntakes"},features:[c.TTD],decls:6,vars:3,consts:[[1,"historiqueContainer"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"textVide"],[1,"totalCaloriesText"],["aria-label","Intakes"],["matChipRemove",""]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h2"),c._uU(2,"Historique journalier"),c.qZA(),c.YNc(3,H8,3,0,"div",1),c.YNc(4,G8,5,1,"div",1),c.YNc(5,$8,7,2,"div",2),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf",0===r.currentIntakes.length),c.xp6(1),c.Q6J("ngIf",r.currentIntakes.length>0),c.xp6(1),c.Q6J("ngForOf",r.currentIntakes))},directives:[vr,Zs,Z2,_D,W2,vh],styles:["h2[_ngcontent-%COMP%]{margin:20px 0}.textVide[_ngcontent-%COMP%]{font-size:25px}.totalCaloriesText[_ngcontent-%COMP%]{margin:10px 0 20px;font-size:18px}.historiqueContainer[_ngcontent-%COMP%]{margin:40px 0 0;padding:0 0 40px}"]}),n})();function q8(n,e){1&n&&(c.TgZ(0,"h1"),c._uU(1,"OW ! STOP MANGER GROS PORC"),c.qZA())}function W8(n,e){if(1&n&&(c.TgZ(0,"div",15),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngStyle",t.getSpinnerTextStyle()),c.xp6(1),c.AsE(" ",t.getTotalCurrentIntakesFromSelectedUser()," / ",t.itemForSelectedUser.targetIntake," ")}}function K8(n,e){if(1&n&&(c.TgZ(0,"div",16),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngStyle",t.getSpinnerTextStyle()),c.xp6(1),c.hij(" ",t.getCurrentSmiley()," ")}}let Z8=(()=>{class n{constructor(t,r){this.selectedPerson=void 0,this.lastPersonSelected=void 0,this.currentIntakeValue=1200,this.maxIntakeForTheDay=1300,this.spinnerDiameter=250,this.items=[],this.itemForSelectedUser={nickname:"",currentIntake:"",targetIntake:""},this.selectedUserIntakes=[],this.sportiveSmileyAnimation=["\u{1f975}","\u{1f919}","\u{1f957}","\u{1f346}","\u{1f34c}","\u{1f345}","\u{1f680}","\u{1f3c6}","\u{1f947}","\u{1f6bf}","\u{1f373}","\u{1f3c3}","\u{1f938}"],this.indexRandomIcon=0,this.emojiSubscription=new Dr.w0,this.intakeFormGroup=new l({titleIntake:new a("",Fu.minLength(1)),intakeValue:new a("",Fu.min(1))}),this.serviceIntake=r,t.collection("person").valueChanges().subscribe(i=>{this.items=i})}ngOnInit(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0});const t=function(n=0,e=Au.z){return n<0&&(n=0),o_(n,n,e)}(2e3);this.emojiSubscription=t.subscribe(r=>{this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1)})}ngOnChanges(t){(void 0===this.lastPersonSelected||this.lastPersonSelected!==this.selectedPerson)&&(this.lastPersonSelected=this.selectedPerson,this.setItemsForSelectedUser())}resetTitleIntake(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{titleIntake:""}))}resetIntakeValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{intakeValue:void 0}))}resetAllForm(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0})}getSpinnerProgressValue(){return this.getTotalCurrentIntakesFromSelectedUser()/this.itemForSelectedUser.targetIntake*100}getColorStateOfSpinner(){return this.isOverMaxIntake()?"warn":"primary"}getSpinnerTextStyle(){return{"margin-top":"-"+(this.spinnerDiameter/2+16)+"px","padding-bottom":this.spinnerDiameter/2+26+"px"}}isOverMaxIntake(){return this.getTotalCurrentIntakesFromSelectedUser()>this.maxIntakeForTheDay}ajouterApport(){this.intakeFormGroup.value.intakeValue&&this.intakeFormGroup.value.titleIntake&&(this.serviceIntake.addIntakes(this.itemForSelectedUser.nickname,this.intakeFormGroup.value.intakeValue,this.intakeFormGroup.value.titleIntake),this.setItemsForSelectedUser(),this.resetAllForm())}goToLaura(){this.selectedPerson="Laura",this.setItemsForSelectedUser()}goToArnaud(){this.selectedPerson="Arnaud",this.setItemsForSelectedUser()}getTotalCurrentIntakesFromSelectedUser(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.intakeValue}),t}getSmileyAnimation(){return this.sportiveSmileyAnimation[this.indexRandomIcon]}getCurrentSmiley(){return this.getSmileyAnimation()}setIntakesFromSelectedUser(){this.serviceIntake.getAllIntakesDocuments().subscribe(t=>{this.selectedUserIntakes=[],t.forEach(r=>{r.dateFormatted=r.date.toDate(),r.nickname===this.selectedPerson&&r.dateFormatted.getDate()===(new Date).getDate()&&r.dateFormatted.getMonth()===(new Date).getMonth()&&r.dateFormatted.getFullYear()===(new Date).getFullYear()&&this.selectedUserIntakes.push(r)})})}setItemsForSelectedUser(){this.items.forEach(t=>{t.nickname===this.selectedPerson&&(this.itemForSelectedUser=t)}),this.setIntakesFromSelectedUser()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(P2),c.Y36(UK))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-main"]],inputs:{selectedPerson:"selectedPerson"},features:[c.TTD],decls:28,vars:16,consts:[[1,"selectionButtonContainer"],[1,"formIntake"],[3,"formGroup"],[4,"ngIf"],[1,"spinnerContainer"],[1,"progressSpinnerBackground",3,"color","diameter","strokeWidth","mode","value"],[1,"progressSpinner",3,"color","diameter","strokeWidth","mode","value"],["class","textInSpinner",3,"ngStyle",4,"ngIf"],["class","textInSpinnerNotSelected",3,"ngStyle",4,"ngIf"],["appearance","standard"],["matInput","","type","text","formControlName","titleIntake"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","number","formControlName","intakeValue"],["mat-raised-button","","aria-label","Ajouter cet apport",3,"click"],[3,"currentIntakes"],[1,"textInSpinner",3,"ngStyle"],[1,"textInSpinnerNotSelected",3,"ngStyle"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div"),c._uU(2),c.qZA(),c.qZA(),c.TgZ(3,"div",1),c.TgZ(4,"form",2),c.YNc(5,q8,2,0,"h1",3),c.TgZ(6,"div",4),c._UZ(7,"mat-progress-spinner",5),c._UZ(8,"mat-progress-spinner",6),c.qZA(),c.YNc(9,W8,2,3,"div",7),c.YNc(10,K8,2,2,"div",8),c.TgZ(11,"mat-form-field",9),c.TgZ(12,"mat-label"),c._uU(13,"Titre de l'apport calorique"),c.qZA(),c._UZ(14,"input",10),c.TgZ(15,"button",11),c.NdJ("click",function(){return r.resetTitleIntake()}),c.TgZ(16,"mat-icon"),c._uU(17,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"mat-form-field",9),c.TgZ(19,"mat-label"),c._uU(20,"Montant calorique"),c.qZA(),c._UZ(21,"input",12),c.TgZ(22,"button",11),c.NdJ("click",function(){return r.resetIntakeValue()}),c.TgZ(23,"mat-icon"),c._uU(24,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"button",13),c.NdJ("click",function(){return r.ajouterApport()}),c._uU(26," Ajouter l'apport "),c.qZA(),c.qZA(),c._UZ(27,"app-intakes-history",14),c.qZA()),2&t&&(c.xp6(2),c.Oqu(r.selectedPerson),c.xp6(2),c.Q6J("formGroup",r.intakeFormGroup),c.xp6(1),c.Q6J("ngIf",r.isOverMaxIntake()),c.xp6(2),c.Q6J("color","warn")("diameter",r.spinnerDiameter)("strokeWidth",14)("mode","determinate")("value",100),c.xp6(1),c.Q6J("color",r.getColorStateOfSpinner())("diameter",r.spinnerDiameter)("strokeWidth",15)("mode","determinate")("value",r.getSpinnerProgressValue()),c.xp6(1),c.Q6J("ngIf",r.itemForSelectedUser.targetIntake>0),c.xp6(1),c.Q6J("ngIf",""===r.itemForSelectedUser.nickname),c.xp6(17),c.Q6J("currentIntakes",r.selectedUserIntakes))},directives:[ot,px,Lu,vr,Jc,C8,tO,M8,Eb,fx,Tx,ub,v8,vh,mt,z8,ni],styles:["@keyframes circleAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.formIntake[_ngcontent-%COMP%]{margin:auto;width:min-content;text-align:center}.formIntake[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.spinnerContainer[_ngcontent-%COMP%]{margin:35px 0 10px}.textInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center}.textInSpinnerNotSelected[_ngcontent-%COMP%]{margin:auto;width:80%;font-size:50px;text-align:center}.topButton[_ngcontent-%COMP%]{margin:10px}.progressSpinnerBackground[_ngcontent-%COMP%]{animation:circleAnimation linear 30s infinite;position:absolute}.selectionButtonContainer[_ngcontent-%COMP%]{margin:15px 0 2px;text-align:center;font-size:20px}  .spinnerContainer>.progressSpinnerBackground>svg>.mat-progress-spinner.mat-warn circle,   .mat-spinner.mat-warn circle{stroke:#0000004d;stroke-dasharray:17.9!important;overflow-x:hidden}"]}),n})();function Y8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-tree-node",12),c._UZ(1,"button",13),c.TgZ(2,"button",14),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw(),h=c.MAs(2);return u.selectedPerson=s.name,h.toggle()}),c._uU(3),c.qZA(),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t.name," ")}}function Q8(n,e){if(1&n&&(c.TgZ(0,"mat-tree-node",12),c.TgZ(1,"button",15),c.TgZ(2,"mat-icon",16),c._uU(3),c.qZA(),c.qZA(),c._uU(4),c.qZA()),2&n){const t=e.$implicit,r=c.oxw();c.xp6(1),c.uIk("aria-label","Toggle "+t.name),c.xp6(2),c.hij(" ",r.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),c.xp6(1),c.hij(" ",t.name," ")}}let J8=(()=>{class n{constructor(t){this.title="foodTrackingApp",this._transformer=(r,i)=>({expandable:!!r.children&&r.children.length>0,name:r.name,level:i}),this.menuContent=[{name:"Personnes",children:[{name:"Arnaud"},{name:"Laura"}]}],this.treeControl=new k0(r=>r.level,r=>r.expandable),this.treeFlattener=new wp(this._transformer,r=>r.level,r=>r.expandable,r=>r.children),this.dataSource=new aM(this.treeControl,this.treeFlattener),this.hasChild=(r,i)=>i.expandable,this.selectedPerson=void 0,t.available.subscribe(r=>{t.activateUpdate().then(i=>{document.location.reload()})}),this.dataSource.data=this.menuContent}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Jv))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:16,vars:5,consts:[["autosize","",1,"example-container"],["mode","side",1,"sidenavMenu"],["drawer",""],[1,"topMenuContainer"],["mat-button","",1,"menuCloseButton",3,"disableRipple","click"],[3,"dataSource","treeControl"],["matTreeNodePadding","0",4,"matTreeNodeDef"],["matTreeNodePadding","0",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"globalContainer"],[3,"menuButtonClicked"],[1,"spacingToolbar"],[3,"selectedPerson"],["matTreeNodePadding","0"],["mat-icon-button","","disabled",""],["mat-raised-button","",3,"click"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(t,r){if(1&t){const i=c.EpF();c.TgZ(0,"mat-drawer-container",0),c.TgZ(1,"mat-drawer",1,2),c.TgZ(3,"div",3),c.TgZ(4,"h2"),c._uU(5,"\u{1f63a}MIOUNU"),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",function(){return c.CHM(i),c.MAs(2).toggle()}),c.TgZ(7,"mat-icon"),c._uU(8,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"mat-tree",5),c.YNc(10,Y8,4,1,"mat-tree-node",6),c.YNc(11,Q8,5,3,"mat-tree-node",7),c.qZA(),c.qZA(),c.TgZ(12,"div",8),c.TgZ(13,"app-topbar",9),c.NdJ("menuButtonClicked",function(){return c.CHM(i),c.MAs(2).toggle()}),c.qZA(),c._UZ(14,"div",10),c._UZ(15,"app-main",11),c.qZA(),c.qZA()}2&t&&(c.xp6(6),c.Q6J("disableRipple",!0),c.xp6(3),c.Q6J("dataSource",r.dataSource)("treeControl",r.treeControl),c.xp6(2),c.Q6J("matTreeNodeDefWhen",r.hasChild),c.xp6(4),c.Q6J("selectedPerson",r.selectedPerson))},directives:[oI,ab,ub,vh,UC,qv,Xo,Z8,VC,Wv,ch],styles:[".globalContainer[_ngcontent-%COMP%]{width:100vw;height:100vh}.spacingToolbar[_ngcontent-%COMP%]{height:50px;width:100vw}app-topbar[_ngcontent-%COMP%]{position:fixed!important;width:100vw;z-index:99}.appContent[_ngcontent-%COMP%]{display:flex}.sidenavMenu[_ngcontent-%COMP%]{padding:20px;width:250px}.topMenuContainer[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .topMenuContainer[_ngcontent-%COMP%] > .menuCloseButton[_ngcontent-%COMP%]{display:inline-block}.topMenuContainer[_ngcontent-%COMP%]{width:100%;height:50px}"]}),n})();const Q2="@firebase/database";let nO="";function X2(n){nO=n}class t4{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class n4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ej=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new t4(e)}}catch(e){}return new n4},_g=ej("localStorage"),rO=ej("sessionStorage"),fy=new Fl.Yd("@firebase/database"),tj=function(){let n=1;return function(){return n++}}(),nj=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},qw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=qw.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let yg=null,rj=!0;const ij=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(fy.logLevel=Fl.in.VERBOSE,yg=fy.log.bind(fy),e&&rO.set("logging_enabled",!0)):"function"==typeof n?yg=n:(yg=null,rO.remove("logging_enabled"))},Ai=function(...n){if(!0===rj&&(rj=!1,null===yg&&!0===rO.get("logging_enabled")&&ij(!0)),yg){const e=qw.apply(null,n);yg(e)}},Ww=function(n){return function(...e){Ai(n,...e)}},iO=function(...n){const e="FIREBASE INTERNAL ERROR: "+qw(...n);fy.error(e)},Gu=function(...n){const e=`FIREBASE FATAL ERROR: ${qw(...n)}`;throw fy.error(e),new Error(e)},ys=function(...n){const e="FIREBASE WARNING: "+qw(...n);fy.warn(e)},yD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xc="[MIN_NAME]",$u="[MAX_NAME]",vg=function(n,e){if(n===e)return 0;if(n===Xc||e===$u)return-1;if(e===Xc||n===$u)return 1;{const t=vD(n),r=vD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},s4=function(n,e){return n===e?0:n<e?-1:1},Kw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},sO=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=sO(n[e[r]]);return t+="}",t},sj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const oj=function(n){(0,P.hu)(!yD(n),"Invalid JSON number");const r=1023;let i,s,u,h,m;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)v.push(s%2?1:0),s=Math.floor(s/2);v.push(i?1:0),v.reverse();const C=v.join("");let D="";for(m=0;m<64;m+=8){let R=parseInt(C.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},u4=new RegExp("^-?(0*)\\d{1,10}$"),aj=-2147483648,oO=2147483647,vD=function(n){if(u4.test(n)){const e=Number(n);if(e>=aj&&e<=oO)return e}return null},py=function(n){try{n()}catch(e){setTimeout(()=>{throw ys("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Zw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class d4{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ys(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class h4{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ys(e)}}let Yw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const hj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gj="websocket",mj="long_polling";class lO{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_g.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_g.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function _j(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===gj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==mj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mi(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class p4{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const uO={},cO={};function dO(n){const e=n.toString();return uO[e]||(uO[e]=new p4),uO[e]}class m4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&py(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fh{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ww(e),this.stats_=dO(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),_j(t,mj,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new m4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hO((...s)=>{const[u,h,m,v,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&hj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fh.forceAllow_=!0}static forceDisallow(){Fh.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Fh.forceAllow_&&(Fh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=sj(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hO{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=tj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Ai("frame writing exception"),h.stack&&Ai(h.stack),Ai(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ai("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let wD=null;"undefined"!=typeof MozWebSocket?wD=MozWebSocket:"undefined"!=typeof WebSocket&&(wD=WebSocket);let gy=(()=>{class n{constructor(t,r,i,s,u,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ww(this.connId),this.stats_=dO(r),this.connURL=n.connectionURL_(r,h,m,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const h={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&hj.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),u&&(h.p=u),_j(t,gj,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_g.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${nO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(u.proxy={origin:m})}this.mySock=new wD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==wD&&!n.forceDisallow_}static previouslyFailed(){return _g.isInMemoryStorage||!0===_g.get("previous_websocket_failure")}markConnectionHealthy(){_g.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=sj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ij=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fh,gy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=gy&&gy.isAvailable();let i=r&&!gy.previouslyFailed();if(t.webSocketOnly&&(r||ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gy];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class kj{constructor(e,t,r,i,s,u,h,m,v,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ww("c:"+this.id+":"),this.transportManager_=new Ij(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Kw("t",e),r=Kw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Kw("t",e),r=Kw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Kw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?iO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ys("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Zw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_g.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Rj{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Nj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ED extends Nj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ED}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new xn("")}function Yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lh(n){return n.pieces_.length-n.pieceNum_}function $n(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new xn(n.pieces_,e)}function pO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Qw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Fj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new xn(e,0)}function lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof xn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new xn(t,0)}function Qt(n){return n.pieceNum_>=n.pieces_.length}function qs(n,e){const t=Yt(n),r=Yt(e);if(null===t)return e;if(t===r)return qs($n(n),$n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function V4(n,e){const t=Qw(n,0),r=Qw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=vg(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function gO(n,e){if(Lh(n)!==Lh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function La(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Lh(n)>Lh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class B4{constructor(e,t){this.errorPrefix_=t,this.parts_=Qw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);Lj(this)}}function Lj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bg(n))}function bg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mO extends Nj{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mO}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Jw=1e3;let ID,wg=(()=>{class n extends Rj{constructor(t,r,i,s,u,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Ww("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ED.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,P.Pz)(u)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const v=m.d,C=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();ys(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):iO("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Jw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const C=function(){v?v.close():(m=!0,s())};t.realtime_={close:C,sendRequest:function(L){(0,P.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(L)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,U]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?Ai("getToken() completed but was canceled"):(Ai("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=U&&U.token,v=new kj(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,X=>{ys(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),m||(t.repoInfo_.nodeAdmin&&ys(L),C())}}})()}interrupt(t){Ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Jw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>sO(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new xn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+nO.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ED.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xt(e,t)}}class CD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Xt(Xc,e),i=new Xt(Xc,t);return 0!==this.compare(r,i)}minPost(){return Xt.MIN}}class Uj extends CD{static get __EMPTY_NODE(){return ID}static set __EMPTY_NODE(e){ID=e}compare(e,t){return vg(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt($u,ID)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Xt(e,ID)}toString(){return".key"}}const zu=new Uj;class TD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yO,Ul=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Eo.EMPTY_NODE,this.right=null!=u?u:Eo.EMPTY_NODE}copy(t,r,i,s,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Eo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Eo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Eo{constructor(e,t=Eo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Eo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ul.BLACK,null,null))}remove(e){return new Eo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ul.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new TD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new TD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new TD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new TD(this.root_,null,this.comparator_,!0,e)}}function K4(n,e){return vg(n.name,e.name)}function _O(n,e){return vg(n,e)}Eo.EMPTY_NODE=new class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ul(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const jj=function(n){return"number"==typeof n?"number:"+oj(n):"string:"+n},Hj=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===yO||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===yO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Gj,$j,zj,my=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Hj(this.priorityNode_)}static set __childrenNodeConstructor(t){Gj=t}static get __childrenNodeConstructor(){return Gj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Qt(t)?this:".priority"===Yt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Yt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Lh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jj(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?oj(this.value_):this.value_,this.lazyHash_=nj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(s>=0,"Unknown leaf type: "+r),(0,P.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Zn=new class extends CD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?vg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt($u,new my("[PRIORITY-POST]",zj))}makePost(e,t){const r=$j(e);return new Xt(t,new my("[PRIORITY-POST]",r))}toString(){return".priority"}},X4=Math.log(2);class e5{constructor(e){this.count=parseInt(Math.log(e+1)/X4,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const DD=function(n,e,t,r){n.sort(e);const i=function(m,v){const C=v-m;let D,R;if(0===C)return null;if(1===C)return D=n[m],R=t?t(D):D,new Ul(R,D.node,Ul.BLACK,null,null);{const L=parseInt(C/2,10)+m,U=i(m,L),X=i(L+1,v);return D=n[L],R=t?t(D):D,new Ul(R,D.node,Ul.BLACK,U,X)}},h=function(m){let v=null,C=null,D=n.length;const R=function(U,X){const me=D-U,Je=D;D-=U;const nt=i(me+1,Je),ct=n[me],rt=t?t(ct):ct;L(new Ul(rt,ct.node,X,null,nt))},L=function(U){v?(v.left=U,v=U):(C=U,v=U)};for(let U=0;U<m.count;++U){const X=m.nextBitIsOne(),me=Math.pow(2,m.count-(U+1));X?R(me,Ul.BLACK):(R(me,Ul.BLACK),R(me,Ul.RED))}return C}(new e5(n.length));return new Eo(r||e,h)};let vO;const _y={};class ed{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(_y&&Zn,"ChildrenNode.ts has not been loaded"),vO=vO||new ed({".priority":_y},{".priority":Zn}),vO}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Eo?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==zu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Xt.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?DD(r,e.getCompare()):_y;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new ed(C,v)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,s)=>{const u=(0,P.DV)(this.indexSet_,s);if((0,P.hu)(u,"Missing index implementation for "+s),i===_y){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(Xt.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),DD(h,u.getCompare())}return _y}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Xt(e.name,h))),m.insert(e,e.node)}});return new ed(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===_y)return i;{const s=t.get(e.name);return s?i.remove(new Xt(e.name,s)):i}});return new ed(r,this.indexSet_)}}let Xw,Ut=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Hj(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xw||(Xw=new n(new Eo(_O),null,ed.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Xw:r}}getChild(t){const r=Yt(t);return null===r?this:this.getImmediateChild(r).getChild($n(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Xt(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Xw:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=Yt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Yt(t)||1===Lh(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild($n(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(Zn,(h,m)=>{r[h]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+jj(this.getPriority().val())+":"),this.forEachChild(Zn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":nj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new Xt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Xt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Xt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Xt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Xt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===e0?-1:0}withIndex(t){if(t===zu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===zu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Zn),s=r.getIterator(Zn);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===zu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const e0=new class extends Ut{constructor(){super(new Eo(_O),Ut.EMPTY_NODE,ed.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ut.EMPTY_NODE}isEmpty(){return!1}};function gr(n,e=null){if(null===n)return Ut.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new my(n,gr(e));if(n instanceof Array){let t=Ut.EMPTY_NODE;return Mi(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const s=gr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(gr(e))}{const t=[];let r=!1;if(Mi(n,(u,h)=>{if("."!==u.substring(0,1)){const m=gr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Xt(u,m)))}}),0===t.length)return Ut.EMPTY_NODE;const s=DD(t,K4,u=>u.name,_O);if(r){const u=DD(t,Zn.getCompare());return new Ut(s,gr(e),new ed({".priority":u},{".priority":Zn}))}return new Ut(s,gr(e),ed.Default)}}Object.defineProperties(Xt,{MIN:{value:new Xt(Xc,Ut.EMPTY_NODE)},MAX:{value:new Xt($u,e0)}}),Uj.__EMPTY_NODE=Ut.EMPTY_NODE,my.__childrenNodeConstructor=Ut,function(n){yO=n}(e0),function(n){zj=n}(e0),function(n){$j=n}(gr);class bO extends CD{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Qt(e)&&".priority"!==Yt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?vg(e.name,t.name):s}makePost(e,t){const r=gr(e),i=Ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xt(t,i)}maxPost(){const e=Ut.EMPTY_NODE.updateChild(this.indexPath_,e0);return new Xt($u,e)}toString(){return Qw(this.indexPath_,0).join("/")}}const wO=new class extends CD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?vg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(e,t){const r=gr(e);return new Xt(t,r)}toString(){return".value"}},yy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",s5=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=yy.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=yy.charAt(e[i]);return(0,P.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Kj=function(n){if(n===""+oO)return"-";const e=vD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return $u;const s=yy.charAt(yy.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},Zj=function(n){if(n===""+aj)return Xc;const e=vD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+oO:(delete t[t.length-1],t.join("")):(t[t.length-1]=yy.charAt(yy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Yj(n){return{type:"value",snapshotNode:n}}function vy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function t0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function n0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class CO{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(t0(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(vy(t,r)):u.trackChildChange(n0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Zn,(i,s)=>{t.hasChild(i)||r.trackChildChange(t0(i,s))}),t.isLeafNode()||t.forEachChild(Zn,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(n0(i,s,u))}else r.trackChildChange(vy(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ut.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class r0{constructor(e){this.indexedFilter_=new CO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=r0.getStartPost_(e),this.endPost_=r0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new Xt(t,r))||(r=Ut.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ut.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ut.EMPTY_NODE);const s=this;return t.forEachChild(Zn,(u,h)=>{s.matches(new Xt(u,h))||(i=i.updateImmediateChild(u,Ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class a5{constructor(e){this.rangedFilter_=new r0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new Xt(t,r))||(r=Ut.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Ut.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Ut.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(R,L)=>D(L,R)}else m=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,C=!1;for(;m.hasNext();){const D=m.getNext();!C&&h(s,D)<=0&&(C=!0),C&&v<this.limit_&&h(D,u)<=0?v++:i=i.updateImmediateChild(D.name,Ut.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const D=this.index_.getCompare();u=(R,L)=>D(L,R)}else u=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const m=new Xt(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const D=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const L=null==R?1:u(R,m);if(C&&!r.isEmpty()&&L>=0)return null!=s&&s.trackChildChange(n0(t,r,D)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(t0(t,D));const X=h.updateImmediateChild(t,Ut.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=s&&s.trackChildChange(vy(R.name,R.node)),X.updateImmediateChild(R.name,R.node)):X}}return r.isEmpty()?e:C&&u(v,m)>=0?(null!=s&&(s.trackChildChange(t0(v.name,v.node)),s.trackChildChange(vy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Ut.EMPTY_NODE)):e}}class SD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$u}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new SD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IO(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function TO(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function AD(n,e){const t=n.copy();return t.index_=e,t}function Qj(n){const e={};if(n.isDefault())return e;let t;return n.index_===Zn?t="$priority":n.index_===wO?t="$value":n.index_===zu?t="$key":((0,P.hu)(n.index_ instanceof bO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Jj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Zn&&(e.i=n.index_.toString()),e}class MD extends Rj{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ww("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=MD.getListenId_(e,r),h={};this.listens_[u]=h;const m=Qj(e._queryParams);this.restRequest_(s+".json",m,(v,C)=>{let D=C;if(404===v&&(D=null,v=null),null===v&&this.onDataUpdate_(s,D,!1,r),(0,P.DV)(this.listens_,u)===h){let R;R=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(R,null)}})}unlisten(e,t){const r=MD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Qj(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,P.cI)(h.responseText)}catch(v){ys("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&ys("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class f5{constructor(){this.rootNode_=Ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xD(){return{value:null,children:new Map}}function by(n,e,t){if(Qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Yt(e);n.children.has(r)||n.children.set(r,xD()),by(n.children.get(r),e=$n(e),t)}}function DO(n,e){if(Qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Zn,(r,i)=>{by(n,new xn(r),i)}),DO(n,e)}}if(n.children.size>0){const t=Yt(e);return e=$n(e),n.children.has(t)&&DO(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function SO(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{SO(i,new xn(e.toString()+"/"+r),t)})}class g5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class y5{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new g5(e);const r=1e4+2e4*Math.random();Zw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mi(e,(i,s)=>{s>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Zw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Va||(Va={})),Va))();function xO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Qt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xn(e));return new kD(vn(),t,this.revert)}}return(0,P.hu)(Yt(this.path)===e,"operationForChild called for unrelated child."),new kD($n(this.path),this.affectedTree,this.revert)}}class s0{constructor(e,t){this.source=e,this.path=t,this.type=Va.LISTEN_COMPLETE}operationForChild(e){return Qt(this.path)?new s0(this.source,vn()):new s0(this.source,$n(this.path))}}class Eg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Va.OVERWRITE}operationForChild(e){return Qt(this.path)?new Eg(this.source,vn(),this.snap.getImmediateChild(e)):new Eg(this.source,$n(this.path),this.snap)}}class wy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Va.MERGE}operationForChild(e){if(Qt(this.path)){const t=this.children.subtree(new xn(e));return t.isEmpty()?null:t.value?new Eg(this.source,vn(),t.value):new wy(this.source,vn(),t)}return(0,P.hu)(Yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wy(this.source,$n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Yt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class v5{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function o0(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Xt(e.childName,e.snapshotNode),i=new Xt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),u.forEach(h=>{const m=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function RD(n,e){return{eventCache:n,serverCache:e}}function a0(n,e,t,r){return RD(new Vh(e,t,r),n.serverCache)}function eH(n,e,t,r){return RD(n.eventCache,new Vh(e,t,r))}function ND(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Cg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kO;class Yn{constructor(e,t=(()=>(kO||(kO=new Eo(s4)),kO))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return Mi(e,(r,i)=>{t=t.set(new xn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(Qt(e))return null;{const r=Yt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue($n(e),t);return null!=s?{path:lr(new xn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qt(e))return this;{const t=Yt(e),r=this.children.get(t);return null!==r?r.subtree($n(e)):new Yn(null)}}set(e,t){if(Qt(e))return new Yn(t,this.children);{const r=Yt(e),s=(this.children.get(r)||new Yn(null)).set($n(e),t),u=this.children.insert(r,s);return new Yn(this.value,u)}}remove(e){if(Qt(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=Yt(e),r=this.children.get(t);if(r){const i=r.remove($n(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Yn(null):new Yn(this.value,s)}return this}}get(e){if(Qt(e))return this.value;{const t=Yt(e),r=this.children.get(t);return r?r.get($n(e)):null}}setTree(e,t){if(Qt(e))return t;{const r=Yt(e),s=(this.children.get(r)||new Yn(null)).setTree($n(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Yn(this.value,u)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Qt(e))return null;{const s=Yt(e),u=this.children.get(s);return u?u.findOnPath_($n(e),lr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(Qt(e))return this;{this.value&&r(t,this.value);const i=Yt(e),s=this.children.get(i);return s?s.foreachOnPath_($n(e),lr(t,i),r):new Yn(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class jl{constructor(e){this.writeTree_=e}static empty(){return new jl(new Yn(null))}}function l0(n,e,t){if(Qt(e))return new jl(new Yn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=qs(i,e);return s=s.updateChild(u,t),new jl(n.writeTree_.set(i,s))}{const i=new Yn(t),s=n.writeTree_.setTree(e,i);return new jl(s)}}}function RO(n,e,t){let r=n;return Mi(t,(i,s)=>{r=l0(r,lr(e,i),s)}),r}function tH(n,e){if(Qt(e))return jl.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new jl(t)}}function NO(n,e){return null!=Ig(n,e)}function Ig(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(qs(t.path,e)):null}function nH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Zn,(r,i)=>{e.push(new Xt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Xt(r,i.value))}),e}function Bh(n,e){if(Qt(e))return n;{const t=Ig(n,e);return new jl(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function OO(n){return n.writeTree_.isEmpty()}function Ey(n,e){return rH(vn(),n.writeTree_,e)}function rH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,P.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=rH(lr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(lr(n,".priority"),r)),t}}function OD(n,e){return lH(e,n)}function A5(n,e){if(n.snap)return La(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&La(lr(n.path,t),e))return!0;return!1}function x5(n){return n.visible}function iH(n,e,t){let r=jl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)La(t,u)?(h=qs(t,u),r=l0(r,h,s.snap)):La(u,t)&&(h=qs(u,t),r=l0(r,vn(),s.snap.getChild(h)));else{if(!s.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(La(t,u))h=qs(t,u),r=RO(r,h,s.children);else if(La(u,t))if(h=qs(u,t),Qt(h))r=RO(r,vn(),s.children);else{const m=(0,P.DV)(s.children,Yt(h));if(m){const v=m.getChild($n(h));r=l0(r,vn(),v)}}}}}return r}function sH(n,e,t,r,i){if(r||i){const s=Bh(n.visibleWrites,e);return!i&&OO(s)?t:i||null!=t||NO(s,vn())?Ey(iH(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(La(v.path,e)||La(e,v.path))},e),t||Ut.EMPTY_NODE):null}{const s=Ig(n.visibleWrites,e);if(null!=s)return s;{const u=Bh(n.visibleWrites,e);return OO(u)?t:null!=t||NO(u,vn())?Ey(u,t||Ut.EMPTY_NODE):null}}}function PD(n,e,t,r){return sH(n.writeTree,n.treePath,e,t,r)}function PO(n,e){return function(n,e,t){let r=Ut.EMPTY_NODE;const i=Ig(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Zn,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Bh(n.visibleWrites,e);return t.forEachChild(Zn,(u,h)=>{const m=Ey(Bh(s,new xn(u)),h);r=r.updateImmediateChild(u,m)}),nH(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return nH(Bh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function oH(n,e,t,r){return function(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=lr(e,t);if(NO(n.visibleWrites,s))return null;{const u=Bh(n.visibleWrites,s);return OO(u)?i.getChild(t):Ey(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function FD(n,e){return function(n,e){return Ig(n.visibleWrites,e)}(n.writeTree,lr(n.treePath,e))}function FO(n,e,t){return function(n,e,t,r){const i=lr(e,t),s=Ig(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Ey(Bh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function aH(n,e){return lH(lr(n.treePath,e),n.writeTree)}function lH(n,e){return{treePath:n,writeTree:e}}class V5{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,n0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,t0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,vy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,n0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const uH=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class LO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Vh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Cg(this.viewCache_),s=function(n,e,t,r,i,s){return function(n,e,t,r,i,s,u){let h;const m=Bh(n.visibleWrites,e),v=Ig(m,vn());if(null!=v)h=v;else{if(null==t)return[];h=Ey(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],D=u.getCompare(),R=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let L=R.getNext();for(;L&&C.length<i;)0!==D(L,r)&&C.push(L),L=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function cH(n,e,t,r,i,s){const u=e.eventCache;if(null!=FD(r,t))return e;{let h,m;if(Qt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Cg(e),D=PO(r,v instanceof Ut?v:Ut.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const v=PD(r,Cg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,s)}else{const v=Yt(t);if(".priority"===v){(0,P.hu)(1===Lh(t),"Can't have a priority with additional path components");const C=u.getNode();m=e.serverCache.getNode();const D=oH(r,t,C,m);h=null!=D?n.filter.updatePriority(C,D):u.getNode()}else{const C=$n(t);let D;if(u.isCompleteForChild(v)){m=e.serverCache.getNode();const R=oH(r,t,u.getNode(),m);D=null!=R?u.getNode().getImmediateChild(v).updateChild(C,R):u.getNode().getImmediateChild(v)}else D=FO(r,v,e.serverCache);h=null!=D?n.filter.updateChild(u.getNode(),v,D,C,i,s):u.getNode()}}return a0(e,h,u.isFullyInitialized()||Qt(t),n.filter.filtersNodes())}}function LD(n,e,t,r,i,s,u,h){const m=e.serverCache;let v;const C=u?n.filter:n.filter.getIndexedFilter();if(Qt(t))v=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const L=m.getNode().updateChild(t,r);v=C.updateFullNode(m.getNode(),L,null)}else{const L=Yt(t);if(!m.isCompleteForPath(t)&&Lh(t)>1)return e;const U=$n(t),me=m.getNode().getImmediateChild(L).updateChild(U,r);v=".priority"===L?C.updatePriority(m.getNode(),me):C.updateChild(m.getNode(),L,me,U,uH,null)}const D=eH(e,v,m.isFullyInitialized()||Qt(t),C.filtersNodes());return cH(n,D,t,i,new LO(i,D,s),h)}function VO(n,e,t,r,i,s,u){const h=e.eventCache;let m,v;const C=new LO(i,e,s);if(Qt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=a0(e,v,!0,n.filter.filtersNodes());else{const D=Yt(t);if(".priority"===D)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=a0(e,v,h.isFullyInitialized(),h.isFiltered());else{const R=$n(t),L=h.getNode().getImmediateChild(D);let U;if(Qt(R))U=r;else{const X=C.getCompleteChild(D);U=null!=X?".priority"===pO(R)&&X.getChild(Fj(R)).isEmpty()?X:X.updateChild(R,r):Ut.EMPTY_NODE}m=L.equals(U)?e:a0(e,n.filter.updateChild(h.getNode(),D,U,R,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function dH(n,e){return n.eventCache.isCompleteForChild(e)}function hH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function BO(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=Qt(t)?r:new Yn(null).setTree(t,r);const C=e.serverCache.getNode();return v.children.inorderTraversal((D,R)=>{if(C.hasChild(D)){const U=hH(0,e.serverCache.getNode().getImmediateChild(D),R);m=LD(n,m,new xn(D),U,i,s,u,h)}}),v.children.inorderTraversal((D,R)=>{const L=!e.serverCache.isCompleteForChild(D)&&void 0===R.value;if(!C.hasChild(D)&&!L){const X=hH(0,e.serverCache.getNode().getImmediateChild(D),R);m=LD(n,m,new xn(D),X,i,s,u,h)}}),m}class K5{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new CO(r.getIndex()),s=function(n){return n.loadsAllData()?new CO(n.getIndex()):n.hasLimit()?new a5(n):new r0(n)}(r);this.processor_=function(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,m=i.updateFullNode(Ut.EMPTY_NODE,u.getNode(),null),v=s.updateFullNode(Ut.EMPTY_NODE,h.getNode(),null),C=new Vh(m,u.isFullyInitialized(),i.filtersNodes()),D=new Vh(v,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=RD(D,C),this.eventGenerator_=new v5(this.query_)}get query(){return this.query_}}function Q5(n,e){const t=Cg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Qt(e)&&!t.getImmediateChild(Yt(e)).isEmpty())?t.getChild(e):null}function fH(n){return 0===n.eventRegistrations_.length}function pH(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function gH(n,e,t,r){e.type===Va.MERGE&&null!==e.source.queryId&&((0,P.hu)(Cg(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(ND(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function(n,e,t,r,i){const s=new V5;let u,h;if(t.type===Va.OVERWRITE){const v=t;v.source.fromUser?u=VO(n,e,v.path,v.snap,r,i,s):((0,P.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!Qt(v.path),u=LD(n,e,v.path,v.snap,r,i,h,s))}else if(t.type===Va.MERGE){const v=t;v.source.fromUser?u=function(n,e,t,r,i,s,u){let h=e;return r.foreach((m,v)=>{const C=lr(t,m);dH(e,Yt(C))&&(h=VO(n,h,C,v,i,s,u))}),r.foreach((m,v)=>{const C=lr(t,m);dH(e,Yt(C))||(h=VO(n,h,C,v,i,s,u))}),h}(n,e,v.path,v.children,r,i,s):((0,P.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),u=BO(n,e,v.path,v.children,r,i,h,s))}else if(t.type===Va.ACK_USER_WRITE){const v=t;u=v.revert?function(n,e,t,r,i,s){let u;if(null!=FD(r,t))return e;{const h=new LO(r,e,i),m=e.eventCache.getNode();let v;if(Qt(t)||".priority"===Yt(t)){let C;if(e.serverCache.isFullyInitialized())C=PD(r,Cg(e));else{const D=e.serverCache.getNode();(0,P.hu)(D instanceof Ut,"serverChildren would be complete if leaf node"),C=PO(r,D)}C=C,v=n.filter.updateFullNode(m,C,s)}else{const C=Yt(t);let D=FO(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=m.getImmediateChild(C)),v=null!=D?n.filter.updateChild(m,C,D,$n(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Ut.EMPTY_NODE,$n(t),h,s):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=PD(r,Cg(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=FD(r,vn()),a0(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,s):function(n,e,t,r,i,s,u){if(null!=FD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Qt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return LD(n,e,t,m.getNode().getChild(t),i,s,h,u);if(Qt(t)){let v=new Yn(null);return m.getNode().forEachChild(zu,(C,D)=>{v=v.set(new xn(C),D)}),BO(n,e,t,v,i,s,h,u)}return e}{let v=new Yn(null);return r.foreach((C,D)=>{const R=lr(t,C);m.isCompleteForPath(R)&&(v=v.set(C,m.getNode().getChild(R)))}),BO(n,e,t,v,i,s,h,u)}}(n,e,v.path,v.affectedTree,r,i,s)}else{if(t.type!==Va.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);u=function(n,e,t,r,i){const s=e.serverCache;return cH(n,eH(e,s.getNode(),s.isFullyInitialized()||Qt(t),s.isFiltered()),t,r,uH,i)}(n,e,t.path,r,s)}const m=s.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ND(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Yj(ND(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,P.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,mH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function mH(n,e,t,r){return function(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),o0(n,i,"child_removed",e,r,t),o0(n,i,"child_added",e,r,t),o0(n,i,"child_moved",s,r,t),o0(n,i,"child_changed",e,r,t),o0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let VD,UD;class _H{constructor(){this.views=new Map}}function UO(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,P.hu)(null!=s,"SyncTree gave us an op for an invalid query."),gH(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(gH(u,e,t,r));return s}}function yH(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=PD(t,i?r:null),m=!1;h?m=!0:r instanceof Ut?(h=PO(t,r),m=!1):(h=Ut.EMPTY_NODE,m=!1);const v=RD(new Vh(h,m,!1),new Vh(r,i,!1));return new K5(e,v)}return u}function vH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Uh(n,e){let t=null;for(const r of n.views.values())t=t||Q5(r,e);return t}function bH(n,e){return e._queryParams.loadsAllData()?BD(n):n.views.get(e._queryIdentifier)}function wH(n,e){return null!=bH(n,e)}function jh(n){return null!=BD(n)}function BD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let aZ=1;class EH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_={visibleWrites:jl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jO(n,e,t,r,i){return function(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=l0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Cy(n,new Eg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Hh(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&A5(h,r.path)?i=!1:La(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function(n){n.visibleWrites=iH(n.allWrites,x5,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=tH(n.visibleWrites,r.path):Mi(r.children,m=>{n.visibleWrites=tH(n.visibleWrites,lr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let s=new Yn(null);return null!=r.snap?s=s.set(vn(),!0):Mi(r.children,u=>{s=s.set(new xn(u),!0)}),Cy(n,new kD(r.path,s,t))}return[]}function u0(n,e,t){return Cy(n,new Eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function HO(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let u=[];if(s&&("default"===e._queryIdentifier||wH(s,e))){const h=function(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=jh(n);if("default"===i)for(const[m,v]of n.views.entries())u=u.concat(pH(v,t,r)),fH(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||s.push(v.query));else{const m=n.views.get(i);m&&(u=u.concat(pH(m,t,r)),fH(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||s.push(m.query)))}return h&&!jh(n)&&s.push(new((0,P.hu)(VD,"Reference.ts has not been loaded"),VD)(e._repo,e._path)),{removed:s,events:u}}(s,e,t,r);(function(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;u=h.events;const v=-1!==m.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(D,R)=>jh(R));if(v&&!C){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const R=function(n){return n.fold((e,t,r)=>{if(t&&jh(t))return[BD(t)];{let i=[];return t&&(i=vH(t)),Mi(r,(s,u)=>{i=i.concat(u)}),i}})}(D);for(let L=0;L<R.length;++L){const U=R[L],X=U.query,me=DH(n,U);n.listenProvider_.startListening(c0(X),HD(n,X),me.hashFn,me.onComplete)}}}if(!C&&m.length>0&&!r)if(v){const D=null;n.listenProvider_.stopListening(c0(e),D)}else m.forEach(D=>{const R=n.queryToTagMap.get(GD(D));n.listenProvider_.stopListening(c0(D),R)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=GD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,m)}return u}function CH(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(D,R)=>{const L=qs(D,r);i=i||Uh(R,L),s=s||jh(R)});let h,u=n.syncPointTree_.get(r);u?(s=s||jh(u),i=i||Uh(u,vn())):(u=new _H,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=Ut.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((R,L)=>{const U=Uh(L,vn());U&&(i=i.updateImmediateChild(R,U))}));const m=wH(u,e);if(!m&&!e._queryParams.loadsAllData()){const D=GD(e);(0,P.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const R=aZ++;n.queryToTagMap.set(D,R),n.tagToQueryMap.set(R,D)}let C=function(n,e,t,r,i,s){const u=yH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Zn,(s,u)=>{r.push(vy(s,u))}),t.isFullyInitialized()&&r.push(Yj(t.getNode())),mH(n,r,t.getNode(),e)}(u,t)}(u,e,t,OD(n.pendingWriteTree_,r),i,h);if(!m&&!s){const D=bH(u,e);C=C.concat(function(n,e,t){const r=e._path,i=HD(n,e),s=DH(n,t),u=n.listenProvider_.startListening(c0(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!jh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,C,D)=>{if(!Qt(v)&&C&&jh(C))return[BD(C).query];{let R=[];return C&&(R=R.concat(vH(C).map(L=>L.query))),Mi(D,(L,U)=>{R=R.concat(U)}),R}});for(let v=0;v<m.length;++v){const C=m[v];n.listenProvider_.stopListening(c0(C),HD(n,C))}}return u}(n,e,D))}return C}function jD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const v=Uh(h,qs(u,e));if(v)return v});return sH(i,e,s,t,!0)}function Cy(n,e){return IH(e,n.syncPointTree_,null,OD(n.pendingWriteTree_,vn()))}function IH(n,e,t,r){if(Qt(n.path))return TH(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=Uh(i,vn()));let s=[];const u=Yt(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const v=t?t.getImmediateChild(u):null,C=aH(r,u);s=s.concat(IH(h,m,v,C))}return i&&(s=s.concat(UO(i,n,r,t))),s}}function TH(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=Uh(i,vn()));let s=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,v=aH(r,u),C=n.operationForChild(u);C&&(s=s.concat(TH(C,h,m,v)))}),i&&(s=s.concat(UO(i,n,r,t))),s}function DH(n,e){const t=e.query,r=HD(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Ut.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=GO(n,t);if(r){const i=$O(r),s=i.path,u=i.queryId,h=qs(s,e);return zO(n,s,new s0(xO(u),h))}return[]}(n,t._path,r):function(n,e){return Cy(n,new s0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return HO(n,t,null,s)}}}}function HD(n,e){const t=GD(e);return n.queryToTagMap.get(t)}function GD(n){return n._path.toString()+"$"+n._queryIdentifier}function GO(n,e){return n.tagToQueryMap.get(e)}function $O(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new xn(n.substr(0,e))}}function zO(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),UO(r,t,OD(n.pendingWriteTree_,e),null)}function c0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,P.hu)(UD,"Reference.ts has not been loaded"),UD)(n._repo,n._path):n}class qO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qO(t)}node(){return this.node_}}class WO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lr(this.path_,e);return new WO(this.syncTree_,t)}node(){return jD(this.syncTree_,this.path_)}}const SH=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?bZ(n[".sv"],e,t):"object"==typeof n[".sv"]?wZ(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},bZ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},wZ=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},AH=function(n,e,t,r){return ZO(e,new WO(t,n),r)},KO=function(n,e,t){return ZO(n,new qO(e),t)};function ZO(n,e,t){const r=n.getPriority().val(),i=SH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=SH(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new my(h,gr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new my(i))),u.forEachChild(Zn,(h,m)=>{const v=ZO(m,e.getImmediateChild(h),t);v!==m&&(s=s.updateImmediateChild(h,v))}),s}}class YO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function $D(n,e){let t=e instanceof xn?e:new xn(e),r=n,i=Yt(t);for(;null!==i;){const s=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new YO(i,r,s),t=$n(t),i=Yt(t)}return r}function Tg(n){return n.node.value}function QO(n,e){n.node.value=e,JO(n)}function MH(n){return n.node.childCount>0}function zD(n,e){Mi(n.node.children,(t,r)=>{e(new YO(t,n,r))})}function xH(n,e,t,r){t&&!r&&e(n),zD(n,i=>{xH(i,e,!0,r)}),t&&r&&e(n)}function d0(n){return new xn(null===n.parent?n.name:d0(n.parent)+"/"+n.name)}function JO(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Tg(n)&&!MH(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,JO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,JO(n))}(n.parent,n.name,n)}const TZ=/[\[\].#$\/\u0000-\u001F\u007F]/,DZ=/[\[\].#$\u0000-\u001F\u007F]/,XO=10485760,qD=function(n){return"string"==typeof n&&0!==n.length&&!TZ.test(n)},kH=function(n){return"string"==typeof n&&0!==n.length&&!DZ.test(n)},h0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!yD(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},qu=function(n,e,t,r){r&&void 0===e||f0((0,P.gK)(n,"value"),e,t)},f0=function(n,e,t){const r=t instanceof xn?new B4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+bg(r));if("function"==typeof e)throw new Error(n+"contains a function "+bg(r)+" with contents = "+e.toString());if(yD(e))throw new Error(n+"contains "+e.toString()+" "+bg(r));if("string"==typeof e&&e.length>XO/3&&(0,P.ug)(e)>XO)throw new Error(n+"contains a string greater than "+XO+" utf8 bytes "+bg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Mi(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!qD(u)))throw new Error(n+" contains an invalid key ("+u+") "+bg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),Lj(n)})(r,u),f0(n,h,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+bg(r)+" in addition to actual children.")}},RH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Mi(e,(u,h)=>{const m=new xn(u);if(f0(i,h,lr(t,m)),".priority"===pO(m)&&!h0(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Qw(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!qD(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(V4);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&La(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},eP=function(n,e,t){if(!t||void 0!==e){if(yD(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!h0(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},p0=function(n,e,t,r){if(!(r&&void 0===t||qD(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},g0=function(n,e,t,r){if(!(r&&void 0===t||kH(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ba=function(n,e){if(".info"===Yt(e))throw new Error(n+" failed = Can't modify data under /.info/")},NH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!qD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kH(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function WD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!gO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function tP(n,e,t){WD(n,t),OH(n,r=>gO(r,e))}function Ua(n,e,t){WD(n,t),OH(n,r=>La(r,e)||La(e,r))}function OH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(kZ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function kZ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();yg&&Ai("event: "+t.toString()),py(r)}}}const PH="repo_interrupt";class NZ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xD(),this.transactionQueueTree_=new YO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function FH(n){const t=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function m0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:FH(n)})}function LH(n,e,t,r,i){n.dataUpdateCount++;const s=new xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,P.UI)(t,v=>gr(v));u=function(n,e,t,r){const i=GO(n,r);if(i){const s=$O(i),u=s.path,h=s.queryId,m=qs(u,e),v=Yn.fromObject(t);return zO(n,u,new wy(xO(h),m,v))}return[]}(n.serverSyncTree_,s,m,i)}else{const m=gr(t);u=function(n,e,t,r){const i=GO(n,r);if(null!=i){const s=$O(i),u=s.path,h=s.queryId,m=qs(u,e);return zO(n,u,new Eg(xO(h),m,t))}return[]}(n.serverSyncTree_,s,m,i)}else if(r){const m=(0,P.UI)(t,v=>gr(v));u=function(n,e,t){const r=Yn.fromObject(t);return Cy(n,new wy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,m)}else{const m=gr(t);u=u0(n.serverSyncTree_,s,m)}let h=s;u.length>0&&(h=Ty(n,s)),Ua(n.eventQueue_,h,u)}function VH(n,e){nP(n,"connected",e),!1===e&&function(n){Iy(n,"onDisconnectEvents");const e=m0(n),t=xD();SO(n.onDisconnect_,vn(),(i,s)=>{const u=AH(i,s,n.serverSyncTree_,e);by(t,i,u)});let r=[];SO(t,vn(),(i,s)=>{r=r.concat(u0(n.serverSyncTree_,i,s));const u=oP(n,i);Ty(n,u)}),n.onDisconnect_=xD(),Ua(n.eventQueue_,vn(),r)}(n)}function nP(n,e,t){const r=new xn("/.info/"+e),i=gr(t);n.infoData_.updateSnapshot(r,i);const s=u0(n.infoSyncTree_,r,i);Ua(n.eventQueue_,r,s)}function KD(n){return n.nextWriteId_++}function rP(n,e,t,r,i){Iy(n,"set",{path:e.toString(),value:t,priority:r});const s=m0(n),u=gr(t,r),h=jD(n.serverSyncTree_,e),m=KO(u,h,s),v=KD(n),C=jO(n.serverSyncTree_,e,m,v,!0);WD(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(R,L)=>{const U="ok"===R;U||ys("set at "+e+" failed: "+R);const X=Hh(n.serverSyncTree_,v,!U);Ua(n.eventQueue_,e,X),Gh(0,i,R,L)});const D=oP(n,e);Ty(n,D),Ua(n.eventQueue_,D,[])}function BZ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&DO(n.onDisconnect_,e),Gh(0,t,r,i)})}function BH(n,e,t,r){const i=gr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&by(n.onDisconnect_,e,i),Gh(0,r,s,u)})}function iP(n,e,t){let r;r=".info"===Yt(e._path)?HO(n.infoSyncTree_,e,t):HO(n.serverSyncTree_,e,t),tP(n.eventQueue_,e._path,r)}function UH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(PH)}function Iy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ai(t,...e)}function Gh(n,e,t,r){e&&py(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function sP(n,e,t){return jD(n.serverSyncTree_,e,t)||Ut.EMPTY_NODE}function ZD(n,e=n.transactionQueueTree_){if(e||YD(n,e),Tg(e)){const t=HH(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(v=>v.currentWriteId),i=sP(n,e,r);let s=i;const u=i.hash();for(let v=0;v<t.length;v++){const C=t[v];(0,P.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=qs(e,C.path);s=s.updateChild(D,C.currentOutputSnapshotRaw)}const h=s.val(!0),m=e;n.server_.put(m.toString(),h,v=>{Iy(n,"transaction put response",{path:m.toString(),status:v});let C=[];if("ok"===v){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(Hh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();YD(n,$D(n.transactionQueueTree_,e)),ZD(n,n.transactionQueueTree_),Ua(n.eventQueue_,e,C);for(let R=0;R<D.length;R++)py(D[R])}else{if("datastale"===v)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{ys("transaction at "+m.toString()+" failed: "+v);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=v}Ty(n,e)}},u)}(n,d0(e),t)}else MH(e)&&zD(e,t=>{ZD(n,t)})}function Ty(n,e){const t=jH(n,e),r=d0(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=qs(t,m.path);let D,C=!1;if((0,P.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,D=m.abortReason,i=i.concat(Hh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,D="maxretry",i=i.concat(Hh(n.serverSyncTree_,m.currentWriteId,!0));else{const R=sP(n,m.path,u);m.currentInputSnapshot=R;const L=e[h].update(R.val());if(void 0!==L){f0("transaction failed: Data returned ",L,m.path);let U=gr(L);"object"==typeof L&&null!=L&&(0,P.r3)(L,".priority")||(U=U.updatePriority(R.getPriority()));const me=m.currentWriteId,Je=m0(n),nt=KO(U,R,Je);m.currentOutputSnapshotRaw=U,m.currentOutputSnapshotResolved=nt,m.currentWriteId=KD(n),u.splice(u.indexOf(me),1),i=i.concat(jO(n.serverSyncTree_,m.path,nt,m.currentWriteId,m.applyLocally)),i=i.concat(Hh(n.serverSyncTree_,me,!0))}else C=!0,D="nodata",i=i.concat(Hh(n.serverSyncTree_,m.currentWriteId,!0))}Ua(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}YD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)py(r[h]);ZD(n,n.transactionQueueTree_)}(n,HH(n,t),r),r}function jH(n,e){let t,r=n.transactionQueueTree_;for(t=Yt(e);null!==t&&void 0===Tg(r);)r=$D(r,t),t=Yt(e=$n(e));return r}function HH(n,e){const t=[];return GH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function GH(n,e,t){const r=Tg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zD(e,i=>{GH(n,i,t)})}function YD(n,e){const t=Tg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,QO(e,t.length>0?t:void 0)}zD(e,r=>{YD(n,r)})}function oP(n,e){const t=d0(jH(n,e)),r=$D(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{aP(n,i)}),aP(n,r),xH(r,i=>{aP(n,i)}),t}function aP(n,e){const t=Tg(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,P.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,P.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Hh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?QO(e,void 0):t.length=s+1,Ua(n.eventQueue_,d0(e),i);for(let u=0;u<r.length;u++)py(r[u])}}const lP=function(n,e){const t=ZZ(n),r=t.namespace;return"firebase.com"===t.domain&&Gu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Gu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new xn(t.pathString)}},ZZ=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(C,D)));const R=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ys(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));v=e.indexOf(":"),v>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const L=e.slice(0,v);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=r}"ns"in R&&(s=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class $H{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class zH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class WH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return BZ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ba("OnDisconnect.remove",this._path);const e=new P.BH;return BH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ba("OnDisconnect.set",this._path),qu("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return BH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ba("OnDisconnect.setWithPriority",this._path),qu("OnDisconnect.setWithPriority",e,this._path,!1),eP("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function(n,e,t,r,i){const s=gr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&by(n.onDisconnect_,e,s),Gh(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ba("OnDisconnect.update",this._path),RH("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function(n,e,t,r){if((0,P.xb)(t))return Ai("onDisconnect().update() called with empty data.  Don't do anything."),void Gh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Mi(t,(u,h)=>{const m=gr(h);by(n.onDisconnect_,lr(e,u),m)}),Gh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Qt(this._path)?null:pO(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){const e=Jj(this._queryParams),t=sO(e);return"{}"===t?"default":t}get _queryObject(){return Jj(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=gO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function QD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $h(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===zu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==$u)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Zn){if(null!=e&&!h0(e)||null!=t&&!h0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof bO||n.getIndex()===wO,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function JD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ja extends Co{constructor(e,t){super(e,t,new SD,!1)}get parent(){const e=Fj(this._path);return null===e?null:new ja(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Dg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new xn(e),r=Sg(this.ref,e);return new Dg(this._node.getChild(t),r,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Dg(i,Sg(this.ref,r),Zn)))}hasChild(e){const t=new xn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function KH(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Sg(n._root,e):n._root}function ZH(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=lP(e,n._repo.repoInfo_.nodeAdmin);NH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Gu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),KH(n,t.path.toString())}function Sg(n,e){return null===Yt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),g0("child","path",t,!1)):g0("child","path",e,!1),new ja(n._repo,lr(n._path,e));var t}function uP(n,e){n=(0,P.m9)(n),Ba("set",n._path),qu("set",e,n._path,!1);const t=new P.BH;return rP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function eY(n,e){RH("update",e,n._path,!1);const t=new P.BH;return function(n,e,t,r){Iy(n,"update",{path:e.toString(),value:t});let i=!0;const s=m0(n),u={};if(Mi(t,(h,m)=>{i=!1,u[h]=AH(lr(e,h),gr(m),n.serverSyncTree_,s)}),i)Ai("update() called with empty data.  Don't do anything."),Gh(0,r,"ok",void 0);else{const h=KD(n),m=function(n,e,t,r){!function(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=RO(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Yn.fromObject(t);return Cy(n,new wy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);WD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,C)=>{const D="ok"===v;D||ys("update at "+e+" failed: "+v);const R=Hh(n.serverSyncTree_,h,!D),L=R.length>0?Ty(n,e):e;Ua(n.eventQueue_,L,R),Gh(0,r,v,C)}),Mi(t,v=>{const C=oP(n,lr(e,v));Ty(n,C)}),Ua(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function tY(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,C)=>{const D=qs(v,t);r=r||Uh(C,D)});let i=n.syncPointTree_.get(t);i?r=r||Uh(i,vn()):(i=new _H,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new Vh(r,!0,!1):null;return function(n){return ND(n.viewCache_)}(yH(i,e,OD(n.pendingWriteTree_,e._path),s?u.getNode():Ut.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=gr(r).withIndex(e._queryParams.getIndex()),s=u0(n.serverSyncTree_,e._path,i);return tP(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(Iy(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new Dg(e,new ja(n._repo,n._path),n._queryParams.getIndex()))}class XD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new $H("value",this,new Dg(e.snapshotNode,new ja(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zH(this,e,t):null}matches(e){return e instanceof XD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class eS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zH(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=Sg(new ja(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new $H(e.type,this,new Dg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof eS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const m=t,v=(C,D)=>{iP(n._repo,n,h),m(C,D)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new qH(t,s||void 0),h="value"===e?new XD(u):new eS(e,u);return function(n,e,t){let r;r=".info"===Yt(e._path)?CH(n.infoSyncTree_,e,t):CH(n.serverSyncTree_,e,t),tP(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>iP(n._repo,n,h)}function cP(n,e,t,r){return _0(n,"value",e,t,r)}function YH(n,e,t,r){return _0(n,"child_added",e,t,r)}function QH(n,e,t,r){return _0(n,"child_changed",e,t,r)}function JH(n,e,t,r){return _0(n,"child_moved",e,t,r)}function XH(n,e,t,r){return _0(n,"child_removed",e,t,r)}function eG(n,e,t){let r=null;const i=t?new qH(t):null;"value"===e?r=new XD(i):e&&(r=new eS(e,i)),iP(n._repo,n,r)}class Hl{}class tG extends Hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){qu("endAt",this._value,e._path,!0);const t=TO(e._queryParams,this._value,this._key);if(JD(t),$h(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class rY extends Hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){qu("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===zu?("string"==typeof e&&(e=Zj(e)),i=TO(n,e,t)):(r=null==t?Xc:Zj(t),i=TO(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(JD(t),$h(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class nG extends Hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){qu("startAt",this._value,e._path,!0);const t=IO(e._queryParams,this._value,this._key);if(JD(t),$h(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class oY extends Hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){qu("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===zu)"string"==typeof e&&(e=Kj(e)),r=IO(n,e,t);else{let i;i=null==t?$u:Kj(t),r=IO(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(JD(t),$h(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class lY extends Hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class cY extends Hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class hY extends Hl{constructor(e){super(),this._path=e}_apply(e){QD(e,"orderByChild");const t=new xn(this._path);if(Qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new bO(t),i=AD(e._queryParams,r);return $h(i),new Co(e._repo,e._path,i,!0)}}class pY extends Hl{_apply(e){QD(e,"orderByKey");const t=AD(e._queryParams,zu);return $h(t),new Co(e._repo,e._path,t,!0)}}class mY extends Hl{_apply(e){QD(e,"orderByPriority");const t=AD(e._queryParams,Zn);return $h(t),new Co(e._repo,e._path,t,!0)}}class yY extends Hl{_apply(e){QD(e,"orderByValue");const t=AD(e._queryParams,wO);return $h(t),new Co(e._repo,e._path,t,!0)}}class bY extends Hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(qu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tG(this._value,this._key)._apply(new nG(this._value,this._key)._apply(e))}}function Gl(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,P.hu)(!VD,"__referenceConstructor has already been defined"),VD=n})(ja),function(n){(0,P.hu)(!UD,"__referenceConstructor has already been defined"),UD=n}(ja);const dP={};function iG(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Gu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ai("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,u=lP(s,i),h=u.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,s=`http://${v}?ns=${h.namespace}`,u=lP(s,i),h=u.repoInfo):m=!u.repoInfo.secure;const C=i&&m?new Yw(Yw.OWNER):new h4(n.name,n.options,e);NH("Invalid Firebase Database URL",u),Qt(u.path)||Gu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function(n,e,t,r){let i=dP[e.name];i||(i={},dP[e.name]=i);let s=i[n.toURLString()];return s&&Gu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new NZ(n,false,t,r),i[n.toURLString()]=s,s}(h,n,C,new d4(n.name,t));return new SY(D,n)}class SY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=dO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new MD(n.repoInfo_,(r,i,s,u)=>{LH(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>VH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wg(n.repoInfo_,e,(r,i,s,u)=>{LH(n,r,i,s,u)},r=>{VH(n,r)},r=>{!function(n,e){Mi(e,(t,r)=>{nP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return cO[t]||(cO[t]=e()),cO[t]}(n.repoInfo_,()=>new y5(n.stats_,n.server_)),n.infoData_=new f5,n.infoSyncTree_=new EH({startListening:(r,i,s,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=u0(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),nP(n,"connected",!1),n.serverSyncTree_=new EH({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,m)=>{const v=u(h,m);Ua(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=dP[e];(!t||t[n.key]!==n)&&Gu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),UH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Gu("Cannot call "+e+" on a deleted database.")}}function sG(){Ij.IS_TRANSPORT_INITIALIZED&&ys("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function AY(){sG(),Fh.forceDisallow()}function MY(){sG(),gy.forceDisallow(),Fh.forceAllow()}function NY(n,e){ij(n,e)}class VY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},X2(Pl.SDK_VERSION),(0,Pl._registerComponent)(new Gc.wA("database",(e,{instanceIdentifier:t})=>iG(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pl.registerVersion)(Q2,"0.13.0",void 0),(0,Pl.registerVersion)(Q2,"0.13.0","esm2017");const HY=new Fl.Yd("@firebase/database-compat"),oG=function(n){HY.warn("FIREBASE WARNING: "+n)};class zY{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,oG("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class qY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),g0("DataSnapshot.child","path",e,!1),new zh(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),g0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new zh(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new na(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Qi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const u=Qi.getCancelAndContextArgs_("Query.on",r,i),h=(v,C)=>{t.call(u.context,new zh(this.database,v),C)};h.userCallback=t,h.context=u.context;const m=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return cP(this._delegate,h,m),t;case"child_added":return YH(this._delegate,h,m),t;case"child_removed":return XH(this._delegate,h,m),t;case"child_changed":return QH(this._delegate,h,m),t;case"child_moved":return JH(this._delegate,h,m),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,eG(this._delegate,e,i)}else eG(this._delegate,e)}get(){return tY(this._delegate).then(e=>new zh(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const s=Qi.getCancelAndContextArgs_("Query.once",r,i),u=new P.BH,h=(v,C)=>{const D=new zh(this.database,v);t&&t.call(s.context,D,C),u.resolve(D)};h.userCallback=t,h.context=s.context;const m=v=>{s.cancel&&s.cancel.call(s.context,v),u.reject(v)};switch(e){case"value":cP(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":YH(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":XH(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":QH(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":JH(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Qi(this.database,Gl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new lY(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Qi(this.database,Gl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cY(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Qi(this.database,Gl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return g0("orderByChild","path",n,!1),new hY(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Qi(this.database,Gl(this._delegate,new pY))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Qi(this.database,Gl(this._delegate,new mY))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Qi(this.database,Gl(this._delegate,new yY))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Qi(this.database,Gl(this._delegate,function(n=null,e){return p0("startAt","key",e,!0),new nG(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Qi(this.database,Gl(this._delegate,function(n,e){return p0("startAfter","key",e,!0),new oY(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Qi(this.database,Gl(this._delegate,function(n,e){return p0("endAt","key",e,!0),new tG(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Qi(this.database,Gl(this._delegate,function(n,e){return p0("endBefore","key",e,!0),new rY(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Qi(this.database,Gl(this._delegate,function(n,e){return p0("equalTo","key",e,!0),new bY(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Qi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new na(this.database,new ja(this._delegate._repo,this._delegate._path))}}class na extends Qi{constructor(e,t){super(e,new Co(t._repo,t._path,new SD,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new na(this.database,Sg(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new na(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new na(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=uP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,oG("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=eY(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Ba("setWithPriority",n._path),qu("setWithPriority",e,n._path,!1),eP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return rP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Ba("remove",n._path),uP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,P.m9)(n),Ba("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new P.BH,h=cP(n,()=>{});return function(n,e,t,r,i,s){Iy(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:tj(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=sP(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{f0("transaction failed: Data returned ",m,u.path),u.status=0;const v=$D(n.transactionQueueTree_,e),C=Tg(v)||[];let D;C.push(u),QO(v,C),"object"==typeof m&&null!==m&&(0,P.r3)(m,".priority")?(D=(0,P.DV)(m,".priority"),(0,P.hu)(h0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(jD(n.serverSyncTree_,e)||Ut.EMPTY_NODE).getPriority().val();const R=m0(n),L=gr(m,D),U=KO(L,h,R);u.currentOutputSnapshotRaw=L,u.currentOutputSnapshotResolved=U,u.currentWriteId=KD(n);const X=jO(n.serverSyncTree_,e,U,u.currentWriteId,u.applyLocally);Ua(n.eventQueue_,e,X),ZD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,C)=>{let D=null;m?s.reject(m):(D=new Dg(C,new ja(n._repo,n._path),Zn),s.resolve(new VY(v,D)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new qY(s.committed,new zh(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,P.m9)(n),Ba("setPriority",n._path),eP("setPriority",e,!1);const t=new P.BH;return rP(n._repo,lr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,P.m9)(n),Ba("push",n._path),qu("push",e,n._path,!0);const t=FH(n._repo),r=s5(t),i=Sg(n,r),s=Sg(n,r);let u;return u=null!=e?uP(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new na(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new na(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ba("Reference.onDisconnect",this._delegate._path),new zY(new WH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class y0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:AY,forceLongPolling:MY}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Gu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Yw(Yw.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);s=new Yw(u)}!function(n,e,t,r){n.repoInfo_=new lO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof na){const t=ZH(this._delegate,e.toString());return new na(this,t)}{const t=KH(this._delegate,e);return new na(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=ZH(this._delegate,e);return new na(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),UH(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(PH)}(n._repo)}(this._delegate)}}y0.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var KY=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){X2(t);const u=new Gc.zt("auth-internal",new Gc.H0("database-standalone"));return u.setComponent(new Gc.wA("auth-internal",()=>r,"PRIVATE")),{instance:new y0(iG(n,u,void 0,e,s),n),namespace:i}}});const ZY=y0.ServerValue;function aG(n){return null==n}function lG(n){return"function"==typeof n.set}function uG(n,e){return lG(e)?e:n.ref(e)}function cG(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(lG(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function v0(n,e,t="on",r=Au.z){return new Pn.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Ze.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,Sp.B)())}function dG(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function t7(n,e){const{payload:t,prevKey:r,key:i}=e,s=dG(n,i),u=function(n,e){if(aG(e))return 0;{const t=dG(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function hG(n){return(aG(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function fG(n,e,t){return function(n,e,t){return v0(n,"value","once",t).pipe(Fn(r=>{const i=[qe(r)];return e.forEach(s=>i.push(v0(n,s,"on",t))),(0,vo.T)(...i).pipe(_i(t7,[]))}),Cm())}(n,e=hG(e),t)}function pG(n,e,t){const r=(e=hG(e)).map(i=>v0(n,i,"on",t));return(0,vo.T)(...r)}function gG(n,e){return function(r,i){return cG(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function s7(n){return function(t){return t?cG(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function mG(n,e){return function(){return v0(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new Gc.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new y0(i,r)},"PUBLIC").setServiceProps({Reference:na,Query:Qi,Database:y0,DataSnapshot:zh,enableLogging:NY,INTERNAL:KY,ServerValue:ZY}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(NF.Z);const l7=new c.OlP("angularfire2.realtimeDatabaseURL"),u7=new c.OlP("angularfire2.database.use-emulator");let c7=(()=>{class n{constructor(t,r,i,s,u,h,m,v,C,D,R,L,U,X,me){this.schedulers=h;const Je=m,nt=(0,Vs.on)(t,u,r);v&&YN(nt,u,C,R,L,U,D,X),this.database=(0,Vs.cc)(`${nt.name}.database.${i}`,"AngularFireDatabase",nt.name,()=>{const ct=u.runOutsideAngular(()=>nt.database(i||void 0));return Je&&ct.useEmulator(...Je),ct},[Je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>uG(this.database,t));let s=i;return r&&(s=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:gG(r,"update"),set:gG(r,"set"),push:i=>r.push(i),remove:s7(r),snapshotChanges:i=>fG(n,i,t).pipe(sr.iC),stateChanges:i=>pG(n,i,t).pipe(sr.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return v0(n,"value","on",e).pipe((0,Ze.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,so.jO)(n);return(0,jn.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Lr.Xf)(n[m]).subscribe(new _n.Q(r,v=>{s[m]=v,!h&&!u[m]&&(u[m]=!0,(h=u.every(Lo.y))&&(u=null))},Pf.Z));t.subscribe(new _n.Q(r,m=>{if(h){const v=[m,...s];r.next(e?e(...v):v)}}))})}(e),(0,Ze.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(m=>m.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),(0,jn.e)((e,t)=>{let r=!1;e.subscribe(new _n.Q(t,s=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(s)))&&t.next(s)))}),(0,Ze.U)(i=>i.actions))}(n,pG(n,e).pipe(_i((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(sr.iC),valueChanges:(i,s)=>fG(n,i,t).pipe((0,Ze.U)(h=>h.map(m=>s&&s.idField?Object.assign(Object.assign({},m.payload.val()),{[s.idField]:m.key}):m.payload.val())),sr.iC)}}(s,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>mG(n,e.schedulers.outsideAngular)().pipe(sr.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>mG(n,e.schedulers.outsideAngular)().pipe(sr.iC,(0,Ze.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>uG(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vs.Dh),c.LFG(Vs.xv,8),c.LFG(l7,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(sr.HU),c.LFG(u7,8),c.LFG(QN,8),c.LFG($N,8),c.LFG(zN,8),c.LFG(qN,8),c.LFG(WN,8),c.LFG(KN,8),c.LFG(ZN,8),c.LFG(pD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d7=(()=>{class n{constructor(){MK.Z.registerVersion("angularfire",sr.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[c7]}),n})(),h7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[J8]}),n.\u0275inj=c.cJS({providers:[],imports:[[ua,Nc,yM.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),wC,x8,wI,HM,g3,wb,m3,KK,Vs.hO.initializeApp({apiKey:"AIzaSyDwY0ustgrbdUrkt0FXwseq89vcH_zirJo",authDomain:"personnaltrack.firebaseapp.com",projectId:"personnaltrack",storageBucket:"personnaltrack.appspot.com",messagingSenderId:"588509586658",appId:"1:588509586658:web:334cb1ed45319ff2592abb",measurementId:"G-G9PZNFDF99"}),d7,j8,gh,dh]]}),n})();(0,c.G48)(),Fo().bootstrapModule(h7).catch(n=>console.error(n))},9162:(Qe,_e,O)=>{function ue(Z,ee,de,ge){return new(de||(de=Promise))(function(ae,yt){function jt(Wt){try{wt(ge.next(Wt))}catch(Ct){yt(Ct)}}function Tn(Wt){try{wt(ge.throw(Wt))}catch(Ct){yt(Ct)}}function wt(Wt){Wt.done?ae(Wt.value):function(ae){return ae instanceof de?ae:new de(function(yt){yt(ae)})}(Wt.value).then(jt,Tn)}wt((ge=ge.apply(Z,ee||[])).next())})}function Fe(Z){return this instanceof Fe?(this.v=Z,this):new Fe(Z)}function ie(Z,ee,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ge=de.apply(Z,ee||[]),ae=[];return Me={},yt("next"),yt("throw"),yt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function yt(on){ge[on]&&(Me[on]=function(ur){return new Promise(function(fi,cn){ae.push([on,ur,fi,cn])>1||jt(on,ur)})})}function jt(on,ur){try{!function(on){on.value instanceof Fe?Promise.resolve(on.value.v).then(wt,Wt):Ct(ae[0][2],on)}(ge[on](ur))}catch(fi){Ct(ae[0][3],fi)}}function wt(on){jt("next",on)}function Wt(on){jt("throw",on)}function Ct(on,ur){on(ur),ae.shift(),ae.length&&jt(ae[0][0],ae[0][1])}}function Be(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ee=Z[Symbol.asyncIterator];return ee?ee.call(Z):(Z=function(Z){var ee="function"==typeof Symbol&&Symbol.iterator,de=ee&&Z[ee],ge=0;if(de)return de.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ge>=Z.length&&(Z=void 0),{value:Z&&Z[ge++],done:!Z}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),de={},ge("next"),ge("throw"),ge("return"),de[Symbol.asyncIterator]=function(){return this},de);function ge(ae){de[ae]=Z[ae]&&function(yt){return new Promise(function(jt,Tn){!function(ae,yt,jt,Tn){Promise.resolve(Tn).then(function(wt){ae({value:wt,done:jt})},yt)}(jt,Tn,(yt=Z[ae](yt)).done,yt.value)})}}}O.d(_e,{mG:()=>ue,qq:()=>Fe,FC:()=>ie,KL:()=>Be})},3668:(Qe,_e,O)=>{O.d(_e,{deG:()=>gl,tb:()=>xp,AFp:()=>ZM,ip1:()=>mI,CZH:()=>Mp,hGG:()=>yF,z2F:()=>Fu,sBO:()=>NI,Sil:()=>yb,_Vd:()=>ch,EJc:()=>vI,SBq:()=>wp,qLn:()=>Ea,vpe:()=>Rl,tBr:()=>yn,XFs:()=>dt,OlP:()=>dn,zs3:()=>Ko,ZZ4:()=>S_,aQg:()=>A_,soG:()=>kp,YKP:()=>o_,h0i:()=>hh,PXZ:()=>SI,R0b:()=>Ls,FiY:()=>Br,Lbi:()=>yI,g9A:()=>YM,n_E:()=>nb,Qsj:()=>lM,FYo:()=>Kv,JOm:()=>Ns,q3G:()=>Hn,tp0:()=>oi,Rgc:()=>p_,dDg:()=>CI,q4F:()=>Zv,GfV:()=>kl,s_b:()=>ph,ifc:()=>Xe,eFA:()=>AI,G48:()=>RI,Gpc:()=>W,f3M:()=>it,X6Q:()=>kI,_c5:()=>_F,VLi:()=>lF,c2e:()=>_h,zSh:()=>tE,wAp:()=>Et,vHH:()=>je,EiD:()=>Nd,mCW:()=>bl,qzn:()=>mu,JVY:()=>bc,pB0:()=>Kg,eBb:()=>qg,L6k:()=>wc,LAX:()=>Wg,cg1:()=>pp,kL8:()=>gp,yhl:()=>vc,dqk:()=>It,sIi:()=>Tm,CqO:()=>ME,QGY:()=>xl,F4k:()=>nh,RDi:()=>ec,AaK:()=>ue,z3N:()=>xs,qOj:()=>uv,TTD:()=>Js,_Bn:()=>LC,xp6:()=>Jy,uIk:()=>dv,ekj:()=>cp,Suo:()=>sI,Xpm:()=>xt,lG2:()=>ia,Yz7:()=>cn,cJS:()=>Qn,oAB:()=>$l,Yjl:()=>sa,Y36:()=>xu,_UZ:()=>SE,GkF:()=>Av,BQk:()=>Pm,ynx:()=>Ma,qZA:()=>th,TgZ:()=>np,EpF:()=>Qo,n5z:()=>As,Ikx:()=>Zm,LFG:()=>Y,$8M:()=>Ft,$Z:()=>ep,NdJ:()=>ip,CRH:()=>ob,O4$:()=>tu,oxw:()=>kE,Hsn:()=>hs,F$t:()=>Mv,Q6J:()=>Om,iGM:()=>iI,MAs:()=>xm,CHM:()=>Ss,LSH:()=>po,Udp:()=>sh,WFA:()=>Fm,d8E:()=>Gv,YNc:()=>gv,_uU:()=>WE,Oqu:()=>$m,hij:()=>hp,AsE:()=>Fv,Gf:()=>PM});var c=O(273),te=O(7908),F=O(8305),ce=O(3719),le=O(3174);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function ue(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ue).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function pe(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const G=ye({__forward_ref__:ye});function W(o){return o.__forward_ref__=W,o.toString=function(){return ue(this())},o}function oe(o){return $e(o)?o():o}function $e(o){return"function"==typeof o&&o.hasOwnProperty(G)&&o.__forward_ref__===W}class je extends Error{constructor(a,l){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,l)),this.code=a}}function ie(o){return"string"==typeof o?o:null==o?"":String(o)}function Ce(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ie(o)}function Ne(o,a){const l=a?` in ${a}`:"";throw new je("201",`No provider for ${Ce(o)} found${l}`)}function Wt(o,a){null==o&&function(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Qn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ji(o){return Ir(o,Zr)||Ir(o,Re)}function Ir(o,a){return o.hasOwnProperty(a)?o[a]:null}function Io(o){return o&&(o.hasOwnProperty(mr)||o.hasOwnProperty(_r))?o[mr]:null}const Zr=ye({\u0275prov:ye}),mr=ye({\u0275inj:ye}),Re=ye({ngInjectableDef:ye}),_r=ye({ngInjectorDef:ye});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Dn;function Or(o){const a=Dn;return Dn=o,a}function Yr(o,a,l){const d=Ji(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&dt.Optional?null:void 0!==a?a:void Ne(ue(o),"Injector")}function zn(o){return{toString:o}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),Xe=(()=>{return(o=Xe||(Xe={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Xe;var o})();const vt="undefined"!=typeof globalThis&&globalThis,Ks="undefined"!=typeof window&&window,ki="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It=vt||"undefined"!=typeof global&&global||Ks||ki,q={},j=[],K=ye({\u0275cmp:ye}),we=ye({\u0275dir:ye}),$=ye({\u0275pipe:ye}),re=ye({\u0275mod:ye}),Ae=ye({\u0275fac:ye}),et=ye({__NG_ELEMENT_ID__:ye});let Dt=0;function xt(o){return zn(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||j,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Xe.Emulated,id:"c",styles:o.styles||j,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,_=o.features,b=o.pipes;return d.id+=Dt++,d.inputs=zl(o.inputs,l),d.outputs=zl(o.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(kt):null,d.pipeDefs=b?()=>("function"==typeof b?b():b).map(Pr):null,d})}function kt(o){return nr(o)||function(o){return o[we]||null}(o)}function Pr(o){return function(o){return o[$]||null}(o)}const pi={};function $l(o){return zn(()=>{const a={type:o.type,bootstrap:o.bootstrap||j,declarations:o.declarations||j,imports:o.imports||j,exports:o.exports||j,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(pi[o.id]=o.type),a})}function zl(o,a){if(null==o)return q;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),l[f]=d,a&&(a[f]=_)}return l}const ia=xt;function sa(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function nr(o){return o[K]||null}function yr(o,a){const l=o[re]||null;if(!l&&!0===a)throw new Error(`Type ${ue(o)} does not have '\u0275mod' property.`);return l}function Oi(o){return Array.isArray(o)&&"object"==typeof o[1]}function Pi(o){return Array.isArray(o)&&!0===o[1]}function Wh(o){return 0!=(8&o.flags)}function Qs(o){return 2==(2&o.flags)}function Wn(o){return 1==(1&o.flags)}function ni(o){return null!==o.template}function Kh(o){return 0!=(512&o[2])}function es(o,a){return o.hasOwnProperty(Ae)?o[Ae]:null}class Ju{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Js(){return cd}function cd(o){return o.type.prototype.ngOnChanges&&(o.setInput=Xs),dd}function dd(){const o=Es(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===q)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Xs(o,a,l,d){const f=Es(o)||function(o,a){return o[ts]=a}(o,{previous:q,current:null}),_=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[l],I=b[E];_[E]=new Ju(I&&I.currentValue,a,b===q),o[d]=a}Js.ngInherit=!0;const ts="__ngSimpleChanges__";function Es(o){return o[ts]||null}const hd="http://www.w3.org/2000/svg";let Zl;function ec(o){Zl=o}function nn(o){return!!o.listen}const Is={createRenderer:(o,a)=>void 0!==Zl?Zl:"undefined"!=typeof document?document:void 0};function Un(o){for(;Array.isArray(o);)o=o[0];return o}function eo(o,a){return Un(a[o])}function Rn(o,a){return Un(a[o.index])}function Li(o,a){return o.data[a]}function rn(o,a){const l=a[o];return Oi(l)?l:l[0]}function Qa(o){return 4==(4&o[2])}function Ja(o){return 128==(128&o[2])}function ri(o,a){return null==a?null:o[a]}function xo(o){o[18]=0}function ko(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const pt={lFrame:eu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tl(){return pt.bindingsEnabled}function Se(){return pt.lFrame.lView}function $t(){return pt.lFrame.tView}function Ss(o){return pt.lFrame.contextLView=o,o[8]}function Nn(){let o=nl();for(;null!==o&&64===o.type;)o=o.parent;return o}function nl(){return pt.lFrame.currentTNode}function wr(o,a){const l=pt.lFrame;l.currentTNode=o,l.isParent=a}function Yl(){return pt.lFrame.isParent}function Ro(){pt.lFrame.isParent=!1}function No(){return pt.isInCheckNoChangesMode}function Oo(o){pt.isInCheckNoChangesMode=o}function no(){return pt.lFrame.bindingIndex++}function ns(o){const a=pt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function il(o,a){const l=pt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Po(a)}function Po(o){pt.lFrame.currentDirectiveIndex=o}function Fo(o){const a=pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Jl(){return pt.lFrame.currentQueryIndex}function ua(o){pt.lFrame.currentQueryIndex=o}function gd(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Xl(o,a,l){if(l&dt.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||l&dt.Host||(f=gd(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;a=f,o=_}const d=pt.lFrame=sl();return d.currentTNode=a,d.lView=o,!0}function sc(o){const a=sl(),l=o[1];pt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function sl(){const o=pt.lFrame,a=null===o?null:o.child;return null===a?eu(o):a}function eu(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function ol(){const o=pt.lFrame;return pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const md=ol;function al(){const o=ol();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Sn(){return pt.lFrame.selectedIndex}function ro(o){pt.lFrame.selectedIndex=o}function gn(){const o=pt.lFrame;return Li(o.tView,o.selectedIndex)}function tu(){pt.lFrame.currentNamespace=hd}function io(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const _=o.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:k}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-l,b),E&&((o.contentHooks||(o.contentHooks=[])).push(l,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,E)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),M&&((o.viewHooks||(o.viewHooks=[])).push(l,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,M)),null!=k&&(o.destroyHooks||(o.destroyHooks=[])).push(l,k)}}function nu(o,a,l){oc(o,a,3,l)}function ul(o,a,l,d){(3&o[2])===l&&oc(o,a,l,d)}function yd(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function oc(o,a,l,d){const _=null!=d?d:-1,b=a.length-1;let E=0;for(let I=void 0!==d?65535&o[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(o[18]+=65536),(E<_||-1==_)&&(vd(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function vd(o,a,l,d){const f=l[d]<0,_=l[d+1],E=o[f?-l[d]:l[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(E)}finally{}}}else try{_.call(E)}finally{}}class cl{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function mn(o,a,l){const d=nn(o);let f=0;for(;f<l.length;){const _=l[f];if("number"==typeof _){if(0!==_)break;f++;const b=l[f++],E=l[f++],I=l[f++];d?o.setAttribute(a,E,I,b):a.setAttributeNS(b,E,I)}else{const b=_,E=l[++f];qe(b)?d&&o.setProperty(a,b,E):d?o.setAttribute(a,b,E):a.setAttribute(b,E),f++}}return f}function so(o){return 3===o||4===o||6===o}function qe(o){return 64===o.charCodeAt(0)}function Rt(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||hr(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function hr(o,a,l,d,f){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const E=o[_++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=_-1;break}}}for(;_<o.length;){const E=o[_];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(o[_+1]=f));if(d===o[_+1])return void(o[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,l),null!==d&&o.splice(_++,0,d),null!==f&&o.splice(_++,0,f)}function Pn(o){return-1!==o}function da(o){return 32767&o}function fl(o,a){let l=function(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let iu=!0;function su(o){const a=iu;return iu=o,a}let Vo=0;function Bo(o,a){const l=_n(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,ou(d.data,o),ou(a,null),ou(d.blueprint,null));const f=au(o,a),_=o.injectorIndex;if(Pn(f)){const b=da(f),E=fl(f,a),I=E[1].data;for(let M=0;M<8;M++)a[_+M]=E[b+M]|I[b+M]}return a[_+8]=f,_}function ou(o,a){o.push(0,0,0,0,0,0,0,0,a)}function _n(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function au(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const _=f[1],b=_.type;if(d=2===b?_.declTNode:1===b?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function oo(o,a,l){!function(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(et)&&(d=l[et]),null==d&&(d=l[et]=Vo++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function Ui(o,a,l){if(l&dt.Optional)return o;Ne(a,"NodeInjector")}function ha(o,a,l,d){if(l&dt.Optional&&void 0===d&&(d=null),0==(l&(dt.Self|dt.Host))){const f=o[9],_=Or(void 0);try{return f?f.get(a,d,l&dt.Optional):Yr(a,d,l&dt.Optional)}finally{Or(_)}}return Ui(d,a,l)}function Uo(o,a,l,d=dt.Default,f){if(null!==o){const _=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(et)?o[et]:void 0;return"number"==typeof a?a>=0?255&a:wd:a}(l);if("function"==typeof _){if(!Xl(a,o,d))return d&dt.Host?Ui(f,l,d):ha(a,l,d,f);try{const b=_(d);if(null!=b||d&dt.Optional)return b;Ne(l)}finally{md()}}else if("number"==typeof _){let b=null,E=_n(o,a),I=-1,M=d&dt.Host?a[16][6]:null;for((-1===E||d&dt.SkipSelf)&&(I=-1===E?au(o,a):a[E+8],-1!==I&&jn(d,!1)?(b=a[1],E=da(I),a=fl(I,a)):E=-1);-1!==E;){const k=a[1];if(Dr(_,E,k.data)){const V=fa(E,a,l,b,d,M);if(V!==ao)return V}I=a[E+8],-1!==I&&jn(d,a[1].data[E+8]===M)&&Dr(_,E,a)?(b=k,E=da(I),a=fl(I,a)):E=-1}}}return ha(a,l,d,f)}const ao={};function wd(){return new jo(Nn(),Se())}function fa(o,a,l,d,f,_){const b=a[1],E=b.data[o+8],k=Lr(E,b,l,null==d?Qs(E)&&iu:d!=b&&0!=(3&E.type),f&dt.Host&&_===E);return null!==k?ii(a,b,k,E):ao}function Lr(o,a,l,d,f){const _=o.providerIndexes,b=a.data,E=1048575&_,I=o.directiveStart,k=_>>20,z=f?E+k:o.directiveEnd;for(let J=d?E:E+k;J<z;J++){const ve=b[J];if(J<I&&l===ve||J>=I&&ve.type===l)return J}if(f){const J=b[I];if(J&&ni(J)&&J.type===l)return I}return null}function ii(o,a,l,d){let f=o[l];const _=a.data;if(function(o){return o instanceof cl}(f)){const b=f;b.resolving&&function(o,a){throw new je("200",`Circular dependency in DI detected for ${o}`)}(Ce(_[l]));const E=su(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Or(b.injectImpl):null;Xl(o,d,dt.Default);try{f=o[l]=b.factory(void 0,_,o,d),a.firstCreatePass&&l>=d.directiveStart&&function(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(d){const b=cd(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,b)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,_))}(l,_[l],a)}finally{null!==I&&Or(I),su(E),b.resolving=!1,md()}}return f}function Dr(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function jn(o,a){return!(o&dt.Self||o&dt.Host&&a)}class jo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return Uo(this._tNode,this._lView,a,d,l)}}function As(o){return zn(()=>{const a=o.prototype.constructor,l=a[Ae]||Fn(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const _=f[Ae]||Fn(f);if(_&&_!==l)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function Fn(o){return $e(o)?()=>{const a=Fn(oe(o));return a&&a()}:es(o)}function Ft(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const _=l[f];if(so(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(_===a)return l[f+1];f+=2}}}return null}(Nn(),o)}const rs="__parameters__";function Cn(o,a,l){return zn(()=>{const d=function(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(..._){if(this instanceof f)return d.apply(this,_),this;const b=new f(..._);return E.annotation=b,E;function E(I,M,k){const V=I.hasOwnProperty(rs)?I[rs]:Object.defineProperty(I,rs,{value:[]})[rs];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(b),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class dn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=cn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gl=new dn("AnalyzeForEntryComponents");function Hi(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),Hi(d,a)):a!==o&&a.push(d)}return a}function is(o,a){o.forEach(l=>Array.isArray(l)?is(l,a):a(l))}function Ed(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Go(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ma(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}function Ar(o,a,l){let d=lo(o,a);return d>=0?o[1|d]=l:(d=~d,function(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function ss(o,a){const l=lo(o,a);if(l>=0)return o[1|l]}function lo(o,a){return function(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const _=d+(f-d>>1),b=o[_<<l];if(a===b)return _<<l;b>a?f=_:d=_+1}return~(f<<l)}(o,a,1)}const ya={},Td="__NG_DI_FLAG__",co="ngTempTokenPath",gc=/\n/gm,T="__source",A=ye({provide:String,useValue:ye});let N;function B(o){const a=N;return N=o,a}function Q(o,a=dt.Default){if(void 0===N)throw new Error("inject() must be called from an injection context");return null===N?Yr(o,void 0,a):N.get(o,a&dt.Optional?null:void 0,a)}function Y(o,a=dt.Default){return(Dn||Q)(oe(o),a)}const it=Y;function gt(o){const a=[];for(let l=0;l<o.length;l++){const d=oe(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,_=dt.Default;for(let b=0;b<d.length;b++){const E=d[b],I=zt(E);"number"==typeof I?-1===I?f=E.token:_|=I:f=E}a.push(Y(f,_))}else a.push(Y(d))}return a}function _t(o,a){return o[Td]=a,o.prototype[Td]=a,o}function zt(o){return o[Td]}const yn=_t(Cn("Inject",o=>({token:o})),-1),Br=_t(Cn("Optional"),8),oi=_t(Cn("SkipSelf"),4);let os;function _l(o){var a;return(null==(a=function(){if(void 0===os&&(os=null,It.trustedTypes))try{os=It.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return os}())?void 0:a.createHTML(o))||o}class ba{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ad extends ba{getTypeName(){return"HTML"}}class Md extends ba{getTypeName(){return"Style"}}class $g extends ba{getTypeName(){return"Script"}}class yc extends ba{getTypeName(){return"URL"}}class zg extends ba{getTypeName(){return"ResourceURL"}}function xs(o){return o instanceof ba?o.changingThisBreaksApplicationSecurity:o}function mu(o,a){const l=vc(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function vc(o){return o instanceof ba&&o.getTypeName()||null}function bc(o){return new Ad(o)}function wc(o){return new Md(o)}function qg(o){return new $g(o)}function Wg(o){return new yc(o)}function Kg(o){return new zg(o)}class kd{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(_l(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class xy{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=_l(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=_l(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const b=l.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Zg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ry=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bl(o){return(o=String(o)).match(Zg)||o.match(Ry)?o:"unsafe:"+o}function ks(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function wa(...o){const a={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const Qg=ks("area,br,col,hr,img,wbr"),Jg=ks("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xg=ks("rp,rt"),Wo=wa(Qg,wa(Jg,ks("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wa(Xg,ks("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wa(Xg,Jg)),mf=ks("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_f=ks("srcset"),_u=wa(mf,_f,ks("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ks("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),El=ks("script,style,template");class Oy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Wo.hasOwnProperty(l))return this.sanitizedSomething=!0,!El.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const _=d.item(f),b=_.name,E=b.toLowerCase();if(!_u.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=_.value;mf[E]&&(I=bl(I)),_f[E]&&(o=I,I=(o=String(o)).split(",").map(a=>bl(a.trim())).join(", ")),this.buf.push(" ",b,'="',Rd(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Wo.hasOwnProperty(l)&&!Qg.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Rd(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const yu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nm=/([^\#-~ |!])/g;function Rd(o){return o.replace(/&/g,"&amp;").replace(yu,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(nm,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ec;function Nd(o,a){let l=null;try{Ec=Ec||function(o){const a=new xy(o);return function(){try{return!!(new window.DOMParser).parseFromString(_l(""),"text/html")}catch(o){return!1}}()?new kd(a):a}(o);let d=a?String(a):"";l=Ec.getInertBodyElement(d);let f=5,_=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=_,_=l.innerHTML,l=Ec.getInertBodyElement(d)}while(d!==_);return _l((new Oy).sanitizeChildren(Od(l)||l))}finally{if(l){const d=Od(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Od(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Hn=(()=>((Hn=Hn||{})[Hn.NONE=0]="NONE",Hn[Hn.HTML=1]="HTML",Hn[Hn.STYLE=2]="STYLE",Hn[Hn.SCRIPT=3]="SCRIPT",Hn[Hn.URL=4]="URL",Hn[Hn.RESOURCE_URL=5]="RESOURCE_URL",Hn))();function po(o){const a=function(){const o=Se();return o&&o[12]}();return a?a.sanitize(Hn.URL,o)||"":mu(o,"URL")?xs(o):bl(ie(o))}const Ef="__ngContext__";function Ur(o,a){o[Ef]=a}function Cf(o){const a=function(o){return o[Ef]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Tf(o){return o.ngOriginalError}function $y(o,...a){o.error(...a)}class Ea{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=(o=a)&&o.ngErrorLogger||$y;var o;d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Tf(a);for(;l&&Tf(l);)l=Tf(l);return l||null}}const um=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function ls(o){return o instanceof Function?o():o}var Ns=(()=>((Ns=Ns||{})[Ns.Important=1]="Important",Ns[Ns.DashCase=2]="DashCase",Ns))();function us(o,a){return undefined(o,a)}function Sc(o){const a=o[3];return Pi(a)?a[3]:a}function jr(o){return Hd(o[13])}function Ac(o){return Hd(o[4])}function Hd(o){for(;null!==o&&!Pi(o);)o=o[4];return o}function ai(o,a,l,d,f){if(null!=d){let _,b=!1;Pi(d)?_=d:Oi(d)&&(b=!0,d=d[0]);const E=Un(d);0===o&&null!==l?null==f?st(a,l,E):Ie(a,l,E,f||null,!0):1===o&&null!==l?Ie(a,l,E,f||null,!0):2===o?function(o,a,l){const d=Xn(o,a);d&&function(o,a,l,d){nn(o)?o.removeChild(a,l,d):a.removeChild(l)}(o,d,a,l)}(a,E,b):3===o&&a.destroyNode(E),null!=_&&function(o,a,l,d,f){const _=l[7];_!==Un(l)&&ai(a,o,d,_,f);for(let E=10;E<l.length;E++){const I=l[E];Nc(I[1],I,o,a,d,_)}}(a,o,_,l,f)}}function kf(o,a,l){return nn(o)?o.createElement(a,l):null===l?o.createElement(a):o.createElementNS(l,a)}function p(o,a){const l=o[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,ko(f,-1)),l.splice(d,1)}function g(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const f=d[17];null!==f&&f!==o&&p(f,d),a>0&&(o[l-1][4]=d[4]);const _=Go(o,10+a);!function(o,a){Nc(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=_[19];null!==b&&b.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function w(o,a){if(!(256&a[2])){const l=a[11];nn(l)&&l.destroyNode&&Nc(o,a,l,3,null,null),function(o){let a=o[13];if(!a)return S(o[1],o);for(;a;){let l=null;if(Oi(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)Oi(a)&&S(a[1],a),a=a[3];null===a&&(a=o),Oi(a)&&S(a[1],a),l=a&&a[4]}a=l}}(a)}}function S(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof cl)){const _=l[d+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const E=f[_[b]],I=_[b+1];try{I.call(E)}finally{}}else try{_.call(f)}finally{}}}}(o,a),function(o,a){const l=o.cleanup,d=a[7];let f=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const b=l[_+1],E="function"==typeof b?b(a):Un(a[b]),I=d[f=l[_+2]],M=l[_+3];"boolean"==typeof M?E.removeEventListener(l[_],I,M):M>=0?d[f=M]():d[f=-M].unsubscribe(),_+=2}else{const b=d[f=l[_+1]];l[_].call(b)}if(null!==d){for(let _=f+1;_<d.length;_++)d[_]();a[7]=null}}(o,a),1===a[1].type&&nn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Pi(a[3])){l!==a[3]&&p(l,a);const d=a[19];null!==d&&d.detachView(o)}}}function ne(o,a,l){return function(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Xe.None||f===Xe.Emulated)return null}return Rn(d,l)}(o,a.parent,l)}function Ie(o,a,l,d,f){nn(o)?o.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function st(o,a,l){nn(o)?o.appendChild(a,l):a.appendChild(l)}function lt(o,a,l,d,f){null!==d?Ie(o,a,l,d,f):st(o,a,l)}function Xn(o,a){return nn(o)?o.parentNode(a):a.parentNode}function Iu(o,a,l){return Of(o,a,l)}let Of=function(o,a,l){return 40&o.type?Rn(o,l):null};function Mc(o,a,l,d){const f=ne(o,d,a),_=a[11],E=Iu(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)lt(_,f,l[I],E,!1);else lt(_,f,l,E,!1)}function xc(o,a){if(null!==a){const l=a.type;if(3&l)return Rn(a,o);if(4&l)return zd(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return xc(o,d);{const f=o[a.index];return Pi(f)?zd(-1,f):Un(f)}}if(32&l)return us(a,o)()||Un(o[a.index]);{const d=kc(o,a);return null!==d?Array.isArray(d)?d[0]:xc(Sc(o[16]),d):xc(o,a.next)}}return null}function kc(o,a){return null!==a?o[16][6].projection[a.projection]:null}function zd(o,a){const l=10+o+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return xc(d,f)}return a[7]}function Rc(o,a,l,d,f,_,b){for(;null!=l;){const E=d[l.index],I=l.type;if(b&&0===a&&(E&&Ur(Un(E),d),l.flags|=4),64!=(64&l.flags))if(8&I)Rc(o,a,l.child,d,f,_,!1),ai(a,o,f,E,_);else if(32&I){const M=us(l,d);let k;for(;k=M();)ai(a,o,f,k,_);ai(a,o,f,E,_)}else 16&I?S0(o,a,d,l,f,_):ai(a,o,f,E,_);l=b?l.projectionNext:l.next}}function Nc(o,a,l,d,f,_){Rc(l,d,o.firstChild,a,f,_,!1)}function S0(o,a,l,d,f,_){const b=l[16],I=b[6].projection[d.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)ai(a,o,f,I[M],_);else Rc(o,a,I,b[3],f,_,!0)}function rS(o,a,l){nn(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function fm(o,a,l){nn(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function iS(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===d||o.charCodeAt(f+_)<=32)return f}l=f+1}}const sS="ng-template";function A0(o,a,l){let d=0;for(;d<o.length;){let f=o[d++];if(l&&"class"===f){if(f=o[d],-1!==iS(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Pf(o){return 4===o.type&&o.value!==sS}function pr(o,a,l){return a===(4!==o.type||l?o.value:sS)}function Gn(o,a,l){let d=4;const f=o.attrs||[],_=function(o){for(let a=0;a<o.length;a++)if(so(o[a]))return a;return o.length}(f);let b=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!b)if(4&d){if(d=2|1&d,""!==I&&!pr(o,I,l)||""===I&&1===a.length){if(Hr(d))return!1;b=!0}}else{const M=8&d?I:a[++E];if(8&d&&null!==o.attrs){if(!A0(o.attrs,M,l)){if(Hr(d))return!1;b=!0}continue}const V=oS(8&d?"class":I,f,Pf(o),l);if(-1===V){if(Hr(d))return!1;b=!0;continue}if(""!==M){let z;z=V>_?"":f[V+1].toLowerCase();const J=8&d?z:null;if(J&&-1!==iS(J,M,0)||2&d&&M!==z){if(Hr(d))return!1;b=!0}}}}else{if(!b&&!Hr(d)&&!Hr(I))return!1;if(b&&Hr(I))continue;b=!1,d=I|1&d}}return Hr(d)||b}function Hr(o){return 0==(1&o)}function oS(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let _=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function aS(o,a,l=!1){for(let d=0;d<a.length;d++)if(Gn(o,a[d],l))return!0;return!1}function lS(o,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function M0(o,a){return o?":not("+a.trim()+")":a}function uS(o){let a=o[0],l=1,d=2,f="",_=!1;for(;l<o.length;){let b=o[l];if("string"==typeof b)if(2&d){const E=o[++l];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!Hr(b)&&(a+=M0(_,f),f=""),d=b,_=_||!Hr(d);l++}return""!==f&&(a+=M0(_,f)),a}const Lt={};function Jy(o){x0($t(),Se(),Sn()+o,No())}function x0(o,a,l,d){if(!d)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&nu(a,_,l)}else{const _=o.preOrderHooks;null!==_&&ul(a,_,0,l)}ro(l)}function Xy(o,a){return o<<17|a<<2}function cs(o){return o>>17&32767}function Wd(o){return 2|o}function Du(o){return(131068&o)>>2}function R0(o,a){return-131069&o|a<<2}function N0(o){return 1|o}function H0(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],_=l[d+1];if(-1!==_){const b=o.data[_];ua(f),b.contentQueries(2,a[_],_)}}}function Uf(o,a,l,d,f,_,b,E,I,M){const k=a.blueprint.slice();return k[0]=f,k[2]=140|d,xo(k),k[3]=k[15]=o,k[8]=l,k[10]=b||o&&o[10],k[11]=E||o&&o[11],k[12]=I||o&&o[12]||null,k[9]=M||o&&o[9]||null,k[6]=_,k[16]=2==a.type?o[16]:k,k}function Qd(o,a,l,d,f){let _=o.data[a];if(null===_)_=function(o,a,l,d,f){const _=nl(),b=Yl(),I=o.data[a]=function(o,a,l,d,f,_){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==_&&(b?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I)),I}(o,a,l,d,f),pt.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=l,_.value=d,_.attrs=f;const b=function(){const o=pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return wr(_,!0),_}function jf(o,a,l,d){if(0===l)return-1;const f=a.length;for(let _=0;_<l;_++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function bm(o,a,l){sc(a);try{const d=o.viewQuery;null!==d&&X0(1,d,l);const f=o.template;null!==f&&G0(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&H0(o,a),o.staticViewQueries&&X0(2,o.viewQuery,l);const _=o.components;null!==_&&function(o,a){for(let l=0;l<a.length;l++)HP(o,a[l])}(a,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,al()}}function Hf(o,a,l,d){const f=a[2];if(256==(256&f))return;sc(a);const _=No();try{xo(a),function(o){pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&G0(o,a,l,2,d);const b=3==(3&f);if(!_)if(b){const M=o.preOrderCheckHooks;null!==M&&nu(a,M,null)}else{const M=o.preOrderHooks;null!==M&&ul(a,M,0,null),yd(a,0)}if(function(o){for(let a=jr(o);null!==a;a=Ac(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],_=f[3];0==(1024&f[2])&&ko(_,1),f[2]|=1024}}}(a),function(o){for(let a=jr(o);null!==a;a=Ac(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];Ja(d)&&Hf(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&H0(o,a),!_)if(b){const M=o.contentCheckHooks;null!==M&&nu(a,M)}else{const M=o.contentHooks;null!==M&&ul(a,M,1),yd(a,1)}!function(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)ro(~f);else{const _=f,b=l[++d],E=l[++d];il(b,_),E(2,a[_])}}}finally{ro(-1)}}(o,a);const E=o.components;null!==E&&function(o,a){for(let l=0;l<a.length;l++)jP(o,a[l])}(a,E);const I=o.viewQuery;if(null!==I&&X0(2,I,d),!_)if(b){const M=o.viewCheckHooks;null!==M&&nu(a,M)}else{const M=o.viewHooks;null!==M&&ul(a,M,2),yd(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),_||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,ko(a[3],-1))}finally{al()}}function bS(o,a,l,d){const f=a[10],_=!No(),b=Qa(a);try{_&&!b&&f.begin&&f.begin(),b&&bm(o,a,d),Hf(o,a,l,d)}finally{_&&!b&&f.end&&f.end()}}function G0(o,a,l,d,f){const _=Sn(),b=2&d;try{ro(-1),b&&a.length>20&&x0(o,a,20,No()),l(d,f)}finally{ro(_)}}function wS(o,a,l){if(Wh(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,l[_],_)}}}function $0(o,a,l){!tl()||(function(o,a,l,d){const f=l.directiveStart,_=l.directiveEnd;o.firstCreatePass||Bo(l,a),Ur(d,a);const b=l.initialInputs;for(let E=f;E<_;E++){const I=o.data[E],M=ni(I);M&&FP(a,l,I);const k=ii(a,o,E,l);Ur(k,a),null!==b&&LP(0,E-f,k,I,0,b),M&&(rn(l.index,a)[8]=k)}}(o,a,l,Rn(l,a)),128==(128&l.flags)&&function(o,a,l){const d=l.directiveStart,f=l.directiveEnd,b=l.index,E=pt.lFrame.currentDirectiveIndex;try{ro(b);for(let I=d;I<f;I++){const M=o.data[I],k=a[I];Po(I),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&MS(M,k)}}finally{ro(-1),Po(E)}}(o,a,l))}function z0(o,a,l=Rn){const d=a.localNames;if(null!==d){let f=a.index+1;for(let _=0;_<d.length;_+=2){const b=d[_+1],E=-1===b?l(a,o):o[b];o[f++]=E}}}function ES(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=sv(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function sv(o,a,l,d,f,_,b,E,I,M){const k=20+d,V=k+f,z=function(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Lt);return l}(k,V),J="function"==typeof M?M():M;return z[1]={type:o,blueprint:z,template:l,queries:null,viewQuery:E,declTNode:a,data:z.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function IS(o,a,l,d){const f=FS(a);null===l?f.push(d):(f.push(l),o.firstCreatePass&&LS(o).push(d,f.length-1))}function TS(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function go(o,a,l,d,f,_,b,E){const I=Rn(a,l);let k,M=a.inputs;!E&&null!=M&&(k=M[d])?(US(o,l,k,d,f),Qs(a)&&function(o,a){const l=rn(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,nn(_)?_.setProperty(I,d,f):qe(d)||(I.setProperty?I.setProperty(d,f):I[d]=f))}function W0(o,a,l,d){let f=!1;if(tl()){const _=function(o,a,l){const d=o.directiveRegistry;let f=null;if(d)for(let _=0;_<d.length;_++){const b=d[_];aS(l,b.selectors,!1)&&(f||(f=[]),oo(Bo(l,a),o,b.type),ni(b)?(xS(o,l),f.unshift(b)):f.push(b))}return f}(o,a,l),b=null===d?null:{"":-1};if(null!==_){f=!0,kS(l,o.data.length,_.length);for(let k=0;k<_.length;k++){const V=_[k];V.providersResolver&&V.providersResolver(V)}let E=!1,I=!1,M=jf(o,a,_.length,null);for(let k=0;k<_.length;k++){const V=_[k];l.mergedAttrs=Rt(l.mergedAttrs,V.hostAttrs),RS(o,l,a,M,V),PP(M,V,b),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const z=V.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),E=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),M++}!function(o,a){const d=a.directiveEnd,f=o.data,_=a.attrs,b=[];let E=null,I=null;for(let M=a.directiveStart;M<d;M++){const k=f[M],V=k.inputs,z=null===_||Pf(a)?null:NS(V,_);b.push(z),E=TS(V,M,E),I=TS(k.outputs,M,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=I}(o,l)}b&&function(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=l[a[f+1]];if(null==_)throw new je("301",`Export of name '${a[f+1]}' not found!`);d.push(a[f],_)}}}(l,d,b)}return l.mergedAttrs=Rt(l.mergedAttrs,l.attrs),f}function AS(o,a,l,d,f,_){const b=_.hostBindings;if(b){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const I=~a.index;(function(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(d,f,b)}}function MS(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function xS(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function PP(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;ni(a)&&(l[""]=o)}}function kS(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function RS(o,a,l,d,f){o.data[d]=f;const _=f.factory||(f.factory=es(f.type)),b=new cl(_,ni(f),null);o.blueprint[d]=b,l[d]=b,AS(o,a,0,d,jf(o,l,f.hostVars,Lt),f)}function FP(o,a,l){const d=Rn(a,o),f=ES(l),_=o[10],b=ov(o,Uf(o,f,null,l.onPush?64:16,d,a,_,_.createRenderer(d,l),null,null));o[a.index]=b}function Al(o,a,l,d,f,_){const b=Rn(o,a);!function(o,a,l,d,f,_,b){if(null==_)nn(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const E=null==b?ie(_):b(_,d||"",f);nn(o)?o.setAttribute(a,f,E,l):l?a.setAttributeNS(l,f,E):a.setAttribute(f,E)}}(a[11],b,_,o.value,l,d,f)}function LP(o,a,l,d,f,_){const b=_[a];if(null!==b){const E=d.setInput;for(let I=0;I<b.length;){const M=b[I++],k=b[I++],V=b[I++];null!==E?d.setInput(l,V,M,k):l[k]=V}}}function NS(o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function OS(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function jP(o,a){const l=rn(a,o);if(Ja(l)){const d=l[1];80&l[2]?Hf(d,l,d.template,l[8]):l[5]>0&&Z0(l)}}function Z0(o){for(let d=jr(o);null!==d;d=Ac(d))for(let f=10;f<d.length;f++){const _=d[f];if(1024&_[2]){const b=_[1];Hf(b,_,b.template,_[8])}else _[5]>0&&Z0(_)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=rn(l[d],o);Ja(f)&&f[5]>0&&Z0(f)}}function HP(o,a){const l=rn(a,o),d=l[1];(function(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),bm(d,l,l[8])}function ov(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Y0(o){for(;o;){o[2]|=64;const a=Sc(o);if(Kh(o)&&!a)return o;o=a}return null}function J0(o,a,l){const d=a[10];d.begin&&d.begin();try{Hf(o,a,o.template,l)}catch(f){throw BS(a,f),f}finally{d.end&&d.end()}}function PS(o){!function(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],d=Cf(l),f=d[1];bS(f,d,f.template,l)}}(o[8])}function X0(o,a,l){ua(0),a(o,l)}const WP=(()=>Promise.resolve(null))();function FS(o){return o[7]||(o[7]=[])}function LS(o){return o.cleanup||(o.cleanup=[])}function VS(o,a,l){return(null===o||ni(o))&&(l=function(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}function BS(o,a){const l=o[9],d=l?l.get(Ea,null):null;d&&d.handleError(a)}function US(o,a,l,d,f){for(let _=0;_<l.length;){const b=l[_++],E=l[_++],I=a[b],M=o.data[b];null!==M.setInput?M.setInput(I,f,d,E):I[E]=f}}function Su(o,a,l){const d=eo(a,o);!function(o,a,l){nn(o)?o.setValue(a,l):a.textContent=l}(o[11],d,l)}function av(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?_=E:1==_?f=pe(f,E):2==_&&(d=pe(d,E+": "+a[++b]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}const eE=new dn("INJECTOR",-1);class jS{get(a,l=ya){if(l===ya){const d=new Error(`NullInjectorError: No provider for ${ue(a)}!`);throw d.name="NullInjectorError",d}return l}}const tE=new dn("Set Injector scope."),wm={},YP={};let nE;function HS(){return void 0===nE&&(nE=new jS),nE}function GS(o,a=null,l=null,d){const f=$S(o,a,l,d);return f._resolveInjectorDefTypes(),f}function $S(o,a=null,l=null,d){return new QP(o,l,a||HS(),d)}class QP{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];l&&is(l,E=>this.processProvider(E,a,l)),is([a],E=>this.processInjectorType(E,[],_)),this.records.set(eE,Gf(void 0,this));const b=this.records.get(tE);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:ue(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=ya,d=dt.Default){this.assertNotDestroyed();const f=B(this),_=Or(void 0);try{if(!(d&dt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=("function"==typeof(o=a)||"object"==typeof o&&o instanceof dn)&&Ji(a);E=I&&this.injectableDefInScope(I)?Gf(rE(a),wm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&dt.Self?HS():this.parent).get(a,l=d&dt.Optional&&l===ya?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[co]=b[co]||[]).unshift(ue(a)),f)throw b;return function(o,a,l,d){const f=o[co];throw a[T]&&f.unshift(a[T]),o.message=function(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ue(a);if(Array.isArray(a))f=a.map(ue).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];_.push(b+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}f=`{${_.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(gc,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[co]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Or(_),B(f)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(ue(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,l,d){if(!(a=oe(a)))return!1;let f=Io(a);const _=null==f&&a.ngModule||void 0,b=void 0===_?a:_,E=-1!==d.indexOf(b);if(void 0!==_&&(f=Io(_)),null==f)return!1;if(null!=f.imports&&!E){let k;d.push(b);try{is(f.imports,V=>{this.processInjectorType(V,l,d)&&(void 0===k&&(k=[]),k.push(V))})}finally{}if(void 0!==k)for(let V=0;V<k.length;V++){const{ngModule:z,providers:J}=k[V];is(J,ve=>this.processProvider(ve,z,J||j))}}this.injectorDefTypes.add(b);const I=es(b)||(()=>new b);this.records.set(b,Gf(I,wm));const M=f.providers;if(null!=M&&!E){const k=a;is(M,V=>this.processProvider(V,k,M))}return void 0!==_&&void 0!==a.providers}processProvider(a,l,d){let f=$f(a=oe(a))?a:oe(a&&a.provide);const _=(o=a,qS(o)?Gf(void 0,o.useValue):Gf(zS(o),wm));var o;if($f(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=Gf(void 0,wm,!0),b.factory=()=>gt(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,_)}hydrate(a,l){return l.value===wm&&(l.value=YP,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(o=l.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const l=oe(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function rE(o){const a=Ji(o),l=null!==a?a.factory:es(o);if(null!==l)return l;if(o instanceof dn)throw new Error(`Token ${ue(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const d=ma(a,"?");throw new Error(`Can't resolve all parameters for ${ue(o)}: (${d.join(", ")}).`)}const l=function(o){const a=o&&(o[Zr]||o[Re]);if(a){const l=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Error("unreachable")}function zS(o,a,l){let d;if($f(o)){const f=oe(o);return es(f)||rE(f)}if(qS(o))d=()=>oe(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...gt(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))d=()=>Y(oe(o.useExisting));else{const f=oe(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return es(f)||rE(f);d=()=>new f(...gt(o.deps))}return d}function Gf(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function qS(o){return null!==o&&"object"==typeof o&&A in o}function $f(o){return"function"==typeof o}let Ko=(()=>{class o{static create(l,d){var f;if(Array.isArray(l))return GS({name:""},d,l,"");{const _=null!=(f=l.name)?f:"";return GS({name:_},l.parent,l.providers,_)}}}return o.THROW_IF_NOT_FOUND=ya,o.NULL=new jS,o.\u0275prov=cn({token:o,providedIn:"any",factory:()=>Y(eE)}),o.__NG_ELEMENT_ID__=-1,o})();function XS(o,a){io(Cf(o)[1],Nn())}function uv(o){let a=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(ni(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");f=a.\u0275dir}if(f){if(l){d.push(f);const b=o;b.inputs=Im(o.inputs),b.declaredInputs=Im(o.declaredInputs),b.outputs=Im(o.outputs);const E=f.hostBindings;E&&nA(o,E);const I=f.viewQuery,M=f.contentQueries;if(I&&eA(o,I),M&&tA(o,M),se(o.inputs,f.inputs),se(o.declaredInputs,f.declaredInputs),se(o.outputs,f.outputs),ni(f)&&f.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const E=_[b];E&&E.ngInherit&&E(o),E===uv&&(l=!1)}}a=Object.getPrototypeOf(a)}!function(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Rt(f.hostAttrs,l=Rt(l,f.hostAttrs))}}(d)}function Im(o){return o===q?{}:o===j?[]:o}function eA(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function tA(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,_)=>{a(d,f,_),l(d,f,_)}:a}function nA(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let cv=null;function qf(){if(!cv){const o=It.Symbol;if(o&&o.iterator)cv=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(cv=d)}}}return cv}function Tm(o){return!!Dm(o)&&(Array.isArray(o)||!(o instanceof Map)&&qf()in o)}function Dm(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function li(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function dv(o,a,l,d){const f=Se();return li(f,no(),a)&&($t(),Al(gn(),f,o,a,l,d)),dv}function Yf(o,a,l,d,f,_){const E=function(o,a,l,d){const f=li(o,a,l);return li(o,a+1,d)||f}(o,pt.lFrame.bindingIndex,l,f);return ns(2),E?a+ie(l)+d+ie(f)+_:Lt}function gv(o,a,l,d,f,_,b,E){const I=Se(),M=$t(),k=o+20,V=M.firstCreatePass?function(o,a,l,d,f,_,b,E,I){const M=a.consts,k=Qd(a,o,4,b||null,ri(M,E));W0(a,l,k,ri(M,I)),io(a,k);const V=k.tViews=sv(2,k,d,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,k),V.queries=a.queries.embeddedTView(k)),k}(k,M,I,a,l,d,f,_,b):M.data[k];wr(V,!1);const z=I[11].createComment("");Mc(M,I,z,V),Ur(z,I),ov(I,I[k]=OS(z,I,z,V)),Wn(V)&&$0(M,I,V),null!=b&&z0(I,V,E)}function xm(o){return function(o,a){return o[a]}(pt.lFrame.contextLView,20+o)}function xu(o,a=dt.Default){const l=Se();return null===l?Y(o,a):Uo(Nn(),l,oe(o),a)}function ep(){throw new Error("invalid")}function Om(o,a,l){const d=Se();return li(d,no(),a)&&go($t(),gn(),d,o,a,d[11],l,!1),Om}function tp(o,a,l,d,f){const b=f?"class":"style";US(o,l,a.inputs[b],b,d)}function np(o,a,l,d){const f=Se(),_=$t(),b=20+o,E=f[11],I=f[b]=kf(E,a,pt.lFrame.currentNamespace),M=_.firstCreatePass?function(o,a,l,d,f,_,b){const E=a.consts,M=Qd(a,o,2,f,ri(E,_));return W0(a,l,M,ri(E,b)),null!==M.attrs&&av(M,M.attrs,!1),null!==M.mergedAttrs&&av(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,_,f,0,a,l,d):_.data[b];wr(M,!0);const k=M.mergedAttrs;null!==k&&mn(E,I,k);const V=M.classes;null!==V&&fm(E,I,V);const z=M.styles;null!==z&&rS(E,I,z),64!=(64&M.flags)&&Mc(_,f,I,M),0===pt.lFrame.elementDepthCount&&Ur(I,f),pt.lFrame.elementDepthCount++,Wn(M)&&($0(_,f,M),wS(_,M,f)),null!==d&&z0(f,M)}function th(){let o=Nn();Yl()?Ro():(o=o.parent,wr(o,!1));const a=o;pt.lFrame.elementDepthCount--;const l=$t();l.firstCreatePass&&(io(l,o),Wh(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&tp(l,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&tp(l,a,Se(),a.stylesWithoutHost,!1)}function SE(o,a,l,d){np(o,a,l,d),th()}function Ma(o,a,l){const d=Se(),f=$t(),_=o+20,b=f.firstCreatePass?function(o,a,l,d,f){const _=a.consts,b=ri(_,d),E=Qd(a,o,8,"ng-container",b);return null!==b&&av(E,b,!0),W0(a,l,E,ri(_,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(_,f,d,a,l):f.data[_];wr(b,!0);const E=d[_]=d[11].createComment("");Mc(f,d,E,b),Ur(E,d),Wn(b)&&($0(f,d,b),wS(f,b,d)),null!=l&&z0(d,b)}function Pm(){let o=Nn();const a=$t();Yl()?Ro():(o=o.parent,wr(o,!1)),a.firstCreatePass&&(io(a,o),Wh(o)&&a.queries.elementEnd(o))}function Av(o,a,l){Ma(o,a,l),Pm()}function Qo(){return Se()}function xl(o){return!!o&&"function"==typeof o.then}function nh(o){return!!o&&"function"==typeof o.subscribe}const ME=nh;function ip(o,a,l,d){const f=Se(),_=$t(),b=Nn();return sp(_,f,f[11],b,o,a,!!l,d),ip}function Fm(o,a){const l=Nn(),d=Se(),f=$t();return sp(f,d,VS(Fo(f.data),l,d),l,o,a,!1),Fm}function sp(o,a,l,d,f,_,b,E){const I=Wn(d),k=o.firstCreatePass&&LS(o),V=a[8],z=FS(a);let J=!0;if(3&d.type||E){const Ge=Rn(d,a),ot=E?E(Ge):Ge,Te=z.length,mt=E?Zt=>E(Un(Zt[d.index])):d.index;if(nn(l)){let Zt=null;if(!E&&I&&(Zt=function(o,a,l,d){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===l&&f[_+1]===d){const E=a[7],I=f[_+2];return E.length>I?E[I]:null}"string"==typeof b&&(_+=2)}return null}(o,a,f,d.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=_,Zt.__ngLastListenerFn__=_,J=!1;else{_=op(d,a,V,_,!1);const In=l.listen(ot,f,_);z.push(_,In),k&&k.push(f,mt,Te,Te+1)}}else _=op(d,a,V,_,!0),ot.addEventListener(f,_,b),z.push(_),k&&k.push(f,mt,Te,b)}else _=op(d,a,V,_,!1);const ve=d.outputs;let Le;if(J&&null!==ve&&(Le=ve[f])){const Ge=Le.length;if(Ge)for(let ot=0;ot<Ge;ot+=2){const ps=a[Le[ot]][Le[ot+1]].subscribe(_),Hc=z.length;z.push(_,ps),k&&k.push(f,d.index,Hc,-(Hc+1))}}}function xE(o,a,l,d){try{return!1!==l(d)}catch(f){return BS(o,f),!1}}function op(o,a,l,d,f){return function _(b){if(b===Function)return d;const E=2&o.flags?rn(o.index,a):a;0==(32&a[2])&&Y0(E);let I=xE(a,0,d,b),M=_.__ngNextListenerFn__;for(;M;)I=xE(a,0,M,b)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function kE(o=1){return function(o){return(pt.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,pt.lFrame.contextLView))[8]}(o)}function RE(o,a){let l=null;const d=function(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const _=a[f];if("*"!==_){if(null===d?aS(o,_,!0):lS(d,_))return f}else l=f}return l}function Mv(o){const a=Se()[16][6];if(!a.projection){const d=a.projection=ma(o?o.length:1,null),f=d.slice();let _=a.child;for(;null!==_;){const b=o?RE(_,o):0;null!==b&&(f[b]?f[b].projectionNext=_:d[b]=_,f[b]=_),_=_.next}}}function hs(o,a=0,l){const d=Se(),f=$t(),_=Qd(f,20+o,16,null,l||null);null===_.projection&&(_.projection=a),Ro(),64!=(64&_.flags)&&function(o,a,l){S0(a[11],0,a,l,ne(o,l,a),Iu(l.parent||a[6],l,a))}(f,d,_)}function BE(o,a,l,d,f){const _=o[l+1],b=null===a;let E=d?cs(_):Du(_),I=!1;for(;0!==E&&(!1===I||b);){const k=o[E+1];hA(o[E],a)&&(I=!0,o[E+1]=d?N0(k):Wd(k)),E=d?cs(k):Du(k)}I&&(o[l+1]=d?Wd(_):N0(_))}function hA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&lo(o,a)>=0}function sh(o,a,l){return ka(o,a,l,!1),sh}function cp(o,a){return ka(o,a,null,!0),cp}function ka(o,a,l,d){const f=Se(),_=$t(),b=ns(2);_.firstUpdatePass&&function(o,a,l,d){const f=o.data;if(null===f[l+1]){const _=f[Sn()],b=function(o,a){return a>=o.expandoStartIndex}(o,l);(function(o,a){return 0!=(o.flags&(a?16:32))})(_,d)&&null===a&&!b&&(a=!1),a=function(o,a,l,d){const f=Fo(o);let _=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=dp(l=Hm(null,o,a,l,d),a.attrs,d),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(l=Hm(f,o,a,l,d),null===_){let I=function(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==Du(d))return o[cs(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=Hm(null,o,a,I[1],d),I=dp(I,a.attrs,d),function(o,a,l,d){o[cs(l?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else _=function(o,a,l){let d;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)d=dp(d,o[_].hostAttrs,l);return dp(d,a.attrs,l)}(o,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),l}(f,_,a,d),function(o,a,l,d,f,_){let b=_?a.classBindings:a.styleBindings,E=cs(b),I=Du(b);o[d]=l;let k,M=!1;if(Array.isArray(l)){const V=l;k=V[1],(null===k||lo(V,k)>0)&&(M=!0)}else k=l;if(f)if(0!==I){const z=cs(o[E+1]);o[d+1]=Xy(z,E),0!==z&&(o[z+1]=R0(o[z+1],d)),o[E+1]=function(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=Xy(E,0),0!==E&&(o[E+1]=R0(o[E+1],d)),E=d;else o[d+1]=Xy(I,0),0===E?E=d:o[I+1]=R0(o[I+1],d),I=d;M&&(o[d+1]=Wd(o[d+1])),BE(o,k,d,!0),BE(o,k,d,!1),function(o,a,l,d,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&lo(_,a)>=0&&(l[d+1]=N0(l[d+1]))}(a,k,o,d,_),b=Xy(E,I),_?a.classBindings=b:a.styleBindings=b}(f,_,a,l,b,d)}}(_,o,b,d),a!==Lt&&li(f,b,a)&&function(o,a,l,d,f,_,b,E){if(!(3&a.type))return;const I=o.data,M=I[E+1];Gm(function(o){return 1==(1&o)}(M)?Ov(I,a,l,f,Du(M),b):void 0)||(Gm(_)||function(o){return 2==(2&o)}(M)&&(_=Ov(I,null,l,f,E,b)),function(o,a,l,d,f){const _=nn(o);if(a)f?_?o.addClass(l,d):l.classList.add(d):_?o.removeClass(l,d):l.classList.remove(d);else{let b=-1===d.indexOf("-")?void 0:Ns.DashCase;if(null==f)_?o.removeStyle(l,d,b):l.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),b|=Ns.Important),_?o.setStyle(l,d,f,b):l.style.setProperty(d,f,E?"important":"")}}}(d,b,eo(Sn(),l),f,_))}(_,_.data[Sn()],f,f[11],o,f[b+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ue(xs(o)))),o}(a,l),d,b)}function Hm(o,a,l,d,f){let _=null;const b=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<b&&(_=a[E],d=dp(d,_.hostAttrs,f),_!==o);)E++;return null!==o&&(l.directiveStylingLast=E),d}function dp(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ar(o,b,!!l||a[++_]))}return void 0===o?null:o}function Ov(o,a,l,d,f,_){const b=null===a;let E;for(;f>0;){const I=o[f],M=Array.isArray(I),k=M?I[1]:I,V=null===k;let z=l[f+1];z===Lt&&(z=V?j:void 0);let J=V?ss(z,d):k===d?z:void 0;if(M&&!Gm(J)&&(J=ss(I,d)),Gm(J)&&(E=J,b))return E;const ve=o[f+1];f=b?cs(ve):Du(ve)}if(null!==a){let I=_?a.residualClasses:a.residualStyles;null!=I&&(E=ss(I,d))}return E}function Gm(o){return void 0!==o}function WE(o,a=""){const l=Se(),d=$t(),f=o+20,_=d.firstCreatePass?Qd(d,f,1,a,null):d.data[f],b=l[f]=function(o,a){return nn(o)?o.createText(a):o.createTextNode(a)}(l[11],a);Mc(d,l,b,_),wr(_,!1)}function $m(o){return hp("",o,""),$m}function hp(o,a,l){const d=Se(),f=function(o,a,l,d){return li(o,no(),l)?a+ie(l)+d:Lt}(d,o,a,l);return f!==Lt&&Su(d,Sn(),f),hp}function Fv(o,a,l,d,f){const _=Se(),b=Yf(_,o,a,l,d,f);return b!==Lt&&Su(_,Sn(),b),Fv}function Zm(o,a,l){const d=Se();return li(d,no(),a)&&go($t(),gn(),d,o,a,d[11],l,!0),Zm}function Gv(o,a,l){const d=Se();if(li(d,no(),a)){const _=$t(),b=gn();go(_,b,d,o,a,VS(Fo(_.data),b,d),l,!0)}return Gv}const Uc=void 0;var kA=["en",[["a","p"],["AM","PM"],Uc],[["AM","PM"],Uc,Uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uc,"{1} 'at' {0}",Uc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let lh={};function pp(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=Ym(a);if(l)return l;const d=a.split("-")[0];if(l=Ym(d),l)return l;if("en"===d)return kA;throw new Error(`Missing locale data for the locale "${o}".`)}function gp(o){return pp(o)[Et.PluralCase]}function Ym(o){return o in lh||(lh[o]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[o]),lh[o]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Qm="en-US";let $v=Qm;function NC(o,a,l,d,f){if(o=oe(o),Array.isArray(o))for(let _=0;_<o.length;_++)NC(o[_],a,l,d,f);else{const _=$t(),b=Se();let E=$f(o)?o:oe(o.provide),I=zS(o);const M=Nn(),k=1048575&M.providerIndexes,V=M.directiveStart,z=M.providerIndexes>>20;if($f(o)||!o.multi){const J=new cl(I,f,xu),ve=PC(E,a,f?k:k+z,V);-1===ve?(oo(Bo(M,b),_,E),OC(_,o,a.length),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(J),b.push(J)):(l[ve]=J,b[ve]=J)}else{const J=PC(E,a,k+z,V),ve=PC(E,a,k,k+z),Le=J>=0&&l[J],Ge=ve>=0&&l[ve];if(f&&!Ge||!f&&!Le){oo(Bo(M,b),_,E);const ot=function(o,a,l,d,f){const _=new cl(o,l,xu);return _.multi=[],_.index=a,_.componentProviders=0,sM(_,f,d&&!l),_}(f?U1:B1,l.length,f,d,I);!f&&Ge&&(l[ve].providerFactory=ot),OC(_,o,a.length,0),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ot),b.push(ot)}else OC(_,o,J>-1?J:ve,sM(l[f?ve:J],I,!f&&d));!f&&d&&Ge&&l[ve].componentProviders++}}}function OC(o,a,l,d){const f=$f(a),_=function(o){return!!o.useClass}(a);if(f||_){const I=(_?oe(a.useClass):a).prototype.ngOnDestroy;if(I){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const k=M.indexOf(l);-1===k?M.push(l,[d,I]):M[k+1].push(d,I)}else M.push(l,I)}}}function sM(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function PC(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function B1(o,a,l,d){return FC(this.multi,[])}function U1(o,a,l,d){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=ii(l,l[1],this.providerFactory.index,d);_=E.slice(0,b),FC(f,_);for(let I=b;I<E.length;I++)_.push(E[I])}else _=[],FC(f,_);return _}function FC(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function LC(o,a=[]){return l=>{l.providersResolver=(d,f)=>function(o,a,l){const d=$t();if(d.firstCreatePass){const f=ni(o);NC(l,d.data,d.blueprint,f,!0),NC(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class qv{}class UC{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${ue(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let ch=(()=>{class o{}return o.NULL=new UC,o})();function j1(){return dh(Nn(),Se())}function dh(o,a){return new wp(Rn(o,a))}let wp=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=j1,o})();function aM(o){return o instanceof wp?o.nativeElement:o}class Kv{}let lM=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function(){const o=Se(),l=rn(Nn().index,o);return function(o){return o[11]}(Oi(l)?l:o)}(),o})(),dM=(()=>{class o{}return o.\u0275prov=cn({token:o,providedIn:"root",factory:()=>null}),o})();class kl{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Zv=new kl("13.0.3"),Yv={};function s_(o,a,l,d,f=!1){for(;null!==l;){const _=a[l.index];if(null!==_&&d.push(Un(_)),Pi(_))for(let E=10;E<_.length;E++){const I=_[E],M=I[1].firstChild;null!==M&&s_(I[1],I,M,d)}const b=l.type;if(8&b)s_(o,a,l.child,d);else if(32&b){const E=us(l,a);let I;for(;I=E();)d.push(I)}else if(16&b){const E=kc(a,l);if(Array.isArray(E))d.push(...E);else{const I=Sc(a[16]);s_(I[1],I,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class Ep{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return s_(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Pi(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(g(a,d),Go(l,d))}this._attachedToViewContainer=!1}w(this._lView[1],this._lView)}onDestroy(a){IS(this._lView[1],this._lView,null,a)}markForCheck(){Y0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){J0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,l){Oo(!0);try{J0(o,a,l)}finally{Oo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,Nc(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class Ou extends Ep{constructor(a){super(a),this._view=a}detectChanges(){PS(this._view)}checkNoChanges(){!function(o){Oo(!0);try{PS(o)}finally{Oo(!1)}}(this._view)}get context(){return null}}class hM extends ch{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=nr(a);return new Qv(l,this.ngModule)}}function jC(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const HC=new dn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>um});class Qv extends qv{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=a.selectors.map(uS).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return jC(this.componentDef.inputs)}get outputs(){return jC(this.componentDef.outputs)}create(a,l,d,f){const _=(f=f||this.ngModule)?function(o,a){return{get:(l,d,f)=>{const _=o.get(l,Yv,f);return _!==Yv||d===Yv?_:a.get(l,d,f)}}}(a,f.injector):a,b=_.get(Kv,Is),E=_.get(dM,null),I=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=d?function(o,a,l){if(nn(o))return o.selectRootElement(a,l===Xe.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(I,d,this.componentDef.encapsulation):kf(b.createRenderer(null,this.componentDef),M,function(o){const a=o.toLowerCase();return"svg"===a?hd:"math"===a?"http://www.w3.org/1998/MathML/":null}(M)),V=this.componentDef.onPush?576:528,z=function(o,a){return{components:[],scheduler:o||um,clean:WP,playerHandler:a||null,flags:0}}(),J=sv(0,null,null,1,0,null,null,null,null,null),ve=Uf(null,J,z,V,null,null,b,I,E,_);let Le,Ge;sc(ve);try{const ot=function(o,a,l,d,f,_){const b=l[1];l[20]=o;const I=Qd(b,20,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(av(I,M,!0),null!==o&&(mn(f,o,M),null!==I.classes&&fm(f,o,I.classes),null!==I.styles&&rS(f,o,I.styles)));const k=d.createRenderer(o,a),V=Uf(l,ES(a),null,a.onPush?64:16,l[20],I,d,k,_||null,null);return b.firstCreatePass&&(oo(Bo(I,l),b,a.type),xS(b,I),kS(I,l.length,1)),ov(l,V),l[20]=V}(k,this.componentDef,ve,b,I);if(k)if(d)mn(I,k,["ng-version",Zv.full]);else{const{attrs:Te,classes:mt}=function(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++d]):8===f&&l.push(_);else{if(!Hr(f))break;f=_}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Te&&mn(I,k,Te),mt&&mt.length>0&&fm(I,k,mt.join(" "))}if(Ge=Li(J,20),void 0!==l){const Te=Ge.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Zt=l[mt];Te.push(null!=Zt?Array.from(Zt):null)}}Le=function(o,a,l,d,f){const _=l[1],b=function(o,a,l){const d=Nn();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),RS(o,d,a,jf(o,a,1,null),l));const f=ii(a,o,d.directiveStart,d);Ur(f,a);const _=Rn(d,a);return _&&Ur(_,a),f}(_,l,a);if(d.components.push(b),o[8]=b,f&&f.forEach(I=>I(b,a)),a.contentQueries){const I=Nn();a.contentQueries(1,b,I.directiveStart)}const E=Nn();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ro(E.index),AS(l[1],E,0,E.directiveStart,E.directiveEnd,a),MS(a,b)),b}(ot,this.componentDef,ve,z,[XS]),bm(J,ve,null)}finally{al()}return new $C(this.componentType,Le,dh(Ge,ve),ve,Ge)}}class $C extends class{}{constructor(a,l,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new Ou(f),this.componentType=a}get injector(){return new jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class hh{}class o_{}const fh=new Map;class Xv extends hh{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hM(this);const d=yr(a);this._bootstrapComponents=ls(d.bootstrap),this._r3Injector=$S(a,l,[{provide:hh,useValue:this},{provide:ch,useValue:this.componentFactoryResolver}],ue(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=Ko.THROW_IF_NOT_FOUND,d=dt.Default){return a===Ko||a===hh||a===eE?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class eb extends o_{constructor(a){super(),this.moduleType=a,null!==yr(a)&&function(o){const a=new Set;!function l(d){const f=yr(d,!0),_=f.id;null!==_&&(function(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${ue(a)} vs ${ue(a.name)}`)}(_,fh.get(_),d),fh.set(_,d));const b=ls(f.imports);for(const E of b)a.has(E)||(a.add(E),l(E))}(o)}(a)}create(a){return new Xv(this.moduleType,a)}}function f_(o){return a=>{setTimeout(o,void 0,a)}}const Rl=class extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var I,M,k;let f=a,_=l||(()=>null),b=d;if(a&&"object"==typeof a){const V=a;f=null==(I=V.next)?void 0:I.bind(V),_=null==(M=V.error)?void 0:M.bind(V),b=null==(k=V.complete)?void 0:k.bind(V)}this.__isAsync&&(_=f_(_),f&&(f=f_(f)),b&&(b=f_(b)));const E=super.subscribe({next:f,error:_,complete:b});return a instanceof te.w0&&a.add(E),E}};function $1(){return this._results[qf()]()}class nb{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=qf(),d=nb.prototype;d[l]||(d[l]=$1)}get changes(){return this._changes||(this._changes=new Rl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=Hi(a);(this._changesDetected=!function(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],_=a[d];if(l&&(f=l(f),_=l(_)),_!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let p_=(()=>{class o{}return o.__NG_ELEMENT_ID__=AM,o})();const z1=p_,q1=class extends z1{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=Uf(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),bm(l,d,a),new Ep(d)}};function AM(){return Tp(Nn(),Se())}function Tp(o,a){return 4&o.type?new q1(a,o,dh(o,a)):null}let ph=(()=>{class o{}return o.__NG_ELEMENT_ID__=MM,o})();function MM(){return RM(Nn(),Se())}const XC=ph,xM=class extends XC{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return dh(this._hostTNode,this._hostLView)}get injector(){return new jo(this._hostTNode,this._hostLView)}get parentInjector(){const a=au(this._hostTNode,this._hostLView);if(Pn(a)){const l=fl(a,this._hostLView),d=da(a);return new jo(l[1].data[d+8],l)}return new jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=kM(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,_){const b=a&&!("function"==typeof a);let E;if(b)E=l;else{const V=l||{};E=V.index,d=V.injector,f=V.projectableNodes,_=V.ngModuleRef}const I=b?a:new Qv(nr(a)),M=d||this.parentInjector;if(!_&&null==I.ngModule&&M){const V=M.get(hh,null);V&&(_=V)}const k=I.create(M,f,void 0,_);return this.insert(k.hostView,E),k}insert(a,l){const d=a._lView,f=d[1];if(Pi(d[3])){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const V=d[3],z=new xM(V,V[6],V[3]);z.detach(z.indexOf(a))}}const _=this._adjustIndex(l),b=this._lContainer;!function(o,a,l,d){const f=10+d,_=l.length;d>0&&(l[f-1][4]=a),d<_-10?(a[4]=l[f],Ed(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const b=a[17];null!==b&&l!==b&&function(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,d,b,_);const E=zd(_,b),I=d[11],M=Xn(I,b[7]);return null!==M&&function(o,a,l,d,f,_){d[0]=f,d[6]=a,Nc(o,d,l,1,f,_)}(f,b[6],I,d,M,E),a.attachToViewContainerRef(),Ed(eI(b),_,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=kM(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=g(this._lContainer,l);d&&(Go(eI(this._lContainer),l),w(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=g(this._lContainer,l);return d&&null!=Go(eI(this._lContainer),l)?new Ep(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function kM(o){return o[8]}function eI(o){return o[8]||(o[8]=[])}function RM(o,a){let l;const d=a[o.index];if(Pi(d))l=d;else{let f;if(8&o.type)f=Un(d);else{const _=a[11];f=_.createComment("");const b=Rn(o,a);Ie(_,Xn(_,b),f,function(o,a){return nn(o)?o.nextSibling(a):a.nextSibling}(_,b),!1)}a[o.index]=l=OS(d,a,f,o),ov(a,l)}return new xM(l,o,a)}class g_{constructor(a){this.queryList=a,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class rb{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let _=0;_<d;_++){const b=l.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new rb(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==LM(a,l).matches&&this.queries[l].setDirty()}}class nI{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class ib{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,_=this.getByIndex(d).embeddedTView(a,f);_&&(_.indexInDeclarationView=d,null!==l?l.push(_):l=[_])}return null!==l?new ib(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class sb{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new sb(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(a,l,NM(l,_)),this.matchTNodeWithReadOption(a,l,Lr(l,a,_,!1,!1))}else d===p_?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Lr(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===wp||f===ph||f===p_&&4&l.type)this.addMatch(l.index,-2);else{const _=Lr(l,a,f,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function NM(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function Z1(o,a,l,d){return-1===l?function(o,a){return 11&o.type?dh(o,a):4&o.type?Tp(o,a):null}(a,o):-2===l?function(o,a,l){return l===wp?dh(a,o):l===p_?Tp(a,o):l===ph?RM(a,o):void 0}(o,a,d):ii(o,o[1],l,a)}function OM(o,a,l,d){const f=a[19].queries[d];if(null===f.matches){const _=o.data,b=l.matches,E=[];for(let I=0;I<b.length;I+=2){const M=b[I];E.push(M<0?null:Z1(a,_[M],b[I+1],l.metadata.read))}f.matches=E}return f.matches}function rI(o,a,l,d){const f=o.queries.getByIndex(l),_=f.matches;if(null!==_){const b=OM(o,a,f,l);for(let E=0;E<_.length;E+=2){const I=_[E];if(I>0)d.push(b[E/2]);else{const M=_[E+1],k=a[-I];for(let V=10;V<k.length;V++){const z=k[V];z[17]===z[3]&&rI(z[1],z,M,d)}if(null!==k[9]){const V=k[9];for(let z=0;z<V.length;z++){const J=V[z];rI(J[1],J,M,d)}}}}}return d}function iI(o){const a=Se(),l=$t(),d=Jl();ua(d+1);const f=LM(l,d);if(o.dirty&&Qa(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?rI(l,a,d,[]):OM(l,a,f,d);o.reset(_,aM),o.notifyOnChanges()}return!0}return!1}function PM(o,a,l){const d=$t();d.firstCreatePass&&(ab(d,new nI(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),m_(d,Se(),a)}function sI(o,a,l,d){const f=$t();if(f.firstCreatePass){const _=Nn();ab(f,new nI(a,l,d),_.index),function(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}m_(f,Se(),l)}function ob(){return o=Se(),a=Jl(),o[19].queries[a].queryList;var o,a}function m_(o,a,l){const d=new nb(4==(4&l));IS(o,a,d,d.destroy),null===a[19]&&(a[19]=new rb),a[19].queries.push(new g_(d))}function ab(o,a,l){null===o.queries&&(o.queries=new ib),o.queries.track(new sb(a,l))}function LM(o,a){return o.queries.getByIndex(a)}function _b(...o){}const mI=new dn("Application Initializer");let Mp=(()=>{class o{constructor(l){this.appInits=l,this.resolve=_b,this.reject=_b,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(xl(_))l.push(_);else if(ME(_)){const b=new Promise((E,I)=>{_.subscribe({complete:E,error:I})});l.push(b)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Y(mI,8))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();const ZM=new dn("AppId"),sF={provide:ZM,useFactory:function(){return`${_I()}${_I()}${_I()}`},deps:[]};function _I(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const YM=new dn("Platform Initializer"),yI=new dn("Platform ID"),xp=new dn("appBootstrapListener");let _h=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();const kp=new dn("LocaleId"),vI=new dn("DefaultCurrencyCode");class y_{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let yb=(()=>{class o{compileModuleSync(l){return new eb(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),_=ls(yr(l).declarations).reduce((b,E)=>{const I=nr(E);return I&&b.push(new Qv(I)),b},[]);return new y_(d,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();const bI=(()=>Promise.resolve(0))();function bb(o){"undefined"==typeof Zone?bI.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ls{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rl(!1),this.onMicrotaskEmpty=new Rl(!1),this.onStable=new Rl(!1),this.onError=new Rl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let o=It.requestAnimationFrame,a=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(It,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,vh(o),o.isCheckStableRunning=!0,v_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),vh(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,_,b,E)=>{try{return wI(o),l.invokeTask(f,_,b,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),EI(o)}},onInvoke:(l,d,f,_,b,E,I)=>{try{return wI(o),l.invoke(f,_,b,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),EI(o)}},onHasTask:(l,d,f,_)=>{l.hasTask(f,_),d===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,vh(o),v_(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,d,f,_)=>(l.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ls.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ls.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,a,ex,_b,_b);try{return _.runTask(b,l,d)}finally{_.cancelTask(b)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const ex={};function v_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function vh(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function wI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function EI(o){o._nesting--,v_(o)}class rx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rl,this.onMicrotaskEmpty=new Rl,this.onStable=new Rl,this.onError=new Rl}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let CI=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ls.assertNotInAngularZone(),bb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bb(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(Y(Ls))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})(),II=(()=>{class o{constructor(){this._applications=new Map,wb.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return wb.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();class ix{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function lF(o){wb=o}let Xo,wb=new ix;const DI=new dn("AllowMultipleToken");class SI{constructor(a,l){this.name=a,this.token=l}}function AI(o,a,l=[]){const d=`Platform: ${a}`,f=new dn(d);return(_=[])=>{let b=Ol();if(!b||b.injector.get(DI,!1))if(o)o(l.concat(_).concat({provide:f,useValue:!0}));else{const E=l.concat(_).concat({provide:f,useValue:!0},{provide:tE,useValue:"platform"});!function(o){if(Xo&&!Xo.destroyed&&!Xo.injector.get(DI,!1))throw new je("400","");Xo=o.get(Cb);const a=o.get(YM,null);a&&a.forEach(l=>l())}(Ko.create({providers:E,name:d}))}return function(o){const a=Ol();if(!a)throw new je("401","");return a}()}}function Ol(){return Xo&&!Xo.destroyed?Xo:null}let Cb=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function(o,a){let l;return l="noop"===o?new rx:("zone.js"===o?void 0:o)||new Ls({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:Ls,useValue:E}];return E.run(()=>{const M=Ko.create({providers:I,parent:this.injector,name:l.moduleType.name}),k=l.create(M),V=k.injector.get(Ea,null);if(!V)throw new je("402","");return E.runOutsideAngular(()=>{const z=E.onError.subscribe({next:J=>{V.handleError(J)}});k.onDestroy(()=>{b_(this._modules,k),z.unsubscribe()})}),function(o,a,l){try{const d=l();return xl(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(V,E,()=>{const z=k.injector.get(Mp);return z.runInitializers(),z.donePromise.then(()=>(function(o){Wt(o,"Expected localeId to be defined"),"string"==typeof o&&($v=o.toLowerCase().replace(/_/g,"-"))}(k.injector.get(kp,Qm)||Qm),this._moduleDoBootstrap(k),k))})})}bootstrapModule(l,d=[]){const f=MI({},d);return function(o,a,l){const d=new eb(l);return Promise.resolve(d)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(l){const d=l.injector.get(Fu);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new je("403","");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Y(Ko))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();function MI(o,a){return Array.isArray(a)?a.reduce(MI,o):tt(tt({},o),a)}let Fu=(()=>{class o{constructor(l,d,f,_,b){this._zone=l,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new F.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),I=new F.y(M=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{Ls.assertNotInAngularZone(),bb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{k.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ce.T)(E,I.pipe((0,le.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new je("405","");let f;f=l instanceof qv?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const _=function(o){return o.isBoundToModule}(f)?void 0:this._injector.get(hh),E=f.create(Ko.NULL,[],d||f.selector,_),I=E.location.nativeElement,M=E.injector.get(CI,null),k=M&&E.injector.get(II);return M&&k&&k.registerApplication(I,M),E.onDestroy(()=>{this.detachView(E.hostView),b_(this.components,E),k&&k.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new je("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;b_(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(xp,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(Y(Ls),Y(Ko),Y(Ea),Y(ch),Y(Mp))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();function b_(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Tb=!0,Db=!1;function kI(){return Db=!0,Tb}function RI(){if(Db)throw new Error("Cannot enable prod mode after platform setup.");Tb=!1}let NI=(()=>{class o{}return o.__NG_ELEMENT_ID__=OI,o})();function OI(o){return function(o,a,l){if(Qs(o)&&!l){const d=rn(o.index,a);return new Ep(d,d)}return 47&o.type?new Ep(a[16],a):null}(Nn(),Se(),16==(16&o))}class gx{constructor(){}supports(a){return Tm(a)}create(a){return new fF(a)}}const hF=(o,a)=>a;class fF{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||hF}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,_=null;for(;l||d;){const b=!d||l&&l.currentIndex<jI(d,f,_)?l:d,E=jI(b,f,_),I=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(l=l._next,null==b.previousIndex)f++;else{_||(_=[]);const M=E-f,k=I-f;if(M!=k){for(let z=0;z<M;z++){const J=z<_.length?_[z]:_[z]=0,ve=J+z;k<=ve&&ve<M&&(_[z]=J+1)}_[b.previousIndex]=k-M}}E!==I&&a(b,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Tm(a))throw new Error(`Error trying to diff '${ue(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,b,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)_=a[E],b=this._trackByFn(E,_),null!==l&&Object.is(l.trackById,b)?(d&&(l=this._verifyReinsertion(l,_,b,E)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,b,E),d=!0),l=l._next}else f=0,function(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[qf()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{b=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,b)?(d&&(l=this._verifyReinsertion(l,E,b,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,b,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,_,f)):a=this._addAfter(new pF(l,d),_,f),a}_verifyReinsertion(a,l,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new mx),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mx),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class pF{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gF{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class mx{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new gF,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jI(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class Np{constructor(){}supports(a){return a instanceof Map||Dm(a)}create(){return new Op}}class Op{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Dm(a)))throw new Error(`Error trying to diff '${ue(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const d=new D_(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class D_{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pp(){return new S_([new gx])}let S_=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Pp()),deps:[[o,new oi,new Br]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(o){return o.name||typeof o}(l)}'`)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:Pp}),o})();function Fp(){return new A_([new Np])}let A_=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Fp()),deps:[[o,new oi,new Br]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:Fp}),o})();const _x=[new Np],yx=new S_([new gx]),GI=new A_(_x),_F=AI(null,"core",[{provide:yI,useValue:"unknown"},{provide:Cb,deps:[Ko]},{provide:II,deps:[]},{provide:_h,deps:[]}]),Nb=[{provide:Fu,useClass:Fu,deps:[Ls,Ko,Ea,ch,Mp]},{provide:HC,deps:[Ls],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:Mp,useClass:Mp,deps:[[new Br,mI]]},{provide:yb,useClass:yb,deps:[]},sF,{provide:S_,useFactory:function(){return yx},deps:[]},{provide:A_,useFactory:function(){return GI},deps:[]},{provide:kp,useFactory:function(o){return o||"undefined"!=typeof $localize&&$localize.locale||Qm},deps:[[new yn(kp),new Br,new oi]]},{provide:vI,useValue:"USD"}];let yF=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Y(Fu))},o.\u0275mod=$l({type:o}),o.\u0275inj=Qn({providers:Nb}),o})()},6293:(Qe,_e,O)=>{O.d(_e,{Z:()=>je});var c=O(4213),te=O(1177),F=O(1572),ce=O(3855);class le{constructor(Fe,ie){this._delegate=Fe,this.firebase=ie,(0,F._addComponent)(Fe,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Fe,ie=F._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(Fe);return!Be.isInitialized()&&"EXPLICIT"===(null===(Ce=Be.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:ie})}_removeServiceInstance(Fe,ie=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(ie)}_addComponent(Fe){(0,F._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,F._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function pe(){const Ue=function(Ue){const Fe={},ie={__esModule:!0,initializeApp:function(Ke,be={}){const Z=F.initializeApp(Ke,be);if((0,c.r3)(Fe,Z.name))return Fe[Z.name];const ee=new Ue(Z,ie);return Fe[Z.name]=ee,ee},app:Be,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(Ke){const be=Ke.name,Z=be.replace("-compat","");if(F._registerComponent(Ke)&&"PUBLIC"===Ke.type){const ee=(de=Be())=>{if("function"!=typeof de[Z])throw se.create("invalid-app-argument",{appName:be});return de[Z]()};void 0!==Ke.serviceProps&&(0,c.ZB)(ee,Ke.serviceProps),ie[Z]=ee,Ue.prototype[Z]=function(...de){return this._getService.bind(this,be).apply(this,Ke.multipleInstances?de:[])}}return"PUBLIC"===Ke.type?ie[Z]:null},removeApp:function(Ke){delete Fe[Ke]},useAsService:function(Ke,be){return"serverAuth"===be?null:be},modularAPIs:F}};function Be(Ke){if(!(0,c.r3)(Fe,Ke=Ke||F._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Ke});return Fe[Ke]}return ie.default=ie,Object.defineProperty(ie,"apps",{get:function(){return Object.keys(Fe).map(Ke=>Fe[Ke])}}),Be.App=Ue,ie}(le);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function(ie){(0,c.ZB)(Ue,ie)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ue}(),W=new ce.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=G;(0,F.registerVersion)("@firebase/app-compat","0.1.25",undefined)},1572:(Qe,_e,O)=>{O.r(_e),O.d(_e,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Io,_DEFAULT_ENTRY_NAME:()=>wt,_addComponent:()=>ur,_addOrOverwriteComponent:()=>fi,_apps:()=>Ct,_clearComponents:()=>Ji,_components:()=>on,_getProvider:()=>vs,_registerComponent:()=>cn,_removeServiceInstance:()=>Qn,deleteApp:()=>_r,getApp:()=>mr,getApps:()=>Re,initializeApp:()=>Zr,onLog:()=>kn,registerVersion:()=>Dn,setLogLevel:()=>Or});var c=O(8239),te=O(1177),F=O(3855),ce=O(4213),le=O(5600);class ye{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function($){const re=$.getComponent();return"VERSION"===(null==re?void 0:re.type)}(Ae)){const et=Ae.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ae=>Ae).join(" ")}}const ue="@firebase/app",G=new F.Yd("@firebase/app"),wt="[DEFAULT]",Wt={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ct=new Map,on=new Map;function ur($,re){try{$.container.addComponent(re)}catch(Ae){G.debug(`Component ${re.name} failed to register with FirebaseApp ${$.name}`,Ae)}}function fi($,re){$.container.addOrOverwriteComponent(re)}function cn($){const re=$.name;if(on.has(re))return G.debug(`There were multiple attempts to register component ${re}.`),!1;on.set(re,$);for(const Ae of Ct.values())ur(Ae,$);return!0}function vs($,re){const Ae=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),$.container.getProvider(re)}function Qn($,re,Ae=wt){vs($,re).clearInstance(Ae)}function Ji(){on.clear()}const tn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Vn{constructor(re,Ae,et){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}const Io="9.8.1";function Zr($,re={}){"object"!=typeof re&&(re={name:re});const Ae=Object.assign({name:wt,automaticDataCollectionEnabled:!1},re),et=Ae.name;if("string"!=typeof et||!et)throw tn.create("bad-app-name",{appName:String(et)});const Dt=Ct.get(et);if(Dt){if((0,ce.vZ)($,Dt.options)&&(0,ce.vZ)(Ae,Dt.config))return Dt;throw tn.create("duplicate-app",{appName:et})}const xt=new te.H0(et);for(const kt of on.values())xt.addComponent(kt);const fn=new Vn($,Ae,xt);return Ct.set(et,fn),fn}function mr($=wt){const re=Ct.get($);if(!re)throw tn.create("no-app",{appName:$});return re}function Re(){return Array.from(Ct.values())}function _r($){return dt.apply(this,arguments)}function dt(){return(dt=(0,c.Z)(function*($){const re=$.name;Ct.has(re)&&(Ct.delete(re),yield Promise.all($.container.getProviders().map(Ae=>Ae.delete())),$.isDeleted=!0)})).apply(this,arguments)}function Dn($,re,Ae){var et;let Dt=null!==(et=Wt[$])&&void 0!==et?et:$;Ae&&(Dt+=`-${Ae}`);const xt=Dt.match(/\s|\//),fn=re.match(/\s|\//);if(xt||fn){const kt=[`Unable to register library "${Dt}" with version "${re}":`];return xt&&kt.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),xt&&fn&&kt.push("and"),fn&&kt.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void G.warn(kt.join(" "))}cn(new te.wA(`${Dt}-version`,()=>({library:Dt,version:re}),"VERSION"))}function kn($,re){if(null!==$&&"function"!=typeof $)throw tn.create("invalid-log-argument");(0,F.Am)($,re)}function Or($){(0,F.Ub)($)}const zn="firebase-heartbeat-store";let wn=null;function Ha(){return wn||(wn=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:($,re)=>{0===re&&$.createObjectStore(zn)}}).catch($=>{throw tn.create("storage-open",{originalErrorMessage:$.message})})),wn}function Xe(){return(Xe=(0,c.Z)(function*($){try{return(yield Ha()).transaction(zn).objectStore(zn).get(ki($))}catch(re){throw tn.create("storage-get",{originalErrorMessage:re.message})}})).apply(this,arguments)}function vt($,re){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,c.Z)(function*($,re){try{const et=(yield Ha()).transaction(zn,"readwrite");return yield et.objectStore(zn).put(re,ki($)),et.done}catch(Ae){throw tn.create("storage-set",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function ki($){return`${$.name}!${$.options.appId}`}class en{constructor(re){this.container=re,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new j(Ae),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var re=this;return(0,c.Z)(function*(){const et=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=To();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!re._heartbeatsCache.heartbeats.some(xt=>xt.date===Dt))return re._heartbeatsCache.heartbeats.push({date:Dt,agent:et}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(xt=>{const fn=new Date(xt.date).valueOf();return Date.now()-fn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,c.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Ae=To(),{heartbeatsToSend:et,unsentEntries:Dt}=function($,re=1024){const Ae=[];let et=$.slice();for(const Dt of $){const xt=Ae.find(fn=>fn.agent===Dt.agent);if(xt){if(xt.dates.push(Dt.date),K(Ae)>re){xt.dates.pop();break}}else if(Ae.push({agent:Dt.agent,dates:[Dt.date]}),K(Ae)>re){Ae.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:et}}(re._heartbeatsCache.heartbeats),xt=(0,ce.L)(JSON.stringify({version:2,heartbeats:et}));return re._heartbeatsCache.lastSentHeartbeatDate=Ae,Dt.length>0?(re._heartbeatsCache.heartbeats=Dt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),xt})()}}function To(){return(new Date).toISOString().substring(0,10)}class j{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,c.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function($){return Xe.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Ae=this;return(0,c.Z)(function*(){var et;if(yield Ae._canUseIndexedDBPromise){const xt=yield Ae.read();return vt(Ae.app,{lastSentHeartbeatDate:null!==(et=re.lastSentHeartbeatDate)&&void 0!==et?et:xt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Ae=this;return(0,c.Z)(function*(){var et;if(yield Ae._canUseIndexedDBPromise){const xt=yield Ae.read();return vt(Ae.app,{lastSentHeartbeatDate:null!==(et=re.lastSentHeartbeatDate)&&void 0!==et?et:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...re.heartbeats]})}})()}}function K($){return(0,ce.L)(JSON.stringify({version:2,heartbeats:$})).length}cn(new te.wA("platform-logger",re=>new ye(re),"PRIVATE")),cn(new te.wA("heartbeat",re=>new en(re),"PRIVATE")),Dn(ue,"0.7.24",""),Dn(ue,"0.7.24","esm2017"),Dn("fire-js","")},1177:(Qe,_e,O)=>{O.d(_e,{wA:()=>F,H0:()=>ue,zt:()=>le});var c=O(8239),te=O(4213);class F{constructor(G,W,oe){this.name=G,this.instanceFactory=W,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ce="[DEFAULT]";class le{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const oe=new te.BH;if(this.instancesDeferred.set(W,oe),this.isInitialized(W)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:W});$e&&oe.resolve($e)}catch($e){}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const oe=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),$e=null!==(W=null==G?void 0:G.optional)&&void 0!==W&&W;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(De){if($e)return null;throw De}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if("EAGER"===G.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(W){}for(const[W,oe]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(W);try{const De=this.getOrInitializeService({instanceIdentifier:$e});oe.resolve(De)}catch(De){}}}}clearInstance(G=ce){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,c.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...W.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ce){return this.instances.has(G)}getOptions(G=ce){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,oe=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:oe,options:W});for(const[De,je]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(De)&&je.resolve($e);return $e}onInit(G,W){var oe;const $e=this.normalizeInstanceIdentifier(W),De=null!==(oe=this.onInitCallbacks.get($e))&&void 0!==oe?oe:new Set;De.add(G),this.onInitCallbacks.set($e,De);const je=this.instances.get($e);return je&&G(je,$e),()=>{De.delete(G)}}invokeOnInitCallbacks(G,W){const oe=this.onInitCallbacks.get(W);if(oe)for(const $e of oe)try{$e(G,W)}catch(De){}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let oe=this.instances.get(G);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=G,pe===ce?void 0:pe),options:W}),this.instances.set(G,oe),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(oe,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,oe)}catch($e){}var pe;return oe||null}normalizeInstanceIdentifier(G=ce){return this.component?this.component.multipleInstances?G:ce:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new le(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},3855:(Qe,_e,O)=>{O.d(_e,{in:()=>te,Yd:()=>se,Ub:()=>ue,Am:()=>pe});const c=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const F={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ce=te.INFO,le={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ye=(G,W,...oe)=>{if(W<G.logLevel)return;const $e=(new Date).toISOString(),De=le[W];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[De](`[${$e}]  ${G.name}:`,...oe)};class se{constructor(W){this.name=W,this._logLevel=ce,this._logHandler=ye,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in te))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...W),this._logHandler(this,te.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...W),this._logHandler(this,te.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,te.INFO,...W),this._logHandler(this,te.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,te.WARN,...W),this._logHandler(this,te.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...W),this._logHandler(this,te.ERROR,...W)}}function ue(G){c.forEach(W=>{W.setLogLevel(G)})}function pe(G,W){for(const oe of c){let $e=null;W&&W.level&&($e=F[W.level]),oe.userLogHandler=null===G?null:(De,je,...Ue)=>{const Fe=Ue.map(ie=>{if(null==ie)return null;if("string"==typeof ie)return ie;if("number"==typeof ie||"boolean"==typeof ie)return ie.toString();if(ie instanceof Error)return ie.message;try{return JSON.stringify(ie)}catch(Ce){return null}}).filter(ie=>ie).join(" ");je>=(null!=$e?$e:De.logLevel)&&G({level:te[je].toLowerCase(),message:Fe,args:Ue,type:De.name})}}}},5600:(Qe,_e,O)=>{O.d(_e,{Lj:()=>Pe,X3:()=>Be});var c=O(8239);let F,ce;const se=new WeakMap,ue=new WeakMap,pe=new WeakMap,G=new WeakMap,W=new WeakMap;let De={get(be,Z,ee){if(be instanceof IDBTransaction){if("done"===Z)return ue.get(be);if("objectStoreNames"===Z)return be.objectStoreNames||pe.get(be);if("store"===Z)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return ie(be[Z])},set:(be,Z,ee)=>(be[Z]=ee,!0),has:(be,Z)=>be instanceof IDBTransaction&&("done"===Z||"store"===Z)||Z in be};function Fe(be){return"function"==typeof be?function(be){return be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(be)?function(...Z){return be.apply(Ce(this),Z),ie(se.get(this))}:function(...Z){return ie(be.apply(Ce(this),Z))}:function(Z,...ee){const de=be.call(Ce(this),Z,...ee);return pe.set(de,Z.sort?Z.sort():[Z]),ie(de)}}(be):(be instanceof IDBTransaction&&function(be){if(ue.has(be))return;const Z=new Promise((ee,de)=>{const ge=()=>{be.removeEventListener("complete",Me),be.removeEventListener("error",ae),be.removeEventListener("abort",ae)},Me=()=>{ee(),ge()},ae=()=>{de(be.error||new DOMException("AbortError","AbortError")),ge()};be.addEventListener("complete",Me),be.addEventListener("error",ae),be.addEventListener("abort",ae)});ue.set(be,Z)}(be),((be,Z)=>Z.some(ee=>be instanceof ee))(be,F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(be,De):be)}function ie(be){if(be instanceof IDBRequest)return function(be){const Z=new Promise((ee,de)=>{const ge=()=>{be.removeEventListener("success",Me),be.removeEventListener("error",ae)},Me=()=>{ee(ie(be.result)),ge()},ae=()=>{de(be.error),ge()};be.addEventListener("success",Me),be.addEventListener("error",ae)});return Z.then(ee=>{ee instanceof IDBCursor&&se.set(ee,be)}).catch(()=>{}),W.set(Z,be),Z}(be);if(G.has(be))return G.get(be);const Z=Fe(be);return Z!==be&&(G.set(be,Z),W.set(Z,be)),Z}const Ce=be=>W.get(be);function Be(be,Z,{blocked:ee,upgrade:de,blocking:ge,terminated:Me}={}){const ae=indexedDB.open(be,Z),yt=ie(ae);return de&&ae.addEventListener("upgradeneeded",jt=>{de(ie(ae.result),jt.oldVersion,jt.newVersion,ie(ae.transaction))}),ee&&ae.addEventListener("blocked",()=>ee()),yt.then(jt=>{Me&&jt.addEventListener("close",()=>Me()),ge&&jt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),yt}function Pe(be,{blocked:Z}={}){const ee=indexedDB.deleteDatabase(be);return Z&&ee.addEventListener("blocked",()=>Z()),ie(ee).then(()=>{})}const at=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],He=new Map;function Ke(be,Z){if(!(be instanceof IDBDatabase)||Z in be||"string"!=typeof Z)return;if(He.get(Z))return He.get(Z);const ee=Z.replace(/FromIndex$/,""),de=Z!==ee,ge=Ne.includes(ee);if(!(ee in(de?IDBIndex:IDBObjectStore).prototype)||!ge&&!at.includes(ee))return;const Me=function(){var ae=(0,c.Z)(function*(yt,...jt){const Tn=this.transaction(yt,ge?"readwrite":"readonly");let wt=Tn.store;return de&&(wt=wt.index(jt.shift())),(yield Promise.all([wt[ee](...jt),ge&&Tn.done]))[0]});return function(jt){return ae.apply(this,arguments)}}();return He.set(Z,Me),Me}var be;De=hi(tt({},be=De),{get:(Z,ee,de)=>Ke(Z,ee)||be.get(Z,ee,de),has:(Z,ee)=>!!Ke(Z,ee)||be.has(Z,ee)})},8239:(Qe,_e,O)=>{function c(F,ce,le,ye,se,ue,pe){try{var G=F[ue](pe),W=G.value}catch(oe){return void le(oe)}G.done?ce(W):Promise.resolve(W).then(ye,se)}function te(F){return function(){var ce=this,le=arguments;return new Promise(function(ye,se){var ue=F.apply(ce,le);function pe(W){c(ue,ye,se,pe,G,"next",W)}function G(W){c(ue,ye,se,pe,G,"throw",W)}pe(void 0)})}}O.d(_e,{Z:()=>te})}},Qe=>{Qe(Qe.s=1728)}]);