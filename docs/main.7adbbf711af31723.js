var oX=Object.defineProperty,aX=Object.defineProperties,lX=Object.getOwnPropertyDescriptors,Rz=Object.getOwnPropertySymbols,cX=Object.prototype.hasOwnProperty,uX=Object.prototype.propertyIsEnumerable,Oz=(St,M,R)=>M in St?oX(St,M,{enumerable:!0,configurable:!0,writable:!0,value:R}):St[M]=R,Mt=(St,M)=>{for(var R in M||(M={}))cX.call(M,R)&&Oz(St,R,M[R]);if(Rz)for(var R of Rz(M))uX.call(M,R)&&Oz(St,R,M[R]);return St},fs=(St,M)=>aX(St,lX(M));(self.webpackChunkfoodTrackingApp=self.webpackChunkfoodTrackingApp||[]).push([[179],{7905:(St,M,R)=>{"use strict";R.d(M,{hO:()=>Je,xv:()=>he,Dh:()=>re,GT:()=>U,cc:()=>qe,on:()=>te,pX:()=>O});var s=R(3668),I=R(7892),b=R(7233);St=R.hmd(St);const k=["ngOnDestroy"],O=(me,J,Se,De={})=>new Proxy(me,{get:(Fe,Ne)=>Se.runOutsideAngular(()=>{var Ue;if(me[Ne])return(null===(Ue=null==De?void 0:De.spy)||void 0===Ue?void 0:Ue.get)&&De.spy.get(Ne,me[Ne]),me[Ne];if(k.indexOf(Ne)>-1)return()=>{};const ue=J.toPromise().then(Me=>{const q=Me&&Me[Ne];return"function"==typeof q?q.bind(Me):q&&q.then?q.then(Q=>Se.run(()=>Q)):Se.run(()=>q)});return new Proxy(()=>{},{get:(Me,q)=>ue[q],apply:(Me,q,Q)=>ue.then(ne=>{var ie;const Ce=ne&&ne(...Q);return(null===(ie=null==De?void 0:De.spy)||void 0===ie?void 0:ie.apply)&&De.spy.apply(Ne,Q,Ce),Ce})})})}),U=(me,J)=>{J.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(De=>{Object.defineProperty(me.prototype,De,Object.getOwnPropertyDescriptor(Se.prototype||Se,De))})})};class Y{constructor(J){return J}}const re=new s.OlP("angularfire2.app.options"),he=new s.OlP("angularfire2.app.name");function te(me,J,Se){const Fe="object"==typeof Se&&Se||{};Fe.name=Fe.name||"string"==typeof Se&&Se||"[DEFAULT]";const Ue=I.Z.apps.filter(ue=>ue&&ue.name===Fe.name)[0]||J.runOutsideAngular(()=>I.Z.initializeApp(me,Fe));try{JSON.stringify(me)!==JSON.stringify(Ue.options)&&X("error",`${Ue.name} Firebase App already initialized with different options${St.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ue){}return new Y(Ue)}const X=(me,...J)=>{(0,s.X6Q)()&&"undefined"!=typeof console&&console[me](...J)},we={provide:Y,useFactory:te,deps:[re,s.R0b,[new s.FiY,he]]};let Je=(()=>{class me{constructor(Se){I.Z.registerVersion("angularfire",b.q4.full,"core"),I.Z.registerVersion("angularfire",b.q4.full,"app-compat"),I.Z.registerVersion("angular",s.q4F.full,Se.toString())}static initializeApp(Se,De){return{ngModule:me,providers:[{provide:re,useValue:Se},{provide:he,useValue:De}]}}}return me.\u0275fac=function(Se){return new(Se||me)(s.LFG(s.Lbi))},me.\u0275mod=s.oAB({type:me}),me.\u0275inj=s.cJS({providers:[we]}),me})();function qe(me,J,Se,De,Fe){const[,Ne,Ue]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===me)||[];if(Ne)return function(me,J){try{return me.toString()===J.toString()}catch(Se){return me===J}}(Fe,Ue)||(Ie("error",`${J} was already initialized on the ${Se} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:Fe,was:Ue})),Ne;{const ue=De();return globalThis.\u0275AngularfireInstanceCache.push([me,ue,Fe]),ue}}const Ge=!!St.hot,Ie=(me,...J)=>{(0,s.X6Q)()&&"undefined"!=typeof console&&console[me](...J)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(St,M,R)=>{"use strict";R.d(M,{q4:()=>Eu,iC:()=>Ql,HU:()=>kc,vb:()=>go,JM:()=>Tu,u3:()=>Au});var s=R(3668),I=R(7713),b=R(8239),k=R(1572),O=R(4213),U=R(1177),Y=R(3855),re=R(5600);const he="@firebase/installations",we="w:0.5.9",Je="FIS_v2",J=new O.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Se(A){return A instanceof O.ZR&&A.code.includes("request-failed")}function De({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function Fe(A){return{token:A.token,requestStatus:2,expiresIn:ne(A.expiresIn),creationTime:Date.now()}}function Ne(A,P){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,b.Z)(function*(A,P){const Ee=(yield P.json()).error;return J.create("request-failed",{requestName:A,serverCode:Ee.code,serverMessage:Ee.message,serverStatus:Ee.status})})).apply(this,arguments)}function ue({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Me(A,{refreshToken:P}){const Z=ue(A);return Z.append("Authorization",function(A){return`${Je} ${A}`}(P)),Z}function q(A){return Q.apply(this,arguments)}function Q(){return(Q=(0,b.Z)(function*(A){const P=yield A();return P.status>=500&&P.status<600?A():P})).apply(this,arguments)}function ne(A){return Number(A.replace("s","000"))}function Ce(A,P){return W.apply(this,arguments)}function W(){return(W=(0,b.Z)(function*({appConfig:A,heartbeatServiceProvider:P},{fid:Z}){const Ee=De(A),ke=ue(A),et=P.getImmediate({optional:!0});if(et){const yn=yield et.getHeartbeatsHeader();yn&&ke.append("x-firebase-client",yn)}const Rt={method:"POST",headers:ke,body:JSON.stringify({fid:Z,authVersion:Je,appId:A.appId,sdkVersion:we})},pn=yield q(()=>fetch(Ee,Rt));if(pn.ok){const yn=yield pn.json();return{fid:yn.fid||Z,registrationStatus:2,refreshToken:yn.refreshToken,authToken:Fe(yn.authToken)}}throw yield Ne("Create Installation",pn)})).apply(this,arguments)}function ce(A){return new Promise(P=>{setTimeout(P,A)})}const lt=/^[cdef][\w-]{21}$/;function it(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const Z=function(A){return function(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return lt.test(Z)?Z:""}catch(A){return""}}function qt(A){return`${A.appName}!${A.appId}`}const en=new Map;function vn(A,P){const Z=qt(A);_n(Z,P),function(A,P){const Z=(!sr&&"BroadcastChannel"in self&&(sr=new BroadcastChannel("[Firebase] FID Change"),sr.onmessage=A=>{_n(A.data.key,A.data.fid)}),sr);Z&&Z.postMessage({key:A,fid:P}),0===en.size&&sr&&(sr.close(),sr=null)}(Z,P)}function _n(A,P){const Z=en.get(A);if(Z)for(const Ee of Z)Ee(P)}let sr=null;const Cr="firebase-installations-store";let Di=null;function yi(){return Di||(Di=(0,re.X3)("firebase-installations-database",1,{upgrade:(A,P)=>{0===P&&A.createObjectStore(Cr)}})),Di}function tn(A,P){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,b.Z)(function*(A,P){const Z=qt(A),ke=(yield yi()).transaction(Cr,"readwrite"),et=ke.objectStore(Cr),bt=yield et.get(Z);return yield et.put(P,Z),yield ke.done,(!bt||bt.fid!==P.fid)&&vn(A,P.fid),P})).apply(this,arguments)}function Zn(A){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,b.Z)(function*(A){const P=qt(A),Ee=(yield yi()).transaction(Cr,"readwrite");yield Ee.objectStore(Cr).delete(P),yield Ee.done})).apply(this,arguments)}function zn(A,P){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,b.Z)(function*(A,P){const Z=qt(A),ke=(yield yi()).transaction(Cr,"readwrite"),et=ke.objectStore(Cr),bt=yield et.get(Z),Rt=P(bt);return void 0===Rt?yield et.delete(Z):yield et.put(Rt,Z),yield ke.done,Rt&&(!bt||bt.fid!==Rt.fid)&&vn(A,Rt.fid),Rt})).apply(this,arguments)}function ar(A){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,b.Z)(function*(A){let P;const Z=yield zn(A.appConfig,Ee=>{const ke=Oi(Ee),et=xn(A,ke);return P=et.registrationPromise,et.installationEntry});return""===Z.fid?{installationEntry:yield P}:{installationEntry:Z,registrationPromise:P}})).apply(this,arguments)}function Oi(A){return Mn(A||{fid:it(),registrationStatus:0})}function xn(A,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(J.create("app-offline"))};const Z={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},Ee=function(A,P){return Lt.apply(this,arguments)}(A,Z);return{installationEntry:Z,registrationPromise:Ee}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:li(A)}:{installationEntry:P}}function Lt(){return(Lt=(0,b.Z)(function*(A,P){try{const Z=yield Ce(A,P);return tn(A.appConfig,Z)}catch(Z){throw Se(Z)&&409===Z.customData.serverCode?yield Zn(A.appConfig):yield tn(A.appConfig,{fid:P.fid,registrationStatus:0}),Z}})).apply(this,arguments)}function li(A){return ci.apply(this,arguments)}function ci(){return(ci=(0,b.Z)(function*(A){let P=yield $r(A.appConfig);for(;1===P.registrationStatus;)yield ce(100),P=yield $r(A.appConfig);if(0===P.registrationStatus){const{installationEntry:Z,registrationPromise:Ee}=yield ar(A);return Ee||Z}return P})).apply(this,arguments)}function $r(A){return zn(A,P=>{if(!P)throw J.create("installation-not-found");return Mn(P)})}function Mn(A){return function(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Kn(A,P){return Re.apply(this,arguments)}function Re(){return(Re=(0,b.Z)(function*({appConfig:A,heartbeatServiceProvider:P},Z){const Ee=Ae(A,Z),ke=Me(A,Z),et=P.getImmediate({optional:!0});if(et){const yn=yield et.getHeartbeatsHeader();yn&&ke.append("x-firebase-client",yn)}const Rt={method:"POST",headers:ke,body:JSON.stringify({installation:{sdkVersion:we,appId:A.appId}})},pn=yield q(()=>fetch(Ee,Rt));if(pn.ok)return Fe(yield pn.json());throw yield Ne("Generate Auth Token",pn)})).apply(this,arguments)}function Ae(A,{fid:P}){return`${De(A)}/${P}/authTokens:generate`}function Le(A){return st.apply(this,arguments)}function st(){return(st=(0,b.Z)(function*(A,P=!1){let Z;const Ee=yield zn(A.appConfig,et=>{if(!fn(et))throw J.create("not-registered");const bt=et.authToken;if(!P&&Gn(bt))return et;if(1===bt.requestStatus)return Z=xe(A,P),et;{if(!navigator.onLine)throw J.create("app-offline");const Rt=Tr(et);return Z=wt(A,Rt),Rt}});return Z?yield Z:Ee.authToken})).apply(this,arguments)}function xe(A,P){return $e.apply(this,arguments)}function $e(){return($e=(0,b.Z)(function*(A,P){let Z=yield ht(A.appConfig);for(;1===Z.authToken.requestStatus;)yield ce(100),Z=yield ht(A.appConfig);const Ee=Z.authToken;return 0===Ee.requestStatus?Le(A,P):Ee})).apply(this,arguments)}function ht(A){return zn(A,P=>{if(!fn(P))throw J.create("not-registered");return function(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function wt(A,P){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,b.Z)(function*(A,P){try{const Z=yield Kn(A,P),Ee=Object.assign(Object.assign({},P),{authToken:Z});return yield tn(A.appConfig,Ee),Z}catch(Z){if(!Se(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const Ee=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield tn(A.appConfig,Ee)}else yield Zn(A.appConfig);throw Z}})).apply(this,arguments)}function fn(A){return void 0!==A&&2===A.registrationStatus}function Gn(A){return 2===A.requestStatus&&!function(A){const P=Date.now();return P<A.creationTime||A.creationTime+A.expiresIn<P+36e5}(A)}function Tr(A){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:P})}function Oe(){return(Oe=(0,b.Z)(function*(A){const P=A,{installationEntry:Z,registrationPromise:Ee}=yield ar(P);return Ee?Ee.catch(console.error):Le(P).catch(console.error),Z.fid})).apply(this,arguments)}function Tt(){return(Tt=(0,b.Z)(function*(A,P=!1){const Z=A;return yield sn(Z),(yield Le(Z,P)).token})).apply(this,arguments)}function sn(A){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,b.Z)(function*(A){const{registrationPromise:P}=yield ar(A);P&&(yield P)})).apply(this,arguments)}function Ai(A){return J.create("missing-app-config-values",{valueName:A})}const Rr="installations";(0,k._registerComponent)(new U.wA(Rr,A=>{const P=A.getProvider("app").getImmediate(),Z=function(A){if(!A||!A.options)throw Ai("App Configuration");if(!A.name)throw Ai("App Name");const P=["projectId","apiKey","appId"];for(const Z of P)if(!A.options[Z])throw Ai(Z);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(P);return{app:P,appConfig:Z,heartbeatServiceProvider:(0,k._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,k._registerComponent)(new U.wA("installations-internal",A=>{const P=A.getProvider("app").getImmediate(),Z=(0,k._getProvider)(P,Rr).getImmediate();return{getId:()=>function(A){return Oe.apply(this,arguments)}(Z),getToken:ke=>function(A){return Tt.apply(this,arguments)}(Z,ke)}},"PRIVATE")),(0,k.registerVersion)(he,"0.5.9"),(0,k.registerVersion)(he,"0.5.9","esm2017");const an="@firebase/remote-config",Vn=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Do{constructor(P,Z,Ee,ke){this.client=P,this.storage=Z,this.storageCache=Ee,this.logger=ke}isCachedDataFresh(P,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ee=Date.now()-Z,ke=Ee<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${ke}.`),ke}fetch(P){var Z=this;return(0,b.Z)(function*(){const[Ee,ke]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(ke&&Z.isCachedDataFresh(P.cacheMaxAgeMillis,Ee))return ke;P.eTag=ke&&ke.eTag;const et=yield Z.client.fetch(P),bt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===et.status&&bt.push(Z.storage.setLastSuccessfulFetchResponse(et)),yield Promise.all(bt),et})()}}function ao(A=navigator){return A.languages&&A.languages[0]||A.language}class F{constructor(P,Z,Ee,ke,et,bt){this.firebaseInstallations=P,this.sdkVersion=Z,this.namespace=Ee,this.projectId=ke,this.apiKey=et,this.appId=bt}fetch(P){var Z=this;return(0,b.Z)(function*(){const[Ee,ke]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},pn={sdk_version:Z.sdkVersion,app_instance_id:Ee,app_instance_id_token:ke,app_id:Z.appId,language_code:ao()},yn={method:"POST",headers:Rt,body:JSON.stringify(pn)},qn=fetch(bt,yn),Cn=new Promise((mo,xs)=>{P.signal.addEventListener(()=>{const Da=new Error("The operation was aborted.");Da.name="AbortError",xs(Da)})});let si;try{yield Promise.race([qn,Cn]),si=yield qn}catch(mo){let xs="fetch-client-network";throw"AbortError"===mo.name&&(xs="fetch-timeout"),Vn.create(xs,{originalErrorMessage:mo.message})}let pr=si.status;const la=si.headers.get("ETag")||void 0;let As,Sa;if(200===si.status){let mo;try{mo=yield si.json()}catch(xs){throw Vn.create("fetch-client-parse",{originalErrorMessage:xs.message})}As=mo.entries,Sa=mo.state}if("INSTANCE_STATE_UNSPECIFIED"===Sa?pr=500:"NO_CHANGE"===Sa?pr=304:("NO_TEMPLATE"===Sa||"EMPTY_CONFIG"===Sa)&&(As={}),304!==pr&&200!==pr)throw Vn.create("fetch-status",{httpStatus:pr});return{status:pr,eTag:la,config:As}})()}}class Ze{constructor(P,Z){this.client=P,this.storage=Z}fetch(P){var Z=this;return(0,b.Z)(function*(){const Ee=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(P,Ee)})()}attemptFetch(P,{throttleEndTimeMillis:Z,backoffCount:Ee}){var ke=this;return(0,b.Z)(function*(){yield function(A,P){return new Promise((Z,Ee)=>{const ke=Math.max(P-Date.now(),0),et=setTimeout(Z,ke);A.addEventListener(()=>{clearTimeout(et),Ee(Vn.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,Z);try{const et=yield ke.client.fetch(P);return yield ke.storage.deleteThrottleMetadata(),et}catch(et){if(!function(A){if(!(A instanceof O.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(et))throw et;const bt={throttleEndTimeMillis:Date.now()+(0,O.$s)(Ee),backoffCount:Ee+1};return yield ke.storage.setThrottleMetadata(bt),ke.attemptFetch(P,bt)}})()}}class Dt{constructor(P,Z,Ee,ke,et){this.app=P,this._client=Z,this._storageCache=Ee,this._storage=ke,this._logger=et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Jt(A,P){const Z=A.target.error||void 0;return Vn.create(P,{originalErrorMessage:Z&&Z.message})}const bn="app_namespace_store";class wi{constructor(P,Z,Ee,ke=function(){return new Promise((A,P)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=Ee=>{P(Jt(Ee,"storage-open"))},Z.onsuccess=Ee=>{A(Ee.target.result)},Z.onupgradeneeded=Ee=>{0===Ee.oldVersion&&Ee.target.result.createObjectStore(bn,{keyPath:"compositeKey"})}}catch(Z){P(Vn.create("storage-open",{originalErrorMessage:Z}))}})}()){this.appId=P,this.appName=Z,this.namespace=Ee,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var Z=this;return(0,b.Z)(function*(){const Ee=yield Z.openDbPromise;return new Promise((ke,et)=>{const Rt=Ee.transaction([bn],"readonly").objectStore(bn),pn=Z.createCompositeKey(P);try{const yn=Rt.get(pn);yn.onerror=qn=>{et(Jt(qn,"storage-get"))},yn.onsuccess=qn=>{const Cn=qn.target.result;ke(Cn?Cn.value:void 0)}}catch(yn){et(Vn.create("storage-get",{originalErrorMessage:yn&&yn.message}))}})})()}set(P,Z){var Ee=this;return(0,b.Z)(function*(){const ke=yield Ee.openDbPromise;return new Promise((et,bt)=>{const pn=ke.transaction([bn],"readwrite").objectStore(bn),yn=Ee.createCompositeKey(P);try{const qn=pn.put({compositeKey:yn,value:Z});qn.onerror=Cn=>{bt(Jt(Cn,"storage-set"))},qn.onsuccess=()=>{et()}}catch(qn){bt(Vn.create("storage-set",{originalErrorMessage:qn&&qn.message}))}})})()}delete(P){var Z=this;return(0,b.Z)(function*(){const Ee=yield Z.openDbPromise;return new Promise((ke,et)=>{const Rt=Ee.transaction([bn],"readwrite").objectStore(bn),pn=Z.createCompositeKey(P);try{const yn=Rt.delete(pn);yn.onerror=qn=>{et(Jt(qn,"storage-delete"))},yn.onsuccess=()=>{ke()}}catch(yn){et(Vn.create("storage-delete",{originalErrorMessage:yn&&yn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class Ci{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,b.Z)(function*(){const Z=P.storage.getLastFetchStatus(),Ee=P.storage.getLastSuccessfulFetchTimestampMillis(),ke=P.storage.getActiveConfig(),et=yield Z;et&&(P.lastFetchStatus=et);const bt=yield Ee;bt&&(P.lastSuccessfulFetchTimestampMillis=bt);const Rt=yield ke;Rt&&(P.activeConfig=Rt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function _e(){return z.apply(this,arguments)}function z(){return(z=(0,b.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(A){return!1}})).apply(this,arguments)}(0,k._registerComponent)(new U.wA("remote-config",function(P,{instanceIdentifier:Z}){const Ee=P.getProvider("app").getImmediate(),ke=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,O.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:et,apiKey:bt,appId:Rt}=Ee.options;if(!et)throw Vn.create("registration-project-id");if(!bt)throw Vn.create("registration-api-key");if(!Rt)throw Vn.create("registration-app-id");const pn=new wi(Rt,Ee.name,Z=Z||"firebase"),yn=new Ci(pn),qn=new Y.Yd(an);qn.logLevel=Y.in.ERROR;const Cn=new F(ke,k.SDK_VERSION,Z,et,bt,Rt),si=new Ze(Cn,pn),pr=new Do(si,pn,yn,qn),la=new Dt(Ee,pr,yn,pn,qn);return function(A){const P=(0,O.m9)(A);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,k.registerVersion)(an,"0.3.8"),(0,k.registerVersion)(an,"0.3.8","esm2017");const S="/firebase-messaging-sw.js",N="/firebase-cloud-messaging-push-scope",L="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oe="google.c.a.c_id",ve="google.c.a.c_l",de="google.c.a.ts",be="google.c.a.e";var j=(()=>{return(A=j||(j={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",j;var A})();function pe(A){const P=new Uint8Array(A);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Te(A){const Z=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ee=atob(Z),ke=new Uint8Array(Ee.length);for(let et=0;et<Ee.length;++et)ke[et]=Ee.charCodeAt(et);return ke}const Qe="fcm_token_details_db",Pt="fcm_token_object_Store";function Bt(A){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,b.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(et=>et.name).includes(Qe))return null;let P=null;return(yield(0,re.X3)(Qe,5,{upgrade:(Ee=(0,b.Z)(function*(ke,et,bt,Rt){var pn;if(et<2||!ke.objectStoreNames.contains(Pt))return;const yn=Rt.objectStore(Pt),qn=yield yn.index("fcmSenderId").get(A);if(yield yn.clear(),qn)if(2===et){const Cn=qn;if(!Cn.auth||!Cn.p256dh||!Cn.endpoint)return;P={token:Cn.fcmToken,createTime:null!==(pn=Cn.createTime)&&void 0!==pn?pn:Date.now(),subscriptionOptions:{auth:Cn.auth,p256dh:Cn.p256dh,endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:"string"==typeof Cn.vapidKey?Cn.vapidKey:pe(Cn.vapidKey)}}}else if(3===et){const Cn=qn;P={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:pe(Cn.auth),p256dh:pe(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:pe(Cn.vapidKey)}}}else if(4===et){const Cn=qn;P={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:pe(Cn.auth),p256dh:pe(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:pe(Cn.vapidKey)}}}}),function(et,bt,Rt,pn){return Ee.apply(this,arguments)})})).close(),yield(0,re.Lj)(Qe),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),ln(P)?P:null;var Ee}),Ut.apply(this,arguments)}function ln(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:P}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const Pn="firebase-messaging-store";let xo=null;function co(){return xo||(xo=(0,re.X3)("firebase-messaging-database",1,{upgrade:(A,P)=>{0===P&&A.createObjectStore(Pn)}})),xo}function Sr(A){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,b.Z)(function*(A){const P=Qo(A),Ee=yield(yield co()).transaction(Pn).objectStore(Pn).get(P);if(Ee)return Ee;{const ke=yield Bt(A.appConfig.senderId);if(ke)return yield Ko(A,ke),ke}})).apply(this,arguments)}function Ko(A,P){return _a.apply(this,arguments)}function _a(){return(_a=(0,b.Z)(function*(A,P){const Z=Qo(A),ke=(yield co()).transaction(Pn,"readwrite");return yield ke.objectStore(Pn).put(P,Z),yield ke.done,P})).apply(this,arguments)}function Mi(A){return bc.apply(this,arguments)}function bc(){return(bc=(0,b.Z)(function*(A){const P=Qo(A),Ee=(yield co()).transaction(Pn,"readwrite");yield Ee.objectStore(Pn).delete(P),yield Ee.done})).apply(this,arguments)}function Qo({appConfig:A}){return A.appId}const or=new O.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Sl(A,P){return ya.apply(this,arguments)}function ya(){return(ya=(0,b.Z)(function*(A,P){const Z=yield Al(A),Ee=Ha(P),ke={method:"POST",headers:Z,body:JSON.stringify(Ee)};let et;try{et=yield(yield fetch(cn(A.appConfig),ke)).json()}catch(bt){throw or.create("token-subscribe-failed",{errorInfo:bt})}if(et.error)throw or.create("token-subscribe-failed",{errorInfo:et.error.message});if(!et.token)throw or.create("token-subscribe-no-token");return et.token})).apply(this,arguments)}function Dl(A,P){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,b.Z)(function*(A,P){const Z=yield Al(A),Ee=Ha(P.subscriptionOptions),ke={method:"PATCH",headers:Z,body:JSON.stringify(Ee)};let et;try{et=yield(yield fetch(`${cn(A.appConfig)}/${P.token}`,ke)).json()}catch(bt){throw or.create("token-update-failed",{errorInfo:bt})}if(et.error)throw or.create("token-update-failed",{errorInfo:et.error.message});if(!et.token)throw or.create("token-update-no-token");return et.token})).apply(this,arguments)}function wc(A,P){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,b.Z)(function*(A,P){const Ee={method:"DELETE",headers:yield Al(A)};try{const et=yield(yield fetch(`${cn(A.appConfig)}/${P}`,Ee)).json();if(et.error)throw or.create("token-unsubscribe-failed",{errorInfo:et.error.message})}catch(ke){throw or.create("token-unsubscribe-failed",{errorInfo:ke})}})).apply(this,arguments)}function cn({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Al(A){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,b.Z)(function*({appConfig:A,installations:P}){const Z=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Ha({p256dh:A,auth:P,endpoint:Z,vapidKey:Ee}){const ke={web:{endpoint:Z,auth:P,p256dh:A}};return Ee!==L&&(ke.web.applicationPubKey=Ee),ke}const xl=6048e5;function fu(A){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,b.Z)(function*(A){const P=yield ea(A.swRegistration,A.vapidKey),Z={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:P.endpoint,auth:pe(P.getKey("auth")),p256dh:pe(P.getKey("p256dh"))},Ee=yield Sr(A.firebaseDependencies);if(Ee){if(pu(Ee.subscriptionOptions,Z))return Date.now()>=Ee.createTime+xl?Qn(A,{token:Ee.token,createTime:Date.now(),subscriptionOptions:Z}):Ee.token;try{yield wc(A.firebaseDependencies,Ee.token)}catch(ke){console.warn(ke)}return ni(A.firebaseDependencies,Z)}return ni(A.firebaseDependencies,Z)})).apply(this,arguments)}function pd(A){return _t.apply(this,arguments)}function _t(){return(_t=(0,b.Z)(function*(A){const P=yield Sr(A.firebaseDependencies);P&&(yield wc(A.firebaseDependencies,P.token),yield Mi(A.firebaseDependencies));const Z=yield A.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()})).apply(this,arguments)}function Qn(A,P){return ko.apply(this,arguments)}function ko(){return(ko=(0,b.Z)(function*(A,P){try{const Z=yield Dl(A.firebaseDependencies,P),Ee=Object.assign(Object.assign({},P),{token:Z,createTime:Date.now()});return yield Ko(A.firebaseDependencies,Ee),Z}catch(Z){throw yield pd(A),Z}})).apply(this,arguments)}function ni(A,P){return kl.apply(this,arguments)}function kl(){return(kl=(0,b.Z)(function*(A,P){const Ee={token:yield Sl(A,P),createTime:Date.now(),subscriptionOptions:P};return yield Ko(A,Ee),Ee.token})).apply(this,arguments)}function ea(A,P){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,b.Z)(function*(A,P){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Te(P)})})).apply(this,arguments)}function pu(A,P){return P.vapidKey===A.vapidKey&&P.endpoint===A.endpoint&&P.auth===A.auth&&P.p256dh===A.p256dh}function va(A){const P={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function(A,P){if(!P.notification)return;A.notification={};const Z=P.notification.title;Z&&(A.notification.title=Z);const Ee=P.notification.body;Ee&&(A.notification.body=Ee);const ke=P.notification.image;ke&&(A.notification.image=ke)}(P,A),function(A,P){!P.data||(A.data=P.data)}(P,A),function(A,P){if(!P.fcmOptions)return;A.fcmOptions={};const Z=P.fcmOptions.link;Z&&(A.fcmOptions.link=Z);const Ee=P.fcmOptions.analytics_label;Ee&&(A.fcmOptions.analyticsLabel=Ee)}(P,A),P}function Rl(A){return"object"==typeof A&&!!A&&oe in A}function Li(A,P){const Z=[];for(let Ee=0;Ee<A.length;Ee++)Z.push(A.charAt(Ee)),Ee<P.length&&Z.push(P.charAt(Ee));return Z.join("")}function Ol(A){return or.create("missing-app-config-values",{valueName:A})}Li("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Li("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ta{constructor(P,Z,Ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function(A){if(!A||!A.options)throw Ol("App Configuration Object");if(!A.name)throw Ol("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=A;for(const Ee of P)if(!Z[Ee])throw Ol(Ee);return{appName:A.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:ke,installations:Z,analyticsProvider:Ee}}_delete(){return Promise.resolve()}}function uo(A){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,b.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(S,{scope:N}),A.swRegistration.update().catch(()=>{})}catch(P){throw or.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function gd(A,P){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,b.Z)(function*(A,P){if(!P&&!A.swRegistration&&(yield uo(A)),P||!A.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw or.create("invalid-sw-registration");A.swRegistration=P}})).apply(this,arguments)}function Gh(A,P){return ba.apply(this,arguments)}function ba(){return(ba=(0,b.Z)(function*(A,P){P?A.vapidKey=P:A.vapidKey||(A.vapidKey=L)})).apply(this,arguments)}function Ga(){return(Ga=(0,b.Z)(function*(A,P){if(!navigator)throw or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw or.create("permission-blocked");return yield Gh(A,null==P?void 0:P.vapidKey),yield gd(A,null==P?void 0:P.serviceWorkerRegistration),fu(A)})).apply(this,arguments)}function Fl(A,P,Z){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,b.Z)(function*(A,P,Z){const Ee=md(P);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(Ee,{message_id:Z[oe],message_name:Z[ve],message_time:Z[de],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function md(A){switch(A){case j.NOTIFICATION_CLICKED:return"notification_open";case j.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ic(){return(Ic=(0,b.Z)(function*(A,P){const Z=P.data;if(!Z.isFirebaseMessaging)return;A.onMessageHandler&&Z.messageType===j.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(va(Z)):A.onMessageHandler.next(va(Z)));const Ee=Z.data;Rl(Ee)&&"1"===Ee[be]&&(yield Fl(A,Z.messageType,Ee))})).apply(this,arguments)}const Ll="@firebase/messaging";function _u(){return Br.apply(this,arguments)}function Br(){return(Br=(0,b.Z)(function*(){try{yield(0,O.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,O.hl)()&&(0,O.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,k._registerComponent)(new U.wA("messaging",A=>{const P=new ta(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function(A,P){return Ic.apply(this,arguments)}(P,Z)),P},"PUBLIC")),(0,k._registerComponent)(new U.wA("messaging-internal",A=>{const P=A.getProvider("messaging").getImmediate();return{getToken:Ee=>function(A,P){return Ga.apply(this,arguments)}(P,Ee)}},"PRIVATE")),(0,k.registerVersion)(Ll,"0.9.13"),(0,k.registerVersion)(Ll,"0.9.13","esm2017");const Bl="analytics",vu="firebase_id",bu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_d="https://www.googletagmanager.com/gtag/js",Yr=new Y.Yd("@firebase/analytics");function Ul(A){return Promise.all(A.map(P=>P.catch(Z=>Z)))}function gg(A,P){const Z=document.createElement("script");Z.src=`${_d}?l=${A}&id=${P}`,Z.async=!0,document.head.appendChild(Z)}function $a(A,P,Z,Ee,ke,et){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,b.Z)(function*(A,P,Z,Ee,ke,et){const bt=Ee[ke];try{if(bt)yield P[bt];else{const pn=(yield Ul(Z)).find(yn=>yn.measurementId===ke);pn&&(yield P[pn.appId])}}catch(Rt){Yr.error(Rt)}A("config",ke,et)})).apply(this,arguments)}function Wa(A,P,Z,Ee,ke){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,b.Z)(function*(A,P,Z,Ee,ke){try{let et=[];if(ke&&ke.send_to){let bt=ke.send_to;Array.isArray(bt)||(bt=[bt]);const Rt=yield Ul(Z);for(const pn of bt){const yn=Rt.find(Cn=>Cn.measurementId===pn),qn=yn&&P[yn.appId];if(!qn){et=[];break}et.push(qn)}}0===et.length&&(et=Object.values(P)),yield Promise.all(et),A("event",Ee,ke||{})}catch(et){Yr.error(et)}})).apply(this,arguments)}function Dr(){const A=window.document.getElementsByTagName("script");for(const P of Object.values(A))if(P.src&&P.src.includes(_d))return P;return null}const xt=new O.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ea=new class{constructor(P={},Z=1e3){this.throttleMetadata=P,this.intervalMillis=Z}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,Z){this.throttleMetadata[P]=Z}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function jl(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function qa(A){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,b.Z)(function*(A){var P;const{appId:Z,apiKey:Ee}=A,ke={method:"GET",headers:jl(Ee)},et=bu.replace("{app-id}",Z),bt=yield fetch(et,ke);if(200!==bt.status&&304!==bt.status){let Rt="";try{const pn=yield bt.json();(null===(P=pn.error)||void 0===P?void 0:P.message)&&(Rt=pn.error.message)}catch(pn){}throw xt.create("config-fetch-failed",{httpStatus:bt.status,responseMessage:Rt})}return bt.json()})).apply(this,arguments)}function Hl(A){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,b.Z)(function*(A,P=Ea,Z){const{appId:Ee,apiKey:ke,measurementId:et}=A.options;if(!Ee)throw xt.create("no-app-id");if(!ke){if(et)return{measurementId:et,appId:Ee};throw xt.create("no-api-key")}const bt=P.getThrottleMetadata(Ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Rt=new sa;return setTimeout((0,b.Z)(function*(){Rt.abort()}),void 0!==Z?Z:6e4),ia({appId:Ee,apiKey:ke,measurementId:et},bt,Rt,P)})).apply(this,arguments)}function ia(A,P,Z){return kt.apply(this,arguments)}function kt(){return(kt=(0,b.Z)(function*(A,{throttleEndTimeMillis:P,backoffCount:Z},Ee,ke=Ea){const{appId:et,measurementId:bt}=A;try{yield qh(Ee,P)}catch(Rt){if(bt)return Yr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Rt.message}]`),{appId:et,measurementId:bt};throw Rt}try{const Rt=yield qa(A);return ke.deleteThrottleMetadata(et),Rt}catch(Rt){if(!Zh(Rt)){if(ke.deleteThrottleMetadata(et),bt)return Yr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Rt.message}]`),{appId:et,measurementId:bt};throw Rt}const pn=503===Number(Rt.customData.httpStatus)?(0,O.$s)(Z,ke.intervalMillis,30):(0,O.$s)(Z,ke.intervalMillis),yn={throttleEndTimeMillis:Date.now()+pn,backoffCount:Z+1};return ke.setThrottleMetadata(et,yn),Yr.debug(`Calling attemptFetch again in ${pn} millis`),ia(A,yn,Ee,ke)}})).apply(this,arguments)}function qh(A,P){return new Promise((Z,Ee)=>{const ke=Math.max(P-Date.now(),0),et=setTimeout(Z,ke);A.addEventListener(()=>{clearTimeout(et),Ee(xt.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function Zh(A){if(!(A instanceof O.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}class sa{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function xc(){return lr.apply(this,arguments)}function lr(){return(lr=(0,b.Z)(function*(){if(!(0,O.hl)())return Yr.warn(xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,O.eu)()}catch(A){return Yr.warn(xt.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function Ys(){return(Ys=(0,b.Z)(function*(A,P,Z,Ee,ke,et,bt){var Rt;const pn=Hl(A);pn.then(pr=>{Z[pr.measurementId]=pr.appId,A.options.measurementId&&pr.measurementId!==A.options.measurementId&&Yr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${pr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pr=>Yr.error(pr)),P.push(pn);const yn=xc().then(pr=>{if(pr)return Ee.getId()}),[qn,Cn]=yield Promise.all([pn,yn]);Dr()||gg(et,qn.measurementId),ke("js",new Date);const si=null!==(Rt=null==bt?void 0:bt.config)&&void 0!==Rt?Rt:{};return si.origin="firebase",si.update=!0,null!=Cn&&(si[vu]=Cn),ke("config",qn.measurementId,si),qn.measurementId})).apply(this,arguments)}class Mc{constructor(P){this.app=P}_delete(){return delete Ks[this.app.options.appId],Promise.resolve()}}let Ks={},Gl=[];const Ia={};let Ro,Bi,ho="dataLayer",Ss=!1;function Qr(A,P,Z){!function(){const A=[];if((0,O.ru)()&&A.push("This is a browser extension environment."),(0,O.zI)()||A.push("Cookies are not available."),A.length>0){const P=A.map((Ee,ke)=>`(${ke+1}) ${Ee}`).join(" "),Z=xt.create("invalid-analytics-context",{errorInfo:P});Yr.warn(Z.message)}}();const Ee=A.options.appId;if(!Ee)throw xt.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw xt.create("no-api-key");Yr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ks[Ee])throw xt.create("already-exists",{id:Ee});if(!Ss){!function(A){let P=[];Array.isArray(window[A])?P=window[A]:window[A]=P}(ho);const{wrappedGtag:et,gtagCore:bt}=function(A,P,Z,Ee,ke){let et=function(...bt){window[Ee].push(arguments)};return window[ke]&&"function"==typeof window[ke]&&(et=window[ke]),window[ke]=function(A,P,Z,Ee){function et(){return(et=(0,b.Z)(function*(bt,Rt,pn){try{"event"===bt?yield Wa(A,P,Z,Rt,pn):"config"===bt?yield $a(A,P,Z,Ee,Rt,pn):A("set",Rt)}catch(yn){Yr.error(yn)}})).apply(this,arguments)}return function(bt,Rt,pn){return et.apply(this,arguments)}}(et,A,P,Z),{gtagCore:et,wrappedGtag:window[ke]}}(Ks,Gl,Ia,ho,"gtag");Bi=et,Ro=bt,Ss=!0}return Ks[Ee]=function(A,P,Z,Ee,ke,et,bt){return Ys.apply(this,arguments)}(A,Gl,Ia,P,Ro,ho,Z),new Mc(A)}function $l(){return($l=(0,b.Z)(function*(A,P,Z,Ee,ke){if(ke&&ke.global)A("event",Z,Ee);else{const et=yield P;A("event",Z,Object.assign(Object.assign({},Ee),{send_to:et}))}})).apply(this,arguments)}function jr(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,b.Z)(function*(){if((0,O.ru)()||!(0,O.zI)()||!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(A){return!1}})).apply(this,arguments)}const wu="@firebase/analytics";(0,k._registerComponent)(new U.wA(Bl,(P,{options:Z})=>Qr(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,k._registerComponent)(new U.wA("analytics-internal",function(P){try{const Z=P.getProvider(Bl).getImmediate();return{logEvent:(Ee,ke,et)=>function(A,P,Z,Ee){A=(0,O.m9)(A),function(A,P,Z,Ee,ke){return $l.apply(this,arguments)}(Bi,Ks[A.app.options.appId],P,Z,Ee).catch(ke=>Yr.error(ke))}(Z,Ee,ke,et)}}catch(Z){throw xt.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,k.registerVersion)(wu,"0.7.9"),(0,k.registerVersion)(wu,"0.7.9","esm2017");var Jr=R(2869),ql=R(8843);const Yh=new class extends ql.v{}(class extends Jr.o{constructor(P,Z){super(P,Z),this.scheduler=P,this.work=Z}schedule(P,Z=0){return Z>0?super.schedule(P,Z):(this.delay=Z,this.state=P,this.scheduler.flush(this),this)}execute(P,Z){return Z>0||this.closed?super.execute(P,Z):this._execute(P,Z)}requestAsyncId(P,Z,Ee=0){return null!=Ee&&Ee>0||null==Ee&&this.delay>0?super.requestAsyncId(P,Z,Ee):P.flush(this)}});var fo=R(2210),Zl=R(8305),oa=R(7384),Po=R(5222),Cu=R(4763);const Eu=new s.GfV("7.3.0"),Iu="__angularfire_symbol__analyticsIsSupportedValue",aa="__angularfire_symbol__analyticsIsSupported",Yl="__angularfire_symbol__remoteConfigIsSupportedValue",In="__angularfire_symbol__remoteConfigIsSupported",Yi="__angularfire_symbol__messagingIsSupportedValue",po="__angularfire_symbol__messagingIsSupported";function Tu(A,P,Z){if(P){if(1===P.length)return P[0];const et=P.filter(bt=>bt.app===Z);if(1===et.length)return et[0]}return Z.container.getProvider(A).getImmediate({optional:!0})}globalThis[aa]||(globalThis[aa]=jr().then(A=>globalThis[Iu]=A).catch(()=>globalThis[Iu]=!1)),globalThis[po]||(globalThis[po]=_u().then(A=>globalThis[Yi]=A).catch(()=>globalThis[Yi]=!1)),globalThis[In]||(globalThis[In]=_e().then(A=>globalThis[Yl]=A).catch(()=>globalThis[Yl]=!1));const go=(A,P)=>{const Z=P?[P]:(0,I.C6)(),Ee=[];return Z.forEach(ke=>{ke.container.getProvider(A).instances.forEach(bt=>{Ee.includes(bt)||Ee.push(bt)})}),Ee};function No(){}class Su{constructor(P,Z=Yh){this.zone=P,this.delegate=Z}now(){return this.delegate.now()}schedule(P,Z,Ee){const ke=this.zone;return this.delegate.schedule(function(bt){ke.runGuarded(()=>{P.apply(this,[bt])})},Z,Ee)}}class Kl{constructor(P){this.zone=P,this.task=null}call(P,Z){const Ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No)),Z.pipe((0,oa.b)({next:Ee,complete:Ee,error:Ee})).subscribe(P).add(Ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kc=(()=>{class A{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new Su(Zone.current)),this.insideAngular=Z.run(()=>new Su(Zone.current,fo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(Z){return new(Z||A)(s.LFG(s.R0b))},A.\u0275prov=s.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Ar(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function _s(A){return Ar().ngZone.runOutsideAngular(()=>A())}function Xs(A){return Ar().ngZone.run(()=>A())}function Ql(A){return Ar(),function(A){return function(Z){return(Z=Z.lift(new Kl(A.ngZone))).pipe((0,Po.R)(A.outsideAngular),(0,Cu.Q)(A.insideAngular))}}(Ar())(A)}const Id=(A,P)=>{const Z=void 0;return function(){const Ee=arguments;return P&&setTimeout(()=>{"scheduled"===P.state&&P.invoke()},10),Xs(()=>A.apply(Z,Ee))}},Au=(A,P)=>function(){let Z;const Ee=arguments;for(let et=0;et<arguments.length;et++)"function"==typeof Ee[et]&&(P&&(Z||(Z=Xs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No)))),Ee[et]=Id(Ee[et],Z));const ke=_s(()=>A.apply(this,Ee));if(!P){if(ke instanceof Zl.y){const et=Ar();return ke.pipe((0,Po.R)(et.outsideAngular),(0,Cu.Q)(et.insideAngular))}return Xs(()=>ke)}return ke instanceof Zl.y?ke.pipe(Ql):ke instanceof Promise?Xs(()=>new Promise((et,bt)=>ke.then(Rt=>Xs(()=>et(Rt)),Rt=>Xs(()=>bt(Rt))))):"function"==typeof ke&&Z?function(){return setTimeout(()=>{Z&&"scheduled"===Z.state&&Z.invoke()},10),ke.apply(this,arguments)}:Xs(()=>ke)}},2501:St=>{window,St.exports=function(M){var R={};function s(I){if(R[I])return R[I].exports;var b=R[I]={i:I,l:!1,exports:{}};return M[I].call(b.exports,b,b.exports,s),b.l=!0,b.exports}return s.m=M,s.c=R,s.d=function(I,b,k){s.o(I,b)||Object.defineProperty(I,b,{enumerable:!0,get:k})},s.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},s.t=function(I,b){if(1&b&&(I=s(I)),8&b||4&b&&"object"==typeof I&&I&&I.__esModule)return I;var k=Object.create(null);if(s.r(k),Object.defineProperty(k,"default",{enumerable:!0,value:I}),2&b&&"string"!=typeof I)for(var O in I)s.d(k,O,function(U){return I[U]}.bind(null,O));return k},s.n=function(I){var b=I&&I.__esModule?function(){return I.default}:function(){return I};return s.d(b,"a",b),b},s.o=function(I,b){return Object.prototype.hasOwnProperty.call(I,b)},s.p="/",s(s.s=72)}([function(M,R){M.exports=function(s,I,b){return I in s?Object.defineProperty(s,I,{value:b,enumerable:!0,configurable:!0,writable:!0}):s[I]=b,s},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){function s(I){return M.exports=s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},M.exports.__esModule=!0,M.exports.default=M.exports,s(I)}M.exports=s,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(s,I){if(!(s instanceof I))throw new TypeError("Cannot call a class as a function")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){function s(I,b){for(var k=0;k<b.length;k++){var O=b[k];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(I,O.key,O)}}M.exports=function(I,b,k){return b&&s(I.prototype,b),k&&s(I,k),Object.defineProperty(I,"prototype",{writable:!1}),I},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){"use strict";s.d(R,"a",function(){return I}),s.d(R,"b",function(){return b}),s.d(R,"c",function(){return k}),s.d(R,"d",function(){return O});var I={};s.r(I),s.d(I,"EPSILON",function(){return U}),s.d(I,"ARRAY_TYPE",function(){return Y}),s.d(I,"RANDOM",function(){return re}),s.d(I,"setMatrixArrayType",function(){return he}),s.d(I,"toRadian",function(){return X}),s.d(I,"equals",function(){return we});var b={};s.r(b),s.d(b,"create",function(){return Je}),s.d(b,"clone",function(){return qe}),s.d(b,"copy",function(){return je}),s.d(b,"identity",function(){return Ge}),s.d(b,"fromValues",function(){return Ie}),s.d(b,"set",function(){return me}),s.d(b,"transpose",function(){return J}),s.d(b,"invert",function(){return Se}),s.d(b,"adjoint",function(){return De}),s.d(b,"determinant",function(){return Fe}),s.d(b,"multiply",function(){return Ne}),s.d(b,"rotate",function(){return Ue}),s.d(b,"scale",function(){return ue}),s.d(b,"fromRotation",function(){return Me}),s.d(b,"fromScaling",function(){return q}),s.d(b,"str",function(){return Q}),s.d(b,"frob",function(){return ne}),s.d(b,"LDU",function(){return ie}),s.d(b,"add",function(){return Ce}),s.d(b,"subtract",function(){return W}),s.d(b,"exactEquals",function(){return ce}),s.d(b,"equals",function(){return Ve}),s.d(b,"multiplyScalar",function(){return lt}),s.d(b,"multiplyScalarAndAdd",function(){return Xe}),s.d(b,"mul",function(){return it}),s.d(b,"sub",function(){return dt});var k={};s.r(k),s.d(k,"create",function(){return qt}),s.d(k,"clone",function(){return en}),s.d(k,"fromValues",function(){return vn}),s.d(k,"copy",function(){return Ot}),s.d(k,"set",function(){return dn}),s.d(k,"add",function(){return _n}),s.d(k,"subtract",function(){return ur}),s.d(k,"multiply",function(){return sr}),s.d(k,"divide",function(){return Nn}),s.d(k,"ceil",function(){return Nr}),s.d(k,"floor",function(){return Si}),s.d(k,"min",function(){return ri}),s.d(k,"max",function(){return Cr}),s.d(k,"round",function(){return Di}),s.d(k,"scale",function(){return yi}),s.d(k,"scaleAndAdd",function(){return tn}),s.d(k,"distance",function(){return Fn}),s.d(k,"squaredDistance",function(){return Zn}),s.d(k,"length",function(){return Jn}),s.d(k,"squaredLength",function(){return zn}),s.d(k,"negate",function(){return Gi}),s.d(k,"inverse",function(){return ar}),s.d(k,"normalize",function(){return Ln}),s.d(k,"dot",function(){return Oi}),s.d(k,"cross",function(){return xn}),s.d(k,"lerp",function(){return Ft}),s.d(k,"random",function(){return Lt}),s.d(k,"transformMat2",function(){return li}),s.d(k,"transformMat2d",function(){return ci}),s.d(k,"transformMat3",function(){return $r}),s.d(k,"transformMat4",function(){return Mn}),s.d(k,"rotate",function(){return Yn}),s.d(k,"angle",function(){return Kn}),s.d(k,"zero",function(){return Re}),s.d(k,"str",function(){return Ae}),s.d(k,"exactEquals",function(){return Le}),s.d(k,"equals",function(){return st}),s.d(k,"len",function(){return $e}),s.d(k,"sub",function(){return ht}),s.d(k,"mul",function(){return wt}),s.d(k,"div",function(){return Xt}),s.d(k,"dist",function(){return fn}),s.d(k,"sqrDist",function(){return Gn}),s.d(k,"sqrLen",function(){return on}),s.d(k,"forEach",function(){return Tr});var O={};s.r(O),s.d(O,"create",function(){return Ye}),s.d(O,"clone",function(){return Be}),s.d(O,"length",function(){return Oe}),s.d(O,"fromValues",function(){return ct}),s.d(O,"copy",function(){return Tt}),s.d(O,"set",function(){return sn}),s.d(O,"add",function(){return Zt}),s.d(O,"subtract",function(){return hn}),s.d(O,"multiply",function(){return Dn}),s.d(O,"divide",function(){return $n}),s.d(O,"ceil",function(){return _r}),s.d(O,"floor",function(){return pt}),s.d(O,"min",function(){return Gt}),s.d(O,"max",function(){return Wn}),s.d(O,"round",function(){return ii}),s.d(O,"scale",function(){return Ai}),s.d(O,"scaleAndAdd",function(){return Rr}),s.d(O,"distance",function(){return dr}),s.d(O,"squaredDistance",function(){return hr}),s.d(O,"squaredLength",function(){return xi}),s.d(O,"negate",function(){return ps}),s.d(O,"inverse",function(){return an}),s.d(O,"normalize",function(){return $i}),s.d(O,"dot",function(){return vi}),s.d(O,"cross",function(){return Or}),s.d(O,"lerp",function(){return bi}),s.d(O,"hermite",function(){return Vn}),s.d(O,"bezier",function(){return Gs}),s.d(O,"random",function(){return Fr}),s.d(O,"transformMat4",function(){return Wr}),s.d(O,"transformMat3",function(){return Un}),s.d(O,"transformQuat",function(){return Zo}),s.d(O,"rotateX",function(){return Wi}),s.d(O,"rotateY",function(){return Pi}),s.d(O,"rotateZ",function(){return Is}),s.d(O,"angle",function(){return qr}),s.d(O,"zero",function(){return Ts}),s.d(O,"str",function(){return ts}),s.d(O,"exactEquals",function(){return yr}),s.d(O,"equals",function(){return $s}),s.d(O,"sub",function(){return ei}),s.d(O,"mul",function(){return ui}),s.d(O,"div",function(){return Ws}),s.d(O,"dist",function(){return qi}),s.d(O,"sqrDist",function(){return qs}),s.d(O,"len",function(){return ti}),s.d(O,"sqrLen",function(){return Do}),s.d(O,"forEach",function(){return ao});var U=1e-6,Y="undefined"!=typeof Float32Array?Float32Array:Array,re=Math.random;function he(F){Y=F}var te=Math.PI/180;function X(F){return F*te}function we(F,K){return Math.abs(F-K)<=U*Math.max(1,Math.abs(F),Math.abs(K))}function Je(){var F=new Y(4);return Y!=Float32Array&&(F[1]=0,F[2]=0),F[0]=1,F[3]=1,F}function qe(F){var K=new Y(4);return K[0]=F[0],K[1]=F[1],K[2]=F[2],K[3]=F[3],K}function je(F,K){return F[0]=K[0],F[1]=K[1],F[2]=K[2],F[3]=K[3],F}function Ge(F){return F[0]=1,F[1]=0,F[2]=0,F[3]=1,F}function Ie(F,K,fe,Ze){var tt=new Y(4);return tt[0]=F,tt[1]=K,tt[2]=fe,tt[3]=Ze,tt}function me(F,K,fe,Ze,tt){return F[0]=K,F[1]=fe,F[2]=Ze,F[3]=tt,F}function J(F,K){if(F===K){var fe=K[1];F[1]=K[2],F[2]=fe}else F[0]=K[0],F[1]=K[2],F[2]=K[1],F[3]=K[3];return F}function Se(F,K){var fe=K[0],Ze=K[1],tt=K[2],mt=K[3],Dt=fe*mt-tt*Ze;return Dt?(F[0]=mt*(Dt=1/Dt),F[1]=-Ze*Dt,F[2]=-tt*Dt,F[3]=fe*Dt,F):null}function De(F,K){var fe=K[0];return F[0]=K[3],F[1]=-K[1],F[2]=-K[2],F[3]=fe,F}function Fe(F){return F[0]*F[3]-F[2]*F[1]}function Ne(F,K,fe){var Ze=K[0],tt=K[1],mt=K[2],Dt=K[3],Jt=fe[0],bn=fe[1],fr=fe[2],Zr=fe[3];return F[0]=Ze*Jt+mt*bn,F[1]=tt*Jt+Dt*bn,F[2]=Ze*fr+mt*Zr,F[3]=tt*fr+Dt*Zr,F}function Ue(F,K,fe){var Ze=K[0],tt=K[1],mt=K[2],Dt=K[3],Jt=Math.sin(fe),bn=Math.cos(fe);return F[0]=Ze*bn+mt*Jt,F[1]=tt*bn+Dt*Jt,F[2]=Ze*-Jt+mt*bn,F[3]=tt*-Jt+Dt*bn,F}function ue(F,K,fe){var tt=K[1],mt=K[2],Dt=K[3],Jt=fe[0],bn=fe[1];return F[0]=K[0]*Jt,F[1]=tt*Jt,F[2]=mt*bn,F[3]=Dt*bn,F}function Me(F,K){var fe=Math.sin(K),Ze=Math.cos(K);return F[0]=Ze,F[1]=fe,F[2]=-fe,F[3]=Ze,F}function q(F,K){return F[0]=K[0],F[1]=0,F[2]=0,F[3]=K[1],F}function Q(F){return"mat2("+F[0]+", "+F[1]+", "+F[2]+", "+F[3]+")"}function ne(F){return Math.hypot(F[0],F[1],F[2],F[3])}function ie(F,K,fe,Ze){return F[2]=Ze[2]/Ze[0],fe[0]=Ze[0],fe[1]=Ze[1],fe[3]=Ze[3]-F[2]*fe[1],[F,K,fe]}function Ce(F,K,fe){return F[0]=K[0]+fe[0],F[1]=K[1]+fe[1],F[2]=K[2]+fe[2],F[3]=K[3]+fe[3],F}function W(F,K,fe){return F[0]=K[0]-fe[0],F[1]=K[1]-fe[1],F[2]=K[2]-fe[2],F[3]=K[3]-fe[3],F}function ce(F,K){return F[0]===K[0]&&F[1]===K[1]&&F[2]===K[2]&&F[3]===K[3]}function Ve(F,K){var fe=F[0],Ze=F[1],tt=F[2],mt=F[3],Dt=K[0],Jt=K[1],bn=K[2],fr=K[3];return Math.abs(fe-Dt)<=U*Math.max(1,Math.abs(fe),Math.abs(Dt))&&Math.abs(Ze-Jt)<=U*Math.max(1,Math.abs(Ze),Math.abs(Jt))&&Math.abs(tt-bn)<=U*Math.max(1,Math.abs(tt),Math.abs(bn))&&Math.abs(mt-fr)<=U*Math.max(1,Math.abs(mt),Math.abs(fr))}function lt(F,K,fe){return F[0]=K[0]*fe,F[1]=K[1]*fe,F[2]=K[2]*fe,F[3]=K[3]*fe,F}function Xe(F,K,fe,Ze){return F[0]=K[0]+fe[0]*Ze,F[1]=K[1]+fe[1]*Ze,F[2]=K[2]+fe[2]*Ze,F[3]=K[3]+fe[3]*Ze,F}Math.hypot||(Math.hypot=function(){for(var F=0,K=arguments.length;K--;)F+=arguments[K]*arguments[K];return Math.sqrt(F)});var it=Ne,dt=W;function qt(){var F=new Y(2);return Y!=Float32Array&&(F[0]=0,F[1]=0),F}function en(F){var K=new Y(2);return K[0]=F[0],K[1]=F[1],K}function vn(F,K){var fe=new Y(2);return fe[0]=F,fe[1]=K,fe}function Ot(F,K){return F[0]=K[0],F[1]=K[1],F}function dn(F,K,fe){return F[0]=K,F[1]=fe,F}function _n(F,K,fe){return F[0]=K[0]+fe[0],F[1]=K[1]+fe[1],F}function ur(F,K,fe){return F[0]=K[0]-fe[0],F[1]=K[1]-fe[1],F}function sr(F,K,fe){return F[0]=K[0]*fe[0],F[1]=K[1]*fe[1],F}function Nn(F,K,fe){return F[0]=K[0]/fe[0],F[1]=K[1]/fe[1],F}function Nr(F,K){return F[0]=Math.ceil(K[0]),F[1]=Math.ceil(K[1]),F}function Si(F,K){return F[0]=Math.floor(K[0]),F[1]=Math.floor(K[1]),F}function ri(F,K,fe){return F[0]=Math.min(K[0],fe[0]),F[1]=Math.min(K[1],fe[1]),F}function Cr(F,K,fe){return F[0]=Math.max(K[0],fe[0]),F[1]=Math.max(K[1],fe[1]),F}function Di(F,K){return F[0]=Math.round(K[0]),F[1]=Math.round(K[1]),F}function yi(F,K,fe){return F[0]=K[0]*fe,F[1]=K[1]*fe,F}function tn(F,K,fe,Ze){return F[0]=K[0]+fe[0]*Ze,F[1]=K[1]+fe[1]*Ze,F}function Fn(F,K){return Math.hypot(K[0]-F[0],K[1]-F[1])}function Zn(F,K){var fe=K[0]-F[0],Ze=K[1]-F[1];return fe*fe+Ze*Ze}function Jn(F){return Math.hypot(F[0],F[1])}function zn(F){var K=F[0],fe=F[1];return K*K+fe*fe}function Gi(F,K){return F[0]=-K[0],F[1]=-K[1],F}function ar(F,K){return F[0]=1/K[0],F[1]=1/K[1],F}function Ln(F,K){var fe=K[0],Ze=K[1],tt=fe*fe+Ze*Ze;return tt>0&&(tt=1/Math.sqrt(tt)),F[0]=K[0]*tt,F[1]=K[1]*tt,F}function Oi(F,K){return F[0]*K[0]+F[1]*K[1]}function xn(F,K,fe){var Ze=K[0]*fe[1]-K[1]*fe[0];return F[0]=F[1]=0,F[2]=Ze,F}function Ft(F,K,fe,Ze){var tt=K[0],mt=K[1];return F[0]=tt+Ze*(fe[0]-tt),F[1]=mt+Ze*(fe[1]-mt),F}function Lt(F,K){K=K||1;var fe=2*re()*Math.PI;return F[0]=Math.cos(fe)*K,F[1]=Math.sin(fe)*K,F}function li(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[2]*tt,F[1]=fe[1]*Ze+fe[3]*tt,F}function ci(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[2]*tt+fe[4],F[1]=fe[1]*Ze+fe[3]*tt+fe[5],F}function $r(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[3]*tt+fe[6],F[1]=fe[1]*Ze+fe[4]*tt+fe[7],F}function Mn(F,K,fe){var Ze=K[0],tt=K[1];return F[0]=fe[0]*Ze+fe[4]*tt+fe[12],F[1]=fe[1]*Ze+fe[5]*tt+fe[13],F}function Yn(F,K,fe,Ze){var tt=K[0]-fe[0],mt=K[1]-fe[1],Dt=Math.sin(Ze),Jt=Math.cos(Ze);return F[0]=tt*Jt-mt*Dt+fe[0],F[1]=tt*Dt+mt*Jt+fe[1],F}function Kn(F,K){var fe=F[0],Ze=F[1],tt=K[0],mt=K[1],Dt=Math.sqrt(fe*fe+Ze*Ze)*Math.sqrt(tt*tt+mt*mt);return Math.acos(Math.min(Math.max(Dt&&(fe*tt+Ze*mt)/Dt,-1),1))}function Re(F){return F[0]=0,F[1]=0,F}function Ae(F){return"vec2("+F[0]+", "+F[1]+")"}function Le(F,K){return F[0]===K[0]&&F[1]===K[1]}function st(F,K){var fe=F[0],Ze=F[1],tt=K[0],mt=K[1];return Math.abs(fe-tt)<=U*Math.max(1,Math.abs(fe),Math.abs(tt))&&Math.abs(Ze-mt)<=U*Math.max(1,Math.abs(Ze),Math.abs(mt))}var xe,$e=Jn,ht=ur,wt=sr,Xt=Nn,fn=Fn,Gn=Zn,on=zn,Tr=(xe=qt(),function(F,K,fe,Ze,tt,mt){var Dt,Jt;for(K||(K=2),fe||(fe=0),Jt=Ze?Math.min(Ze*K+fe,F.length):F.length,Dt=fe;Dt<Jt;Dt+=K)xe[0]=F[Dt],xe[1]=F[Dt+1],tt(xe,xe,mt),F[Dt]=xe[0],F[Dt+1]=xe[1];return F});function Ye(){var F=new Y(3);return Y!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0),F}function Be(F){var K=new Y(3);return K[0]=F[0],K[1]=F[1],K[2]=F[2],K}function Oe(F){return Math.hypot(F[0],F[1],F[2])}function ct(F,K,fe){var Ze=new Y(3);return Ze[0]=F,Ze[1]=K,Ze[2]=fe,Ze}function Tt(F,K){return F[0]=K[0],F[1]=K[1],F[2]=K[2],F}function sn(F,K,fe,Ze){return F[0]=K,F[1]=fe,F[2]=Ze,F}function Zt(F,K,fe){return F[0]=K[0]+fe[0],F[1]=K[1]+fe[1],F[2]=K[2]+fe[2],F}function hn(F,K,fe){return F[0]=K[0]-fe[0],F[1]=K[1]-fe[1],F[2]=K[2]-fe[2],F}function Dn(F,K,fe){return F[0]=K[0]*fe[0],F[1]=K[1]*fe[1],F[2]=K[2]*fe[2],F}function $n(F,K,fe){return F[0]=K[0]/fe[0],F[1]=K[1]/fe[1],F[2]=K[2]/fe[2],F}function _r(F,K){return F[0]=Math.ceil(K[0]),F[1]=Math.ceil(K[1]),F[2]=Math.ceil(K[2]),F}function pt(F,K){return F[0]=Math.floor(K[0]),F[1]=Math.floor(K[1]),F[2]=Math.floor(K[2]),F}function Gt(F,K,fe){return F[0]=Math.min(K[0],fe[0]),F[1]=Math.min(K[1],fe[1]),F[2]=Math.min(K[2],fe[2]),F}function Wn(F,K,fe){return F[0]=Math.max(K[0],fe[0]),F[1]=Math.max(K[1],fe[1]),F[2]=Math.max(K[2],fe[2]),F}function ii(F,K){return F[0]=Math.round(K[0]),F[1]=Math.round(K[1]),F[2]=Math.round(K[2]),F}function Ai(F,K,fe){return F[0]=K[0]*fe,F[1]=K[1]*fe,F[2]=K[2]*fe,F}function Rr(F,K,fe,Ze){return F[0]=K[0]+fe[0]*Ze,F[1]=K[1]+fe[1]*Ze,F[2]=K[2]+fe[2]*Ze,F}function dr(F,K){return Math.hypot(K[0]-F[0],K[1]-F[1],K[2]-F[2])}function hr(F,K){var fe=K[0]-F[0],Ze=K[1]-F[1],tt=K[2]-F[2];return fe*fe+Ze*Ze+tt*tt}function xi(F){var K=F[0],fe=F[1],Ze=F[2];return K*K+fe*fe+Ze*Ze}function ps(F,K){return F[0]=-K[0],F[1]=-K[1],F[2]=-K[2],F}function an(F,K){return F[0]=1/K[0],F[1]=1/K[1],F[2]=1/K[2],F}function $i(F,K){var fe=K[0],Ze=K[1],tt=K[2],mt=fe*fe+Ze*Ze+tt*tt;return mt>0&&(mt=1/Math.sqrt(mt)),F[0]=K[0]*mt,F[1]=K[1]*mt,F[2]=K[2]*mt,F}function vi(F,K){return F[0]*K[0]+F[1]*K[1]+F[2]*K[2]}function Or(F,K,fe){var Ze=K[0],tt=K[1],mt=K[2],Dt=fe[0],Jt=fe[1],bn=fe[2];return F[0]=tt*bn-mt*Jt,F[1]=mt*Dt-Ze*bn,F[2]=Ze*Jt-tt*Dt,F}function bi(F,K,fe,Ze){var tt=K[0],mt=K[1],Dt=K[2];return F[0]=tt+Ze*(fe[0]-tt),F[1]=mt+Ze*(fe[1]-mt),F[2]=Dt+Ze*(fe[2]-Dt),F}function Vn(F,K,fe,Ze,tt,mt){var Dt=mt*mt,Jt=Dt*(2*mt-3)+1,bn=Dt*(mt-2)+mt,fr=Dt*(mt-1),Zr=Dt*(3-2*mt);return F[0]=K[0]*Jt+fe[0]*bn+Ze[0]*fr+tt[0]*Zr,F[1]=K[1]*Jt+fe[1]*bn+Ze[1]*fr+tt[1]*Zr,F[2]=K[2]*Jt+fe[2]*bn+Ze[2]*fr+tt[2]*Zr,F}function Gs(F,K,fe,Ze,tt,mt){var Dt=1-mt,Jt=Dt*Dt,bn=mt*mt,fr=Jt*Dt,Zr=3*mt*Jt,Ni=3*bn*Dt,wi=bn*mt;return F[0]=K[0]*fr+fe[0]*Zr+Ze[0]*Ni+tt[0]*wi,F[1]=K[1]*fr+fe[1]*Zr+Ze[1]*Ni+tt[1]*wi,F[2]=K[2]*fr+fe[2]*Zr+Ze[2]*Ni+tt[2]*wi,F}function Fr(F,K){K=K||1;var fe=2*re()*Math.PI,Ze=2*re()-1,tt=Math.sqrt(1-Ze*Ze)*K;return F[0]=Math.cos(fe)*tt,F[1]=Math.sin(fe)*tt,F[2]=Ze*K,F}function Wr(F,K,fe){var Ze=K[0],tt=K[1],mt=K[2],Dt=fe[3]*Ze+fe[7]*tt+fe[11]*mt+fe[15];return F[0]=(fe[0]*Ze+fe[4]*tt+fe[8]*mt+fe[12])/(Dt=Dt||1),F[1]=(fe[1]*Ze+fe[5]*tt+fe[9]*mt+fe[13])/Dt,F[2]=(fe[2]*Ze+fe[6]*tt+fe[10]*mt+fe[14])/Dt,F}function Un(F,K,fe){var Ze=K[0],tt=K[1],mt=K[2];return F[0]=Ze*fe[0]+tt*fe[3]+mt*fe[6],F[1]=Ze*fe[1]+tt*fe[4]+mt*fe[7],F[2]=Ze*fe[2]+tt*fe[5]+mt*fe[8],F}function Zo(F,K,fe){var Ze=fe[0],tt=fe[1],mt=fe[2],Jt=K[0],bn=K[1],fr=K[2],Zr=tt*fr-mt*bn,Ni=mt*Jt-Ze*fr,wi=Ze*bn-tt*Jt,Ci=tt*wi-mt*Ni,lo=mt*Zr-Ze*wi,Ao=Ze*Ni-tt*Zr,ee=2*fe[3];return Ni*=ee,wi*=ee,lo*=2,Ao*=2,F[0]=Jt+(Zr*=ee)+(Ci*=2),F[1]=bn+Ni+lo,F[2]=fr+wi+Ao,F}function Wi(F,K,fe,Ze){var tt=[],mt=[];return tt[0]=K[0]-fe[0],tt[1]=K[1]-fe[1],tt[2]=K[2]-fe[2],mt[0]=tt[0],mt[1]=tt[1]*Math.cos(Ze)-tt[2]*Math.sin(Ze),mt[2]=tt[1]*Math.sin(Ze)+tt[2]*Math.cos(Ze),F[0]=mt[0]+fe[0],F[1]=mt[1]+fe[1],F[2]=mt[2]+fe[2],F}function Pi(F,K,fe,Ze){var tt=[],mt=[];return tt[0]=K[0]-fe[0],tt[1]=K[1]-fe[1],tt[2]=K[2]-fe[2],mt[0]=tt[2]*Math.sin(Ze)+tt[0]*Math.cos(Ze),mt[1]=tt[1],mt[2]=tt[2]*Math.cos(Ze)-tt[0]*Math.sin(Ze),F[0]=mt[0]+fe[0],F[1]=mt[1]+fe[1],F[2]=mt[2]+fe[2],F}function Is(F,K,fe,Ze){var tt=[],mt=[];return tt[0]=K[0]-fe[0],tt[1]=K[1]-fe[1],tt[2]=K[2]-fe[2],mt[0]=tt[0]*Math.cos(Ze)-tt[1]*Math.sin(Ze),mt[1]=tt[0]*Math.sin(Ze)+tt[1]*Math.cos(Ze),mt[2]=tt[2],F[0]=mt[0]+fe[0],F[1]=mt[1]+fe[1],F[2]=mt[2]+fe[2],F}function qr(F,K){var fe=F[0],Ze=F[1],tt=F[2],mt=K[0],Dt=K[1],Jt=K[2],bn=Math.sqrt(fe*fe+Ze*Ze+tt*tt)*Math.sqrt(mt*mt+Dt*Dt+Jt*Jt),fr=bn&&vi(F,K)/bn;return Math.acos(Math.min(Math.max(fr,-1),1))}function Ts(F){return F[0]=0,F[1]=0,F[2]=0,F}function ts(F){return"vec3("+F[0]+", "+F[1]+", "+F[2]+")"}function yr(F,K){return F[0]===K[0]&&F[1]===K[1]&&F[2]===K[2]}function $s(F,K){var fe=F[0],Ze=F[1],tt=F[2],mt=K[0],Dt=K[1],Jt=K[2];return Math.abs(fe-mt)<=U*Math.max(1,Math.abs(fe),Math.abs(mt))&&Math.abs(Ze-Dt)<=U*Math.max(1,Math.abs(Ze),Math.abs(Dt))&&Math.abs(tt-Jt)<=U*Math.max(1,Math.abs(tt),Math.abs(Jt))}var F,ei=hn,ui=Dn,Ws=$n,qi=dr,qs=hr,ti=Oe,Do=xi,ao=(F=Ye(),function(K,fe,Ze,tt,mt,Dt){var Jt,bn;for(fe||(fe=3),Ze||(Ze=0),bn=tt?Math.min(tt*fe+Ze,K.length):K.length,Jt=Ze;Jt<bn;Jt+=fe)F[0]=K[Jt],F[1]=K[Jt+1],F[2]=K[Jt+2],mt(F,F,Dt),K[Jt]=F[0],K[Jt+1]=F[1],K[Jt+2]=F[2];return K})},function(M,R,s){var I=s(17).default,b=s(1);M.exports=function(k,O){if(O&&("object"===I(O)||"function"==typeof O))return O;if(void 0!==O)throw new TypeError("Derived constructors may only return object or undefined");return b(k)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(40);M.exports=function(b,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),k&&I(b,k)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(139)();M.exports=I;try{regeneratorRuntime=I}catch(b){"object"==typeof globalThis?globalThis.regeneratorRuntime=I:Function("r","regeneratorRuntime = r")(I)}},function(M,R,s){"use strict";R.a={init:function(I,b){I.fill(b)},shuffle:function(I){for(var b=I.length-1;b>0;b--){var k=Math.floor(Math.random()*(b+1)),O=[I[k],I[b]];I[b]=O[0],I[k]=O[1]}return I},toPointList:function(I){var b=I.reduce(function(k,O){var U="[".concat(O.join(","),"]");return k.push(U),k},[]);return"[".concat(b.join(",\r\n"),"]")},threshold:function(I,b,k){return I.reduce(function(O,U){return k.apply(I,[U])>=b&&O.push(U),O},[])},maxIndex:function(I){for(var b=0,k=0;k<I.length;k++)I[k]>I[b]&&(b=k);return b},max:function(I){for(var b=0,k=0;k<I.length;k++)I[k]>b&&(b=I[k]);return b},sum:function(I){for(var b=I.length,k=0;b--;)k+=I[b];return k}}},function(M,R,s){"use strict";s.d(R,"h",function(){return U}),s.d(R,"i",function(){return re}),s.d(R,"b",function(){return he}),s.d(R,"j",function(){return te}),s.d(R,"e",function(){return X}),s.d(R,"c",function(){return we}),s.d(R,"f",function(){return Je}),s.d(R,"g",function(){return qe}),s.d(R,"a",function(){return Ge}),s.d(R,"d",function(){return me});var I=s(5),b=s(9);I.a.setMatrixArrayType(Array);var k=function(J,Se){var De=[],Fe={rad:0,vec:I.c.clone([0,0])},Ne={};function Ue(Me){Ne[Me.id]=Me,De.push(Me)}function ue(){var Me,q=0;for(Me=0;Me<De.length;Me++)q+=De[Me].rad;Fe.rad=q/De.length,Fe.vec=I.c.clone([Math.cos(Fe.rad),Math.sin(Fe.rad)])}return Ue(J),ue(),{add:function(Me){Ne[Me.id]||(Ue(Me),ue())},fits:function(Me){return Math.abs(I.c.dot(Me.point.vec,Fe.vec))>Se},getPoints:function(){return De},getCenter:function(){return Fe}}},O=function(J,Se,De){return{rad:J[De],point:J,id:Se}};function U(J,Se){return{x:J,y:Se,toVec2:function(){return I.c.clone([this.x,this.y])},toVec3:function(){return I.d.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function Y(J,Se){Se||(Se=8);for(var De=J.data,Fe=De.length,Ne=8-Se,Ue=new Int32Array(1<<Se);Fe--;)Ue[De[Fe]>>Ne]++;return Ue}function re(J,Se){var De=function(Fe){var Ne,Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,ue=8-Ue;function Me(ie,Ce){for(var W=0,ce=ie;ce<=Ce;ce++)W+=Ne[ce];return W}function q(ie,Ce){for(var W=0,ce=ie;ce<=Ce;ce++)W+=ce*Ne[ce];return W}function Q(){var ie,Ce,W,ce,Ve=[0],lt=(1<<Ue)-1;Ne=Y(Fe,Ue);for(var Xe=1;Xe<lt;Xe++)0==(W=(ie=Me(0,Xe))*(Ce=Me(Xe+1,lt)))&&(W=1),ce=q(0,Xe)*Ce-q(Xe+1,lt)*ie,Ve[Xe]=ce*ce/W;return b.a.maxIndex(Ve)}return Q()<<ue}(J);return function(Fe,Ne,Ue){Ue||(Ue=Fe);for(var ue=Fe.data,Me=ue.length,q=Ue.data;Me--;)q[Me]=ue[Me]<Ne?1:0}(J,De,Se),De}function he(J,Se,De){var Fe,Ne,Ue,ue,Me=[];function q(Q){var ne=!1;for(Ne=0;Ne<Me.length;Ne++)(Ue=Me[Ne]).fits(Q)&&(Ue.add(Q),ne=!0);return ne}for(De||(De="rad"),Fe=0;Fe<J.length;Fe++)q(ue=O(J[Fe],Fe,De))||Me.push(k(ue,Se));return Me}function te(J,Se,De){var Fe,Ne,Ue,ue,Me=0,q=0,Q=[];for(Fe=0;Fe<Se;Fe++)Q[Fe]={score:0,item:null};for(Fe=0;Fe<J.length;Fe++)if((Ne=De.apply(this,[J[Fe]]))>q)for((Ue=Q[Me]).score=Ne,Ue.item=J[Fe],q=Number.MAX_VALUE,ue=0;ue<Se;ue++)Q[ue].score<q&&(q=Q[ue].score,Me=ue);return Q}function X(J,Se,De){for(var Fe,Ne=0,Ue=Se.x,ue=Math.floor(J.length/4),Me=Se.x/2,q=0,Q=Se.x;Ue<ue;){for(Fe=0;Fe<Me;Fe++)De[q]=(.299*J[4*Ne+0]+.587*J[4*Ne+1]+.114*J[4*Ne+2]+(.299*J[4*(Ne+1)+0]+.587*J[4*(Ne+1)+1]+.114*J[4*(Ne+1)+2])+(.299*J[4*Ue+0]+.587*J[4*Ue+1]+.114*J[4*Ue+2])+(.299*J[4*(Ue+1)+0]+.587*J[4*(Ue+1)+1]+.114*J[4*(Ue+1)+2]))/4,q++,Ne+=2,Ue+=2;Ne+=Q,Ue+=Q}}function we(J,Se,De){var Fe=J.length/4|0;if(De&&!0===De.singleChannel)for(var Ne=0;Ne<Fe;Ne++)Se[Ne]=J[4*Ne+0];else for(var Ue=0;Ue<Fe;Ue++)Se[Ue]=.299*J[4*Ue+0]+.587*J[4*Ue+1]+.114*J[4*Ue+2]}function Je(J,Se){for(var De=J.data,Fe=J.size.x,Ne=Se.data,Ue=0,ue=Fe,Me=De.length,q=Fe/2,Q=0;ue<Me;){for(var ne=0;ne<q;ne++)Ne[Q]=Math.floor((De[Ue]+De[Ue+1]+De[ue]+De[ue+1])/4),Q++,Ue+=2,ue+=2;Ue+=Fe,ue+=Fe}}function qe(J){var Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],De=J[0],Ne=J[2],Ue=Ne*J[1],ue=Ue*(1-Math.abs(De/60%2-1)),Me=Ne-Ue,q=0,Q=0,ne=0;return De<60?(q=Ue,Q=ue):De<120?(q=ue,Q=Ue):De<180?(Q=Ue,ne=ue):De<240?(Q=ue,ne=Ue):De<300?(q=ue,ne=Ue):De<360&&(q=Ue,ne=ue),Se[0]=255*(q+Me)|0,Se[1]=255*(Q+Me)|0,Se[2]=255*(ne+Me)|0,Se}function je(J){for(var Se=[],De=[],Fe=1;Fe<Math.sqrt(J)+1;Fe++)J%Fe==0&&(De.push(Fe),Fe!==J/Fe&&Se.unshift(Math.floor(J/Fe)));return De.concat(Se)}function Ge(J,Se){var De,Fe=je(Se.x),Ne=je(Se.y),Ue=Math.max(Se.x,Se.y),ue=function(W,ce){for(var Ve=0,lt=0,Xe=[];Ve<W.length&&lt<ce.length;)W[Ve]===ce[lt]?(Xe.push(W[Ve]),Ve++,lt++):W[Ve]>ce[lt]?lt++:Ve++;return Xe}(Fe,Ne),Me=[8,10,15,20,32,60,80],q={"x-small":5,small:4,medium:3,large:2,"x-large":1},Q=q[J]||q.medium,ne=Me[Q],ie=Math.floor(Ue/ne);function Ce(W){for(var ce=0,Ve=W[Math.floor(W.length/2)];ce<W.length-1&&W[ce]<ie;)ce++;return ce>0&&(Ve=Math.abs(W[ce]-ie)>Math.abs(W[ce-1]-ie)?W[ce-1]:W[ce]),ie/Ve<Me[Q+1]/Me[Q]&&ie/Ve>Me[Q-1]/Me[Q]?{x:Ve,y:Ve}:null}return(De=Ce(ue))||(De=Ce(je(Ue)))||(De=Ce(je(ie*ne))),De}I.a.setMatrixArrayType(Array);var Ie={top:function(J,Se){return"%"===J.unit?Math.floor(Se.height*(J.value/100)):null},right:function(J,Se){return"%"===J.unit?Math.floor(Se.width-Se.width*(J.value/100)):null},bottom:function(J,Se){return"%"===J.unit?Math.floor(Se.height-Se.height*(J.value/100)):null},left:function(J,Se){return"%"===J.unit?Math.floor(Se.width*(J.value/100)):null}};function me(J,Se,De){var Fe={width:J,height:Se},Ne=Object.keys(De).reduce(function(Ue,ue){var Q,Me=(Q=De[ue],{value:parseFloat(Q),unit:(Q.indexOf("%"),"%")}),q=Ie[ue](Me,Fe);return Ue[ue]=q,Ue},{});return{sx:Ne.left,sy:Ne.top,sw:Ne.right-Ne.left,sh:Ne.bottom-Ne.top}}},function(M,R,s){"use strict";var I=s(61),b=s.n(I),k=s(3),O=s.n(k),U=s(4),Y=s.n(U),re=s(0),he=s.n(re),te=s(5),X=s(9),we=s(10);function Je(je){if(je<0)throw new Error("expected positive number, received ".concat(je))}te.a.setMatrixArrayType(Array);var qe=function(){function je(Ge,Ie){var me=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,J=arguments.length>3?arguments[3]:void 0;O()(this,je),he()(this,"data",void 0),he()(this,"size",void 0),he()(this,"indexMapping",void 0),Ie?this.data=Ie:(this.data=new me(Ge.x*Ge.y),J&&X.a.init(this.data,0)),this.size=Ge}return Y()(je,[{key:"inImageWithBorder",value:function(Ge){var Ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Je(Ie),Ge.x>=0&&Ge.y>=0&&Ge.x<this.size.x+2*Ie&&Ge.y<this.size.y+2*Ie}},{key:"subImageAsCopy",value:function(Ge,Ie){Je(Ie.x),Je(Ie.y);for(var me=Ge.size,J=me.x,Se=me.y,De=0;De<J;De++)for(var Fe=0;Fe<Se;Fe++)Ge.data[Fe*J+De]=this.data[(Ie.y+Fe)*this.size.x+Ie.x+De];return Ge}},{key:"get",value:function(Ge,Ie){return this.data[Ie*this.size.x+Ge]}},{key:"getSafe",value:function(Ge,Ie){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var me=0;me<this.size.x;me++)this.indexMapping.x[me]=me,this.indexMapping.x[me+this.size.x]=me;for(var J=0;J<this.size.y;J++)this.indexMapping.y[J]=J,this.indexMapping.y[J+this.size.y]=J}return this.data[this.indexMapping.y[Ie+this.size.y]*this.size.x+this.indexMapping.x[Ge+this.size.x]]}},{key:"set",value:function(Ge,Ie,me){return this.data[Ie*this.size.x+Ge]=me,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var Ge=this.size,Ie=Ge.x,me=Ge.y,J=0;J<Ie;J++)this.data[J]=this.data[(me-1)*Ie+J]=0;for(var Se=1;Se<me-1;Se++)this.data[Se*Ie]=this.data[Se*Ie+(Ie-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(Ge){var Ie,me,J,Se,De,Fe,Ne,Ue,ue,Me,q=this.data,Q=this.size.y,ne=this.size.x,ie=[],Ce=[],W=Math.PI,ce=W/4;if(Ge<=0)return Ce;for(De=0;De<Ge;De++)ie[De]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(me=0;me<Q;me++)for(Se=me*me,Ie=0;Ie<ne;Ie++)(J=q[me*ne+Ie])>0&&((Fe=ie[J-1]).m00+=1,Fe.m01+=me,Fe.m10+=Ie,Fe.m11+=Ie*me,Fe.m02+=Se,Fe.m20+=Ie*Ie);for(De=0;De<Ge;De++)Fe=ie[De],isNaN(Fe.m00)||0===Fe.m00||(Me=(Fe.m02/Fe.m00-(ue=Fe.m01/Fe.m00)*ue-(Fe.m20/Fe.m00-(Ue=Fe.m10/Fe.m00)*Ue))/(2*(Ne=Fe.m11/Fe.m00-Ue*ue)),Me=.5*Math.atan(Me)+(Ne>=0?ce:-ce)+W,Fe.theta=(180*Me/W+90)%180-90,Fe.theta<0&&(Fe.theta+=180),Fe.rad=Me>W?Me-W:Me,Fe.vec=te.c.clone([Math.cos(Me),Math.sin(Me)]),Ce.push(Fe));return Ce}},{key:"getAsRGBA",value:function(){for(var Ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,Ie=new Uint8ClampedArray(4*this.size.x*this.size.y),me=0;me<this.size.y;me++)for(var J=0;J<this.size.x;J++){var Se=me*this.size.x+J,De=this.get(J,me)*Ge;Ie[4*Se+0]=De,Ie[4*Se+1]=De,Ie[4*Se+2]=De,Ie[4*Se+3]=255}return Ie}},{key:"show",value:function(Ge){var Ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var me=Ge.getContext("2d");if(!me)throw new Error("Unable to get canvas context");var J=me.getImageData(0,0,Ge.width,Ge.height),Se=this.getAsRGBA(Ie);Ge.width=this.size.x,Ge.height=this.size.y;var De=new ImageData(Se,J.width,J.height);me.putImageData(De,0,0)}},{key:"overlay",value:function(Ge,Ie,me){var J=Ie<0||Ie>360?360:Ie,Se=[0,1,1],De=[0,0,0],Fe=[255,255,255],Ne=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var Ue=Ge.getContext("2d");if(!Ue)throw new Error("Unable to get canvas context");for(var ue=Ue.getImageData(me.x,me.y,this.size.x,this.size.y),Me=ue.data,q=this.data.length;q--;){Se[0]=this.data[q]*J;var Q=4*q,ne=Se[0]<=0?Fe:Se[0]>=360?Ne:Object(we.g)(Se,De),ie=b()(ne,3);Me[Q]=ie[0],Me[Q+1]=ie[1],Me[Q+2]=ie[2],Me[Q+3]=255}Ue.putImageData(ue,me.x,me.y)}}]),je}();R.a=qe},function(M,R){function s(I,b,k,O,U,Y,re){try{var he=I[Y](re),te=he.value}catch(X){return void k(X)}he.done?b(te):Promise.resolve(te).then(O,U)}M.exports=function(I){return function(){var b=this,k=arguments;return new Promise(function(O,U){var Y=I.apply(b,k);function re(te){s(Y,O,U,re,he,"next",te)}function he(te){s(Y,O,U,re,he,"throw",te)}re(void 0)})}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(140);function b(){return"undefined"!=typeof Reflect&&Reflect.get?(M.exports=b=Reflect.get.bind(),M.exports.__esModule=!0,M.exports.default=M.exports):(M.exports=b=function(k,O,U){var Y=I(k,O);if(Y){var re=Object.getOwnPropertyDescriptor(Y,O);return re.get?re.get.call(arguments.length<3?k:U):re.value}},M.exports.__esModule=!0,M.exports.default=M.exports),b.apply(this,arguments)}M.exports=b,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(s){var I=typeof s;return null!=s&&("object"==I||"function"==I)}},function(M,R){M.exports=Array.isArray},function(M,R,s){"use strict";R.a={drawRect:function(I,b,k,O){k.strokeStyle=O.color,k.fillStyle=O.color,k.lineWidth=O.lineWidth||1,k.beginPath(),k.strokeRect(I.x,I.y,b.x,b.y)},drawPath:function(I,b,k,O){k.strokeStyle=O.color,k.fillStyle=O.color,k.lineWidth=O.lineWidth,k.beginPath(),k.moveTo(I[0][b.x],I[0][b.y]);for(var U=1;U<I.length;U++)k.lineTo(I[U][b.x],I[U][b.y]);k.closePath(),k.stroke()},drawImage:function(I,b,k){var O=k.getImageData(0,0,b.x,b.y),U=O.data,Y=U.length,re=I.length;if(Y/re!=4)return!1;for(;re--;){var he=I[re];U[--Y]=255,U[--Y]=he,U[--Y]=he,U[--Y]=he}return k.putImageData(O,0,0),!0}}},function(M,R){function s(I){return M.exports=s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},M.exports.__esModule=!0,M.exports.default=M.exports,s(I)}M.exports=s,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(73),b=s(128)(function(k,O,U){I(k,O,U)});M.exports=b},function(M,R,s){var I=s(44),b="object"==typeof self&&self&&self.Object===Object&&self,k=I||b||Function("return this")();M.exports=k},function(M,R){M.exports=function(s){return null!=s&&"object"==typeof s}},function(M,R,s){"use strict";R.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(I,b){var k,O=I.data,U=b.data,Y=this.searchDirections,re=I.size.x;function he(X,we,Je,qe){var je,Ge,Ie;for(je=0;je<Y.length;je++){if(O[k=(Ge=X.cy+Y[X.dir][0])*re+(Ie=X.cx+Y[X.dir][1])]===we&&(0===U[k]||U[k]===Je))return U[k]=Je,X.cy=Ge,X.cx=Ie,!0;0===U[k]&&(U[k]=qe),X.dir=(X.dir+1)%8}return!1}function te(X,we,Je){return{dir:Je,x:X,y:we,next:null,prev:null}}return{trace:function(X,we,Je,qe){return he(X,we,Je,qe)},contourTracing:function(X,we,Je,qe,je){return function(Ge,Ie,me,J,Se){var De,Fe,Ne,Ue=null,ue={cx:Ie,cy:Ge,dir:0};if(he(ue,J,me,Se)){De=Ue=te(Ie,Ge,ue.dir),Ne=ue.dir,(Fe=te(ue.cx,ue.cy,0)).prev=De,De.next=Fe,Fe.next=null,De=Fe;var Me=I.size.x*I.size.y,q=0;do{ue.dir=(ue.dir+6)%8,he(ue,J,me,Se),Ne!==ue.dir?(De.dir=ue.dir,(Fe=te(ue.cx,ue.cy,0)).prev=De,De.next=Fe,Fe.next=null,De=Fe):(De.dir=Ne,De.x=ue.cx,De.y=ue.cy),Ne=ue.dir}while((ue.cx!==Ie||ue.cy!==Ge)&&++q<Me);Ue.prev=De.prev,De.prev.next=Ue}return Ue}(X,we,Je,qe,je)}}}}},function(M,R,s){var I=s(27),b=s(86),k=s(87),O=I?I.toStringTag:void 0;M.exports=function(U){return null==U?void 0===U?"[object Undefined]":"[object Null]":O&&O in Object(U)?b(U):k(U)}},function(M,R,s){"use strict";(function(I){var b,k,O,U,Y,re,he,te,X,we,Je=s(5),qe=s(11),je=s(10),Ge=s(9),Ie=(s(16),s(64)),me=s(21),J=s(65);Je.a.setMatrixArrayType(Array);var Se,De,Fe={ctx:{binary:null},dom:{binary:null}},Ne={x:0,y:0};function Ue(q){var Q,ne,ie,Ce,W,ce,Ve,lt=X.size.x,Xe=X.size.y,it=-X.size.x,dt=-X.size.y;for(Q=0,ne=0;ne<q.length;ne++)Q+=(Ce=q[ne]).rad;for((Q=(180*(Q/=q.length)/Math.PI+90)%180-90)<0&&(Q+=180),Q=(180-Q)*Math.PI/180,W=Je.b.copy(Je.b.create(),[Math.cos(Q),Math.sin(Q),-Math.sin(Q),Math.cos(Q)]),ne=0;ne<q.length;ne++)for(Ce=q[ne],ie=0;ie<4;ie++)Je.c.transformMat2(Ce.box[ie],Ce.box[ie],W);for(ne=0;ne<q.length;ne++)for(Ce=q[ne],ie=0;ie<4;ie++)Ce.box[ie][0]<lt&&(lt=Ce.box[ie][0]),Ce.box[ie][0]>it&&(it=Ce.box[ie][0]),Ce.box[ie][1]<Xe&&(Xe=Ce.box[ie][1]),Ce.box[ie][1]>dt&&(dt=Ce.box[ie][1]);for(ce=[[lt,Xe],[it,Xe],[it,dt],[lt,dt]],Ve=b.halfSample?2:1,W=Je.b.invert(W,W),ie=0;ie<4;ie++)Je.c.transformMat2(ce[ie],ce[ie],W);for(ie=0;ie<4;ie++)Je.c.scale(ce[ie],ce[ie],Ve);return ce}function ue(q,Q){X.subImageAsCopy(U,Object(je.h)(q,Q)),De.skeletonize()}function Me(q,Q,ne,ie){var Ce,W,ce,Ve,lt=[],Xe=[],it=Math.ceil(we.x/3);if(q.length>=2){for(Ce=0;Ce<q.length;Ce++)q[Ce].m00>it&&lt.push(q[Ce]);if(lt.length>=2){for(ce=function(en){var vn=Object(je.b)(en,.9),Ot=Object(je.j)(vn,1,function(sr){return sr.getPoints().length}),dn=[],_n=[];if(1===Ot.length){dn=Ot[0].item.getPoints();for(var ur=0;ur<dn.length;ur++)_n.push(dn[ur].point)}return _n}(lt),W=0,Ce=0;Ce<ce.length;Ce++){var dt,qt;W+=null!==(dt=null===(qt=ce[Ce])||void 0===qt?void 0:qt.rad)&&void 0!==dt?dt:0}ce.length>1&&ce.length>=lt.length/4*3&&ce.length>q.length/4&&(W/=ce.length,Ve={index:Q[1]*Ne.x+Q[0],pos:{x:ne,y:ie},box:[Je.c.clone([ne,ie]),Je.c.clone([ne+U.size.x,ie]),Je.c.clone([ne+U.size.x,ie+U.size.y]),Je.c.clone([ne,ie+U.size.y])],moments:ce,rad:W,vec:Je.c.clone([Math.cos(W),Math.sin(W)])},Xe.push(Ve))}}return Xe}R.a={init:function(q,Q){b=Q,Se=q,function(){k=b.halfSample?new qe.a({x:Se.size.x/2|0,y:Se.size.y/2|0}):Se,we=Object(je.a)(b.patchSize,k.size),Ne.x=k.size.x/we.x|0,Ne.y=k.size.y/we.y|0,X=new qe.a(k.size,void 0,Uint8Array,!1),Y=new qe.a(we,void 0,Array,!0);var ne=new ArrayBuffer(65536);U=new qe.a(we,new Uint8Array(ne,0,we.x*we.y)),O=new qe.a(we,new Uint8Array(ne,we.x*we.y*3,we.x*we.y),void 0,!0),De=Object(J.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:I,{size:we.x},ne),te=new qe.a({x:k.size.x/U.size.x|0,y:k.size.y/U.size.y|0},void 0,Array,!0),re=new qe.a(te.size,void 0,void 0,!0),he=new qe.a(te.size,void 0,Int32Array,!0)}(),function(){if(!b.useWorker&&"undefined"!=typeof document){Fe.dom.binary=document.createElement("canvas"),Fe.dom.binary.className="binaryBuffer";var ne=!!b.willReadFrequently;console.warn("* initCanvas willReadFrequently",ne,b),Fe.ctx.binary=Fe.dom.binary.getContext("2d",{willReadFrequently:ne}),Fe.dom.binary.width=X.size.x,Fe.dom.binary.height=X.size.y}}()},locate:function(){b.halfSample&&Object(je.f)(Se,k),Object(je.i)(k,X),X.zeroBorder();var q=function(){var ie,Ce,W,ce,Ve,lt,Xe=[];for(ie=0;ie<Ne.x;ie++)for(Ce=0;Ce<Ne.y;Ce++)ue(W=U.size.x*ie,ce=U.size.y*Ce),O.zeroBorder(),Ge.a.init(Y.data,0),lt=Ie.a.create(O,Y).rasterize(0),Ve=Y.moments(lt.count),Xe=Xe.concat(Me(Ve,[ie,Ce],W,ce));return Xe}();if(q.length<Ne.x*Ne.y*.05)return null;var Q=function(ie){var Ce,W,ce=0,Ve=0;function lt(){var it;for(it=0;it<he.data.length;it++)if(0===he.data[it]&&1===re.data[it])return it;return he.data.length}function Xe(it){var en,vn,Ot,dn=it%he.size.x,_n=it/he.size.x|0;if(it<he.data.length)for(en=te.data[it],he.data[it]=ce,Ot=0;Ot<me.a.searchDirections.length;Ot++)0!==re.data[vn=(_n+me.a.searchDirections[Ot][0])*he.size.x+(dn+me.a.searchDirections[Ot][1])]?0===he.data[vn]&&Math.abs(Je.c.dot(te.data[vn].vec,en.vec))>.95&&Xe(vn):he.data[vn]=Number.MAX_VALUE}for(Ge.a.init(re.data,0),Ge.a.init(he.data,0),Ge.a.init(te.data,null),Ce=0;Ce<ie.length;Ce++)te.data[(W=ie[Ce]).index]=W,re.data[W.index]=1;for(re.zeroBorder();(Ve=lt())<he.data.length;)ce++,Xe(Ve);return ce}(q);if(Q<1)return null;var ne=function(ie){var Ce,W,ce=[];for(Ce=0;Ce<ie;Ce++)ce.push(0);for(W=he.data.length;W--;)he.data[W]>0&&ce[he.data[W]-1]++;return(ce=ce.map(function(Ve,lt){return{val:Ve,label:lt+1}})).sort(function(Ve,lt){return lt.val-Ve.val}),ce.filter(function(Ve){return Ve.val>=5})}(Q);return 0===ne.length?null:function(ie,Ce){var W,ce,lt,Xe=[],it=[];for(W=0;W<ie.length;W++){for(ce=he.data.length,Xe.length=0;ce--;)he.data[ce]===ie[W].label&&Xe.push(te.data[ce]);(lt=Ue(Xe))&&it.push(lt)}return it}(ne)},checkImageConstraints:function(q,Q){var ne,ie,Ce=q.getWidth(),W=q.getHeight(),ce=Q.halfSample?.5:1;q.getConfig().area&&(ie=Object(je.d)(Ce,W,q.getConfig().area),q.setTopRight({x:ie.sx,y:ie.sy}),q.setCanvasSize({x:Ce,y:W}),Ce=ie.sw,W=ie.sh);var Ve={x:Math.floor(Ce*ce),y:Math.floor(W*ce)};if(ne=Object(je.a)(Q.patchSize,Ve),q.setWidth(Math.floor(Math.floor(Ve.x/ne.x)*(1/ce)*ne.x)),q.setHeight(Math.floor(Math.floor(Ve.y/ne.y)*(1/ce)*ne.y)),q.getWidth()%ne.x==0&&q.getHeight()%ne.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(Ce," )and height (").concat(W,") must a multiple of ").concat(ne.x))}}}).call(this,s(45))},function(M,R,s){var I=s(75),b=s(76),k=s(77),O=s(78),U=s(79);function Y(re){var he=-1,te=null==re?0:re.length;for(this.clear();++he<te;){var X=re[he];this.set(X[0],X[1])}}Y.prototype.clear=I,Y.prototype.delete=b,Y.prototype.get=k,Y.prototype.has=O,Y.prototype.set=U,M.exports=Y},function(M,R,s){var I=s(26);M.exports=function(b,k){for(var O=b.length;O--;)if(I(b[O][0],k))return O;return-1}},function(M,R){M.exports=function(s,I){return s===I||s!=s&&I!=I}},function(M,R,s){var I=s(19).Symbol;M.exports=I},function(M,R,s){var I=s(34)(Object,"create");M.exports=I},function(M,R,s){var I=s(100);M.exports=function(b,k){var O=b.__data__;return I(k)?O["string"==typeof k?"string":"hash"]:O.map}},function(M,R,s){var I=s(115),b=s(20),k=Object.prototype,O=k.hasOwnProperty,U=k.propertyIsEnumerable,Y=I(function(){return arguments}())?I:function(re){return b(re)&&O.call(re,"callee")&&!U.call(re,"callee")};M.exports=Y},function(M,R){var s=/^(?:0|[1-9]\d*)$/;M.exports=function(I,b){var k=typeof I;return!!(b=null==b?9007199254740991:b)&&("number"==k||"symbol"!=k&&s.test(I))&&I>-1&&I%1==0&&I<b}},function(M,R,s){var I=s(15),b=s(147),k=s(148),O=s(151);M.exports=function(U,Y){return I(U)?U:b(U,Y)?[U]:k(O(U))}},function(M,R,s){var I=s(141),b=s(142),k=s(59),O=s(143);M.exports=function(U){return I(U)||b(U)||k(U)||O()},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(85),b=s(91);M.exports=function(k,O){var U=b(k,O);return I(U)?U:void 0}},function(M,R,s){var I=s(22),b=s(14);M.exports=function(k){if(!b(k))return!1;var O=I(k);return"[object Function]"==O||"[object GeneratorFunction]"==O||"[object AsyncFunction]"==O||"[object Proxy]"==O}},function(M,R,s){var I=s(48);M.exports=function(b,k,O){"__proto__"==k&&I?I(b,k,{configurable:!0,enumerable:!0,value:O,writable:!0}):b[k]=O}},function(M,R){M.exports=function(s){return s.webpackPolyfill||(s.deprecate=function(){},s.paths=[],s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),s.webpackPolyfill=1),s}},function(M,R,s){var I=s(35),b=s(39);M.exports=function(k){return null!=k&&b(k.length)&&!I(k)}},function(M,R){M.exports=function(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991}},function(M,R){function s(I,b){return M.exports=s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,O){return k.__proto__=O,k},M.exports.__esModule=!0,M.exports.default=M.exports,s(I,b)}M.exports=s,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(22),b=s(20);M.exports=function(k){return"symbol"==typeof k||b(k)&&"[object Symbol]"==I(k)}},function(M,R,s){var I=s(41);M.exports=function(b){if("string"==typeof b||I(b))return b;var k=b+"";return"0"==k&&1/b==-1/0?"-0":k}},function(M,R,s){var I=s(34)(s(19),"Map");M.exports=I},function(M,R,s){(function(I){M.exports="object"==typeof I&&I&&I.Object===Object&&I}).call(this,s(45))},function(M,R){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(I){"object"==typeof window&&(s=window)}M.exports=s},function(M,R,s){var I=s(92),b=s(99),k=s(101),O=s(102),U=s(103);function Y(re){var he=-1,te=null==re?0:re.length;for(this.clear();++he<te;){var X=re[he];this.set(X[0],X[1])}}Y.prototype.clear=I,Y.prototype.delete=b,Y.prototype.get=k,Y.prototype.has=O,Y.prototype.set=U,M.exports=Y},function(M,R,s){var I=s(36),b=s(26);M.exports=function(k,O,U){(void 0!==U&&!b(k[O],U)||void 0===U&&!(O in k))&&I(k,O,U)}},function(M,R,s){var I=s(34),b=function(){try{var k=I(Object,"defineProperty");return k({},"",{}),k}catch(O){}}();M.exports=b},function(M,R,s){var I=s(114)(Object.getPrototypeOf,Object);M.exports=I},function(M,R){var s=Object.prototype;M.exports=function(I){var b=I&&I.constructor;return I===("function"==typeof b&&b.prototype||s)}},function(M,R,s){(function(I){var b=s(19),k=s(117),O=R&&!R.nodeType&&R,U=O&&"object"==typeof I&&I&&!I.nodeType&&I,Y=U&&U.exports===O?b.Buffer:void 0;I.exports=(Y?Y.isBuffer:void 0)||k}).call(this,s(37)(M))},function(M,R,s){var I=s(119),b=s(120),k=s(121),O=k&&k.isTypedArray,U=O?b(O):I;M.exports=U},function(M,R){M.exports=function(s,I){if(("constructor"!==I||"function"!=typeof s[I])&&"__proto__"!=I)return s[I]}},function(M,R,s){var I=s(36),b=s(26),k=Object.prototype.hasOwnProperty;M.exports=function(O,U,Y){var re=O[U];k.call(O,U)&&b(re,Y)&&(void 0!==Y||U in O)||I(O,U,Y)}},function(M,R,s){var I=s(124),b=s(126),k=s(38);M.exports=function(O){return k(O)?I(O,!0):b(O)}},function(M,R){M.exports=function(s){return s}},function(M,R,s){var I=s(130),b=Math.max;M.exports=function(k,O,U){return O=b(void 0===O?k.length-1:O,0),function(){for(var Y=arguments,re=-1,he=b(Y.length-O,0),te=Array(he);++re<he;)te[re]=Y[O+re];re=-1;for(var X=Array(O+1);++re<O;)X[re]=Y[re];return X[O]=U(te),I(k,this,X)}}},function(M,R,s){var I=s(131),b=s(133)(I);M.exports=b},function(M,R,s){var I=s(60);M.exports=function(b,k){if(b){if("string"==typeof b)return I(b,k);var O=Object.prototype.toString.call(b).slice(8,-1);return"Object"===O&&b.constructor&&(O=b.constructor.name),"Map"===O||"Set"===O?Array.from(b):"Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?I(b,k):void 0}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(s,I){(null==I||I>s.length)&&(I=s.length);for(var b=0,k=new Array(I);b<I;b++)k[b]=s[b];return k},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(136),b=s(137),k=s(59),O=s(138);M.exports=function(U,Y){return I(U)||b(U,Y)||k(U,Y)||O()},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(144),b=s(158)(function(k,O){return null==k?{}:I(k,O)});M.exports=b},function(M,R,s){var I=s(2),b=s(40),k=s(163),O=s(164);function U(Y){var re="function"==typeof Map?new Map:void 0;return M.exports=U=function(he){if(null===he||!k(he))return he;if("function"!=typeof he)throw new TypeError("Super expression must either be null or a function");if(void 0!==re){if(re.has(he))return re.get(he);re.set(he,te)}function te(){return O(he,arguments,I(this).constructor)}return te.prototype=Object.create(he.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),b(te,he)},M.exports.__esModule=!0,M.exports.default=M.exports,U(Y)}M.exports=U,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){"use strict";var I=s(21),b={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(k,O){var U=k.data,Y=O.data,re=k.size.x,he=k.size.y,te=I.a.create(k,O);return{rasterize:function(X){var we,Je,qe,je,Ge,Ie,me,J,Se,De,Fe,Ne,Ue=[],ue=0;for(Ne=0;Ne<400;Ne++)Ue[Ne]=0;for(Ue[0]=U[0],Se=null,Ie=1;Ie<he-1;Ie++)for(je=0,Je=Ue[0],Ge=1;Ge<re-1;Ge++)if(0===Y[Fe=Ie*re+Ge])if((we=U[Fe])!==Je){if(0===je)Ue[qe=ue+1]=we,Je=we,null!==(me=te.contourTracing(Ie,Ge,qe,we,b.DIR.OUTSIDE_EDGE))&&(ue++,je=qe,(J=b.createContour2D()).dir=b.CONTOUR_DIR.CW_DIR,J.index=je,J.firstVertex=me,J.nextpeer=Se,J.insideContours=null,null!==Se&&(Se.prevpeer=J),Se=J);else if(null!==(me=te.contourTracing(Ie,Ge,b.DIR.INSIDE_EDGE,we,je))){for((J=b.createContour2D()).firstVertex=me,J.insideContours=null,J.dir=0===X?b.CONTOUR_DIR.CCW_DIR:b.CONTOUR_DIR.CW_DIR,J.index=X,De=Se;null!==De&&De.index!==je;)De=De.nextpeer;null!==De&&(J.nextpeer=De.insideContours,null!==De.insideContours&&(De.insideContours.prevpeer=J),De.insideContours=J)}}else Y[Fe]=je;else Y[Fe]===b.DIR.OUTSIDE_EDGE||Y[Fe]===b.DIR.INSIDE_EDGE?(je=0,Je=Y[Fe]===b.DIR.INSIDE_EDGE?U[Fe]:Ue[0]):Je=Ue[je=Y[Fe]];for(De=Se;null!==De;)De.index=X,De=De.nextpeer;return{cc:Se,count:ue}},debug:{drawContour:function(X,we){var Je,qe,je,Ge=X.getContext("2d"),Ie=we;for(Ge.strokeStyle="red",Ge.fillStyle="red",Ge.lineWidth=1,Je=null!==Ie?Ie.insideContours:null;null!==Ie;){switch(null!==Je?(qe=Je,Je=Je.nextpeer):(qe=Ie,Je=null!==(Ie=Ie.nextpeer)?Ie.insideContours:null),qe.dir){case b.CONTOUR_DIR.CW_DIR:Ge.strokeStyle="red";break;case b.CONTOUR_DIR.CCW_DIR:Ge.strokeStyle="blue";break;case b.CONTOUR_DIR.UNKNOWN_DIR:Ge.strokeStyle="green"}je=qe.firstVertex,Ge.beginPath(),Ge.moveTo(je.x,je.y);do{Ge.lineTo((je=je.next).x,je.y)}while(je!==qe.firstVertex);Ge.stroke()}}}}}};R.a=b},function(M,R,s){"use strict";R.a=function(I,b,k){var O=new I.Uint8Array(k),U=0|b.size,Y=I.Math.imul;function re(Ie,me){Ie|=0,me|=0;var J=0,Se=0,Fe=0,Ne=0,Ue=0,ue=0,Me=0;for(J=1;(0|J)<(U-1|0);J=J+1|0)for(Me=Me+U|0,Se=1;(0|Se)<(U-1|0);Se=Se+1|0)O[me+Me+Se|0]=5==(0|(0|O[Ie+(Fe=Me-U|0)+(Ue=Se-1|0)|0])+(0|O[Ie+Fe+(ue=Se+1|0)|0])+(0|O[Ie+Me+Se|0])+(0|O[Ie+(Ne=Me+U|0)+Ue|0])+(0|O[Ie+Ne+ue|0]))?1:0}function he(Ie,me,J){Ie|=0,me|=0,J|=0;var Se=0;for(Se=0|Y(U,U);(0|Se)>0;)O[J+(Se=Se-1|0)|0]=(0|O[Ie+Se|0])-(0|O[me+Se|0])|0}function te(Ie,me,J){Ie|=0,me|=0,J|=0;var Se=0;for(Se=0|Y(U,U);(0|Se)>0;)O[J+(Se=Se-1|0)|0]=0|O[Ie+Se|0]|O[me+Se|0]|0}function X(Ie){Ie|=0;var me=0,J=0;for(J=0|Y(U,U);(0|J)>0;)me=(0|me)+(0|O[Ie+(J=J-1|0)|0])|0;return 0|me}function Je(Ie,me){Ie|=0,me|=0;var J=0,Se=0,Fe=0,Ne=0,Ue=0,ue=0,Me=0;for(J=1;(0|J)<(U-1|0);J=J+1|0)for(Me=Me+U|0,Se=1;(0|Se)<(U-1|0);Se=Se+1|0)O[me+Me+Se|0]=(0|(0|O[Ie+(Fe=Me-U|0)+(Ue=Se-1|0)|0])+(0|O[Ie+Fe+(ue=Se+1|0)|0])+(0|O[Ie+Me+Se|0])+(0|O[Ie+(Ne=Me+U|0)+Ue|0])+(0|O[Ie+Ne+ue|0]))>0?1:0}function qe(Ie,me){Ie|=0,me|=0;var J=0;for(J=0|Y(U,U);(0|J)>0;)O[me+(J=J-1|0)|0]=0|O[Ie+J|0]}return{skeletonize:function(){var me,J,Se,Fe=0;(function(Ie,me){Ie|=0,me|=0;var J=0;for(J=0|Y(U,U);(0|J)>0;)O[Ie+(J=J-1|0)|0]=me})(Se=(J=(me=0|Y(U,U))+me|0)+me|0,0),function(Ie){Ie|=0;var me=0,J=0;for(me=0;(0|me)<(U-1|0);me=me+1|0)O[Ie+me|0]=0,O[Ie+J|0]=0,O[Ie+(J=J+U-1|0)|0]=0,J=J+1|0;for(me=0;(0|me)<(0|U);me=me+1|0)O[Ie+J|0]=0,J=J+1|0}(0);do{re(0,me),Je(me,J),he(0,J,J),te(Se,J,Se),qe(me,0),Fe=0==(0|X(0))|0}while(!Fe)}}}},,,,,,,function(M,R,s){M.exports=s(166)},function(M,R,s){var I=s(74),b=s(47),k=s(104),O=s(106),U=s(14),Y=s(55),re=s(53);M.exports=function he(te,X,we,Je,qe){te!==X&&k(X,function(je,Ge){if(qe||(qe=new I),U(je))O(te,X,Ge,we,he,Je,qe);else{var Ie=Je?Je(re(te,Ge),je,Ge+"",te,X,qe):void 0;void 0===Ie&&(Ie=je),b(te,Ge,Ie)}},Y)}},function(M,R,s){var I=s(24),b=s(80),k=s(81),O=s(82),U=s(83),Y=s(84);function re(he){var te=this.__data__=new I(he);this.size=te.size}re.prototype.clear=b,re.prototype.delete=k,re.prototype.get=O,re.prototype.has=U,re.prototype.set=Y,M.exports=re},function(M,R){M.exports=function(){this.__data__=[],this.size=0}},function(M,R,s){var I=s(25),b=Array.prototype.splice;M.exports=function(k){var O=this.__data__,U=I(O,k);return!(U<0||(U==O.length-1?O.pop():b.call(O,U,1),--this.size,0))}},function(M,R,s){var I=s(25);M.exports=function(b){var k=this.__data__,O=I(k,b);return O<0?void 0:k[O][1]}},function(M,R,s){var I=s(25);M.exports=function(b){return I(this.__data__,b)>-1}},function(M,R,s){var I=s(25);M.exports=function(b,k){var O=this.__data__,U=I(O,b);return U<0?(++this.size,O.push([b,k])):O[U][1]=k,this}},function(M,R,s){var I=s(24);M.exports=function(){this.__data__=new I,this.size=0}},function(M,R){M.exports=function(s){var I=this.__data__,b=I.delete(s);return this.size=I.size,b}},function(M,R){M.exports=function(s){return this.__data__.get(s)}},function(M,R){M.exports=function(s){return this.__data__.has(s)}},function(M,R,s){var I=s(24),b=s(43),k=s(46);M.exports=function(O,U){var Y=this.__data__;if(Y instanceof I){var re=Y.__data__;if(!b||re.length<199)return re.push([O,U]),this.size=++Y.size,this;Y=this.__data__=new k(re)}return Y.set(O,U),this.size=Y.size,this}},function(M,R,s){var I=s(35),b=s(88),k=s(14),O=s(90),U=/^\[object .+?Constructor\]$/,X=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");M.exports=function(we){return!(!k(we)||b(we))&&(I(we)?X:U).test(O(we))}},function(M,R,s){var I=s(27),b=Object.prototype,k=b.hasOwnProperty,O=b.toString,U=I?I.toStringTag:void 0;M.exports=function(Y){var re=k.call(Y,U),he=Y[U];try{Y[U]=void 0;var te=!0}catch(we){}var X=O.call(Y);return te&&(re?Y[U]=he:delete Y[U]),X}},function(M,R){var s=Object.prototype.toString;M.exports=function(I){return s.call(I)}},function(M,R,s){var I,b=s(89),k=(I=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"";M.exports=function(O){return!!k&&k in O}},function(M,R,s){var I=s(19)["__core-js_shared__"];M.exports=I},function(M,R){var s=Function.prototype.toString;M.exports=function(I){if(null!=I){try{return s.call(I)}catch(b){}try{return I+""}catch(b){}}return""}},function(M,R){M.exports=function(s,I){return null==s?void 0:s[I]}},function(M,R,s){var I=s(93),b=s(24),k=s(43);M.exports=function(){this.size=0,this.__data__={hash:new I,map:new(k||b),string:new I}}},function(M,R,s){var I=s(94),b=s(95),k=s(96),O=s(97),U=s(98);function Y(re){var he=-1,te=null==re?0:re.length;for(this.clear();++he<te;){var X=re[he];this.set(X[0],X[1])}}Y.prototype.clear=I,Y.prototype.delete=b,Y.prototype.get=k,Y.prototype.has=O,Y.prototype.set=U,M.exports=Y},function(M,R,s){var I=s(28);M.exports=function(){this.__data__=I?I(null):{},this.size=0}},function(M,R){M.exports=function(s){var I=this.has(s)&&delete this.__data__[s];return this.size-=I?1:0,I}},function(M,R,s){var I=s(28),b=Object.prototype.hasOwnProperty;M.exports=function(k){var O=this.__data__;if(I){var U=O[k];return"__lodash_hash_undefined__"===U?void 0:U}return b.call(O,k)?O[k]:void 0}},function(M,R,s){var I=s(28),b=Object.prototype.hasOwnProperty;M.exports=function(k){var O=this.__data__;return I?void 0!==O[k]:b.call(O,k)}},function(M,R,s){var I=s(28);M.exports=function(b,k){var O=this.__data__;return this.size+=this.has(b)?0:1,O[b]=I&&void 0===k?"__lodash_hash_undefined__":k,this}},function(M,R,s){var I=s(29);M.exports=function(b){var k=I(this,b).delete(b);return this.size-=k?1:0,k}},function(M,R){M.exports=function(s){var I=typeof s;return"string"==I||"number"==I||"symbol"==I||"boolean"==I?"__proto__"!==s:null===s}},function(M,R,s){var I=s(29);M.exports=function(b){return I(this,b).get(b)}},function(M,R,s){var I=s(29);M.exports=function(b){return I(this,b).has(b)}},function(M,R,s){var I=s(29);M.exports=function(b,k){var O=I(this,b),U=O.size;return O.set(b,k),this.size+=O.size==U?0:1,this}},function(M,R,s){var I=s(105)();M.exports=I},function(M,R){M.exports=function(s){return function(I,b,k){for(var O=-1,U=Object(I),Y=k(I),re=Y.length;re--;){var he=Y[s?re:++O];if(!1===b(U[he],he,U))break}return I}}},function(M,R,s){var I=s(47),b=s(107),k=s(108),O=s(111),U=s(112),Y=s(30),re=s(15),he=s(116),te=s(51),X=s(35),we=s(14),Je=s(118),qe=s(52),je=s(53),Ge=s(122);M.exports=function(Ie,me,J,Se,De,Fe,Ne){var Ue=je(Ie,J),ue=je(me,J),Me=Ne.get(ue);if(Me)I(Ie,J,Me);else{var q=Fe?Fe(Ue,ue,J+"",Ie,me,Ne):void 0,Q=void 0===q;if(Q){var ne=re(ue),ie=!ne&&te(ue),Ce=!ne&&!ie&&qe(ue);q=ue,ne||ie||Ce?re(Ue)?q=Ue:he(Ue)?q=O(Ue):ie?(Q=!1,q=b(ue,!0)):Ce?(Q=!1,q=k(ue,!0)):q=[]:Je(ue)||Y(ue)?(q=Ue,Y(Ue)?q=Ge(Ue):we(Ue)&&!X(Ue)||(q=U(ue))):Q=!1}Q&&(Ne.set(ue,q),De(q,ue,Se,Fe,Ne),Ne.delete(ue)),I(Ie,J,q)}}},function(M,R,s){(function(I){var b=s(19),k=R&&!R.nodeType&&R,O=k&&"object"==typeof I&&I&&!I.nodeType&&I,U=O&&O.exports===k?b.Buffer:void 0,Y=U?U.allocUnsafe:void 0;I.exports=function(re,he){if(he)return re.slice();var te=re.length,X=Y?Y(te):new re.constructor(te);return re.copy(X),X}}).call(this,s(37)(M))},function(M,R,s){var I=s(109);M.exports=function(b,k){var O=k?I(b.buffer):b.buffer;return new b.constructor(O,b.byteOffset,b.length)}},function(M,R,s){var I=s(110);M.exports=function(b){var k=new b.constructor(b.byteLength);return new I(k).set(new I(b)),k}},function(M,R,s){var I=s(19).Uint8Array;M.exports=I},function(M,R){M.exports=function(s,I){var b=-1,k=s.length;for(I||(I=Array(k));++b<k;)I[b]=s[b];return I}},function(M,R,s){var I=s(113),b=s(49),k=s(50);M.exports=function(O){return"function"!=typeof O.constructor||k(O)?{}:I(b(O))}},function(M,R,s){var I=s(14),b=Object.create,k=function(){function O(){}return function(U){if(!I(U))return{};if(b)return b(U);O.prototype=U;var Y=new O;return O.prototype=void 0,Y}}();M.exports=k},function(M,R){M.exports=function(s,I){return function(b){return s(I(b))}}},function(M,R,s){var I=s(22),b=s(20);M.exports=function(k){return b(k)&&"[object Arguments]"==I(k)}},function(M,R,s){var I=s(38),b=s(20);M.exports=function(k){return b(k)&&I(k)}},function(M,R){M.exports=function(){return!1}},function(M,R,s){var I=s(22),b=s(49),k=s(20),Y=Function.prototype.toString,re=Object.prototype.hasOwnProperty,he=Y.call(Object);M.exports=function(te){if(!k(te)||"[object Object]"!=I(te))return!1;var X=b(te);if(null===X)return!0;var we=re.call(X,"constructor")&&X.constructor;return"function"==typeof we&&we instanceof we&&Y.call(we)==he}},function(M,R,s){var I=s(22),b=s(39),k=s(20),O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Arguments]"]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object Boolean]"]=O["[object DataView]"]=O["[object Date]"]=O["[object Error]"]=O["[object Function]"]=O["[object Map]"]=O["[object Number]"]=O["[object Object]"]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object WeakMap]"]=!1,M.exports=function(U){return k(U)&&b(U.length)&&!!O[I(U)]}},function(M,R){M.exports=function(s){return function(I){return s(I)}}},function(M,R,s){(function(I){var b=s(44),k=R&&!R.nodeType&&R,O=k&&"object"==typeof I&&I&&!I.nodeType&&I,U=O&&O.exports===k&&b.process,Y=function(){try{return O&&O.require&&O.require("util").types||U&&U.binding&&U.binding("util")}catch(he){}}();I.exports=Y}).call(this,s(37)(M))},function(M,R,s){var I=s(123),b=s(55);M.exports=function(k){return I(k,b(k))}},function(M,R,s){var I=s(54),b=s(36);M.exports=function(k,O,U,Y){var re=!U;U||(U={});for(var he=-1,te=O.length;++he<te;){var X=O[he],we=Y?Y(U[X],k[X],X,U,k):void 0;void 0===we&&(we=k[X]),re?b(U,X,we):I(U,X,we)}return U}},function(M,R,s){var I=s(125),b=s(30),k=s(15),O=s(51),U=s(31),Y=s(52),re=Object.prototype.hasOwnProperty;M.exports=function(he,te){var X=k(he),we=!X&&b(he),Je=!X&&!we&&O(he),qe=!X&&!we&&!Je&&Y(he),je=X||we||Je||qe,Ge=je?I(he.length,String):[],Ie=Ge.length;for(var me in he)!te&&!re.call(he,me)||je&&("length"==me||Je&&("offset"==me||"parent"==me)||qe&&("buffer"==me||"byteLength"==me||"byteOffset"==me)||U(me,Ie))||Ge.push(me);return Ge}},function(M,R){M.exports=function(s,I){for(var b=-1,k=Array(s);++b<s;)k[b]=I(b);return k}},function(M,R,s){var I=s(14),b=s(50),k=s(127),O=Object.prototype.hasOwnProperty;M.exports=function(U){if(!I(U))return k(U);var Y=b(U),re=[];for(var he in U)("constructor"!=he||!Y&&O.call(U,he))&&re.push(he);return re}},function(M,R){M.exports=function(s){var I=[];if(null!=s)for(var b in Object(s))I.push(b);return I}},function(M,R,s){var I=s(129),b=s(134);M.exports=function(k){return I(function(O,U){var Y=-1,re=U.length,he=re>1?U[re-1]:void 0,te=re>2?U[2]:void 0;for(he=k.length>3&&"function"==typeof he?(re--,he):void 0,te&&b(U[0],U[1],te)&&(he=re<3?void 0:he,re=1),O=Object(O);++Y<re;){var X=U[Y];X&&k(O,X,Y,he)}return O})}},function(M,R,s){var I=s(56),b=s(57),k=s(58);M.exports=function(O,U){return k(b(O,U,I),O+"")}},function(M,R){M.exports=function(s,I,b){switch(b.length){case 0:return s.call(I);case 1:return s.call(I,b[0]);case 2:return s.call(I,b[0],b[1]);case 3:return s.call(I,b[0],b[1],b[2])}return s.apply(I,b)}},function(M,R,s){var I=s(132),b=s(48),k=s(56);M.exports=b?function(U,Y){return b(U,"toString",{configurable:!0,enumerable:!1,value:I(Y),writable:!0})}:k},function(M,R){M.exports=function(s){return function(){return s}}},function(M,R){var s=Date.now;M.exports=function(I){var b=0,k=0;return function(){var O=s(),U=16-(O-k);if(k=O,U>0){if(++b>=800)return arguments[0]}else b=0;return I.apply(void 0,arguments)}}},function(M,R,s){var I=s(26),b=s(38),k=s(31),O=s(14);M.exports=function(U,Y,re){if(!O(re))return!1;var he=typeof Y;return!!("number"==he?b(re)&&k(Y,re.length):"string"==he&&Y in re)&&I(re[Y],U)}},function(M,R){"undefined"!=typeof window&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(s){window.setTimeout(s,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(s,I){var b=65535&s,k=65535&I;return b*k+((s>>>16&65535)*k+b*(I>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(s){"use strict";if(null===s)throw new TypeError("Cannot convert undefined or null to object");for(var I=Object(s),b=1;b<arguments.length;b++){var k=arguments[b];if(null!==k)for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(I[O]=k[O])}return I})},function(M,R){M.exports=function(s){if(Array.isArray(s))return s},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(s,I){var b=null==s?null:"undefined"!=typeof Symbol&&s[Symbol.iterator]||s["@@iterator"];if(null!=b){var k,O,U=[],Y=!0,re=!1;try{for(b=b.call(s);!(Y=(k=b.next()).done)&&(U.push(k.value),!I||U.length!==I);Y=!0);}catch(he){re=!0,O=he}finally{try{Y||null==b.return||b.return()}finally{if(re)throw O}}return U}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(17).default;function b(){"use strict";M.exports=b=function(){return k},M.exports.__esModule=!0,M.exports.default=M.exports;var k={},O=Object.prototype,U=O.hasOwnProperty,Y=Object.defineProperty||function(W,ce,Ve){W[ce]=Ve.value},re="function"==typeof Symbol?Symbol:{},he=re.iterator||"@@iterator",te=re.asyncIterator||"@@asyncIterator",X=re.toStringTag||"@@toStringTag";function we(W,ce,Ve){return Object.defineProperty(W,ce,{value:Ve,enumerable:!0,configurable:!0,writable:!0}),W[ce]}try{we({},"")}catch(W){we=function(ce,Ve,lt){return ce[Ve]=lt}}function Je(W,ce,Ve,lt){var it=Object.create((ce&&ce.prototype instanceof Ge?ce:Ge).prototype),dt=new ne(lt||[]);return Y(it,"_invoke",{value:ue(W,Ve,dt)}),it}function qe(W,ce,Ve){try{return{type:"normal",arg:W.call(ce,Ve)}}catch(lt){return{type:"throw",arg:lt}}}k.wrap=Je;var je={};function Ge(){}function Ie(){}function me(){}var J={};we(J,he,function(){return this});var Se=Object.getPrototypeOf,De=Se&&Se(Se(ie([])));De&&De!==O&&U.call(De,he)&&(J=De);var Fe=me.prototype=Ge.prototype=Object.create(J);function Ne(W){["next","throw","return"].forEach(function(ce){we(W,ce,function(Ve){return this._invoke(ce,Ve)})})}function Ue(W,ce){var Ve;Y(this,"_invoke",{value:function(lt,Xe){function it(){return new ce(function(dt,qt){!function en(vn,Ot,dn,_n){var ur=qe(W[vn],W,Ot);if("throw"!==ur.type){var sr=ur.arg,Nn=sr.value;return Nn&&"object"==I(Nn)&&U.call(Nn,"__await")?ce.resolve(Nn.__await).then(function(Nr){en("next",Nr,dn,_n)},function(Nr){en("throw",Nr,dn,_n)}):ce.resolve(Nn).then(function(Nr){sr.value=Nr,dn(sr)},function(Nr){return en("throw",Nr,dn,_n)})}_n(ur.arg)}(lt,Xe,dt,qt)})}return Ve=Ve?Ve.then(it,it):it()}})}function ue(W,ce,Ve){var lt="suspendedStart";return function(Xe,it){if("executing"===lt)throw new Error("Generator is already running");if("completed"===lt){if("throw"===Xe)throw it;return{value:void 0,done:!0}}for(Ve.method=Xe,Ve.arg=it;;){var dt=Ve.delegate;if(dt){var qt=Me(dt,Ve);if(qt){if(qt===je)continue;return qt}}if("next"===Ve.method)Ve.sent=Ve._sent=Ve.arg;else if("throw"===Ve.method){if("suspendedStart"===lt)throw lt="completed",Ve.arg;Ve.dispatchException(Ve.arg)}else"return"===Ve.method&&Ve.abrupt("return",Ve.arg);lt="executing";var en=qe(W,ce,Ve);if("normal"===en.type){if(lt=Ve.done?"completed":"suspendedYield",en.arg===je)continue;return{value:en.arg,done:Ve.done}}"throw"===en.type&&(lt="completed",Ve.method="throw",Ve.arg=en.arg)}}}function Me(W,ce){var Ve=W.iterator[ce.method];if(void 0===Ve){if(ce.delegate=null,"throw"===ce.method){if(W.iterator.return&&(ce.method="return",ce.arg=void 0,Me(W,ce),"throw"===ce.method))return je;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return je}var lt=qe(Ve,W.iterator,ce.arg);if("throw"===lt.type)return ce.method="throw",ce.arg=lt.arg,ce.delegate=null,je;var Xe=lt.arg;return Xe?Xe.done?(ce[W.resultName]=Xe.value,ce.next=W.nextLoc,"return"!==ce.method&&(ce.method="next",ce.arg=void 0),ce.delegate=null,je):Xe:(ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,je)}function q(W){var ce={tryLoc:W[0]};1 in W&&(ce.catchLoc=W[1]),2 in W&&(ce.finallyLoc=W[2],ce.afterLoc=W[3]),this.tryEntries.push(ce)}function Q(W){var ce=W.completion||{};ce.type="normal",delete ce.arg,W.completion=ce}function ne(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(q,this),this.reset(!0)}function ie(W){if(W){var ce=W[he];if(ce)return ce.call(W);if("function"==typeof W.next)return W;if(!isNaN(W.length)){var Ve=-1,lt=function Xe(){for(;++Ve<W.length;)if(U.call(W,Ve))return Xe.value=W[Ve],Xe.done=!1,Xe;return Xe.value=void 0,Xe.done=!0,Xe};return lt.next=lt}}return{next:Ce}}function Ce(){return{value:void 0,done:!0}}return Ie.prototype=me,Y(Fe,"constructor",{value:me,configurable:!0}),Y(me,"constructor",{value:Ie,configurable:!0}),Ie.displayName=we(me,X,"GeneratorFunction"),k.isGeneratorFunction=function(W){var ce="function"==typeof W&&W.constructor;return!!ce&&(ce===Ie||"GeneratorFunction"===(ce.displayName||ce.name))},k.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,me):(W.__proto__=me,we(W,X,"GeneratorFunction")),W.prototype=Object.create(Fe),W},k.awrap=function(W){return{__await:W}},Ne(Ue.prototype),we(Ue.prototype,te,function(){return this}),k.AsyncIterator=Ue,k.async=function(W,ce,Ve,lt,Xe){void 0===Xe&&(Xe=Promise);var it=new Ue(Je(W,ce,Ve,lt),Xe);return k.isGeneratorFunction(ce)?it:it.next().then(function(dt){return dt.done?dt.value:it.next()})},Ne(Fe),we(Fe,X,"Generator"),we(Fe,he,function(){return this}),we(Fe,"toString",function(){return"[object Generator]"}),k.keys=function(W){var ce=Object(W),Ve=[];for(var lt in ce)Ve.push(lt);return Ve.reverse(),function Xe(){for(;Ve.length;){var it=Ve.pop();if(it in ce)return Xe.value=it,Xe.done=!1,Xe}return Xe.done=!0,Xe}},k.values=ie,ne.prototype={constructor:ne,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Q),!W)for(var ce in this)"t"===ce.charAt(0)&&U.call(this,ce)&&!isNaN(+ce.slice(1))&&(this[ce]=void 0)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if("throw"===W.type)throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var ce=this;function Ve(en,vn){return it.type="throw",it.arg=W,ce.next=en,vn&&(ce.method="next",ce.arg=void 0),!!vn}for(var lt=this.tryEntries.length-1;lt>=0;--lt){var Xe=this.tryEntries[lt],it=Xe.completion;if("root"===Xe.tryLoc)return Ve("end");if(Xe.tryLoc<=this.prev){var dt=U.call(Xe,"catchLoc"),qt=U.call(Xe,"finallyLoc");if(dt&&qt){if(this.prev<Xe.catchLoc)return Ve(Xe.catchLoc,!0);if(this.prev<Xe.finallyLoc)return Ve(Xe.finallyLoc)}else if(dt){if(this.prev<Xe.catchLoc)return Ve(Xe.catchLoc,!0)}else{if(!qt)throw new Error("try statement without catch or finally");if(this.prev<Xe.finallyLoc)return Ve(Xe.finallyLoc)}}}},abrupt:function(W,ce){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var lt=this.tryEntries[Ve];if(lt.tryLoc<=this.prev&&U.call(lt,"finallyLoc")&&this.prev<lt.finallyLoc){var Xe=lt;break}}Xe&&("break"===W||"continue"===W)&&Xe.tryLoc<=ce&&ce<=Xe.finallyLoc&&(Xe=null);var it=Xe?Xe.completion:{};return it.type=W,it.arg=ce,Xe?(this.method="next",this.next=Xe.finallyLoc,je):this.complete(it)},complete:function(W,ce){if("throw"===W.type)throw W.arg;return"break"===W.type||"continue"===W.type?this.next=W.arg:"return"===W.type?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):"normal"===W.type&&ce&&(this.next=ce),je},finish:function(W){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var Ve=this.tryEntries[ce];if(Ve.finallyLoc===W)return this.complete(Ve.completion,Ve.afterLoc),Q(Ve),je}},catch:function(W){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var Ve=this.tryEntries[ce];if(Ve.tryLoc===W){var lt=Ve.completion;if("throw"===lt.type){var Xe=lt.arg;Q(Ve)}return Xe}}throw new Error("illegal catch attempt")},delegateYield:function(W,ce,Ve){return this.delegate={iterator:ie(W),resultName:ce,nextLoc:Ve},"next"===this.method&&(this.arg=void 0),je}},k}M.exports=b,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(2);M.exports=function(b,k){for(;!Object.prototype.hasOwnProperty.call(b,k)&&null!==(b=I(b)););return b},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(60);M.exports=function(b){if(Array.isArray(b))return I(b)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(s){if("undefined"!=typeof Symbol&&null!=s[Symbol.iterator]||null!=s["@@iterator"])return Array.from(s)},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(145),b=s(155);M.exports=function(k,O){return I(k,O,function(U,Y){return b(k,Y)})}},function(M,R,s){var I=s(146),b=s(154),k=s(32);M.exports=function(O,U,Y){for(var re=-1,he=U.length,te={};++re<he;){var X=U[re],we=I(O,X);Y(we,X)&&b(te,k(X,O),we)}return te}},function(M,R,s){var I=s(32),b=s(42);M.exports=function(k,O){for(var U=0,Y=(O=I(O,k)).length;null!=k&&U<Y;)k=k[b(O[U++])];return U&&U==Y?k:void 0}},function(M,R,s){var I=s(15),b=s(41),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/;M.exports=function(U,Y){if(I(U))return!1;var re=typeof U;return!("number"!=re&&"symbol"!=re&&"boolean"!=re&&null!=U&&!b(U))||O.test(U)||!k.test(U)||null!=Y&&U in Object(Y)}},function(M,R,s){var I=s(149),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,O=I(function(U){var Y=[];return 46===U.charCodeAt(0)&&Y.push(""),U.replace(b,function(re,he,te,X){Y.push(te?X.replace(k,"$1"):he||re)}),Y});M.exports=O},function(M,R,s){var I=s(150);M.exports=function(b){var k=I(b,function(U){return 500===O.size&&O.clear(),U}),O=k.cache;return k}},function(M,R,s){var I=s(46);function b(k,O){if("function"!=typeof k||null!=O&&"function"!=typeof O)throw new TypeError("Expected a function");var U=function(){var Y=arguments,re=O?O.apply(this,Y):Y[0],he=U.cache;if(he.has(re))return he.get(re);var te=k.apply(this,Y);return U.cache=he.set(re,te)||he,te};return U.cache=new(b.Cache||I),U}b.Cache=I,M.exports=b},function(M,R,s){var I=s(152);M.exports=function(b){return null==b?"":I(b)}},function(M,R,s){var I=s(27),b=s(153),k=s(15),O=s(41),U=I?I.prototype:void 0,Y=U?U.toString:void 0;M.exports=function re(he){if("string"==typeof he)return he;if(k(he))return b(he,re)+"";if(O(he))return Y?Y.call(he):"";var te=he+"";return"0"==te&&1/he==-1/0?"-0":te}},function(M,R){M.exports=function(s,I){for(var b=-1,k=null==s?0:s.length,O=Array(k);++b<k;)O[b]=I(s[b],b,s);return O}},function(M,R,s){var I=s(54),b=s(32),k=s(31),O=s(14),U=s(42);M.exports=function(Y,re,he,te){if(!O(Y))return Y;for(var X=-1,we=(re=b(re,Y)).length,Je=we-1,qe=Y;null!=qe&&++X<we;){var je=U(re[X]),Ge=he;if("__proto__"===je||"constructor"===je||"prototype"===je)return Y;if(X!=Je){var Ie=qe[je];void 0===(Ge=te?te(Ie,je,qe):void 0)&&(Ge=O(Ie)?Ie:k(re[X+1])?[]:{})}I(qe,je,Ge),qe=qe[je]}return Y}},function(M,R,s){var I=s(156),b=s(157);M.exports=function(k,O){return null!=k&&b(k,O,I)}},function(M,R){M.exports=function(s,I){return null!=s&&I in Object(s)}},function(M,R,s){var I=s(32),b=s(30),k=s(15),O=s(31),U=s(39),Y=s(42);M.exports=function(re,he,te){for(var X=-1,we=(he=I(he,re)).length,Je=!1;++X<we;){var qe=Y(he[X]);if(!(Je=null!=re&&te(re,qe)))break;re=re[qe]}return Je||++X!=we?Je:!!(we=null==re?0:re.length)&&U(we)&&O(qe,we)&&(k(re)||b(re))}},function(M,R,s){var I=s(159),b=s(57),k=s(58);M.exports=function(O){return k(b(O,void 0,I),O+"")}},function(M,R,s){var I=s(160);M.exports=function(b){return null!=b&&b.length?I(b,1):[]}},function(M,R,s){var I=s(161),b=s(162);M.exports=function k(O,U,Y,re,he){var te=-1,X=O.length;for(Y||(Y=b),he||(he=[]);++te<X;){var we=O[te];U>0&&Y(we)?U>1?k(we,U-1,Y,re,he):I(he,we):re||(he[he.length]=we)}return he}},function(M,R){M.exports=function(s,I){for(var b=-1,k=I.length,O=s.length;++b<k;)s[O+b]=I[b];return s}},function(M,R,s){var I=s(27),b=s(30),k=s(15),O=I?I.isConcatSpreadable:void 0;M.exports=function(U){return k(U)||b(U)||!!(O&&U&&U[O])}},function(M,R){M.exports=function(s){return-1!==Function.toString.call(s).indexOf("[native code]")},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){var I=s(40),b=s(165);function k(O,U,Y){return b()?(M.exports=k=Reflect.construct.bind(),M.exports.__esModule=!0,M.exports.default=M.exports):(M.exports=k=function(re,he,te){var X=[null];X.push.apply(X,he);var we=new(Function.bind.apply(re,X));return te&&I(we,te.prototype),we},M.exports.__esModule=!0,M.exports.default=M.exports),k.apply(null,arguments)}M.exports=k,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R){M.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,R,s){"use strict";s.r(R),s.d(R,"BarcodeDecoder",function(){return Zt}),s.d(R,"Readers",function(){return I}),s.d(R,"CameraAccess",function(){return bi}),s.d(R,"ImageDebug",function(){return Je.a}),s.d(R,"ImageWrapper",function(){return re.a}),s.d(R,"ResultCollector",function(){return Vn});var I={};s.r(I),s.d(I,"BarcodeReader",function(){return ne}),s.d(I,"TwoOfFiveReader",function(){return lt}),s.d(I,"NewCodabarReader",function(){return en}),s.d(I,"Code128Reader",function(){return Ot}),s.d(I,"Code32Reader",function(){return yi}),s.d(I,"Code39Reader",function(){return ri}),s.d(I,"Code39VINReader",function(){return Jn}),s.d(I,"Code93Reader",function(){return Ln}),s.d(I,"EAN2Reader",function(){return Re}),s.d(I,"EAN5Reader",function(){return st}),s.d(I,"EAN8Reader",function(){return $e}),s.d(I,"EANReader",function(){return Yn}),s.d(I,"I2of5Reader",function(){return wt}),s.d(I,"UPCEReader",function(){return Gn}),s.d(I,"UPCReader",function(){return Tr});var b,ee,k=s(17),O=s.n(k),U=s(18),Y=s.n(U),re=(s(135),s(11)),he=s(12),te=s.n(he),X=s(8),we=s.n(X),Je=s(16),qe=s(3),je=s.n(qe),Ge=s(4),Ie=s.n(Ge),me=s(1),J=s.n(me),Se=s(7),De=s.n(Se),Fe=s(6),Ne=s.n(Fe),Ue=s(2),ue=s.n(Ue),Me=s(0),q=s.n(Me),Q=s(9);(ee=b||(b={}))[ee.Forward=1]="Forward",ee[ee.Reverse=-1]="Reverse";var ne=function(){function ee(_e,z){je()(this,ee),q()(this,"_row",[]),q()(this,"config",{}),q()(this,"supplements",[]),q()(this,"SINGLE_CODE_ERROR",0),q()(this,"FORMAT","unknown"),q()(this,"CONFIG_KEYS",{}),this._row=[],this.config=_e||{},z&&(this.supplements=z)}return Ie()(ee,[{key:"_nextUnset",value:function(_e){for(var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;S<_e.length;S++)if(!_e[S])return S;return _e.length}},{key:"_matchPattern",value:function(_e,z){for(var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.SINGLE_CODE_ERROR||1,N=0,L=0,V=0,oe=0,ve=0,be=0,He=0;He<_e.length;He++)V+=_e[He],oe+=z[He];if(V<oe)return Number.MAX_VALUE;S*=ve=V/oe;for(var j=0;j<_e.length;j++){if(be=z[j]*ve,(L=Math.abs(_e[j]-be)/be)>S)return Number.MAX_VALUE;N+=L}return N/oe}},{key:"_nextSet",value:function(_e){for(var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;S<_e.length;S++)if(_e[S])return S;return _e.length}},{key:"_correctBars",value:function(_e,z,S){for(var N=S.length,L=0;N--;)(L=_e[S[N]]*(1-(1-z)/2))>1&&(_e[S[N]]=L)}},{key:"decodePattern",value:function(_e){this._row=_e;var z=this.decode();return null===z?(this._row.reverse(),(z=this.decode())&&(z.direction=b.Reverse,z.start=this._row.length-z.start,z.end=this._row.length-z.end)):z.direction=b.Forward,z&&(z.format=this.FORMAT),z}},{key:"_matchRange",value:function(_e,z,S){var N;for(N=_e=_e<0?0:_e;N<z;N++)if(this._row[N]!==S)return!1;return!0}},{key:"_fillCounters",value:function(){var _e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset(this._row),z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row.length,S=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],N=[],L=0;N[L]=0;for(var V=_e;V<z;V++)this._row[V]^(S?1:0)?N[L]++:(N[++L]=1,S=!S);return N}},{key:"_toCounters",value:function(_e,z){var S=z.length,N=this._row.length,L=!this._row[_e],V=0;Q.a.init(z,0);for(var oe=_e;oe<N;oe++)if(this._row[oe]^(L?1:0))z[V]++;else{if(++V===S)break;z[V]=1,L=!L}return z}},{key:"decodeImage",value:function(_e){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),ee}();var Ce=[3,1,3,1,1,1],W=[3,1,1,1,3],ce=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],Ve=Ce.reduce(function(ee,_e){return ee+_e},0),lt=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"barSpaceRatio",[1,1]),q()(J()(S),"FORMAT","2of5"),q()(J()(S),"SINGLE_CODE_ERROR",.78),q()(J()(S),"AVG_CODE_ERROR",.3),S}return Ie()(z,[{key:"_findPattern",value:function(S,N){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2],V=arguments.length>3&&void 0!==arguments[3]&&arguments[3],oe=[],ve=0,de={error:Number.MAX_VALUE,code:-1,start:0,end:0},be=0,He=0,j=this.AVG_CODE_ERROR;N||(N=this._nextSet(this._row));for(var pe=0;pe<S.length;pe++)oe[pe]=0;for(var Te=N;Te<this._row.length;Te++)if(this._row[Te]^(L?1:0))oe[ve]++;else{if(ve===oe.length-1){be=0;for(var Qe=0;Qe<oe.length;Qe++)be+=oe[Qe];if((He=this._matchPattern(oe,S))<j)return de.error=He,de.start=Te-be,de.end=Te,de;if(!V)return null;for(var yt=0;yt<oe.length-2;yt++)oe[yt]=oe[yt+2];oe[oe.length-2]=0,oe[oe.length-1]=0,ve--}else ve++;oe[ve]=1,L=!L}return null}},{key:"_findStart",value:function(){for(var S=null,N=this._nextSet(this._row),L=1,V=0;!S;){if(!(S=this._findPattern(Ce,N,!1,!0)))return null;if(L=Math.floor((S.end-S.start)/Ve),(V=S.start-5*L)>=0&&this._matchRange(V,S.start,0))return S;N=S.end,S=null}return S}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start)/2;return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"_findEnd",value:function(){this._row.reverse();var S=this._nextSet(this._row),N=this._findPattern(W,S,!1,!0);if(this._row.reverse(),null===N)return null;var L=N.start;return N.start=this._row.length-N.end,N.end=this._row.length-L,null!==N?this._verifyTrailingWhitespace(N):null}},{key:"_verifyCounterLength",value:function(S){return S.length%10==0}},{key:"_decodeCode",value:function(S){for(var N=this.AVG_CODE_ERROR,L={error:Number.MAX_VALUE,code:-1,start:0,end:0},V=0;V<ce.length;V++){var oe=this._matchPattern(S,ce[V]);oe<L.error&&(L.code=V,L.error=oe)}return L.error<N?L:null}},{key:"_decodePayload",value:function(S,N,L){for(var V=0,oe=S.length,ve=[0,0,0,0,0],de=null;V<oe;){for(var be=0;be<5;be++)ve[be]=S[V]*this.barSpaceRatio[0],V+=2;if(!(de=this._decodeCode(ve)))return null;N.push("".concat(de.code)),L.push(de)}return de}},{key:"decode",value:function(S,N){var L=this._findStart();if(!L)return null;var V=this._findEnd();if(!V)return null;var oe=this._fillCounters(L.end,V.start,!1);if(!this._verifyCounterLength(oe))return null;var ve=[];ve.push(L);var de=[];return this._decodePayload(oe,de,ve)?de.length<5?null:(ve.push(V),{code:de.join(""),start:L.start,end:V.end,startInfo:L,decodedCodes:ve,format:this.FORMAT}):null}}]),z}(ne);var it=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],dt=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],qt=[26,41,11,14],en=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"_counters",[]),q()(J()(S),"FORMAT","codabar"),S}return Ie()(z,[{key:"_computeAlternatingThreshold",value:function(S,N){for(var L=Number.MAX_VALUE,V=0,oe=0,ve=S;ve<N;ve+=2)(oe=this._counters[ve])>V&&(V=oe),oe<L&&(L=oe);return(L+V)/2|0}},{key:"_toPattern",value:function(S){var N=S+7;if(N>this._counters.length)return-1;for(var L=this._computeAlternatingThreshold(S,N),V=this._computeAlternatingThreshold(S+1,N),oe=64,de=0,be=0;be<7;be++)this._counters[S+be]>(0==(1&be)?L:V)&&(de|=oe),oe>>=1;return de}},{key:"_isStartEnd",value:function(S){for(var N=0;N<qt.length;N++)if(qt[N]===S)return!0;return!1}},{key:"_sumCounters",value:function(S,N){for(var L=0,V=S;V<N;V++)L+=this._counters[V];return L}},{key:"_findStart",value:function(){for(var S=this._nextUnset(this._row),N=1;N<this._counters.length;N++){var L=this._toPattern(N);if(-1!==L&&this._isStartEnd(L))return{start:S+=this._sumCounters(0,N),end:S+this._sumCounters(N,N+8),startCounter:N,endCounter:N+8}}return null}},{key:"_patternToChar",value:function(S){for(var N=0;N<dt.length;N++)if(dt[N]===S)return String.fromCharCode(it[N]);return null}},{key:"_calculatePatternLength",value:function(S){for(var N=0,L=S;L<S+7;L++)N+=this._counters[L];return N}},{key:"_verifyWhitespace",value:function(S,N){return(S-1<=0||this._counters[S-1]>=this._calculatePatternLength(S)/2)&&(N+8>=this._counters.length||this._counters[N+7]>=this._calculatePatternLength(N)/2)}},{key:"_charToPattern",value:function(S){for(var N=S.charCodeAt(0),L=0;L<it.length;L++)if(it[L]===N)return dt[L];return 0}},{key:"_thresholdResultPattern",value:function(S,N){for(var L,V={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},oe=N,ve=0;ve<S.length;ve++){L=this._charToPattern(S[ve]);for(var de=6;de>=0;de--){var be=2==(1&de)?V.bar:V.space,He=1==(1&L)?be.wide:be.narrow;He.size+=this._counters[oe+de],He.counts++,L>>=1}oe+=8}return["space","bar"].forEach(function(j){var pe=V[j];pe.wide.min=Math.floor((pe.narrow.size/pe.narrow.counts+pe.wide.size/pe.wide.counts)/2),pe.narrow.max=Math.ceil(pe.wide.min),pe.wide.max=Math.ceil((2*pe.wide.size+1.5)/pe.wide.counts)}),V}},{key:"_validateResult",value:function(S,N){for(var L,V=this._thresholdResultPattern(S,N),oe=N,ve=0;ve<S.length;ve++){L=this._charToPattern(S[ve]);for(var de=6;de>=0;de--){var be=0==(1&de)?V.bar:V.space,He=1==(1&L)?be.wide:be.narrow,j=this._counters[oe+de];if(j<He.min||j>He.max)return!1;L>>=1}oe+=8}return!0}},{key:"decode",value:function(S,N){if(this._counters=this._fillCounters(),!(N=this._findStart()))return null;var L,V=N.startCounter,oe=[];do{if((L=this._toPattern(V))<0)return null;var ve=this._patternToChar(L);if(null===ve)return null;if(oe.push(ve),V+=8,oe.length>1&&this._isStartEnd(L))break}while(V<this._counters.length);if(oe.length-2<4||!this._isStartEnd(L)||!this._verifyWhitespace(N.startCounter,V-8)||!this._validateResult(oe,N.startCounter))return null;var de=N.start+this._sumCounters(N.startCounter,(V=V>this._counters.length?this._counters.length:V)-8);return{code:oe.join(""),start:N.start,end:de,startInfo:N,decodedCodes:oe,format:this.FORMAT}}}]),z}(ne);var Ot=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"CODE_SHIFT",98),q()(J()(S),"CODE_C",99),q()(J()(S),"CODE_B",100),q()(J()(S),"CODE_A",101),q()(J()(S),"START_CODE_A",103),q()(J()(S),"START_CODE_B",104),q()(J()(S),"START_CODE_C",105),q()(J()(S),"STOP_CODE",106),q()(J()(S),"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),q()(J()(S),"SINGLE_CODE_ERROR",.64),q()(J()(S),"AVG_CODE_ERROR",.3),q()(J()(S),"FORMAT","code_128"),q()(J()(S),"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),S}return Ie()(z,[{key:"_decodeCode",value:function(S,N){for(var L={error:Number.MAX_VALUE,code:-1,start:S,end:S,correction:{bar:1,space:1}},V=[0,0,0,0,0,0],ve=!this._row[S],de=0,be=S;be<this._row.length;be++)if(this._row[be]^(ve?1:0))V[de]++;else{if(de===V.length-1){N&&this._correct(V,N);for(var He=0;He<this.CODE_PATTERN.length;He++){var j=this._matchPattern(V,this.CODE_PATTERN[He]);j<L.error&&(L.code=He,L.error=j)}return L.end=be,-1===L.code||L.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[L.code]&&(L.correction.bar=this.calculateCorrection(this.CODE_PATTERN[L.code],V,this.MODULE_INDICES.bar),L.correction.space=this.calculateCorrection(this.CODE_PATTERN[L.code],V,this.MODULE_INDICES.space)),L)}V[++de]=1,ve=!ve}return null}},{key:"_correct",value:function(S,N){this._correctBars(S,N.bar,this.MODULE_INDICES.bar),this._correctBars(S,N.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var S=[0,0,0,0,0,0],N=this._nextSet(this._row),L={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},V=!1,oe=0,ve=N;ve<this._row.length;ve++)if(this._row[ve]^(V?1:0))S[oe]++;else{if(oe===S.length-1){for(var de=S.reduce(function(pe,Te){return pe+Te},0),be=this.START_CODE_A;be<=this.START_CODE_C;be++){var He=this._matchPattern(S,this.CODE_PATTERN[be]);He<L.error&&(L.code=be,L.error=He)}if(L.error<this.AVG_CODE_ERROR)return L.start=ve-de,L.end=ve,L.correction.bar=this.calculateCorrection(this.CODE_PATTERN[L.code],S,this.MODULE_INDICES.bar),L.correction.space=this.calculateCorrection(this.CODE_PATTERN[L.code],S,this.MODULE_INDICES.space),L;for(var j=0;j<4;j++)S[j]=S[j+2];S[4]=0,S[5]=0,oe--}else oe++;S[oe]=1,V=!V}return null}},{key:"decode",value:function(S,N){var L=this,V=this._findStart();if(null===V)return null;var oe={code:V.code,start:V.start,end:V.end,correction:{bar:V.correction.bar,space:V.correction.space}},ve=[];ve.push(oe);for(var de=oe.code,be=function(Bt){switch(Bt){case L.START_CODE_A:return L.CODE_A;case L.START_CODE_B:return L.CODE_B;case L.START_CODE_C:return L.CODE_C;default:return null}}(oe.code),He=!1,j=!1,pe=j,Te=!0,Qe=0,yt=[],Pt=[];!He;){if(pe=j,j=!1,null!==(oe=this._decodeCode(oe.end,oe.correction)))switch(oe.code!==this.STOP_CODE&&(Te=!0),oe.code!==this.STOP_CODE&&(yt.push(oe.code),de+=++Qe*oe.code),ve.push(oe),be){case this.CODE_A:if(oe.code<64)Pt.push(String.fromCharCode(32+oe.code));else if(oe.code<96)Pt.push(String.fromCharCode(oe.code-64));else switch(oe.code!==this.STOP_CODE&&(Te=!1),oe.code){case this.CODE_SHIFT:j=!0,be=this.CODE_B;break;case this.CODE_B:be=this.CODE_B;break;case this.CODE_C:be=this.CODE_C;break;case this.STOP_CODE:He=!0}break;case this.CODE_B:if(oe.code<96)Pt.push(String.fromCharCode(32+oe.code));else switch(oe.code!==this.STOP_CODE&&(Te=!1),oe.code){case this.CODE_SHIFT:j=!0,be=this.CODE_A;break;case this.CODE_A:be=this.CODE_A;break;case this.CODE_C:be=this.CODE_C;break;case this.STOP_CODE:He=!0}break;case this.CODE_C:if(oe.code<100)Pt.push(oe.code<10?"0"+oe.code:oe.code);else switch(oe.code!==this.STOP_CODE&&(Te=!1),oe.code){case this.CODE_A:be=this.CODE_A;break;case this.CODE_B:be=this.CODE_B;break;case this.STOP_CODE:He=!0}}else He=!0;pe&&(be=be===this.CODE_A?this.CODE_B:this.CODE_A)}return null===oe?null:(oe.end=this._nextUnset(this._row,oe.end),this._verifyTrailingWhitespace(oe)?(de-=Qe*yt[yt.length-1])%103!==yt[yt.length-1]?null:Pt.length?(Te&&Pt.splice(Pt.length-1,1),{code:Pt.join(""),start:V.start,end:oe.end,codeset:be,startInfo:V,decodedCodes:ve,endInfo:oe,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(S){var N;return(N=S.end+(S.end-S.start)/2)<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"calculateCorrection",value:function(S,N,L){for(var V=L.length,oe=0,ve=0;V--;)ve+=S[L[V]],oe+=N[L[V]];return ve/oe}}]),z}(ne),dn=s(13),_n=s.n(dn),ur=s(33),sr=s.n(ur);var Nr=new Uint16Array(sr()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(ee){return ee.charCodeAt(0)})),Si=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),ri=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","code_39"),S}return Ie()(z,[{key:"_findStart",value:function(){for(var S=this._nextSet(this._row),N=S,L=new Uint16Array([0,0,0,0,0,0,0,0,0]),V=0,oe=!1,ve=S;ve<this._row.length;ve++)if(this._row[ve]^(oe?1:0))L[V]++;else{if(V===L.length-1){if(148===this._toPattern(L)){var de=Math.floor(Math.max(0,N-(ve-N)/4));if(this._matchRange(de,N,0))return{start:N,end:ve}}N+=L[0]+L[1];for(var be=0;be<7;be++)L[be]=L[be+2];L[7]=0,L[8]=0,V--}else V++;L[V]=1,oe=!oe}return null}},{key:"_toPattern",value:function(S){for(var N=S.length,L=0,V=N,oe=0;V>3;){L=this._findNextWidth(S,L),V=0;for(var ve=0,de=0;de<N;de++)S[de]>L&&(ve|=1<<N-1-de,V++,oe+=S[de]);if(3===V){for(var be=0;be<N&&V>0;be++)if(S[be]>L&&(V--,2*S[be]>=oe))return-1;return ve}}return-1}},{key:"_findNextWidth",value:function(S,N){for(var L=Number.MAX_VALUE,V=0;V<S.length;V++)S[V]<L&&S[V]>N&&(L=S[V]);return L}},{key:"_patternToChar",value:function(S){for(var N=0;N<Si.length;N++)if(Si[N]===S)return String.fromCharCode(Nr[N]);return null}},{key:"_verifyTrailingWhitespace",value:function(S,N,L){var V=Q.a.sum(L);return 3*(N-S-V)>=V}},{key:"decode",value:function(){var S=new Uint16Array([0,0,0,0,0,0,0,0,0]),N=[],L=this._findStart();if(!L)return null;var V,oe,ve=this._nextSet(this._row,L.end);do{S=this._toCounters(ve,S);var de=this._toPattern(S);if(de<0||null===(V=this._patternToChar(de)))return null;N.push(V),oe=ve,ve+=Q.a.sum(S),ve=this._nextSet(this._row,ve)}while("*"!==V);return N.pop(),N.length&&this._verifyTrailingWhitespace(oe,ve,S)?{code:N.join(""),start:L.start,end:ve,startInfo:L,decodedCodes:N,format:this.FORMAT}:null}}]),z}(ne);var Di=/[AEIO]/g,yi=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","code_32_reader"),S}return Ie()(z,[{key:"_decodeCode32",value:function(S){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(S))return null;for(var N=0,L=0;L<S.length;L++)N=32*N+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(S[L]);var V="".concat(N);return V.length<9&&(V=("000000000"+V).slice(-9)),"A"+V}},{key:"_checkChecksum",value:function(S){return!!S}},{key:"decode",value:function(){var S=_n()(ue()(z.prototype),"decode",this).call(this);if(!S)return null;var N=S.code;if(!N||(N=N.replace(Di,""),!this._checkChecksum(N)))return null;var L=this._decodeCode32(N);return L?(S.code=L,S):null}}]),z}(ri);var Fn=/[IOQ]/g,Zn=/[A-Z0-9]{17}/,Jn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","code_39_vin"),S}return Ie()(z,[{key:"_checkChecksum",value:function(S){return!!S}},{key:"decode",value:function(){var S=_n()(ue()(z.prototype),"decode",this).call(this);if(!S)return null;var N=S.code;return N&&(N=N.replace(Fn,"")).match(Zn)&&this._checkChecksum(N)?(S.code=N,S):null}}]),z}(ri);var Gi=new Uint16Array(sr()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(ee){return ee.charCodeAt(0)})),ar=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Ln=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","code_93"),S}return Ie()(z,[{key:"_patternToChar",value:function(S){for(var N=0;N<ar.length;N++)if(ar[N]===S)return String.fromCharCode(Gi[N]);return null}},{key:"_toPattern",value:function(S){for(var N=S.length,L=S.reduce(function(be,He){return be+He},0),V=0,oe=0;oe<N;oe++){var ve=Math.round(9*S[oe]/L);if(ve<1||ve>4)return-1;if(0==(1&oe))for(var de=0;de<ve;de++)V=V<<1|1;else V<<=ve}return V}},{key:"_findStart",value:function(){for(var S=this._nextSet(this._row),N=S,L=new Uint16Array([0,0,0,0,0,0]),V=0,oe=!1,ve=S;ve<this._row.length;ve++)if(this._row[ve]^(oe?1:0))L[V]++;else{if(V===L.length-1){if(350===this._toPattern(L)){var de=Math.floor(Math.max(0,N-(ve-N)/4));if(this._matchRange(de,N,0))return{start:N,end:ve}}N+=L[0]+L[1];for(var be=0;be<4;be++)L[be]=L[be+2];L[4]=0,L[5]=0,V--}else V++;L[V]=1,oe=!oe}return null}},{key:"_verifyEnd",value:function(S,N){return!(S===N||!this._row[N])}},{key:"_decodeExtended",value:function(S){for(var N=S.length,L=[],V=0;V<N;V++){var oe=S[V];if(oe>="a"&&oe<="d"){if(V>N-2)return null;var ve=S[++V],de=ve.charCodeAt(0),be=void 0;switch(oe){case"a":if(!(ve>="A"&&ve<="Z"))return null;be=String.fromCharCode(de-64);break;case"b":if(ve>="A"&&ve<="E")be=String.fromCharCode(de-38);else if(ve>="F"&&ve<="J")be=String.fromCharCode(de-11);else if(ve>="K"&&ve<="O")be=String.fromCharCode(de+16);else if(ve>="P"&&ve<="S")be=String.fromCharCode(de+43);else{if(!(ve>="T"&&ve<="Z"))return null;be=String.fromCharCode(127)}break;case"c":if(ve>="A"&&ve<="O")be=String.fromCharCode(de-32);else{if("Z"!==ve)return null;be=":"}break;case"d":if(!(ve>="A"&&ve<="Z"))return null;be=String.fromCharCode(de+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",be),null}L.push(be)}else L.push(oe)}return L}},{key:"_matchCheckChar",value:function(S,N,L){var V=S.slice(0,N),oe=V.length,ve=V.reduce(function(de,be,He){return de+((-1*He+(oe-1))%L+1)*Gi.indexOf(be.charCodeAt(0))},0);return Gi[ve%47]===S[N].charCodeAt(0)}},{key:"_verifyChecksums",value:function(S){return this._matchCheckChar(S,S.length-2,20)&&this._matchCheckChar(S,S.length-1,15)}},{key:"decode",value:function(S,N){if(!(N=this._findStart()))return null;var L,V,oe=new Uint16Array([0,0,0,0,0,0]),ve=[],de=this._nextSet(this._row,N.end);do{oe=this._toCounters(de,oe);var be=this._toPattern(oe);if(be<0||null===(V=this._patternToChar(be)))return null;ve.push(V),L=de,de+=Q.a.sum(oe),de=this._nextSet(this._row,de)}while("*"!==V);return ve.pop(),ve.length&&this._verifyEnd(L,de)&&this._verifyChecksums(ve)?(ve=ve.slice(0,ve.length-2),null===(ve=this._decodeExtended(ve))?null:{code:ve.join(""),start:N.start,end:de,startInfo:N,decodedCodes:ve,format:this.FORMAT}):null}}]),z}(ne);function Oi(ee,_e){var z=Object.keys(ee);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(ee);_e&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(ee,N).enumerable})),z.push.apply(z,S)}return z}function xn(ee){for(var _e=1;_e<arguments.length;_e++){var z=null!=arguments[_e]?arguments[_e]:{};_e%2?Oi(Object(z),!0).forEach(function(S){q()(ee,S,z[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(z)):Oi(Object(z)).forEach(function(S){Object.defineProperty(ee,S,Object.getOwnPropertyDescriptor(z,S))})}return ee}var Lt=[1,1,1],li=[1,1,1,1,1],ci=[1,1,2],$r=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Mn=[0,11,13,14,19,25,28,21,22,26],Yn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(S,N){var L;return je()(this,z),L=_e.call(this,Y()({supplements:[]},S),N),q()(J()(L),"FORMAT","ean_13"),q()(J()(L),"SINGLE_CODE_ERROR",.7),q()(J()(L),"STOP_PATTERN",[1,1,1]),L}return Ie()(z,[{key:"_findPattern",value:function(S,N,L,V){var oe=new Array(S.length).fill(0),ve={error:Number.MAX_VALUE,start:0,end:0},de=0;N||(N=this._nextSet(this._row));for(var be=!1,He=N;He<this._row.length;He++)if(this._row[He]^(L?1:0))oe[de]+=1;else{if(de===oe.length-1){var j=this._matchPattern(oe,S);if(j<.48&&ve.error&&j<ve.error)return be=!0,ve.error=j,ve.start=He-oe.reduce(function(Te,Qe){return Te+Qe},0),ve.end=He,ve;if(V){for(var pe=0;pe<oe.length-2;pe++)oe[pe]=oe[pe+2];oe[oe.length-2]=0,oe[oe.length-1]=0,de--}}else de++;oe[de]=1,L=!L}return be?ve:null}},{key:"_decodeCode",value:function(S,N){var L=[0,0,0,0],oe={error:Number.MAX_VALUE,code:-1,start:S,end:S},ve=!this._row[S],de=0;N||(N=$r.length);for(var be=S;be<this._row.length;be++)if(this._row[be]^(ve?1:0))L[de]++;else{if(de===L.length-1){for(var He=0;He<N;He++){var j=this._matchPattern(L,$r[He]);oe.end=be,j<oe.error&&(oe.code=He,oe.error=j)}return oe.error>.48?null:oe}L[++de]=1,ve=!ve}return null}},{key:"_findStart",value:function(){for(var S=this._nextSet(this._row),N=null;!N;){if(!(N=this._findPattern(Lt,S,!1,!0)))return null;var L=N.start-(N.end-N.start);if(L>=0&&this._matchRange(L,N.start,0))return N;S=N.end,N=null}return null}},{key:"_calculateFirstDigit",value:function(S){for(var N=0;N<Mn.length;N++)if(S===Mn[N])return N;return null}},{key:"_decodePayload",value:function(S,N,L){for(var V=xn({},S),oe=0,ve=0;ve<6;ve++){if(!(V=this._decodeCode(V.end)))return null;V.code>=10?(V.code-=10,oe|=1<<5-ve):oe|=0<<5-ve,N.push(V.code),L.push(V)}var de=this._calculateFirstDigit(oe);if(null===de)return null;N.unshift(de);var be=this._findPattern(li,V.end,!0,!1);if(null===be||!be.end)return null;L.push(be);for(var He=0;He<6;He++){if(!(be=this._decodeCode(be.end,10)))return null;L.push(be),N.push(be.code)}return be}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start);return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"_findEnd",value:function(S,N){var L=this._findPattern(this.STOP_PATTERN,S,N,!1);return null!==L?this._verifyTrailingWhitespace(L):null}},{key:"_checksum",value:function(S){for(var N=0,L=S.length-2;L>=0;L-=2)N+=S[L];N*=3;for(var V=S.length-1;V>=0;V-=2)N+=S[V];return N%10==0}},{key:"_decodeExtensions",value:function(S){var N=this._nextSet(this._row,S),L=this._findPattern(ci,N,!1,!1);if(null===L)return null;for(var V=0;V<this.supplements.length;V++)try{var oe=this.supplements[V].decode(this._row,L.end);if(null!==oe)return{code:oe.code,start:N,startInfo:L,end:oe.end,decodedCodes:oe.decodedCodes,format:this.supplements[V].FORMAT}}catch(ve){console.error("* decodeExtensions error in ",this.supplements[V],": ",ve)}return null}},{key:"decode",value:function(S,N){var L=new Array,V=new Array,oe={},ve=this._findStart();if(!ve)return null;var de={start:ve.start,end:ve.end};if(V.push(de),!(de=this._decodePayload(de,L,V))||!(de=this._findEnd(de.end,!1))||(V.push(de),!this._checksum(L)))return null;if(this.supplements.length>0){var be=this._decodeExtensions(de.end);if(!be||!be.decodedCodes)return null;var He=be.decodedCodes[be.decodedCodes.length-1];if(!this._verifyTrailingWhitespace({start:He.start+((He.end-He.start)/2|0),end:He.end}))return null;oe={supplement:be,code:L.join("")+be.code}}return xn(xn({code:L.join(""),start:ve.start,end:de.end,startInfo:ve,decodedCodes:V},oe),{},{format:this.FORMAT})}}]),z}(ne);var Re=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","ean_2"),S}return Ie()(z,[{key:"decode",value:function(S,N){S&&(this._row=S);var L=0,V=N,oe=this._row.length,ve=[],de=[],be=null;if(void 0===V)return null;for(var He=0;He<2&&V<oe;He++){if(!(be=this._decodeCode(V)))return null;de.push(be),ve.push(be.code%10),be.code>=10&&(L|=1<<1-He),1!==He&&(V=this._nextSet(this._row,be.end),V=this._nextUnset(this._row,V))}if(2!==ve.length||parseInt(ve.join(""))%4!==L)return null;var j=this._findStart();return{code:ve.join(""),decodedCodes:de,end:be.end,format:this.FORMAT,startInfo:j,start:j.start}}}]),z}(Yn);var Le=[24,20,18,17,12,6,3,10,9,5],st=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","ean_5"),S}return Ie()(z,[{key:"decode",value:function(S,N){if(void 0===N)return null;S&&(this._row=S);for(var L=0,V=N,oe=this._row.length,ve=null,de=[],be=[],He=0;He<5&&V<oe;He++){if(!(ve=this._decodeCode(V)))return null;be.push(ve),de.push(ve.code%10),ve.code>=10&&(L|=1<<4-He),4!==He&&(V=this._nextSet(this._row,ve.end),V=this._nextUnset(this._row,V))}if(5!==de.length||function(pe){for(var Te=pe.length,Qe=0,yt=Te-2;yt>=0;yt-=2)Qe+=pe[yt];Qe*=3;for(var Pt=Te-1;Pt>=0;Pt-=2)Qe+=pe[Pt];return(Qe*=3)%10}(de)!==function(pe){for(var Te=0;Te<10;Te++)if(pe===Le[Te])return Te;return null}(L))return null;var j=this._findStart();return{code:de.join(""),decodedCodes:be,end:ve.end,format:this.FORMAT,startInfo:j,start:j.start}}}]),z}(Yn);var $e=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","ean_8"),S}return Ie()(z,[{key:"_decodePayload",value:function(S,N,L){for(var V=S,oe=0;oe<4;oe++){if(!(V=this._decodeCode(V.end,10)))return null;N.push(V.code),L.push(V)}if(null===(V=this._findPattern(li,V.end,!0,!1)))return null;L.push(V);for(var ve=0;ve<4;ve++){if(!(V=this._decodeCode(V.end,10)))return null;L.push(V),N.push(V.code)}return V}}]),z}(Yn);var wt=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(S){var N;return je()(this,z),N=_e.call(this,Y()({normalizeBarSpaceWidth:!1},S)),q()(J()(N),"barSpaceRatio",[1,1]),q()(J()(N),"SINGLE_CODE_ERROR",.78),q()(J()(N),"AVG_CODE_ERROR",.38),q()(J()(N),"START_PATTERN",[1,1,1,1]),q()(J()(N),"STOP_PATTERN",[1,1,3]),q()(J()(N),"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),q()(J()(N),"MAX_CORRECTION_FACTOR",5),q()(J()(N),"FORMAT","i2of5"),S.normalizeBarSpaceWidth&&(N.SINGLE_CODE_ERROR=.38,N.AVG_CODE_ERROR=.09),N.config=S,Ne()(N,J()(N))}return Ie()(z,[{key:"_matchPattern",value:function(S,N){if(this.config.normalizeBarSpaceWidth){for(var L=[0,0],V=[0,0],oe=[0,0],ve=this.MAX_CORRECTION_FACTOR,de=1/ve,be=0;be<S.length;be++)L[be%2]+=S[be],V[be%2]+=N[be];oe[0]=V[0]/L[0],oe[1]=V[1]/L[1],oe[0]=Math.max(Math.min(oe[0],ve),de),oe[1]=Math.max(Math.min(oe[1],ve),de),this.barSpaceRatio=oe;for(var He=0;He<S.length;He++)S[He]*=this.barSpaceRatio[He%2]}return _n()(ue()(z.prototype),"_matchPattern",this).call(this,S,N)}},{key:"_findPattern",value:function(S,N){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2],V=arguments.length>3&&void 0!==arguments[3]&&arguments[3],oe=new Array(S.length).fill(0),ve=0,de={error:Number.MAX_VALUE,start:0,end:0},be=this.AVG_CODE_ERROR;L=L||!1,V=V||!1,N||(N=this._nextSet(this._row));for(var He=N;He<this._row.length;He++)if(this._row[He]^(L?1:0))oe[ve]++;else{if(ve===oe.length-1){var j=oe.reduce(function(Qe,yt){return Qe+yt},0),pe=this._matchPattern(oe,S);if(pe<be)return de.error=pe,de.start=He-j,de.end=He,de;if(!V)return null;for(var Te=0;Te<oe.length-2;Te++)oe[Te]=oe[Te+2];oe[oe.length-2]=0,oe[oe.length-1]=0,ve--}else ve++;oe[ve]=1,L=!L}return null}},{key:"_findStart",value:function(){for(var S=0,N=this._nextSet(this._row),L=null,V=1;!L;){if(!(L=this._findPattern(this.START_PATTERN,N,!1,!0)))return null;if(V=Math.floor((L.end-L.start)/4),(S=L.start-10*V)>=0&&this._matchRange(S,L.start,0))return L;N=L.end,L=null}return null}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start)/2;return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}},{key:"_findEnd",value:function(){this._row.reverse();var S=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),null===S)return null;var N=S.start;return S.start=this._row.length-S.end,S.end=this._row.length-N,null!==S?this._verifyTrailingWhitespace(S):null}},{key:"_decodePair",value:function(S){for(var N=[],L=0;L<S.length;L++){var V=this._decodeCode(S[L]);if(!V)return null;N.push(V)}return N}},{key:"_decodeCode",value:function(S){for(var N=this.AVG_CODE_ERROR,L={error:Number.MAX_VALUE,code:-1,start:0,end:0},V=0;V<this.CODE_PATTERN.length;V++){var oe=this._matchPattern(S,this.CODE_PATTERN[V]);oe<L.error&&(L.code=V,L.error=oe)}return L.error<N?L:null}},{key:"_decodePayload",value:function(S,N,L){for(var V=0,oe=S.length,ve=[[0,0,0,0,0],[0,0,0,0,0]],de=null;V<oe;){for(var be=0;be<5;be++)ve[0][be]=S[V]*this.barSpaceRatio[0],ve[1][be]=S[V+1]*this.barSpaceRatio[1],V+=2;if(!(de=this._decodePair(ve)))return null;for(var He=0;He<de.length;He++)N.push(de[He].code+""),L.push(de[He])}return de}},{key:"_verifyCounterLength",value:function(S){return S.length%10==0}},{key:"decode",value:function(S,N){var L=new Array,V=new Array,oe=this._findStart();if(!oe)return null;V.push(oe);var ve=this._findEnd();if(!ve)return null;var de=this._fillCounters(oe.end,ve.start,!1);return this._verifyCounterLength(de)&&this._decodePayload(de,L,V)?L.length%2!=0||L.length<6?null:(V.push(ve),{code:L.join(""),start:oe.start,end:ve.end,startInfo:oe,decodedCodes:V,format:this.FORMAT}):null}}]),z}(ne);function Xt(ee,_e){var z=Object.keys(ee);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(ee);_e&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(ee,N).enumerable})),z.push.apply(z,S)}return z}var Gn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),q()(J()(S),"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),q()(J()(S),"FORMAT","upc_e"),S}return Ie()(z,[{key:"_decodePayload",value:function(S,N,L){for(var V=function(de){for(var be=1;be<arguments.length;be++){var He=null!=arguments[be]?arguments[be]:{};be%2?Xt(Object(He),!0).forEach(function(j){q()(de,j,He[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(He)):Xt(Object(He)).forEach(function(j){Object.defineProperty(de,j,Object.getOwnPropertyDescriptor(He,j))})}return de}({},S),oe=0,ve=0;ve<6;ve++){if(!(V=this._decodeCode(V.end)))return null;V.code>=10&&(V.code=V.code-10,oe|=1<<5-ve),N.push(V.code),L.push(V)}return this._determineParity(oe,N)?V:null}},{key:"_determineParity",value:function(S,N){for(var L=0;L<this.CODE_FREQUENCY.length;L++)for(var V=0;V<this.CODE_FREQUENCY[L].length;V++)if(S===this.CODE_FREQUENCY[L][V])return N.unshift(L),N.push(V),!0;return!1}},{key:"_convertToUPCA",value:function(S){var N=[S[0]],L=S[S.length-2];return(N=L<=2?N.concat(S.slice(1,3)).concat([L,0,0,0,0]).concat(S.slice(3,6)):3===L?N.concat(S.slice(1,4)).concat([0,0,0,0,0]).concat(S.slice(4,6)):4===L?N.concat(S.slice(1,5)).concat([0,0,0,0,0,S[5]]):N.concat(S.slice(1,6)).concat([0,0,0,0,L])).push(S[S.length-1]),N}},{key:"_checksum",value:function(S){return _n()(ue()(z.prototype),"_checksum",this).call(this,this._convertToUPCA(S))}},{key:"_findEnd",value:function(S,N){return _n()(ue()(z.prototype),"_findEnd",this).call(this,S,!0)}},{key:"_verifyTrailingWhitespace",value:function(S){var N=S.end+(S.end-S.start)/2;return N<this._row.length&&this._matchRange(S.end,N,0)?S:null}}]),z}(Yn);var Tr=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(){var S;je()(this,z);for(var N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];return S=_e.call.apply(_e,[this].concat(L)),q()(J()(S),"FORMAT","upc_a"),S}return Ie()(z,[{key:"decode",value:function(S,N){var L=Yn.prototype.decode.call(this);return L&&L.code&&13===L.code.length&&"0"===L.code.charAt(0)?(L.code=L.code.substring(1),L):null}}]),z}(Yn),Ye={},Be_UP=1,Be_DOWN=-1;Ye.getBarcodeLine=function(ee,_e,z){var S,N,L,V,oe,ve=0|_e.x,de=0|_e.y,be=0|z.x,He=0|z.y,j=Math.abs(He-de)>Math.abs(be-ve),pe=[],Te=ee.data,Qe=ee.size.x,yt=255,Pt=0;function Bt(Lr,Pn){yt=(oe=Te[Pn*Qe+Lr])<yt?oe:yt,Pt=oe>Pt?oe:Pt,pe.push(oe)}j&&(L=ve,ve=de,de=L,L=be,be=He,He=L),ve>be&&(L=ve,ve=be,be=L,L=de,de=He,He=L);var Ut=be-ve,ln=Math.abs(He-de);S=Ut/2|0,N=de;var rr=de<He?1:-1;for(V=ve;V<be;V++)j?Bt(N,V):Bt(V,N),(S-=ln)<0&&(N+=rr,S+=Ut);return{line:pe,min:yt,max:Pt}},Ye.toBinaryLine=function(ee){var _e,z,S,N,L,V,oe=ee.min,ve=ee.max,de=ee.line,be=oe+(ve-oe)/2,He=[],j=(ve-oe)/12,pe=-j;for(S=de[0]>be?Be_UP:Be_DOWN,He.push({pos:0,val:de[0]}),L=0;L<de.length-2;L++)S!==(N=(_e=de[L+1]-de[L])+(z=de[L+2]-de[L+1])<pe&&de[L+1]<1.5*be?Be_DOWN:_e+z>j&&de[L+1]>.5*be?Be_UP:S)&&(He.push({pos:L,val:de[L]}),S=N);for(He.push({pos:de.length,val:de[de.length-1]}),V=He[0].pos;V<He[1].pos;V++)de[V]=de[V]>be?0:1;for(L=1;L<He.length-1;L++)for(j=He[L+1].val>He[L].val?He[L].val+(He[L+1].val-He[L].val)/3*2|0:He[L+1].val+(He[L].val-He[L+1].val)/3|0,V=He[L].pos;V<He[L+1].pos;V++)de[V]=de[V]>j?0:1;return{line:de,threshold:j}},Ye.debug={printFrequency:function(ee,_e){var z,S=_e.getContext("2d");for(_e.width=ee.length,_e.height=256,S.beginPath(),S.strokeStyle="blue",z=0;z<ee.length;z++)S.moveTo(z,255),S.lineTo(z,255-ee[z]);S.stroke(),S.closePath()},printPattern:function(ee,_e){var z,S=_e.getContext("2d");for(_e.width=ee.length,S.fillColor="black",z=0;z<ee.length;z++)1===ee[z]&&S.fillRect(z,0,1,100)}};var Oe=Ye;function ct(ee,_e){var z="undefined"!=typeof Symbol&&ee[Symbol.iterator]||ee["@@iterator"];if(!z){if(Array.isArray(ee)||(z=function(ve,de){if(ve){if("string"==typeof ve)return Tt(ve,undefined);var be=Object.prototype.toString.call(ve).slice(8,-1);if("Object"===be&&ve.constructor&&(be=ve.constructor.name),"Map"===be||"Set"===be)return Array.from(ve);if("Arguments"===be||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(be))return Tt(ve,undefined)}}(ee))||_e&&ee&&"number"==typeof ee.length){z&&(ee=z);var S=0,N=function(){};return{s:N,n:function(){return S>=ee.length?{done:!0}:{done:!1,value:ee[S++]}},e:function(ve){throw ve},f:N}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var L,V=!0,oe=!1;return{s:function(){z=z.call(ee)},n:function(){var ve=z.next();return V=ve.done,ve},e:function(ve){oe=!0,L=ve},f:function(){try{V||null==z.return||z.return()}finally{if(oe)throw L}}}}function Tt(ee,_e){(null==_e||_e>ee.length)&&(_e=ee.length);for(var z=0,S=new Array(_e);z<_e;z++)S[z]=ee[z];return S}var sn={code_128_reader:Ot,ean_reader:Yn,ean_5_reader:st,ean_2_reader:Re,ean_8_reader:$e,code_39_reader:ri,code_39_vin_reader:Jn,codabar_reader:en,upc_reader:Tr,upc_e_reader:Gn,i2of5_reader:wt,"2of5_reader":lt,code_93_reader:Ln,code_32_reader:yi},Zt={registerReader:function(ee,_e){sn[ee]=_e},create:function(ee,_e){var S=[];function N(){ee.readers.forEach(function(de){var be,He={},j=[];"object"===O()(de)?(be=de.format,He=de.config):"string"==typeof de&&(be=de),He.supplements&&(j=He.supplements.map(function(Te){return new sn[Te]}));try{var pe=new sn[be](He,j);S.push(pe)}catch(Te){throw console.error("* Error constructing reader ",be,Te),Te}})}function L(de){var be,He=null,j=Oe.getBarcodeLine(_e,de[0],de[1]);for(Oe.toBinaryLine(j),be=0;be<S.length&&null===He;be++)He=S[be].decodePattern(j.line);return null===He?null:{codeResult:He,barcodeLine:j}}function V(de){return oe.apply(this,arguments)}function oe(){return(oe=te()(we.a.mark(function de(be){var He,j,pe,Te;return we.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:He=null,j=ct(S),Qe.prev=2,j.s();case 4:if((pe=j.n()).done){Qe.next=14;break}if(!(Te=pe.value).decodeImage){Qe.next=12;break}return Qe.next=9,Te.decodeImage(be);case 9:if(!(He=Qe.sent)){Qe.next=12;break}return Qe.abrupt("break",14);case 12:Qe.next=4;break;case 14:Qe.next=19;break;case 16:Qe.prev=16,Qe.t0=Qe.catch(2),j.e(Qe.t0);case 19:return Qe.prev=19,j.f(),Qe.finish(19);case 22:return Qe.abrupt("return",He);case 23:case"end":return Qe.stop()}},de,null,[[2,16,19,22]])}))).apply(this,arguments)}function ve(de){var be,He,Te,j=function(Te){return Math.sqrt(Math.pow(Math.abs(Te[1].y-Te[0].y),2)+Math.pow(Math.abs(Te[1].x-Te[0].x),2))}(be=[{x:((Te=de)[1][0]-Te[0][0])/2+Te[0][0],y:(Te[1][1]-Te[0][1])/2+Te[0][1]},{x:(Te[3][0]-Te[2][0])/2+Te[2][0],y:(Te[3][1]-Te[2][1])/2+Te[2][1]}]),pe=Math.atan2(be[1].y-be[0].y,be[1].x-be[0].x);return null===(be=function(Te,Qe,yt){function Pt(Bt){var Ut=Bt*Math.sin(Qe),ln=Bt*Math.cos(Qe);Te[0].y-=Ut,Te[0].x-=ln,Te[1].y+=Ut,Te[1].x+=ln}for(Pt(yt);yt>1&&(!_e.inImageWithBorder(Te[0])||!_e.inImageWithBorder(Te[1]));)Pt(-(yt-=Math.ceil(yt/2)));return Te}(be,pe,Math.floor(.1*j)))?null:(null===(He=L(be))&&(He=function(Te,Qe,yt){var Pt,Bt,Ut,ln=Math.sqrt(Math.pow(Te[1][0]-Te[0][0],2)+Math.pow(Te[1][1]-Te[0][1],2)),rr=null,Lr=Math.sin(yt),Pn=Math.cos(yt);for(Pt=1;Pt<16&&null===rr;Pt++)Ut={y:(Bt=ln/16*Pt*(Pt%2==0?-1:1))*Lr,x:Bt*Pn},Qe[0].y+=Ut.x,Qe[0].x-=Ut.y,Qe[1].y+=Ut.x,Qe[1].x-=Ut.y,rr=L(Qe);return rr}(de,be,pe)),null===He?null:{codeResult:He.codeResult,line:be,angle:pe,pattern:He.barcodeLine.line,threshold:He.barcodeLine.threshold})}return N(),{decodeFromBoundingBox:function(de){return ve(de)},decodeFromBoundingBoxes:function(de){var be,He,j=[],pe=ee.multiple;for(be=0;be<de.length;be++){var Te=de[be];if((He=ve(Te)||{}).box=Te,pe)j.push(He);else if(He.codeResult)return He}return{barcodes:j}},decodeFromImage:function(de){return te()(we.a.mark(function be(){return we.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,V(de);case 2:return j.abrupt("return",j.sent);case 4:case"end":return j.stop()}},be)}))()},registerReader:function(de,be){if(sn[de])throw new Error("cannot register existing reader",de);sn[de]=be},setReaders:function(de){ee.readers=de,S.length=0,N()}}}},hn=function(){var ee={};function _e(N){return ee[N]||(ee[N]={subscribers:[]}),ee[N]}function z(N,L){N.async?setTimeout(function(){N.callback(L)},4):N.callback(L)}function S(N,L,V){var oe;if("function"==typeof L)oe={callback:L,async:V};else if(!(oe=L).callback)throw new Error("Callback was not specified on options");_e(N).subscribers.push(oe)}return{subscribe:function(N,L,V){return S(N,L,V)},publish:function(N,L){var V=_e(N),oe=V.subscribers;oe.filter(function(ve){return!!ve.once}).forEach(function(ve){z(ve,L)}),V.subscribers=oe.filter(function(ve){return!ve.once}),V.subscribers.forEach(function(ve){z(ve,L)})},once:function(N,L){S(N,{callback:L,async:arguments.length>2&&void 0!==arguments[2]&&arguments[2],once:!0})},unsubscribe:function(N,L){if(N){var V=_e(N);V.subscribers=V&&L?V.subscribers.filter(function(oe){return oe.callback!==L}):[]}else ee={}}}}(),Dn=s(62),$n=s.n(Dn),_r=s(63);var Gt,Wn=function(ee){De()(z,ee);var _e=function(ee){var _e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}();return function(){var z,S=ue()(ee);if(_e){var N=ue()(this).constructor;z=Reflect.construct(S,arguments,N)}else z=S.apply(this,arguments);return Ne()(this,z)}}(z);function z(S,N){var L;return je()(this,z),L=_e.call(this,S),q()(J()(L),"code",void 0),L.code=N,Object.setPrototypeOf(J()(L),z.prototype),L}return Ie()(z)}(s.n(_r)()(Error)),ii="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Ai(){try{return navigator.mediaDevices.enumerateDevices()}catch(_e){var ee=new Wn("enumerateDevices is not defined. ".concat(ii),-1);return Promise.reject(ee)}}function Rr(ee){try{return navigator.mediaDevices.getUserMedia(ee)}catch(z){var _e=new Wn("getUserMedia is not defined. ".concat(ii),-1);return Promise.reject(_e)}}function dr(ee){return new Promise(function(_e,z){var S=10;!function N(){S>0?ee.videoWidth>10&&ee.videoHeight>10?_e():window.setTimeout(N,500):z(new Wn("Unable to play video stream. Is webcam working?",-1)),S--}()})}function hr(ee,_e){return xi.apply(this,arguments)}function xi(){return(xi=te()(we.a.mark(function ee(_e,z){var S;return we.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Rr(z);case 2:if(Gt=S=N.sent,!_e){N.next=11;break}return _e.setAttribute("autoplay","true"),_e.setAttribute("muted","true"),_e.setAttribute("playsinline","true"),_e.srcObject=S,_e.addEventListener("loadedmetadata",function(){_e.play().catch(function(L){console.warn("* Error while trying to play video stream:",L)})}),N.abrupt("return",dr(_e));case 11:return N.abrupt("return",Promise.resolve());case 12:case"end":return N.stop()}},ee)}))).apply(this,arguments)}function ps(ee){var _e=$n()(ee,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==ee.minAspectRatio&&ee.minAspectRatio>0&&(_e.aspectRatio=ee.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==ee.facing&&(_e.facingMode=ee.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),_e}function an(){var _e=ps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return _e&&_e.deviceId&&_e.facingMode&&delete _e.facingMode,Promise.resolve({audio:!1,video:_e})}function $i(){return($i=te()(we.a.mark(function ee(){return we.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Ai();case 2:return z.abrupt("return",z.sent.filter(function(S){return"videoinput"===S.kind}));case 4:case"end":return z.stop()}},ee)}))).apply(this,arguments)}function vi(){if(!Gt)return null;var ee=Gt.getVideoTracks();return ee&&null!=ee&&ee.length?ee[0]:null}var Or={requestedVideoElement:null,request:function(ee,_e){return te()(we.a.mark(function z(){return we.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return Or.requestedVideoElement=ee,N.next=3,an(_e);case 3:return N.abrupt("return",hr(ee,N.sent));case 5:case"end":return N.stop()}},z)}))()},release:function(){var ee=Gt&&Gt.getVideoTracks();return null!==Or.requestedVideoElement&&Or.requestedVideoElement.pause(),new Promise(function(_e){setTimeout(function(){ee&&ee.length&&ee.forEach(function(z){return z.stop()}),Gt=null,Or.requestedVideoElement=null,_e()},0)})},enumerateVideoDevices:function(){return $i.apply(this,arguments)},getActiveStreamLabel:function(){var ee=vi();return ee?ee.label:""},getActiveTrack:vi,disableTorch:function(){return te()(we.a.mark(function ee(){var _e;return we.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(_e=vi())){z.next=11;break}return z.prev=2,z.next=5,_e.applyConstraints({advanced:[{torch:!1}]});case 5:z.next=11;break;case 7:throw z.prev=7,z.t0=z.catch(2),z.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),z.t0;case 11:case"end":return z.stop()}},ee,null,[[2,7]])}))()},enableTorch:function(){return te()(we.a.mark(function ee(){var _e;return we.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(_e=vi())){z.next=11;break}return z.prev=2,z.next=5,_e.applyConstraints({advanced:[{torch:!0}]});case 5:z.next=11;break;case 7:throw z.prev=7,z.t0=z.catch(2),z.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),z.t0;case 11:case"end":return z.stop()}},ee,null,[[2,7]])}))()}},bi=Or,Vn={create:function(ee){var _e,z=document.createElement("canvas"),S=z.getContext("2d",{willReadFrequently:!!ee.willReadFrequently}),N=[],L=null!==(_e=ee.capacity)&&void 0!==_e?_e:20,V=!0===ee.capture;return{addResult:function(ve,de,be){var He={};(function(ve){return!!L&&ve&&(de=ve,!((be=ee.blacklist)&&be.some(function(He){return Object.keys(He).every(function(j){return He[j]===de[j]})})))&&function(de,be){return"function"!=typeof be||be(de)}(ve,ee.filter);var de,be})(be)&&(L--,He.codeResult=be,V&&(z.width=de.x,z.height=de.y,Je.a.drawImage(ve,de,S),He.frame=z.toDataURL()),N.push(He))},getResults:function(){return N}}}},Gs={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Fr=s(5),Wr=s(10),Un=Math.PI/180,Zo={create:function(ee,_e){var z,S={},N=ee.getConfig(),L=(Object(Wr.h)(ee.getRealWidth(),ee.getRealHeight()),ee.getCanvasSize()),V=Object(Wr.h)(ee.getWidth(),ee.getHeight()),oe=ee.getTopRight(),ve=oe.x,de=oe.y,be=null,He=null,j=N.willReadFrequently;return(z=_e||document.createElement("canvas")).width=L.x,z.height=L.y,console.warn("*** frame_grabber_browser: willReadFrequently=",j,"canvas=",z),be=z.getContext("2d",{willReadFrequently:!!j}),He=new Uint8Array(V.x*V.y),S.attachData=function(pe){He=pe},S.getData=function(){return He},S.grab=function(){var pe,Bt,Ut,Te=N.halfSample,Qe=ee.getFrame(),yt=Qe,Pt=0;if(yt){if((Bt=z).width!==(Ut=L).x&&(Bt.width=Ut.x),Bt.height!==Ut.y&&(Bt.height=Ut.y),"ImageStream"===N.type&&(yt=Qe.img,Qe.tags&&Qe.tags.orientation))switch(Qe.tags.orientation){case 6:Pt=90*Un;break;case 8:Pt=-90*Un}return 0!==Pt?(be.translate(L.x/2,L.y/2),be.rotate(Pt),be.drawImage(yt,-L.y/2,-L.x/2,L.y,L.x),be.rotate(-Pt),be.translate(-L.x/2,-L.y/2)):be.drawImage(yt,0,0,L.x,L.y),pe=be.getImageData(ve,de,V.x,V.y).data,Te?Object(Wr.e)(pe,V,He):Object(Wr.c)(pe,He,N),!0}return!1},S.getSize=function(){return V},S}},Wi=Zo,Pi={274:"orientation"},Is=Object.keys(Pi).map(function(ee){return Pi[ee]});function qr(ee){return new Promise(function(_e){var z=new FileReader;z.onload=function(S){return _e(S.target.result)},z.readAsArrayBuffer(ee)})}function Ts(ee){return new Promise(function(_e,z){var S=new XMLHttpRequest;S.open("GET",ee,!0),S.responseType="blob",S.onreadystatechange=function(){S.readyState!==XMLHttpRequest.DONE||200!==S.status&&0!==S.status||_e(this.response)},S.onerror=z,S.send()})}function ts(ee){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is,z=new DataView(ee),S=ee.byteLength,N=_e.reduce(function(V,oe){var ve=Object.keys(Pi).filter(function(de){return Pi[de]===oe})[0];return ve&&(V[ve]=oe),V},{}),L=2;if(255!==z.getUint8(0)||216!==z.getUint8(1))return!1;for(;L<S;){if(255!==z.getUint8(L))return!1;if(225===z.getUint8(L+1))return yr(z,L+4,N);L+=2+z.getUint16(L+2)}return!1}function yr(ee,_e,z){if("Exif"!==function(V,oe,ve){for(var de="",be=oe;be<oe+4;be++)de+=String.fromCharCode(V.getUint8(be));return de}(ee,_e))return!1;var S,N=_e+6;if(18761===ee.getUint16(N))S=!1;else{if(19789!==ee.getUint16(N))return!1;S=!0}if(42!==ee.getUint16(N+2,!S))return!1;var L=ee.getUint32(N+4,!S);return!(L<8)&&function(V,oe,ve,de,be){for(var He=V.getUint16(ve,!be),j={},pe=0;pe<He;pe++){var Te=ve+12*pe+2,Qe=de[V.getUint16(Te,!be)];Qe&&(j[Qe]=$s(V,Te,0,0,be))}return j}(ee,0,N+L,z,S)}function $s(ee,_e,z,S,N){var L=ee.getUint16(_e+2,!N),V=ee.getUint32(_e+4,!N);return 3===L&&1===V?ee.getUint16(_e+8,!N):null}var ei={};function ui(ee,_e){ee.onload=function(){_e.loaded(this)}}ei.load=function(ee,_e,z,S,N){var L,V,oe,ve=new Array(S),de=new Array(ve.length);if(!1===N)ve[0]=ee;else for(L=0;L<ve.length;L++)oe=z+L,ve[L]="".concat(ee,"image-").concat("00".concat(oe).slice(-3),".jpg");for(de.notLoaded=[],de.addImage=function(be){de.notLoaded.push(be)},de.loaded=function(be){for(var He=de.notLoaded,j=0;j<He.length;j++)if(He[j]===be){He.splice(j,1);for(var pe=0;pe<ve.length;pe++){var Te=ve[pe].substr(ve[pe].lastIndexOf("/"));if(-1!==be.src.lastIndexOf(Te)){de[pe]={img:be};break}}break}0===He.length&&(!1===N?function(Qe){var yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;return/^blob:/i.test(Qe)?Ts(Qe).then(qr).then(function(Pt){return ts(Pt,yt)}):Promise.resolve(null)}(ee,["orientation"]).then(function(Qe){de[0].tags=Qe,_e(de)}).catch(function(Qe){console.log(Qe),_e(de)}):_e(de))},L=0;L<ve.length;L++)V=new Image,de.addImage(V),ui(V,de),V.src=ve[L]};var Ws=ei,qi={createVideoStream:function(ee){console.warn("**** InputStreamBrowser createVideoStream");var _e,z,S=null,N=["canrecord","ended"],L={},V={x:0,y:0,type:"Point"},oe={x:0,y:0,type:"XYSize"},ve={getRealWidth:function(){return ee.videoWidth},getRealHeight:function(){return ee.videoHeight},getWidth:function(){return _e},getHeight:function(){return z},setWidth:function(de){_e=de},setHeight:function(de){z=de},setInputStream:function(de){S=de,this.setAttribute("src",void 0!==de.src?de.src:"")},ended:function(){return ee.ended},getConfig:function(){return S},setAttribute:function(de,be){ee&&ee.setAttribute(de,be)},pause:function(){ee.pause()},play:function(){ee.play()},setCurrentTime:function(de){var be;"LiveStream"!==(null===(be=S)||void 0===be?void 0:be.type)&&this.setAttribute("currentTime",de.toString())},addEventListener:function(de,be,He){-1!==N.indexOf(de)?(L[de]||(L[de]=[]),L[de].push(be)):ee.addEventListener(de,be,He)},clearEventHandlers:function(){N.forEach(function(de){var be=L[de];be&&be.length>0&&be.forEach(function(He){ee.removeEventListener(de,He)})})},trigger:function(de,be){var He,j,pe,Te,Qe,yt=L[de];if("canrecord"===de&&(Te=ee.videoWidth,Qe=ee.videoHeight,_e=null!==(j=S)&&void 0!==j&&j.size?Te/Qe>1?S.size:Math.floor(Te/Qe*S.size):Te,z=null!==(pe=S)&&void 0!==pe&&pe.size?Te/Qe>1?Math.floor(Qe/Te*S.size):S.size:Qe,oe.x=_e,oe.y=z),yt&&yt.length>0)for(He=0;He<yt.length;He++)yt[He].apply(ve,be)},setTopRight:function(de){V.x=de.x,V.y=de.y},getTopRight:function(){return V},setCanvasSize:function(de){oe.x=de.x,oe.y=de.y},getCanvasSize:function(){return oe},getFrame:function(){return ee}};return ve},createLiveStream:function(ee){console.warn("**** InputStreamBrowser createLiveStream"),ee&&ee.setAttribute("autoplay","true");var _e=qi.createVideoStream(ee);return _e.ended=function(){return!1},_e},createImageStream:function(){var ee,_e,z=null,S=0,N=0,L=0,V=!0,oe=!1,ve=null,de=0,be=null,He=!1,j=["canrecord","ended"],pe={},Te={x:0,y:0,type:"Point"},Qe={x:0,y:0,type:"XYSize"};function yt(Bt,Ut){var ln,rr=pe[Bt];if(rr&&rr.length>0)for(ln=0;ln<rr.length;ln++)rr[ln].apply(Pt,Ut)}var Pt={trigger:yt,getWidth:function(){return ee},getHeight:function(){return _e},setWidth:function(Bt){ee=Bt},setHeight:function(Bt){_e=Bt},getRealWidth:function(){return S},getRealHeight:function(){return N},setInputStream:function(Bt){var Ut;!1===Bt.sequence?(be=Bt.src,de=1):(be=Bt.src,de=Bt.length),oe=!1,Ws.load(be,function(ln){var rr,Lr;if(ve=ln,ln[0].tags&&ln[0].tags.orientation)switch(ln[0].tags.orientation){case 6:case 8:S=ln[0].img.height,N=ln[0].img.width;break;default:S=ln[0].img.width,N=ln[0].img.height}else S=ln[0].img.width,N=ln[0].img.height;ee=null!==(rr=z)&&void 0!==rr&&rr.size?S/N>1?z.size:Math.floor(S/N*z.size):S,_e=null!==(Lr=z)&&void 0!==Lr&&Lr.size?S/N>1?Math.floor(N/S*z.size):z.size:N,Qe.x=ee,Qe.y=_e,oe=!0,L=0,setTimeout(function(){yt("canrecord",[])},0)},1,de,null===(Ut=z=Bt)||void 0===Ut?void 0:Ut.sequence)},ended:function(){return He},setAttribute:function(){},getConfig:function(){return z},pause:function(){V=!0},play:function(){V=!1},setCurrentTime:function(Bt){L=Bt},addEventListener:function(Bt,Ut){-1!==j.indexOf(Bt)&&(pe[Bt]||(pe[Bt]=[]),pe[Bt].push(Ut))},clearEventHandlers:function(){Object.keys(pe).forEach(function(Bt){return delete pe[Bt]})},setTopRight:function(Bt){Te.x=Bt.x,Te.y=Bt.y},getTopRight:function(){return Te},setCanvasSize:function(Bt){Qe.x=Bt.x,Qe.y=Bt.y},getCanvasSize:function(){return Qe},getFrame:function(){var Bt,Ut;return oe?(V||(Bt=null===(Ut=ve)||void 0===Ut?void 0:Ut[L],L<de-1?L++:setTimeout(function(){He=!0,yt("ended",[])},0)),Bt):null}};return Pt}},qs=qi,ti=s(23),Do=Ie()(function ee(){je()(this,ee),q()(this,"config",void 0),q()(this,"inputStream",void 0),q()(this,"framegrabber",void 0),q()(this,"inputImageWrapper",void 0),q()(this,"stopped",!1),q()(this,"boxSize",void 0),q()(this,"resultCollector",void 0),q()(this,"decoder",void 0),q()(this,"workerPool",[]),q()(this,"onUIThread",!0),q()(this,"canvasContainer",new F)}),ao=Ie()(function ee(){je()(this,ee),q()(this,"image",void 0),q()(this,"overlay",void 0)}),F=Ie()(function ee(){je()(this,ee),q()(this,"ctx",void 0),q()(this,"dom",void 0),this.ctx=new ao,this.dom=new ao});function K(ee){return"undefined"==typeof document?null:ee instanceof HTMLElement&&ee.nodeName&&1===ee.nodeType?ee:document.querySelector("string"==typeof ee?ee:"#interactive.viewport")}function fe(ee,_e,z){var V,oe,S=(V=_e,(oe=document.querySelector(ee))||((oe=document.createElement("canvas")).className=V),oe);console.warn("* initCanvas getCanvasAndContext");var N=S.getContext("2d",{willReadFrequently:z.willReadFrequently});return{canvas:S,context:N}}function tt(ee,_e){var z=Object.keys(ee);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(ee);_e&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(ee,N).enumerable})),z.push.apply(z,S)}return z}function mt(ee){for(var _e=1;_e<arguments.length;_e++){var z=null!=arguments[_e]?arguments[_e]:{};_e%2?tt(Object(z),!0).forEach(function(S){q()(ee,S,z[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(z)):tt(Object(z)).forEach(function(S){Object.defineProperty(ee,S,Object.getOwnPropertyDescriptor(z,S))})}return ee}Fr.a.setMatrixArrayType(Array);var Dt=[];function Jt(ee){return mt(mt({},ee),{},{inputStream:mt(mt({},ee.inputStream),{},{target:null})})}function bn(ee){if(ee){var _e=ee().default;if(!_e)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var z;function S(L){self.postMessage({event:"processed",imageData:z.data,result:L},[z.data.buffer])}function N(){self.postMessage({event:"initialized",imageData:z.data},[z.data.buffer])}self.onmessage=function(L){if("init"===L.data.cmd){var V=L.data.config;V.numOfWorkers=0,z=new _e.ImageWrapper({x:L.data.size.x,y:L.data.size.y},new Uint8Array(L.data.imageData)),_e.init(V,N,z),_e.onProcessed(S)}else"process"===L.data.cmd?(z.data=new Uint8Array(L.data.imageData),_e.start()):"setReaders"===L.data.cmd?_e.setReaders(L.data.readers):"registerReader"===L.data.cmd&&_e.registerReader(L.data.name,L.data.reader)}}function fr(ee,_e,z){var S,N,L=("undefined"!=typeof __factorySource__&&(N=__factorySource__),S=new Blob(["("+bn.toString()+")("+N+");"],{type:"text/javascript"}),window.URL.createObjectURL(S)),V={worker:new Worker(L),imageData:new Uint8Array(_e.getWidth()*_e.getHeight()),busy:!0};V.worker.onmessage=function(oe){"initialized"===oe.data.event?(URL.revokeObjectURL(L),V.busy=!1,V.imageData=new Uint8Array(oe.data.imageData),z(V)):"processed"===oe.data.event&&(V.imageData=new Uint8Array(oe.data.imageData),V.busy=!1)},V.worker.postMessage({cmd:"init",size:{x:_e.getWidth(),y:_e.getHeight()},imageData:V.imageData,config:Jt(ee)},[V.imageData.buffer])}function Zr(ee,_e,z,S){var N=ee-Dt.length;if(0===N&&S)S();else if(N<0)Dt.slice(N).forEach(function(oe){oe.worker.terminate()}),Dt=Dt.slice(0,N),S&&S();else{var L=function(oe){Dt.push(oe),Dt.length>=ee&&S&&S()};if(_e)for(var V=0;V<N;V++)fr(_e,z,L)}}function Ni(ee,_e,z){for(var S=ee.length;S--;)ee[S][0]+=_e,ee[S][1]+=z}Fr.a.setMatrixArrayType(Array);var wi=function(){function ee(){var S=this;je()(this,ee),q()(this,"context",new Do),q()(this,"canRecord",function(N){var L;S.context.config&&(ti.a.checkImageConstraints(S.context.inputStream,null===(L=S.context.config)||void 0===L?void 0:L.locator),S.initCanvas(),S.context.framegrabber=Wi.create(S.context.inputStream,S.context.canvasContainer.dom.image),void 0===S.context.config.numOfWorkers&&(S.context.config.numOfWorkers=0),Zr(S.context.config.numOfWorkers,S.context.config,S.context.inputStream,function(){var V;0===(null===(V=S.context.config)||void 0===V?void 0:V.numOfWorkers)&&S.initializeData(),S.ready(N)}))}),q()(this,"update",function(){if(S.context.onUIThread){var N,L=(oe=S.context.framegrabber,Dt.length?!!(ve=Dt.filter(function(de){return!de.busy})[0])&&(oe.attachData(ve.imageData),oe.grab()&&(ve.busy=!0,ve.worker.postMessage({cmd:"process",imageData:ve.imageData},[ve.imageData.buffer])),!0):null);L||(S.context.framegrabber.attachData(null===(N=S.context.inputImageWrapper)||void 0===N?void 0:N.data),S.context.framegrabber.grab()&&(L||S.locateAndDecode()))}else{var V;S.context.framegrabber.attachData(null===(V=S.context.inputImageWrapper)||void 0===V?void 0:V.data),S.context.framegrabber.grab(),S.locateAndDecode()}var oe,ve})}var _e,z;return Ie()(ee,[{key:"initBuffers",value:function(S){if(this.context.config){var N=(oe=this.context.inputStream,de=this.context.config.locator,be=S||new re.a({x:oe.getWidth(),y:oe.getHeight(),type:"XYSize"}),He=[Fr.c.clone([0,0]),Fr.c.clone([0,be.size.y]),Fr.c.clone([be.size.x,be.size.y]),Fr.c.clone([be.size.x,0])],ti.a.init(be,de),{inputImageWrapper:be,boxSize:He}),V=N.boxSize;this.context.inputImageWrapper=N.inputImageWrapper,this.context.boxSize=V}var oe,de,be,He}},{key:"initializeData",value:function(S){this.context.config&&(this.initBuffers(S),this.context.decoder=Zt.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?K(this.context.config.inputStream.target):null}},{key:"ready",value:function(S){this.context.inputStream.play(),S()}},{key:"initCanvas",value:function(){var S=function(ee){var _e,z,S,N,L,V,oe=K(null==ee||null===(_e=ee.config)||void 0===_e||null===(z=_e.inputStream)||void 0===z?void 0:z.target),ve=null==ee||null===(S=ee.config)||void 0===S||null===(N=S.inputStream)||void 0===N?void 0:N.type;if(!ve)return null;var de=function(He,j){var pe=j.willReadFrequently;if("undefined"!=typeof document){var Te=fe("canvas.imgBuffer","imgBuffer",{willReadFrequently:pe}),Qe=fe("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:pe});return Te.canvas.width=Qe.canvas.width=He.x,Te.canvas.height=Qe.canvas.height=He.y,{dom:{image:Te.canvas,overlay:Qe.canvas},ctx:{image:Te.context,overlay:Qe.context}}}return null}(ee.inputStream.getCanvasSize(),{willReadFrequently:!(null==ee||null===(L=ee.config)||void 0===L||null===(V=L.inputStream)||void 0===V||!V.willReadFrequently)});if(!de)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var be=de.dom;return"undefined"!=typeof document&&oe&&("ImageStream"!==ve||oe.contains(be.image)||oe.appendChild(be.image),oe.contains(be.overlay)||oe.appendChild(be.overlay)),de}(this.context);if(S){var N=S.ctx,L=S.dom;this.context.canvasContainer.dom.image=L.image,this.context.canvasContainer.dom.overlay=L.overlay,this.context.canvasContainer.ctx.image=N.image,this.context.canvasContainer.ctx.overlay=N.overlay}}},{key:"initInputStream",value:function(S){if(this.context.config&&this.context.config.inputStream){var N=this.context.config.inputStream,L=N.type,V=N.constraints,oe=function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",He=arguments.length>1?arguments[1]:void 0,j=arguments.length>2?arguments[2]:void 0;switch(be){case"VideoStream":var pe=document.createElement("video");return{video:pe,inputStream:j.createVideoStream(pe)};case"ImageStream":return{inputStream:j.createImageStream()};case"LiveStream":var Te=null;return He&&((Te=He.querySelector("video"))||(Te=document.createElement("video"),He.appendChild(Te))),{video:Te,inputStream:j.createLiveStream(Te)};default:return console.error("* setupInputStream invalid type ".concat(be)),{video:null,inputStream:null}}}(L,this.getViewPort(),qs),ve=oe.video,de=oe.inputStream;"LiveStream"===L&&ve&&bi.request(ve,V).then(function(){return de.trigger("canrecord")}).catch(function(be){return S(be)}),de&&(de.setAttribute("preload","auto"),de.setInputStream(this.context.config.inputStream),de.addEventListener("canrecord",this.canRecord.bind(void 0,S))),this.context.inputStream=de}}},{key:"getBoundingBoxes",value:function(){var S;return null!==(S=this.context.config)&&void 0!==S&&S.locate?ti.a.locate():[[Fr.c.clone(this.context.boxSize[0]),Fr.c.clone(this.context.boxSize[1]),Fr.c.clone(this.context.boxSize[2]),Fr.c.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(S){var de,be,He,N=this,L=this.context.inputStream.getTopRight(),V=L.x,oe=L.y;if((0!==V||0!==oe)&&(S.barcodes&&S.barcodes.forEach(function(de){return N.transformResult(de)}),S.line&&2===S.line.length&&(He=oe,(de=S.line)[0].x+=be=V,de[0].y+=He,de[1].x+=be,de[1].y+=He),S.box&&Ni(S.box,V,oe),S.boxes&&S.boxes.length>0))for(var ve=0;ve<S.boxes.length;ve++)Ni(S.boxes[ve],V,oe)}},{key:"addResult",value:function(S,N){var L=this;N&&this.context.resultCollector&&(S.barcodes?S.barcodes.filter(function(V){return V.codeResult}).forEach(function(V){return L.addResult(V,N)}):S.codeResult&&this.context.resultCollector.addResult(N,this.context.inputStream.getCanvasSize(),S.codeResult))}},{key:"hasCodeResult",value:function(S){return!(!S||!(S.barcodes?S.barcodes.some(function(N){return N.codeResult}):S.codeResult))}},{key:"publishResult",value:function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,N=arguments.length>1?arguments[1]:void 0,L=S;S&&this.context.onUIThread&&(this.transformResult(S),this.addResult(S,N),L=S.barcodes||S),hn.publish("processed",L),this.hasCodeResult(S)&&hn.publish("detected",L)}},{key:"locateAndDecode",value:(z=te()(we.a.mark(function S(){var N,L,V,oe,ve;return we.a.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(!(N=this.getBoundingBoxes())){de.next=12;break}return de.next=4,this.context.decoder.decodeFromBoundingBoxes(N);case 4:if(de.t0=de.sent,de.t0){de.next=7;break}de.t0={};case 7:(V=de.t0).boxes=N,this.publishResult(V,null===(L=this.context.inputImageWrapper)||void 0===L?void 0:L.data),de.next=16;break;case 12:return de.next=14,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 14:(oe=de.sent)?this.publishResult(oe,null===(ve=this.context.inputImageWrapper)||void 0===ve?void 0:ve.data):this.publishResult();case 16:case"end":return de.stop()}},S,this)})),function(){return z.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var S,N=this,L=null,V=1e3/((null===(S=this.context.config)||void 0===S?void 0:S.frequency)||60);this.context.stopped=!1;var oe=this.context;!function ve(de){L=L||de,oe.stopped||(de>=L&&(L+=V,N.update()),window.requestAnimationFrame(ve))}(performance.now())}},{key:"start",value:function(){var S,N;this.context.onUIThread&&"LiveStream"===(null===(S=this.context.config)||void 0===S||null===(N=S.inputStream)||void 0===N?void 0:N.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(_e=te()(we.a.mark(function S(){var N;return we.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(this.context.stopped=!0,Zr(0),null===(N=this.context.config)||void 0===N||!N.inputStream||"LiveStream"!==this.context.config.inputStream.type){L.next=6;break}return L.next=5,bi.release();case 5:this.context.inputStream.clearEventHandlers();case 6:case"end":return L.stop()}},S,this)})),function(){return _e.apply(this,arguments)})},{key:"setReaders",value:function(S){var N;this.context.decoder&&this.context.decoder.setReaders(S),N=S,Dt.forEach(function(L){return L.worker.postMessage({cmd:"setReaders",readers:N})})}},{key:"registerReader",value:function(S,N){var L,V;Zt.registerReader(S,N),this.context.decoder&&this.context.decoder.registerReader(S,N),L=S,V=N,Dt.forEach(function(oe){return oe.worker.postMessage({cmd:"registerReader",name:L,reader:V})})}}]),ee}(),Ci=new wi,lo=Ci.context,Ao={init:function(ee,_e,z){var S,N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ci;return _e||(S=new Promise(function(L,V){_e=function(oe){oe?V(oe):L()}})),N.context.config=Y()({},Gs,ee),N.context.config.numOfWorkers>0&&(N.context.config.numOfWorkers=0),z?(N.context.onUIThread=!1,N.initializeData(z),_e&&_e()):N.initInputStream(_e),S},start:function(){return Ci.start()},stop:function(){return Ci.stop()},pause:function(){lo.stopped=!0},onDetected:function(ee){ee&&("function"==typeof ee||"object"===O()(ee)&&ee.callback)?hn.subscribe("detected",ee):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(ee){hn.unsubscribe("detected",ee)},onProcessed:function(ee){ee&&("function"==typeof ee||"object"===O()(ee)&&ee.callback)?hn.subscribe("processed",ee):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(ee){hn.unsubscribe("processed",ee)},setReaders:function(ee){ee?Ci.setReaders(ee):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(ee,_e){ee?_e?Ci.registerReader(ee,_e):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(ee){ee&&"function"==typeof ee.addResult&&(lo.resultCollector=ee)},get canvas(){return lo.canvasContainer},decodeSingle:function(ee,_e){var z=this,S=new wi;return(ee=Y()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:ee.src},numOfWorkers:1,locator:{halfSample:!1}},ee)).numOfWorkers>0&&(ee.numOfWorkers=0),ee.numOfWorkers>0&&("undefined"==typeof Blob||"undefined"==typeof Worker)&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),ee.numOfWorkers=0),new Promise(function(N,L){try{z.init(ee,function(){hn.once("processed",function(V){S.stop(),_e&&_e.call(null,V),N(V)},!0),S.start()},null,S)}catch(V){L(V)}})},get default(){return Ao},Readers:I,CameraAccess:bi,ImageDebug:Je.a,ImageWrapper:re.a,ResultCollector:Vn};R.default=Ao}]).default},6670:(St,M,R)=>{"use strict";R.d(M,{$:()=>cn,A:()=>X,B:()=>qe,G:()=>xi,H:()=>Or,J:()=>Ze,L:()=>Gn,M:()=>z,N:()=>V,P:()=>Iu,Q:()=>oe,R:()=>bd,T:()=>ve,U:()=>L,V:()=>j,W:()=>pe,X:()=>Bt,Y:()=>Mo,Z:()=>Sl,_:()=>Dl,a:()=>pi,a0:()=>fu,a1:()=>pd,a2:()=>Qn,a3:()=>ni,a4:()=>ea,a5:()=>pu,a6:()=>hg,a7:()=>zh,a8:()=>Rl,a9:()=>Li,aA:()=>xs,aB:()=>pr,aC:()=>Au,aD:()=>Id,aE:()=>dr,aI:()=>jl,aL:()=>be,aa:()=>uo,ab:()=>gd,ac:()=>Gh,af:()=>Fl,ag:()=>md,ah:()=>gu,ak:()=>Pn,al:()=>Vr,an:()=>_d,ao:()=>Sc,ap:()=>$n,aq:()=>q,ar:()=>Dn,as:()=>sn,at:()=>Se,au:()=>ec,av:()=>yg,aw:()=>De,ax:()=>ue,ay:()=>ne,az:()=>on,b:()=>xt,c:()=>_g,d:()=>Su,e:()=>go,f:()=>Z,g:()=>pn,h:()=>et,i:()=>Qr,j:()=>Cn,k:()=>rf,l:()=>Yh,m:()=>_y,n:()=>tc,o:()=>re,r:()=>fo,s:()=>ql,u:()=>Cu});var s=R(8239),I=R(4213),b=R(1572),k=R(4762),O=R(3855),U=R(1177);const re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},X={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new I.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new O.Yd("@firebase/auth");function J(w,...m){me.logLevel<=O.in.ERROR&&me.error(`Auth (${b.SDK_VERSION}): ${w}`,...m)}function Se(w,...m){throw Ue(w,...m)}function De(w,...m){return Ue(w,...m)}function Fe(w,m,y){const T=Object.assign(Object.assign({},je()),{[m]:y});return new I.LL("auth","Firebase",T).create(m,{appName:w.name})}function Ne(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&Se(w,"argument-error"),Fe(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(w,...m){if("string"!=typeof w){const y=m[0],T=[...m.slice(1)];return T[0]&&(T[0].appName=w.name),w._errorFactory.create(y,...T)}return Ge.create(w,...m)}function ue(w,m,...y){if(!w)throw Ue(m,...y)}function Me(w){const m="INTERNAL ASSERTION FAILED: "+w;throw J(m),new Error(m)}function q(w,m){w||Me(m)}const Q=new Map;function ne(w){q(w instanceof Function,"Expected a class definition");let m=Q.get(w);return m?(q(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Q.set(w,m),m)}function W(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function ce(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class it{constructor(m,y){this.shortDelay=m,this.longDelay=y,q(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,I.uI)()||(0,I.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ce()||(0,I.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function dt(w,m){q(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class qt{static initialize(m,y,T){this.fetchImpl=m,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vn=new it(3e4,6e4);function Ot(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function dn(w,m,y,T){return _n.apply(this,arguments)}function _n(){return(_n=(0,s.Z)(function*(w,m,y,T,H={}){return ur(w,H,(0,s.Z)(function*(){let le={},Ke={};T&&("GET"===m?Ke=T:le={body:JSON.stringify(T)});const gt=(0,I.xO)(Object.assign({key:w.config.apiKey},Ke)).slice(1),$t=yield w._getAdditionalHeaders();return $t["Content-Type"]="application/json",w.languageCode&&($t["X-Firebase-Locale"]=w.languageCode),qt.fetch()(Si(w,w.config.apiHost,y,gt),Object.assign({method:m,headers:$t,referrerPolicy:"no-referrer"},le))}))})).apply(this,arguments)}function ur(w,m,y){return sr.apply(this,arguments)}function sr(){return(sr=(0,s.Z)(function*(w,m,y){w._canInitEmulator=!1;const T=Object.assign(Object.assign({},en),m);try{const H=new ri(w),le=yield Promise.race([y(),H.promise]);H.clearNetworkTimeout();const Ke=yield le.json();if("needConfirmation"in Ke)throw Cr(w,"account-exists-with-different-credential",Ke);if(le.ok&&!("errorMessage"in Ke))return Ke;{const gt=le.ok?Ke.errorMessage:Ke.error.message,[$t,Kt]=gt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$t)throw Cr(w,"credential-already-in-use",Ke);if("EMAIL_EXISTS"===$t)throw Cr(w,"email-already-in-use",Ke);const An=T[$t]||$t.toLowerCase().replace(/[_\s]+/g,"-");if(Kt)throw Fe(w,An,Kt);Se(w,An)}}catch(H){if(H instanceof I.ZR)throw H;Se(w,"network-request-failed")}})).apply(this,arguments)}function Nn(w,m,y,T){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,s.Z)(function*(w,m,y,T,H={}){const le=yield dn(w,m,y,T,H);return"mfaPendingCredential"in le&&Se(w,"multi-factor-auth-required",{_serverResponse:le}),le})).apply(this,arguments)}function Si(w,m,y,T){const H=`${m}${y}?${T}`;return w.config.emulator?dt(w.config,H):`${w.config.apiScheme}://${H}`}class ri{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(De(this.auth,"network-request-failed")),vn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(w,m,y){const T={appName:w.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const H=De(w,m,T);return H.customData._tokenResponse=y,H}function yi(){return(yi=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function tn(w,m){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Zn(w,m){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function zn(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Ln(){return(Ln=(0,s.Z)(function*(w,m=!1){const y=(0,I.m9)(w),T=yield y.getIdToken(m),H=xn(T);ue(H&&H.exp&&H.auth_time&&H.iat,y.auth,"internal-error");const le="object"==typeof H.firebase?H.firebase:void 0,Ke=null==le?void 0:le.sign_in_provider;return{claims:H,token:T,authTime:zn(Oi(H.auth_time)),issuedAtTime:zn(Oi(H.iat)),expirationTime:zn(Oi(H.exp)),signInProvider:Ke||null,signInSecondFactor:(null==le?void 0:le.sign_in_second_factor)||null}})).apply(this,arguments)}function Oi(w){return 1e3*Number(w)}function xn(w){const[m,y,T]=w.split(".");if(void 0===m||void 0===y||void 0===T)return J("JWT malformed, contained fewer than 3 sections"),null;try{const H=(0,I.tV)(y);return H?JSON.parse(H):(J("Failed to decode base64 JWT payload"),null)}catch(H){return J("Caught error parsing JWT payload as JSON",H),null}}function Lt(w,m){return li.apply(this,arguments)}function li(){return(li=(0,s.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(T){throw T instanceof I.ZR&&ci(T)&&w.auth.currentUser===w&&(yield w.auth.signOut()),T}})).apply(this,arguments)}function ci({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class $r{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const H=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,H)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(m);this.timerId=setTimeout((0,s.Z)(function*(){yield y.iteration()}),T)}iteration(){var m=this;return(0,s.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&m.schedule(!0))}m.schedule()})()}}class Mn{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yn(w){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,s.Z)(function*(w){var m;const y=w.auth,T=yield w.getIdToken(),H=yield Lt(w,Zn(y,{idToken:T}));ue(null==H?void 0:H.users.length,y,"internal-error");const le=H.users[0];w._notifyReloadListener(le);const Ke=(null===(m=le.providerUserInfo)||void 0===m?void 0:m.length)?st(le.providerUserInfo):[],gt=Le(w.providerData,Ke),An=!!w.isAnonymous&&!(w.email&&le.passwordHash||(null==gt?void 0:gt.length)),Hr={uid:le.localId,displayName:le.displayName||null,photoURL:le.photoUrl||null,email:le.email||null,emailVerified:le.emailVerified||!1,phoneNumber:le.phoneNumber||null,tenantId:le.tenantId||null,providerData:gt,metadata:new Mn(le.createdAt,le.lastLoginAt),isAnonymous:An};Object.assign(w,Hr)})).apply(this,arguments)}function Ae(){return(Ae=(0,s.Z)(function*(w){const m=(0,I.m9)(w);yield Yn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Le(w,m){return[...w.filter(T=>!m.some(H=>H.providerId===T.providerId)),...m]}function st(w){return w.map(m=>{var{providerId:y}=m,T=(0,k._T)(m,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function $e(){return($e=(0,s.Z)(function*(w,m){const y=yield ur(w,{},(0,s.Z)(function*(){const T=(0,I.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:H,apiKey:le}=w.config,Ke=Si(w,H,"/v1/token",`key=${le}`),gt=yield w._getAdditionalHeaders();return gt["Content-Type"]="application/x-www-form-urlencoded",qt.fetch()(Ke,{method:"POST",headers:gt,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ue(m.idToken,"internal-error"),ue(void 0!==m.idToken,"internal-error"),ue(void 0!==m.refreshToken,"internal-error");const y="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(w){const m=xn(w);return ue(m,"internal-error"),ue(void 0!==m.exp,"internal-error"),ue(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var T=this;return(0,s.Z)(function*(){return ue(!T.accessToken||T.refreshToken,m,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(m,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var T=this;return(0,s.Z)(function*(){const{accessToken:H,refreshToken:le,expiresIn:Ke}=yield function(w,m){return $e.apply(this,arguments)}(m,y);T.updateTokensAndExpiration(H,le,Number(Ke))})()}updateTokensAndExpiration(m,y,T){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(m,y){const{refreshToken:T,accessToken:H,expirationTime:le}=y,Ke=new ht;return T&&(ue("string"==typeof T,"internal-error",{appName:m}),Ke.refreshToken=T),H&&(ue("string"==typeof H,"internal-error",{appName:m}),Ke.accessToken=H),le&&(ue("number"==typeof le,"internal-error",{appName:m}),Ke.expirationTime=le),Ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ht,this.toJSON())}_performRefresh(){return Me("not implemented")}}function wt(w,m){ue("string"==typeof w||void 0===w,"internal-error",{appName:m})}class Xt{constructor(m){var{uid:y,auth:T,stsTokenManager:H}=m,le=(0,k._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=H,this.accessToken=H.accessToken,this.displayName=le.displayName||null,this.email=le.email||null,this.emailVerified=le.emailVerified||!1,this.phoneNumber=le.phoneNumber||null,this.photoURL=le.photoURL||null,this.isAnonymous=le.isAnonymous||!1,this.tenantId=le.tenantId||null,this.providerData=le.providerData?[...le.providerData]:[],this.metadata=new Mn(le.createdAt||void 0,le.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,s.Z)(function*(){const T=yield Lt(y,y.stsTokenManager.getToken(y.auth,m));return ue(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(m){return function(w){return Ln.apply(this,arguments)}(this,m)}reload(){return function(w){return Ae.apply(this,arguments)}(this)}_assign(m){this!==m&&(ue(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Xt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var T=this;return(0,s.Z)(function*(){let H=!1;m.idToken&&m.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(m),H=!0),y&&(yield Yn(T)),yield T.auth._persistUserIfCurrent(T),H&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var m=this;return(0,s.Z)(function*(){const y=yield m.getIdToken();return yield Lt(m,function(w,m){return yi.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var T,H,le,Ke,gt,$t,Kt,An;const Hr=null!==(T=y.displayName)&&void 0!==T?T:void 0,xa=null!==(H=y.email)&&void 0!==H?H:void 0,nc=null!==(le=y.phoneNumber)&&void 0!==le?le:void 0,Ma=null!==(Ke=y.photoURL)&&void 0!==Ke?Ke:void 0,Fc=null!==(gt=y.tenantId)&&void 0!==gt?gt:void 0,af=null!==($t=y._redirectEventId)&&void 0!==$t?$t:void 0,Lc=null!==(Kt=y.createdAt)&&void 0!==Kt?Kt:void 0,Ad=null!==(An=y.lastLoginAt)&&void 0!==An?An:void 0,{uid:xd,emailVerified:Bc,isAnonymous:Md,providerData:Ou,stsTokenManager:Tg}=y;ue(xd&&Tg,m,"internal-error");const oi=ht.fromJSON(this.name,Tg);ue("string"==typeof xd,m,"internal-error"),wt(Hr,m.name),wt(xa,m.name),ue("boolean"==typeof Bc,m,"internal-error"),ue("boolean"==typeof Md,m,"internal-error"),wt(nc,m.name),wt(Ma,m.name),wt(Fc,m.name),wt(af,m.name),wt(Lc,m.name),wt(Ad,m.name);const Ms=new Xt({uid:xd,auth:m,email:xa,emailVerified:Bc,displayName:Hr,isAnonymous:Md,photoURL:Ma,phoneNumber:nc,tenantId:Fc,stsTokenManager:oi,createdAt:Lc,lastLoginAt:Ad});return Ou&&Array.isArray(Ou)&&(Ms.providerData=Ou.map(Sg=>Object.assign({},Sg))),af&&(Ms._redirectEventId=af),Ms}static _fromIdTokenResponse(m,y,T=!1){return(0,s.Z)(function*(){const H=new ht;H.updateFromServerResponse(y);const le=new Xt({uid:y.localId,auth:m,stsTokenManager:H,isAnonymous:T});return yield Yn(le),le})()}}const Gn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,s.Z)(function*(){return!0})()}_set(y,T){var H=this;return(0,s.Z)(function*(){H.storage[y]=T})()}_get(y){var T=this;return(0,s.Z)(function*(){const H=T.storage[y];return void 0===H?null:H})()}_remove(y){var T=this;return(0,s.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return w.type="NONE",w})();function on(w,m,y){return`firebase:${w}:${m}:${y}`}class Tr{constructor(m,y,T){this.persistence=m,this.auth=y,this.userKey=T;const{config:H,name:le}=this.auth;this.fullUserKey=on(this.userKey,H.apiKey,le),this.fullPersistenceKey=on("persistence",H.apiKey,le),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,s.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Xt._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,s.Z)(function*(){if(y.persistence===m)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,T="authUser"){return(0,s.Z)(function*(){if(!y.length)return new Tr(ne(Gn),m,T);const H=(yield Promise.all(y.map(function(){var Kt=(0,s.Z)(function*(An){if(yield An._isAvailable())return An});return function(An){return Kt.apply(this,arguments)}}()))).filter(Kt=>Kt);let le=H[0]||ne(Gn);const Ke=on(T,m.config.apiKey,m.name);let gt=null;for(const Kt of y)try{const An=yield Kt._get(Ke);if(An){const Hr=Xt._fromJSON(m,An);Kt!==le&&(gt=Hr),le=Kt;break}}catch(An){}const $t=H.filter(Kt=>Kt._shouldAllowMigration);return le._shouldAllowMigration&&$t.length?(le=$t[0],gt&&(yield le._set(Ke,gt.toJSON())),yield Promise.all(y.map(function(){var Kt=(0,s.Z)(function*(An){if(An!==le)try{yield An._remove(Ke)}catch(Hr){}});return function(An){return Kt.apply(this,arguments)}}())),new Tr(le,m,T)):new Tr(le,m,T)})()}}function Ye(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Tt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Be(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Zt(m))return"Blackberry";if(hn(m))return"Webos";if(Oe(m))return"Safari";if((m.includes("chrome/")||ct(m))&&!m.includes("edge/"))return"Chrome";if(sn(m))return"Android";{const T=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==T?void 0:T.length))return T[1]}return"Other"}function Be(w=(0,I.z$)()){return/firefox\//i.test(w)}function Oe(w=(0,I.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ct(w=(0,I.z$)()){return/crios\//i.test(w)}function Tt(w=(0,I.z$)()){return/iemobile/i.test(w)}function sn(w=(0,I.z$)()){return/android/i.test(w)}function Zt(w=(0,I.z$)()){return/blackberry/i.test(w)}function hn(w=(0,I.z$)()){return/webos/i.test(w)}function Dn(w=(0,I.z$)()){return/iphone|ipad|ipod/i.test(w)}function $n(w=(0,I.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Gt(w=(0,I.z$)()){return Dn(w)||sn(w)||hn(w)||Zt(w)||/windows phone/i.test(w)||Tt(w)}function ii(w,m=[]){let y;switch(w){case"Browser":y=Ye((0,I.z$)());break;case"Worker":y=`${Ye((0,I.z$)())}-${w}`;break;default:y=w}const T=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${b.SDK_VERSION}/${T}`}class Ai{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const T=le=>new Promise((Ke,gt)=>{try{Ke(m(le))}catch($t){gt($t)}});T.onAbort=y,this.queue.push(T);const H=this.queue.length-1;return()=>{this.queue[H]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,s.Z)(function*(){if(y.auth.currentUser===m)return;const T=[];try{for(const H of y.queue)yield H(m),H.onAbort&&T.push(H.onAbort)}catch(H){T.reverse();for(const le of T)try{le()}catch(Ke){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:H.message})}})()}}class Rr{constructor(m,y,T){this.app=m,this.heartbeatServiceProvider=y,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hr(this),this.idTokenSubscription=new hr(this),this.beforeStateQueue=new Ai(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(m,y){var T=this;return y&&(this._popupRedirectResolver=ne(y)),this._initializationPromise=this.queue((0,s.Z)(function*(){var H,le;if(!T._deleted&&(T.persistenceManager=yield Tr.create(T,m),!T._deleted)){if(null===(H=T._popupRedirectResolver)||void 0===H?void 0:H._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch(Ke){}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(le=T.currentUser)||void 0===le?void 0:le.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,s.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,s.Z)(function*(){var T;const H=yield y.assertedPersistence.getCurrentUser();let le=H,Ke=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const gt=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,$t=null==le?void 0:le._redirectEventId,Kt=yield y.tryRedirectSignIn(m);(!gt||gt===$t)&&(null==Kt?void 0:Kt.user)&&(le=Kt.user,Ke=!0)}if(!le)return y.directlySetCurrentUser(null);if(!le._redirectEventId){if(Ke)try{yield y.beforeStateQueue.runMiddleware(le)}catch(gt){le=H,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(gt))}return le?y.reloadAndSetCurrentUserOrClear(le):y.directlySetCurrentUser(null)}return ue(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===le._redirectEventId?y.directlySetCurrentUser(le):y.reloadAndSetCurrentUserOrClear(le)})()}tryRedirectSignIn(m){var y=this;return(0,s.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch(H){yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,s.Z)(function*(){try{yield Yn(m)}catch(T){if("auth/network-request-failed"!==T.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,s.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,s.Z)(function*(){const T=m?(0,I.m9)(m):null;return T&&ue(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(m,y=!1){var T=this;return(0,s.Z)(function*(){if(!T._deleted)return m&&ue(T.tenantId===m.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(m)),T.queue((0,s.Z)(function*(){yield T.directlySetCurrentUser(m),T.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,s.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,s.Z)(function*(){yield y.assertedPersistence.setPersistence(ne(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new I.LL("auth","Firebase",m())}onAuthStateChanged(m,y,T){return this.registerStateListener(this.authStateSubscription,m,y,T)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,T){return this.registerStateListener(this.idTokenSubscription,m,y,T)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var T=this;return(0,s.Z)(function*(){const H=yield T.getOrInitRedirectPersistenceManager(y);return null===m?H.removeCurrentUser():H.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,s.Z)(function*(){if(!y.redirectPersistenceManager){const T=m&&ne(m)||y._popupRedirectResolver;ue(T,y,"argument-error"),y.redirectPersistenceManager=yield Tr.create(y,[ne(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,s.Z)(function*(){var T,H;return y._isInitialized&&(yield y.queue((0,s.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===m?y._currentUser:(null===(H=y.redirectUser)||void 0===H?void 0:H._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,s.Z)(function*(){if(m===y.currentUser)return y.queue((0,s.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,T,H){if(this._deleted)return()=>{};const le="function"==typeof y?y:y.next.bind(y),Ke=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Ke,this,"internal-error"),Ke.then(()=>le(this.currentUser)),"function"==typeof y?m.addObserver(y,T,H):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,s.Z)(function*(){y.currentUser&&y.currentUser!==m&&(y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh()),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=ii(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,s.Z)(function*(){var y;const T={"X-Client-Version":m.clientVersion};m.app.options.appId&&(T["X-Firebase-gmpid"]=m.app.options.appId);const H=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return H&&(T["X-Firebase-Client"]=H),T})()}}function dr(w){return(0,I.m9)(w)}class hr{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,I.ne)(y=>this.observer=y)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xi(w,m,y){const T=dr(w);ue(T._canInitEmulator,T,"emulator-config-failed"),ue(/^https?:\/\//.test(m),T,"invalid-emulator-scheme");const H=!!(null==y?void 0:y.disableWarnings),le=ps(m),{host:Ke,port:gt}=function(w){const m=ps(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",H=/^(\[[^\]]+\])(:|$)/.exec(T);if(H){const le=H[1];return{host:le,port:$i(T.substr(le.length+1))}}{const[le,Ke]=T.split(":");return{host:le,port:$i(Ke)}}}(m);T.config.emulator={url:`${le}//${Ke}${null===gt?"":`:${gt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Ke,port:gt,protocol:le.replace(":",""),options:Object.freeze({disableWarnings:H})}),H||function(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ps(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function $i(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Or{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return Me("not implemented")}_getIdTokenResponse(m){return Me("not implemented")}_linkToIdToken(m,y){return Me("not implemented")}_getReauthenticationResolver(m){return Me("not implemented")}}function bi(w,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:resetPassword",Ot(w,m))})).apply(this,arguments)}function Gs(w,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Wr(w,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:update",Ot(w,m))})).apply(this,arguments)}function Wi(){return(Wi=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithPassword",Ot(w,m))})).apply(this,arguments)}function Pi(w,m){return Is.apply(this,arguments)}function Is(){return(Is=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:sendOobCode",Ot(w,m))})).apply(this,arguments)}function qr(w,m){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,s.Z)(function*(w,m){return Pi(w,m)})).apply(this,arguments)}function ts(w,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,s.Z)(function*(w,m){return Pi(w,m)})).apply(this,arguments)}function $s(w,m){return ei.apply(this,arguments)}function ei(){return(ei=(0,s.Z)(function*(w,m){return Pi(w,m)})).apply(this,arguments)}function ui(w,m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,s.Z)(function*(w,m){return Pi(w,m)})).apply(this,arguments)}function qs(){return(qs=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",Ot(w,m))})).apply(this,arguments)}function Do(){return(Do=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",Ot(w,m))})).apply(this,arguments)}class ao extends Or{constructor(m,y,T,H=null){super("password",T),this._email=m,this._password=y,this._tenantId=H}static _fromEmailAndPassword(m,y){return new ao(m,y,"password")}static _fromEmailAndCode(m,y,T=null){return new ao(m,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,s.Z)(function*(){switch(y.signInMethod){case"password":return function(w,m){return Wi.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,m){return qs.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:Se(m,"internal-error")}})()}_linkToIdToken(m,y){var T=this;return(0,s.Z)(function*(){switch(T.signInMethod){case"password":return Gs(m,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function(w,m){return Do.apply(this,arguments)}(m,{idToken:y,email:T._email,oobCode:T._password});default:Se(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function F(w,m){return K.apply(this,arguments)}function K(){return(K=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithIdp",Ot(w,m))})).apply(this,arguments)}class Ze extends Or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new Ze(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):Se("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:H}=y,le=(0,k._T)(y,["providerId","signInMethod"]);if(!T||!H)return null;const Ke=new Ze(T,H);return Ke.idToken=le.idToken||void 0,Ke.accessToken=le.accessToken||void 0,Ke.secret=le.secret,Ke.nonce=le.nonce,Ke.pendingToken=le.pendingToken||null,Ke}_getIdTokenResponse(m){return F(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,F(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,F(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,I.xO)(y)}return m}}function tt(w,m){return mt.apply(this,arguments)}function mt(){return(mt=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:sendVerificationCode",Ot(w,m))})).apply(this,arguments)}function Jt(){return(Jt=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ot(w,m))})).apply(this,arguments)}function fr(){return(fr=(0,s.Z)(function*(w,m){const y=yield Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ot(w,m));if(y.temporaryProof)throw Cr(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Zr={USER_NOT_FOUND:"user-not-found"};function wi(){return(wi=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ot(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Zr)})).apply(this,arguments)}class Ci extends Or{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Ci({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Ci({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function(w,m){return Jt.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function(w,m){return fr.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(w,m){return wi.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:T,verificationCode:H}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:T,code:H}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:T,phoneNumber:H,temporaryProof:le}=m;return T||y||H||le?new Ci({verificationId:y,verificationCode:T,phoneNumber:H,temporaryProof:le}):null}}class ee{constructor(m){var y,T,H,le,Ke,gt;const $t=(0,I.zd)((0,I.pd)(m)),Kt=null!==(y=$t.apiKey)&&void 0!==y?y:null,An=null!==(T=$t.oobCode)&&void 0!==T?T:null,Hr=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(H=$t.mode)&&void 0!==H?H:null);ue(Kt&&An&&Hr,"argument-error"),this.apiKey=Kt,this.operation=Hr,this.code=An,this.continueUrl=null!==(le=$t.continueUrl)&&void 0!==le?le:null,this.languageCode=null!==(Ke=$t.languageCode)&&void 0!==Ke?Ke:null,this.tenantId=null!==(gt=$t.tenantId)&&void 0!==gt?gt:null}static parseLink(m){const y=function(w){const m=(0,I.zd)((0,I.pd)(w)).link,y=m?(0,I.zd)((0,I.pd)(m)).deep_link_id:null,T=(0,I.zd)((0,I.pd)(w)).deep_link_id;return(T?(0,I.zd)((0,I.pd)(T)).link:null)||T||y||m||w}(m);try{return new ee(y)}catch(T){return null}}}let z=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,T){return ao._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const H=ee.parseLink(T);return ue(H,"argument-error"),ao._fromEmailAndCode(y,H.code,H.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class S{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class N extends S{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class L extends N{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return ue("providerId"in y&&"signInMethod"in y,"argument-error"),Ze._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ue(m.idToken||m.accessToken,"argument-error"),Ze._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return L.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return L.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:H,pendingToken:le,nonce:Ke,providerId:gt}=m;if(!T&&!H&&!y&&!le||!gt)return null;try{return new L(gt)._credential({idToken:y,accessToken:T,nonce:Ke,pendingToken:le})}catch($t){return null}}}let V=(()=>{class w extends N{constructor(){super("facebook.com")}static credential(y){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(T){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),oe=(()=>{class w extends N{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:H}=y;if(!T&&!H)return null;try{return w.credential(T,H)}catch(le){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ve=(()=>{class w extends N{constructor(){super("github.com")}static credential(y){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(T){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class be extends Or{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return F(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,F(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,F(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:H,pendingToken:le}=y;return T&&H&&le&&T===H?new be(T,le):null}static _create(m,y){return new be(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class j extends S{constructor(m){ue(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return j.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return j.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=be.fromJSON(m);return ue(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:T}=m;if(!y||!T)return null;try{return be._create(T,y)}catch(H){return null}}}let pe=(()=>{class w extends N{constructor(){super("twitter.com")}static credential(y,T){return Ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:H}=y;if(!T||!H)return null;try{return w.credential(T,H)}catch(le){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Te(w,m){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signUp",Ot(w,m))})).apply(this,arguments)}class yt{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,T,H=!1){return(0,s.Z)(function*(){const le=yield Xt._fromIdTokenResponse(m,T,H),Ke=Pt(T);return new yt({user:le,providerId:Ke,_tokenResponse:T,operationType:y})})()}static _forOperation(m,y,T){return(0,s.Z)(function*(){yield m._updateTokensIfNecessary(T,!0);const H=Pt(T);return new yt({user:m,providerId:H,_tokenResponse:T,operationType:y})})()}}function Pt(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Bt(w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,s.Z)(function*(w){var m;const y=dr(w);if(yield y._initializationPromise,null===(m=y.currentUser)||void 0===m?void 0:m.isAnonymous)return new yt({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Te(y,{returnSecureToken:!0}),H=yield yt._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(H.user),H})).apply(this,arguments)}class ln extends I.ZR{constructor(m,y,T,H){var le;super(y.code,y.message),this.operationType=T,this.user=H,Object.setPrototypeOf(this,ln.prototype),this.customData={appName:m.name,tenantId:null!==(le=m.tenantId)&&void 0!==le?le:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(m,y,T,H){return new ln(m,y,T,H)}}function rr(w,m,y,T){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(le=>{throw"auth/multi-factor-auth-required"===le.code?ln._fromErrorAndOperation(w,le,m,T):le})}function Lr(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Pn(w,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,s.Z)(function*(w,m){const y=(0,I.m9)(w);yield Yo(!0,y,m);const{providerUserInfo:T}=yield tn(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),H=Lr(T||[]);return y.providerData=y.providerData.filter(le=>H.has(le.providerId)),H.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function co(w,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,s.Z)(function*(w,m,y=!1){const T=yield Lt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return yt._forOperation(w,"link",T)})).apply(this,arguments)}function Yo(w,m,y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,s.Z)(function*(w,m,y){yield Yn(m);const H=!1===w?"provider-already-linked":"no-such-provider";ue(Lr(m.providerData).has(y)===w,m.auth,H)})).apply(this,arguments)}function _a(w,m){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,s.Z)(function*(w,m,y=!1){const{auth:T}=w,H="reauthenticate";try{const le=yield Lt(w,rr(T,H,m,w),y);ue(le.idToken,T,"internal-error");const Ke=xn(le.idToken);ue(Ke,T,"internal-error");const{sub:gt}=Ke;return ue(w.uid===gt,T,"user-mismatch"),yt._forOperation(w,H,le)}catch(le){throw"auth/user-not-found"===(null==le?void 0:le.code)&&Se(T,"user-mismatch"),le}})).apply(this,arguments)}function bc(w,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,s.Z)(function*(w,m,y=!1){const T="signIn",H=yield rr(w,T,m),le=yield yt._fromIdTokenResponse(w,T,H);return y||(yield w._updateCurrentUser(le.user)),le})).apply(this,arguments)}function Mo(w,m){return or.apply(this,arguments)}function or(){return(or=(0,s.Z)(function*(w,m){return bc(dr(w),m)})).apply(this,arguments)}function Sl(w,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,s.Z)(function*(w,m){const y=(0,I.m9)(w);return yield Yo(!1,y,m.providerId),co(y,m)})).apply(this,arguments)}function Dl(w,m){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,s.Z)(function*(w,m){return _a((0,I.m9)(w),m)})).apply(this,arguments)}function wc(w,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,s.Z)(function*(w,m){return Nn(w,"POST","/v1/accounts:signInWithCustomToken",Ot(w,m))})).apply(this,arguments)}function cn(w,m){return Al.apply(this,arguments)}function Al(){return(Al=(0,s.Z)(function*(w,m){const y=dr(w),T=yield wc(y,{token:m,returnSecureToken:!0}),H=yield yt._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(H.user),H})).apply(this,arguments)}class Xo{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Ha._fromServerResponse(m,y):Se(m,"internal-error")}}class Ha extends Xo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Ha(y)}}function xl(w,m,y){var T;ue((null===(T=y.url)||void 0===T?void 0:T.length)>0,w,"invalid-continue-uri"),ue(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ue(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(ue(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function fu(w,m,y){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w),H={requestType:"PASSWORD_RESET",email:m};y&&xl(T,H,y),yield ts(T,H)})).apply(this,arguments)}function pd(w,m,y){return _t.apply(this,arguments)}function _t(){return(_t=(0,s.Z)(function*(w,m,y){yield bi((0,I.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Qn(w,m){return ko.apply(this,arguments)}function ko(){return(ko=(0,s.Z)(function*(w,m){yield Wr((0,I.m9)(w),{oobCode:m})})).apply(this,arguments)}function ni(w,m){return kl.apply(this,arguments)}function kl(){return(kl=(0,s.Z)(function*(w,m){const y=(0,I.m9)(w),T=yield bi(y,{oobCode:m}),H=T.requestType;switch(ue(H,y,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(T.mfaInfo,y,"internal-error");default:ue(T.email,y,"internal-error")}let le=null;return T.mfaInfo&&(le=Xo._fromServerResponse(dr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:le},operation:H}})).apply(this,arguments)}function ea(w,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,s.Z)(function*(w,m){const{data:y}=yield ni((0,I.m9)(w),m);return y.email})).apply(this,arguments)}function pu(w,m,y){return va.apply(this,arguments)}function va(){return(va=(0,s.Z)(function*(w,m,y){const T=dr(w),H=yield Te(T,{returnSecureToken:!0,email:m,password:y}),le=yield yt._fromIdTokenResponse(T,"signIn",H);return yield T._updateCurrentUser(le.user),le})).apply(this,arguments)}function hg(w,m,y){return Mo((0,I.m9)(w),z.credential(m,y))}function zh(w,m,y){return za.apply(this,arguments)}function za(){return(za=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w),H={requestType:"EMAIL_SIGNIN",email:m};ue(y.handleCodeInApp,T,"argument-error"),y&&xl(T,H,y),yield $s(T,H)})).apply(this,arguments)}function Rl(w,m){const y=ee.parseLink(m);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Li(w,m,y){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w),H=z.credentialWithLink(m,y||W());return ue(H._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Mo(T,H)})).apply(this,arguments)}function Ol(w,m){return ta.apply(this,arguments)}function ta(){return(ta=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:createAuthUri",Ot(w,m))})).apply(this,arguments)}function uo(w,m){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,s.Z)(function*(w,m){const T={identifier:m,continueUri:ce()?W():"http://localhost"},{signinMethods:H}=yield Ol((0,I.m9)(w),T);return H||[]})).apply(this,arguments)}function gd(w,m){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,s.Z)(function*(w,m){const y=(0,I.m9)(w),H={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&xl(y.auth,H,m);const{email:le}=yield qr(y.auth,H);le!==w.email&&(yield w.reload())})).apply(this,arguments)}function Gh(w,m,y){return ba.apply(this,arguments)}function ba(){return(ba=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w),le={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&xl(T.auth,le,y);const{email:Ke}=yield ui(T.auth,le);Ke!==w.email&&(yield w.reload())})).apply(this,arguments)}function Cc(w,m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,s.Z)(function*(w,m){return dn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Fl(w,m){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,s.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const T=(0,I.m9)(w),le={idToken:yield T.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},Ke=yield Lt(T,Cc(T.auth,le));T.displayName=Ke.displayName||null,T.photoURL=Ke.photoUrl||null;const gt=T.providerData.find(({providerId:$t})=>"password"===$t);gt&&(gt.displayName=T.displayName,gt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Ke)})).apply(this,arguments)}function md(w,m){return Ic((0,I.m9)(w),m,null)}function gu(w,m){return Ic((0,I.m9)(w),null,m)}function Ic(w,m,y){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,s.Z)(function*(w,m,y){const{auth:T}=w,le={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(le.email=m),y&&(le.password=y);const Ke=yield Lt(w,Gs(T,le));yield w._updateTokensIfNecessary(Ke,!0)})).apply(this,arguments)}class wa{constructor(m,y,T={}){this.isNewUser=m,this.providerId=y,this.profile=T}}class Tc extends wa{constructor(m,y,T,H){super(m,y,T),this.username=H}}class fg extends wa{constructor(m,y){super(m,"facebook.com",y)}}class _u extends Tc{constructor(m,y){super(m,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Br extends wa{constructor(m,y){super(m,"google.com",y)}}class na extends Tc{constructor(m,y,T){super(m,"twitter.com",y,T)}}function Vr(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var m,y;if(!w)return null;const{providerId:T}=w,H=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},le=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!T&&(null==w?void 0:w.idToken)){const Ke=null===(y=null===(m=xn(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(Ke)return new wa(le,"anonymous"!==Ke&&"custom"!==Ke?Ke:null)}if(!T)return null;switch(T){case"facebook.com":return new fg(le,H);case"github.com":return new _u(le,H);case"google.com":return new Br(le,H);case"twitter.com":return new na(le,H,w.screenName||null);case"custom":case"anonymous":return new wa(le,null);default:return new wa(le,T,H)}}(y)}class ra{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new ra("enroll",m)}static _fromMfaPendingCredential(m){return new ra("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,T;if(null==m?void 0:m.multiFactorSession){if(null===(y=m.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ra._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(T=m.multiFactorSession)||void 0===T?void 0:T.idToken)return ra._fromIdtoken(m.multiFactorSession.idToken)}return null}}class bu{constructor(m,y,T){this.session=m,this.hints=y,this.signInResolver=T}static _fromError(m,y){const T=dr(m),H=y.customData._serverResponse,le=(H.mfaInfo||[]).map(gt=>Xo._fromServerResponse(T,gt));ue(H.mfaPendingCredential,T,"internal-error");const Ke=ra._fromMfaPendingCredential(H.mfaPendingCredential);return new bu(Ke,le,function(){var gt=(0,s.Z)(function*($t){const Kt=yield $t._process(T,Ke);delete H.mfaInfo,delete H.mfaPendingCredential;const An=Object.assign(Object.assign({},H),{idToken:Kt.idToken,refreshToken:Kt.refreshToken});switch(y.operationType){case"signIn":const Hr=yield yt._fromIdTokenResponse(T,y.operationType,An);return yield T._updateCurrentUser(Hr.user),Hr;case"reauthenticate":return ue(y.user,T,"internal-error"),yt._forOperation(y.user,y.operationType,An);default:Se(T,"internal-error")}});return function($t){return gt.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,s.Z)(function*(){return y.signInResolver(m)})()}}function _d(w,m){var y;const T=(0,I.m9)(w),H=m;return ue(m.customData.operationType,T,"argument-error"),ue(null===(y=H.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),bu._fromError(T,H)}function Yr(w,m){return dn(w,"POST","/v2/accounts/mfaEnrollment:start",Ot(w,m))}class yd{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>Xo._fromServerResponse(m.auth,T)))})}static _fromUser(m){return new yd(m)}getSession(){var m=this;return(0,s.Z)(function*(){return ra._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var T=this;return(0,s.Z)(function*(){const H=m,le=yield T.getSession(),Ke=yield Lt(T.user,H._process(T.user.auth,le,y));return yield T.user._updateTokensIfNecessary(Ke),T.user.reload()})()}unenroll(m){var y=this;return(0,s.Z)(function*(){const T="string"==typeof m?m:m.uid,H=yield y.user.getIdToken(),le=yield Lt(y.user,function(w,m){return dn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(w,m))}(y.user.auth,{idToken:H,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Ke})=>Ke!==T),yield y.user._updateTokensIfNecessary(le);try{yield y.user.reload()}catch(Ke){if("auth/user-token-expired"!==Ke.code)throw Ke}})()}}const $a=new WeakMap;function Sc(w){const m=(0,I.m9)(w);return $a.has(m)||$a.set(m,yd._fromUser(m)),$a.get(m)}const Wa="__sak";class Dc{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Wa,"1"),this.storage.removeItem(Wa),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const xt=(()=>{class w extends Dc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,I.z$)();return Oe(w)||Dn(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Gt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const H=this.storage.getItem(T),le=this.localCache[T];H!==le&&y(T,le,H)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((gt,$t,Kt)=>{this.notifyListeners(gt,Kt)});const H=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const gt=this.storage.getItem(H);if(y.newValue!==gt)null!==y.newValue?this.storage.setItem(H,y.newValue):this.storage.removeItem(H);else if(this.localCache[H]===y.newValue&&!T)return}const le=()=>{const gt=this.storage.getItem(H);!T&&this.localCache[H]===gt||this.notifyListeners(H,gt)},Ke=this.storage.getItem(H);(0,I.w1)()&&10===document.documentMode&&Ke!==y.newValue&&y.newValue!==y.oldValue?setTimeout(le,10):le()}notifyListeners(y,T){this.localCache[y]=T;const H=this.listeners[y];if(H)for(const le of Array.from(H))le(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,H)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:H}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var H=()=>super._set,le=this;return(0,s.Z)(function*(){yield H().call(le,y,T),le.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,H=this;return(0,s.Z)(function*(){const le=yield T().call(H,y);return H.localCache[y]=JSON.stringify(le),le})()}_remove(y){var T=()=>super._remove,H=this;return(0,s.Z)(function*(){yield T().call(H,y),delete H.localCache[y]})()}}return w.type="LOCAL",w})(),pi=(()=>{class w extends Dc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return w.type="SESSION",w})();let Ea=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(le=>le.isListeningto(y));if(T)return T;const H=new w(y);return this.receivers.push(H),H}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,s.Z)(function*(){const H=y,{eventId:le,eventType:Ke,data:gt}=H.data,$t=T.handlersMap[Ke];if(!(null==$t?void 0:$t.size))return;H.ports[0].postMessage({status:"ack",eventId:le,eventType:Ke});const Kt=Array.from($t).map(function(){var Hr=(0,s.Z)(function*(xa){return xa(H.origin,gt)});return function(xa){return Hr.apply(this,arguments)}}()),An=yield function(w){return Promise.all(w.map(function(){var m=(0,s.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return m.apply(this,arguments)}}()))}(Kt);H.ports[0].postMessage({status:"done",eventId:le,eventType:Ke,response:An})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function jl(w="",m=10){let y="";for(let T=0;T<m;T++)y+=Math.floor(10*Math.random());return w+y}class qa{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,T=50){var H=this;return(0,s.Z)(function*(){const le="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!le)throw new Error("connection_unavailable");let Ke,gt;return new Promise(($t,Kt)=>{const An=jl("",20);le.port1.start();const Hr=setTimeout(()=>{Kt(new Error("unsupported_event"))},T);gt={messageChannel:le,onMessage(xa){const nc=xa;if(nc.data.eventId===An)switch(nc.data.status){case"ack":clearTimeout(Hr),Ke=setTimeout(()=>{Kt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ke),$t(nc.data.response);break;default:clearTimeout(Hr),clearTimeout(Ke),Kt(new Error("invalid_response"))}}},H.handlers.add(gt),le.port1.addEventListener("message",gt.onMessage),H.target.postMessage({eventType:m,eventId:An,data:y},[le.port2])}).finally(()=>{gt&&H.removeMessageHandler(gt)})})()}}function Kr(){return window}function Ac(){return void 0!==Kr().WorkerGlobalScope&&"function"==typeof Kr().importScripts}function kt(){return(kt=(0,s.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const sa="firebaseLocalStorageDb",lr="firebaseLocalStorage",zl="fbase_key";class Ys{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Mc(w,m){return w.transaction([lr],m?"readwrite":"readonly").objectStore(lr)}function Gl(){const w=indexedDB.open(sa,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const T=w.result;try{T.createObjectStore(lr,{keyPath:zl})}catch(H){y(H)}}),w.addEventListener("success",(0,s.Z)(function*(){const T=w.result;T.objectStoreNames.contains(lr)?m(T):(T.close(),yield function(){const w=indexedDB.deleteDatabase(sa);return new Ys(w).toPromise()}(),m(yield Gl()))}))})}function Ia(w,m,y){return ho.apply(this,arguments)}function ho(){return(ho=(0,s.Z)(function*(w,m,y){const T=Mc(w,!0).put({[zl]:m,value:y});return new Ys(T).toPromise()})).apply(this,arguments)}function Ro(){return(Ro=(0,s.Z)(function*(w,m){const y=Mc(w,!1).get(m),T=yield new Ys(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Bi(w,m){const y=Mc(w,!0).delete(m);return new Ys(y).toPromise()}const Qr=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,s.Z)(function*(){return y.db||(y.db=yield Gl()),y.db})()}_withRetries(y){var T=this;return(0,s.Z)(function*(){let H=0;for(;;)try{const le=yield T._openDb();return yield y(le)}catch(le){if(H++>3)throw le;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,s.Z)(function*(){return Ac()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,s.Z)(function*(){y.receiver=Ea._getInstance(Ac()?self:null),y.receiver._subscribe("keyChanged",function(){var T=(0,s.Z)(function*(H,le){return{keyProcessed:(yield y._poll()).includes(le.key)}});return function(H,le){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,s.Z)(function*(H,le){return["keyChanged"]});return function(H,le){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,s.Z)(function*(){var T,H;if(y.activeServiceWorker=yield function(){return kt.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new qa(y.activeServiceWorker);const le=yield y.sender._send("ping",{},800);!le||(null===(T=le[0])||void 0===T?void 0:T.fulfilled)&&(null===(H=le[0])||void 0===H?void 0:H.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,s.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch(H){}})()}_isAvailable(){return(0,s.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Gl();return yield Ia(y,Wa,"1"),yield Bi(y,Wa),!0}catch(y){}return!1})()}_withPendingWrite(y){var T=this;return(0,s.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var H=this;return(0,s.Z)(function*(){return H._withPendingWrite((0,s.Z)(function*(){return yield H._withRetries(le=>Ia(le,y,T)),H.localCache[y]=T,H.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,s.Z)(function*(){const H=yield T._withRetries(le=>function(w,m){return Ro.apply(this,arguments)}(le,y));return T.localCache[y]=H,H})()}_remove(y){var T=this;return(0,s.Z)(function*(){return T._withPendingWrite((0,s.Z)(function*(){return yield T._withRetries(H=>Bi(H,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,s.Z)(function*(){const T=yield y._withRetries(Ke=>{const gt=Mc(Ke,!1).getAll();return new Ys(gt).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const H=[],le=new Set;for(const{fbase_key:Ke,value:gt}of T)le.add(Ke),JSON.stringify(y.localCache[Ke])!==JSON.stringify(gt)&&(y.notifyListeners(Ke,gt),H.push(Ke));for(const Ke of Object.keys(y.localCache))y.localCache[Ke]&&!le.has(Ke)&&(y.notifyListeners(Ke,null),H.push(Ke));return H})()}notifyListeners(y,T){this.localCache[y]=T;const H=this.listeners[y];if(H)for(const le of Array.from(H))le(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,s.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ta(w,m){return dn(w,"POST","/v2/accounts/mfaSignIn:start",Ot(w,m))}function Xn(){return(Xn=(0,s.Z)(function*(w){return(yield dn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oo(w){return new Promise((m,y)=>{const T=document.createElement("script");T.setAttribute("src",w),T.onload=m,T.onerror=H=>{const le=De("internal-error");le.customData=H,y(le)},T.type="text/javascript",T.charset="UTF-8",function(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(T)})}function gs(w){return`__${w}${Math.floor(1e6*Math.random())}`}const vr=1e12;class Ds{constructor(m){this.auth=m,this.counter=vr,this._widgets=new Map}render(m,y){const T=this.counter;return this._widgets.set(T,new Ya(m,this.auth.name,y||{})),this.counter++,T}reset(m){var y;const T=m||vr;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(m){var y;return(null===(y=this._widgets.get(m||vr))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,s.Z)(function*(){var T;return null===(T=y._widgets.get(m||vr))||void 0===T||T.execute(),""})()}}class Ya{constructor(m,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const H="string"==typeof m?document.getElementById(m):m;ue(H,"argument-error",{appName:y}),this.container=H,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<50;T++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}();const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch(T){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(T){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ka=gs("rcb"),cy=new it(3e4,6e4);class uy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Kr().grecaptcha}load(m,y=""){return ue((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Kr().grecaptcha):new Promise((T,H)=>{const le=Kr().setTimeout(()=>{H(De(m,"network-request-failed"))},cy.get());Kr()[Ka]=()=>{Kr().clearTimeout(le),delete Kr()[Ka];const gt=Kr().grecaptcha;if(!gt)return void H(De(m,"internal-error"));const $t=gt.render;gt.render=(Kt,An)=>{const Hr=$t(Kt,An);return this.counter++,Hr},this.hostLanguage=y,T(gt)},Oo(`https://www.google.com/recaptcha/api.js??${(0,I.xO)({onload:Ka,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(le),H(De(m,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!Kr().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ki{load(m){return(0,s.Z)(function*(){return new Ds(m)})()}clearedOneInstance(){}}const wu="recaptcha",rs={theme:"light",type:"image"};class bd{constructor(m,y=Object.assign({},rs),T){this.parameters=y,this.type=wu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dr(T),this.isInvisible="invisible"===this.parameters.size,ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const H="string"==typeof m?document.getElementById(m):m;ue(H,this.auth,"argument-error"),this.container=H,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ki:new uy,this.validateStartingState()}verify(){var m=this;return(0,s.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),T=m.getAssertedRecaptcha();return T.getResponse(y)||new Promise(le=>{const Ke=gt=>{!gt||(m.tokenChangeListeners.delete(Ke),le(gt))};m.tokenChangeListeners.add(Ke),m.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof m)m(y);else if("string"==typeof m){const T=Kr()[m];"function"==typeof T&&T(y)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,s.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,s.Z)(function*(){ue(ce()&&!Ac(),m.auth,"internal-error"),yield function(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function(w){return Xn.apply(this,arguments)}(m.auth);ue(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qa{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Ci._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function ql(w,m,y){return wd.apply(this,arguments)}function wd(){return(wd=(0,s.Z)(function*(w,m,y){const T=dr(w),H=yield oa(T,m,(0,I.m9)(y));return new Qa(H,le=>Mo(T,le))})).apply(this,arguments)}function Yh(w,m,y){return ms.apply(this,arguments)}function ms(){return(ms=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w);yield Yo(!1,T,"phone");const H=yield oa(T.auth,m,(0,I.m9)(y));return new Qa(H,le=>Sl(T,le))})).apply(this,arguments)}function fo(w,m,y){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w),H=yield oa(T.auth,m,(0,I.m9)(y));return new Qa(H,le=>Dl(T,le))})).apply(this,arguments)}function oa(w,m,y){return Po.apply(this,arguments)}function Po(){return(Po=(0,s.Z)(function*(w,m,y){var T;const H=yield y.verify();try{let le;if(ue("string"==typeof H,w,"argument-error"),ue(y.type===wu,w,"argument-error"),le="string"==typeof m?{phoneNumber:m}:m,"session"in le){const Ke=le.session;if("phoneNumber"in le)return ue("enroll"===Ke.type,w,"internal-error"),(yield Yr(w,{idToken:Ke.credential,phoneEnrollmentInfo:{phoneNumber:le.phoneNumber,recaptchaToken:H}})).phoneSessionInfo.sessionInfo;{ue("signin"===Ke.type,w,"internal-error");const gt=(null===(T=le.multiFactorHint)||void 0===T?void 0:T.uid)||le.multiFactorUid;return ue(gt,w,"missing-multi-factor-info"),(yield Ta(w,{mfaPendingCredential:Ke.credential,mfaEnrollmentId:gt,phoneSignInInfo:{recaptchaToken:H}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ke}=yield tt(w,{phoneNumber:le.phoneNumber,recaptchaToken:H});return Ke}}finally{y._reset()}})).apply(this,arguments)}function Cu(w,m){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,s.Z)(function*(w,m){yield co((0,I.m9)(w),m)})).apply(this,arguments)}let Iu=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=dr(y)}verifyPhoneNumber(y,T){return oa(this.auth,y,(0,I.m9)(T))}static credential(y,T){return Ci._fromVerification(y,T)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:H}=y;return T&&H?Ci._fromTokenResponse(T,H):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function aa(w,m){return m?ne(m):(ue(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Yl extends Or{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return F(m,this._buildIdpRequest())}_linkToIdToken(m,y){return F(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return F(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function In(w){return bc(w.auth,new Yl(w),w.bypassAuthState)}function Yi(w){const{auth:m,user:y}=w;return ue(y,m,"internal-error"),_a(y,new Yl(w),w.bypassAuthState)}function po(w){return Js.apply(this,arguments)}function Js(){return(Js=(0,s.Z)(function*(w){const{auth:m,user:y}=w;return ue(y,m,"internal-error"),co(y,new Yl(w),w.bypassAuthState)})).apply(this,arguments)}class Cd{constructor(m,y,T,H,le=!1){this.auth=m,this.resolver=T,this.user=H,this.bypassAuthState=le,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,s.Z)(function*(T,H){m.pendingPromise={resolve:T,reject:H};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(le){m.reject(le)}});return function(T,H){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,s.Z)(function*(){const{urlResponse:T,sessionId:H,postBody:le,tenantId:Ke,error:gt,type:$t}=m;if(gt)return void y.reject(gt);const Kt={auth:y.auth,requestUri:T,sessionId:H,tenantId:Ke||void 0,postBody:le||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask($t)(Kt))}catch(An){y.reject(An)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return In;case"linkViaPopup":case"linkViaRedirect":return po;case"reauthViaPopup":case"reauthViaRedirect":return Yi;default:Se(this.auth,"internal-error")}}resolve(m){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kh=new it(2e3,1e4);function _g(w,m,y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,s.Z)(function*(w,m,y){const T=dr(w);Ne(w,m,S);const H=aa(T,y);return new kc(T,"signInViaPopup",m,H).executeNotNull()})).apply(this,arguments)}function go(w,m,y){return No.apply(this,arguments)}function No(){return(No=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w);Ne(T.auth,m,S);const H=aa(T.auth,y);return new kc(T.auth,"reauthViaPopup",m,H,T).executeNotNull()})).apply(this,arguments)}function Su(w,m,y){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w);Ne(T.auth,m,S);const H=aa(T.auth,y);return new kc(T.auth,"linkViaPopup",m,H,T).executeNotNull()})).apply(this,arguments)}let kc=(()=>{class w extends Cd{constructor(y,T,H,le,Ke){super(y,T,le,Ke),this.provider=H,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,s.Z)(function*(){const T=yield y.execute();return ue(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,s.Z)(function*(){q(1===y.filter.length,"Popup operations only handle one event");const T=jl();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(H=>{y.reject(H)}),y.resolver._isIframeWebStorageSupported(y.auth,H=>{H||y.reject(De(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,H;this.pollId=(null===(H=null===(T=this.authWindow)||void 0===T?void 0:T.window)||void 0===H?void 0:H.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Kh.get())};y()}}return w.currentPopupAction=null,w})();const _s=new Map;class Xs extends Cd{constructor(m,y,T=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,s.Z)(function*(){let T=_s.get(y.auth._key());if(!T){try{const le=(yield function(w,m){return Ja.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;T=()=>Promise.resolve(le)}catch(H){T=()=>Promise.reject(H)}_s.set(y.auth._key(),T)}return y.bypassAuthState||_s.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,T=this;return(0,s.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(T,m);if("unknown"!==m.type){if(m.eventId){const H=yield T.auth._redirectUserForId(m.eventId);if(H)return T.user=H,y().call(T,m);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,s.Z)(function*(){})()}cleanUp(){}}function Ja(){return(Ja=(0,s.Z)(function*(w,m){const y=P(m),T=A(w);if(!(yield T._isAvailable()))return!1;const H="true"===(yield T._get(y));return yield T._remove(y),H})).apply(this,arguments)}function Ql(w,m){return Du.apply(this,arguments)}function Du(){return(Du=(0,s.Z)(function*(w,m){return A(w)._set(P(m),"true")})).apply(this,arguments)}function Id(){_s.clear()}function Au(w,m){_s.set(w._key(),m)}function A(w){return ne(w._redirectPersistence)}function P(w){return on("pendingRedirect",w.config.apiKey,w.name)}function Z(w,m,y){return function(w,m,y){return ke.apply(this,arguments)}(w,m,y)}function ke(){return(ke=(0,s.Z)(function*(w,m,y){const T=dr(w);Ne(w,m,S);const H=aa(T,y);return yield Ql(H,T),H._openRedirect(T,m,"signInViaRedirect")})).apply(this,arguments)}function et(w,m,y){return function(w,m,y){return Rt.apply(this,arguments)}(w,m,y)}function Rt(){return(Rt=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w);Ne(T.auth,m,S);const H=aa(T.auth,y);yield Ql(H,T.auth);const le=yield As(T);return H._openRedirect(T.auth,m,"reauthViaRedirect",le)})).apply(this,arguments)}function pn(w,m,y){return function(w,m,y){return qn.apply(this,arguments)}(w,m,y)}function qn(){return(qn=(0,s.Z)(function*(w,m,y){const T=(0,I.m9)(w);Ne(T.auth,m,S);const H=aa(T.auth,y);yield Yo(!1,T,m.providerId),yield Ql(H,T.auth);const le=yield As(T);return H._openRedirect(T.auth,m,"linkViaRedirect",le)})).apply(this,arguments)}function Cn(w,m){return si.apply(this,arguments)}function si(){return(si=(0,s.Z)(function*(w,m){return yield dr(w)._initializationPromise,pr(w,m,!1)})).apply(this,arguments)}function pr(w,m){return la.apply(this,arguments)}function la(){return(la=(0,s.Z)(function*(w,m,y=!1){const T=dr(w),H=aa(T,m),Ke=yield new Xs(T,H,y).execute();return Ke&&!y&&(delete Ke.user._redirectEventId,yield T._persistUserIfCurrent(Ke.user),yield T._setRedirectUser(null,m)),Ke})).apply(this,arguments)}function As(w){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,s.Z)(function*(w){const m=jl(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class xs{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(m,T)&&(y=!0,this.sendToConsumer(m,T),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Td(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var T;if(m.error&&!Td(m)){const H=(null===(T=m.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(De(this.auth,H))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const T=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&T}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Da(m))}saveEventToCache(m){this.cachedEventUids.add(Da(m)),this.lastProcessedEventTime=Date.now()}}function Da(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Td({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===(null==m?void 0:m.code)}function yg(w){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,s.Z)(function*(w,m={}){return dn(w,"GET","/v1/projects",m)})).apply(this,arguments)}const el=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hy=/^https?/;function Sd(){return(Sd=(0,s.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield yg(w);for(const y of m)try{if(fy(y))return}catch(T){}Se(w,"unauthorized-domain")})).apply(this,arguments)}function fy(w){const m=W(),{protocol:y,hostname:T}=new URL(m);if(w.startsWith("chrome-extension://")){const Ke=new URL(w);return""===Ke.hostname&&""===T?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&Ke.hostname===T}if(!hy.test(y))return!1;if(el.test(w))return T===w;const H=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+H+"|"+H+")$","i").test(T)}const Dw=new it(3e4,6e4);function Qh(){const w=Kr().___jsl;if(null==w?void 0:w.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Rc=null;function _o(w){return Rc=Rc||function(w){return new Promise((m,y)=>{var T,H,le;function Ke(){Qh(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Qh(),y(De(w,"network-request-failed"))},timeout:Dw.get()})}if(null===(H=null===(T=Kr().gapi)||void 0===T?void 0:T.iframes)||void 0===H?void 0:H.Iframe)m(gapi.iframes.getContext());else{if(!(null===(le=Kr().gapi)||void 0===le?void 0:le.load)){const gt=gs("iframefcb");return Kr()[gt]=()=>{gapi.load?Ke():y(De(w,"network-request-failed"))},Oo(`https://apis.google.com/js/api.js?onload=${gt}`).catch($t=>y($t))}Ke()}}).catch(m=>{throw Rc=null,m})}(w),Rc}const tl=new it(5e3,15e3),py={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xu(w){const m=w.config;ue(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?dt(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,T={apiKey:m.apiKey,appName:w.name,v:b.SDK_VERSION},H=Oc.get(w.config.apiHost);H&&(T.eid=H);const le=w._getFrameworks();return le.length&&(T.fw=le.join(",")),`${y}?${(0,I.xO)(T).slice(1)}`}function Xl(){return Xl=(0,s.Z)(function*(w){const m=yield _o(w),y=Kr().gapi;return ue(y,w,"internal-error"),m.open({where:document.body,url:xu(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:py,dontclear:!0},T=>new Promise(function(){var H=(0,s.Z)(function*(le,Ke){yield T.restyle({setHideOnLeave:!1});const gt=De(w,"network-request-failed"),$t=Kr().setTimeout(()=>{Ke(gt)},tl.get());function Kt(){Kr().clearTimeout($t),le(T)}T.ping(Kt).then(Kt,()=>{Ke(gt)})});return function(le,Ke){return H.apply(this,arguments)}}()))}),Xl.apply(this,arguments)}const ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bg{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function ec(w,m,y,T,H,le){ue(w.config.authDomain,w,"auth-domain-config-required"),ue(w.config.apiKey,w,"invalid-api-key");const Ke={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:T,v:b.SDK_VERSION,eventId:H};if(m instanceof S){m.setDefaultLanguage(w.languageCode),Ke.providerId=m.providerId||"",(0,I.xb)(m.getCustomParameters())||(Ke.customParameters=JSON.stringify(m.getCustomParameters()));for(const[$t,Kt]of Object.entries(le||{}))Ke[$t]=Kt}if(m instanceof N){const $t=m.getScopes().filter(Kt=>""!==Kt);$t.length>0&&(Ke.scopes=$t.join(","))}w.tenantId&&(Ke.tid=w.tenantId);const gt=Ke;for(const $t of Object.keys(gt))void 0===gt[$t]&&delete gt[$t];return`${function({config:w}){return w.emulator?dt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,I.xO)(gt).slice(1)}`}const Ru="webStorageSupport",rf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pi,this._completeRedirectFn=pr,this._overrideRedirectResult=Au}_openPopup(m,y,T,H){var le=this;return(0,s.Z)(function*(){var Ke;q(null===(Ke=le.eventManagers[m._key()])||void 0===Ke?void 0:Ke.manager,"_initialize() not called before _openPopup()");const gt=ec(m,y,T,W(),H);return function(w,m,y,T=500,H=600){const le=Math.max((window.screen.availHeight-H)/2,0).toString(),Ke=Math.max((window.screen.availWidth-T)/2,0).toString();let gt="";const $t=Object.assign(Object.assign({},ef),{width:T.toString(),height:H.toString(),top:le,left:Ke}),Kt=(0,I.z$)().toLowerCase();y&&(gt=ct(Kt)?"_blank":y),Be(Kt)&&(m=m||"http://localhost",$t.scrollbars="yes");const An=Object.entries($t).reduce((xa,[nc,Ma])=>`${xa}${nc}=${Ma},`,"");if(function(w=(0,I.z$)()){var m;return Dn(w)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Kt)&&"_self"!==gt)return function(w,m){const y=document.createElement("a");y.href=w,y.target=m;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(m||"",gt),new bg(null);const Hr=window.open(m||"",gt,An);ue(Hr,w,"popup-blocked");try{Hr.focus()}catch(xa){}return new bg(Hr)}(m,gt,jl())})()}_openRedirect(m,y,T,H){var le=this;return(0,s.Z)(function*(){return yield le._originValidation(m),w=ec(m,y,T,W(),H),Kr().location.href=w,new Promise(()=>{});var w})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:H,promise:le}=this.eventManagers[y];return H?Promise.resolve(H):(q(le,"If manager is not set, promise should be"),le)}const T=this.initAndGetManager(m);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(m){var y=this;return(0,s.Z)(function*(){const T=yield function(w){return Xl.apply(this,arguments)}(m),H=new xs(m);return T.register("authEvent",le=>(ue(null==le?void 0:le.authEvent,m,"invalid-auth-event"),{status:H.onEvent(le.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:H},y.iframes[m._key()]=T,H})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Ru,{type:Ru},H=>{var le;const Ke=null===(le=null==H?void 0:H[0])||void 0===le?void 0:le[Ru];void 0!==Ke&&y(!!Ke),Se(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return Sd.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Gt()||Oe()||Dn()}};class Nc extends class{constructor(m){this.factorId=m}_process(m,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,T);case"signin":return this._finalizeSignIn(m,y.credential);default:return Me("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Nc(m)}_finalizeEnroll(m,y,T){return function(w,m){return dn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(w,m))}(m,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function(w,m){return dn(w,"POST","/v2/accounts/mfaSignIn:finalize",Ot(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _y=(()=>{class w{constructor(){}static assertion(y){return Nc._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,Cg="@firebase/auth";class Ig{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,s.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(T=>{var H;m((null===(H=T)||void 0===H?void 0:H.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tc(w=(0,b.getApp)()){const m=(0,b._getProvider)(w,"auth");return m.isInitialized()?m.getImmediate():function(w,m){const y=(0,b._getProvider)(w,"auth");if(y.isInitialized()){const H=y.getImmediate(),le=y.getOptions();if((0,I.vZ)(le,null!=m?m:{}))return H;Se(H,"already-initialized")}return y.initialize({options:m})}(w,{popupRedirectResolver:rf,persistence:[Qr,xt,pi]})}w="Browser",(0,b._registerComponent)(new U.wA("auth",(m,{options:y})=>{const T=m.getProvider("app").getImmediate(),H=m.getProvider("heartbeat"),{apiKey:le,authDomain:Ke}=T.options;return((gt,$t)=>{ue(le&&!le.includes(":"),"invalid-api-key",{appName:gt.name}),ue(!(null==Ke?void 0:Ke.includes(":")),"argument-error",{appName:gt.name});const Kt={apiKey:le,authDomain:Ke,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ii(w)},An=new Rr(gt,$t,Kt);return function(w,m){const y=(null==m?void 0:m.persistence)||[],T=(Array.isArray(y)?y:[y]).map(ne);(null==m?void 0:m.errorMap)&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(T,null==m?void 0:m.popupRedirectResolver)}(An,y),An})(T,H)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,T)=>{m.getProvider("auth-internal").initialize()})),(0,b._registerComponent)(new U.wA("auth-internal",m=>{const y=dr(m.getProvider("auth").getImmediate());return new Ig(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,b.registerVersion)(Cg,"0.20.1",void 0),(0,b.registerVersion)(Cg,"0.20.1","esm2017")},4213:(St,M,R)=>{"use strict";R.d(M,{BH:()=>Je,LL:()=>W,ZR:()=>Ce,gQ:()=>Cr,zI:()=>Q,hu:()=>I,g5:()=>b,US:()=>U,tV:()=>he,h$:()=>Y,L:()=>re,$s:()=>$r,r3:()=>Ot,Sg:()=>qe,ne:()=>Di,p$:()=>te,vZ:()=>sr,ZB:()=>X,gK:()=>zn,pd:()=>ri,m9:()=>Kn,z$:()=>je,GJ:()=>vn,jU:()=>me,ru:()=>J,d:()=>De,xb:()=>_n,w1:()=>Fe,hl:()=>Me,uI:()=>Ge,UG:()=>Ie,Yr:()=>Ue,b$:()=>Se,G6:()=>ue,Mn:()=>Ne,w9:()=>en,cI:()=>lt,UI:()=>ur,xO:()=>Nr,zd:()=>Si,DV:()=>dn,ug:()=>xn,dS:()=>Oi,Pz:()=>Xe,Dv:()=>Jn,Wj:()=>ar,lb:()=>Ln,eu:()=>q});const I=function(Re,Ae){if(!Re)throw b(Ae)},b=function(Re){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Re)},k=function(Re){const Ae=[];let Le=0;for(let st=0;st<Re.length;st++){let xe=Re.charCodeAt(st);xe<128?Ae[Le++]=xe:xe<2048?(Ae[Le++]=xe>>6|192,Ae[Le++]=63&xe|128):55296==(64512&xe)&&st+1<Re.length&&56320==(64512&Re.charCodeAt(st+1))?(xe=65536+((1023&xe)<<10)+(1023&Re.charCodeAt(++st)),Ae[Le++]=xe>>18|240,Ae[Le++]=xe>>12&63|128,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128):(Ae[Le++]=xe>>12|224,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128)}return Ae},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Re,Ae){if(!Array.isArray(Re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Le=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,st=[];for(let xe=0;xe<Re.length;xe+=3){const $e=Re[xe],ht=xe+1<Re.length,wt=ht?Re[xe+1]:0,Xt=xe+2<Re.length,fn=Xt?Re[xe+2]:0;let Tr=(15&wt)<<2|fn>>6,Ye=63&fn;Xt||(Ye=64,ht||(Tr=64)),st.push(Le[$e>>2],Le[(3&$e)<<4|wt>>4],Le[Tr],Le[Ye])}return st.join("")},encodeString(Re,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Re):this.encodeByteArray(k(Re),Ae)},decodeString(Re,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Re):function(Re){const Ae=[];let Le=0,st=0;for(;Le<Re.length;){const xe=Re[Le++];if(xe<128)Ae[st++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const $e=Re[Le++];Ae[st++]=String.fromCharCode((31&xe)<<6|63&$e)}else if(xe>239&&xe<365){const Xt=((7&xe)<<18|(63&Re[Le++])<<12|(63&Re[Le++])<<6|63&Re[Le++])-65536;Ae[st++]=String.fromCharCode(55296+(Xt>>10)),Ae[st++]=String.fromCharCode(56320+(1023&Xt))}else{const $e=Re[Le++],ht=Re[Le++];Ae[st++]=String.fromCharCode((15&xe)<<12|(63&$e)<<6|63&ht)}}return Ae.join("")}(this.decodeStringToByteArray(Re,Ae))},decodeStringToByteArray(Re,Ae){this.init_();const Le=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,st=[];for(let xe=0;xe<Re.length;){const $e=Le[Re.charAt(xe++)],wt=xe<Re.length?Le[Re.charAt(xe)]:0;++xe;const fn=xe<Re.length?Le[Re.charAt(xe)]:64;++xe;const on=xe<Re.length?Le[Re.charAt(xe)]:64;if(++xe,null==$e||null==wt||null==fn||null==on)throw Error();st.push($e<<2|wt>>4),64!==fn&&(st.push(wt<<4&240|fn>>2),64!==on&&st.push(fn<<6&192|on))}return st},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Re=0;Re<this.ENCODED_VALS.length;Re++)this.byteToCharMap_[Re]=this.ENCODED_VALS.charAt(Re),this.charToByteMap_[this.byteToCharMap_[Re]]=Re,this.byteToCharMapWebSafe_[Re]=this.ENCODED_VALS_WEBSAFE.charAt(Re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Re]]=Re,Re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Re)]=Re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Re)]=Re)}}},Y=function(Re){const Ae=k(Re);return U.encodeByteArray(Ae,!0)},re=function(Re){return Y(Re).replace(/\./g,"")},he=function(Re){try{return U.decodeString(Re,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function te(Re){return X(void 0,Re)}function X(Re,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Re&&(Re={});break;case Array:Re=[];break;default:return Ae}for(const Le in Ae)!Ae.hasOwnProperty(Le)||!we(Le)||(Re[Le]=X(Re[Le],Ae[Le]));return Re}function we(Re){return"__proto__"!==Re}class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,Le)=>{this.resolve=Ae,this.reject=Le})}wrapCallback(Ae){return(Le,st)=>{Le?this.reject(Le):this.resolve(st),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(Le):Ae(Le,st))}}}function qe(Re,Ae){if(Re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const st=Ae||"demo-project",xe=Re.iat||0,$e=Re.sub||Re.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${st}`,aud:st,iat:xe,exp:xe+3600,auth_time:xe,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},Re);return[re(JSON.stringify({alg:"none",type:"JWT"})),re(JSON.stringify(ht)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Re){return!1}}function me(){return"object"==typeof self&&self.self===self}function J(){const Re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Re&&void 0!==Re.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return je().indexOf("Electron/")>=0}function Fe(){const Re=je();return Re.indexOf("MSIE ")>=0||Re.indexOf("Trident/")>=0}function Ne(){return je().indexOf("MSAppHost/")>=0}function Ue(){return!1}function ue(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){return"object"==typeof indexedDB}function q(){return new Promise((Re,Ae)=>{try{let Le=!0;const st="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(st);xe.onsuccess=()=>{xe.result.close(),Le||self.indexedDB.deleteDatabase(st),Re(!0)},xe.onupgradeneeded=()=>{Le=!1},xe.onerror=()=>{var $e;Ae((null===($e=xe.error)||void 0===$e?void 0:$e.message)||"")}}catch(Le){Ae(Le)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ce extends Error{constructor(Ae,Le,st){super(Le),this.code=Ae,this.customData=st,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}class W{constructor(Ae,Le,st){this.service=Ae,this.serviceName=Le,this.errors=st}create(Ae,...Le){const st=Le[0]||{},xe=`${this.service}/${Ae}`,$e=this.errors[Ae],ht=$e?function(Re,Ae){return Re.replace(Ve,(Le,st)=>{const xe=Ae[st];return null!=xe?String(xe):`<${st}?>`})}($e,st):"Error";return new Ce(xe,`${this.serviceName}: ${ht} (${xe}).`,st)}}const Ve=/\{\$([^}]+)}/g;function lt(Re){return JSON.parse(Re)}function Xe(Re){return JSON.stringify(Re)}const it=function(Re){let Ae={},Le={},st={},xe="";try{const $e=Re.split(".");Ae=lt(he($e[0])||""),Le=lt(he($e[1])||""),xe=$e[2],st=Le.d||{},delete Le.d}catch($e){}return{header:Ae,claims:Le,data:st,signature:xe}},en=function(Re){const Le=it(Re).claims;return!!Le&&"object"==typeof Le&&Le.hasOwnProperty("iat")},vn=function(Re){const Ae=it(Re).claims;return"object"==typeof Ae&&!0===Ae.admin};function Ot(Re,Ae){return Object.prototype.hasOwnProperty.call(Re,Ae)}function dn(Re,Ae){if(Object.prototype.hasOwnProperty.call(Re,Ae))return Re[Ae]}function _n(Re){for(const Ae in Re)if(Object.prototype.hasOwnProperty.call(Re,Ae))return!1;return!0}function ur(Re,Ae,Le){const st={};for(const xe in Re)Object.prototype.hasOwnProperty.call(Re,xe)&&(st[xe]=Ae.call(Le,Re[xe],xe,Re));return st}function sr(Re,Ae){if(Re===Ae)return!0;const Le=Object.keys(Re),st=Object.keys(Ae);for(const xe of Le){if(!st.includes(xe))return!1;const $e=Re[xe],ht=Ae[xe];if(Nn($e)&&Nn(ht)){if(!sr($e,ht))return!1}else if($e!==ht)return!1}for(const xe of st)if(!Le.includes(xe))return!1;return!0}function Nn(Re){return null!==Re&&"object"==typeof Re}function Nr(Re){const Ae=[];for(const[Le,st]of Object.entries(Re))Array.isArray(st)?st.forEach(xe=>{Ae.push(encodeURIComponent(Le)+"="+encodeURIComponent(xe))}):Ae.push(encodeURIComponent(Le)+"="+encodeURIComponent(st));return Ae.length?"&"+Ae.join("&"):""}function Si(Re){const Ae={};return Re.replace(/^\?/,"").split("&").forEach(st=>{if(st){const[xe,$e]=st.split("=");Ae[decodeURIComponent(xe)]=decodeURIComponent($e)}}),Ae}function ri(Re){const Ae=Re.indexOf("?");if(!Ae)return"";const Le=Re.indexOf("#",Ae);return Re.substring(Ae,Le>0?Le:void 0)}class Cr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ae=1;Ae<this.blockSize;++Ae)this.pad_[Ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ae,Le){Le||(Le=0);const st=this.W_;if("string"==typeof Ae)for(let on=0;on<16;on++)st[on]=Ae.charCodeAt(Le)<<24|Ae.charCodeAt(Le+1)<<16|Ae.charCodeAt(Le+2)<<8|Ae.charCodeAt(Le+3),Le+=4;else for(let on=0;on<16;on++)st[on]=Ae[Le]<<24|Ae[Le+1]<<16|Ae[Le+2]<<8|Ae[Le+3],Le+=4;for(let on=16;on<80;on++){const Tr=st[on-3]^st[on-8]^st[on-14]^st[on-16];st[on]=4294967295&(Tr<<1|Tr>>>31)}let fn,Gn,xe=this.chain_[0],$e=this.chain_[1],ht=this.chain_[2],wt=this.chain_[3],Xt=this.chain_[4];for(let on=0;on<80;on++){on<40?on<20?(fn=wt^$e&(ht^wt),Gn=1518500249):(fn=$e^ht^wt,Gn=1859775393):on<60?(fn=$e&ht|wt&($e|ht),Gn=2400959708):(fn=$e^ht^wt,Gn=3395469782);const Tr=(xe<<5|xe>>>27)+fn+Xt+Gn+st[on]&4294967295;Xt=wt,wt=ht,ht=4294967295&($e<<30|$e>>>2),$e=xe,xe=Tr}this.chain_[0]=this.chain_[0]+xe&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+ht&4294967295,this.chain_[3]=this.chain_[3]+wt&4294967295,this.chain_[4]=this.chain_[4]+Xt&4294967295}update(Ae,Le){if(null==Ae)return;void 0===Le&&(Le=Ae.length);const st=Le-this.blockSize;let xe=0;const $e=this.buf_;let ht=this.inbuf_;for(;xe<Le;){if(0===ht)for(;xe<=st;)this.compress_(Ae,xe),xe+=this.blockSize;if("string"==typeof Ae){for(;xe<Le;)if($e[ht]=Ae.charCodeAt(xe),++ht,++xe,ht===this.blockSize){this.compress_($e),ht=0;break}}else for(;xe<Le;)if($e[ht]=Ae[xe],++ht,++xe,ht===this.blockSize){this.compress_($e),ht=0;break}}this.inbuf_=ht,this.total_+=Le}digest(){const Ae=[];let Le=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let xe=this.blockSize-1;xe>=56;xe--)this.buf_[xe]=255&Le,Le/=256;this.compress_(this.buf_);let st=0;for(let xe=0;xe<5;xe++)for(let $e=24;$e>=0;$e-=8)Ae[st]=this.chain_[xe]>>$e&255,++st;return Ae}}function Di(Re,Ae){const Le=new yi(Re,Ae);return Le.subscribe.bind(Le)}class yi{constructor(Ae,Le){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Le,this.task.then(()=>{Ae(this)}).catch(st=>{this.error(st)})}next(Ae){this.forEachObserver(Le=>{Le.next(Ae)})}error(Ae){this.forEachObserver(Le=>{Le.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,Le,st){let xe;if(void 0===Ae&&void 0===Le&&void 0===st)throw new Error("Missing Observer.");xe=function(Re,Ae){if("object"!=typeof Re||null===Re)return!1;for(const Le of["next","error","complete"])if(Le in Re&&"function"==typeof Re[Le])return!0;return!1}(Ae)?Ae:{next:Ae,error:Le,complete:st},void 0===xe.next&&(xe.next=Zn),void 0===xe.error&&(xe.error=Zn),void 0===xe.complete&&(xe.complete=Zn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch(ht){}}),this.observers.push(xe),$e}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let Le=0;Le<this.observers.length;Le++)this.sendOne(Le,Ae)}sendOne(Ae,Le){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{Le(this.observers[Ae])}catch(st){"undefined"!=typeof console&&console.error&&console.error(st)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zn(){}const Jn=function(Re,Ae,Le,st){let xe;if(st<Ae?xe="at least "+Ae:st>Le&&(xe=0===Le?"none":"no more than "+Le),xe)throw new Error(Re+" failed: Was called with "+st+(1===st?" argument.":" arguments.")+" Expects "+xe+".")};function zn(Re,Ae){return`${Re} failed: ${Ae} argument `}function ar(Re,Ae,Le,st){if((!st||Le)&&"function"!=typeof Le)throw new Error(zn(Re,Ae)+"must be a valid function.")}function Ln(Re,Ae,Le,st){if((!st||Le)&&("object"!=typeof Le||null===Le))throw new Error(zn(Re,Ae)+"must be a valid context object.")}const Oi=function(Re){const Ae=[];let Le=0;for(let st=0;st<Re.length;st++){let xe=Re.charCodeAt(st);if(xe>=55296&&xe<=56319){const $e=xe-55296;st++,I(st<Re.length,"Surrogate pair missing trail surrogate."),xe=65536+($e<<10)+(Re.charCodeAt(st)-56320)}xe<128?Ae[Le++]=xe:xe<2048?(Ae[Le++]=xe>>6|192,Ae[Le++]=63&xe|128):xe<65536?(Ae[Le++]=xe>>12|224,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128):(Ae[Le++]=xe>>18|240,Ae[Le++]=xe>>12&63|128,Ae[Le++]=xe>>6&63|128,Ae[Le++]=63&xe|128)}return Ae},xn=function(Re){let Ae=0;for(let Le=0;Le<Re.length;Le++){const st=Re.charCodeAt(Le);st<128?Ae++:st<2048?Ae+=2:st>=55296&&st<=56319?(Ae+=4,Le++):Ae+=3}return Ae};function $r(Re,Ae=1e3,Le=2){const st=Ae*Math.pow(Le,Re),xe=Math.round(.5*st*(Math.random()-.5)*2);return Math.min(144e5,st+xe)}function Kn(Re){return Re&&Re._delegate?Re._delegate:Re}},7713:(St,M,R)=>{"use strict";R.d(M,{Mq:()=>s.getApp,C6:()=>s.getApps});var s=R(1572);(0,s.registerVersion)("firebase","9.8.1","app")},7892:(St,M,R)=>{"use strict";R.d(M,{Z:()=>s.Z});var s=R(6293);s.Z.registerVersion("firebase","9.8.1","app-compat")},2115:(St,M,R)=>{"use strict";R.r(M);var s=R(8239),I=R(6293),b=R(6670),k=R(4213),Y=(R(1572),R(3855),R(1177));function re(){return window}function X(){return(X=(0,s.Z)(function*(Ye,Be,Oe){var ct;const{BuildInfo:Tt}=re();(0,b.aq)(Be.sessionId,"AuthEvent did not contain a session ID");const sn=yield me(Be.sessionId),Zt={};return(0,b.ar)()?Zt.ibi=Tt.packageName:(0,b.as)()?Zt.apn=Tt.packageName:(0,b.at)(Ye,"operation-not-supported-in-this-environment"),Tt.displayName&&(Zt.appDisplayName=Tt.displayName),Zt.sessionId=sn,(0,b.au)(Ye,Oe,Be.type,void 0,null!==(ct=Be.eventId)&&void 0!==ct?ct:void 0,Zt)})).apply(this,arguments)}function Je(){return(Je=(0,s.Z)(function*(Ye){const{BuildInfo:Be}=re(),Oe={};(0,b.ar)()?Oe.iosBundleId=Be.packageName:(0,b.as)()?Oe.androidPackageName=Be.packageName:(0,b.at)(Ye,"operation-not-supported-in-this-environment"),yield(0,b.av)(Ye,Oe)})).apply(this,arguments)}function Ge(){return(Ge=(0,s.Z)(function*(Ye,Be,Oe){const{cordova:ct}=re();let Tt=()=>{};try{yield new Promise((sn,Zt)=>{let hn=null;function Dn(){var pt;sn();const Gt=null===(pt=ct.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof Gt&&Gt(),"function"==typeof(null==Oe?void 0:Oe.close)&&Oe.close()}function $n(){hn||(hn=window.setTimeout(()=>{Zt((0,b.aw)(Ye,"redirect-cancelled-by-user"))},2e3))}function _r(){"visible"===(null==document?void 0:document.visibilityState)&&$n()}Be.addPassiveListener(Dn),document.addEventListener("resume",$n,!1),(0,b.as)()&&document.addEventListener("visibilitychange",_r,!1),Tt=()=>{Be.removePassiveListener(Dn),document.removeEventListener("resume",$n,!1),document.removeEventListener("visibilitychange",_r,!1),hn&&window.clearTimeout(hn)}})}finally{Tt()}})).apply(this,arguments)}function me(Ye){return J.apply(this,arguments)}function J(){return(J=(0,s.Z)(function*(Ye){const Be=Se(Ye),Oe=yield crypto.subtle.digest("SHA-256",Be);return Array.from(new Uint8Array(Oe)).map(Tt=>Tt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Se(Ye){if((0,b.aq)(/[0-9a-zA-Z]+/.test(Ye),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ye);const Be=new ArrayBuffer(Ye.length),Oe=new Uint8Array(Be);for(let ct=0;ct<Ye.length;ct++)Oe[ct]=Ye.charCodeAt(ct);return Oe}class Fe extends b.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Be=>{this.resolveInialized=Be})}addPassiveListener(Be){this.passiveListeners.add(Be)}removePassiveListener(Be){this.passiveListeners.delete(Be)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Be){return this.resolveInialized(),this.passiveListeners.forEach(Oe=>Oe(Be)),super.onEvent(Be)}initialized(){var Be=this;return(0,s.Z)(function*(){yield Be.initPromise})()}}function ue(Ye){return Me.apply(this,arguments)}function Me(){return(Me=(0,s.Z)(function*(Ye){const Be=yield ne()._get(ie(Ye));return Be&&(yield ne()._remove(ie(Ye))),Be})).apply(this,arguments)}function Q(){const Ye=[],Be="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Oe=0;Oe<20;Oe++){const ct=Math.floor(Math.random()*Be.length);Ye.push(Be.charAt(ct))}return Ye.join("")}function ne(){return(0,b.ay)(b.b)}function ie(Ye){return(0,b.az)("authEvent",Ye.config.apiKey,Ye.name)}function ce(Ye){if(!(null==Ye?void 0:Ye.includes("?")))return{};const[Be,...Oe]=Ye.split("?");return(0,k.zd)(Oe.join("?"))}function it(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,b.aw)("no-auth-event")}}function Ot(){var Ye;return(null===(Ye=null==self?void 0:self.location)||void 0===Ye?void 0:Ye.protocol)||null}function _n(Ye=(0,k.z$)()){return!("file:"!==Ot()&&"ionic:"!==Ot()||!Ye.toLowerCase().match(/iphone|ipad|ipod|android/))}function Si(){try{const Ye=self.localStorage,Be=b.aI();if(Ye)return Ye.setItem(Be,"1"),Ye.removeItem(Be),!function(Ye=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(Ye=(0,k.z$)()){return/Edge\/\d+/.test(Ye)}(Ye)}()||(0,k.hl)()}catch(Ye){return ri()&&(0,k.hl)()}return!1}function ri(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cr(){return("http:"===Ot()||"https:"===Ot()||(0,k.ru)()||_n())&&!((0,k.b$)()||(0,k.UG)())&&Si()&&!ri()}function Di(){return _n()&&"undefined"!=typeof document}function tn(){return(tn=(0,s.Z)(function*(){return!!Di()&&new Promise(Ye=>{const Be=setTimeout(()=>{Ye(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Be),Ye(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},Jn=b.ax,zn="persistence";function ar(Ye){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,s.Z)(function*(Ye){yield Ye._initializationPromise;const Be=xn(),Oe=b.az(zn,Ye.config.apiKey,Ye.name);Be&&Be.setItem(Oe,Ye._getPersistence())})).apply(this,arguments)}function xn(){var Ye;try{return(null===(Ye="undefined"!=typeof window?window:null)||void 0===Ye?void 0:Ye.sessionStorage)||null}catch(Be){return null}}const Ft=b.ax;class Lt{constructor(){this.browserResolver=b.ay(b.k),this.cordovaResolver=b.ay(class{constructor(){this._redirectPersistence=b.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=b.aB,this._overrideRedirectResult=b.aC}_initialize(Be){var Oe=this;return(0,s.Z)(function*(){const ct=Be._key();let Tt=Oe.eventManagers.get(ct);return Tt||(Tt=new Fe(Be),Oe.eventManagers.set(ct,Tt),Oe.attachCallbackListeners(Be,Tt)),Tt})()}_openPopup(Be){(0,b.at)(Be,"operation-not-supported-in-this-environment")}_openRedirect(Be,Oe,ct,Tt){var sn=this;return(0,s.Z)(function*(){!function(Ye){var Be,Oe,ct,Tt,sn,Zt,hn,Dn,$n,_r;const pt=re();(0,b.ax)("function"==typeof(null===(Be=null==pt?void 0:pt.universalLinks)||void 0===Be?void 0:Be.subscribe),Ye,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,b.ax)(void 0!==(null===(Oe=null==pt?void 0:pt.BuildInfo)||void 0===Oe?void 0:Oe.packageName),Ye,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,b.ax)("function"==typeof(null===(sn=null===(Tt=null===(ct=null==pt?void 0:pt.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===sn?void 0:sn.openUrl),Ye,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,b.ax)("function"==typeof(null===(Dn=null===(hn=null===(Zt=null==pt?void 0:pt.cordova)||void 0===Zt?void 0:Zt.plugins)||void 0===hn?void 0:hn.browsertab)||void 0===Dn?void 0:Dn.isAvailable),Ye,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,b.ax)("function"==typeof(null===(_r=null===($n=null==pt?void 0:pt.cordova)||void 0===$n?void 0:$n.InAppBrowser)||void 0===_r?void 0:_r.open),Ye,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Be);const Zt=yield sn._initialize(Be);yield Zt.initialized(),Zt.resetRedirect(),(0,b.aD)(),yield sn._originValidation(Be);const hn=function(Ye,Be,Oe=null){return{type:Be,eventId:Oe,urlResponse:null,sessionId:Q(),postBody:null,tenantId:Ye.tenantId,error:(0,b.aw)(Ye,"no-auth-event")}}(Be,ct,Tt);yield function(Ye,Be){return ne()._set(ie(Ye),Be)}(Be,hn);const Dn=yield function(Ye,Be,Oe){return X.apply(this,arguments)}(Be,hn,Oe),$n=yield function(Ye){const{cordova:Be}=re();return new Promise(Oe=>{Be.plugins.browsertab.isAvailable(ct=>{let Tt=null;ct?Be.plugins.browsertab.openUrl(Ye):Tt=Be.InAppBrowser.open(Ye,(0,b.ap)()?"_blank":"_system","location=yes"),Oe(Tt)})})}(Dn);return function(Ye,Be,Oe){return Ge.apply(this,arguments)}(Be,Zt,$n)})()}_isIframeWebStorageSupported(Be,Oe){throw new Error("Method not implemented.")}_originValidation(Be){const Oe=Be._key();return this.originValidationPromises[Oe]||(this.originValidationPromises[Oe]=function(Ye){return Je.apply(this,arguments)}(Be)),this.originValidationPromises[Oe]}attachCallbackListeners(Be,Oe){const{universalLinks:ct,handleOpenURL:Tt,BuildInfo:sn}=re(),Zt=setTimeout((0,s.Z)(function*(){yield ue(Be),Oe.onEvent(it())}),500),hn=function(){var _r=(0,s.Z)(function*(pt){clearTimeout(Zt);const Gt=yield ue(Be);let Wn=null;Gt&&(null==pt?void 0:pt.url)&&(Wn=function(Ye,Be){var Oe,ct;const Tt=function(Ye){const Be=ce(Ye),Oe=Be.link?decodeURIComponent(Be.link):void 0,ct=ce(Oe).link,Tt=Be.deep_link_id?decodeURIComponent(Be.deep_link_id):void 0;return ce(Tt).link||Tt||ct||Oe||Ye}(Be);if(Tt.includes("/__/auth/callback")){const sn=ce(Tt),Zt=sn.firebaseError?function(Ye){try{return JSON.parse(Ye)}catch(Be){return null}}(decodeURIComponent(sn.firebaseError)):null,hn=null===(ct=null===(Oe=null==Zt?void 0:Zt.code)||void 0===Oe?void 0:Oe.split("auth/"))||void 0===ct?void 0:ct[1],Dn=hn?(0,b.aw)(hn):null;return Dn?{type:Ye.type,eventId:Ye.eventId,tenantId:Ye.tenantId,error:Dn,urlResponse:null,sessionId:null,postBody:null}:{type:Ye.type,eventId:Ye.eventId,tenantId:Ye.tenantId,sessionId:Ye.sessionId,urlResponse:Tt,postBody:null}}return null}(Gt,pt.url)),Oe.onEvent(Wn||it())});return function(Gt){return _r.apply(this,arguments)}}();void 0!==ct&&"function"==typeof ct.subscribe&&ct.subscribe(null,hn);const Dn=Tt,$n=`${sn.packageName.toLowerCase()}://`;re().handleOpenURL=function(){var _r=(0,s.Z)(function*(pt){if(pt.toLowerCase().startsWith($n)&&hn({url:pt}),"function"==typeof Dn)try{Dn(pt)}catch(Gt){console.error(Gt)}});return function(pt){return _r.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=b.a,this._completeRedirectFn=b.aB,this._overrideRedirectResult=b.aC}_initialize(Be){var Oe=this;return(0,s.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._initialize(Be)})()}_openPopup(Be,Oe,ct,Tt){var sn=this;return(0,s.Z)(function*(){return yield sn.selectUnderlyingResolver(),sn.assertedUnderlyingResolver._openPopup(Be,Oe,ct,Tt)})()}_openRedirect(Be,Oe,ct,Tt){var sn=this;return(0,s.Z)(function*(){return yield sn.selectUnderlyingResolver(),sn.assertedUnderlyingResolver._openRedirect(Be,Oe,ct,Tt)})()}_isIframeWebStorageSupported(Be,Oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Be,Oe)}_originValidation(Be){return this.assertedUnderlyingResolver._originValidation(Be)}get _shouldInitProactively(){return Di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Be=this;return(0,s.Z)(function*(){if(Be.underlyingResolver)return;const Oe=yield function(){return tn.apply(this,arguments)}();Be.underlyingResolver=Oe?Be.cordovaResolver:Be.browserResolver})()}}function li(Ye){return Ye.unwrap()}function $r(Ye){return Yn(Ye)}function Yn(Ye){const{_tokenResponse:Be}=Ye instanceof k.ZR?Ye.customData:Ye;if(!Be)return null;if(!(Ye instanceof k.ZR)&&"temporaryProof"in Be&&"phoneNumber"in Be)return b.P.credentialFromResult(Ye);const Oe=Be.providerId;if(!Oe||Oe===b.o.PASSWORD)return null;let ct;switch(Oe){case b.o.GOOGLE:ct=b.Q;break;case b.o.FACEBOOK:ct=b.N;break;case b.o.GITHUB:ct=b.T;break;case b.o.TWITTER:ct=b.W;break;default:const{oauthIdToken:Tt,oauthAccessToken:sn,oauthTokenSecret:Zt,pendingToken:hn,nonce:Dn}=Be;return sn||Zt||Tt||hn?hn?Oe.startsWith("saml.")?b.aL._create(Oe,hn):b.J._fromParams({providerId:Oe,signInMethod:Oe,pendingToken:hn,idToken:Tt,accessToken:sn}):new b.U(Oe).credential({idToken:Tt,accessToken:sn,rawNonce:Dn}):null}return Ye instanceof k.ZR?ct.credentialFromError(Ye):ct.credentialFromResult(Ye)}function Kn(Ye,Be){return Be.catch(Oe=>{throw Oe instanceof k.ZR&&function(Ye,Be){var Oe;const ct=null===(Oe=Be.customData)||void 0===Oe?void 0:Oe._tokenResponse;if("auth/multi-factor-auth-required"===Be.code)Be.resolver=new Le(Ye,b.an(Ye,Be));else if(ct){const Tt=Yn(Be),sn=Be;Tt&&(sn.credential=Tt,sn.tenantId=ct.tenantId||void 0,sn.email=ct.email||void 0,sn.phoneNumber=ct.phoneNumber||void 0)}}(Ye,Oe),Oe}).then(Oe=>{const Tt=Oe.user;return{operationType:Oe.operationType,credential:$r(Oe),additionalUserInfo:b.al(Oe),user:st.getOrCreate(Tt)}})}function Re(Ye,Be){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,s.Z)(function*(Ye,Be){const Oe=yield Be;return{verificationId:Oe.verificationId,confirm:ct=>Kn(Ye,Oe.confirm(ct))}})).apply(this,arguments)}class Le{constructor(Be,Oe){this.resolver=Oe,this.auth=Be.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Be){return Kn(li(this.auth),this.resolver.resolveSignIn(Be))}}class st{constructor(Be){this._delegate=Be,this.multiFactor=b.ao(Be)}static getOrCreate(Be){return st.USER_MAP.has(Be)||st.USER_MAP.set(Be,new st(Be)),st.USER_MAP.get(Be)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Be){return this._delegate.getIdTokenResult(Be)}getIdToken(Be){return this._delegate.getIdToken(Be)}linkAndRetrieveDataWithCredential(Be){return this.linkWithCredential(Be)}linkWithCredential(Be){var Oe=this;return(0,s.Z)(function*(){return Kn(Oe.auth,b.Z(Oe._delegate,Be))})()}linkWithPhoneNumber(Be,Oe){var ct=this;return(0,s.Z)(function*(){return Re(ct.auth,b.l(ct._delegate,Be,Oe))})()}linkWithPopup(Be){var Oe=this;return(0,s.Z)(function*(){return Kn(Oe.auth,b.d(Oe._delegate,Be,Lt))})()}linkWithRedirect(Be){var Oe=this;return(0,s.Z)(function*(){return yield ar(b.aE(Oe.auth)),b.g(Oe._delegate,Be,Lt)})()}reauthenticateAndRetrieveDataWithCredential(Be){return this.reauthenticateWithCredential(Be)}reauthenticateWithCredential(Be){var Oe=this;return(0,s.Z)(function*(){return Kn(Oe.auth,b._(Oe._delegate,Be))})()}reauthenticateWithPhoneNumber(Be,Oe){return Re(this.auth,b.r(this._delegate,Be,Oe))}reauthenticateWithPopup(Be){return Kn(this.auth,b.e(this._delegate,Be,Lt))}reauthenticateWithRedirect(Be){var Oe=this;return(0,s.Z)(function*(){return yield ar(b.aE(Oe.auth)),b.h(Oe._delegate,Be,Lt)})()}sendEmailVerification(Be){return b.ab(this._delegate,Be)}unlink(Be){var Oe=this;return(0,s.Z)(function*(){return yield b.ak(Oe._delegate,Be),Oe})()}updateEmail(Be){return b.ag(this._delegate,Be)}updatePassword(Be){return b.ah(this._delegate,Be)}updatePhoneNumber(Be){return b.u(this._delegate,Be)}updateProfile(Be){return b.af(this._delegate,Be)}verifyBeforeUpdateEmail(Be,Oe){return b.ac(this._delegate,Be,Oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}st.USER_MAP=new WeakMap;const xe=b.ax;let $e=(()=>{class Ye{constructor(Oe,ct){if(this.app=Oe,ct.isInitialized())return this._delegate=ct.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Tt}=Oe.options;xe(Tt,"invalid-api-key",{appName:Oe.name}),xe(Tt,"invalid-api-key",{appName:Oe.name});const sn="undefined"!=typeof window?Lt:void 0;this._delegate=ct.initialize({options:{persistence:wt(Tt,Oe.name),popupRedirectResolver:sn}}),this._delegate._updateErrorMap(b.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?st.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Oe){this._delegate.languageCode=Oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Oe){this._delegate.tenantId=Oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Oe,ct){b.G(this._delegate,Oe,ct)}applyActionCode(Oe){return b.a2(this._delegate,Oe)}checkActionCode(Oe){return b.a3(this._delegate,Oe)}confirmPasswordReset(Oe,ct){return b.a1(this._delegate,Oe,ct)}createUserWithEmailAndPassword(Oe,ct){var Tt=this;return(0,s.Z)(function*(){return Kn(Tt._delegate,b.a5(Tt._delegate,Oe,ct))})()}fetchProvidersForEmail(Oe){return this.fetchSignInMethodsForEmail(Oe)}fetchSignInMethodsForEmail(Oe){return b.aa(this._delegate,Oe)}isSignInWithEmailLink(Oe){return b.a8(this._delegate,Oe)}getRedirectResult(){var Oe=this;return(0,s.Z)(function*(){xe(Cr(),Oe._delegate,"operation-not-supported-in-this-environment");const ct=yield b.j(Oe._delegate,Lt);return ct?Kn(Oe._delegate,Promise.resolve(ct)):{credential:null,user:null}})()}addFrameworkForLogging(Oe){!function(Ye,Be){(0,b.aE)(Ye)._logFramework(Be)}(this._delegate,Oe)}onAuthStateChanged(Oe,ct,Tt){const{next:sn,error:Zt,complete:hn}=ht(Oe,ct,Tt);return this._delegate.onAuthStateChanged(sn,Zt,hn)}onIdTokenChanged(Oe,ct,Tt){const{next:sn,error:Zt,complete:hn}=ht(Oe,ct,Tt);return this._delegate.onIdTokenChanged(sn,Zt,hn)}sendSignInLinkToEmail(Oe,ct){return b.a7(this._delegate,Oe,ct)}sendPasswordResetEmail(Oe,ct){return b.a0(this._delegate,Oe,ct||void 0)}setPersistence(Oe){var ct=this;return(0,s.Z)(function*(){let Tt;switch(function(Ye,Be){Jn(Object.values(Zn).includes(Be),Ye,"invalid-persistence-type"),(0,k.b$)()?Jn(Be!==Zn.SESSION,Ye,"unsupported-persistence-type"):(0,k.UG)()?Jn(Be===Zn.NONE,Ye,"unsupported-persistence-type"):ri()?Jn(Be===Zn.NONE||Be===Zn.LOCAL&&(0,k.hl)(),Ye,"unsupported-persistence-type"):Jn(Be===Zn.NONE||Si(),Ye,"unsupported-persistence-type")}(ct._delegate,Oe),Oe){case Zn.SESSION:Tt=b.a;break;case Zn.LOCAL:Tt=(yield b.ay(b.i)._isAvailable())?b.i:b.b;break;case Zn.NONE:Tt=b.L;break;default:return b.at("argument-error",{appName:ct._delegate.name})}return ct._delegate.setPersistence(Tt)})()}signInAndRetrieveDataWithCredential(Oe){return this.signInWithCredential(Oe)}signInAnonymously(){return Kn(this._delegate,b.X(this._delegate))}signInWithCredential(Oe){return Kn(this._delegate,b.Y(this._delegate,Oe))}signInWithCustomToken(Oe){return Kn(this._delegate,b.$(this._delegate,Oe))}signInWithEmailAndPassword(Oe,ct){return Kn(this._delegate,b.a6(this._delegate,Oe,ct))}signInWithEmailLink(Oe,ct){return Kn(this._delegate,b.a9(this._delegate,Oe,ct))}signInWithPhoneNumber(Oe,ct){return Re(this._delegate,b.s(this._delegate,Oe,ct))}signInWithPopup(Oe){var ct=this;return(0,s.Z)(function*(){return xe(Cr(),ct._delegate,"operation-not-supported-in-this-environment"),Kn(ct._delegate,b.c(ct._delegate,Oe,Lt))})()}signInWithRedirect(Oe){var ct=this;return(0,s.Z)(function*(){return xe(Cr(),ct._delegate,"operation-not-supported-in-this-environment"),yield ar(ct._delegate),b.f(ct._delegate,Oe,Lt)})()}updateCurrentUser(Oe){return this._delegate.updateCurrentUser(Oe)}verifyPasswordResetCode(Oe){return b.a4(this._delegate,Oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ye.Persistence=Zn,Ye})();function ht(Ye,Be,Oe){let ct=Ye;"function"!=typeof Ye&&({next:ct,error:Be,complete:Oe}=Ye);const Tt=ct;return{next:Zt=>Tt(Zt&&st.getOrCreate(Zt)),error:Be,complete:Oe}}function wt(Ye,Be){const Oe=function(Ye,Be){const Oe=xn();if(!Oe)return[];const ct=b.az(zn,Ye,Be);switch(Oe.getItem(ct)){case Zn.NONE:return[b.L];case Zn.LOCAL:return[b.i,b.a];case Zn.SESSION:return[b.a];default:return[]}}(Ye,Be);if("undefined"!=typeof self&&!Oe.includes(b.i)&&Oe.push(b.i),"undefined"!=typeof window)for(const ct of[b.b,b.a])Oe.includes(ct)||Oe.push(ct);return Oe.includes(b.L)||Oe.push(b.L),Oe}class Xt{constructor(){this.providerId="phone",this._delegate=new b.P(li(I.Z.auth()))}static credential(Be,Oe){return b.P.credential(Be,Oe)}verifyPhoneNumber(Be,Oe){return this._delegate.verifyPhoneNumber(Be,Oe)}unwrap(){return this._delegate}}Xt.PHONE_SIGN_IN_METHOD=b.P.PHONE_SIGN_IN_METHOD,Xt.PROVIDER_ID=b.P.PROVIDER_ID;const fn=b.ax;var Ye;(Ye=I.Z).INTERNAL.registerComponent(new Y.wA("auth-compat",Be=>{const Oe=Be.getProvider("app-compat").getImmediate(),ct=Be.getProvider("auth");return new $e(Oe,ct)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:b.A.EMAIL_SIGNIN,PASSWORD_RESET:b.A.PASSWORD_RESET,RECOVER_EMAIL:b.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:b.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:b.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:b.A.VERIFY_EMAIL}},EmailAuthProvider:b.M,FacebookAuthProvider:b.N,GithubAuthProvider:b.T,GoogleAuthProvider:b.Q,OAuthProvider:b.U,SAMLAuthProvider:b.V,PhoneAuthProvider:Xt,PhoneMultiFactorGenerator:b.m,RecaptchaVerifier:class{constructor(Be,Oe,ct=I.Z.app()){var Tt;fn(null===(Tt=ct.options)||void 0===Tt?void 0:Tt.apiKey,"invalid-api-key",{appName:ct.name}),this._delegate=new b.R(Be,Oe,ct.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:b.W,Auth:$e,AuthCredential:b.H,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ye.registerVersion("@firebase/auth-compat","0.2.14")},5477:(St,M,R)=>{St=R.nmd(St);var I="__lodash_hash_undefined__",O=9007199254740991,U="[object Arguments]",we="[object Function]",Ie="[object Object]",Xe=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt[U]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt[we]=dt["[object Map]"]=dt["[object Number]"]=dt[Ie]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1;var qt="object"==typeof global&&global&&global.Object===Object&&global,en="object"==typeof self&&self&&self.Object===Object&&self,vn=qt||en||Function("return this")(),Ot=M&&!M.nodeType&&M,dn=Ot&&St&&!St.nodeType&&St,_n=dn&&dn.exports===Ot,ur=_n&&qt.process,sr=function(){try{return dn&&dn.require&&dn.require("util").types||ur&&ur.binding&&ur.binding("util")}catch(pe){}}(),Nn=sr&&sr.isTypedArray;function Nr(j,pe,Te){switch(Te.length){case 0:return j.call(pe);case 1:return j.call(pe,Te[0]);case 2:return j.call(pe,Te[0],Te[1]);case 3:return j.call(pe,Te[0],Te[1],Te[2])}return j.apply(pe,Te)}var j,yi=Array.prototype,Fn=Object.prototype,Zn=vn["__core-js_shared__"],Jn=Function.prototype.toString,zn=Fn.hasOwnProperty,Gi=(j=/[^.]+$/.exec(Zn&&Zn.keys&&Zn.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",ar=Fn.toString,Ln=Jn.call(Object),Oi=RegExp("^"+Jn.call(zn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xn=_n?vn.Buffer:void 0,Ft=vn.Symbol,Lt=vn.Uint8Array,ci=function(j,pe){return function(Te){return j(pe(Te))}}(Object.getPrototypeOf,Object),$r=Object.create,Mn=Fn.propertyIsEnumerable,Yn=yi.splice,Kn=Ft?Ft.toStringTag:void 0,Re=function(){try{var j=Ws(Object,"defineProperty");return j({},"",{}),j}catch(pe){}}(),Ae=xn?xn.isBuffer:void 0,Le=Math.max,st=Date.now,xe=Ws(vn,"Map"),$e=Ws(Object,"create"),ht=function(){function j(){}return function(pe){if(!_e(pe))return{};if($r)return $r(pe);j.prototype=pe;var Te=new j;return j.prototype=void 0,Te}}();function wt(j){var pe=-1,Te=null==j?0:j.length;for(this.clear();++pe<Te;){var Qe=j[pe];this.set(Qe[0],Qe[1])}}function Ye(j){var pe=-1,Te=null==j?0:j.length;for(this.clear();++pe<Te;){var Qe=j[pe];this.set(Qe[0],Qe[1])}}function Zt(j){var pe=-1,Te=null==j?0:j.length;for(this.clear();++pe<Te;){var Qe=j[pe];this.set(Qe[0],Qe[1])}}function Gt(j){var pe=this.__data__=new Ye(j);this.size=pe.size}function xi(j,pe,Te){(void 0!==Te&&!fr(j[pe],Te)||void 0===Te&&!(pe in j))&&$i(j,pe,Te)}function ps(j,pe,Te){var Qe=j[pe];(!zn.call(j,pe)||!fr(Qe,Te)||void 0===Te&&!(pe in j))&&$i(j,pe,Te)}function an(j,pe){for(var Te=j.length;Te--;)if(fr(j[Te][0],pe))return Te;return-1}function $i(j,pe,Te){"__proto__"==pe&&Re?Re(j,pe,{configurable:!0,enumerable:!0,value:Te,writable:!0}):j[pe]=Te}wt.prototype.clear=function(){this.__data__=$e?$e(null):{},this.size=0},wt.prototype.delete=function(j){var pe=this.has(j)&&delete this.__data__[j];return this.size-=pe?1:0,pe},wt.prototype.get=function(j){var pe=this.__data__;if($e){var Te=pe[j];return Te===I?void 0:Te}return zn.call(pe,j)?pe[j]:void 0},wt.prototype.has=function(j){var pe=this.__data__;return $e?void 0!==pe[j]:zn.call(pe,j)},wt.prototype.set=function(j,pe){var Te=this.__data__;return this.size+=this.has(j)?0:1,Te[j]=$e&&void 0===pe?I:pe,this},Ye.prototype.clear=function(){this.__data__=[],this.size=0},Ye.prototype.delete=function(j){var pe=this.__data__,Te=an(pe,j);return!(Te<0||(Te==pe.length-1?pe.pop():Yn.call(pe,Te,1),--this.size,0))},Ye.prototype.get=function(j){var pe=this.__data__,Te=an(pe,j);return Te<0?void 0:pe[Te][1]},Ye.prototype.has=function(j){return an(this.__data__,j)>-1},Ye.prototype.set=function(j,pe){var Te=this.__data__,Qe=an(Te,j);return Qe<0?(++this.size,Te.push([j,pe])):Te[Qe][1]=pe,this},Zt.prototype.clear=function(){this.size=0,this.__data__={hash:new wt,map:new(xe||Ye),string:new wt}},Zt.prototype.delete=function(j){var pe=ui(this,j).delete(j);return this.size-=pe?1:0,pe},Zt.prototype.get=function(j){return ui(this,j).get(j)},Zt.prototype.has=function(j){return ui(this,j).has(j)},Zt.prototype.set=function(j,pe){var Te=ui(this,j),Qe=Te.size;return Te.set(j,pe),this.size+=Te.size==Qe?0:1,this},Gt.prototype.clear=function(){this.__data__=new Ye,this.size=0},Gt.prototype.delete=function(j){var pe=this.__data__,Te=pe.delete(j);return this.size=pe.size,Te},Gt.prototype.get=function(j){return this.__data__.get(j)},Gt.prototype.has=function(j){return this.__data__.has(j)},Gt.prototype.set=function(j,pe){var Te=this.__data__;if(Te instanceof Ye){var Qe=Te.__data__;if(!xe||Qe.length<199)return Qe.push([j,pe]),this.size=++Te.size,this;Te=this.__data__=new Zt(Qe)}return Te.set(j,pe),this.size=Te.size,this};var vi=function(pe,Te,Qe){for(var yt=-1,Pt=Object(pe),Bt=Qe(pe),Ut=Bt.length;Ut--;){var ln=Bt[++yt];if(!1===Te(Pt[ln],ln,Pt))break}return pe};function Or(j){return null==j?void 0===j?"[object Undefined]":"[object Null]":Kn&&Kn in Object(j)?function(j){var pe=zn.call(j,Kn),Te=j[Kn];try{j[Kn]=void 0;var Qe=!0}catch(Pt){}var yt=ar.call(j);return Qe&&(pe?j[Kn]=Te:delete j[Kn]),yt}(j):function(j){return ar.call(j)}(j)}function bi(j){return z(j)&&Or(j)==U}function Wr(j,pe,Te,Qe,yt){j!==pe&&vi(pe,function(Pt,Bt){if(yt||(yt=new Gt),_e(Pt))!function(j,pe,Te,Qe,yt,Pt,Bt){var Ut=mt(j,Te),ln=mt(pe,Te),rr=Bt.get(ln);if(rr)xi(j,Te,rr);else{var Lr=Pt?Pt(Ut,ln,Te+"",j,pe,Bt):void 0,Pn=void 0===Lr;if(Pn){var xo=Ni(ln),co=!xo&&lo(ln),Sr=!xo&&!co&&N(ln);Lr=ln,xo||co||Sr?Ni(Ut)?Lr=Ut:function(j){return z(j)&&wi(j)}(Ut)?Lr=function(j,pe){var Te=-1,Qe=j.length;for(pe||(pe=Array(Qe));++Te<Qe;)pe[Te]=j[Te];return pe}(Ut):co?(Pn=!1,Lr=function(j,pe){return j.slice()}(ln)):Sr?(Pn=!1,Lr=function(j,pe){var Te=function(j){var pe=new j.constructor(j.byteLength);return new Lt(pe).set(new Lt(j)),pe}(j.buffer);return new j.constructor(Te,j.byteOffset,j.length)}(ln)):Lr=[]:function(j){if(!z(j)||Or(j)!=Ie)return!1;var pe=ci(j);if(null===pe)return!0;var Te=zn.call(pe,"constructor")&&pe.constructor;return"function"==typeof Te&&Te instanceof Te&&Jn.call(Te)==Ln}(ln)||Zr(ln)?(Lr=Ut,Zr(Ut)?Lr=function(j){return function(j,pe,Te,Qe){var yt=!Te;Te||(Te={});for(var Pt=-1,Bt=pe.length;++Pt<Bt;){var Ut=pe[Pt],ln=void 0;void 0===ln&&(ln=j[Ut]),yt?$i(Te,Ut,ln):ps(Te,Ut,ln)}return Te}(j,oe(j))}(Ut):(!_e(Ut)||Ao(Ut))&&(Lr=function(j){return"function"!=typeof j.constructor||K(j)?{}:ht(ci(j))}(ln))):Pn=!1}Pn&&(Bt.set(ln,Lr),yt(Lr,ln,Qe,Pt,Bt),Bt.delete(ln)),xi(j,Te,Lr)}}(j,pe,Bt,Te,Wr,Qe,yt);else{var Ut=Qe?Qe(mt(j,Bt),Pt,Bt+"",j,pe,yt):void 0;void 0===Ut&&(Ut=Pt),xi(j,Bt,Ut)}},oe)}function Zo(j,pe){return Dt(function(j,pe,Te){return pe=Le(void 0===pe?j.length-1:pe,0),function(){for(var Qe=arguments,yt=-1,Pt=Le(Qe.length-pe,0),Bt=Array(Pt);++yt<Pt;)Bt[yt]=Qe[pe+yt];yt=-1;for(var Ut=Array(pe+1);++yt<pe;)Ut[yt]=Qe[yt];return Ut[pe]=Te(Bt),Nr(j,this,Ut)}}(j,pe,be),j+"")}var Wi=Re?function(j,pe){return Re(j,"toString",{configurable:!0,enumerable:!1,value:de(pe),writable:!0})}:be;function ei(j,pe,Te,Qe,yt,Pt){return _e(j)&&_e(pe)&&(Pt.set(pe,j),Wr(j,pe,void 0,ei,Pt),Pt.delete(pe)),j}function ui(j,pe){var Te=j.__data__;return function(j){var pe=typeof j;return"string"==pe||"number"==pe||"symbol"==pe||"boolean"==pe?"__proto__"!==j:null===j}(pe)?Te["string"==typeof pe?"string":"hash"]:Te.map}function Ws(j,pe){var Te=function(j,pe){return null==j?void 0:j[pe]}(j,pe);return function(j){return!(!_e(j)||function(j){return!!Gi&&Gi in j}(j))&&(Ao(j)?Oi:Xe).test(function(j){if(null!=j){try{return Jn.call(j)}catch(pe){}try{return j+""}catch(pe){}}return""}(j))}(Te)?Te:void 0}function ti(j,pe){var Te=typeof j;return!!(pe=null==pe?O:pe)&&("number"==Te||"symbol"!=Te&&it.test(j))&&j>-1&&j%1==0&&j<pe}function K(j){var pe=j&&j.constructor;return j===("function"==typeof pe&&pe.prototype||Fn)}function mt(j,pe){if(("constructor"!==pe||"function"!=typeof j[pe])&&"__proto__"!=pe)return j[pe]}var Dt=function(j){var pe=0,Te=0;return function(){var Qe=st(),yt=16-(Qe-Te);if(Te=Qe,yt>0){if(++pe>=800)return arguments[0]}else pe=0;return j.apply(void 0,arguments)}}(Wi);function fr(j,pe){return j===pe||j!=j&&pe!=pe}var Zr=bi(function(){return arguments}())?bi:function(j){return z(j)&&zn.call(j,"callee")&&!Mn.call(j,"callee")},Ni=Array.isArray;function wi(j){return null!=j&&ee(j.length)&&!Ao(j)}var lo=Ae||function(){return!1};function Ao(j){if(!_e(j))return!1;var pe=Or(j);return pe==we||"[object GeneratorFunction]"==pe||"[object AsyncFunction]"==pe||"[object Proxy]"==pe}function ee(j){return"number"==typeof j&&j>-1&&j%1==0&&j<=O}function _e(j){var pe=typeof j;return null!=j&&("object"==pe||"function"==pe)}function z(j){return null!=j&&"object"==typeof j}var N=Nn?function(j){return function(pe){return j(pe)}}(Nn):function(j){return z(j)&&ee(j.length)&&!!dt[Or(j)]},V=Zo(function(j){return j.push(void 0,ei),Nr(ve,void 0,j)});function oe(j){return wi(j)?function(j,pe){var Te=Ni(j),Qe=!Te&&Zr(j),yt=!Te&&!Qe&&lo(j),Pt=!Te&&!Qe&&!yt&&N(j),Bt=Te||Qe||yt||Pt,Ut=Bt?function(j,pe){for(var Te=-1,Qe=Array(j);++Te<j;)Qe[Te]=pe(Te);return Qe}(j.length,String):[],ln=Ut.length;for(var rr in j)(pe||zn.call(j,rr))&&(!Bt||!("length"==rr||yt&&("offset"==rr||"parent"==rr)||Pt&&("buffer"==rr||"byteLength"==rr||"byteOffset"==rr)||ti(rr,ln)))&&Ut.push(rr);return Ut}(j,!0):function(j){if(!_e(j))return function(j){var pe=[];if(null!=j)for(var Te in Object(j))pe.push(Te);return pe}(j);var pe=K(j),Te=[];for(var Qe in j)"constructor"==Qe&&(pe||!zn.call(j,Qe))||Te.push(Qe);return Te}(j)}var ve=function(j){return Zo(function(pe,Te){var Qe=-1,yt=Te.length,Pt=yt>1?Te[yt-1]:void 0,Bt=yt>2?Te[2]:void 0;for(Pt=j.length>3&&"function"==typeof Pt?(yt--,Pt):void 0,Bt&&function(j,pe,Te){if(!_e(Te))return!1;var Qe=typeof pe;return!!("number"==Qe?wi(Te)&&ti(pe,Te.length):"string"==Qe&&pe in Te)&&fr(Te[pe],j)}(Te[0],Te[1],Bt)&&(Pt=yt<3?void 0:Pt,yt=1),pe=Object(pe);++Qe<yt;){var Ut=Te[Qe];Ut&&j(pe,Ut,Qe,Pt)}return pe})}(function(j,pe,Te,Qe){Wr(j,pe,Te,Qe)});function de(j){return function(){return j}}function be(j){return j}St.exports=V},8305:(St,M,R)=>{"use strict";R.d(M,{y:()=>te});var s=R(584),I=R(7908),b=R(4816),k=R(4623);var Y=R(5367),re=R(5044),he=R(8706);let te=(()=>{class qe{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const Ie=new qe;return Ie.source=this,Ie.operator=Ge,Ie}subscribe(Ge,Ie,me){const J=function(qe){return qe&&qe instanceof s.Lv||function(qe){return qe&&(0,re.m)(qe.next)&&(0,re.m)(qe.error)&&(0,re.m)(qe.complete)}(qe)&&(0,I.Nn)(qe)}(Ge)?Ge:new s.Hp(Ge,Ie,me);return(0,he.x)(()=>{const{operator:Se,source:De}=this;J.add(Se?Se.call(J,De):De?this._subscribe(J):this._trySubscribe(J))}),J}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(Ie){Ge.error(Ie)}}forEach(Ge,Ie){return new(Ie=X(Ie))((me,J)=>{let Se;Se=this.subscribe(De=>{try{Ge(De)}catch(Fe){J(Fe),null==Se||Se.unsubscribe()}},J,me)})}_subscribe(Ge){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Ge)}[b.L](){return this}pipe(...Ge){return function(qe){return 0===qe.length?k.y:1===qe.length?qe[0]:function(Ge){return qe.reduce((Ie,me)=>me(Ie),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=X(Ge))((Ie,me)=>{let J;this.subscribe(Se=>J=Se,Se=>me(Se),()=>Ie(J))})}}return qe.create=je=>new qe(je),qe})();function X(qe){var je;return null!==(je=null!=qe?qe:Y.v.Promise)&&void 0!==je?je:Promise}},273:(St,M,R)=>{"use strict";R.d(M,{x:()=>Y});var s=R(8305),I=R(7908);const k=(0,R(4893).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var O=R(3980),U=R(8706);let Y=(()=>{class he extends s.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(X){const we=new re(this,this);return we.operator=X,we}_throwIfClosed(){if(this.closed)throw new k}next(X){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const we=this.observers.slice();for(const Je of we)Je.next(X)}})}error(X){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=X;const{observers:we}=this;for(;we.length;)we.shift().error(X)}})}complete(){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:X}=this;for(;X.length;)X.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var X;return(null===(X=this.observers)||void 0===X?void 0:X.length)>0}_trySubscribe(X){return this._throwIfClosed(),super._trySubscribe(X)}_subscribe(X){return this._throwIfClosed(),this._checkFinalizedStatuses(X),this._innerSubscribe(X)}_innerSubscribe(X){const{hasError:we,isStopped:Je,observers:qe}=this;return we||Je?I.Lc:(qe.push(X),new I.w0(()=>(0,O.P)(qe,X)))}_checkFinalizedStatuses(X){const{hasError:we,thrownError:Je,isStopped:qe}=this;we?X.error(Je):qe&&X.complete()}asObservable(){const X=new s.y;return X.source=this,X}}return he.create=(te,X)=>new re(te,X),he})();class re extends Y{constructor(te,X){super(),this.destination=te,this.source=X}next(te){var X,we;null===(we=null===(X=this.destination)||void 0===X?void 0:X.next)||void 0===we||we.call(X,te)}error(te){var X,we;null===(we=null===(X=this.destination)||void 0===X?void 0:X.error)||void 0===we||we.call(X,te)}complete(){var te,X;null===(X=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===X||X.call(te)}_subscribe(te){var X,we;return null!==(we=null===(X=this.source)||void 0===X?void 0:X.subscribe(te))&&void 0!==we?we:I.Lc}}},584:(St,M,R)=>{"use strict";R.d(M,{Hp:()=>Je,Lv:()=>we});var s=R(5044),I=R(7908),b=R(5367),k=R(5160),O=R(6921);const U=he("C",void 0,void 0);function he(me,J,Se){return{kind:me,value:J,error:Se}}var te=R(2496),X=R(8706);class we extends I.w0{constructor(J){super(),this.isStopped=!1,J?(this.destination=J,(0,I.Nn)(J)&&J.add(this)):this.destination=Ie}static create(J,Se,De){return new Je(J,Se,De)}next(J){this.isStopped?Ge(he("N",J,void 0),this):this._next(J)}error(J){this.isStopped?Ge(he("E",void 0,J),this):(this.isStopped=!0,this._error(J))}complete(){this.isStopped?Ge(U,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(J){this.destination.next(J)}_error(J){try{this.destination.error(J)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Je extends we{constructor(J,Se,De){let Fe;if(super(),(0,s.m)(J))Fe=J;else if(J){let Ne;({next:Fe,error:Se,complete:De}=J),this&&b.v.useDeprecatedNextContext?(Ne=Object.create(J),Ne.unsubscribe=()=>this.unsubscribe()):Ne=J,Fe=null==Fe?void 0:Fe.bind(Ne),Se=null==Se?void 0:Se.bind(Ne),De=null==De?void 0:De.bind(Ne)}this.destination={next:Fe?qe(Fe):O.Z,error:qe(null!=Se?Se:je),complete:De?qe(De):O.Z}}}function qe(me,J){return(...Se)=>{try{me(...Se)}catch(De){b.v.useDeprecatedSynchronousErrorHandling?(0,X.O)(De):(0,k.h)(De)}}}function je(me){throw me}function Ge(me,J){const{onStoppedNotification:Se}=b.v;Se&&te.z.setTimeout(()=>Se(me,J))}const Ie={closed:!0,next:O.Z,error:je,complete:O.Z}},7908:(St,M,R)=>{"use strict";R.d(M,{Lc:()=>U,w0:()=>O,Nn:()=>Y});var s=R(5044);const b=(0,R(4893).d)(he=>function(X){he(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((we,Je)=>`${Je+1}) ${we.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X});var k=R(3980);class O{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:X}=this;if(X)if(this._parentage=null,Array.isArray(X))for(const qe of X)qe.remove(this);else X.remove(this);const{initialTeardown:we}=this;if((0,s.m)(we))try{we()}catch(qe){te=qe instanceof b?qe.errors:[qe]}const{_teardowns:Je}=this;if(Je){this._teardowns=null;for(const qe of Je)try{re(qe)}catch(je){te=null!=te?te:[],je instanceof b?te=[...te,...je.errors]:te.push(je)}}if(te)throw new b(te)}}add(te){var X;if(te&&te!==this)if(this.closed)re(te);else{if(te instanceof O){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._teardowns=null!==(X=this._teardowns)&&void 0!==X?X:[]).push(te)}}_hasParent(te){const{_parentage:X}=this;return X===te||Array.isArray(X)&&X.includes(te)}_addParent(te){const{_parentage:X}=this;this._parentage=Array.isArray(X)?(X.push(te),X):X?[X,te]:te}_removeParent(te){const{_parentage:X}=this;X===te?this._parentage=null:Array.isArray(X)&&(0,k.P)(X,te)}remove(te){const{_teardowns:X}=this;X&&(0,k.P)(X,te),te instanceof O&&te._removeParent(this)}}O.EMPTY=(()=>{const he=new O;return he.closed=!0,he})();const U=O.EMPTY;function Y(he){return he instanceof O||he&&"closed"in he&&(0,s.m)(he.remove)&&(0,s.m)(he.add)&&(0,s.m)(he.unsubscribe)}function re(he){(0,s.m)(he)?he():he.unsubscribe()}},5367:(St,M,R)=>{"use strict";R.d(M,{v:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(St,M,R)=>{"use strict";R.d(M,{E:()=>I});const I=new(R(8305).y)(O=>O.complete())},5947:(St,M,R)=>{"use strict";R.d(M,{D:()=>Fe});var s=R(9985),I=R(4763),b=R(5222),U=R(8305),re=R(5497),he=R(5044),te=R(8395);function we(Ne,Ue){if(!Ne)throw new Error("Iterable cannot be null");return new U.y(ue=>{(0,te.f)(ue,Ue,()=>{const Me=Ne[Symbol.asyncIterator]();(0,te.f)(ue,Ue,()=>{Me.next().then(q=>{q.done?ue.complete():ue.next(q.value)})},0,!0)})})}var Je=R(1073),qe=R(2442),je=R(1537),Ge=R(2317),Ie=R(9908),me=R(3754),J=R(7751);function Fe(Ne,Ue){return Ue?function(Ne,Ue){if(null!=Ne){if((0,Je.c)(Ne))return function(Ne,Ue){return(0,s.Xf)(Ne).pipe((0,b.R)(Ue),(0,I.Q)(Ue))}(Ne,Ue);if((0,je.z)(Ne))return function(Ne,Ue){return new U.y(ue=>{let Me=0;return Ue.schedule(function(){Me===Ne.length?ue.complete():(ue.next(Ne[Me++]),ue.closed||this.schedule())})})}(Ne,Ue);if((0,qe.t)(Ne))return function(Ne,Ue){return(0,s.Xf)(Ne).pipe((0,b.R)(Ue),(0,I.Q)(Ue))}(Ne,Ue);if((0,Ie.D)(Ne))return we(Ne,Ue);if((0,Ge.T)(Ne))return function(Ne,Ue){return new U.y(ue=>{let Me;return(0,te.f)(ue,Ue,()=>{Me=Ne[re.h](),(0,te.f)(ue,Ue,()=>{let q,Q;try{({value:q,done:Q}=Me.next())}catch(ne){return void ue.error(ne)}Q?ue.complete():ue.next(q)},0,!0)}),()=>(0,he.m)(null==Me?void 0:Me.return)&&Me.return()})}(Ne,Ue);if((0,J.L)(Ne))return function(Ne,Ue){return we((0,J.Q)(Ne),Ue)}(Ne,Ue)}throw(0,me.z)(Ne)}(Ne,Ue):(0,s.Xf)(Ne)}},9985:(St,M,R)=>{"use strict";R.d(M,{Xf:()=>Je});var s=R(9162),I=R(1537),b=R(2442),k=R(8305),O=R(1073),U=R(9908),Y=R(3754),re=R(2317),he=R(7751),te=R(5044),X=R(5160),we=R(4816);function Je(De){if(De instanceof k.y)return De;if(null!=De){if((0,O.c)(De))return function(De){return new k.y(Fe=>{const Ne=De[we.L]();if((0,te.m)(Ne.subscribe))return Ne.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,I.z)(De))return function(De){return new k.y(Fe=>{for(let Ne=0;Ne<De.length&&!Fe.closed;Ne++)Fe.next(De[Ne]);Fe.complete()})}(De);if((0,b.t)(De))return function(De){return new k.y(Fe=>{De.then(Ne=>{Fe.closed||(Fe.next(Ne),Fe.complete())},Ne=>Fe.error(Ne)).then(null,X.h)})}(De);if((0,U.D)(De))return me(De);if((0,re.T)(De))return function(De){return new k.y(Fe=>{for(const Ne of De)if(Fe.next(Ne),Fe.closed)return;Fe.complete()})}(De);if((0,he.L)(De))return function(De){return me((0,he.Q)(De))}(De)}throw(0,Y.z)(De)}function me(De){return new k.y(Fe=>{(function(De,Fe){var Ne,Ue,ue,Me;return(0,s.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,s.KL)(De);!(Ue=yield Ne.next()).done;)if(Fe.next(Ue.value),Fe.closed)return}catch(q){ue={error:q}}finally{try{Ue&&!Ue.done&&(Me=Ne.return)&&(yield Me.call(Ne))}finally{if(ue)throw ue.error}}Fe.complete()})})(De,Fe).catch(Ne=>Fe.error(Ne))})}},3719:(St,M,R)=>{"use strict";R.d(M,{T:()=>U});var s=R(5373),I=R(9985),b=R(5583),k=R(7613),O=R(5947);function U(...Y){const re=(0,k.yG)(Y),he=(0,k._6)(Y,1/0),te=Y;return te.length?1===te.length?(0,I.Xf)(te[0]):(0,s.J)(he)((0,O.D)(te,re)):b.E}},8889:(St,M,R)=>{"use strict";R.d(M,{Q:()=>I});var s=R(584);class I extends s.Lv{constructor(k,O,U,Y,re){super(k),this.onFinalize=re,this._next=O?function(he){try{O(he)}catch(te){k.error(te)}}:super._next,this._error=Y?function(he){try{Y(he)}catch(te){k.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=U?function(){try{U()}catch(he){k.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var k;const{closed:O}=this;super.unsubscribe(),!O&&(null===(k=this.onFinalize)||void 0===k||k.call(this))}}},4753:(St,M,R)=>{"use strict";R.d(M,{U:()=>b});var s=R(9947),I=R(8889);function b(k,O){return(0,s.e)((U,Y)=>{let re=0;U.subscribe(new I.Q(Y,he=>{Y.next(k.call(O,he,re++))}))})}},5373:(St,M,R)=>{"use strict";R.d(M,{J:()=>b});var s=R(5724),I=R(4623);function b(k=1/0){return(0,s.z)(I.y,k)}},5724:(St,M,R)=>{"use strict";R.d(M,{z:()=>re});var s=R(4753),I=R(9985),b=R(9947),O=(R(8395),R(8889)),Y=R(5044);function re(he,te,X=1/0){return(0,Y.m)(te)?re((we,Je)=>(0,s.U)((qe,je)=>te(we,qe,Je,je))((0,I.Xf)(he(we,Je))),X):("number"==typeof te&&(X=te),(0,b.e)((we,Je)=>function(he,te,X,we,Je,qe,je,Ge){const Ie=[];let me=0,J=0,Se=!1;const De=()=>{Se&&!Ie.length&&!me&&te.complete()},Fe=Ue=>me<we?Ne(Ue):Ie.push(Ue),Ne=Ue=>{me++;let ue=!1;(0,I.Xf)(X(Ue,J++)).subscribe(new O.Q(te,Me=>{te.next(Me)},()=>{ue=!0},void 0,()=>{if(ue)try{for(me--;Ie.length&&me<we;){const Me=Ie.shift();Ne(Me)}De()}catch(Me){te.error(Me)}}))};return he.subscribe(new O.Q(te,Fe,()=>{Se=!0,De()})),()=>{}}(we,Je,he,X)))}},4763:(St,M,R)=>{"use strict";R.d(M,{Q:()=>k});var s=R(8395),I=R(9947),b=R(8889);function k(O,U=0){return(0,I.e)((Y,re)=>{Y.subscribe(new b.Q(re,he=>(0,s.f)(re,O,()=>re.next(he),U),()=>(0,s.f)(re,O,()=>re.complete(),U),he=>(0,s.f)(re,O,()=>re.error(he),U)))})}},3174:(St,M,R)=>{"use strict";R.d(M,{B:()=>U});var s=R(5947),I=R(9468),b=R(273),k=R(584),O=R(9947);function U(re={}){const{connector:he=(()=>new b.x),resetOnError:te=!0,resetOnComplete:X=!0,resetOnRefCountZero:we=!0}=re;return Je=>{let qe=null,je=null,Ge=null,Ie=0,me=!1,J=!1;const Se=()=>{null==je||je.unsubscribe(),je=null},De=()=>{Se(),qe=Ge=null,me=J=!1},Fe=()=>{const Ne=qe;De(),null==Ne||Ne.unsubscribe()};return(0,O.e)((Ne,Ue)=>{Ie++,!J&&!me&&Se();const ue=Ge=null!=Ge?Ge:he();Ue.add(()=>{Ie--,0===Ie&&!J&&!me&&(je=Y(Fe,we))}),ue.subscribe(Ue),qe||(qe=new k.Hp({next:Me=>ue.next(Me),error:Me=>{J=!0,Se(),je=Y(De,te,Me),ue.error(Me)},complete:()=>{me=!0,Se(),je=Y(De,X),ue.complete()}}),(0,s.D)(Ne).subscribe(qe))})(Je)}}function Y(re,he,...te){return!0===he?(re(),null):!1===he?null:he(...te).pipe((0,I.q)(1)).subscribe(()=>re())}},5222:(St,M,R)=>{"use strict";R.d(M,{R:()=>I});var s=R(9947);function I(b,k=0){return(0,s.e)((O,U)=>{U.add(b.schedule(()=>O.subscribe(U),k))})}},9468:(St,M,R)=>{"use strict";R.d(M,{q:()=>k});var s=R(5583),I=R(9947),b=R(8889);function k(O){return O<=0?()=>s.E:(0,I.e)((U,Y)=>{let re=0;U.subscribe(new b.Q(Y,he=>{++re<=O&&(Y.next(he),O<=re&&Y.complete())}))})}},7384:(St,M,R)=>{"use strict";R.d(M,{b:()=>O});var s=R(5044),I=R(9947),b=R(8889),k=R(4623);function O(U,Y,re){const he=(0,s.m)(U)||Y||re?{next:U,error:Y,complete:re}:U;return he?(0,I.e)((te,X)=>{var we;null===(we=he.subscribe)||void 0===we||we.call(he);let Je=!0;te.subscribe(new b.Q(X,qe=>{var je;null===(je=he.next)||void 0===je||je.call(he,qe),X.next(qe)},()=>{var qe;Je=!1,null===(qe=he.complete)||void 0===qe||qe.call(he),X.complete()},qe=>{var je;Je=!1,null===(je=he.error)||void 0===je||je.call(he,qe),X.error(qe)},()=>{var qe,je;Je&&(null===(qe=he.unsubscribe)||void 0===qe||qe.call(he)),null===(je=he.finalize)||void 0===je||je.call(he)}))}):k.y}},2869:(St,M,R)=>{"use strict";R.d(M,{o:()=>O});var s=R(7908);class I extends s.w0{constructor(Y,re){super()}schedule(Y,re=0){return this}}const b={setInterval(...U){const{delegate:Y}=b;return((null==Y?void 0:Y.setInterval)||setInterval)(...U)},clearInterval(U){const{delegate:Y}=b;return((null==Y?void 0:Y.clearInterval)||clearInterval)(U)},delegate:void 0};var k=R(3980);class O extends I{constructor(Y,re){super(Y,re),this.scheduler=Y,this.work=re,this.pending=!1}schedule(Y,re=0){if(this.closed)return this;this.state=Y;const he=this.id,te=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(te,he,re)),this.pending=!0,this.delay=re,this.id=this.id||this.requestAsyncId(te,this.id,re),this}requestAsyncId(Y,re,he=0){return b.setInterval(Y.flush.bind(Y,this),he)}recycleAsyncId(Y,re,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return re;b.clearInterval(re)}execute(Y,re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Y,re);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Y,re){let te,he=!1;try{this.work(Y)}catch(X){he=!0,te=X||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:Y,scheduler:re}=this,{actions:he}=re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,k.P)(he,this),null!=Y&&(this.id=this.recycleAsyncId(re,Y,null)),this.delay=null,super.unsubscribe()}}}},8843:(St,M,R)=>{"use strict";R.d(M,{v:()=>b});var s=R(1733);class I{constructor(O,U=I.now){this.schedulerActionCtor=O,this.now=U}schedule(O,U=0,Y){return new this.schedulerActionCtor(this,O).schedule(Y,U)}}I.now=s.l.now;class b extends I{constructor(O,U=I.now){super(O,U),this.actions=[],this._active=!1,this._scheduled=void 0}flush(O){const{actions:U}=this;if(this._active)return void U.push(O);let Y;this._active=!0;do{if(Y=O.execute(O.state,O.delay))break}while(O=U.shift());if(this._active=!1,Y){for(;O=U.shift();)O.unsubscribe();throw Y}}}},2210:(St,M,R)=>{"use strict";R.d(M,{z:()=>b,P:()=>k});var s=R(2869);const b=new(R(8843).v)(s.o),k=b},1733:(St,M,R)=>{"use strict";R.d(M,{l:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},2496:(St,M,R)=>{"use strict";R.d(M,{z:()=>s});const s={setTimeout(...I){const{delegate:b}=s;return((null==b?void 0:b.setTimeout)||setTimeout)(...I)},clearTimeout(I){const{delegate:b}=s;return((null==b?void 0:b.clearTimeout)||clearTimeout)(I)},delegate:void 0}},5497:(St,M,R)=>{"use strict";R.d(M,{h:()=>I});const I="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(St,M,R)=>{"use strict";R.d(M,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(St,M,R)=>{"use strict";R.d(M,{jO:()=>k,yG:()=>O,_6:()=>U});var s=R(5044),I=R(7398);function b(Y){return Y[Y.length-1]}function k(Y){return(0,s.m)(b(Y))?Y.pop():void 0}function O(Y){return(0,I.K)(b(Y))?Y.pop():void 0}function U(Y,re){return"number"==typeof b(Y)?Y.pop():re}},3980:(St,M,R)=>{"use strict";function s(I,b){if(I){const k=I.indexOf(b);0<=k&&I.splice(k,1)}}R.d(M,{P:()=>s})},4893:(St,M,R)=>{"use strict";function s(I){const k=I(O=>{Error.call(O),O.stack=(new Error).stack});return k.prototype=Object.create(Error.prototype),k.prototype.constructor=k,k}R.d(M,{d:()=>s})},8706:(St,M,R)=>{"use strict";R.d(M,{x:()=>b,O:()=>k});var s=R(5367);let I=null;function b(O){if(s.v.useDeprecatedSynchronousErrorHandling){const U=!I;if(U&&(I={errorThrown:!1,error:null}),O(),U){const{errorThrown:Y,error:re}=I;if(I=null,Y)throw re}}else O()}function k(O){s.v.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=O)}},8395:(St,M,R)=>{"use strict";function s(I,b,k,O=0,U=!1){const Y=b.schedule(function(){k(),U?I.add(this.schedule(null,O)):this.unsubscribe()},O);if(I.add(Y),!U)return Y}R.d(M,{f:()=>s})},4623:(St,M,R)=>{"use strict";function s(I){return I}R.d(M,{y:()=>s})},1537:(St,M,R)=>{"use strict";R.d(M,{z:()=>s});const s=I=>I&&"number"==typeof I.length&&"function"!=typeof I},9908:(St,M,R)=>{"use strict";R.d(M,{D:()=>I});var s=R(5044);function I(b){return Symbol.asyncIterator&&(0,s.m)(null==b?void 0:b[Symbol.asyncIterator])}},5044:(St,M,R)=>{"use strict";function s(I){return"function"==typeof I}R.d(M,{m:()=>s})},1073:(St,M,R)=>{"use strict";R.d(M,{c:()=>b});var s=R(4816),I=R(5044);function b(k){return(0,I.m)(k[s.L])}},2317:(St,M,R)=>{"use strict";R.d(M,{T:()=>b});var s=R(5497),I=R(5044);function b(k){return(0,I.m)(null==k?void 0:k[s.h])}},2442:(St,M,R)=>{"use strict";R.d(M,{t:()=>I});var s=R(5044);function I(b){return(0,s.m)(null==b?void 0:b.then)}},7751:(St,M,R)=>{"use strict";R.d(M,{Q:()=>b,L:()=>k});var s=R(9162),I=R(5044);function b(O){return(0,s.FC)(this,arguments,function*(){const Y=O.getReader();try{for(;;){const{value:re,done:he}=yield(0,s.qq)(Y.read());if(he)return yield(0,s.qq)(void 0);yield yield(0,s.qq)(re)}}finally{Y.releaseLock()}})}function k(O){return(0,I.m)(null==O?void 0:O.getReader)}},7398:(St,M,R)=>{"use strict";R.d(M,{K:()=>I});var s=R(5044);function I(b){return b&&(0,s.m)(b.schedule)}},9947:(St,M,R)=>{"use strict";R.d(M,{A:()=>I,e:()=>b});var s=R(5044);function I(k){return(0,s.m)(null==k?void 0:k.lift)}function b(k){return O=>{if(I(O))return O.lift(function(U){try{return k(U,this)}catch(Y){this.error(Y)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(St,M,R)=>{"use strict";function s(){}R.d(M,{Z:()=>s})},5160:(St,M,R)=>{"use strict";R.d(M,{h:()=>b});var s=R(5367),I=R(2496);function b(k){I.z.setTimeout(()=>{const{onUnhandledError:O}=s.v;if(!O)throw k;O(k)})}},3754:(St,M,R)=>{"use strict";function s(I){return new TypeError(`You provided ${null!==I&&"object"==typeof I?"an invalid object":`'${I}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(M,{z:()=>s})},4648:(St,M,R)=>{"use strict";var s=R(3668);let I=null;function b(){return I}const Y=new s.OlP("DocumentToken");let re=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.LFG)(X)},providedIn:"platform"}),n})();const te=new s.OlP("Location Initialized");let X=(()=>{class n extends re{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return b().getBaseHref(this._doc)}onPopState(e){const r=b().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=b().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){we()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){we()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:function(){return new X((0,s.LFG)(Y))},providedIn:"platform"}),n})();function we(){return!!window.history.pushState}function qe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function je(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function(n){const t=(0,s.LFG)(Y).location;return new Se((0,s.LFG)(re),t&&t.origin||"")}()},providedIn:"root"}),n})();const J=new s.OlP("appBaseHref");let Se=(()=>{class n extends Ie{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return qe(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const c=this.prepareExternalUrl(i+Ge(o));this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){const c=this.prepareExternalUrl(i+Ge(o));this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(re),s.LFG(J,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends Ie{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=qe(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let c=this.prepareExternalUrl(i+Ge(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){let c=this.prepareExternalUrl(i+Ge(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(re),s.LFG(J,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(e,r){this._subject=new s.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=je(ue(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Ge(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,ue(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ge(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ge(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=qe,n.stripTrailingSlash=je,n.\u0275fac=function(e){return new(e||n)(s.LFG(Ie),s.LFG(re))},n.\u0275prov=s.Yz7({token:n,factory:function(){return new Fe((0,s.LFG)(Ie),(0,s.LFG)(re))},providedIn:"root"}),n})();function ue(n){return n.replace(/\/index.html$/,"")}var Q=(()=>((Q=Q||{})[Q.Zero=0]="Zero",Q[Q.One=1]="One",Q[Q.Two=2]="Two",Q[Q.Few=3]="Few",Q[Q.Many=4]="Many",Q[Q.Other=5]="Other",Q))();const ri=s.kL8;class Or{}let Vn=(()=>{class n extends Or{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(ri(r||this.locale)(e)){case Q.Zero:return"zero";case Q.One:return"one";case Q.Two:return"two";case Q.Few:return"few";case Q.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.soG))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Fr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}let Wr=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,s.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,s.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Zo{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wi=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,o,c)=>{if(null==i.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new Zo(null,this._ngForOf,-1,-1),null===c?void 0:c),p=new Pi(i,h);r.push(p)}else if(null==c)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const h=this._viewContainer.get(o);this._viewContainer.move(h,c);const p=new Pi(i,h);r.push(p)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,o=this._viewContainer.length;i<o;i++){const c=this._viewContainer.get(i);c.context.index=i,c.context.count=o,c.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Pi{constructor(t,e){this.record=t,this.view=e}}let qr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Ts,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ts("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ts("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ts{constructor(){this.$implicit=null,this.ngIf=null}}function ts(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,s.AaK)(t)}'.`)}class yr{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let $s=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),ei=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new yr(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36($s,9))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),ui=(()=>{class n{constructor(e,r,i){i._addDefault(new yr(e,r))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36($s,9))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),ti=(()=>{class n{constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[i,o]=e.split(".");null!=(r=null!=r&&o?`${r}${o}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.aQg),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),be=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[{provide:Or,useClass:Vn}]}),n})();const He="browser";function Qe(n){return n===He}function yt(n){return"server"===n}let ln=(()=>{class n{}return n.\u0275prov=(0,s.Yz7)({token:n,providedIn:"root",factory:()=>new rr((0,s.LFG)(Y),window)}),n})();class rr{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Lr(this.window.history)||Lr(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Lr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class co{}class Yo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Yo,I||(I=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null);return null==e?null:function(n){Mi=Mi||document.createElement("a"),Mi.setAttribute("href",n);const t=Mi.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fr(document.cookie,t)}}let Mi,Ko=null;const Qo=new s.OlP("TRANSITION_ID"),or=[{provide:s.ip1,useFactory:function(n,t,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const r=b(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Qo,Y,s.zs3],multi:!0}];class Sl{static init(){(0,s.VLi)(new Sl)}addToWindow(t){s.dqk.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},s.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(r=>{const i=s.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(p){c=c||p,o--,0==o&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?b().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let ya=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Dl=new s.OlP("EventManagerPlugins");let Zi=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Dl),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class wc{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=b().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Jo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),cn=(()=>{class n extends Jo{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(o=>{const c=this._doc.createElement("style");c.textContent=o,i.push(r.appendChild(c))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(Al),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Al))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Al(n){b().remove(n)}const Xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ha=/%COMP%/g;function ko(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?ko(n,i,e):(i=i.replace(Ha,n),e.push(i))}return e}function ni(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ea=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Fi(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case s.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hg(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case s.ifc.ShadowDom:return new zh(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=ko(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Zi),s.LFG(cn),s.LFG(s.AFp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class Fi{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Xo[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=Xo[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Xo[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(s.JOm.DashCase|s.JOm.Important)?t.style.setProperty(e,r,i&s.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&s.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ni(r)):this.eventManager.addEventListener(t,e,ni(r))}}class hg extends Fi{constructor(t,e,r,i){super(t),this.component=r;const o=ko(i+"-"+r.id,r.styles,[]);e.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(Ha,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Ha,n)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class zh extends Fi{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ko(i.id,i.styles,[]);for(let c=0;c<o.length;c++){const h=document.createElement("style");h.textContent=o[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let za=(()=>{class n extends wc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Rl=["alt","control","meta","shift"],Zs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ol={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ta={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let uo=(()=>{class n extends wc{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>b().onAndCancel(e,o.domEventName,c))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="";if(Rl.forEach(p=>{const _=r.indexOf(p);_>-1&&(r.splice(_,1),c+=p+".")}),c+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Ol.hasOwnProperty(t)&&(t=Ol[t]))}return Zs[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Rl.forEach(o=>{o!=i&&ta[o](e)&&(r+=o+".")}),r+=i,r}static eventCallback(e,r,i){return o=>{n.getEventFullKey(o)===e&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Cc=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:He},{provide:s.g9A,useValue:function(){Yo.makeCurrent(),Sl.init()},multi:!0},{provide:Y,useFactory:function(){return(0,s.RDi)(document),document},deps:[]}]),Ga=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function(){return new s.qLn},deps:[]},{provide:Dl,useClass:za,multi:!0,deps:[Y,s.R0b,s.Lbi]},{provide:Dl,useClass:uo,multi:!0,deps:[Y]},{provide:ea,useClass:ea,deps:[Zi,cn,s.AFp]},{provide:s.FYo,useExisting:ea},{provide:Jo,useExisting:cn},{provide:cn,useClass:cn,deps:[Y]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:Zi,useClass:Zi,deps:[Dl,s.R0b]},{provide:co,useClass:ya,deps:[]}];let Fl=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:s.AFp,useValue:e.appId},{provide:Qo,useExisting:s.AFp},or]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(n,12))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:Ga,imports:[be,s.hGG]}),n})();"undefined"!=typeof window&&window;let Wa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):s.LFG(Wh),r},providedIn:"root"}),n})(),Wh=(()=>{class n extends Wa{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case s.q3G.NONE:return r;case s.q3G.HTML:return(0,s.qzn)(r,"HTML")?(0,s.z3N)(r):(0,s.EiD)(this._doc,String(r)).toString();case s.q3G.STYLE:return(0,s.qzn)(r,"Style")?(0,s.z3N)(r):r;case s.q3G.SCRIPT:if((0,s.qzn)(r,"Script"))return(0,s.z3N)(r);throw new Error("unsafe value used in a script context");case s.q3G.URL:return(0,s.yhl)(r),(0,s.qzn)(r,"URL")?(0,s.z3N)(r):(0,s.mCW)(String(r));case s.q3G.RESOURCE_URL:if((0,s.qzn)(r,"ResourceURL"))return(0,s.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,s.JVY)(e)}bypassSecurityTrustStyle(e){return(0,s.L6k)(e)}bypassSecurityTrustScript(e){return(0,s.eBb)(e)}bypassSecurityTrustUrl(e){return(0,s.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,s.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function(n){return new Wh(n.get(Y))}(s.LFG(s.zs3)),r},providedIn:"root"}),n})();var Dr=R(5947),Ca=R(7613);function xt(...n){const t=(0,Ca.yG)(n);return(0,Dr.D)(n,t)}var Wt=R(273);class pi extends Wt.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}var Pr=R(8305);const{isArray:Ea}=Array,{getPrototypeOf:jl,prototype:qa,keys:Kr}=Object;function Hl(n){if(1===n.length){const t=n[0];if(Ea(t))return{args:t,keys:null};if(function(n){return n&&"object"==typeof n&&jl(n)===qa}(t)){const e=Kr(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}var ia=R(4623),kt=R(4753);const{isArray:qh}=Array;function sa(n){return(0,kt.U)(t=>function(n,t){return qh(t)?n(...t):n(t)}(n,t))}function xc(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}var lr=R(8889),zl=R(8395);function Ys(...n){const t=(0,Ca.yG)(n),e=(0,Ca.jO)(n),{args:r,keys:i}=Hl(n);if(0===r.length)return(0,Dr.D)([],t);const o=new Pr.y(function(n,t,e=ia.y){return r=>{Ks(t,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)Ks(t,()=>{const _=(0,Dr.D)(n[p],t);let E=!1;_.subscribe(new lr.Q(r,x=>{o[p]=x,E||(E=!0,h--),h||r.next(e(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,t,i?c=>xc(i,c):ia.y));return e?o.pipe(sa(e)):o}function Ks(n,t,e){n?(0,zl.f)(e,n,t):t()}const Ia=(0,R(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ho=R(5373);function Ro(...n){return(0,ho.J)(1)((0,Dr.D)(n,(0,Ca.yG)(n)))}var Bi=R(9985);function Ss(n){return new Pr.y(t=>{(0,Bi.Xf)(n()).subscribe(t)})}var Za=R(5583),ns=R(7908),Qr=R(9947);function Ta(){return(0,Qr.e)((n,t)=>{let e=null;n._refCount++;const r=new lr.Q(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class $l extends Pr.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Qr.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ns.w0;const e=this.getSubject();t.add(this.source.subscribe(new lr.Q(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ns.w0.EMPTY)}return t}refCount(){return Ta()(this)}}function Ur(n,t){return(0,Qr.e)((e,r)=>{let i=null,o=0,c=!1;const h=()=>c&&!i&&r.complete();e.subscribe(new lr.Q(r,p=>{null==i||i.unsubscribe();let _=0;const E=o++;(0,Bi.Xf)(n(p,E)).subscribe(i=new lr.Q(r,x=>r.next(t?t(p,x,E,_++):x),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Xn=R(9468);function gi(...n){const t=(0,Ca.yG)(n);return(0,Qr.e)((e,r)=>{(t?Ro(n,e,t):Ro(n,e)).subscribe(r)})}function Oo(n,t,e,r,i){return(o,c)=>{let h=e,p=t,_=0;o.subscribe(new lr.Q(c,E=>{const x=_++;p=h?n(p,E,x):(h=!0,E),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function gs(n,t){return(0,Qr.e)(Oo(n,t,arguments.length>=2,!0))}function kn(n,t){return(0,Qr.e)((e,r)=>{let i=0;e.subscribe(new lr.Q(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Qs(n){return(0,Qr.e)((t,e)=>{let o,r=null,i=!1;r=t.subscribe(new lr.Q(e,void 0,void 0,c=>{o=(0,Bi.Xf)(n(c,Qs(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}var vr=R(5724),Ds=R(5044);function Ya(n,t){return(0,Ds.m)(t)?(0,vr.z)(n,t,1):(0,vr.z)(n,1)}function jr(n){return n<=0?()=>Za.E:(0,Qr.e)((t,e)=>{let r=[];t.subscribe(new lr.Q(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Ka(n=cy){return(0,Qr.e)((t,e)=>{let r=!1;t.subscribe(new lr.Q(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function cy(){return new Ia}function mg(n){return(0,Qr.e)((t,e)=>{let r=!1;t.subscribe(new lr.Q(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Wl(n,t){const e=arguments.length>=2;return r=>r.pipe(n?kn((i,o)=>n(i,o,r)):ia.y,(0,Xn.q)(1),e?mg(t):Ka(()=>new Ia))}var ki=R(7384);function wu(n){return(0,Qr.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class rs{constructor(t,e){this.id=t,this.url=e}}class bd extends rs{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jr extends rs{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qa extends rs{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ql extends rs{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wd extends rs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yh extends rs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ms extends rs{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fo extends rs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zl extends rs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oa{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Po{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cu{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eu{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Iu{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aa{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yl{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const In="primary";class Yi{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function po(n){return new Yi(n)}const Js="ngNavigationCancelingError";function Cd(n){const t=Error("NavigationCancelingError: "+n);return t[Js]=!0,t}function _g(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function go(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!No(n[i],t[i]))return!1;return!0}function No(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function Su(n){return Array.prototype.concat.apply([],n)}function Kl(n){return n.length>0?n[n.length-1]:null}function Ar(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function _s(n){return(0,s.CqO)(n)?n:(0,s.QGY)(n)?(0,Dr.D)(Promise.resolve(n)):xt(n)}const Ed={exact:function Id(n,t,e){if(!Rt(n.segments,t.segments)||!Z(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Id(n.children[r],t.children[r],e))return!1;return!0},subset:A},Ja={exact:function(n,t){return go(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>No(n[e],t[e]))},ignored:()=>!0};function Ql(n,t,e){return Ed[e.paths](n.root,t.root,e.matrixParams)&&Ja[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function A(n,t,e){return P(n,t,t.segments,e)}function P(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Rt(i,e)||t.hasChildren()||!Z(i,e,r))}if(n.segments.length===e.length){if(!Rt(n.segments,e)||!Z(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!A(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(Rt(n.segments,i)&&Z(n.segments,i,r)&&n.children[In])&&P(n.children[In],t,o,r)}}function Z(n,t,e){return t.every((r,i)=>Ja[e](n[i].parameters,r.parameters))}class Ee{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=po(this.queryParams)),this._queryParamMap}toString(){return Cn.serialize(this)}}class ke{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ar(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class et{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=po(this.parameters)),this._parameterMap}toString(){return Td(this)}}function Rt(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class yn{}class qn{parse(t){const e=new Dw(t);return new Ee(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${pr(t.root,!0)}`,r=function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${As(e)}=${As(i)}`).join("&"):`${As(e)}=${As(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);var n;return`${e}${r}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const Cn=new qn;function si(n){return n.segments.map(t=>Td(t)).join("/")}function pr(n,t){if(!n.hasChildren())return si(n);if(t){const e=n.children[In]?pr(n.children[In],!1):"",r=[];return Ar(n.children,(i,o)=>{o!==In&&r.push(`${o}:${pr(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Ar(n.children,(r,i)=>{i===In&&(e=e.concat(t(r,i)))}),Ar(n.children,(r,i)=>{i!==In&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===In?[pr(n.children[In],!1)]:[`${i}:${pr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[In]?`${si(n)}/${e[0]}`:`${si(n)}/(${e.join("//")})`}}function la(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function As(n){return la(n).replace(/%3B/gi,";")}function mo(n){return la(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xs(n){return decodeURIComponent(n)}function Da(n){return xs(n.replace(/\+/g,"%20"))}function Td(n){return`${mo(n.path)}${function(n){return Object.keys(n).map(t=>`;${mo(t)}=${mo(n[t])}`).join("")}(n.parameters)}`}const Xa=/^[^\/()?;=#]+/;function el(n){const t=n.match(Xa);return t?t[0]:""}const hy=/^[^=?&#]+/,Sd=/^[^&#]+/;class Dw{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[In]=new ke(t,e)),r}parseSegment(){const t=el(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new et(xs(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=el(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=el(this.remaining);i&&(r=i,this.capture(r))}t[xs(e)]=xs(r)}parseQueryParam(t){const e=function(n){const t=n.match(hy);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=function(n){const t=n.match(Sd);return t?t[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Da(e),o=Da(r);if(t.hasOwnProperty(i)){let c=t[i];Array.isArray(c)||(c=[c],t[i]=c),c.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=el(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=In);const c=this.parseChildren();e[o]=1===Object.keys(c).length?c[In]:new ke([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Qh{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Jh(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Jh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Rc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Rc(t,this._root).map(e=>e.value)}}function Jh(n,t){if(n===t.value)return t;for(const e of t.children){const r=Jh(n,e);if(r)return r}return null}function Rc(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Rc(n,e);if(r.length)return r.unshift(t),r}return[]}class _o{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function tl(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Jl extends Qh{constructor(t,e){super(t),this.snapshot=e,Dd(this,t)}toString(){return this.snapshot.toString()}}function vg(n,t){const e=function(n,t){const c=new Xl([],{},{},"",{},In,t,null,n.root,-1,{});return new ef("",new _o(c,[]))}(n,t),r=new pi([new et("",{})]),i=new pi({}),o=new pi({}),c=new pi({}),h=new pi(""),p=new Oc(r,i,c,h,o,In,t,e.root);return p.snapshot=e.root,new Jl(new _o(p,[]),e)}class Oc{constructor(t,e,r,i,o,c,h,p){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(t=>po(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(t=>po(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xu(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Mt(Mt({},t.params),e.params),data:Mt(Mt({},t.data),e.data),resolve:Mt(Mt({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Xl{constructor(t,e,r,i,o,c,h,p,_,E,x){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=E,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=po(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=po(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ef extends Qh{constructor(t,e){super(e),this.url=t,Dd(this,e)}toString(){return nl(this._root)}}function Dd(n,t){t.value._routerState=n,t.children.forEach(e=>Dd(n,e))}function nl(n){const t=n.children.length>0?` { ${n.children.map(nl).join(", ")} } `:"";return`${n.value}${t}`}function tf(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,go(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),go(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!go(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),go(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function nf(n,t){const e=go(n.params,t.params)&&function(n,t){return Rt(n,t)&&n.every((e,r)=>go(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||nf(n.parent,t.parent))}function Mu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Mu(n,r,i);return Mu(n,r)})}(n,t,e);return new _o(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(h=>Mu(n,h)),c}}const r=function(n){return new Oc(new pi(n.url),new pi(n.params),new pi(n.queryParams),new pi(n.fragment),new pi(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>Mu(n,o));return new _o(r,i)}}function ec(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ku(n){return"object"==typeof n&&null!=n&&n.outlets}function Ru(n,t,e,r,i){let o={};return r&&Ar(r,(c,h)=>{o[h]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),new Ee(e.root===n?t:wg(e.root,n,t),o,i)}function wg(n,t,e){const r={};return Ar(n.children,(i,o)=>{r[o]=i===t?e:wg(i,t,e)}),new ke(n.segments,r)}class rf{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ec(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ku);if(i&&i!==Kl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nc{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Ig(n,t,e){if(n||(n=new ke([],{})),0===n.segments.length&&n.hasChildren())return sf(n,t,e);const r=function(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const c=n.segments[i],h=e[r];if(ku(h))break;const p=`${h}`,_=r<e.length-1?e[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!y(p,_,c))return o;r+=2}else{if(!y(p,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new ke(n.segments.slice(0,r.pathIndex),{});return o.children[In]=new ke(n.segments.slice(r.pathIndex),n.children),sf(o,0,i)}return r.match&&0===i.length?new ke(n.segments,{}):r.match&&!n.hasChildren()?tc(n,t,e):r.match?sf(n,0,i):tc(n,t,e)}function sf(n,t,e){if(0===e.length)return new ke(n.segments,{});{const r=function(n){return ku(n[0])?n[0].outlets:{[In]:n}}(e),i={};return Ar(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=Ig(n.children[c],t,o))}),Ar(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new ke(n.segments,i)}}function tc(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(ku(o)){const p=w(o.outlets);return new ke(r,p)}if(0===i&&ec(e[0])){r.push(new et(n.segments[t].path,m(e[0]))),i++;continue}const c=ku(o)?o.outlets[In]:`${o}`,h=i<e.length-1?e[i+1]:null;c&&h&&ec(h)?(r.push(new et(c,m(h))),i+=2):(r.push(new et(c,{})),i++)}return new ke(r,{})}function w(n){const t={};return Ar(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=tc(new ke([],{}),0,e))}),t}function m(n){const t={};return Ar(n,(e,r)=>t[r]=`${e}`),t}function y(n,t,e){return n==e.path&&go(t,e.parameters)}class H{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),tf(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=tl(e);t.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Ar(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=tl(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=tl(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=tl(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new aa(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Eu(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(tf(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),tf(h.route.value),this.activateChildRoutes(t,null,c.children)}else{const h=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=p,c.outlet&&c.outlet.activateWith(i,p),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,r)}}class Ke{constructor(t,e){this.routes=t,this.module=e}}function gt(n){return"function"==typeof n}function Kt(n){return n instanceof Ee}const Ma=Symbol("INITIAL_VALUE");function Fc(){return Ur(n=>Ys(n.map(t=>t.pipe((0,Xn.q)(1),gi(Ma)))).pipe(gs((t,e)=>{let r=!1;return e.reduce((i,o,c)=>i!==Ma?i:(o===Ma&&(r=!0),r||!1!==o&&c!==e.length-1&&!Kt(o)?i:o),t)},Ma),kn(t=>t!==Ma),(0,kt.U)(t=>Kt(t)?t:!0===t),(0,Xn.q)(1)))}class af{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lc,this.attachRef=null}}class Lc{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new af,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Ad=(()=>{class n{constructor(e,r,i,o,c){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.attachEvents=new s.vpe,this.detachEvents=new s.vpe,this.name=o||In,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const c=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new xd(e,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Lc),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},n.\u0275dir=s.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class xd{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Oc?this.route:t===Lc?this.childContexts:this.parent.get(t,e)}}let Bc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&s._UZ(0,"router-outlet")},directives:[Ad],encapsulation:2}),n})();function Md(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];Ou(r,Tg(t,r))}}function Ou(n,t){n.children&&Md(n.children,t)}function Tg(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function oi(n){const t=n.children&&n.children.map(oi),e=t?fs(Mt({},n),{children:t}):Mt({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==In&&(e.component=Bc),e}function Ms(n){return n.outlet||In}function Sg(n,t){const e=n.filter(r=>Ms(r)===t);return e.push(...n.filter(r=>Ms(r)!==t)),e}const Dg={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function lf(n,t,e){var h;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Mt({},Dg):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||_g)(e,n,t);if(!i)return Mt({},Dg);const o={};Ar(i.posParams,(p,_)=>{o[_]=p.path});const c=i.consumed.length>0?Mt(Mt({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:c,positionalParamSegments:null!=(h=i.posParams)?h:{}}}function Ag(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>vy(n,t,r)&&Ms(r)!==In)}(n,e,r)){const c=new ke(t,function(n,t,e,r){const i={};i[In]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Ms(o)!==In){const c=new ke([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,i[Ms(o)]=c}return i}(n,t,r,new ke(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>vy(n,t,r))}(n,e,r)){const c=new ke(n.segments,function(n,t,e,r,i,o){const c={};for(const h of r)if(vy(n,e,h)&&!i[Ms(h)]){const p=new ke([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===o?n.segments.length:t.length,c[Ms(h)]=p}return Mt(Mt({},i),c)}(n,t,e,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const o=new ke(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function vy(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function gD(n,t,e,r){return!!(Ms(n)===r||r!==In&&vy(t,e,n))&&("**"===n.path||lf(t,n,e).matched)}function kd(n,t,e){return 0===t.length&&!n.children[e]}class Ki{constructor(t){this.segmentGroup=t||null}}class xg{constructor(t){this.urlTree=t}}function cf(n){return new Pr.y(t=>t.error(new Ki(n)))}function by(n){return new Pr.y(t=>t.error(new xg(n)))}function ks(n){return new Pr.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class mD{constructor(t,e,r,i,o){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(s.h0i)}apply(){const t=Ag(this.urlTree.root,[],[],this.config).segmentGroup,e=new ke(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,In).pipe((0,kt.U)(o=>this.createUrlTree(Mg(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qs(o=>{if(o instanceof xg)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Ki?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,In).pipe((0,kt.U)(i=>this.createUrlTree(Mg(i),t.queryParams,t.fragment))).pipe(Qs(i=>{throw i instanceof Ki?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new ke([],{[In]:t}):t;return new Ee(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,kt.U)(o=>new ke([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Dr.D)(i).pipe(Ya(o=>{const c=r.children[o],h=Sg(e,o);return this.expandSegmentGroup(t,h,c,o).pipe((0,kt.U)(p=>({segment:p,outlet:o})))}),gs((o,c)=>(o[c.outlet]=c.segment,o),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?kn((i,o)=>n(i,o,r)):ia.y,jr(1),e?mg(t):Ka(()=>new Ia))}())}expandSegment(t,e,r,i,o,c){return(0,Dr.D)(r).pipe(Ya(h=>this.expandSegmentAgainstRoute(t,e,r,h,i,o,c).pipe(Qs(_=>{if(_ instanceof Ki)return xt(null);throw _}))),Wl(h=>!!h),Qs((h,p)=>{if(h instanceof Ia||"EmptyError"===h.name){if(kd(e,i,o))return xt(new ke([],{}));throw new Ki(e)}throw h}))}expandSegmentAgainstRoute(t,e,r,i,o,c,h){return gD(i,e,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c):cf(e):cf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?by(o):this.lineralizeSegments(r,o).pipe((0,vr.z)(c=>{const h=new ke(c,{});return this.expandSegment(t,h,e,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){const{matched:h,consumedSegments:p,lastChild:_,positionalParamSegments:E}=lf(e,i,o);if(!h)return cf(e);const x=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?by(x):this.lineralizeSegments(i,x).pipe((0,vr.z)($=>this.expandSegment(t,e,r,$.concat(o.slice(_)),c,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?xt(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,kt.U)($=>(r._loadedConfig=$,new ke(i,{})))):xt(new ke(i,{}));const{matched:c,consumedSegments:h,lastChild:p}=lf(e,r,i);if(!c)return cf(e);const _=i.slice(p);return this.getChildConfig(t,r,i).pipe((0,vr.z)(x=>{const $=x.module,se=x.routes,{segmentGroup:ye,slicedSegments:ze}=Ag(e,h,_,se),rt=new ke(ye.segments,ye.children);if(0===ze.length&&rt.hasChildren())return this.expandChildren($,se,rt).pipe((0,kt.U)(Ht=>new ke(h,Ht)));if(0===se.length&&0===ze.length)return xt(new ke(h,{}));const It=Ms(r)===o;return this.expandSegment($,rt,se,ze,It?In:o,!0).pipe((0,kt.U)(Vt=>new ke(h.concat(Vt.segments),Vt.children)))}))}getChildConfig(t,e,r){return e.children?xt(new Ke(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?xt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,vr.z)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,kt.U)(o=>(e._loadedConfig=o,o))):(n=e,new Pr.y(t=>t.error(Cd(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):xt(new Ke([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;return i&&0!==i.length?xt(i.map(c=>{const h=t.get(c);let p;if((n=h)&&gt(n.canLoad))p=h.canLoad(e,r);else{if(!gt(h))throw new Error("Invalid CanLoad guard");p=h(e,r)}var n;return _s(p)})).pipe(Fc(),(0,ki.b)(c=>{if(!Kt(c))return;const h=Cd(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,kt.U)(c=>!0===c)):xt(!0)}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return xt(r);if(i.numberOfChildren>1||!i.children[In])return ks(t.redirectTo);i=i.children[In]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new Ee(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Ar(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=e[h]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let c={};return Ar(e.children,(h,p)=>{c[p]=this.createSegmentGroup(t,h,r,i)}),new ke(o,c)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function Mg(n){const t={};for(const r of Object.keys(n.children)){const o=Mg(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function(n){if(1===n.numberOfChildren&&n.children[In]){const t=n.children[In];return new ke(n.segments.concat(t.segments),t.children)}return n}(new ke(n.segments,t))}class Cy{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kg{constructor(t,e){this.component=t,this.route=e}}function Aw(n,t,e){const r=n._root;return Pu(r,t?t._root:null,e,[r.value])}function Rg(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function Pu(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=tl(t);return n.children.forEach(c=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const p=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Rt(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Rt(n.url,t.url)||!go(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nf(n,t)||!go(n.queryParams,t.queryParams);default:return!nf(n,t)}}(c,o,o.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Cy(r)):(o.data=c.data,o._resolvedData=c._resolvedData),Pu(n,t,o.component?h?h.children:null:e,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new kg(h.outlet.component,c))}else c&&Og(t,h,i),i.canActivateChecks.push(new Cy(r)),Pu(n,null,o.component?h?h.children:null:e,r,i)})(c,o[c.value.outlet],e,r.concat([c.value]),i),delete o[c.value.outlet]}),Ar(o,(c,h)=>Og(c,e.getContext(h),i)),i}function Og(n,t,e){const r=tl(n),i=n.value;Ar(r,(o,c)=>{Og(o,i.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new kg(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class xD{}function Iy(n){return new Pr.y(t=>t.error(n))}class kD{constructor(t,e,r,i,o,c){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=c}recognize(){const t=Ag(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,In);if(null===e)return null;const r=new Xl([],Object.freeze({}),Object.freeze(Mt({},this.urlTree.queryParams)),this.urlTree.fragment,{},In,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new _o(r,e),o=new ef(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const e=t.value,r=xu(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const o of Object.keys(e.children)){const c=e.children[o],h=Sg(t,o),p=this.processSegmentGroup(h,c,o);if(null===p)return null;r.push(...p)}const i=Mw(r);return i.sort((t,e)=>t.value.outlet===In?-1:e.value.outlet===In?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const o of t){const c=this.processSegmentAgainstRoute(o,e,r,i);if(null!==c)return c}return kd(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!gD(t,e,r,i))return null;let o,c=[],h=[];if("**"===t.path){const se=r.length>0?Kl(r).parameters:{};o=new Xl(r,se,Object.freeze(Mt({},this.urlTree.queryParams)),this.urlTree.fragment,ka(t),Ms(t),t.component,t,kw(e),Nu(e)+r.length,PD(t))}else{const se=lf(e,t,r);if(!se.matched)return null;c=se.consumedSegments,h=r.slice(se.lastChild),o=new Xl(c,se.parameters,Object.freeze(Mt({},this.urlTree.queryParams)),this.urlTree.fragment,ka(t),Ms(t),t.component,t,kw(e),Nu(e)+c.length,PD(t))}const p=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:_,slicedSegments:E}=Ag(e,c,h,p.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution);var n;if(0===E.length&&_.hasChildren()){const se=this.processChildren(p,_);return null===se?null:[new _o(o,se)]}if(0===p.length&&0===E.length)return[new _o(o,[])];const x=Ms(t)===i,$=this.processSegment(p,_,E,x?In:i);return null===$?null:[new _o(o,$)]}}function xw(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Mw(n){const t=[],e=new Set;for(const r of n){if(!xw(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=Mw(r.children);t.push(new _o(r.value,i))}return t.filter(r=>!e.has(r))}function kw(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Nu(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function ka(n){return n.data||{}}function PD(n){return n.resolve||{}}function hf(n){return Ur(t=>{const e=n(t);return e?(0,Dr.D)(e).pipe((0,kt.U)(()=>t)):xt(t)})}class ff extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Pg=new s.OlP("ROUTES");class Sy{constructor(t,e,r,i){this.injector=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,kt.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e);const c=o.create(t);return new Ke(Su(c.injector.get(Pg,void 0,s.XFs.Self|s.XFs.Optional)).map(oi),c)}),Qs(o=>{throw e._loader$=void 0,o}));return e._loader$=new $l(i,()=>new Wt.x).pipe(Ta()),e._loader$}loadModuleFactory(t){return _s(t()).pipe((0,vr.z)(e=>e instanceof s.YKP?xt(e):(0,Dr.D)(this.compiler.compileModuleAsync(e))))}}class Ay{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Pw(n){throw n}function OP(n,t,e){return t.parse("/")}function Fu(n,t){return xt(null)}const xy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ys=(()=>{class n{constructor(e,r,i,o,c,h,p){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Wt.x,this.errorHandler=Pw,this.malformedUriErrorHandler=OP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fu,afterPreactivation:Fu},this.urlHandlingStrategy=new Ay,this.routeReuseStrategy=new ff,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(s.h0i),this.console=c.get(s.c2e);const x=c.get(s.R0b);this.isNgZoneEnabled=x instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=new Ee(new ke([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sy(c,h,$=>this.triggerEvent(new oa($)),$=>this.triggerEvent(new Po($))),this.routerState=vg(this.currentUrlTree,this.rootComponentType),this.transitions=new pi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null==(e=this.location.getState())?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(kn(i=>0!==i.id),(0,kt.U)(i=>fs(Mt({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ur(i=>{let o=!1,c=!1;return xt(i).pipe((0,ki.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?fs(Mt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ur(h=>{const p=this.browserUrlTree.toString(),_=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Ng(h.source)&&(this.browserUrlTree=h.extractedUrl),xt(h).pipe(Ur(x=>{const $=this.transitions.getValue();return r.next(new bd(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),$!==this.transitions.getValue()?Za.E:Promise.resolve(x)}),function(n,t,e,r){return Ur(i=>function(n,t,e,r,i){return new mD(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,kt.U)(o=>fs(Mt({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ki.b)(x=>{this.currentNavigation=fs(Mt({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,t,e,r,i){return(0,vr.z)(o=>function(n,t,e,r,i="emptyOnly",o="legacy"){try{const c=new kD(n,t,e,r,i,o).recognize();return null===c?Iy(new xD):xt(c)}catch(c){return Iy(c)}}(n,t,o.urlAfterRedirects,e(o.urlAfterRedirects),r,i).pipe((0,kt.U)(c=>fs(Mt({},o),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ki.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const se=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(se,x)}this.browserUrlTree=x.urlAfterRedirects}const $=new wd(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next($)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:se,source:ye,restoredState:ze,extras:rt}=h,It=new bd($,this.serializeUrl(se),ye,ze);r.next(It);const jt=vg(se,this.rootComponentType).snapshot;return xt(fs(Mt({},h),{targetSnapshot:jt,urlAfterRedirects:se,extras:fs(Mt({},rt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Za.E}),hf(h=>{const{targetSnapshot:p,id:_,extractedUrl:E,rawUrl:x,extras:{skipLocationChange:$,replaceUrl:se}}=h;return this.hooks.beforePreactivation(p,{navigationId:_,appliedUrlTree:E,rawUrlTree:x,skipLocationChange:!!$,replaceUrl:!!se})}),(0,ki.b)(h=>{const p=new Yh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,kt.U)(h=>fs(Mt({},h),{guards:Aw(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,t){return(0,vr.z)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=e;return 0===c.length&&0===o.length?xt(fs(Mt({},e),{guardsResult:!0})):function(n,t,e,r){return(0,Dr.D)(n).pipe((0,vr.z)(i=>function(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?xt(o.map(h=>{const p=Rg(h,t,i);let _;if(function(n){return n&&gt(n.canDeactivate)}(p))_=_s(p.canDeactivate(n,t,e,r));else{if(!gt(p))throw new Error("Invalid CanDeactivate guard");_=_s(p(n,t,e,r))}return _.pipe(Wl())})).pipe(Fc()):xt(!0)}(i.component,i.route,e,t,r)),Wl(i=>!0!==i,!0))}(c,r,i,n).pipe((0,vr.z)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,t,e,r){return(0,Dr.D)(t).pipe(Ya(i=>Ro(function(n,t){return null!==n&&t&&t(new Cu(n)),xt(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new Iu(n)),xt(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(c=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Ss(()=>xt(c.guards.map(p=>{const _=Rg(p,c.node,e);let E;if(function(n){return n&&gt(n.canActivateChild)}(_))E=_s(_.canActivateChild(r,n));else{if(!gt(_))throw new Error("Invalid CanActivateChild guard");E=_s(_(r,n))}return E.pipe(Wl())})).pipe(Fc())));return xt(o).pipe(Fc())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return xt(!0);const i=r.map(o=>Ss(()=>{const c=Rg(o,t,e);let h;if(function(n){return n&&gt(n.canActivate)}(c))h=_s(c.canActivate(t,n));else{if(!gt(c))throw new Error("Invalid CanActivate guard");h=_s(c(t,n))}return h.pipe(Wl())}));return xt(i).pipe(Fc())}(n,i.route,e))),Wl(i=>!0!==i,!0))}(r,o,n,t):xt(h)),(0,kt.U)(h=>fs(Mt({},e),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ki.b)(h=>{if(Kt(h.guardsResult)){const _=Cd(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw _.url=h.guardsResult,_}const p=new ms(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),kn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),hf(h=>{if(h.guards.canActivateChecks.length)return xt(h).pipe((0,ki.b)(p=>{const _=new fo(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Ur(p=>{let _=!1;return xt(p).pipe(function(n,t){return(0,vr.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return xt(e);let o=0;return(0,Dr.D)(i).pipe(Ya(c=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return xt({});const o={};return(0,Dr.D)(i).pipe((0,vr.z)(c=>function(n,t,e,r){const i=Rg(n,t,r);return _s(i.resolve?i.resolve(t,e):i(t,e))}(n[c],t,e,r).pipe((0,ki.b)(h=>{o[c]=h}))),jr(1),(0,vr.z)(()=>Object.keys(o).length===i.length?xt(o):Za.E))}(n._resolve,n,t,r).pipe((0,kt.U)(o=>(n._resolvedData=o,n.data=Mt(Mt({},n.data),xu(n,e).resolve),null)))}(c.route,r,n,t)),(0,ki.b)(()=>o++),jr(1),(0,vr.z)(c=>o===i.length?xt(e):Za.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ki.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,ki.b)(p=>{const _=new Zl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),hf(h=>{const{targetSnapshot:p,id:_,extractedUrl:E,rawUrl:x,extras:{skipLocationChange:$,replaceUrl:se}}=h;return this.hooks.afterPreactivation(p,{navigationId:_,appliedUrlTree:E,rawUrlTree:x,skipLocationChange:!!$,replaceUrl:!!se})}),(0,kt.U)(h=>{const p=function(n,t,e){const r=Mu(n,t._root,e?e._root:void 0);return new Jl(r,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return fs(Mt({},h),{targetRouterState:p})}),(0,ki.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,kt.U)(r=>(new H(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ki.b)({next(){o=!0},complete(){o=!0}}),wu(()=>{var h;o||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(h=this.currentNavigation)?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Qs(h=>{if(c=!0,function(n){return n&&n[Js]}(h)){const p=Kt(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Qa(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(_),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ng(i.source)};this.scheduleNavigation(E,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new ql(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(_){i.reject(_)}}return Za.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Mt(Mt({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var h;const i={replaceUrl:!0},o=(null==(h=e.state)?void 0:h.navigationId)?e.state:null;if(o){const p=Mt({},o);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Md(e),this.config=e.map(oi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,_=i||this.routerState.root,E=p?this.currentUrlTree.fragment:c;let x=null;switch(h){case"merge":x=Mt(Mt({},this.currentUrlTree.queryParams),o);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=o||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,t,e,r,i){if(0===e.length)return Ru(t.root,t.root,t,r,i);const o=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rf(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Ar(o.outlets,(p,_)=>{h[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?t++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new rf(e,t,r)}(e);if(o.toRoot())return Ru(t.root,new ke([],{}),t,r,i);const c=function(n,t,e){if(n.isAbsolute)return new Nc(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const o=e.snapshot._urlSegment;return new Nc(o,o===t.root,0)}const r=ec(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Nc(r,!1,i-o)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,t,n),h=c.processChildren?sf(c.segmentGroup,c.index,o.commands):Ig(c.segmentGroup,c.index,o.commands);return Ru(c.segmentGroup,h,t,r,i)}(_,this.currentUrlTree,e,x,null!=E?E:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Kt(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Mt({},xy):!1===r?Mt({},Nw):r,Kt(e))return Ql(this.currentUrlTree,e,i);const o=this.parseUrl(e);return Ql(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Jr(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,o,c){var It,jt,Vt;if(this.disposed)return Promise.resolve(!1);const h=this.transitions.value,p=Ng(r)&&h&&!Ng(h.source),_=h.rawUrl.toString()===e.toString(),E=h.id===(null==(It=this.currentNavigation)?void 0:It.id);if(p&&_&&E)return Promise.resolve(!0);let $,se,ye;c?($=c.resolve,se=c.reject,ye=c.promise):ye=new Promise((Ht,Sn)=>{$=Ht,se=Sn});const ze=++this.navigationId;let rt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),rt=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!=(jt=this.browserPageId)?jt:0:(null!=(Vt=this.browserPageId)?Vt:0)+1):rt=0,this.setTransition({id:ze,targetPageId:rt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:$,reject:se,promise:ye,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ye.catch(Ht=>Promise.reject(Ht))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),o=Mt(Mt({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(e,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null==(o=this.currentNavigation)?void 0:o.finalUrl)&&0===c&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Qa(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Ng(n){return"imperative"!==n}let pf=(()=>{class n{constructor(e,r,i,o,c){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=c,this.commands=null,this.onChanges=new Wt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==e?r.setAttribute(i,"tabindex",e):r.removeAttribute(i,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Rd(this.skipLocationChange),replaceUrl:Rd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rd(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ys),s.Y36(Oc),s.$8M("tabindex"),s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&s.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[s.TTD]}),n})(),Fg=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Wt.x,this.subscription=e.events.subscribe(o=>{o instanceof Jr&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,i,o,c){if(0!==e||r||i||o||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Rd(this.skipLocationChange),replaceUrl:Rd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rd(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ys),s.Y36(Oc),s.Y36(Ie))},n.\u0275dir=s.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&s.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&e&&s.uIk("target",r.target)("href",r.href,s.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[s.TTD]}),n})();function Rd(n){return""===n||!!n}class ky{}class Oy{preload(t,e){return xt(null)}}let Lg=(()=>{class n{constructor(e,r,i,o){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new Sy(i,r,p=>e.triggerEvent(new oa(p)),p=>e.triggerEvent(new Po(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(kn(e=>e instanceof Jr),Ya(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const c=o._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(e,o)):o.children&&i.push(this.processRoutes(e,o.children));return(0,Dr.D)(i).pipe((0,ho.J)(),(0,kt.U)(o=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?xt(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,vr.z)(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ys),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(ky))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Py=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof bd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Jr&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Yl&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new Yl(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Vc=new s.OlP("ROUTER_CONFIGURATION"),Ny=new s.OlP("ROUTER_FORROOT_GUARD"),Lu=[Fe,{provide:yn,useClass:qn},{provide:ys,useFactory:function(n,t,e,r,i,o,c={},h,p){const _=new ys(null,n,t,e,r,i,Su(o));return h&&(_.urlHandlingStrategy=h),p&&(_.routeReuseStrategy=p),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,_),c.enableTracing&&_.events.subscribe(E=>{var x,$;null==(x=console.group)||x.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null==($=console.groupEnd)||$.call(console)}),_},deps:[yn,Lc,Fe,s.zs3,s.Sil,Pg,Vc,[class{},new s.FiY],[class{},new s.FiY]]},Lc,{provide:Oc,useFactory:function(n){return n.routerState.root},deps:[ys]},Lg,Oy,class{preload(t,e){return e().pipe(Qs(()=>xt(null)))}},{provide:Vc,useValue:{enableTracing:!1}}];function Fw(){return new s.PXZ("Router",ys)}let Od=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[Lu,Fy(e),{provide:Ny,useFactory:VD,deps:[[ys,new s.FiY,new s.tp0]]},{provide:Vc,useValue:r||{}},{provide:Ie,useFactory:Bg,deps:[re,[new s.tBr(J),new s.FiY],Vc]},{provide:Py,useFactory:BD,deps:[ys,ln,Vc]},{provide:ky,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Oy},{provide:s.PXZ,multi:!0,useFactory:Fw},[Vg,{provide:s.ip1,multi:!0,useFactory:Ug,deps:[Vg]},{provide:By,useFactory:jg,deps:[Vg]},{provide:s.tb,multi:!0,useExisting:By}]]}}static forChild(e){return{ngModule:n,providers:[Fy(e)]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Ny,8),s.LFG(ys,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();function BD(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Py(n,t,e)}function Bg(n,t,e={}){return e.useHash?new De(n,t):new Se(n,t)}function VD(n){return"guarded"}function Fy(n){return[{provide:s.deG,multi:!0,useValue:n},{provide:Pg,multi:!0,useValue:n}]}let Vg=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Wt.x}appInitializer(){return this.injector.get(te,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),o=this.injector.get(ys),c=this.injector.get(Vc);return"disabled"===c.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?xt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(Vc),i=this.injector.get(Lg),o=this.injector.get(Py),c=this.injector.get(ys),h=this.injector.get(s.z2F);e===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),o.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.zs3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Ug(n){return n.appInitializer.bind(n)}function jg(n){return n.bootstrapListener.bind(n)}const By=new s.OlP("Router Initializer"),Uy=[];let gf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Od.forRoot(Uy)],Od]}),n})();class mf{constructor(t=!1,e,r=!0){this._multiple=t,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Wt.x,e&&e.length&&(t?e.forEach(i=>this._markSelected(i)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}var _f=R(6921);function gr(n){return(0,Qr.e)((t,e)=>{(0,Bi.Xf)(n).subscribe(new lr.Q(e,()=>e.complete(),_f.Z)),!e.closed&&t.subscribe(e)})}function cr(n){return null!=n&&"false"!=`${n}`}function Vi(n,t=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function yf(n){return Array.isArray(n)?n:[n]}function Ui(n){return null==n?"":"string"==typeof n?n:`${n}px`}function rc(n){return n instanceof s.SBq?n.nativeElement:n}const WD=new s.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,s.f3M)(Y)}}),qD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let il=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new s.vpe,e){const i=e.documentElement?e.documentElement.dir:null;this.value=function(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?qD.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(WD,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();class zw extends class{constructor(){this.expansionModel=new mf(!0)}toggle(t){this.expansionModel.toggle(this._trackByValue(t))}expand(t){this.expansionModel.select(this._trackByValue(t))}collapse(t){this.expansionModel.deselect(this._trackByValue(t))}isExpanded(t){return this.expansionModel.isSelected(this._trackByValue(t))}toggleDescendants(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}collapseAll(){this.expansionModel.clear()}expandDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.select(...e.map(r=>this._trackByValue(r)))}collapseDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.deselect(...e.map(r=>this._trackByValue(r)))}_trackByValue(t){return this.trackBy?this.trackBy(t):t}}{constructor(t,e,r){super(),this.getLevel=t,this.isExpandable=e,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(t){const r=[];for(let i=this.dataNodes.indexOf(t)+1;i<this.dataNodes.length&&this.getLevel(t)<this.getLevel(this.dataNodes[i]);i++)r.push(this.dataNodes[i]);return r}expandAll(){this.expansionModel.select(...this.dataNodes.map(t=>this._trackByValue(t)))}}const yo=new s.OlP("CDK_TREE_NODE_OUTLET_NODE");let Nd=(()=>{class n{constructor(e,r){this.viewContainer=e,this._node=r}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(yo,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class YD{constructor(t){this.$implicit=t}}let Fd=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),sl=(()=>{class n{constructor(e,r){this._differs=e,this._changeDetectorRef=r,this._onDestroy=new Wt.x,this._levels=new Map,this.viewChange=new pi({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(r=>!r.when);this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;!function(n){return n&&"function"==typeof n.connect}(this._dataSource)?function(n){return!!n&&(n instanceof Pr.y||(0,Ds.m)(n.lift)&&(0,Ds.m)(n.subscribe))}(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=xt(this._dataSource)):e=this._dataSource.connect(this),e&&(this._dataSubscription=e.pipe(gr(this._onDestroy)).subscribe(r=>this.renderNodeChanges(r)))}renderNodeChanges(e,r=this._dataDiffer,i=this._nodeOutlet.viewContainer,o){const c=r.diff(e);!c||(c.forEachOperation((h,p,_)=>{if(null==h.previousIndex)this.insertNode(e[_],_,i,o);else if(null==_)i.remove(p),this._levels.delete(h.item);else{const E=i.get(p);i.move(E,_)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,r){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(o=>o.when&&o.when(r,e))||this._defaultNodeDef}insertNode(e,r,i,o){const c=this._getNodeDef(e,r),h=new YD(e);h.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==o&&this._levels.has(o)?this._levels.get(o)+1:0,this._levels.set(e,h.level),(i||this._nodeOutlet.viewContainer).createEmbeddedView(c.template,h,r),ic.mostRecentTreeNode&&(ic.mostRecentTreeNode.data=e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.ZZ4),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(e,r,i){if(1&e&&s.Suo(i,Fd,5),2&e){let o;s.iGM(o=s.CRH())&&(r._nodeDefs=o)}},viewQuery:function(e,r){if(1&e&&s.Gf(Nd,7),2&e){let i;s.iGM(i=s.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,r){1&e&&s.GkF(0,0)},directives:[Nd],encapsulation:2}),n})(),ic=(()=>{class n{constructor(e,r){this._elementRef=e,this._tree=r,this._destroyed=new Wt.x,this._dataChanges=new Wt.x,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(n){let t=n.parentElement;for(;t&&!zg(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?Vi(t.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(sl))},n.\u0275dir=s.lG2({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("aria-expanded",r.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();function zg(n){const t=n.classList;return!(!(null==t?void 0:t.contains("cdk-nested-tree-node"))&&!(null==t?void 0:t.contains("cdk-tree")))}const Hy=/([A-Za-z%]+)$/;let zy,bf=(()=>{class n{constructor(e,r,i,o){this._treeNode=e,this._tree=r,this._element=i,this._dir=o,this._destroyed=new Wt.x,this.indentUnits="px",this._indent=40,this._setPadding(),o&&o.change.pipe(gr(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,r=null==this._level?e:this._level;return"number"==typeof r?`${r*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const r=this._paddingIndent();if(r!==this._currentPadding||e){const i=this._element.nativeElement,o=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",c="paddingLeft"===o?"paddingRight":"paddingLeft";i.style[o]=r||"",i.style[c]="",this._currentPadding=r}}_setLevelInput(e){this._level=Vi(e,null),this._setPadding()}_setIndentInput(e){let r=e,i="px";if("string"==typeof e){const o=e.split(Hy);r=o[0],i=o[1]||i}this.indentUnits=i,this._indent=Vi(r),this._setPadding()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ic),s.Y36(sl),s.Y36(s.SBq),s.Y36(il,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),Ww=(()=>{class n{constructor(e,r){this._tree=e,this._treeNode=r,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=cr(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(sl),s.Y36(ic))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,r){1&e&&s.NdJ("click",function(o){return r._toggle(o)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),QD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();try{zy="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){zy=!1}let wf,Qi=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Qe(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zy)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.Lbi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qw=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function XD(){if(wf)return wf;if("object"!=typeof document||!document)return wf=new Set(qw),wf;let n=document.createElement("input");return wf=new Set(qw.filter(t=>(n.setAttribute("type",t),n.type===t))),wf}let Ld,Bd,Vd,Yw;function Gg(n){return function(){if(null==Ld&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ld=!0}))}finally{Ld=Ld||!1}return Ld}()?n:!!n.capture}function eA(){if(null==Vd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Vd=!1,Vd;if("scrollBehavior"in document.documentElement.style)Vd=!0;else{const n=Element.prototype.scrollTo;Vd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Vd}function $g(){if("object"!=typeof document||!document)return 0;if(null==Bd){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",n.appendChild(e),document.body.appendChild(n),Bd=0,0===n.scrollLeft&&(n.scrollLeft=1,Bd=0===n.scrollLeft?1:2),n.remove()}return Bd}function tA(n){if(function(){if(null==Yw){const n="undefined"!=typeof document?document.head:null;Yw=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Yw}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Kw(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Ud(n){return n.composedPath?n.composedPath()[0]:n.target}function Qw(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function al(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Hc=R(2210);function Af(n,t=Hc.z){return(0,Qr.e)((e,r)=>{let i=null,o=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function p(){const _=c+n,E=t.now();if(E<_)return i=this.schedule(void 0,_-E),void r.add(i);h()}e.subscribe(new lr.Q(r,_=>{o=_,c=t.now(),i||(i=t.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}function bC(n){return kn((t,e)=>n<=e)}function xf(n,t=ia.y){return n=null!=n?n:xA,(0,Qr.e)((e,r)=>{let i,o=!0;e.subscribe(new lr.Q(r,c=>{const h=t(c);(o||!n(i,h))&&(o=!1,i=h,r.next(c))}))})}function xA(n,t){return n===t}class Ky{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Wt.x,this._typeaheadSubscription=ns.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Wt.x,this.change=new Wt.x,t instanceof s.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const i=e.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ki.b)(e=>this._pressedLetters.push(e)),Af(t),kn(()=>this._pressedLetters.length>0),(0,kt.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,c=r[o];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||al(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t),i=e[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const i=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof s.n_E?this._items.toArray():this._items}}class AN extends Ky{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class Oa extends Ky{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let EC=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(t){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(r&&(-1===Qg(r)||!this.isVisible(r)))return!1;let i=e.nodeName.toLowerCase(),o=Qg(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||AC(n))}(e)&&!this.isDisabled(e)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AC(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function Qg(n){if(!AC(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class LA{constructor(t,e,r,i,o=!1){this._element=t,this._checker=e,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return null==r||r.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=0;r<e.length;r++){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(i)return i}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=e.length-1;r>=0;r--){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(i)return i}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(t)}}let xC=(()=>{class n{constructor(e,r,i){this._checker=e,this._ngZone=r,this._document=i}create(e,r=!1){return new LA(e,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(EC),s.LFG(s.R0b),s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MC(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Xg(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const ll=new s.OlP("cdk-input-modality-detector-options"),kf={ignoreKeys:[18,17,224,91,16]},ua=Gg({passive:!0,capture:!0});let em=(()=>{class n{constructor(e,r,i,o){this._platform=e,this._mostRecentTarget=null,this._modality=new pi(null),this._lastTouchMs=0,this._onKeydown=c=>{var h,p;(null==(p=null==(h=this._options)?void 0:h.ignoreKeys)?void 0:p.some(_=>_===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ud(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(MC(c)?"keyboard":"mouse"),this._mostRecentTarget=Ud(c))},this._onTouchstart=c=>{Xg(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ud(c))},this._options=Mt(Mt({},kf),o),this.modalityDetected=this._modality.pipe(bC(1)),this.modalityChanged=this.modalityDetected.pipe(xf()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ua),i.addEventListener("mousedown",this._onMousedown,ua),i.addEventListener("touchstart",this._onTouchstart,ua)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ua),document.removeEventListener("mousedown",this._onMousedown,ua),document.removeEventListener("touchstart",this._onTouchstart,ua))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qi),s.LFG(s.R0b),s.LFG(Y),s.LFG(ll,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const da=new s.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),jd=new s.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let zc=(()=>{class n{constructor(e,r,i,o){this._ngZone=r,this._defaultOptions=o,this._document=i,this._liveElement=e||this._createLiveElement()}announce(e,...r){const i=this._defaultOptions;let o,c;return 1===r.length&&"number"==typeof r[0]?c=r[0]:[o,c]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),null==c&&i&&(c=i.duration),this._liveElement.setAttribute("aria-live",o),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e,r;clearTimeout(this._previousTimeout),null==(e=this._liveElement)||e.remove(),this._liveElement=null,null==(r=this._currentResolve)||r.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",r=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(da,8),s.LFG(s.R0b),s.LFG(Y),s.LFG(jd,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hd=new s.OlP("cdk-focus-monitor-default-options"),oc=Gg({passive:!0,capture:!0});let ac=(()=>{class n{constructor(e,r,i,o,c){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Wt.x,this._rootNodeFocusAndBlurListener=h=>{const p=Ud(h),_="focus"===h.type?this._onFocus:this._onBlur;for(let E=p;E;E=E.parentElement)_.call(this,h,E)},this._document=o,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(e,r=!1){const i=rc(e);if(!this._platform.isBrowser||1!==i.nodeType)return xt(null);const o=tA(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new Wt.x,rootNode:o};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(e){const r=rc(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const o=rc(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),o=Ud(e);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,oc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,oc)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&r.push([o,i])}),r}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.R0b),s.LFG(Qi),s.LFG(em),s.LFG(Y,8),s.LFG(Hd,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ju="cdk-high-contrast-black-on-white",Hu="cdk-high-contrast-white-on-black",tm="cdk-high-contrast-active";let kC=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(tm),e.remove(ju),e.remove(Hu),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(tm),e.add(ju)):2===r&&(e.add(tm),e.add(Hu))}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qi),s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tv{}const cl="*";function zu(n,t){return{type:7,name:n,definitions:t,options:{}}}function ul(n,t=null){return{type:4,styles:t,timings:n}}function OC(n,t=null){return{type:3,steps:n,options:t}}function nv(n,t=null){return{type:2,steps:n,options:t}}function bs(n){return{type:6,styles:n,offset:null}}function Pa(n,t,e){return{type:0,name:n,styles:t,options:e}}function dl(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function nm(n=null){return{type:9,options:n}}function rm(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function PC(n){Promise.resolve(null).then(n)}class Pf{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){PC(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class NC{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?PC(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}function im(){return"undefined"!=typeof window&&void 0!==window.document}function rv(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gu(n){switch(n.length){case 0:return new Pf;case 1:return n[0];default:return new NC(n)}}function UA(n,t,e,r,i={},o={}){const c=[],h=[];let p=-1,_=null;if(r.forEach(E=>{const x=E.offset,$=x==p,se=$&&_||{};Object.keys(E).forEach(ye=>{let ze=ye,rt=E[ye];if("offset"!==ye)switch(ze=t.normalizePropertyName(ze,c),rt){case"!":rt=i[ye];break;case cl:rt=o[ye];break;default:rt=t.normalizeStyleValue(ye,ze,rt,c)}se[ze]=rt}),$||h.push(se),_=se,p=x}),c.length){const E="\n - ";throw new Error(`Unable to animate due to the following errors:${E}${c.join(E)}`)}return h}function FC(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&iv(e,"start",n)));break;case"done":n.onDone(()=>r(e&&iv(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&iv(e,"destroy",n)))}}function iv(n,t,e){const r=e.totalTime,o=sm(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),c=n._data;return null!=c&&(o._data=c),o}function sm(n,t,e,r,i="",o=0,c){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function ha(n,t,e){let r;return n instanceof Map?(r=n.get(t),r||n.set(t,r=e)):(r=n[t],r||(r=n[t]=e)),r}function LC(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Gc=(n,t)=>!1,sv=(n,t)=>!1,ov=(n,t,e)=>[];const BC=rv();(BC||"undefined"!=typeof Element)&&(Gc=im()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),sv=(()=>{if(BC||Element.prototype.matches)return(n,t)=>n.matches(t);{const n=Element.prototype,t=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return t?(e,r)=>t.apply(e,[r]):sv}})(),ov=(n,t,e)=>{let r=[];if(e){const i=n.querySelectorAll(t);for(let o=0;o<i.length;o++)r.push(i[o])}else{const i=n.querySelector(t);i&&r.push(i)}return r});let hl=null,UC=!1;function om(n){hl||(hl=("undefined"!=typeof document?document.body:null)||{},UC=!!hl.style&&"WebkitAppearance"in hl.style);let t=!0;return hl.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in hl.style,!t&&UC&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in hl.style)),t}const av=sv,lv=Gc,cv=ov;function jC(n){const t={};return Object.keys(n).forEach(e=>{const r=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=n[e]}),t}let uv=(()=>{class n{validateStyleProperty(e){return om(e)}matchesElement(e,r){return av(e,r)}containsElement(e,r){return lv(e,r)}query(e,r,i){return cv(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,c,h=[],p){return new Pf(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),dv=(()=>{class n{}return n.NOOP=new uv,n})();const zC="ng-enter",zd="ng-leave",$c="ng-trigger",Ff=".ng-trigger",am="ng-animating",Lf=".ng-animating";function $u(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Bf(parseFloat(t[1]),t[2])}function Bf(n,t){return"s"===t?1e3*n:n}function Gd(n,t,e){return n.hasOwnProperty("duration")?n:function(n,t,e){let i,o=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=Bf(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(o=Bf(parseFloat(p),h[4]));const _=h[5];_&&(c=_)}else i=n;if(!e){let h=!1,p=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),h=!0),o<0&&(t.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&t.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:o,easing:c}}(n,t,e)}function Vf(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function fl(n,t,e={}){if(t)for(let r in n)e[r]=n[r];else Vf(n,e);return e}function lm(n,t,e){return e?t+":"+e+";":""}function pv(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=lm(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=lm(0,ZC(e),n.style[e]));n.setAttribute("style",t)}function Na(n,t,e){n.style&&(Object.keys(t).forEach(r=>{const i=Hf(r);e&&!e.hasOwnProperty(r)&&(e[r]=n.style[i]),n.style[i]=t[r]}),rv()&&pv(n))}function lc(n,t){n.style&&(Object.keys(t).forEach(e=>{const r=Hf(e);n.style[r]=""}),rv()&&pv(n))}function $d(n){return Array.isArray(n)?1==n.length?n[0]:nv(n):n}const Uf=new RegExp("{{\\s*(.+?)\\s*}}","g");function cm(n){let t=[];if("string"==typeof n){let e;for(;e=Uf.exec(n);)t.push(e[1]);Uf.lastIndex=0}return t}function um(n,t,e){const r=n.toString(),i=r.replace(Uf,(o,c)=>{let h=t[c];return t.hasOwnProperty(c)||(e.push(`Please provide a value for the animation param ${c}`),h=""),h.toString()});return i==r?n:i}function jf(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const qC=/-+([a-z0-9])/g;function Hf(n){return n.replace(qC,(...t)=>t[1].toUpperCase())}function ZC(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function YC(n,t){return 0===n||0===t}function gv(n,t,e){const r=Object.keys(e);if(r.length&&t.length){let o=t[0],c=[];if(r.forEach(h=>{o.hasOwnProperty(h)||c.push(h),o[h]=e[h]}),c.length)for(var i=1;i<t.length;i++){let h=t[i];c.forEach(function(p){h[p]=dm(n,p)})}}return t}function vo(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function dm(n,t){return window.getComputedStyle(n)[t]}function KC(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,t,e){if(":"==n[0]){const p=function(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const i=r[1],o=r[2],c=r[3];t.push(mv(i,c));"<"==o[0]&&!("*"==i&&"*"==c)&&t.push(mv(c,i))}(r,e,t)):e.push(n),e}const zf=new Set(["true","1"]),Gf=new Set(["false","0"]);function mv(n,t){const e=zf.has(n)||Gf.has(n),r=zf.has(t)||Gf.has(t);return(i,o)=>{let c="*"==n||n==i,h="*"==t||t==o;return!c&&e&&"boolean"==typeof i&&(c=i?zf.has(n):Gf.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?zf.has(t):Gf.has(t)),c&&h}}const XC=new RegExp("s*:selfs*,?","g");function eE(n,t,e){return new HA(n).build(t,e)}class HA{constructor(t){this._driver=t}build(t,e){const r=new Ji(e);return this._resetContextStyleTimingState(r),vo(this,$d(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const p=h,_=p.name;_.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,o.push(this.visitState(p,e))}),p.name=_}else if(1==h.type){const p=this.visitTransition(h,e);r+=p.queryCount,i+=p.depCount,c.push(p)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};if(r.styles.forEach(h=>{if(hm(h)){const p=h;Object.keys(p).forEach(_=>{cm(p[_]).forEach(E=>{c.hasOwnProperty(E)||o.add(E)})})}}),o.size){const h=jf(o.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=vo(this,$d(t.animation),e);return{type:1,matchers:KC(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Wc(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>vo(this,r,e)),options:Wc(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(c=>{e.currentTime=r;const h=vo(this,c,e);return i=Math.max(i,e.currentTime),h});return e.currentTime=i,{type:3,steps:o,options:Wc(t.options)}}visitAnimate(t,e){const r=function(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return yv(Gd(n,t).duration,0,"");const r=n;if(r.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=yv(0,0,"");return o.dynamic=!0,o.strValue=r,o}return e=e||Gd(r,t),yv(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:bs({});if(5==o.type)i=this.visitKeyframes(o,e);else{let c=t.styles,h=!1;if(!c){h=!0;const _={};r.easing&&(_.easing=r.easing),c=bs(_)}e.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,e);p.isEmptyStep=h,i=p}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(c=>{"string"==typeof c?c==cl?r.push(c):e.errors.push(`The provided style string value ${c} is not allowed.`):r.push(c)}):r.push(t.styles);let i=!1,o=null;return r.forEach(c=>{if(hm(c)){const h=c,p=h.easing;if(p&&(o=p,delete h.easing),!i)for(let _ in h)if(h[_].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:o,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void e.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const p=e.collectedStyles[e.currentQuerySelector],_=p[h];let E=!0;_&&(o!=i&&o>=_.startTime&&i<=_.endTime&&(e.errors.push(`The CSS property "${h}" that exists between the times of "${_.startTime}ms" and "${_.endTime}ms" is also being animated in a parallel animation between the times of "${o}ms" and "${i}ms"`),E=!1),o=_.startTime),E&&(p[h]={startTime:o,endTime:i}),e.options&&function(n,t,e){const r=t.params||{},i=cm(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(`Unable to resolve the local animation param ${o} in the given list of values`)})}(c[h],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;let o=0;const c=[];let h=!1,p=!1,_=0;const E=t.steps.map(It=>{const jt=this._makeStyleAst(It,e);let Vt=null!=jt.offset?jt.offset:function(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(hm(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(hm(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(jt.styles),Ht=0;return null!=Vt&&(o++,Ht=jt.offset=Vt),p=p||Ht<0||Ht>1,h=h||Ht<_,_=Ht,c.push(Ht),jt});p&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&e.errors.push("Please ensure that all keyframe offsets are in order");const x=t.steps.length;let $=0;o>0&&o<x?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==o&&($=1/(x-1));const se=x-1,ye=e.currentTime,ze=e.currentAnimateTimings,rt=ze.duration;return E.forEach((It,jt)=>{const Vt=$>0?jt==se?1:$*jt:c[jt],Ht=Vt*rt;e.currentTime=ye+ze.delay+Ht,ze.duration=Ht,this._validateStyleAst(It,e),It.offset=Vt,r.styles.push(It)}),r}visitReference(t,e){return{type:8,animation:vo(this,$d(t.animation),e),options:Wc(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Wc(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Wc(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,c]=function(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(XC,"")),n=n.replace(/@\*/g,Ff).replace(/@\w+/g,e=>Ff+"-"+e.substr(1)).replace(/:animating/g,Lf),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,ha(e.collectedStyles,e.currentQuerySelector,{});const h=vo(this,$d(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:t.selector,options:Wc(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Gd(t.timings,e.errors,!0);return{type:12,animation:vo(this,$d(t.animation),e),timings:r,options:null}}}class Ji{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function hm(n){return!Array.isArray(n)&&"object"==typeof n}function Wc(n){return n?(n=Vf(n)).params&&(n.params=function(n){return n?Vf(n):null}(n.params)):n={},n}function yv(n,t,e){return{duration:n,delay:t,easing:e}}function fm(n,t,e,r,i,o,c=null,h=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:h}}class $f{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const WA=new RegExp(":enter","g"),qA=new RegExp(":leave","g");function pm(n,t,e,r,i,o={},c={},h,p,_=[]){return(new LN).buildKeyframes(n,t,e,r,i,o,c,h,p,_)}class LN{buildKeyframes(t,e,r,i,o,c,h,p,_,E=[]){_=_||new $f;const x=new Wf(t,e,_,i,o,E,[]);x.options=p,x.currentTimeline.setStyles([c],null,x.errors,p),vo(this,r,x);const $=x.timelines.filter(se=>se.containsAnimation());if($.length&&Object.keys(h).length){const se=$[$.length-1];se.allowOnlyTimelineStyles()||se.setStyles([h],null,x.errors,p)}return $.length?$.map(se=>se.buildKeyframes()):[fm(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.consume(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const c=null!=r.duration?$u(r.duration):null,h=null!=r.delay?$u(r.delay):null;return 0!==c&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,c,h);o=Math.max(o,_.duration+_.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),vo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Zd);const c=$u(o.delay);i.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>vo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?$u(t.options.delay):0;t.steps.forEach(c=>{const h=e.createSubContext(t.options);o&&h.delayNextStep(o),vo(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Gd(e.params?um(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,h=e.createSubContext().currentTimeline;h.easing=r.easing,t.styles.forEach(p=>{h.forwardTime((p.offset||0)*o),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?$u(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Zd);let c=r;const h=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((_,E)=>{e.currentQueryIndex=E;const x=e.createSubContext(t.options,_);o&&x.delayNextStep(o),_===e.element&&(p=x.currentTimeline),vo(this,t.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,c=Math.abs(o.duration),h=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const E=e.currentTimeline;p&&E.delayNextStep(p);const x=E.currentTime;vo(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const Zd={};class Wf{constructor(t,e,r,i,o,c,h,p){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Fo(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=$u(r.duration)),null!=r.delay&&(i.delay=$u(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!e||!c.hasOwnProperty(h))&&(c[h]=um(o[h],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new Wf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Zd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},o=new ZA(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,c){let h=[];if(i&&h.push(this.element),t.length>0){t=(t=t.replace(WA,"."+this._enterClassName)).replace(qA,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),h.push(..._)}return!o&&0==h.length&&c.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),h}}class Fo{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Fo(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||cl,this._currentKeyframe[e]=cl}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&(this._previousKeyframe.easing=e);const o=i&&i.params||{},c=function(n,t){const e={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(t),r.forEach(o=>{e[o]=cl})):fl(i,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const p=um(c[h],o,r);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:cl),this._updateStyle(h,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],i=t._styleSummary[e];(!r||i.time>r.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const _=fl(h,!0);Object.keys(_).forEach(E=>{const x=_[E];"!"==x?t.add(E):x==cl&&e.add(E)}),r||(_.offset=p/this.duration),i.push(_)});const o=t.size?jf(t.values()):[],c=e.size?jf(e.values()):[];if(r){const h=i[0],p=Vf(h);h.offset=0,p.offset=1,i=[h,p]}return fm(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class ZA extends Fo{constructor(t,e,r,i,o,c,h=!1){super(t,e,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],c=r+e,h=e/c,p=fl(t[0],!1);p.offset=0,o.push(p);const _=fl(t[0],!1);_.offset=sE(h),o.push(_);const E=t.length-1;for(let x=1;x<=E;x++){let $=fl(t[x],!1);$.offset=sE((e+$.offset*r)/c),o.push($)}r=c,e=0,i="",t=o}return fm(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function sE(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Lo{}class oE extends Lo{normalizePropertyName(t,e){return Hf(t)}normalizeStyleValue(t,e,r,i){let o="";const c=r.toString().trim();if(KA[e]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${t}:${r}`)}return c+o}}const KA=(()=>function(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function aE(n,t,e,r,i,o,c,h,p,_,E,x,$){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:_,postStyleProps:E,totalTime:x,errors:$}}const vv={};class gm{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){const i=this._stateStyles["*"],o=this._stateStyles[t],c=i?i.buildStyles(e,r):{};return o?o.buildStyles(e,r):c}build(t,e,r,i,o,c,h,p,_,E){const x=[],$=this.ast.options&&this.ast.options.params||vv,ye=this.buildStyles(r,h&&h.params||vv,x),ze=p&&p.params||vv,rt=this.buildStyles(i,ze,x),It=new Set,jt=new Map,Vt=new Map,Ht="void"===i,Sn={params:Mt(Mt({},$),ze)},Hn=E?[]:pm(t,e,this.ast.animation,o,c,ye,rt,Sn,_,x);let kr=0;if(Hn.forEach(hd=>{kr=Math.max(hd.duration+hd.delay,kr)}),x.length)return aE(e,this._triggerName,r,i,Ht,ye,rt,[],[],jt,Vt,kr,x);Hn.forEach(hd=>{const fd=hd.element,xz=ha(jt,fd,{});hd.preStyleProps.forEach(ug=>xz[ug]=!0);const Ew=ha(Vt,fd,{});hd.postStyleProps.forEach(ug=>Ew[ug]=!0),fd!==e&&It.add(fd)});const qo=jf(It.values());return aE(e,this._triggerName,r,i,Ht,ye,rt,Hn,qo,jt,Vt,kr)}}class JA{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},i=Vf(this.defaultParams);return Object.keys(t).forEach(o=>{const c=t[o];null!=c&&(i[o]=c)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const c=o;Object.keys(c).forEach(h=>{let p=c[h];p.length>1&&(p=um(p,i,e));const _=this.normalizer.normalizePropertyName(h,e);p=this.normalizer.normalizeStyleValue(h,_,p,e),r[_]=p})}}),r}}class XA{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(i=>{this.states[i.name]=new JA(i.style,i.options&&i.options.params||{},r)}),bv(this.states,"true","1"),bv(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new gm(t,i,this.states))}),this.fallbackTransition=function(n,t,e){return new gm(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(c=>c.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function bv(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const mm=new $f;class ex{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],i=eE(this._driver,e,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,r){const i=t.element,o=UA(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations[t];let c;const h=new Map;if(o?(c=pm(this._driver,e,o,zC,zd,{},{},r,mm,i),c.forEach(E=>{const x=ha(h,E.element,{});E.postStyleProps.forEach($=>x[$]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),c=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((E,x)=>{Object.keys(E).forEach($=>{E[$]=this._driver.computeStyle(x,$,cl)})});const _=Gu(c.map(E=>{const x=h.get(E.element);return this._buildPlayer(E,{},x)}));return this._playersById[t]=_,_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,r,i){const o=sm(e,"","","");return FC(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const wv="ng-animate-queued",_m="ng-animate-disabled",Zf=".ng-animate-disabled",dE=[],Iv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bo="__ng_removed";class ym{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=null!=(n=r?t.value:t)?n:null,r){const o=Vf(t);delete o.value,this.options=o}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const Yd="void",vm=new ym(Yd);class tx{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,fa(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${e}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${e}" is not supported!`);var n;const o=ha(this._elementListeners,t,[]),c={name:e,phase:r,callback:i};o.push(c);const h=ha(this._engine.statesByElement,t,{});return h.hasOwnProperty(e)||(fa(t,$c),fa(t,$c+"-"+e),h[e]=vm),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(c);p>=0&&o.splice(p,1),this._triggers[e]||delete h[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),c=new Tv(this.id,e,t);let h=this._engine.statesByElement.get(t);h||(fa(t,$c),fa(t,$c+"-"+e),this._engine.statesByElement.set(t,h={}));let p=h[e];const _=new ym(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),h[e]=_,p||(p=vm),_.value!==Yd&&p.value===_.value){if(!function(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(p.params,_.params)){const ze=[],rt=o.matchStyles(p.value,p.params,ze),It=o.matchStyles(_.value,_.params,ze);ze.length?this._engine.reportError(ze):this._engine.afterFlush(()=>{lc(t,rt),Na(t,It)})}return}const $=ha(this._engine.playersByElement,t,[]);$.forEach(ze=>{ze.namespaceId==this.id&&ze.triggerName==e&&ze.queued&&ze.destroy()});let se=o.matchTransition(p.value,_.value,t,_.params),ye=!1;if(!se){if(!i)return;se=o.fallbackTransition,ye=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:se,fromState:p,toState:_,player:c,isFallbackTransition:ye}),ye||(fa(t,wv),c.onStart(()=>{Kd(t,wv)})),c.onDone(()=>{let ze=this.players.indexOf(c);ze>=0&&this.players.splice(ze,1);const rt=this._engine.playersByElement.get(t);if(rt){let It=rt.indexOf(c);It>=0&&rt.splice(It,1)}}),this.players.push(c),$.push(c),c}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Ff,!0);r.forEach(i=>{if(i[Bo])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t);if(o){const c=[];if(Object.keys(o).forEach(h=>{if(this._triggers[h]){const p=this.trigger(t,h,Yd,i);p&&c.push(p)}}),c.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),r&&Gu(c).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const p=this._triggers[c].fallbackTransition,_=r[c]||vm,E=new ym(Yd),x=new Tv(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:_,toState:E,player:x,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let c=t;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Bo];(!o||o===Iv)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){fa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=sm(o,r.triggerName,r.fromState.value,r.toState.value);p._data=t,FC(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class nx{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new tx(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let o=r;o>=0;o--)if(this.driver.containsElement(this._namespaceList[o].hostElement,e)){this._namespaceList.splice(o+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const i=Object.keys(r);for(let o=0;o<i.length;o++){const c=r[i[o]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&e.add(h)}}}return e}trigger(t,e,r,i){if(bm(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!bm(e))return;const o=e[Bo];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),fa(t,_m)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Kd(t,_m))}removeNode(t,e,r,i){if(bm(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i){this.collectedLeaveElements.push(e),e[Bo]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(t,e,r,i,o){return bm(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Ff,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Lf,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Gu(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Bo];if(e&&e.setForRemoval){if(t[Bo]=Iv,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Zf)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Zf,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)fa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?Gu(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const r=new $f,i=[],o=new Map,c=[],h=new Map,p=new Map,_=new Map,E=new Set;this.disabledNodes.forEach(rn=>{E.add(rn);const mn=this.driver.query(rn,".ng-animate-queued",!0);for(let On=0;On<mn.length;On++)E.add(mn[On])});const x=this.bodyNode,$=Array.from(this.statesByElement.keys()),se=gE($,this.collectedEnterElements),ye=new Map;let ze=0;se.forEach((rn,mn)=>{const On=zC+ze++;ye.set(mn,On),rn.forEach(Ir=>fa(Ir,On))});const rt=[],It=new Set,jt=new Set;for(let rn=0;rn<this.collectedLeaveElements.length;rn++){const mn=this.collectedLeaveElements[rn],On=mn[Bo];On&&On.setForRemoval&&(rt.push(mn),It.add(mn),On.hasAnimation?this.driver.query(mn,".ng-star-inserted",!0).forEach(Ir=>It.add(Ir)):jt.add(mn))}const Vt=new Map,Ht=gE($,Array.from(It));Ht.forEach((rn,mn)=>{const On=zd+ze++;Vt.set(mn,On),rn.forEach(Ir=>fa(Ir,On))}),t.push(()=>{se.forEach((rn,mn)=>{const On=ye.get(mn);rn.forEach(Ir=>Kd(Ir,On))}),Ht.forEach((rn,mn)=>{const On=Vt.get(mn);rn.forEach(Ir=>Kd(Ir,On))}),rt.forEach(rn=>{this.processLeaveNode(rn)})});const Sn=[],Hn=[];for(let rn=this._namespaceList.length-1;rn>=0;rn--)this._namespaceList[rn].drainQueuedTransitions(e).forEach(On=>{const Ir=On.player,zs=On.element;if(Sn.push(Ir),this.collectedEnterElements.length){const hu=zs[Bo];if(hu&&hu.setForMove)return void Ir.destroy()}const du=!x||!this.driver.containsElement(x,zs),ja=Vt.get(zs),Hh=ye.get(zs),zi=this._buildInstruction(On,r,Hh,ja,du);if(zi.errors&&zi.errors.length)Hn.push(zi);else{if(du)return Ir.onStart(()=>lc(zs,zi.fromStyles)),Ir.onDestroy(()=>Na(zs,zi.toStyles)),void i.push(Ir);if(On.isFallbackTransition)return Ir.onStart(()=>lc(zs,zi.fromStyles)),Ir.onDestroy(()=>Na(zs,zi.toStyles)),void i.push(Ir);zi.timelines.forEach(hu=>hu.stretchStartingKeyframe=!0),r.append(zs,zi.timelines),c.push({instruction:zi,player:Ir,element:zs}),zi.queriedElements.forEach(hu=>ha(h,hu,[]).push(Ir)),zi.preStyleProps.forEach((hu,Iw)=>{const uD=Object.keys(hu);if(uD.length){let dg=p.get(Iw);dg||p.set(Iw,dg=new Set),uD.forEach(xP=>dg.add(xP))}}),zi.postStyleProps.forEach((hu,Iw)=>{const uD=Object.keys(hu);let dg=_.get(Iw);dg||_.set(Iw,dg=new Set),uD.forEach(xP=>dg.add(xP))})}});if(Hn.length){const rn=[];Hn.forEach(mn=>{rn.push(`@${mn.triggerName} has failed due to:\n`),mn.errors.forEach(On=>rn.push(`- ${On}\n`))}),Sn.forEach(mn=>mn.destroy()),this.reportError(rn)}const kr=new Map,qo=new Map;c.forEach(rn=>{const mn=rn.element;r.has(mn)&&(qo.set(mn,mn),this._beforeAnimationBuild(rn.player.namespaceId,rn.instruction,kr))}),i.forEach(rn=>{const mn=rn.element;this._getPreviousPlayers(mn,!1,rn.namespaceId,rn.triggerName,null).forEach(Ir=>{ha(kr,mn,[]).push(Ir),Ir.destroy()})});const hd=rt.filter(rn=>Sv(rn,p,_)),fd=new Map;pE(fd,this.driver,jt,_,cl).forEach(rn=>{Sv(rn,p,_)&&hd.push(rn)});const Ew=new Map;se.forEach((rn,mn)=>{pE(Ew,this.driver,new Set(rn),p,"!")}),hd.forEach(rn=>{const mn=fd.get(rn),On=Ew.get(rn);fd.set(rn,Mt(Mt({},mn),On))});const ug=[],Mz=[],kz={};c.forEach(rn=>{const{element:mn,player:On,instruction:Ir}=rn;if(r.has(mn)){if(E.has(mn))return On.onDestroy(()=>Na(mn,Ir.toStyles)),On.disabled=!0,On.overrideTotalTime(Ir.totalTime),void i.push(On);let zs=kz;if(qo.size>1){let ja=mn;const Hh=[];for(;ja=ja.parentNode;){const zi=qo.get(ja);if(zi){zs=zi;break}Hh.push(ja)}Hh.forEach(zi=>qo.set(zi,zs))}const du=this._buildAnimation(On.namespaceId,Ir,kr,o,Ew,fd);if(On.setRealPlayer(du),zs===kz)ug.push(On);else{const ja=this.playersByElement.get(zs);ja&&ja.length&&(On.parentPlayer=Gu(ja)),i.push(On)}}else lc(mn,Ir.fromStyles),On.onDestroy(()=>Na(mn,Ir.toStyles)),Mz.push(On),E.has(mn)&&i.push(On)}),Mz.forEach(rn=>{const mn=o.get(rn.element);if(mn&&mn.length){const On=Gu(mn);rn.setRealPlayer(On)}}),i.forEach(rn=>{rn.parentPlayer?rn.syncPlayerEvents(rn.parentPlayer):rn.destroy()});for(let rn=0;rn<rt.length;rn++){const mn=rt[rn],On=mn[Bo];if(Kd(mn,zd),On&&On.hasAnimation)continue;let Ir=[];if(h.size){let du=h.get(mn);du&&du.length&&Ir.push(...du);let ja=this.driver.query(mn,Lf,!0);for(let Hh=0;Hh<ja.length;Hh++){let zi=h.get(ja[Hh]);zi&&zi.length&&Ir.push(...zi)}}const zs=Ir.filter(du=>!du.destroyed);zs.length?ox(this,mn,zs):this.processLeaveNode(mn)}return rt.length=0,ug.forEach(rn=>{this.players.push(rn),rn.onDone(()=>{rn.destroy();const mn=this.players.indexOf(rn);this.players.splice(mn,1)}),rn.play()}),ug}elementContainsData(t,e){let r=!1;const i=e[Bo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let c=[];if(e){const h=this.playersByQueriedElement.get(t);h&&(c=h)}else{const h=this.playersByElement.get(t);if(h){const p=!o||o==Yd;h.forEach(_=>{_.queued||!p&&_.triggerName!=i||c.push(_)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(t,e,r){const o=e.element,c=e.isRemovalTransition?void 0:t,h=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,E=_!==o,x=ha(r,_,[]);this._getPreviousPlayers(_,E,c,h,e.toState).forEach(se=>{const ye=se.getRealPlayer();ye.beforeDestroy&&ye.beforeDestroy(),se.destroy(),x.push(se)})}lc(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,c){const h=e.triggerName,p=e.element,_=[],E=new Set,x=new Set,$=e.timelines.map(ye=>{const ze=ye.element;E.add(ze);const rt=ze[Bo];if(rt&&rt.removedBeforeQueried)return new Pf(ye.duration,ye.delay);const It=ze!==p,jt=function(n){const t=[];return mE(n,t),t}((r.get(ze)||dE).map(kr=>kr.getRealPlayer())).filter(kr=>!!kr.element&&kr.element===ze),Vt=o.get(ze),Ht=c.get(ze),Sn=UA(0,this._normalizer,0,ye.keyframes,Vt,Ht),Hn=this._buildPlayer(ye,Sn,jt);if(ye.subTimeline&&i&&x.add(ze),It){const kr=new Tv(t,h,ze);kr.setRealPlayer(Hn),_.push(kr)}return Hn});_.forEach(ye=>{ha(this.playersByQueriedElement,ye.element,[]).push(ye),ye.onDone(()=>function(n,t,e){let r;if(n instanceof Map){if(r=n.get(t),r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}}else if(r=n[t],r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&delete n[t]}return r}(this.playersByQueriedElement,ye.element,ye))}),E.forEach(ye=>fa(ye,am));const se=Gu($);return se.onDestroy(()=>{E.forEach(ye=>Kd(ye,am)),Na(p,e.toStyles)}),x.forEach(ye=>{ha(i,ye,[]).push(se)}),se}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Pf(t.duration,t.delay)}}class Tv{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Pf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>FC(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ha(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function bm(n){return n&&1===n.nodeType}function fE(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function pE(n,t,e,r,i){const o=[];e.forEach(p=>o.push(fE(p)));const c=[];r.forEach((p,_)=>{const E={};p.forEach(x=>{const $=E[x]=t.computeStyle(_,x,i);(!$||0==$.length)&&(_[Bo]=hE,c.push(_))}),n.set(_,E)});let h=0;return e.forEach(p=>fE(p,o[h++])),c}function gE(n,t){const e=new Map;if(n.forEach(h=>e.set(h,[])),0==t.length)return e;const i=new Set(t),o=new Map;function c(h){if(!h)return 1;let p=o.get(h);if(p)return p;const _=h.parentNode;return p=e.has(_)?_:i.has(_)?1:c(_),o.set(h,p),p}return t.forEach(h=>{const p=c(h);1!==p&&e.get(p).push(h)}),e}const wm="$$classes";function fa(n,t){if(n.classList)n.classList.add(t);else{let e=n[wm];e||(e=n[wm]={}),e[t]=!0}}function Kd(n,t){if(n.classList)n.classList.remove(t);else{let e=n[wm];e&&delete e[t]}}function ox(n,t,e){Gu(e).onDone(()=>n.processLeaveNode(t))}function mE(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof NC?mE(r.players,t):t.push(r)}}function Sv(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class Yf{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new nx(t,e,r),this._timelineEngine=new ex(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const c=t+"-"+i;let h=this._triggerCache[c];if(!h){const p=[],_=eE(this._driver,o,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);h=function(n,t,e){return new XA(n,t,e)}(i,_,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(e,i,h)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,c]=LC(r);this._timelineEngine.command(o,e,c,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[c,h]=LC(r);return this._timelineEngine.listen(c,e,h,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Dv(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=Cm(t[0]),t.length>1&&(r=Cm(t[t.length-1]))):t&&(e=Cm(t)),e||r?new yE(n,e,r):null}let yE=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Na(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Na(this._element,this._initialStyles),this._endStyles&&(Na(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(lc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lc(this._element,this._endStyles),this._endStyles=null),Na(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Cm(n){let t=null;const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=e[r];vE(i)&&(t=t||{},t[i]=n[i])}return t}function vE(n){return"display"===n||"position"===n}const Av="animation",Em="animationend";class Wu{constructor(t,e,r,i,o,c,h){this._element=t,this._name=e,this._duration=r,this._delay=i,this._easing=o,this._fillMode=c,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function(n,t){const e=Im(n,"").trim();let r=0;e.length&&(function(n,t){let e=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&e++;return e}(e)+1,t=`${e}, ${t}`),Qf(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ux(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){wE(this._element,this._name,"paused")}resume(){wE(this._element,this._name,"running")}setPosition(t){const e=cx(this._element,this._name);this._position=t*this._duration,Qf(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ux(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,t){const r=Im(n,"").split(","),i=Kf(r,t);i>=0&&(r.splice(i,1),Qf(n,"",r.join(",")))}(this._element,this._name))}}function wE(n,t,e){Qf(n,"PlayState",e,cx(n,t))}function cx(n,t){const e=Im(n,"");return e.indexOf(",")>0?Kf(e.split(","),t):Kf([e],t)}function Kf(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function ux(n,t,e){e?n.removeEventListener(Em,t):n.addEventListener(Em,t)}function Qf(n,t,e,r){const i=Av+t;if(null!=r){const o=n.style[i];if(o.length){const c=o.split(",");c[r]=e,e=c.join(",")}}n.style[i]=e}function Im(n,t){return n.style[Av+t]||""}class CE{constructor(t,e,r,i,o,c,h,p){this.element=t,this.keyframes=e,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=h,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=c||"linear",this.totalTime=i+o,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Wu(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(t[r]=e?this._finalStyles[r]:dm(this.element,r))})}this.currentSnapshot=t}}class hx extends Pf{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=jC(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Jf{constructor(){this._count=0}validateStyleProperty(t){return om(t)}matchesElement(t,e){return av(t,e)}containsElement(t,e){return lv(t,e)}query(t,e,r){return cv(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,r){r=r.map(h=>jC(h));let i=`@keyframes ${e} {\n`,o="";r.forEach(h=>{o=" ";const p=parseFloat(h.offset);i+=`${o}${100*p}% {\n`,o+=" ",Object.keys(h).forEach(_=>{const E=h[_];switch(_){case"offset":return;case"easing":return void(E&&(i+=`${o}animation-timing-function: ${E};\n`));default:return void(i+=`${o}${_}: ${E};\n`)}}),i+=`${o}}\n`}),i+="}\n";const c=document.createElement("style");return c.textContent=i,c}animate(t,e,r,i,o,c=[],h){const p=c.filter(rt=>rt instanceof CE),_={};YC(r,i)&&p.forEach(rt=>{let It=rt.currentSnapshot;Object.keys(It).forEach(jt=>_[jt]=It[jt])});const E=function(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(t[i]=r[i])})}),t}(e=gv(t,e,_));if(0==r)return new hx(t,E);const x="gen_css_kf_"+this._count++,$=this.buildKeyframeElement(t,x,e);(function(n){var e;const t=null==(e=n.getRootNode)?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(t).appendChild($);const ye=Dv(t,e),ze=new CE(t,e,x,r,i,o,E,ye);return ze.onDestroy(()=>{var n;(n=$).parentNode.removeChild(n)}),ze}}class IE{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:dm(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class TE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(kv().toString()),this._cssKeyframesDriver=new Jf}validateStyleProperty(t){return om(t)}matchesElement(t,e){return av(t,e)}containsElement(t,e){return lv(t,e)}query(t,e,r){return cv(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,r,i,o,c=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,r,i,o,c);const E={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(E.easing=o);const x={},$=c.filter(ye=>ye instanceof IE);YC(r,i)&&$.forEach(ye=>{let ze=ye.currentSnapshot;Object.keys(ze).forEach(rt=>x[rt]=ze[rt])});const se=Dv(t,e=gv(t,e=e.map(ye=>fl(ye,!1)),x));return new IE(t,e,E,se)}}function kv(){return im()&&Element.prototype.animate||{}}let DE=(()=>{class n extends tv{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?nv(e):e;return AE(this._renderer,null,r,"register",[i]),new fx(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class fx extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new px(this._id,t,e||{},this._renderer)}}class px{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return AE(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!=(e=null==(t=this._renderer.engine.players[+this.id])?void 0:t.getPosition())?e:0}}function AE(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const xE="@.disabled";let gx=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const h=null==c?void 0:c.parentNode(o);h&&c.removeChild(h,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(o);return E||(E=new ME("",o,this.engine),this._rendererCache.set(o,E)),E}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(c,h,e,E.name,E)};return r.data.animation.forEach(p),new Dm(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,h]=o;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(Yf),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class ME{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>e.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==xE?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Dm extends ME{constructor(t,e,r,i){super(e,r,i),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==xE?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.substr(1),c="";return"@"!=o.charAt(0)&&([o,c]=function(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(t,e,r)}}let OE=(()=>{class n extends Yf{constructor(e,r,i){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y),s.LFG(dv),s.LFG(Lo))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Vo=new s.OlP("AnimationModuleType"),PE=[{provide:tv,useClass:DE},{provide:Lo,useFactory:function(){return new oE}},{provide:Yf,useClass:OE},{provide:s.FYo,useFactory:function(n,t,e){return new gx(n,t,e)},deps:[ea,Yf,s.R0b]}],NE=[{provide:dv,useFactory:function(){return"function"==typeof kv()?new TE:new Jf}},{provide:Vo,useValue:"BrowserAnimations"},...PE],FE=[{provide:dv,useClass:uv},{provide:Vo,useValue:"NoopAnimations"},...PE];let Rv=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?FE:NE}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:NE,imports:[Fl]}),n})();function vx(n,t){if(1&n&&s._UZ(0,"mat-pseudo-checkbox",4),2&n){const e=s.oxw();s.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function bx(n,t){if(1&n&&(s.TgZ(0,"span",5),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.hij("(",e.group.label,")")}}const zN=["*"],Am=new s.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let xr=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Qw()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(kC),s.LFG(Am,8),s.LFG(Y))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Pd],Pd]}),n})();function Ov(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=cr(t)}}}function qu(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Pv(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=cr(t)}}}function Nv(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Vi(e):this.defaultTabIndex}}}function Fv(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new Wt.x,this.errorState=!1}updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}}}let np=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Mx{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Mm={enterDuration:225,exitDuration:150},km=Gg({passive:!0}),VE=["mousedown","touchstart"],UE=["mouseup","mouseleave","touchend","touchcancel"];class jE{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=rc(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Mt(Mt({},Mm),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const c=r.radius||function(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),h=t-i.left,p=e-i.top,_=o.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=h-c+"px",E.style.top=p-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(E),window.getComputedStyle(E).getPropertyValue("opacity"),E.style.transform="scale(1)";const x=new Mx(this,E,r);return x.state=0,this._activeRipples.add(x),r.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const $=x===this._mostRecentTransientRipple;x.state=1,!r.persistent&&(!$||!this._isPointerDown)&&x.fadeOut()},_),x}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,i=Mt(Mt({},Mm),t.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=rc(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(VE))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(UE),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=MC(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Xg(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,km)})})}_removeTriggerEvents(){this._triggerElement&&(VE.forEach(t=>{this._triggerElement.removeEventListener(t,this,km)}),this._pointerUpEventsRegistered&&UE.forEach(t=>{this._triggerElement.removeEventListener(t,this,km)}))}}const HE=new s.OlP("mat-ripple-global-options");let Rm=(()=>{class n{constructor(e,r,i,o,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new jE(this,r,e,i)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Mt(Mt(Mt({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,Mt(Mt({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Mt(Mt({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Qi),s.Y36(HE,8),s.Y36(Vo,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&s.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),zE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[xr],xr]}),n})(),GE=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Vo,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,r){2&e&&s.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),$E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[xr]]}),n})();const WE=new s.OlP("MAT_OPTION_PARENT_COMPONENT"),qE=new s.OlP("MatOptgroup");let Lv=0;class Bv{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let ZE=(()=>{class n{constructor(e,r,i,o){this._element=e,this._changeDetectorRef=r,this._parent=i,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Lv++,this.onSelectionChange=new s.vpe,this._stateChanges=new Wt.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=cr(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!al(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Bv(this,e))}}return n.\u0275fac=function(e){s.$Z()},n.\u0275dir=s.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),Om=(()=>{class n extends ZE{constructor(e,r,i,o){super(e,r,i,o)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(WE,8),s.Y36(qE,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,r){1&e&&s.NdJ("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&e&&(s.Ikx("id",r.id),s.uIk("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),s.ekj("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[s.qOj],ngContentSelectors:zN,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,r){1&e&&(s.F$t(),s.YNc(0,vx,1,2,"mat-pseudo-checkbox",0),s.TgZ(1,"span",1),s.Hsn(2),s.qZA(),s.YNc(3,bx,2,1,"span",2),s._UZ(4,"div",3)),2&e&&(s.Q6J("ngIf",r.multiple),s.xp6(3),s.Q6J("ngIf",r.group&&r.group._inert),s.xp6(1),s.Q6J("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},directives:[qr,Rm,GE],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function YE(n,t,e){if(e.length){let r=t.toArray(),i=e.toArray(),o=0;for(let c=0;c<n+1;c++)r[c].group&&r[c].group===i[o]&&o++;return o}return 0}let Pm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[zE,be,xr,$E]]}),n})();var Rs=R(3719);const KE=Nv(Ov(ic));let QE=(()=>{class n extends KE{constructor(e,r,i){super(e,r),this.tabIndex=Number(i)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(sl),s.$8M("tabindex"))},n.\u0275dir=s.lG2({type:n,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[s._Bn([{provide:ic,useExisting:n}]),s.qOj]}),n})(),Vv=(()=>{class n extends Fd{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[s._Bn([{provide:Fd,useExisting:n}]),s.qOj]}),n})(),Uv=(()=>{class n extends bf{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[s._Bn([{provide:bf,useExisting:n}]),s.qOj]}),n})(),JE=(()=>{class n{constructor(e,r){this.viewContainer=e,this._node=r}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(yo,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[s._Bn([{provide:Nd,useExisting:n}])]}),n})(),XE=(()=>{class n extends sl{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-tree"]],viewQuery:function(e,r){if(1&e&&s.Gf(JE,7),2&e){let i;s.iGM(i=s.CRH())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[s._Bn([{provide:sl,useExisting:n}]),s.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,r){1&e&&s.GkF(0,0)},directives:[JE],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),Jd=(()=>{class n extends Ww{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[s._Bn([{provide:Ww,useExisting:n}]),s.qOj]}),n})(),Xd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[QD,xr],xr]}),n})();class ip{constructor(t,e,r,i){this.transformFunction=t,this.getLevel=e,this.isExpandable=r,this.getChildren=i}_flattenNode(t,e,r,i){const o=this.transformFunction(t,e);if(r.push(o),this.isExpandable(o)){const c=this.getChildren(t);c&&(Array.isArray(c)?this._flattenChildren(c,e,r,i):c.pipe((0,Xn.q)(1)).subscribe(h=>{this._flattenChildren(h,e,r,i)}))}return r}_flattenChildren(t,e,r,i){t.forEach((o,c)=>{let h=i.slice();h.push(c!=t.length-1),this._flattenNode(o,e+1,r,h)})}flattenNodes(t){let e=[];return t.forEach(r=>this._flattenNode(r,0,e,[])),e}expandFlattenedNodes(t,e){let r=[],i=[];return i[0]=!0,t.forEach(o=>{let c=!0;for(let h=0;h<=this.getLevel(o);h++)c=c&&i[h];c&&r.push(o),this.isExpandable(o)&&(i[this.getLevel(o)+1]=e.isExpanded(o))}),r}}class Lx extends class{}{constructor(t,e,r){super(),this._treeControl=t,this._treeFlattener=e,this._flattenedData=new pi([]),this._expandedData=new pi([]),this._data=new pi([]),r&&(this.data=r)}get data(){return this._data.value}set data(t){this._data.next(t),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(t){return(0,Rs.T)(t.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,kt.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function jv(n,t){const e=(0,Ds.m)(n)?n:()=>n,r=i=>i.error(e());return new Pr.y(t?i=>t.schedule(r,0,i):r)}var Bx=R(1537);const Vx=["addListener","removeListener"],Ux=["addEventListener","removeEventListener"],jx=["on","off"];function ml(n,t,e,r){if((0,Ds.m)(e)&&(r=e,e=void 0),r)return ml(n,t,e).pipe(sa(r));const[i,o]=function(n){return(0,Ds.m)(n.addEventListener)&&(0,Ds.m)(n.removeEventListener)}(n)?Ux.map(c=>h=>n[c](t,h,e)):function(n){return(0,Ds.m)(n.addListener)&&(0,Ds.m)(n.removeListener)}(n)?Vx.map(Hv(n,t)):function(n){return(0,Ds.m)(n.on)&&(0,Ds.m)(n.off)}(n)?jx.map(Hv(n,t)):[];if(!i&&(0,Bx.z)(n))return(0,vr.z)(c=>ml(c,t,e))((0,Bi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Pr.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>o(h)})}function Hv(n,t){return e=>r=>n[e](t,r)}const Zc=new Pr.y(_f.Z),zx={connector:()=>new Wt.x};function tI(n,t=zx){const{connector:e}=t;return(0,Qr.e)((r,i)=>{const o=e();(0,Dr.D)(n(function(n){return new Pr.y(t=>n.subscribe(t))}(o))).subscribe(i),i.add(r.subscribe(o))})}function nI(n){return(0,kt.U)(()=>n)}function rI(n,t){return t?e=>Ro(t.pipe((0,Xn.q)(1),(0,Qr.e)((n,t)=>{n.subscribe(new lr.Q(t,_f.Z))})),e.pipe(rI(n))):(0,vr.z)((e,r)=>n(e,r).pipe((0,Xn.q)(1),nI(e)))}var Wx=R(7398);function Fm(n=0,t,e=Hc.P){let r=-1;return null!=t&&((0,Wx.K)(t)?e=t:r=t),new Pr.y(i=>{let o=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let c=0;return e.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}const Lm="Service workers are disabled or not supported by this browser";class Bm{constructor(t){if(this.serviceWorker=t,t){const r=ml(t,"controllerchange").pipe((0,kt.U)(()=>t.controller)),o=Ro(Ss(()=>xt(t.controller)),r);this.worker=o.pipe(kn(E=>!!E)),this.registration=this.worker.pipe(Ur(()=>t.getRegistration()));const _=ml(t,"message").pipe((0,kt.U)(E=>E.data)).pipe(kn(E=>E&&E.type)).pipe(function(n){return n?t=>tI(n)(t):t=>function(n,t){const e=(0,Ds.m)(n)?n:()=>n;return(0,Ds.m)(t)?tI(t,{connector:e}):r=>new $l(r,e)}(new Wt.x)(t)}());_.connect(),this.events=_}else this.worker=this.events=this.registration=(Lm,Ss(()=>jv(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(t,e){return this.worker.pipe((0,Xn.q)(1),(0,ki.b)(r=>{r.postMessage(Mt({action:t},e))})).toPromise().then(()=>{})}postMessageWithOperation(t,e,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(t,e);return Promise.all([o,i]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let e;return e="string"==typeof t?r=>r.type===t:r=>t.includes(r.type),this.events.pipe(kn(e))}nextEventOfType(t){return this.eventsOfType(t).pipe((0,Xn.q)(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(kn(e=>e.nonce===t),(0,Xn.q)(1),(0,kt.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let tF=(()=>{class n{constructor(e){if(this.sw=e,this.subscriptionChanges=new Wt.x,!e.isEnabled)return this.messages=Zc,this.notificationClicks=Zc,void(this.subscription=Zc);this.messages=this.sw.eventsOfType("PUSH").pipe((0,kt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,kt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,kt.U)(i=>i.pushManager));const r=this.pushManager.pipe(Ur(i=>i.getSubscription()));this.subscription=(0,Rs.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(Lm));const r={userVisibleOnly:!0};let i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c++)o[c]=i.charCodeAt(c);return r.applicationServerKey=o,this.pushManager.pipe(Ur(c=>c.subscribe(r)),(0,Xn.q)(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Xn.q)(1),Ur(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Lm))}decodeBase64(e){return atob(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Bm))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),$v=(()=>{class n{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=Zc,this.available=Zc,this.activated=Zc,void(this.unrecoverable=Zc);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(kn(r=>"VERSION_READY"===r.type),(0,kt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Lm));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Lm));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Bm))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class sI{}const Wv=new s.OlP("NGSW_REGISTER_SCRIPT");function qv(n,t,e,r){return()=>{if(!Qe(r)||!("serviceWorker"in navigator)||!1===e.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)o=e.registrationStrategy();else{const[h,...p]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":o=xt(null);break;case"registerWithDelay":o=Zv(+p[0]||0);break;case"registerWhenStable":o=p[0]?(0,Rs.T)(Yv(n),Zv(+p[0])):Yv(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.get(s.R0b).runOutsideAngular(()=>o.pipe((0,Xn.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function Zv(n){return xt(null).pipe(function(n,t=Hc.z){const e=Fm(n,t);return rI(()=>e)}(n))}function Yv(n){return n.get(s.z2F).isStable.pipe(kn(e=>e))}function qx(n,t){return new Bm(Qe(t)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let Zx=(()=>{class n{static register(e,r={}){return{ngModule:n,providers:[{provide:Wv,useValue:e},{provide:sI,useValue:r},{provide:Bm,useFactory:qx,deps:[sI,s.Lbi]},{provide:s.ip1,useFactory:qv,deps:[s.zs3,Wv,sI,s.Lbi],multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[tF,$v]}),n})();var Yc=R(6670),ae=R(4213),Fa=R(1572),La=R(3855),cc=R(1177),Xr=R(7233);R(7713);const Jv=(0,Xr.u3)(Yc.f,!0);function e0(){return(0,Qr.e)((n,t)=>{let e,r=!1;n.subscribe(new lr.Q(t,i=>{const o=e;e=i,r&&t.next([o,i]),r=!0}))})}var Qt,Os=R(7905),t0=(R(2115),R(6293)),ut=R(8239),bI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_l={},n0=n0||{},En=bI||self;function Gm(){}function $m(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function ih(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var Wm="closure_uid_"+(1e9*Math.random()>>>0),_M=0;function yM(n,t,e){return n.call.apply(n.bind,arguments)}function vM(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function is(n,t,e){return(is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yM:vM).apply(null,arguments)}function r0(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ps(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return t.prototype[i].apply(r,c)}}function Yu(){this.s=this.s,this.o=this.o}var kF={};Yu.prototype.s=!1,Yu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Wm)&&n[Wm]||(n[Wm]=++_M)}(this);delete kF[n]}},Yu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bM=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},wM=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&t.call(e,i[o],o,n)};function lp(n){return Array.prototype.concat.apply([],arguments)}function CI(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function sh(n){return/^[\s\xa0]*$/.test(n)}var eo,Ku=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ns(n,t){return-1!=n.indexOf(t)}function s0(n,t){return n<t?-1:n>t?1:0}e:{var qm=En.navigator;if(qm){var o0=qm.userAgent;if(o0){eo=o0;break e}}eo=""}function Zm(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function a0(n){const t={};for(const e in n)t[e]=n[e];return t}var CM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function l0(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let o=0;o<CM.length;o++)e=CM[o],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function oh(n){return oh[" "](n),n}oh[" "]=Gm;var Km,n,OF=Ns(eo,"Opera"),cp=Ns(eo,"Trident")||Ns(eo,"MSIE"),EM=Ns(eo,"Edge"),c0=EM||cp,Ym=Ns(eo,"Gecko")&&!(Ns(eo.toLowerCase(),"webkit")&&!Ns(eo,"Edge"))&&!(Ns(eo,"Trident")||Ns(eo,"MSIE"))&&!Ns(eo,"Edge"),IM=Ns(eo.toLowerCase(),"webkit")&&!Ns(eo,"Edge");function TM(){var n=En.document;return n?n.documentMode:void 0}e:{var up="",u0=(n=eo,Ym?/rv:([^\);]+)(\)|;)/.exec(n):EM?/Edge\/([\d\.]+)/.exec(n):cp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IM?/WebKit\/(\S+)/.exec(n):OF?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(u0&&(up=u0?u0[1]:""),cp){var to=TM();if(null!=to&&to>parseFloat(up)){Km=String(to);break e}}Km=up}var SM={};function d0(){return t=SM,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=Ku(String(Km)).split("."),e=Ku("9").split("."),r=Math.max(t.length,e.length);for(let c=0;0==n&&c<r;c++){var i=t[c]||"",o=e[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=s0(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||s0(0==i[2].length,0==o[2].length)||s0(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n}();var t}var f0=En.document&&cp&&(TM()||parseInt(Km,10))||void 0,TI=function(){if(!En.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{En.addEventListener("test",Gm,t),En.removeEventListener("test",Gm,t)}catch(e){}return n}();function ws(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function dp(n,t){if(ws.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Ym){e:{try{oh(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:SI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&dp.Z.h.call(this)}}ws.prototype.h=function(){this.defaultPrevented=!0},Ps(dp,ws);var SI={2:"touch",3:"pen",4:"mouse"};dp.prototype.h=function(){dp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ah="closure_listenable_"+(1e6*Math.random()|0),DM=0;function AM(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++DM,this.ca=this.fa=!1}function lh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function wo(n){this.src=n,this.g={},this.h=0}function p0(n,t){var e=t.type;if(e in n.g){var o,r=n.g[e],i=bM(r,t);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(lh(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function g0(n,t,e,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==t&&o.capture==!!e&&o.ia==r)return i}return-1}wo.prototype.add=function(n,t,e,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=g0(n,t,r,i);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new AM(t,this.src,o,!!r,i)).fa=e,n.push(t)),t};var m0="closure_lm_"+(1e6*Math.random()|0),Qm={};function DI(n,t,e,r,i){if(r&&r.once)return MI(n,t,e,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)DI(n,t[o],e,r,i);return null}return e=Qu(e),n&&n[ah]?n.N(t,e,ih(r)?!!r.capture:!!r,i):AI(n,t,e,!1,r,i)}function AI(n,t,e,r,i,o){if(!t)throw Error("Invalid event type");var c=ih(i)?!!i.capture:!!i,h=y0(n);if(h||(n[m0]=h=new wo(n)),(e=h.add(t,e,r,c,o)).proxy)return e;if(r=function(){var t=MM;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)TI||(i=c),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(_0(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function MI(n,t,e,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)MI(n,t[o],e,r,i);return null}return e=Qu(e),n&&n[ah]?n.O(t,e,ih(r)?!!r.capture:!!r,i):AI(n,t,e,!0,r,i)}function xM(n,t,e,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)xM(n,t[o],e,r,i);else r=ih(r)?!!r.capture:!!r,e=Qu(e),n&&n[ah]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=g0(o=n.g[t],e,r,i))&&(lh(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=y0(n))&&(t=n.g[t.toString()],n=-1,t&&(n=g0(t,e,r,i)),(e=-1<n?t[n]:null)&&Jm(e))}function Jm(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[ah])p0(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(_0(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=y0(t))?(p0(e,n),0==e.h&&(e.src=null,t[m0]=null)):lh(n)}}}function _0(n){return n in Qm?Qm[n]:Qm[n]="on"+n}function MM(n,t){if(n.ca)n=!0;else{t=new dp(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&Jm(n),n=e.call(r,t)}return n}function y0(n){return(n=n[m0])instanceof wo?n:null}var Xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qu(n){return"function"==typeof n?n:(n[Xm]||(n[Xm]=function(t){return n.handleEvent(t)}),n[Xm])}function ji(){Yu.call(this),this.i=new wo(this),this.P=this,this.I=null}function ss(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new ws(t,n);else if(t instanceof ws)t.target=t.target||n;else{var i=t;l0(t=new ws(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var c=t.g=e[o];i=e_(c,r,!0,t)&&i}if(i=e_(c=t.g=n,r,!0,t)&&i,i=e_(c,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=e_(c=t.g=e[o],r,!1,t)&&i}function e_(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var c=t[o];if(c&&!c.ca&&c.capture==e){var h=c.listener,p=c.ia||c.src;c.fa&&p0(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Ps(ji,Yu),ji.prototype[ah]=!0,ji.prototype.removeEventListener=function(n,t,e,r){xM(this,n,t,e,r)},ji.prototype.M=function(){if(ji.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)lh(e[r]);delete n.g[t],n.h--}}this.I=null},ji.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},ji.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var t_=En.JSON.stringify;function kI(){var n=OM;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var v0,RI=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new PF,n=>n.reset());class PF{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function NF(n){En.setTimeout(()=>{throw n},0)}function n_(n,t){v0||function(){var n=En.Promise.resolve(void 0);v0=function(){n.then(FF)}}(),b0||(v0(),b0=!0),OM.add(n,t)}var b0=!1,OM=new class{constructor(){this.h=this.g=null}add(t,e){const r=RI.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function FF(){for(var n;n=kI();){try{n.h.call(n.g)}catch(e){NF(e)}var t=RI;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}b0=!1}function w0(n,t){ji.call(this),this.h=n||1,this.g=t||En,this.j=is(this.kb,this),this.l=Date.now()}function OI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function PI(n,t,e){if("function"==typeof n)e&&(n=is(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=is(n.handleEvent,n)}return 2147483647<Number(t)?-1:En.setTimeout(n,t||0)}function NI(n){n.g=PI(()=>{n.g=null,n.i&&(n.i=!1,NI(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Ps(w0,ji),(Qt=w0.prototype).da=!1,Qt.S=null,Qt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ss(this,"tick"),this.da&&(OI(this),this.start()))}},Qt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qt.M=function(){w0.Z.M.call(this),OI(this),delete this.g};class r_ extends Yu{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:NI(this)}M(){super.M(),this.g&&(En.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hp(n){Yu.call(this),this.h=n,this.g={}}Ps(hp,Yu);var FI=[];function C0(n,t,e,r){Array.isArray(e)||(e&&(FI[0]=e.toString()),e=FI);for(var i=0;i<e.length;i++){var o=DI(t,e[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Kc(n){Zm(n.g,function(t,e){this.g.hasOwnProperty(e)&&Jm(t)},n),n.g={}}function fp(){this.g=!0}function ch(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return t_(e)}catch(h){return t}}(n,e)+(r?" "+r:"")})}hp.prototype.M=function(){hp.Z.M.call(this),Kc(this)},hp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fp.prototype.Aa=function(){this.g=!1},fp.prototype.info=function(){};var Qc={},D0=null;function A0(){return D0=D0||new ji}function PM(n){ws.call(this,Qc.Ma,n)}function i_(n){const t=A0();ss(t,new PM(t,n))}function NM(n,t){ws.call(this,Qc.STAT_EVENT,n),this.stat=t}function Co(n){const t=A0();ss(t,new NM(t,n))}function FM(n,t){ws.call(this,Qc.Na,n),this.size=t}function s_(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return En.setTimeout(function(){n()},t)}Qc.Ma="serverreachability",Ps(PM,ws),Qc.STAT_EVENT="statevent",Ps(NM,ws),Qc.Na="timingevent",Ps(FM,ws);var pp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},LI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function x0(){}function VI(){}x0.prototype.h=null;var M0,uh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function o_(){ws.call(this,"d")}function a_(){ws.call(this,"c")}function l_(){}function dh(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new hp(this),this.P=LM,this.W=new w0(n=c0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gp}function gp(){this.i=null,this.g="",this.h=!1}Ps(o_,ws),Ps(a_,ws),Ps(l_,x0),l_.prototype.g=function(){return new XMLHttpRequest},l_.prototype.i=function(){return{}},M0=new l_;var LM=45e3,c_={},Ju={};function k0(n,t,e){n.K=1,n.v=u(Jc(t)),n.s=e,n.U=!0,UI(n,null)}function UI(n,t){n.F=Date.now(),mp(n),n.A=Jc(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Yt(e.h,"t",r),n.C=0,e=n.l.H,n.h=new gp,n.g=nL(n.l,e?t:null,!n.s),0<n.O&&(n.L=new r_(is(n.Ia,n,n.g),n.O)),C0(n.V,n.g,"readystatechange",n.gb),t=n.H?a0(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),i_(1),function(n,t,e,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var E=_[0];_=_[1];var x=E.split("_");c=2<=x.length&&"type"==x[1]?c+(E+"=")+_+"&":c+(E+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function jI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function HI(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=LF(n,e),i==Ju){4==t&&(n.o=4,Co(14),r=!1),ch(n.j,n.m,null,"[Incomplete Response]");break}if(i==c_){n.o=4,Co(15),ch(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}ch(n.j,n.m,i,null),R0(n,i)}jI(n)&&i!=Ju&&i!=c_&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Co(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),$M(t),t.L=!0,Co(11))):(ch(n.j,n.m,e,"[Invalid Chunked Response]"),Xu(n),_p(n))}function LF(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?Ju:(e=Number(t.substring(e,r)),isNaN(e)?c_:(r+=1)+e>t.length?Ju:(t=t.substr(r,e),n.C=r+e,t))}function mp(n){n.Y=Date.now()+n.P,zI(n,n.P)}function zI(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=s_(is(n.eb,n),t)}function u_(n){n.B&&(En.clearTimeout(n.B),n.B=null)}function _p(n){0==n.l.G||n.I||JF(n.l,n)}function Xu(n){u_(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,OI(n.W),Kc(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function R0(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||vp(e.i,n)))if(e.I=n.N,!n.J&&vp(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=s_(is(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;KI(e),ZI(e)}GM(e),Co(18)}if(1>=d_(e.i)&&e.ka){try{e.ka()}catch(_){}e.ka=void 0}}else Cp(e,11)}else if((n.J||e.g==n)&&KI(e),!sh(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let _=i[t];if(e.U=_[0],_=_[1],2==e.G)if("c"==_[0]){e.J=_[1],e.la=_[2];const E=_[3];null!=E&&(e.ma=E,e.h.info("VER="+e.ma));const x=_[4];null!=x&&(e.za=x,e.h.info("SVER="+e.za));const $=_[5];null!=$&&"number"==typeof $&&0<$&&(e.K=r=1.5*$,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const se=n.g;if(se){const ye=se.g?se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var o=r.i;!o.g&&(Ns(ye,"spdy")||Ns(ye,"quic")||Ns(ye,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(bp(o,o.h),o.h=null))}if(r.D){const ze=se.g?se.g.getResponseHeader("X-HTTP-Session-Id"):null;ze&&(r.sa=ze,l(r.F,r.D,ze))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((r=e).oa=tL(r,r.H?r.la:null,r.W),c.J){h_(r.i,c);var h=c,p=r.K;p&&h.setTimeout(p),h.B&&(u_(h),mp(h)),r.g=c}else KF(r);0<e.l.length&&YI(e)}else"stop"!=_[0]&&"close"!=_[0]||Cp(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Cp(e,7):HM(e):"noop"!=_[0]&&e.j&&e.j.wa(_),e.A=0)}i_(4)}catch(_){}}function O0(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if($m(n)||"string"==typeof n)wM(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if($m(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if($m(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],e&&e[o],n)}}function yp(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof yp)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function GI(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];hh(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)hh(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function hh(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(Qt=dh.prototype).setTimeout=function(n){this.P=n},Qt.gb=function(n){n=n.target;const t=this.L;t&&3==td(n)?t.l():this.Ia(n)},Qt.Ia=function(n){try{if(n==this.g)e:{const E=td(this.g);var t=this.g.Da();const x=this.g.ba();if(!(3>E)&&(3!=E||c0||this.g&&(this.h.h||this.g.ga()||$F(this.g)))){this.I||4!=E||7==t||i_(8==t||0>=x?3:2),u_(this);var e=this.g.ba();this.N=e;t:if(jI(this)){var r=$F(this.g);n="";var i=r.length,o=4==td(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xu(this),_p(this);var c="";break t}this.h.i=new En.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,e),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sh(h)){var _=h;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,Co(12),Xu(this),_p(this);break e}ch(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,R0(this,e)}this.U?(HI(this,E,c),c0&&this.i&&3==E&&(C0(this.V,this.W,"tick",this.fb),this.W.start())):(ch(this.j,this.m,c,null),R0(this,c)),4==E&&Xu(this),this.i&&!this.I&&(4==E?JF(this.l,this):(this.i=!1,mp(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Co(12)):(this.o=0,Co(13)),Xu(this),_p(this)}}}catch(E){}},Qt.fb=function(){if(this.g){var n=td(this.g),t=this.g.ga();this.C<t.length&&(u_(this),HI(this,n,t),this.i&&4!=n&&mp(this))}},Qt.cancel=function(){this.I=!0,Xu(this)},Qt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(i_(3),Co(17)),Xu(this),this.o=2,_p(this)):zI(this,this.Y-n)},(Qt=yp.prototype).R=function(){GI(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},Qt.T=function(){return GI(this),this.g.concat()},Qt.get=function(n,t){return hh(this.h,n)?this.h[n]:t},Qt.set=function(n,t){hh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},Qt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],o=this.get(i);n.call(t,o,i,this)}};var VM=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ed(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ed){this.g=void 0!==t?t:n.g,P0(this,n.j),this.s=n.s,N0(this,n.i),F0(this,n.m),this.l=n.l,t=n.h;var e=new We;e.i=t.i,t.g&&(e.g=new yp(t.g),e.h=t.h),a(this,e),this.o=n.o}else n&&(e=String(n).match(VM))?(this.g=!!t,P0(this,e[1]||"",!0),this.s=g(e[2]||""),N0(this,e[3]||"",!0),F0(this,e[4]),this.l=g(e[5]||"",!0),a(this,e[6]||"",!0),this.o=g(e[7]||"")):(this.g=!!t,this.h=new We(null,this.g))}function Jc(n){return new ed(n)}function P0(n,t,e){n.j=e?g(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function N0(n,t,e){n.i=e?g(t,!0):t}function F0(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function a(n,t,e){t instanceof We?(n.h=t,function(n,t){t&&!n.j&&(at(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(Ct(this,r),Yt(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=v(t,ge)),n.h=new We(t,n.g))}function l(n,t,e){n.h.set(t,e)}function u(n){return l(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function g(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function v(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,C),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function C(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ed.prototype.toString=function(){var n=[],t=this.j;t&&n.push(v(t,D,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(v(t,D,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(v(e,"/"==e.charAt(0)?G:B,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",v(e,Pe)),n.join("")};var D=/[#\/\?@]/g,B=/[#\?:]/g,G=/[#\?]/g,ge=/[#\?@]/g,Pe=/#/g;function We(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function at(n){n.g||(n.g=new yp,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var o=n[e].substring(0,r);i=n[e].substring(r+1)}else o=n[e];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Ct(n,t){at(n),t=ft(n,t),hh(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,hh((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&GI(n)))}function At(n,t){return at(n),t=ft(n,t),hh(n.g.h,t)}function Yt(n,t,e){Ct(n,t),0<e.length&&(n.i=null,n.g.set(ft(n,t),CI(e)),n.h+=e.length)}function ft(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function Er(n){this.l=n||Uo,n=En.PerformanceNavigationTiming?0<(n=En.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(En.g&&En.g.Ea&&En.g.Ea()&&En.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qt=We.prototype).add=function(n,t){at(this),this.i=null,n=ft(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Qt.forEach=function(n,t){at(this),this.g.forEach(function(e,r){wM(e,function(i){n.call(t,i,r,this)},this)},this)},Qt.T=function(){at(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],o=0;o<i.length;o++)e.push(t[r]);return e},Qt.R=function(n){at(this);var t=[];if("string"==typeof n)At(this,n)&&(t=lp(t,this.g.get(ft(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=lp(t,n[e])}return t},Qt.set=function(n,t){return at(this),this.i=null,At(this,n=ft(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Qt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},Qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var c=i;""!==r[o]&&(c+="="+encodeURIComponent(String(r[o]))),n.push(c)}}return this.i=n.join("&")};var Uo=10;function Xc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function d_(n){return n.h?1:n.g?n.g.size:0}function vp(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function bp(n,t){n.g?n.g.add(t):n.h=t}function h_(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function f_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return CI(n.i)}function wp(){}function L0(){this.g=new wp}function B0(n,t,e){const r=e||"";try{O0(n,function(i,o){let c=i;ih(i)&&(c=t_(i)),t.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function $I(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function U0(n){this.l=n.$b||null,this.j=n.ib||!1}function WI(n,t){ji.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=UM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Er.prototype.cancel=function(){if(this.i=f_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},wp.prototype.stringify=function(n){return En.JSON.stringify(n,void 0)},wp.prototype.parse=function(n){return En.JSON.parse(n,void 0)},Ps(U0,x0),U0.prototype.g=function(){return new WI(this.l,this.j)},U0.prototype.i=function(n){return function(){return n}}({}),Ps(WI,ji);var UM=0;function VF(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function j0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,H0(n)}function H0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qt=WI.prototype).open=function(n,t){if(this.readyState!=UM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,H0(this)},Qt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||En).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,j0(this)),this.readyState=UM},Qt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,H0(this)),this.g&&(this.readyState=3,H0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==En.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VF(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?j0(this):H0(this),3==this.readyState&&VF(this)}},Qt.Ua=function(n){this.g&&(this.response=this.responseText=n,j0(this))},Qt.Ta=function(n){this.g&&(this.response=n,j0(this))},Qt.ha=function(){this.g&&j0(this)},Qt.setRequestHeader=function(n,t){this.v.append(n,t)},Qt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(WI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Xz=En.JSON.parse;function os(n){ji.call(this),this.headers=new yp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=UF,this.K=this.L=!1}Ps(os,ji);var UF="",eG=/^https?$/i,tG=["POST","PUT"];function rG(n){return"content-type"==n.toLowerCase()}function jF(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,HF(n),qI(n)}function HF(n){n.D||(n.D=!0,ss(n,"complete"),ss(n,"error"))}function zF(n){if(n.h&&void 0!==n0&&(!n.C[1]||4!=td(n)||2!=n.ba()))if(n.v&&4==td(n))PI(n.Fa,0,n);else if(ss(n,"readystatechange"),4==td(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===h){var i=String(n.H).match(VM)[1]||null;if(!i&&En.self&&En.self.location){var o=En.self.location.protocol;i=o.substr(0,o.length-1)}r=!eG.test(i?i.toLowerCase():"")}e=r}if(e)ss(n,"complete"),ss(n,"success");else{n.m=6;try{var c=2<td(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",HF(n)}}finally{qI(n)}}}function qI(n,t){if(n.g){GF(n);const e=n.g,r=n.C[0]?Gm:null;n.g=null,n.C=null,t||ss(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function GF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(En.clearTimeout(n.A),n.A=null)}function td(n){return n.g?n.g.readyState:0}function $F(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case UF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function jM(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return Zm(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):l(n,t,e))}function z0(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function WF(n){this.za=0,this.l=[],this.h=new fp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=z0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=z0("baseRetryDelayMs",5e3,n),this.$a=z0("retryDelaySeedMs",1e4,n),this.Ya=z0("forwardChannelMaxRetries",2,n),this.ra=z0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Er(n&&n.concurrentRequestLimit),this.Ca=new L0,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function HM(n){if(qF(n),3==n.G){var t=n.V++,e=Jc(n.F);l(e,"SID",n.J),l(e,"RID",t),l(e,"TYPE","terminate"),G0(n,e),(t=new dh(n,n.h,t,void 0)).K=2,t.v=u(Jc(e)),e=!1,En.navigator&&En.navigator.sendBeacon&&(e=En.navigator.sendBeacon(t.v.toString(),"")),!e&&En.Image&&((new Image).src=t.v,e=!0),e||(t.g=nL(t.l,null),t.g.ea(t.v)),t.F=Date.now(),mp(t)}eL(n)}function ZI(n){n.g&&($M(n),n.g.cancel(),n.g=null)}function qF(n){ZI(n),n.u&&(En.clearTimeout(n.u),n.u=null),KI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&En.clearTimeout(n.m),n.m=null)}function zM(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&YI(n)}function YI(n){Xc(n.i)||n.m||(n.m=!0,n_(n.Ha,n),n.C=0)}function ZF(n,t){var e;e=t?t.m:n.V++;const r=Jc(n.F);l(r,"SID",n.J),l(r,"RID",e),l(r,"AID",n.U),G0(n,r),n.o&&n.s&&jM(r,n.o,n.s),e=new dh(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=YF(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),bp(n.i,e),k0(e,r,t)}function G0(n,t){n.j&&O0({},function(e,r){l(t,r,e)})}function YF(n,t,e){e=Math.min(n.l.length,e);var r=n.j?is(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const c=["count="+e];-1==o?0<e?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let p=0;p<e;p++){let _=i[p].h;const E=i[p].g;if(_-=o,0>_)o=Math.max(0,i[p].h-100),h=!1;else try{B0(E,c,"req"+_+"_")}catch(x){r&&r(E)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function KF(n){n.g||n.u||(n.Y=1,n_(n.Ga,n),n.A=0)}function GM(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=s_(is(n.Ga,n),XF(n,n.A)),n.A++,0))}function $M(n){null!=n.B&&(En.clearTimeout(n.B),n.B=null)}function QF(n){n.g=new dh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Jc(n.oa);l(t,"RID","rpc"),l(t,"SID",n.J),l(t,"CI",n.N?"0":"1"),l(t,"AID",n.U),G0(n,t),l(t,"TYPE","xmlhttp"),n.o&&n.s&&jM(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=u(Jc(t)),e.s=null,e.U=!0,UI(e,n)}function KI(n){null!=n.v&&(En.clearTimeout(n.v),n.v=null)}function JF(n,t){var e=null;if(n.g==t){KI(n),$M(n),n.g=null;var r=2}else{if(!vp(n.i,t))return;e=t.D,h_(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;ss(r=A0(),new FM(r,e,t,i)),YI(n)}else KF(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(d_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=s_(is(n.Ha,n,t),XF(n,n.C)),n.C++,0)))}(n,t)||2==r&&GM(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:Cp(n,5);break;case 4:Cp(n,10);break;case 3:Cp(n,6);break;default:Cp(n,2)}}function XF(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Cp(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=is(n.jb,n);e||(e=new ed("//www.google.com/images/cleardot.gif"),En.location&&"http"==En.location.protocol||P0(e,"https"),u(e)),function(n,t){const e=new fp;if(En.Image){const r=new Image;r.onload=r0($I,e,r,"TestLoadImage: loaded",!0,t),r.onerror=r0($I,e,r,"TestLoadImage: error",!1,t),r.onabort=r0($I,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=r0($I,e,r,"TestLoadImage: timeout",!1,t),En.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else Co(2);n.G=0,n.j&&n.j.va(t),eL(n),qF(n)}function eL(n){n.G=0,n.I=-1,n.j&&((0!=f_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,CI(n.l),n.l.length=0),n.j.ua())}function tL(n,t,e){let r=function(n){return n instanceof ed?Jc(n):new ed(n,void 0)}(e);if(""!=r.i)t&&N0(r,t+"."+r.i),F0(r,r.m);else{const i=En.location;r=function(n,t,e,r){var i=new ed(null,void 0);return n&&P0(i,n),t&&N0(i,t),e&&F0(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&Zm(n.aa,function(i,o){l(r,o,i)}),e=n.sa,(t=n.D)&&e&&l(r,t,e),l(r,"VER",n.ma),G0(n,r),r}function nL(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new os(e&&n.Ba&&!n.qa?new U0({ib:!0}):n.qa)).L=n.H,t}function rL(){}function QI(){if(cp&&!(10<=Number(f0)))throw Error("Environmental error: no available transport.")}function Ba(n,t){ji.call(this),this.g=new WF(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!sh(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sh(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new p_(this)}function iL(n){o_.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function sL(){a_.call(this),this.status=1}function p_(n){this.g=n}(Qt=os.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():M0.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:M0),this.g.onreadystatechange=is(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void jF(this,o)}n=e||"";const i=new yp(this.headers);r&&O0(r,function(o,c){i.set(c,o)}),r=function(n){e:{var t=rG;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=En.FormData&&n instanceof En.FormData,!(0<=bM(tG,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{GF(this),0<this.B&&((this.K=function(n){return cp&&d0()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=is(this.pa,this)):this.A=PI(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){jF(this,o)}},Qt.pa=function(){void 0!==n0&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ss(this,"timeout"),this.abort(8))},Qt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ss(this,"complete"),ss(this,"abort"),qI(this))},Qt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qI(this,!0)),os.Z.M.call(this)},Qt.Fa=function(){this.s||(this.F||this.v||this.l?zF(this):this.cb())},Qt.cb=function(){zF(this)},Qt.ba=function(){try{return 2<td(this)?this.g.status:-1}catch(n){return-1}},Qt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Qt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),Xz(t)}},Qt.Da=function(){return this.m},Qt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qt=WF.prototype).ma=8,Qt.G=1,Qt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},Qt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new dh(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=a0(o),l0(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=YF(this,i,t),l(e=Jc(this.F),"RID",n),l(e,"CVER",22),this.D&&l(e,"X-HTTP-Session-Id",this.D),G0(this,e),this.o&&o&&jM(e,this.o,o),bp(this.i,i),this.Ra&&l(e,"TYPE","init"),this.ja?(l(e,"$req",t),l(e,"SID","null"),i.$=!0,k0(i,e,null)):k0(i,e,t),this.G=2}}else 3==this.G&&(n?ZF(this,n):0==this.l.length||Xc(this.i)||ZF(this))},Qt.Ga=function(){if(this.u=null,QF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=s_(is(this.bb,this),n)}},Qt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Co(10),ZI(this),QF(this))},Qt.ab=function(){null!=this.v&&(this.v=null,ZI(this),GM(this),Co(19))},Qt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Co(2)):(this.h.info("Failed to ping google.com"),Co(1))},(Qt=rL.prototype).xa=function(){},Qt.wa=function(){},Qt.va=function(){},Qt.ua=function(){},Qt.Oa=function(){},QI.prototype.g=function(n,t){return new Ba(n,t)},Ps(Ba,ji),Ba.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),n_(is(n.hb,n,t))),Co(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=tL(n,null,n.W),YI(n)},Ba.prototype.close=function(){HM(this.g)},Ba.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,zM(this.g,t)}else this.v?((t={}).__data__=t_(n),zM(this.g,t)):zM(this.g,n)},Ba.prototype.M=function(){this.g.j=null,delete this.j,HM(this.g),delete this.g,Ba.Z.M.call(this)},Ps(iL,o_),Ps(sL,a_),Ps(p_,rL),p_.prototype.xa=function(){ss(this.g,"a")},p_.prototype.wa=function(n){ss(this.g,new iL(n))},p_.prototype.va=function(n){ss(this.g,new sL(n))},p_.prototype.ua=function(){ss(this.g,"b")},QI.prototype.createWebChannel=QI.prototype.g,Ba.prototype.send=Ba.prototype.u,Ba.prototype.open=Ba.prototype.m,Ba.prototype.close=Ba.prototype.close,pp.NO_ERROR=0,pp.TIMEOUT=8,pp.HTTP_ERROR=6,LI.COMPLETE="complete",VI.EventType=uh,uh.OPEN="a",uh.CLOSE="b",uh.ERROR="c",uh.MESSAGE="d",ji.prototype.listen=ji.prototype.N,os.prototype.listenOnce=os.prototype.O,os.prototype.getLastError=os.prototype.La,os.prototype.getLastErrorCode=os.prototype.Da,os.prototype.getStatus=os.prototype.ba,os.prototype.getResponseJson=os.prototype.Qa,os.prototype.getResponseText=os.prototype.ga,os.prototype.send=os.prototype.ea;var oG=_l.createWebChannelTransport=function(){return new QI},aG=_l.getStatEventTarget=function(){return A0()},WM=_l.ErrorCode=pp,lG=_l.EventType=LI,cG=_l.Event=Qc,oL=_l.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uG=_l.FetchXmlHttpFactory=U0,JI=_l.WebChannel=VI,dG=_l.XhrIo=os;const aL="@firebase/firestore";class no{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}no.UNAUTHENTICATED=new no(null),no.GOOGLE_CREDENTIALS=new no("google-credentials-uid"),no.FIRST_PARTY=new no("first-party-uid"),no.MOCK_USER=new no("mock-user");let g_="9.8.0";const fh=new La.Yd("@firebase/firestore");function qM(){return fh.logLevel}function Et(n,...t){if(fh.logLevel<=La.in.DEBUG){const e=t.map(ZM);fh.debug(`Firestore (${g_}): ${n}`,...e)}}function as(n,...t){if(fh.logLevel<=La.in.ERROR){const e=t.map(ZM);fh.error(`Firestore (${g_}): ${n}`,...e)}}function $0(n,...t){if(fh.logLevel<=La.in.WARN){const e=t.map(ZM);fh.warn(`Firestore (${g_}): ${n}`,...e)}}function ZM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function nn(n="Unexpected state"){const t=`FIRESTORE (${g_}) INTERNAL ASSERTION FAILED: `+n;throw as(t),new Error(t)}function Tn(n,t){n||nn()}function zt(n,t){return n}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends ae.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class lL{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(no.UNAUTHENTICATED))}shutdown(){}}class gG{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class mG{constructor(t){this.t=t,this.currentUser=no.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const o=_=>this.i!==i?(i=this.i,e(_)):Promise.resolve();let c=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fs,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const _=c;t.enqueueRetryable((0,ut.Z)(function*(){yield _.promise,yield o(r.currentUser)}))},p=_=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fs)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tn("string"==typeof r.accessToken),new lL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Tn(null===t||"string"==typeof t),new no(t)}}class _G{constructor(t,e,r){this.type="FirstParty",this.user=no.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class yG{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new _G(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(no.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cL{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vG{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=o=>{null!=o.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,Et("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Tn("string"==typeof e.token),this.p=e.token,new cL(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Va{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function bG(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Va.A=-1;class uL{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=bG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<e&&(r+=t.charAt(i[o]%t.length))}return r}}function jn(n,t){return n<t?-1:n>t?1:0}function m_(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function dL(n){return n+"\0"}class Xi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new vt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new vt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new vt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Xi.fromMillis(Date.now())}static fromDate(t){return Xi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Xi(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?jn(this.nanoseconds,t.nanoseconds):jn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new wn(t)}static min(){return new wn(new Xi(0,0))}static max(){return new wn(new Xi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function hL(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ep(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function fL(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class W0{constructor(t,e,r){void 0===e?e=0:e>t.length&&nn(),void 0===r?r=t.length-e:r>t.length-e&&nn(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===W0.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof W0?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const o=t.get(i),c=e.get(i);if(o<c)return-1;if(o>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class br extends W0{construct(t,e,r){return new br(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new br(e)}static emptyPath(){return new br([])}}const wG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cs extends W0{construct(t,e,r){return new Cs(t,e,r)}static isValidIdentifier(t){return wG.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cs.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cs(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const o=()=>{if(0===r.length)throw new vt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;i<t.length;){const h=t[i];if("\\"===h){if(i+1===t.length)throw new vt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new vt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new vt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Cs(e)}static emptyPath(){return new Cs([])}}class __{constructor(t){this.fields=t,t.sort(Cs.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return m_(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class Es{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Es(e)}static fromUint8Array(t){const e=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new Es(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Es.EMPTY_BYTE_STRING=new Es("");const EG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ph(n){if(Tn(!!n),"string"==typeof n){let t=0;const e=EG.exec(n);if(Tn(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Hi(n.seconds),nanos:Hi(n.nanos)}}function Hi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ip(n){return"string"==typeof n?Es.fromBase64String(n):Es.fromUint8Array(n)}function YM(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function pL(n){const t=n.mapValue.fields.__previous_value__;return YM(t)?pL(t):t}function q0(n){const t=ph(n.mapValue.fields.__local_write_time__.timestampValue);return new Xi(t.seconds,t.nanos)}class IG{constructor(t,e,r,i,o,c,h,p){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class nd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new nd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof nd&&t.projectId===this.projectId&&t.database===this.database}}function Z0(n){return null==n}function Y0(n){return 0===n&&1/n==-1/0}function gL(n){return"number"==typeof n&&Number.isInteger(n)&&!Y0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Nt{constructor(t){this.path=t}static fromPath(t){return new Nt(br.fromString(t))}static fromName(t){return new Nt(br.fromString(t).popFirst(5))}static empty(){return new Nt(br.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===br.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return br.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Nt(new br(t.slice()))}}const gh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},XI={nullValue:"NULL_VALUE"};function Tp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YM(n)?4:vL(n)?9007199254740991:10:nn()}function eu(n,t){if(n===t)return!0;const e=Tp(n);if(e!==Tp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return q0(n).isEqual(q0(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ph(r.timestampValue),c=ph(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,Ip(n.bytesValue).isEqual(Ip(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Hi(r.geoPointValue.latitude)===Hi(i.geoPointValue.latitude)&&Hi(r.geoPointValue.longitude)===Hi(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Hi(r.integerValue)===Hi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Hi(r.doubleValue),c=Hi(i.doubleValue);return o===c?Y0(o)===Y0(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return m_(n.arrayValue.values||[],t.arrayValue.values||[],eu);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(hL(o)!==hL(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!eu(o[h],c[h])))return!1;return!0}(n,t);default:return nn()}var i}function K0(n,t){return void 0!==(n.values||[]).find(e=>eu(e,t))}function mh(n,t){if(n===t)return 0;const e=Tp(n),r=Tp(t);if(e!==r)return jn(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return jn(n.booleanValue,t.booleanValue);case 2:return function(i,o){const c=Hi(i.integerValue||i.doubleValue),h=Hi(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return mL(n.timestampValue,t.timestampValue);case 4:return mL(q0(n),q0(t));case 5:return jn(n.stringValue,t.stringValue);case 6:return function(i,o){const c=Ip(i),h=Ip(o);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let p=0;p<c.length&&p<h.length;p++){const _=jn(c[p],h[p]);if(0!==_)return _}return jn(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,o){const c=jn(Hi(i.latitude),Hi(o.latitude));return 0!==c?c:jn(Hi(i.longitude),Hi(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let p=0;p<c.length&&p<h.length;++p){const _=mh(c[p],h[p]);if(_)return _}return jn(c.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===gh.mapValue&&o===gh.mapValue)return 0;if(i===gh.mapValue)return 1;if(o===gh.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=o.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let E=0;E<h.length&&E<_.length;++E){const x=jn(h[E],_[E]);if(0!==x)return x;const $=mh(c[h[E]],p[_[E]]);if(0!==$)return $}return jn(h.length,_.length)}(n.mapValue,t.mapValue);default:throw nn()}}function mL(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return jn(n,t);const e=ph(n),r=ph(t),i=jn(e.seconds,r.seconds);return 0!==i?i:jn(e.nanos,r.nanos)}function y_(n){return KM(n)}function KM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ph(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ip(n.bytesValue).toBase64():"referenceValue"in n?Nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=KM(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${KM(r.fields[h])}`;return o+"}"}(n.mapValue):nn();var t}function Sp(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function QM(n){return!!n&&"integerValue"in n}function Q0(n){return!!n&&"arrayValue"in n}function _L(n){return!!n&&"nullValue"in n}function yL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eT(n){return!!n&&"mapValue"in n}function J0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Ep(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=J0(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=J0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function vL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TG(n){return"nullValue"in n?XI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sp(nd.empty(),Nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nn()}function SG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sp(nd.empty(),Nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gh:nn()}function bL(n,t){const e=mh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function wL(n,t){const e=mh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Eo{constructor(t){this.value=t}static empty(){return new Eo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!eT(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=J0(e)}setAll(t){let e=Cs.emptyPath(),r={},i=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,r,i),r={},i=[],e=h.popLast()}c?r[h.lastSegment()]=J0(c):i.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,r,i)}delete(t){const e=this.field(t.popLast());eT(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return eu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];eT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Ep(e,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new Eo(J0(this.value))}}function CL(n){const t=[];return Ep(n.fields,(e,r)=>{const i=new Cs([e]);if(eT(r)){const o=CL(r.mapValue).fields;if(0===o.length)t.push(i);else for(const c of o)t.push(i.child(c))}else t.push(i)}),new __(t)}class mi{constructor(t,e,r,i,o,c){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(t){return new mi(t,0,wn.min(),wn.min(),Eo.empty(),0)}static newFoundDocument(t,e,r){return new mi(t,1,e,wn.min(),r,0)}static newNoDocument(t,e){return new mi(t,2,e,wn.min(),Eo.empty(),0)}static newUnknownDocument(t,e){return new mi(t,3,e,wn.min(),Eo.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Eo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof mi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tT{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function JM(n){return n.fields.find(t=>2===t.kind)}function Dp(n){return n.fields.filter(t=>2!==t.kind)}tT.UNKNOWN_ID=-1;class nT{constructor(t,e){this.fieldPath=t,this.kind=e}}class X0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new X0(0,dc.min())}}function EL(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=wn.fromTimestamp(1e9===r?new Xi(e+1,0):new Xi(e,r));return new dc(i,Nt.empty(),t)}function DG(n){return new dc(n.readTime,n.key,-1)}class dc{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new dc(wn.min(),Nt.empty(),-1)}static max(){return new dc(wn.max(),Nt.empty(),-1)}}function IL(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Nt.comparator(n.documentKey,t.documentKey),0!==e?e:jn(n.largestBatchId,t.largestBatchId))}class es{constructor(t,e){this.comparator=t,this.root=e||ro.EMPTY}insert(t,e){return new es(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ro.BLACK,null,null))}remove(t){return new es(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ro.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rT(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rT(this.root,t,this.comparator,!1)}getReverseIterator(){return new rT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rT(this.root,t,this.comparator,!0)}}class rT{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ro{constructor(t,e,r,i,o){this.key=t,this.value=e,this.color=null!=r?r:ro.RED,this.left=null!=i?i:ro.EMPTY,this.right=null!=o?o:ro.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,o){return new ro(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===o?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ro.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ro.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ro.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ro.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nn();const t=this.left.check();if(t!==this.right.check())throw nn();return t+(this.isRed()?0:1)}}ro.EMPTY=null,ro.RED=!0,ro.BLACK=!1,ro.EMPTY=new class{constructor(){this.size=0}get key(){throw nn()}get value(){throw nn()}get color(){throw nn()}get left(){throw nn()}get right(){throw nn()}copy(n,t,e,r,i){return this}insert(n,t,e){return new ro(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class di{constructor(t){this.comparator=t,this.data=new es(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new TL(this.data.getIterator())}getIteratorFrom(t){return new TL(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof di)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new di(this.comparator);return e.data=t,e}}class TL{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function v_(n){return n.hasNext()?n.getNext():void 0}class AG{constructor(t,e=null,r=[],i=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.P=null}}function SL(n,t=null,e=[],r=[],i=null,o=null,c=null){return new AG(n,t,e,r,i,o,c)}function Ap(n){const t=zt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+y_(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Z0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>y_(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>y_(r)).join(",")),t.P=e}return t.P}function eb(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!LG(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!eu(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!kL(n.startAt,t.startAt)&&kL(n.endAt,t.endAt)}function iT(n){return Nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sT(n,t){return n.filters.filter(e=>e instanceof io&&e.field.isEqual(t))}function DL(n,t,e){let r=XI,i=!0;for(const o of sT(n,t)){let c=XI,h=!0;switch(o.op){case"<":case"<=":c=TG(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=XI}bL({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];bL({value:r,inclusive:i},{value:c,inclusive:e.inclusive})<0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}function AL(n,t,e){let r=gh,i=!0;for(const o of sT(n,t)){let c=gh,h=!0;switch(o.op){case">=":case">":c=SG(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=gh}wL({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];wL({value:r,inclusive:i},{value:c,inclusive:e.inclusive})>0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}class io extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new MG(t,e,r):"array-contains"===e?new OG(t,r):"in"===e?new PG(t,r):"not-in"===e?new NG(t,r):"array-contains-any"===e?new FG(t,r):new io(t,e,r)}static V(t,e,r){return"in"===e?new kG(t,r):new RG(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(mh(e,this.value)):null!==e&&Tp(this.value)===Tp(e)&&this.v(mh(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return nn()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class MG extends io{constructor(t,e,r){super(t,e,r),this.key=Nt.fromName(r.referenceValue)}matches(t){const e=Nt.comparator(t.key,this.key);return this.v(e)}}class kG extends io{constructor(t,e){super(t,"in",e),this.keys=xL(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class RG extends io{constructor(t,e){super(t,"not-in",e),this.keys=xL(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function xL(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>Nt.fromName(r.referenceValue))}class OG extends io{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Q0(e)&&K0(e.arrayValue,this.value)}}class PG extends io{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&K0(this.value.arrayValue,e)}}class NG extends io{constructor(t,e){super(t,"not-in",e)}matches(t){if(K0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!K0(this.value.arrayValue,e)}}class FG extends io{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Q0(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>K0(this.value.arrayValue,r))}}class _h{constructor(t,e){this.position=t,this.inclusive=e}}class b_{constructor(t,e="asc"){this.field=t,this.dir=e}}function LG(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function ML(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const o=t[i],c=n.position[i];if(r=o.field.isKeyField()?Nt.comparator(Nt.fromName(c.referenceValue),e.key):mh(c,e.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function kL(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!eu(n.position[e],t.position[e]))return!1;return!0}class rd{constructor(t,e=null,r=[],i=[],o=null,c="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function RL(n,t,e,r,i,o,c,h){return new rd(n,t,e,r,i,o,c,h)}function w_(n){return new rd(n)}function XM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function e1(n){for(const t of n.filters)if(t.S())return t.field;return null}function t1(n){return null!==n.collectionGroup}function C_(n){const t=zt(n);if(null===t.D){t.D=[];const e=e1(t),r=XM(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new b_(e)),t.D.push(new b_(Cs.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.D.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new b_(Cs.keyField(),o))}}}return t.D}function yl(n){const t=zt(n);if(!t.C)if("F"===t.limitType)t.C=SL(t.path,t.collectionGroup,C_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of C_(t))e.push(new b_(o.field,"desc"===o.dir?"asc":"desc"));const r=t.endAt?new _h(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new _h(t.startAt.position,t.startAt.inclusive):null;t.C=SL(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function OL(n,t,e){return new rd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function tb(n,t){return eb(yl(n),yl(t))&&n.limitType===t.limitType}function PL(n){return`${Ap(yl(n))}|lt:${n.limitType}`}function n1(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${y_(r.value)}`;var r}).join(", ")}]`),Z0(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>y_(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>y_(e)).join(",")),`Target(${t})`}(yl(n))}; limitType=${n.limitType})`}function r1(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):Nt.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,o,c){const h=ML(i,o,c);return i.inclusive?h<=0:h<0}(e.startAt,C_(e),r)||e.endAt&&!function(i,o,c){const h=ML(i,o,c);return i.inclusive?h>=0:h>0}(e.endAt,C_(e),r)));var e,r}function NL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FL(n){return(t,e)=>{let r=!1;for(const i of C_(n)){const o=VG(i,t,e);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function VG(n,t,e){const r=n.field.isKeyField()?Nt.comparator(t.key,e.key):function(i,o,c){const h=o.data.field(i),p=c.data.field(i);return null!==h&&null!==p?mh(h,p):nn()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nn()}}function LL(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Y0(t)?"-0":t}}function BL(n){return{integerValue:""+n}}function VL(n,t){return gL(t)?BL(t):LL(n,t)}class oT{constructor(){this._=void 0}}function UG(n,t,e){return n instanceof E_?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(e,t):n instanceof xp?jL(n,t):n instanceof Mp?HL(n,t):function(r,i){const o=UL(r,i),c=zL(o)+zL(r.k);return QM(o)&&QM(r.k)?BL(c):LL(r.M,c)}(n,t)}function jG(n,t,e){return n instanceof xp?jL(n,t):n instanceof Mp?HL(n,t):e}function UL(n,t){return n instanceof I_?QM(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class E_ extends oT{}class xp extends oT{constructor(t){super(),this.elements=t}}function jL(n,t){const e=GL(t);for(const r of n.elements)e.some(i=>eu(i,r))||e.push(r);return{arrayValue:{values:e}}}class Mp extends oT{constructor(t){super(),this.elements=t}}function HL(n,t){let e=GL(t);for(const r of n.elements)e=e.filter(i=>!eu(i,r));return{arrayValue:{values:e}}}class I_ extends oT{constructor(t,e){super(),this.M=t,this.k=e}}function zL(n){return Hi(n.integerValue||n.doubleValue)}function GL(n){return Q0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nb{constructor(t,e){this.field=t,this.transform=e}}class zG{constructor(t,e){this.version=t,this.transformResults=e}}class ls{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ls}static exists(t){return new ls(void 0,t)}static updateTime(t){return new ls(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function aT(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class lT{}function GG(n,t,e){n instanceof rb?function(r,i,o){const c=r.value.clone(),h=ZL(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof kp?function(r,i,o){if(!aT(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=ZL(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(qL(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function s1(n,t,e){var i;n instanceof rb?function(r,i,o){if(!aT(r.precondition,i))return;const c=r.value.clone(),h=YL(r.fieldTransforms,o,i);c.setAll(h),i.convertToFoundDocument(WL(i),c).setHasLocalMutations()}(n,t,e):n instanceof kp?function(r,i,o){if(!aT(r.precondition,i))return;const c=YL(r.fieldTransforms,o,i),h=i.data;h.setAll(qL(r)),h.setAll(c),i.convertToFoundDocument(WL(i),h).setHasLocalMutations()}(n,t,e):aT(n.precondition,i=t)&&i.convertToNoDocument(wn.min())}function $G(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),o=UL(r.transform,i||null);null!=o&&(null==e&&(e=Eo.empty()),e.set(r.field,o))}return e||null}function $L(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&m_(e,r,(i,o)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof xp&&r instanceof xp||e instanceof Mp&&r instanceof Mp?m_(e.elements,r.elements,eu):e instanceof I_&&r instanceof I_?eu(e.k,r.k):e instanceof E_&&r instanceof E_);var e,r}(i,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function WL(n){return n.isFoundDocument()?n.version:wn.min()}class rb extends lT{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class kp extends lT{constructor(t,e,r,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}}function qL(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function ZL(n,t,e){const r=new Map;Tn(n.length===e.length);for(let i=0;i<e.length;i++){const o=n[i],c=o.transform,h=t.data.field(o.field);r.set(o.field,jG(c,h,e[i]))}return r}function YL(n,t,e){const r=new Map;for(const i of n){const o=i.transform,c=e.data.field(i.field);r.set(i.field,UG(o,c,t))}return r}class ib extends lT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class o1 extends lT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class WG{constructor(t){this.count=t}}var cs,wr;function KL(n){switch(n){default:return nn();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function QL(n){if(void 0===n)return as("GRPC error has no .code"),nt.UNKNOWN;switch(n){case cs.OK:return nt.OK;case cs.CANCELLED:return nt.CANCELLED;case cs.UNKNOWN:return nt.UNKNOWN;case cs.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case cs.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case cs.INTERNAL:return nt.INTERNAL;case cs.UNAVAILABLE:return nt.UNAVAILABLE;case cs.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case cs.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case cs.NOT_FOUND:return nt.NOT_FOUND;case cs.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case cs.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case cs.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case cs.ABORTED:return nt.ABORTED;case cs.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case cs.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case cs.DATA_LOSS:return nt.DATA_LOSS;default:return nn()}}(wr=cs||(cs={}))[wr.OK=0]="OK",wr[wr.CANCELLED=1]="CANCELLED",wr[wr.UNKNOWN=2]="UNKNOWN",wr[wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wr[wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wr[wr.NOT_FOUND=5]="NOT_FOUND",wr[wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",wr[wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",wr[wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",wr[wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wr[wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wr[wr.ABORTED=10]="ABORTED",wr[wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",wr[wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",wr[wr.INTERNAL=13]="INTERNAL",wr[wr.UNAVAILABLE=14]="UNAVAILABLE",wr[wr.DATA_LOSS=15]="DATA_LOSS";class yh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ep(this.inner,(e,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return fL(this.inner)}size(){return this.innerSize}}const qG=new es(Nt.comparator);function vl(){return qG}const ZG=new es(Nt.comparator);function a1(...n){let t=ZG;for(const e of n)t=t.insert(e.key,e);return t}function sb(){return new yh(n=>n.toString(),(n,t)=>n.isEqual(t))}const YG=new es(Nt.comparator),KG=new di(Nt.comparator);function zr(...n){let t=KG;for(const e of n)t=t.add(e);return t}const QG=new di(jn);function cT(){return QG}class ob{constructor(t,e,r,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,ab.createSynthesizedTargetChangeForCurrentChange(t,e)),new ob(wn.min(),r,cT(),vl(),zr())}}class ab{constructor(t,e,r,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e){return new ab(Es.EMPTY_BYTE_STRING,e,zr(),zr(),zr())}}class uT{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class JL{constructor(t,e){this.targetId=t,this.$=e}}class XL{constructor(t,e,r=Es.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class e2{constructor(){this.B=0,this.L=n2(),this.U=Es.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=zr(),e=zr(),r=zr();return this.L.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:nn()}}),new ab(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=n2()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class JG{constructor(t){this.nt=t,this.st=new Map,this.it=vl(),this.rt=t2(),this.ot=new di(jn)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:nn()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const o=i.target;if(iT(o))if(0===r){const c=new Nt(o.path);this.ct(e,c,mi.newNoDocument(c,wn.min()))}else Tn(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((o,c)=>{const h=this.wt(c);if(h){if(o.current&&iT(h.target)){const p=new Nt(h.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,mi.newNoDocument(p,t))}o.j&&(e.set(c,o.H()),o.J())}});let r=zr();this.rt.forEach((o,c)=>{let h=!0;c.forEachWhile(p=>{const _=this.wt(p);return!_||2===_.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.it.forEach((o,c)=>c.setReadTime(t));const i=new ob(t,e,this.ot,this.it,r);return this.it=vl(),this.rt=t2(),this.ot=new di(jn),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new e2,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new di(jn),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Et("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new e2),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function t2(){return new es(Nt.comparator)}function n2(){return new es(Nt.comparator)}const XG={asc:"ASCENDING",desc:"DESCENDING"},e6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class t6{constructor(t,e){this.databaseId=t,this.N=e}}function lb(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function r2(n,t){return n.N?t.toBase64():t.toUint8Array()}function n6(n,t){return lb(n,t.toTimestamp())}function Ls(n){return Tn(!!n),wn.fromTimestamp(function(t){const e=ph(t);return new Xi(e.seconds,e.nanos)}(n))}function l1(n,t){return(e=n,new br(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function s2(n){const t=br.fromString(n);return Tn(p2(t)),t}function cb(n,t){return l1(n.databaseId,t.path)}function tu(n,t){const e=s2(t);if(e.get(1)!==n.databaseId.projectId)throw new vt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new vt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Nt(a2(e))}function c1(n,t){return l1(n.databaseId,t)}function o2(n){const t=s2(n);return 4===t.length?br.emptyPath():a2(t)}function ub(n){return new br(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a2(n){return Tn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function l2(n,t,e){return{name:cb(n,t),fields:e.value.mapValue.fields}}function c2(n,t,e){const r=tu(n,t.name),i=Ls(t.updateTime),o=new Eo({mapValue:{fields:t.fields}}),c=mi.newFoundDocument(r,i,o);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function db(n,t){let e;if(t instanceof rb)e={update:l2(n,t.key,t.value)};else if(t instanceof ib)e={delete:cb(n,t.key)};else if(t instanceof kp)e={update:l2(n,t.key,t.data),updateMask:d6(t.fieldMask)};else{if(!(t instanceof o1))return nn();e={verify:cb(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof E_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof I_)return{fieldPath:o.field.canonicalString(),increment:c.k};throw nn()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:n6(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nn()),e;var i}function u1(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?ls.updateTime(Ls(i.updateTime)):void 0!==i.exists?ls.exists(i.exists):ls.none():ls.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(Tn("REQUEST_TIME"===c.setToServerValue),h=new E_):"appendMissingElements"in c?h=new xp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Mp(c.removeAllFromArray.values||[]):"increment"in c?h=new I_(o,c.increment):nn();const p=Cs.fromServerFormat(c.fieldPath);return new nb(p,h)}(n,i)):[];var i;if(t.update){const i=tu(n,t.update.name),o=new Eo({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new __((t.updateMask.fieldPaths||[]).map(_=>Cs.fromServerFormat(_)));return new kp(i,o,c,e,r)}return new rb(i,o,e,r)}if(t.delete){const i=tu(n,t.delete);return new ib(i,e)}if(t.verify){const i=tu(n,t.verify);return new o1(i,e)}return nn()}function u2(n,t){return{documents:[c1(n,t.path)]}}function d2(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=c1(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=c1(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(E=>function(x){if("=="===x.op){if(yL(x.value))return{unaryFilter:{field:T_(x.field),op:"IS_NAN"}};if(_L(x.value))return{unaryFilter:{field:T_(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(yL(x.value))return{unaryFilter:{field:T_(x.field),op:"IS_NOT_NAN"}};if(_L(x.value))return{unaryFilter:{field:T_(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:T_(x.field),op:l6(x.op),value:x.value}}}(E));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);i&&(e.structuredQuery.where=i);const o=function(p){if(0!==p.length)return p.map(_=>{return{field:T_((E=_).field),direction:a6(E.dir)};var E})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const c=(_=t.limit,n.N||Z0(_)?_:{value:_});var _,h,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function h2(n){let t=o2(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Tn(1===r);const E=e.from[0];E.allDescendants?i=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=f2(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(E=>{return new b_(S_((x=E).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;e.limit&&(h=function(E){let x;return x="object"==typeof E?E.value:E,Z0(x)?null:x}(e.limit));let p=null;var E;e.startAt&&(p=new _h((E=e.startAt).values||[],!!E.before));let _=null;return e.endAt&&(_=function(E){return new _h(E.values||[],!E.before)}(e.endAt)),RL(t,i,c,o,h,"F",p,_)}function f2(n){return n?void 0!==n.unaryFilter?[u6(n)]:void 0!==n.fieldFilter?[c6(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>f2(t)).reduce((t,e)=>t.concat(e)):nn():[]}function a6(n){return XG[n]}function l6(n){return e6[n]}function T_(n){return{fieldPath:n.canonicalString()}}function S_(n){return Cs.fromServerFormat(n.fieldPath)}function c6(n){return io.create(S_(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nn()}}(n.fieldFilter.op),n.fieldFilter.value)}function u6(n){switch(n.unaryFilter.op){case"IS_NAN":const t=S_(n.unaryFilter.field);return io.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=S_(n.unaryFilter.field);return io.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=S_(n.unaryFilter.field);return io.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=S_(n.unaryFilter.field);return io.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nn()}}function d6(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function p2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function jo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=g2(t)),t=h6(n.get(e),t);return g2(t)}function h6(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function g2(n){return n+"\x01\x01"}function nu(n){const t=n.length;if(Tn(t>=2),2===t)return Tn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),br.emptyPath();const e=t-2,r=[];let i="";for(let o=0;o<t;){const c=n.indexOf("\x01",o);switch((c<0||c>e)&&nn(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:nn()}o=c+2}return new br(r)}const m2=["userId","batchId"];function dT(n,t){return[n,jo(t)]}function _2(n,t,e){return[n,jo(t),e]}const f6={},p6=["prefixPath","collectionGroup","readTime","documentId"],g6=["prefixPath","collectionGroup","documentId"],m6=["collectionGroup","readTime","prefixPath","documentId"],_6=["canonicalId","targetId"],y6=["targetId","path"],v6=["path","targetId"],b6=["collectionId","parent"],w6=["indexId","uid"],C6=["uid","sequenceNumber"],E6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],I6=["indexId","uid","orderedDocumentKey"],T6=["userId","collectionPath","documentId"],S6=["userId","collectionPath","largestBatchId"],D6=["userId","collectionGroup","largestBatchId"],y2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],A6=[...y2,"documentOverlays"],v2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x6=[...v2,"indexConfiguration","indexState","indexEntries"],b2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ot((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ot?e:ot.resolve(e)}catch(e){return ot.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ot.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ot.reject(e)}static resolve(t){return new ot((e,r)=>{e(t)})}static reject(t){return new ot((e,r)=>{r(t)})}static waitFor(t){return new ot((e,r)=>{let i=0,o=0,c=!1;t.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&e()},p=>r(p))}),c=!0,o===i&&e()})}static or(t){let e=ot.resolve(!1);for(const r of t)e=e.next(i=>i?ot.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,o)=>{r.push(e.call(this,i,o))}),this.waitFor(r)}}class hT{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Fs,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new hb(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=d1(r.target.error);this.At.reject(new hb(t,i))}}static open(t,e,r,i){try{return new hT(e,t.transaction(i,r))}catch(o){throw new hb(e,o)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Et("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new k6(e)}}class hc{constructor(t,e,r){this.name=t,this.version=e,this.Pt=r,12.2===hc.Vt((0,ae.z$)())&&as("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Et("SimpleDb","Removing database:",t),Op(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,ae.hl)())return!1;if(hc.St())return!0;const t=(0,ae.z$)(),e=hc.Vt(t),r=0<e&&e<10,i=hc.Dt(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,ut.Z)(function*(){return e.db||(Et("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new hb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new vt(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new vt(nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new hb(t,h))},o.onupgradeneeded=c=>{Et("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.Pt.kt(c.target.result,o.transaction,c.oldVersion,e.version).next(()=>{Et("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var o=this;return(0,ut.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{o.db=yield o.Nt(t);const p=hT.open(o.db,t,c?"readonly":"readwrite",r),_=i(p).next(E=>(p.bt(),E)).catch(E=>(p.abort(E),ot.reject(E))).toPromise();return _.catch(()=>{}),yield p.Rt,_}catch(p){const _="FirebaseError"!==p.name&&h<3;if(Et("SimpleDb","Transaction failed with error:",p.message,"Retrying:",_),o.close(),!_)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class M6{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Op(this.Ft.delete())}}class hb extends vt{constructor(t,e){super(nt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Rp(n){return"IndexedDbTransactionError"===n.name}class k6{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(Et("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(Et("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Op(r)}add(t){return Et("SimpleDb","ADD",this.store.name,t,t),Op(this.store.add(t))}get(t){return Op(this.store.get(t)).next(e=>(void 0===e&&(e=null),Et("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Et("SimpleDb","DELETE",this.store.name,t),Op(this.store.delete(t))}count(){return Et("SimpleDb","COUNT",this.store.name),Op(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.Kt(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ot((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new ot((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(t,e){Et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(o,c,h)=>h.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new ot((r,i)=>{e.onerror=o=>{const c=d1(o.target.error);i(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(t,e){const r=[];return new ot((i,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new M6(h),_=e(h.primaryKey,h.value,p);if(_ instanceof ot){const E=_.catch(x=>(p.done(),ot.reject(x)));r.push(E)}p.isDone?i():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>ot.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Op(n){return new ot((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=d1(r.target.error);e(i)}})}let C2=!1;function d1(n){const t=hc.Vt((0,ae.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C2||(C2=!0,setTimeout(()=>{throw r},0)),r}}return n}class E2 extends w2{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function Bs(n,t){const e=zt(n);return hc.xt(e.Ht,t)}class h1{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&GG(o,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&s1(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&s1(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(wn.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),zr())}isEqual(t){return this.batchId===t.batchId&&m_(this.mutations,t.mutations,(e,r)=>$L(e,r))&&m_(this.baseMutations,t.baseMutations,(e,r)=>$L(e,r))}}class f1{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Tn(t.mutations.length===r.length);let i=YG;const o=t.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new f1(t,e,r,i)}}class p1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vh{constructor(t,e,r,i,o=wn.min(),c=wn.min(),h=Es.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(t){return new vh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new vh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class I2{constructor(t){this.Jt=t}}function T2(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:fT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:cb(i=n.Jt,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:lb(i,o.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Pp(t.version)};else{if(!t.isUnknownDocument())return nn();r.unknownDocument={path:e.path.toArray(),version:Pp(t.version)}}var i,o;return r}function fT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Pp(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Np(n){const t=new Xi(n.seconds,n.nanoseconds);return wn.fromTimestamp(t)}function D_(n,t){const e=(t.baseMutations||[]).map(o=>u1(n.Jt,o));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(c.updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o)}const r=t.mutations.map(o=>u1(n.Jt,o)),i=Xi.fromMillis(t.localWriteTimeMs);return new h1(t.batchId,i,e,r)}function fb(n){const t=Np(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Np(n.lastLimboFreeSnapshotVersion):wn.min();let r;var i;return void 0!==n.query.documents?(Tn(1===(i=n.query).documents.length),r=yl(w_(o2(i.documents[0])))):r=yl(h2(n.query)),new vh(r,n.targetId,0,n.lastListenSequenceNumber,t,e,Es.fromBase64String(n.resumeToken))}function S2(n,t){const e=Pp(t.snapshotVersion),r=Pp(t.lastLimboFreeSnapshotVersion);let i;i=iT(t.target)?u2(n.Jt,t.target):d2(n.Jt,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ap(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function g1(n){const t=h2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?OL(t,t.limit,"L"):t}function m1(n,t){return new p1(t.largestBatchId,u1(n.Jt,t.overlayMutation))}function D2(n,t){const e=t.path.lastSegment();return[n,jo(t.path.popLast()),e]}class O6{getBundleMetadata(t,e){return A2(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Np(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return A2(t).put({bundleId:(r=e).id,createTime:Pp(Ls(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return x2(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:g1(i.bundledQuery),readTime:Np(i.readTime)};var i})}saveNamedQuery(t,e){return x2(t).put({name:(r=e).name,readTime:Pp(Ls(r.readTime)),bundledQuery:r.bundledQuery});var r}}function A2(n){return Bs(n,"bundles")}function x2(n){return Bs(n,"namedQueries")}class _1{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new _1(t,e.uid||"")}getOverlay(t,e){return pb(t).get(D2(this.userId,e)).next(r=>r?m1(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((o,c)=>{const h=new p1(e,c);i.push(this.Xt(t,h))}),ot.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(c=>i.add(jo(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(pb(t).Qt("collectionPathOverlayIndex",h))}),ot.waitFor(o)}getOverlaysForCollection(t,e,r){const i=sb(),o=jo(e),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return pb(t).qt("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const _=m1(this.M,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const o=sb();let c;const h=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return pb(t).Wt({index:"collectionGroupOverlayIndex",range:h},(p,_,E)=>{const x=m1(this.M,_);o.size()<i||x.largestBatchId===c?(o.set(x.getKey(),x),c=x.largestBatchId):E.done()}).next(()=>o)}Xt(t,e){return pb(t).put(function(r,i,o){const[c,h,p]=D2(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:db(r.Jt,o.mutation)}}(this.M,this.userId,e))}}function pb(n){return Bs(n,"documentOverlays")}class Fp{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Hi(t.integerValue));else if("doubleValue"in t){const r=Hi(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),Y0(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(Ip(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?vL(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):nn()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),Nt.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function P6(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function M2(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const o=P6(255&e[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}Fp.fe=new Fp;class N6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=M2(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=M2(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class F6{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class L6{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class gb{constructor(){this.De=new N6,this.Ce=new F6(this.De),this.xe=new L6(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Lp{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new Lp(this.indexId,this.documentKey,this.arrayValue,r)}}function Bp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=k2(n.arrayValue,t.arrayValue),0!==e?e:(e=k2(n.directionalValue,t.directionalValue),0!==e?e:Nt.comparator(n.documentKey,t.documentKey)))}function k2(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class B6{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=JM(t);if(void 0!==e&&!this.Be(e))return!1;const r=Dp(t);let i=0,o=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[o++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(o>=this.Me.length||!this.Ue(this.Me[o++],c))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class V6{constructor(){this.qe=new y1}addToCollectionParentIndex(t,e){return this.qe.add(e),ot.resolve()}getCollectionParents(t,e){return ot.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return ot.resolve()}deleteFieldIndex(t,e){return ot.resolve()}getDocumentsMatchingTarget(t,e){return ot.resolve(null)}getIndexType(t,e){return ot.resolve(0)}getFieldIndexes(t,e){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,e){return ot.resolve(dc.min())}updateCollectionGroup(t,e,r){return ot.resolve()}updateIndexEntries(t,e){return ot.resolve()}}class y1{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new di(br.comparator),o=!i.has(r);return this.index[e]=i.add(r),o}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new di(br.comparator)).toArray()}}const pT=new Uint8Array(0);class U6{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new y1,this.Ge=new yh(r=>Ap(r),(r,i)=>eb(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const o={collectionId:r,parent:jo(i)};return R2(t).put(o)}return ot.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[dL(e),""],!1,!0);return R2(t).qt(i).next(o=>{for(const c of o){if(c.collectionId!==e)break;r.push(nu(c.parent))}return r})}addFieldIndex(t,e){const r=gT(t),i={indexId:(o=e).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var o;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=gT(t),i=mT(t),o=mb(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=mb(t);let i=!0;const o=new Map;return ot.forEach(this.Qe(e),c=>this.je(t,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=zr();const h=[];return ot.forEach(o,(p,_)=>{var E;Et("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Vt=>`${Vt.fieldPath}:${Vt.kind}`).join(",")}`} to execute ${Ap(e)}`);const x=function(Vt,Ht){const Sn=JM(Ht);if(void 0===Sn)return null;for(const Hn of sT(Vt,Sn.fieldPath))switch(Hn.op){case"array-contains-any":return Hn.value.arrayValue.values||[];case"array-contains":return[Hn.value]}return null}(_,p),$=function(Vt,Ht){const Sn=new Map;for(const Hn of Dp(Ht))for(const kr of sT(Vt,Hn.fieldPath))switch(kr.op){case"==":case"in":Sn.set(Hn.fieldPath.canonicalString(),kr.value);break;case"not-in":case"!=":return Sn.set(Hn.fieldPath.canonicalString(),kr.value),Array.from(Sn.values())}return null}(_,p),se=function(Vt,Ht){const Sn=[];let Hn=!0;for(const kr of Dp(Ht)){const qo=0===kr.kind?DL(Vt,kr.fieldPath,Vt.startAt):AL(Vt,kr.fieldPath,Vt.startAt);Sn.push(qo.value),Hn&&(Hn=qo.inclusive)}return new _h(Sn,Hn)}(_,p),ye=function(Vt,Ht){const Sn=[];let Hn=!0;for(const kr of Dp(Ht)){const qo=0===kr.kind?AL(Vt,kr.fieldPath,Vt.endAt):DL(Vt,kr.fieldPath,Vt.endAt);Sn.push(qo.value),Hn&&(Hn=qo.inclusive)}return new _h(Sn,Hn)}(_,p),ze=this.We(p,_,se),rt=this.We(p,_,ye),It=this.ze(p,_,$),jt=this.He(p.indexId,x,ze,se.inclusive,rt,ye.inclusive,It);return ot.forEach(jt,Vt=>r.Gt(Vt,e.limit).next(Ht=>{Ht.forEach(Sn=>{const Hn=Nt.fromSegments(Sn.documentKey);c.has(Hn)||(c=c.add(Hn),h.push(Hn))})}))}).next(()=>h)}return ot.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,r,i,o,c,h){const p=(null!=e?e.length:1)*Math.max(r.length,o.length),_=p/(null!=e?e.length:1),E=[];for(let x=0;x<p;++x){const $=e?this.Je(e[x/_]):pT,se=this.Ye(t,$,r[x%_],i),ye=this.Xe(t,$,o[x%_],c),ze=h.map(rt=>this.Ye(t,$,rt,!0));E.push(...this.createRange(se,ye,ze))}return E}Ye(t,e,r,i){const o=new Lp(t,Nt.empty(),e,r);return i?o:o.ke()}Xe(t,e,r,i){const o=new Lp(t,Nt.empty(),e,r);return i?o.ke():o}je(t,e){const r=new B6(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(o=>{let c=null;for(const h of o)r.$e(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(t,e){let r=2;return ot.forEach(this.Qe(e),i=>this.je(t,i).next(o=>{o?0!==r&&o.fields.length<function(c){let h=new di(Cs.comparator),p=!1;for(const _ of c.filters){const E=_;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const _ of c.orderBy)_.field.isKeyField()||(h=h.add(_.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(t,e){const r=new gb;for(const i of Dp(t)){const o=e.data.field(i.fieldPath);if(null==o)return null;const c=r.Ne(i.kind);Fp.fe.Zt(o,c)}return r.Se()}Je(t){const e=new gb;return Fp.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new gb;return Fp.fe.Zt(Sp(this.databaseId,e),r.Ne(function(i){const o=Dp(i);return 0===o.length?0:o[o.length-1].kind}(t))),r.Se()}ze(t,e,r){if(null===r)return[];let i=[];i.push(new gb);let o=0;for(const c of Dp(t)){const h=r[o++];for(const p of i)if(this.en(e,c.fieldPath)&&Q0(h))i=this.nn(i,c,h);else{const _=p.Ne(c.kind);Fp.fe.Zt(h,_)}}return this.sn(i)}We(t,e,r){return this.ze(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new gb;p.seed(h.Se()),Fp.fe.Zt(c,p.Ne(e.kind)),o.push(p)}return o}en(t,e){return!!t.filters.find(r=>r instanceof io&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=gT(t),i=mT(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(o=>{const c=[];return ot.forEach(o,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(_,E){const x=E?new X0(E.sequenceNumber,new dc(Np(E.readTime),new Nt(nu(E.documentKey)),E.largestBatchId)):X0.empty(),$=_.fields.map(([se,ye])=>new nT(Cs.fromServerFormat(se),ye));return new tT(_.indexId,_.collectionGroup,$,x)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:jn(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=gT(t),o=mT(t);return this.rn(t).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>ot.forEach(h,p=>{return o.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Pp(($=r).readTime),documentKey:jo($.documentKey.path),largestBatchId:$.largestBatchId});var $})))}updateIndexEntries(t,e){const r=new Map;return ot.forEach(e,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ot.resolve(c):this.getFieldIndexes(t,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ot.forEach(h,p=>this.on(t,i,p).next(_=>{const E=this.un(o,p);return _.isEqual(E)?ot.resolve():this.an(t,o,p,_,E)}))))})}cn(t,e,r,i){return mb(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return mb(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=mb(t);let o=new di(Bp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(c,h)=>{o=o.add(new Lp(r.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>o)}un(t,e){let r=new di(Bp);const i=this.Ze(e,t);if(null==i)return r;const o=JM(e);if(null!=o){const c=t.data.field(o.fieldPath);if(Q0(c))for(const h of c.arrayValue.values||[])r=r.add(new Lp(e.indexId,t.key,this.Je(h),i))}else r=r.add(new Lp(e.indexId,t.key,pT,i));return r}an(t,e,r,i,o){Et("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,p,_,E,x){const $=h.getIterator(),se=p.getIterator();let ye=v_($),ze=v_(se);for(;ye||ze;){let rt=!1,It=!1;if(ye&&ze){const jt=_(ye,ze);jt<0?It=!0:jt>0&&(rt=!0)}else null!=ye?It=!0:rt=!0;rt?(E(ze),ze=v_(se)):It?(x(ye),ye=v_($)):(ye=v_($),ze=v_(se))}}(i,o,Bp,h=>{c.push(this.cn(t,e,r,h))},h=>{c.push(this.hn(t,e,r,h))}),ot.waitFor(c)}rn(t){let e=1;return mT(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((c,h)=>Bp(c,h)).filter((c,h,p)=>!h||0!==Bp(c,p[h-1]));const i=[];i.push(t);for(const c of r){const h=Bp(c,t),p=Bp(c,e);if(0===h)i[0]=t.ke();else if(h>0&&p<0)i.push(c),i.push(c.ke());else if(p>0)break}i.push(e);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,pT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,pT,[]]));return o}getMinOffset(t,e){let r;return ot.forEach(this.Qe(e),i=>this.je(t,i).next(o=>{o?(!r||IL(o.indexState.offset,r)<0)&&(r=o.indexState.offset):r=dc.min()})).next(()=>r)}}function R2(n){return Bs(n,"collectionParents")}function mb(n){return Bs(n,"indexEntries")}function gT(n){return Bs(n,"indexConfiguration")}function mT(n){return Bs(n,"indexState")}const O2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pa{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new pa(t,pa.DEFAULT_COLLECTION_PERCENTILE,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function P2(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(e.batchId);let h=0;const p=r.Wt({range:c},(E,x,$)=>(h++,$.delete()));o.push(p.next(()=>{Tn(1===h)}));const _=[];for(const E of e.mutations){const x=_2(t,E.key.path,e.batchId);o.push(i.delete(x)),_.push(E.key)}return ot.waitFor(o).next(()=>_)}function _T(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw nn();t=n.noDocument}return JSON.stringify(t).length}pa.DEFAULT_COLLECTION_PERCENTILE=10,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pa.DEFAULT=new pa(41943040,pa.DEFAULT_COLLECTION_PERCENTILE,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pa.DISABLED=new pa(-1,0,0);class v1{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Tn(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new v1(o,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bh(t).Wt({index:"userMutationsIndex",range:r},(i,o,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const o=A_(t),c=bh(t);return c.add({}).next(h=>{Tn("number"==typeof h);const p=new h1(h,e,r,i),_=function($,se,ye){const ze=ye.baseMutations.map(It=>db($.Jt,It)),rt=ye.mutations.map(It=>db($.Jt,It));return{userId:se,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:ze,mutations:rt}}(this.M,this.userId,p),E=[];let x=new di(($,se)=>jn($.canonicalString(),se.canonicalString()));for(const $ of i){const se=_2(this.userId,$.key.path,h);x=x.add($.key.path.popLast()),E.push(c.put(_)),E.push(o.put(se,f6))}return x.forEach($=>{E.push(this.indexManager.addToCollectionParentIndex(t,$))}),t.addOnCommittedListener(()=>{this.ln[h]=p.keys()}),ot.waitFor(E).next(()=>p)})}lookupMutationBatch(t,e){return bh(t).get(e).next(r=>r?(Tn(r.userId===this.userId),D_(this.M,r)):null)}fn(t,e){return this.ln[e]?ot.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return bh(t).Wt({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Tn(h.batchId>=r),o=D_(this.M,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bh(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bh(t).qt("userMutationsIndex",e).next(r=>r.map(i=>D_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=dT(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return A_(t).Wt({range:i},(c,h,p)=>{const[_,E,x]=c,$=nu(E);if(_===this.userId&&e.path.isEqual($))return bh(t).get(x).next(se=>{if(!se)throw nn();Tn(se.userId===this.userId),o.push(D_(this.M,se))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new di(jn);const i=[];return e.forEach(o=>{const c=dT(this.userId,o.path),h=IDBKeyRange.lowerBound(c),p=A_(t).Wt({range:h},(_,E,x)=>{const[$,se,ye]=_,ze=nu(se);$===this.userId&&o.path.isEqual(ze)?r=r.add(ye):x.done()});i.push(p)}),ot.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,o=dT(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new di(jn);return A_(t).Wt({range:c},(p,_,E)=>{const[x,$,se]=p,ye=nu($);x===this.userId&&r.isPrefixOf(ye)?ye.length===i&&(h=h.add(se)):E.done()}).next(()=>this.dn(t,h))}dn(t,e){const r=[],i=[];return e.forEach(o=>{i.push(bh(t).get(o).next(c=>{if(null===c)throw nn();Tn(c.userId===this.userId),r.push(D_(this.M,c))}))}),ot.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return P2(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),ot.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ot.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return A_(t).Wt({range:r},(o,c,h)=>{if(o[0]===this.userId){const p=nu(o[1]);i.push(p)}else h.done()}).next(()=>{Tn(0===i.length)})})}containsKey(t,e){return N2(t,this.userId,e)}wn(t){return F2(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function N2(n,t,e){const r=dT(t,e.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return A_(n).Wt({range:o,jt:!0},(h,p,_)=>{const[E,x,$]=h;E===t&&x===i&&(c=!0),_.done()}).next(()=>c)}function bh(n){return Bs(n,"mutations")}function A_(n){return Bs(n,"documentMutations")}function F2(n){return Bs(n,"mutationQueues")}class Vp{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Vp(0)}static yn(){return new Vp(-1)}}class j6{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new Vp(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>wn.fromTimestamp(new Xi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>x_(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Tn(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const o=[];return x_(t).Wt((c,h)=>{const p=fb(h);p.sequenceNumber<=e&&null===r.get(p.targetId)&&(i++,o.push(this.removeTargetData(t,p)))}).next(()=>ot.waitFor(o)).next(()=>i)}forEachTarget(t,e){return x_(t).Wt((r,i)=>{const o=fb(i);e(o)})}pn(t){return L2(t).get("targetGlobalKey").next(e=>(Tn(null!==e),e))}In(t,e){return L2(t).put("targetGlobalKey",e)}Tn(t,e){return x_(t).put(S2(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Ap(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return x_(t).Wt({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const _=fb(h);eb(e,_.target)&&(o=_,p.done())}).next(()=>o)}addMatchingKeys(t,e,r){const i=[],o=wh(t);return e.forEach(c=>{const h=jo(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(t,r,c))}),ot.waitFor(i)}removeMatchingKeys(t,e,r){const i=wh(t);return ot.forEach(e,o=>{const c=jo(o.path);return ot.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(t,r,o)])})}removeMatchingKeysForTargetId(t,e){const r=wh(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=wh(t);let o=zr();return i.Wt({range:r,jt:!0},(c,h,p)=>{const _=nu(c[1]),E=new Nt(_);o=o.add(E)}).next(()=>o)}containsKey(t,e){const r=jo(e.path),i=IDBKeyRange.bound([r],[dL(r)],!1,!0);let o=0;return wh(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],p,_)=>{0!==c&&(o++,_.done())}).next(()=>o>0)}Et(t,e){return x_(t).get(e).next(r=>r?fb(r):null)}}function x_(n){return Bs(n,"targets")}function L2(n){return Bs(n,"targetGlobal")}function wh(n){return Bs(n,"targetDocuments")}function Up(n){return b1.apply(this,arguments)}function b1(){return b1=(0,ut.Z)(function*(n){if(n.code!==nt.FAILED_PRECONDITION||n.message!==b2)throw n;Et("LocalStore","Unexpectedly lost primary lease")}),b1.apply(this,arguments)}function B2([n,t],[e,r]){const i=jn(n,e);return 0===i?jn(t,r):i}class H6{constructor(t){this.An=t,this.buffer=new di(B2),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();B2(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class z6{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;Et("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ut.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Rp(i)?Et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Up(i)}yield e.Sn(t)}))}}class G6{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return ot.resolve(Va.A);const r=new H6(e);return this.Dn.forEachTarget(t,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(O2)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O2):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,o,c,h,p,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(t,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(t,r,e))).next(x=>(o=x,p=Date.now(),this.removeOrphanedDocuments(t,r))).next(x=>(_=Date.now(),qM()<=La.in.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(p-h)+`ms\n\tRemoved ${x} documents in `+(_-p)+`ms\nTotal Duration: ${_-E}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:x})))}}class $6{constructor(t,e){this.db=t,this.garbageCollector=new G6(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return yT(t,r)}removeReference(t,e,r){return yT(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return yT(t,e)}On(t,e){return function(r,i){let o=!1;return F2(r).zt(c=>N2(r,c,i).next(h=>(h&&(o=!0),ot.resolve(!h)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Mn(t,(c,h)=>{if(h<=e){const p=this.On(t,c).next(_=>{if(!_)return o++,r.getEntry(t,c).next(()=>(r.removeEntry(c,wn.min()),wh(t).delete([0,jo(c.path)])))});i.push(p)}}).next(()=>ot.waitFor(i)).next(()=>r.apply(t)).next(()=>o)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return yT(t,e)}Mn(t,e){const r=wh(t);let i,o=Va.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:_})=>{0===c?(o!==Va.A&&e(new Nt(nu(i)),o),o=_,i=p):o=Va.A}).next(()=>{o!==Va.A&&e(new Nt(nu(i)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function yT(n,t){return wh(n).put((r=n.currentSequenceNumber,{targetId:0,path:jo(t.path),sequenceNumber:r}));var r}class V2{constructor(){this.changes=new yh(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,mi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?ot.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class W6{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return jp(t).put(r)}removeEntry(t,e,r){return jp(t).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],fT(o),c[c.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=mi.newInvalidDocument(e);return jp(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(_b(e))},(i,o)=>{r=this.$n(e,o)}).next(()=>r)}Bn(t,e){let r={size:0,document:mi.newInvalidDocument(e)};return jp(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(_b(e))},(i,o)=>{r={document:this.$n(e,o),size:_T(o)}}).next(()=>r)}getEntries(t,e){let r=vl();return this.Ln(t,e,(i,o)=>{const c=this.$n(i,o);r=r.insert(i,c)}).next(()=>r)}Un(t,e){let r=vl(),i=new es(Nt.comparator);return this.Ln(t,e,(o,c)=>{const h=this.$n(o,c);r=r.insert(o,h),i=i.insert(o,_T(c))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return ot.resolve();let i=new di(H2);e.forEach(p=>i=i.add(p));const o=IDBKeyRange.bound(_b(i.first()),_b(i.last())),c=i.getIterator();let h=c.getNext();return jp(t).Wt({index:"documentKeyIndex",range:o},(p,_,E)=>{const x=Nt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&H2(h,x)<0;)r(h,null),h=c.getNext();h&&h.isEqual(x)&&(r(h,_),h=c.hasNext()?c.getNext():null),h?E.Ut(_b(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),fT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jp(t).qt(IDBKeyRange.bound(i,o,!0)).next(c=>{let h=vl();for(const p of c){const _=this.$n(Nt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(_.key,_)}return h})}getAllFromCollectionGroup(t,e,r,i){let o=vl();const c=j2(e,r),h=j2(e,dc.max());return jp(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,_,E)=>{const x=this.$n(Nt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);o=o.insert(x.key,x),o.size===i&&E.done()}).next(()=>o)}newChangeBuffer(t){return new q6(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return U2(t).get("remoteDocumentGlobalKey").next(e=>(Tn(!!e),e))}Fn(t,e){return U2(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=c2(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Nt.fromSegments(t.noDocument.path),i=Np(t.noDocument.readTime);e=mi.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return nn();{const r=Nt.fromSegments(t.unknownDocument.path),i=Np(t.unknownDocument.version);e=mi.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Xi(r[0],r[1]);return wn.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(wn.min()))return r}return mi.newInvalidDocument(t)}}class q6 extends V2{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new yh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new di((o,c)=>jn(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Gn.get(o);if(e.push(this.Kn.removeEntry(t,o,h.readTime)),c.isValidDocument()){const p=T2(this.Kn.M,c);i=i.add(o.path.popLast()),r+=_T(p)-h.size,e.push(this.Kn.addEntry(t,o,p))}else if(r-=h.size,this.trackRemovals){const p=T2(this.Kn.M,c.convertToNoDocument(wn.min()));e.push(this.Kn.addEntry(t,o,p))}}),i.forEach(o=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.Kn.updateMetadata(t,r)),ot.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((o,c)=>{this.Gn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function U2(n){return Bs(n,"remoteDocumentGlobal")}function jp(n){return Bs(n,"remoteDocumentsV14")}function _b(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function j2(n,t){const e=t.documentKey.path.toArray();return[n,fT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function H2(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<e.length-2&&o<r.length-2;++o)if(i=jn(e[o],r[o]),i)return i;return i=jn(e.length,r.length),i||(i=jn(e[e.length-2],r[r.length-2]),i||jn(e[e.length-1],r[r.length-1]))}class Z6{constructor(t){this.M=t}kt(t,e,r,i){const o=new hT("createOrUpgrade",e);var h;r<1&&i>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",m2,{unique:!0}),h.createObjectStore("documentMutations"),z2(t),function(h){h.createObjectStore("remoteDocuments")}(t));let c=ot.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),z2(t)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wn.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").qt().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",m2,{unique:!0});const E=p.store("mutations"),x=_.map($=>E.put($));return ot.waitFor(x)})}(t,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.jn(o)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(o))),r<8&&i>=8&&(c=c.next(()=>this.zn(t,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:T6});p.createIndex("collectionPathOverlayIndex",S6,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",D6,{unique:!1})}(t)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:p6});p.createIndex("documentKeyIndex",g6),p.createIndex("collectionGroupIndex",m6)}(t)).next(()=>this.Jn(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:w6}).createIndex("sequenceNumberIndex",C6,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:E6}).createIndex("documentKeyIndex",I6,{unique:!1})}(t)})),c}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=_T(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>ot.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>ot.forEach(h,p=>{Tn(p.userId===o.userId);const _=D_(this.M,p);return P2(t,o.userId,_).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Wt((c,h)=>{const p=new br(c),_=[0,jo(p)];o.push(e.get(_).next(E=>E?ot.resolve():e.put({targetId:0,path:jo(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ot.waitFor(o))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:b6});const r=e.store("collectionParents"),i=new y1,o=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:jo(p)})}};return e.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const p=new br(c);return o(p.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([c,h,p],_)=>{const E=nu(h);return o(E.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const o=fb(i),c=S2(this.M,o);return e.put(c)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((o,c)=>{const h=e.store("remoteDocumentsV14"),p=(_=c,_.document?new Nt(br.fromString(_.document.name).popFirst(5)):_.noDocument?Nt.fromSegments(_.noDocument.path):_.unknownDocument?Nt.fromSegments(_.unknownDocument.path):nn()).path.toArray();var _;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(E))}).next(()=>ot.waitFor(i))}}function z2(n){n.createObjectStore("targetDocuments",{keyPath:y6}).createIndex("documentTargetsIndex",v6,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_6,{unique:!0}),n.createObjectStore("targetGlobal")}const w1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class C1{constructor(t,e,r,i,o,c,h,p,_,E,x=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=o,this.window=c,this.document=h,this.Xn=_,this.Zn=E,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=$=>Promise.resolve(),!C1.vt())throw new vt(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $6(this,i),this.hs=e+"main",this.M=new I2(p),this.ls=new hc(this.hs,this.ts,new Z6(this.M)),this.fs=new j6(this.referenceDelegate,this.M),this.ds=new W6(this.M),this._s=new O6,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&as("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(nt.FAILED_PRECONDITION,w1);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Va(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,ut.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,ut.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,ut.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>vT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.bs(t).next(()=>!0))).catch(t=>{if(Rp(t))return Et("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return yb(t).get("owner").next(e=>ot.resolve(this.Ps(e)))}Vs(t){return vT(t).delete(this.clientId)}vs(){var t=this;return(0,ut.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Bs(r,"clientMetadata");return i.qt().next(o=>{const c=t.Ds(o,18e5),h=o.filter(p=>-1===c.indexOf(p));return ot.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?ot.resolve(!0):yb(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new vt(nt.FAILED_PRECONDITION,w1);return!1}}return!(!this.networkEnabled||!this.inForeground)||vT(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Et("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ut.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new E2(e,Va.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>vT(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return v1.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new U6(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return _1.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){Et("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",o=14===(c=this.ts)?x6:13===c?v2:12===c?A6:11===c?y2:void nn();var c;let h;return this.ls.runTransaction(t,i,o,p=>(h=new E2(p,this.es?this.es.next():Va.A),"readwrite-primary"===e?this.Es(h).next(_=>!!_||this.As(h)).next(_=>{if(!_)throw as(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new vt(nt.FAILED_PRECONDITION,b2);return r(h)}).next(_=>this.bs(h).next(()=>_)):this.$s(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}$s(t){return yb(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new vt(nt.FAILED_PRECONDITION,w1)})}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yb(t).put("owner",e)}static vt(){return hc.vt()}Rs(t){const e=yb(t);return e.get("owner").next(r=>this.Ps(r)?(Et("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ot.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(as(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,ae.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Et("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return as("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){as("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function yb(n){return Bs(n,"owner")}function vT(n){return Bs(n,"clientMetadata")}function E1(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class Y6{constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const o of r)o.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const o of e)o.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return Nt.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):t1(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new Nt(e)).next(r=>{let i=a1();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let o=a1();return this.indexManager.getCollectionParents(t,i).next(c=>ot.forEach(c,h=>{const p=(_=e,E=h.child(i),new rd(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,E;return this.zs(t,p,r).next(_=>{_.forEach((E,x)=>{o=o.insert(E,x)})})}).next(()=>o))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(o=>(i=o,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(o=>{for(const c of o)for(const h of c.mutations){const p=h.key;let _=i.get(p);null==_&&(_=mi.newInvalidDocument(p),i=i.insert(p,_)),s1(h,_,c.localWriteTime),_.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((o,c)=>{r1(e,c)||(i=i.remove(o))}),i))}}class I1{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=zr(),i=zr();for(const o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new I1(t,e.fromCache,r,i)}}class G2{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,r,i){return this.ti(t,e).next(o=>o||this.ei(t,e,i,r)).next(o=>o||this.ni(t,e))}ti(t,e){return ot.resolve(null)}ei(t,e,r,i){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||i.isEqual(wn.min())?this.ni(t,e):this.Zs.Ks(t,r).next(o=>{const c=this.si(e,o);return this.ii(e,c,r,i)?this.ni(t,e):(qM()<=La.in.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),n1(e)),this.ri(t,c,e,EL(i,-1)))})}si(t,e){let r=new di(FL(t));return e.forEach((i,o)=>{r1(t,o)&&(r=r.add(o))}),r}ii(t,e,r,i){if(null===t.limit)return!1;if(r.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ni(t,e){return qM()<=La.in.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",n1(e)),this.Zs.Qs(t,e,dc.min())}ri(t,e,r,i){return this.Zs.Qs(t,r,i).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}class K6{constructor(t,e,r,i){this.persistence=t,this.oi=e,this.M=i,this.ui=new es(jn),this.ai=new yh(o=>Ap(o),eb),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new Y6(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ui))}}function $2(n,t,e,r){return new K6(n,t,e,r)}function W2(n,t){return T1.apply(this,arguments)}function T1(){return T1=(0,ut.Z)(function*(n,t){const e=zt(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(o=>(i=o,e.li(t),e.Bs.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let p=zr();for(const _ of i){c.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}for(const _ of o){h.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}return e.fi.Ks(r,p).next(_=>({di:_,removedBatchIds:c,addedBatchIds:h}))})})}),T1.apply(this,arguments)}function Q6(n,t){const e=zt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=e.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,_){const E=p.batch,x=E.keys();let $=ot.resolve();return x.forEach(se=>{$=$.next(()=>_.getEntry(h,se)).next(ye=>{const ze=p.docVersions.get(se);Tn(null!==ze),ye.version.compareTo(ze)<0&&(E.applyToRemoteDocument(ye,p),ye.isValidDocument()&&(ye.setReadTime(p.commitVersion),_.addEntry(ye)))})}),$.next(()=>c.Bs.removeMutationBatch(h,E))}(e,r,t,o).next(()=>o.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.fi.Ks(r,i))})}function q2(n){const t=zt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function J6(n,t){const e=zt(n),r=t.snapshotVersion;let i=e.ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.hi.newChangeBuffer({trackRemovals:!0});i=e.ui;const h=[];t.targetChanges.forEach((_,E)=>{const x=i.get(E);if(!x)return;h.push(e.fs.removeMatchingKeys(o,_.removedDocuments,E).next(()=>e.fs.addMatchingKeys(o,_.addedDocuments,E)));let $=x.withSequenceNumber(o.currentSequenceNumber);var se,ye,ze;t.targetMismatches.has(E)?$=$.withResumeToken(Es.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):_.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(_.resumeToken,r)),i=i.insert(E,$),ye=$,ze=_,(0===(se=x).resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-se.snapshotVersion.toMicroseconds()>=3e8||ze.addedDocuments.size+ze.modifiedDocuments.size+ze.removedDocuments.size>0)&&h.push(e.fs.updateTargetData(o,$))});let p=vl();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(Z2(o,c,t.documentUpdates).next(_=>{p=_})),!r.isEqual(wn.min())){const _=e.fs.getLastRemoteSnapshotVersion(o).next(E=>e.fs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(_)}return ot.waitFor(h).next(()=>c.apply(o)).next(()=>e.fi.Gs(o,p)).next(()=>p)}).then(o=>(e.ui=i,o))}function Z2(n,t,e){let r=zr();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let o=vl();return e.forEach((c,h)=>{const p=i.get(c);h.isNoDocument()&&h.version.isEqual(wn.min())?(t.removeEntry(c,h.readTime),o=o.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(h),o=o.insert(c,h)):Et("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),o})}function X6(n,t){const e=zt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function M_(n,t){const e=zt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(o=>o?(i=o,ot.resolve(i)):e.fs.allocateTargetId(r).next(c=>(i=new vh(t,c,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ui=e.ui.insert(r.targetId,r),e.ai.set(t,r.targetId)),r})}function k_(n,t,e){return S1.apply(this,arguments)}function S1(){return S1=(0,ut.Z)(function*(n,t,e){const r=zt(n),i=r.ui.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Rp(c))throw c;Et("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}r.ui=r.ui.remove(t),r.ai.delete(i.target)}),S1.apply(this,arguments)}function bT(n,t,e){const r=zt(n);let i=wn.min(),o=zr();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,_){const E=zt(h),x=E.ai.get(_);return void 0!==x?ot.resolve(E.ui.get(x)):E.fs.getTargetData(p,_)}(r,c,yl(t)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{o=p})}).next(()=>r.oi.Qs(c,t,e?i:wn.min(),e?o:zr())).next(h=>(Q2(r,NL(t),h),{documents:h,_i:o})))}function Y2(n,t){const e=zt(n),r=zt(e.fs),i=e.ui.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,t).next(c=>c?c.target:null))}function K2(n,t){const e=zt(n),r=e.ci.get(t)||wn.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.hi.getAllFromCollectionGroup(i,t,EL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Q2(e,t,i),i))}function Q2(n,t,e){let r=wn.min();e.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ci.set(t,r)}function D1(){return D1=(0,ut.Z)(function*(n,t,e,r){const i=zt(n);let o=zr(),c=vl();for(const _ of e){const E=t.wi(_.metadata.name);_.document&&(o=o.add(E));const x=t.mi(_);x.setReadTime(t.gi(_.metadata.readTime)),c=c.insert(E,x)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),p=yield M_(i,(_=r,yl(w_(br.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>Z2(_,h,c).next(E=>(h.apply(_),E)).next(E=>i.fs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.fs.addMatchingKeys(_,o,p.targetId)).next(()=>i.fi.Gs(_,E)).next(()=>E)))}),D1.apply(this,arguments)}function t$(n,t){return A1.apply(this,arguments)}function A1(){return A1=(0,ut.Z)(function*(n,t,e=zr()){const r=yield M_(n,yl(g1(t.bundledQuery))),i=zt(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=Ls(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(o,t);const h=r.withResumeToken(Es.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(o,h).next(()=>i.fs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.fs.addMatchingKeys(o,e,r.targetId)).next(()=>i._s.saveNamedQuery(o,t))})}),A1.apply(this,arguments)}class n${constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return ot.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var r;return this.yi.set(e.id,{id:(r=e).id,version:r.version,createTime:Ls(r.createTime)}),ot.resolve()}getNamedQuery(t,e){return ot.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,{name:(r=e).name,query:g1(r.bundledQuery),readTime:Ls(r.readTime)}),ot.resolve();var r}}class r${constructor(){this.overlays=new es(Nt.comparator),this.Ii=new Map}getOverlay(t,e){return ot.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,o)=>{this.Xt(t,e,o)}),ot.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ii.delete(r)),ot.resolve()}getOverlaysForCollection(t,e,r){const i=sb(),o=e.length+1,c=new Nt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ot.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let o=new es((_,E)=>_-E);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let E=o.get(_.largestBatchId);null===E&&(E=sb(),o=o.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const h=sb(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,E)=>h.set(_,E)),!(h.size()>=i)););return ot.resolve(h)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new p1(e,r));let o=this.Ii.get(e);void 0===o&&(o=zr(),this.Ii.set(e,o)),this.Ii.set(e,o.add(r.key))}}class x1{constructor(){this.Ti=new di(Vs.Ei),this.Ai=new di(Vs.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const r=new Vs(t,e);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Pi(new Vs(t,e))}Vi(t,e){t.forEach(r=>this.removeReference(r,e))}vi(t){const e=new Nt(new br([])),r=new Vs(e,t),i=new Vs(e,t+1),o=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),o.push(c.key)}),o}Si(){this.Ti.forEach(t=>this.Pi(t))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new Nt(new br([])),r=new Vs(e,t),i=new Vs(e,t+1);let o=zr();return this.Ai.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Vs(t,0),r=this.Ti.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class Vs{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return Nt.comparator(t.key,e.key)||jn(t.Ci,e.Ci)}static Ri(t,e){return jn(t.Ci,e.Ci)||Nt.comparator(t.key,e.key)}}class i${constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new di(Vs.Ei)}checkEmpty(t){return ot.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const o=this.xi;this.xi++;const c=new h1(o,e,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new Vs(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return ot.resolve(c)}lookupMutationBatch(t,e){return ot.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.Mi(e+1),o=i<0?0:i;return ot.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return ot.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Vs(e,0),i=new Vs(e,Number.POSITIVE_INFINITY),o=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);o.push(h)}),ot.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new di(jn);return e.forEach(i=>{const o=new Vs(i,0),c=new Vs(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([o,c],h=>{r=r.add(h.Ci)})}),ot.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let o=r;Nt.isDocumentKey(o)||(o=o.child(""));const c=new Vs(new Nt(o),0);let h=new di(jn);return this.Ni.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p.Ci)),!0)},c),ot.resolve(this.Oi(h))}Oi(t){const e=[];return t.forEach(r=>{const i=this.ki(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Tn(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ot.forEach(e.mutations,i=>{const o=new Vs(i.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Ni=r})}_n(t){}containsKey(t,e){const r=new Vs(e,0),i=this.Ni.firstAfterOrEqual(r);return ot.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return ot.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class s${constructor(t){this.$i=t,this.docs=new es(Nt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),o=i?i.size:0,c=this.$i(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return ot.resolve(r?r.document.mutableCopy():mi.newInvalidDocument(e))}getEntries(t,e){let r=vl();return e.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():mi.newInvalidDocument(i))}),ot.resolve(r)}getAllFromCollection(t,e,r){let i=vl();const o=new Nt(e.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||IL(DG(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return ot.resolve(i)}getAllFromCollectionGroup(t,e,r,i){nn()}Bi(t,e){return ot.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new o$(this)}getSize(t){return ot.resolve(this.size)}}class o$ extends V2{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),ot.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class a${constructor(t){this.persistence=t,this.Li=new yh(e=>Ap(e),eb),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new x1,this.targetCount=0,this.Ki=Vp.gn()}forEachTarget(t,e){return this.Li.forEach((r,i)=>e(i)),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Ui&&(this.Ui=e),ot.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new Vp(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,ot.resolve()}updateTargetData(t,e){return this.Tn(e),ot.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,e,r){let i=0;const o=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=e&&null===r.get(h.targetId)&&(this.Li.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),i++)}),ot.waitFor(o).next(()=>i)}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,e){const r=this.Li.get(e)||null;return ot.resolve(r)}addMatchingKeys(t,e,r){return this.qi.bi(e,r),ot.resolve()}removeMatchingKeys(t,e,r){this.qi.Vi(e,r);const i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(c=>{o.push(i.markPotentiallyOrphaned(t,c))}),ot.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),ot.resolve()}getMatchingKeysForTargetId(t,e){const r=this.qi.Di(e);return ot.resolve(r)}containsKey(t,e){return ot.resolve(this.qi.containsKey(e))}}class l${constructor(t,e){this.Gi={},this.overlays={},this.es=new Va(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new a$(this),this.indexManager=new V6,this.ds=new s$(r=>this.referenceDelegate.Qi(r)),this.M=new I2(e),this._s=new n$(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new r$,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Gi[t.toKey()];return r||(r=new i$(e,this.referenceDelegate),this.Gi[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){Et("MemoryPersistence","Starting transaction:",t);const i=new c$(this.es.next());return this.referenceDelegate.ji(),r(i).next(o=>this.referenceDelegate.Wi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}zi(t,e){return ot.or(Object.values(this.Gi).map(r=>()=>r.containsKey(t,e)))}}class c$ extends w2{constructor(t){super(),this.currentSequenceNumber=t}}class M1{constructor(t){this.persistence=t,this.Hi=new x1,this.Ji=null}static Yi(t){return new M1(t)}get Xi(){if(this.Ji)return this.Ji;throw nn()}addReference(t,e,r){return this.Hi.addReference(r,e),this.Xi.delete(r.toString()),ot.resolve()}removeReference(t,e,r){return this.Hi.removeReference(r,e),this.Xi.add(r.toString()),ot.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),ot.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Xi.add(o.toString()))}).next(()=>r.removeTargetData(t,e))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.Xi,r=>{const i=Nt.fromPath(r);return this.Zi(t,i).next(o=>{o||e.removeEntry(i,wn.min())})}).next(()=>(this.Ji=null,e.apply(t)))}updateLimboDocument(t,e){return this.Zi(t,e).next(r=>{r?this.Xi.delete(e.toString()):this.Xi.add(e.toString())})}Qi(t){return 0}Zi(t,e){return ot.or([()=>ot.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function J2(n,t){return`firestore_clients_${n}_${t}`}function X2(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function k1(n,t){return`firestore_targets_${n}_${t}`}class wT{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static tr(t,e,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new vt(i.error.code,i.error.message))),c?new wT(t,e,i.state,o):(as("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class vb{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static tr(t,e){const r=JSON.parse(e);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new vt(r.error.code,r.error.message))),o?new vb(t,r.state,i):(as("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class CT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=cT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=gL(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new CT(t,o):(as("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class R1{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new R1(e.clientId,e.onlineState):(as("SharedClientState",`Failed to parse online state: ${t}`),null)}}class O1{constructor(){this.activeTargetIds=cT()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class P1{constructor(t,e,r,i,o){this.window=t,this.Yn=e,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new es(jn),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.hr=J2(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new O1),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ut.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.ir)continue;const o=t.getItem(J2(t.persistenceKey,i));if(o){const c=CT.tr(i,o);c&&(t.ar=t.ar.insert(c.clientId,c))}}t.yr();const r=t.storage.getItem(t.mr);if(r){const i=t.pr(r);i&&t.Ir(i)}for(const i of t.cr)t.ur(i);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,r){this.Er(t,e,r),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(k1(this.persistenceKey,t));if(r){const i=vb.tr(t,r);i&&(e=i.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(k1(this.persistenceKey,t))}updateQueryState(t,e,r){this.br(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ar(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Et("SharedClientState","READ",t,e),e}setItem(t,e){Et("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Et("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){var e=this;const r=t;if(r.storageArea===this.storage){if(Et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void as("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ut.Z)(function*(){if(e.started){if(null!==r.key)if(e.dr.test(r.key)){if(null==r.newValue){const i=e.vr(r.key);return e.Sr(i,null)}{const i=e.Dr(r.key,r.newValue);if(i)return e.Sr(i.clientId,i)}}else if(e._r.test(r.key)){if(null!==r.newValue){const i=e.Cr(r.key,r.newValue);if(i)return e.Nr(i)}}else if(e.wr.test(r.key)){if(null!==r.newValue){const i=e.kr(r.key,r.newValue);if(i)return e.Mr(i)}}else if(r.key===e.mr){if(null!==r.newValue){const i=e.pr(r.newValue);if(i)return e.Ir(i)}}else if(r.key===e.lr){const i=function(o){let c=Va.A;if(null!=o)try{const h=JSON.parse(o);Tn("number"==typeof h),c=h}catch(h){as("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Va.A&&e.sequenceNumberHandler(i)}else if(r.key===e.gr){const i=e.Or(r.newValue);yield Promise.all(i.map(o=>e.syncEngine.Fr(o)))}}else e.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,r){const i=new wT(this.currentUser,t,e,r),o=X2(this.persistenceKey,this.currentUser,t);this.setItem(o,i.er())}Ar(t){const e=X2(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:t}))}br(t,e,r){const i=k1(this.persistenceKey,t),o=new vb(t,e,r);this.setItem(i,o.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const r=this.vr(t);return CT.tr(r,e)}Cr(t,e){const r=this._r.exec(t),i=Number(r[1]);return wT.tr(new no(void 0!==r[2]?r[2]:null),i,e)}kr(t,e){const r=this.wr.exec(t),i=Number(r[1]);return vb.tr(i,e)}pr(t){return R1.tr(t)}Or(t){return JSON.parse(t)}Nr(t){var e=this;return(0,ut.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);Et("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const r=e?this.ar.insert(t,e):this.ar.remove(t),i=this.Tr(this.ar),o=this.Tr(r),c=[],h=[];return o.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{o.has(p)||h.push(p)}),this.syncEngine.Lr(c,h).then(()=>{this.ar=r})}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=cT();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class eB{constructor(){this.Ur=new O1,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,r){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new O1,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class u${Kr(t){}shutdown(){}}class tB{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){Et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const d$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class h${constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class f$ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,r,i,o){const c=this.ho(t,e);Et("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,o),this.fo(t,c,h,r).then(p=>(Et("RestConnection","Received: ",p),p),p=>{throw $0("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",r),p})}_o(t,e,r,i,o){return this.co(t,e,r,i,o)}lo(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+g_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}ho(t,e){return`${this.uo}/v1/${e}:${d$[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,r,i){return new Promise((o,c)=>{const h=new dG;h.listenOnce(lG.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case WM.NO_ERROR:const _=h.getResponseJson();Et("Connection","XHR received:",JSON.stringify(_)),o(_);break;case WM.TIMEOUT:Et("Connection",'RPC "'+t+'" timed out'),c(new vt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case WM.HTTP_ERROR:const E=h.getStatus();if(Et("Connection",'RPC "'+t+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const x=h.getResponseJson().error;if(x&&x.status&&x.message){const $=function(se){const ye=se.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(ye)>=0?ye:nt.UNKNOWN}(x.status);c(new vt($,x.message))}else c(new vt(nt.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new vt(nt.UNAVAILABLE,"Connection failed."));break;default:nn()}}finally{Et("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(i);h.send(e,"POST",p,r,15)})}wo(t,e,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=oG(),c=aG(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new uG({})),this.lo(h.initMessageHeaders,e,r),(0,ae.uI)()||(0,ae.b$)()||(0,ae.d)()||(0,ae.w1)()||(0,ae.Mn)()||(0,ae.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Et("Connection","Creating WebChannel: "+p,h);const _=o.createWebChannel(p,h);let E=!1,x=!1;const $=new h$({Jr:ye=>{x?Et("Connection","Not sending because WebChannel is closed:",ye):(E||(Et("Connection","Opening WebChannel transport."),_.open(),E=!0),Et("Connection","WebChannel sending:",ye),_.send(ye))},Yr:()=>_.close()}),se=(ye,ze,rt)=>{ye.listen(ze,It=>{try{rt(It)}catch(jt){setTimeout(()=>{throw jt},0)}})};return se(_,JI.EventType.OPEN,()=>{x||Et("Connection","WebChannel transport opened.")}),se(_,JI.EventType.CLOSE,()=>{x||(x=!0,Et("Connection","WebChannel transport closed"),$.ro())}),se(_,JI.EventType.ERROR,ye=>{x||(x=!0,$0("Connection","WebChannel transport errored:",ye),$.ro(new vt(nt.UNAVAILABLE,"The operation could not be completed")))}),se(_,JI.EventType.MESSAGE,ye=>{var ze;if(!x){const rt=ye.data[0];Tn(!!rt);const It=rt,jt=It.error||(null===(ze=It[0])||void 0===ze?void 0:ze.error);if(jt){Et("Connection","WebChannel received error:",jt);const Vt=jt.status;let Ht=function(Hn){const kr=cs[Hn];if(void 0!==kr)return QL(kr)}(Vt),Sn=jt.message;void 0===Ht&&(Ht=nt.INTERNAL,Sn="Unknown error status: "+Vt+" with message "+jt.message),x=!0,$.ro(new vt(Ht,Sn)),_.close()}else Et("Connection","WebChannel received:",rt),$.oo(rt)}}),se(c,cG.STAT_EVENT,ye=>{ye.stat===oL.PROXY?Et("Connection","Detected buffering proxy"):ye.stat===oL.NOPROXY&&Et("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.io()},0),$}}function nB(){return"undefined"!=typeof window?window:null}function ET(){return"undefined"!=typeof document?document:null}function bb(n){return new t6(n,!0)}class N1{constructor(t,e,r=1e3,i=1.5,o=6e4){this.Yn=t,this.timerId=e,this.mo=r,this.yo=i,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,e-r);i>0&&Et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class rB{constructor(t,e,r,i,o,c,h,p){this.Yn=t,this.Vo=r,this.vo=i,this.So=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new N1(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,ut.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,ut.Z)(function*(){if(t.Mo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var r=this;return(0,ut.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==t?r.No.reset():e&&e.code===nt.RESOURCE_EXHAUSTED?(as(e.toString()),as("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):e&&e.code===nt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.eo(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===e&&this.Qo(r,i)},r=>{t(()=>{const i=new vt(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(t,e){const r=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var t=this;this.state=5,this.No.Ro((0,ut.Z)(function*(){t.state=0,t.start()}))}jo(t){return Et("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget(()=>this.Do===t?e():(Et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p$ extends rB{constructor(t,e,r,i,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,c),this.M=o}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:nn(),i=t.targetChange.targetIds||[],o=function(p,_){return p.N?(Tn(void 0===_||"string"==typeof _),Es.fromBase64String(_||"")):(Tn(void 0===_||_ instanceof Uint8Array),Es.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(p){const _=void 0===p.code?nt.UNKNOWN:QL(p.code);return new vt(_,p.message||"")}(c);e=new XL(r,i,o,h||null)}else if("documentChange"in t){const r=t.documentChange,i=tu(n,r.document.name),o=Ls(r.document.updateTime),c=new Eo({mapValue:{fields:r.document.fields}}),h=mi.newFoundDocument(i,o,c);e=new uT(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const r=t.documentDelete,i=tu(n,r.document),o=r.readTime?Ls(r.readTime):wn.min(),c=mi.newNoDocument(i,o);e=new uT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const r=t.documentRemove,i=tu(n,r.document);e=new uT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return nn();{const r=t.filter,o=new WG(r.count||0);e=new JL(r.targetId,o)}}var p;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return wn.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?wn.min():o.readTime?Ls(o.readTime):wn.min()}(t);return this.listener.zo(e,r)}Ho(t){const e={};e.database=ub(this.M),e.addTarget=function(i,o){let c;const h=o.target;return c=iT(h)?{documents:u2(i,h)}:{query:d2(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=r2(i,o.resumeToken):o.snapshotVersion.compareTo(wn.min())>0&&(c.readTime=lb(i,o.snapshotVersion.toTimestamp())),c}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nn()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Lo(e)}Jo(t){const e={};e.database=ub(this.M),e.removeTarget=t,this.Lo(e)}}class g$ extends rB{constructor(t,e,r,i,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,c),this.M=o,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(Tn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function(n,t){return n&&n.length>0?(Tn(void 0!==t),n.map(e=>function(r,i){let o=Ls(r.updateTime?r.updateTime:i);return o.isEqual(wn.min())&&(o=Ls(i)),new zG(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=Ls(t.commitTime);return this.listener.tu(r,e)}return Tn(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=ub(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>db(this.M,r))};this.Lo(e)}}class m$ extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new vt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So.co(t,e,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new vt(nt.UNKNOWN,i.toString())})}_o(t,e,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So._o(t,e,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new vt(nt.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class _${constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(as(e),this.uu=!1):Et("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class y${constructor(t,e,r,i,o){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.Kr(h=>{r.enqueueAndForget((0,ut.Z)(function*(){var p;Ch(c)&&(Et("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ut.Z)(function*(_){const E=zt(_);E.wu.add(4),yield R_(E),E.yu.set("Unknown"),E.wu.delete(4),yield wb(E)}),function(_){return p.apply(this,arguments)})(c))}))}),this.yu=new _$(r,i)}}function wb(n){return F1.apply(this,arguments)}function F1(){return F1=(0,ut.Z)(function*(n){if(Ch(n))for(const t of n.mu)yield t(!0)}),F1.apply(this,arguments)}function R_(n){return L1.apply(this,arguments)}function L1(){return L1=(0,ut.Z)(function*(n){for(const t of n.mu)yield t(!1)}),L1.apply(this,arguments)}function IT(n,t){const e=zt(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),U1(e)?V1(e):P_(e).Mo()&&B1(e,t))}function Cb(n,t){const e=zt(n),r=P_(e);e._u.delete(t),r.Mo()&&iB(e,t),0===e._u.size&&(r.Mo()?r.$o():Ch(e)&&e.yu.set("Unknown"))}function B1(n,t){n.pu.Z(t.targetId),P_(n).Ho(t)}function iB(n,t){n.pu.Z(t),P_(n).Jo(t)}function V1(n){n.pu=new JG({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n._u.get(t)||null}),P_(n).start(),n.yu.au()}function U1(n){return Ch(n)&&!P_(n).ko()&&n._u.size>0}function Ch(n){return 0===zt(n).wu.size}function sB(n){n.pu=void 0}function v$(n){return j1.apply(this,arguments)}function j1(){return j1=(0,ut.Z)(function*(n){n._u.forEach((t,e)=>{B1(n,t)})}),j1.apply(this,arguments)}function b$(n,t){return H1.apply(this,arguments)}function H1(){return H1=(0,ut.Z)(function*(n,t){sB(n),U1(n)?(n.yu.lu(t),V1(n)):n.yu.set("Unknown")}),H1.apply(this,arguments)}function w$(n,t,e){return z1.apply(this,arguments)}function z1(){return z1=(0,ut.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof XL&&2===t.state&&t.cause)try{yield(r=(0,ut.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,t)}catch(r){Et("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield TT(n,r)}else if(t instanceof uT?n.pu.ut(t):t instanceof JL?n.pu._t(t):n.pu.ht(t),!e.isEqual(wn.min()))try{const r=yield q2(n.localStore);e.compareTo(r)>=0&&(yield function(i,o){const c=i.pu.yt(o);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i._u.get(p);_&&i._u.set(p,_.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach(h=>{const p=i._u.get(h);if(!p)return;i._u.set(h,p.withResumeToken(Es.EMPTY_BYTE_STRING,p.snapshotVersion)),iB(i,h);const _=new vh(p.target,h,1,p.sequenceNumber);B1(i,_)}),i.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(r){Et("RemoteStore","Failed to raise snapshot:",r),yield TT(n,r)}var r}),z1.apply(this,arguments)}function TT(n,t,e){return G1.apply(this,arguments)}function G1(){return G1=(0,ut.Z)(function*(n,t,e){if(!Rp(t))throw t;n.wu.add(1),yield R_(n),n.yu.set("Offline"),e||(e=()=>q2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ut.Z)(function*(){Et("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield wb(n)}))}),G1.apply(this,arguments)}function oB(n,t){return t().catch(e=>TT(n,e,t))}function O_(n){return $1.apply(this,arguments)}function $1(){return $1=(0,ut.Z)(function*(n){const t=zt(n),e=Eh(t);let r=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;C$(t);)try{const i=yield X6(t.localStore,r);if(null===i){0===t.du.length&&e.$o();break}r=i.batchId,E$(t,i)}catch(i){yield TT(t,i)}aB(t)&&lB(t)}),$1.apply(this,arguments)}function C$(n){return Ch(n)&&n.du.length<10}function E$(n,t){n.du.push(t);const e=Eh(n);e.Mo()&&e.Xo&&e.Zo(t.mutations)}function aB(n){return Ch(n)&&!Eh(n).ko()&&n.du.length>0}function lB(n){Eh(n).start()}function I$(n){return W1.apply(this,arguments)}function W1(){return W1=(0,ut.Z)(function*(n){Eh(n).nu()}),W1.apply(this,arguments)}function T$(n){return q1.apply(this,arguments)}function q1(){return q1=(0,ut.Z)(function*(n){const t=Eh(n);for(const e of n.du)t.Zo(e.mutations)}),q1.apply(this,arguments)}function S$(n,t,e){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,ut.Z)(function*(n,t,e){const r=n.du.shift(),i=f1.from(r,t,e);yield oB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield O_(n)}),Z1.apply(this,arguments)}function D$(n,t){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,ut.Z)(function*(n,t){var e;t&&Eh(n).Xo&&(yield(e=(0,ut.Z)(function*(r,i){if(KL(o=i.code)&&o!==nt.ABORTED){const c=r.du.shift();Eh(r).Fo(),yield oB(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield O_(r)}var o}),function(r,i){return e.apply(this,arguments)})(n,t)),aB(n)&&lB(n)}),Y1.apply(this,arguments)}function cB(n,t){return K1.apply(this,arguments)}function K1(){return K1=(0,ut.Z)(function*(n,t){const e=zt(n);e.asyncQueue.verifyOperationInProgress(),Et("RemoteStore","RemoteStore received new credentials");const r=Ch(e);e.wu.add(3),yield R_(e),r&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield wb(e)}),K1.apply(this,arguments)}function Q1(n,t){return J1.apply(this,arguments)}function J1(){return J1=(0,ut.Z)(function*(n,t){const e=zt(n);t?(e.wu.delete(2),yield wb(e)):t||(e.wu.add(2),yield R_(e),e.yu.set("Unknown"))}),J1.apply(this,arguments)}function P_(n){return n.Iu||(n.Iu=function(t,e,r){const i=zt(t);return i.iu(),new p$(e,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:v$.bind(null,n),eo:b$.bind(null,n),zo:w$.bind(null,n)}),n.mu.push(function(){var t=(0,ut.Z)(function*(e){e?(n.Iu.Fo(),U1(n)?V1(n):n.yu.set("Unknown")):(yield n.Iu.stop(),sB(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function Eh(n){return n.Tu||(n.Tu=function(t,e,r){const i=zt(t);return i.iu(),new g$(e,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:I$.bind(null,n),eo:D$.bind(null,n),eu:T$.bind(null,n),tu:S$.bind(null,n)}),n.mu.push(function(){var t=(0,ut.Z)(function*(e){e?(n.Tu.Fo(),yield O_(n)):(yield n.Tu.stop(),n.du.length>0&&(Et("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class X1{constructor(t,e,r,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,r,i,o){const c=Date.now()+r,h=new X1(t,e,c,i,o);return h.start(r),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(n,t){if(as("AsyncQueue",`${t}: ${n}`),Rp(n))return new vt(nt.UNAVAILABLE,`${t}: ${n}`);throw n}class F_{constructor(t){this.comparator=t?(e,r)=>t(e,r)||Nt.comparator(e.key,r.key):(e,r)=>Nt.comparator(e.key,r.key),this.keyedMap=a1(),this.sortedSet=new es(this.comparator)}static emptySet(t){return new F_(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof F_)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new F_;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class uB{constructor(){this.Eu=new es(Nt.comparator)}track(t){const e=t.doc.key,r=this.Eu.get(e);r?0!==t.type&&3===r.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==r.type?this.Eu=this.Eu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.Eu=this.Eu.remove(e):1===t.type&&2===r.type?this.Eu=this.Eu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):nn():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,r)=>{t.push(r)}),t}}class L_{constructor(t,e,r,i,o,c,h,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,r,i){const o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new L_(t,e,F_.emptySet(e),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&tb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class A${constructor(){this.Ru=void 0,this.listeners=[]}}class x${constructor(){this.queries=new yh(t=>PL(t),tb),this.onlineState="Unknown",this.bu=new Set}}function ek(n,t){return tk.apply(this,arguments)}function tk(){return tk=(0,ut.Z)(function*(n,t){const e=zt(n),r=t.query;let i=!1,o=e.queries.get(r);if(o||(i=!0,o=new A$),i)try{o.Ru=yield e.onListen(r)}catch(c){const h=N_(c,`Initialization of query '${n1(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.listeners.push(t),t.Pu(e.onlineState),o.Ru&&t.Vu(o.Ru)&&ik(e)}),tk.apply(this,arguments)}function nk(n,t){return rk.apply(this,arguments)}function rk(){return rk=(0,ut.Z)(function*(n,t){const e=zt(n),r=t.query;let i=!1;const o=e.queries.get(r);if(o){const c=o.listeners.indexOf(t);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)}),rk.apply(this,arguments)}function M$(n,t){const e=zt(n);let r=!1;for(const i of t){const c=e.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&ik(e)}function k$(n,t,e){const r=zt(n),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(e);r.queries.delete(t)}function ik(n){n.bu.forEach(t=>{t.next()})}class sk{constructor(t,e,r){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new L_(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||!(this.options.ku&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=L_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class R${constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class dB{constructor(t){this.M=t}wi(t){return tu(this.M,t)}mi(t){return t.metadata.exists?c2(this.M,t.document,!1):mi.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return Ls(t)}}class O${constructor(t,e,r){this.Ou=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hB(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=br.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,r=new dB(this.M);for(const i of t)if(i.metadata.queries){const o=r.wi(i.metadata.name);for(const c of i.metadata.queries){const h=(e.get(c)||zr()).add(o);e.set(c,h)}}return e}complete(){var t=this;return(0,ut.Z)(function*(){const e=yield function(n,t,e,r){return D1.apply(this,arguments)}(t.localStore,new dB(t.M),t.documents,t.Ou.id),r=t.$u(t.documents);for(const i of t.queries)yield t$(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function hB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fB{constructor(t){this.key=t}}class pB{constructor(t){this.key=t}}class gB{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=zr(),this.mutatedKeys=zr(),this.Gu=FL(t),this.Qu=new F_(this.Gu)}get ju(){return this.Uu}Wu(t,e){const r=e?e.zu:new uB,i=e?e.Qu:this.Qu;let o=e?e.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((E,x)=>{const $=i.get(E),se=r1(this.query,x)?x:null,ye=!!$&&this.mutatedKeys.has($.key),ze=!!se&&(se.hasLocalMutations||this.mutatedKeys.has(se.key)&&se.hasCommittedMutations);let rt=!1;$&&se?$.data.isEqual(se.data)?ye!==ze&&(r.track({type:3,doc:se}),rt=!0):this.Hu($,se)||(r.track({type:2,doc:se}),rt=!0,(p&&this.Gu(se,p)>0||_&&this.Gu(se,_)<0)&&(h=!0)):!$&&se?(r.track({type:0,doc:se}),rt=!0):$&&!se&&(r.track({type:1,doc:$}),rt=!0,(p||_)&&(h=!0)),rt&&(se?(c=c.add(se),o=ze?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),r.track({type:1,doc:E})}return{Qu:c,zu:r,ii:h,mutatedKeys:o}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const o=t.zu.Au();o.sort((_,E)=>function(x,$){const se=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nn()}};return se(x)-se($)}(_.type,E.type)||this.Gu(_.doc,E.doc)),this.Ju(r);const c=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==o.length||p?{snapshot:new L_(this.query,t.Qu,i,o,t.mutatedKeys,0===h,p,!1),Xu:c}:{Xu:c}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new uB,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=zr(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const e=[];return t.forEach(r=>{this.Ku.has(r)||e.push(new pB(r))}),this.Ku.forEach(r=>{t.has(r)||e.push(new fB(r))}),e}ta(t){this.Uu=t._i,this.Ku=zr();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return L_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class P${constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class N${constructor(t){this.key=t,this.na=!1}}class F${constructor(t,e,r,i,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new yh(h=>PL(h),tb),this.ra=new Map,this.oa=new Set,this.ua=new es(Nt.comparator),this.aa=new Map,this.ca=new x1,this.ha={},this.la=new Map,this.fa=Vp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function L$(n,t){return ok.apply(this,arguments)}function ok(){return ok=(0,ut.Z)(function*(n,t){const e=xk(n);let r,i;const o=e.ia.get(t);if(o)r=o.targetId,e.sharedClientState.addLocalQueryTarget(r),i=o.view.ea();else{const c=yield M_(e.localStore,yl(t));e.isPrimaryClient&&IT(e.remoteStore,c);const h=e.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield ak(e,t,r,"current"===h)}return i}),ok.apply(this,arguments)}function ak(n,t,e,r){return lk.apply(this,arguments)}function lk(){return lk=(0,ut.Z)(function*(n,t,e,r){n._a=(E,x,$)=>{return(se=(0,ut.Z)(function*(ye,ze,rt,It){let jt=ze.view.Wu(rt);jt.ii&&(jt=yield bT(ye.localStore,ze.query,!1).then(({documents:Sn})=>ze.view.Wu(Sn,jt)));const Vt=It&&It.targetChanges.get(ze.targetId),Ht=ze.view.applyChanges(jt,ye.isPrimaryClient,Vt);return yk(ye,ze.targetId,Ht.Xu),Ht.snapshot}),function(ye,ze,rt,It){return se.apply(this,arguments)})(n,E,x,$);var se};const i=yield bT(n.localStore,t,!0),o=new gB(t,i._i),c=o.Wu(i.documents),h=ab.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),p=o.applyChanges(c,n.isPrimaryClient,h);yk(n,e,p.Xu);const _=new P$(t,e,o);return n.ia.set(t,_),n.ra.has(e)?n.ra.get(e).push(t):n.ra.set(e,[t]),p.snapshot}),lk.apply(this,arguments)}function B$(n,t){return ck.apply(this,arguments)}function ck(){return ck=(0,ut.Z)(function*(n,t){const e=zt(n),r=e.ia.get(t),i=e.ra.get(r.targetId);if(i.length>1)return e.ra.set(r.targetId,i.filter(o=>!tb(o,t))),void e.ia.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield k_(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),Cb(e.remoteStore,r.targetId),B_(e,r.targetId)}).catch(Up))):(B_(e,r.targetId),yield k_(e.localStore,r.targetId,!0))}),ck.apply(this,arguments)}function uk(){return uk=(0,ut.Z)(function*(n,t,e){const r=Mk(n);try{const i=yield function(o,c){const h=zt(o),p=Xi.now(),_=c.reduce((x,$)=>x.add($.key),zr());let E;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>h.fi.Ks(x,_).next($=>{E=$;const se=[];for(const ye of c){const ze=$G(ye,E.get(ye.key));null!=ze&&se.push(new kp(ye.key,ze,CL(ze.value.mapValue),ls.exists(!0)))}return h.Bs.addMutationBatch(x,p,se,c)})).then(x=>(x.applyToLocalDocumentSet(E),{batchId:x.batchId,changes:E}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let p=o.ha[o.currentUser.toKey()];p||(p=new es(jn)),p=p.insert(c,h),o.ha[o.currentUser.toKey()]=p}(r,i.batchId,e),yield id(r,i.changes),yield O_(r.remoteStore)}catch(i){const o=N_(i,"Failed to persist write");e.reject(o)}}),uk.apply(this,arguments)}function mB(n,t){return dk.apply(this,arguments)}function dk(){return dk=(0,ut.Z)(function*(n,t){const e=zt(n);try{const r=yield J6(e.localStore,t);t.targetChanges.forEach((i,o)=>{const c=e.aa.get(o);c&&(Tn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Tn(c.na):i.removedDocuments.size>0&&(Tn(c.na),c.na=!1))}),yield id(e,r,t)}catch(r){yield Up(r)}}),dk.apply(this,arguments)}function _B(n,t,e){const r=zt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ia.forEach((o,c)=>{const h=c.view.Pu(t);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=zt(o);h.onlineState=c;let p=!1;h.queries.forEach((_,E)=>{for(const x of E.listeners)x.Pu(c)&&(p=!0)}),p&&ik(h)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function U$(n,t,e){return hk.apply(this,arguments)}function hk(){return hk=(0,ut.Z)(function*(n,t,e){const r=zt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.aa.get(t),o=i&&i.key;if(o){let c=new es(Nt.comparator);c=c.insert(o,mi.newNoDocument(o,wn.min()));const h=zr().add(o),p=new ob(wn.min(),new Map,new di(jn),c,h);yield mB(r,p),r.ua=r.ua.remove(o),r.aa.delete(t),vk(r)}else yield k_(r.localStore,t,!1).then(()=>B_(r,t,e)).catch(Up)}),hk.apply(this,arguments)}function j$(n,t){return fk.apply(this,arguments)}function fk(){return fk=(0,ut.Z)(function*(n,t){const e=zt(n),r=t.batch.batchId;try{const i=yield Q6(e.localStore,t);_k(e,r,null),mk(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield id(e,i)}catch(i){yield Up(i)}}),fk.apply(this,arguments)}function H$(n,t,e){return pk.apply(this,arguments)}function pk(){return pk=(0,ut.Z)(function*(n,t,e){const r=zt(n);try{const i=yield function(o,c){const h=zt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.Bs.lookupMutationBatch(p,c).next(E=>(Tn(null!==E),_=E.keys(),h.Bs.removeMutationBatch(p,E))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,_))})}(r.localStore,t);_k(r,t,e),mk(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield id(r,i)}catch(i){yield Up(i)}}),pk.apply(this,arguments)}function gk(){return gk=(0,ut.Z)(function*(n,t){const e=zt(n);Ch(e.remoteStore)||Et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=zt(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===r)return void t.resolve();const i=e.la.get(r)||[];i.push(t),e.la.set(r,i)}catch(r){const i=N_(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}}),gk.apply(this,arguments)}function mk(n,t){(n.la.get(t)||[]).forEach(e=>{e.resolve()}),n.la.delete(t)}function _k(n,t,e){const r=zt(n);let i=r.ha[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function B_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.ra.get(t))n.ia.delete(r),e&&n.sa.wa(r,e);n.ra.delete(t),n.isPrimaryClient&&n.ca.vi(t).forEach(r=>{n.ca.containsKey(r)||yB(n,r)})}function yB(n,t){n.oa.delete(t.path.canonicalString());const e=n.ua.get(t);null!==e&&(Cb(n.remoteStore,e),n.ua=n.ua.remove(t),n.aa.delete(e),vk(n))}function yk(n,t,e){for(const r of e)r instanceof fB?(n.ca.addReference(r.key,t),G$(n,r)):r instanceof pB?(Et("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,t),n.ca.containsKey(r.key)||yB(n,r.key)):nn()}function G$(n,t){const e=t.key,r=e.path.canonicalString();n.ua.get(e)||n.oa.has(r)||(Et("SyncEngine","New document in limbo: "+e),n.oa.add(r),vk(n))}function vk(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const t=n.oa.values().next().value;n.oa.delete(t);const e=new Nt(br.fromString(t)),r=n.fa.next();n.aa.set(r,new N$(e)),n.ua=n.ua.insert(e,r),IT(n.remoteStore,new vh(yl(w_(e.path)),r,2,Va.A))}}function id(n,t,e){return bk.apply(this,arguments)}function bk(){return bk=(0,ut.Z)(function*(n,t,e){const r=zt(n),i=[],o=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,p)=>{c.push(r._a(p,t,e).then(_=>{if(_){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),i.push(_);const E=I1.Ys(p.targetId,_);o.push(E)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,ut.Z)(function*(p,_){const E=zt(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ot.forEach(_,$=>ot.forEach($.Hs,se=>E.persistence.referenceDelegate.addReference(x,$.targetId,se)).next(()=>ot.forEach($.Js,se=>E.persistence.referenceDelegate.removeReference(x,$.targetId,se)))))}catch(x){if(!Rp(x))throw x;Et("LocalStore","Failed to update sequence numbers: "+x)}for(const x of _){const $=x.targetId;if(!x.fromCache){const se=E.ui.get($),ze=se.withLastLimboFreeSnapshotVersion(se.snapshotVersion);E.ui=E.ui.insert($,ze)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,o))}),bk.apply(this,arguments)}function $$(n,t){return wk.apply(this,arguments)}function wk(){return wk=(0,ut.Z)(function*(n,t){const e=zt(n);if(!e.currentUser.isEqual(t)){Et("SyncEngine","User change. New user:",t.toKey());const r=yield W2(e.localStore,t);e.currentUser=t,(i=e).la.forEach(c=>{c.forEach(h=>{h.reject(new vt(nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield id(e,r.di)}var i}),wk.apply(this,arguments)}function W$(n,t){const e=zt(n),r=e.aa.get(t);if(r&&r.na)return zr().add(r.key);{let i=zr();const o=e.ra.get(t);if(!o)return i;for(const c of o){const h=e.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function q$(n,t){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,ut.Z)(function*(n,t){const e=zt(n),r=yield bT(e.localStore,t.query,!0),i=t.view.ta(r);return e.isPrimaryClient&&yk(e,t.targetId,i.Xu),i}),Ck.apply(this,arguments)}function Z$(n,t){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,ut.Z)(function*(n,t){const e=zt(n);return K2(e.localStore,t).then(r=>id(e,r))}),Ek.apply(this,arguments)}function Y$(n,t,e,r){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,ut.Z)(function*(n,t,e,r){const i=zt(n),o=yield function(c,h){const p=zt(c),_=zt(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>_.fn(E,h).next(x=>x?p.fi.Ks(E,x):ot.resolve(null)))}(i.localStore,t);var h;null!==o?("pending"===e?yield O_(i.remoteStore):"acknowledged"===e||"rejected"===e?(_k(i,t,r||null),mk(i,t),h=t,zt(zt(i.localStore).Bs)._n(h)):nn(),yield id(i,o)):Et("SyncEngine","Cannot apply mutation batch with id: "+t)}),Ik.apply(this,arguments)}function Tk(){return Tk=(0,ut.Z)(function*(n,t){const e=zt(n);if(xk(e),Mk(e),!0===t&&!0!==e.da){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield vB(e,r.toArray());e.da=!0,yield Q1(e.remoteStore,!0);for(const o of i)IT(e.remoteStore,o)}else if(!1===t&&!1!==e.da){const r=[];let i=Promise.resolve();e.ra.forEach((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(B_(e,c),k_(e.localStore,c,!0))),Cb(e.remoteStore,c)}),yield i,yield vB(e,r),function(o){const c=zt(o);c.aa.forEach((h,p)=>{Cb(c.remoteStore,p)}),c.ca.Si(),c.aa=new Map,c.ua=new es(Nt.comparator)}(e),e.da=!1,yield Q1(e.remoteStore,!1)}}),Tk.apply(this,arguments)}function vB(n,t,e){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,ut.Z)(function*(n,t,e){const r=zt(n),i=[],o=[];for(const c of t){let h;const p=r.ra.get(c);if(p&&0!==p.length){h=yield M_(r.localStore,yl(p[0]));for(const _ of p){const E=r.ia.get(_),x=yield q$(r,E);x.snapshot&&o.push(x.snapshot)}}else{const _=yield Y2(r.localStore,c);h=yield M_(r.localStore,_),yield ak(r,bB(_),c,!1)}i.push(h)}return r.sa.zo(o),i}),Sk.apply(this,arguments)}function bB(n){return RL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Q$(n){const t=zt(n);return zt(zt(t.localStore).persistence).Fs()}function J$(n,t,e,r){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,ut.Z)(function*(n,t,e,r){const i=zt(n);if(i.da)return void Et("SyncEngine","Ignoring unexpected query state notification.");const o=i.ra.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=yield K2(i.localStore,NL(o[0])),h=ob.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield id(i,c,h);break}case"rejected":yield k_(i.localStore,t,!0),B_(i,t,r);break;default:nn()}}),Dk.apply(this,arguments)}function X$(n,t,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,ut.Z)(function*(n,t,e){const r=xk(n);if(r.da){for(const i of t){if(r.ra.has(i)){Et("SyncEngine","Adding an already active target "+i);continue}const o=yield Y2(r.localStore,i),c=yield M_(r.localStore,o);yield ak(r,bB(o),c.targetId,!1),IT(r.remoteStore,c)}for(const i of e)r.ra.has(i)&&(yield k_(r.localStore,i,!1).then(()=>{Cb(r.remoteStore,i),B_(r,i)}).catch(Up))}}),Ak.apply(this,arguments)}function xk(n){const t=zt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=mB.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=W$.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=U$.bind(null,t),t.sa.zo=M$.bind(null,t.eventManager),t.sa.wa=k$.bind(null,t.eventManager),t}function Mk(n){const t=zt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=j$.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=H$.bind(null,t),t}class wB{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ut.Z)(function*(){e.M=bb(t.databaseInfo.databaseId),e.sharedClientState=e.ga(t),e.persistence=e.ya(t),yield e.persistence.start(),e.gcScheduler=e.pa(t),e.localStore=e.Ia(t)})()}pa(t){return null}Ia(t){return $2(this.persistence,new G2,t.initialUser,this.M)}ya(t){return new l$(M1.Yi,this.M)}ga(t){return new eB}terminate(){var t=this;return(0,ut.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class CB extends wB{constructor(t,e,r){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,ut.Z)(function*(){yield e().call(r,t),yield r.Ta.initialize(r,t),yield Mk(r.Ta.syncEngine),yield O_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(t){return $2(this.persistence,new G2,t.initialUser,this.M)}pa(t){return new z6(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}ya(t){const e=E1(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?pa.withCacheSize(this.cacheSizeBytes):pa.DEFAULT;return new C1(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,nB(),ET(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new eB}}class tW extends CB{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,ut.Z)(function*(){yield e().call(r,t);const i=r.Ta.syncEngine;r.sharedClientState instanceof P1&&(r.sharedClientState.syncEngine={$r:Y$.bind(null,i),Br:J$.bind(null,i),Lr:X$.bind(null,i),Fs:Q$.bind(null,i),Fr:Z$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var o=(0,ut.Z)(function*(c){yield function(n,t){return Tk.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}ga(t){const e=nB();if(!P1.vt(e))throw new vt(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=E1(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new P1(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class kk{initialize(t,e){var r=this;return(0,ut.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>_B(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=$$.bind(null,r.syncEngine),yield Q1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x$}createDatastore(t){const e=bb(t.databaseInfo.databaseId),r=new f$(t.databaseInfo);return new m$(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,o=h=>_B(this.syncEngine,h,0),c=tB.vt()?new tB:new u$,new y$(e,r,i,o,c);var e,r,i,o,c}createSyncEngine(t,e){return function(r,i,o,c,h,p,_){const E=new F$(r,i,o,c,h,p);return _&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ut.Z)(function*(e){const r=zt(e);Et("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield R_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function EB(n,t=10240){let e=0;return{read:()=>(0,ut.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,ut.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ST{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class nW{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new Fs,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var t=this;return(0,ut.Z)(function*(){return t.metadata.promise})()}ma(){var t=this;return(0,ut.Z)(function*(){return yield t.getMetadata(),t.Pa()})()}Pa(){var t=this;return(0,ut.Z)(function*(){const e=yield t.Va();if(null===e)return null;const r=t.ba.decode(e),i=Number(r);isNaN(i)&&t.va(`length string (${r}) is not valid number`);const o=yield t.Sa(i);return new R$(JSON.parse(o),e.length+i)})()}Da(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Va(){var t=this;return(0,ut.Z)(function*(){for(;t.Da()<0&&!(yield t.Ca()););if(0===t.buffer.length)return null;const e=t.Da();e<0&&t.va("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}Sa(t){var e=this;return(0,ut.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ca())&&e.va("Reached the end of bundle when more is expected.");const r=e.ba.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}Ca(){var t=this;return(0,ut.Z)(function*(){const e=yield t.Ra.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class rW{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ut.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new vt(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ut.Z)(function*(o,c){const h=zt(o),p=ub(h.M)+"/documents",_={documents:c.map(se=>cb(h.M,se))},E=yield h._o("BatchGetDocuments",p,_),x=new Map;E.forEach(se=>{const ye=function(n,t){return"found"in t?function(e,r){Tn(!!r.found);const i=tu(e,r.found.name),o=Ls(r.found.updateTime),c=new Eo({mapValue:{fields:r.found.fields}});return mi.newFoundDocument(i,o,c)}(n,t):"missing"in t?function(e,r){Tn(!!r.missing),Tn(!!r.readTime);const i=tu(e,r.missing),o=Ls(r.readTime);return mi.newNoDocument(i,o)}(n,t):nn()}(h.M,se);x.set(ye.key.toString(),ye)});const $=[];return c.forEach(se=>{const ye=x.get(se.toString());Tn(!!ye),$.push(ye)}),$}),function(o,c){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new ib(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ut.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const o=Nt.fromPath(i);t.mutations.push(new o1(o,t.precondition(o)))}),yield(r=(0,ut.Z)(function*(i,o){const c=zt(i),h=ub(c.M)+"/documents",p={writes:o.map(_=>db(c.M,_))};yield c.co("Commit",h,p)}),function(i,o){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw nn();e=wn.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new vt(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ls.updateTime(e):ls.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(wn.min()))throw new vt(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ls.updateTime(e)}return ls.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class iW{constructor(t,e,r,i,o){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=i,this.deferred=o,this.xa=r.maxAttempts,this.No=new N1(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var t=this;this.No.Ro((0,ut.Z)(function*(){const e=new rW(t.datastore),r=t.ka(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(o=>{t.Ma(o)}))}).catch(i=>{t.Ma(i)})}))}ka(t){try{const e=this.updateFunction(t);return!Z0(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!KL(e)}return!1}}class sW{constructor(t,e,r,i){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=no.UNAUTHENTICATED,this.clientId=uL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ut.Z)(function*(h){Et("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Et("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,ut.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ut.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=N_(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function IB(n,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,ut.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Et("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,ut.Z)(function*(o){r.isEqual(o)||(yield W2(t.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),Rk.apply(this,arguments)}function TB(n,t){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,ut.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield Pk(n);Et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>cB(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>cB(t.remoteStore,o)),n.onlineComponents=t}),Ok.apply(this,arguments)}function Pk(n){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,ut.Z)(function*(n){return n.offlineComponents||(Et("FirestoreClient","Using default OfflineComponentProvider"),yield IB(n,new wB)),n.offlineComponents}),Nk.apply(this,arguments)}function DT(n){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,ut.Z)(function*(n){return n.onlineComponents||(Et("FirestoreClient","Using default OnlineComponentProvider"),yield TB(n,new kk)),n.onlineComponents}),Fk.apply(this,arguments)}function SB(n){return Pk(n).then(t=>t.persistence)}function Lk(n){return Pk(n).then(t=>t.localStore)}function DB(n){return DT(n).then(t=>t.remoteStore)}function Bk(n){return DT(n).then(t=>t.syncEngine)}function V_(n){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,ut.Z)(function*(n){const t=yield DT(n),e=t.eventManager;return e.onListen=L$.bind(null,t.syncEngine),e.onUnlisten=B$.bind(null,t.syncEngine),e}),Vk.apply(this,arguments)}function AB(n,t,e={}){const r=new Fs;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(i,o,c,h,p){const _=new ST({next:x=>{o.enqueueAndForget(()=>nk(i,E));const $=x.docs.has(c);!$&&x.fromCache?p.reject(new vt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&x.fromCache&&h&&"server"===h.source?p.reject(new vt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),E=new sk(w_(c.path),_,{includeMetadataChanges:!0,ku:!0});return ek(i,E)}(yield V_(n),n.asyncQueue,t,e,r)})),r.promise}function xB(n,t,e={}){const r=new Fs;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(i,o,c,h,p){const _=new ST({next:x=>{o.enqueueAndForget(()=>nk(i,E)),x.fromCache&&"server"===h.source?p.reject(new vt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),E=new sk(c,_,{includeMetadataChanges:!0,ku:!0});return ek(i,E)}(yield V_(n),n.asyncQueue,t,e,r)})),r.promise}const MB=new Map;function Uk(n,t,e){if(!e)throw new vt(nt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function kB(n,t,e,r){if(!0===t&&!0===r)throw new vt(nt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function RB(n){if(!Nt.isDocumentKey(n))throw new vt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OB(n){if(Nt.isDocumentKey(n))throw new vt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":nn()}function mr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new vt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=AT(n);throw new vt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function PB(n,t){if(t<=0)throw new vt(nt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class NB{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new vt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new vt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Eb{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NB({}),this._settingsFrozen=!1,t instanceof nd?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new vt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nd(i.options.projectId)}(t))}get app(){if(!this._app)throw new vt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new vt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NB(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new pG;switch(e.type){case"gapi":const r=e.client;return Tn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new yG(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new vt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=MB.get(t);e&&(Et("ComponentProvider","Removing Datastore"),MB.delete(t),e.terminate())}(this),Promise.resolve()}}class _i{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _i(this.firestore,t,this._key)}}class Io{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Io(this.firestore,t,this._query)}}class ru extends Io{constructor(t,e,r){super(t,e,w_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _i(this.firestore,null,new Nt(t))}withConverter(t){return new ru(this.firestore,t,this._path)}}function FB(n,t,...e){if(n=(0,ae.m9)(n),Uk("collection","path",t),n instanceof Eb){const r=br.fromString(t,...e);return OB(r),new ru(n,null,r)}{if(!(n instanceof _i||n instanceof ru))throw new vt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(br.fromString(t,...e));return OB(r),new ru(n.firestore,null,r)}}function xT(n,t,...e){if(n=(0,ae.m9)(n),1===arguments.length&&(t=uL.R()),Uk("doc","path",t),n instanceof Eb){const r=br.fromString(t,...e);return RB(r),new _i(n,null,new Nt(r))}{if(!(n instanceof _i||n instanceof ru))throw new vt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(br.fromString(t,...e));return RB(r),new _i(n.firestore,n instanceof ru?n.converter:null,new Nt(r))}}function LB(n,t){return n=(0,ae.m9)(n),t=(0,ae.m9)(t),(n instanceof _i||n instanceof ru)&&(t instanceof _i||t instanceof ru)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function BB(n,t){return n=(0,ae.m9)(n),t=(0,ae.m9)(t),n instanceof Io&&t instanceof Io&&n.firestore===t.firestore&&tb(n._query,t._query)&&n.converter===t.converter}class mW{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new N1(this,"async_queue_retry"),this.Qa=()=>{const e=ET();e&&Et("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=ET();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=ET();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise(()=>{});const e=new Fs;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.$a.push(t),this.za()))}za(){var t=this;return(0,ut.Z)(function*(){if(0!==t.$a.length){try{yield t.$a[0](),t.$a.shift(),t.No.reset()}catch(e){if(!Rp(e))throw e;Et("AsyncQueue","Operation failed with retryable error: "+e)}t.$a.length>0&&t.No.Ro(()=>t.za())}})()}Wa(t){const e=this.Fa.then(()=>(this.qa=!0,t().catch(r=>{throw this.Ua=r,this.qa=!1,as("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=e,e}enqueueAfterDelay(t,e,r){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const i=X1.createAndSchedule(this,t,e,r,o=>this.Ha(o));return this.La.push(i),i}ja(){this.Ua&&nn()}verifyOperationInProgress(){}Ja(){var t=this;return(0,ut.Z)(function*(){let e;do{e=t.Fa,yield e}while(e!==t.Fa)})()}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then(()=>{this.La.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()})}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function jk(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _W{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ii extends Eb{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new mW,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||VB(this),this._firestoreClient.terminate()}}function us(n){return n._firestoreClient||VB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VB(n){var t;const e=n._freezeSettings(),r=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new IG(n._databaseId,o,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new sW(n._authCredentials,n._appCheckCredentials,n._queue,r)}function UB(n,t,e){const r=new Fs;return n.asyncQueue.enqueue((0,ut.Z)(function*(){try{yield IB(n,e),yield TB(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(o=i).name?o.code===nt.FAILED_PRECONDITION||o.code===nt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var o})).then(()=>r.promise)}function jB(n){if(n._initialized||n._terminated)throw new vt(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new vt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cs(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class iu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new iu(Es.fromBase64String(t))}catch(e){throw new vt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new iu(Es.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Hp{constructor(t){this._methodName=t}}class MT{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new vt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new vt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return jn(this._lat,t._lat)||jn(this._long,t._long)}}const DW=/^__.*__$/;class AW{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new kp(t,this.data,this.fieldMask,e,this.fieldTransforms):new rb(t,this.data,e,this.fieldTransforms)}}class HB{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new kp(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function zB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nn()}}class kT{constructor(t,e,r,i,o,c){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===o&&this.tc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new kT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.nc({path:r,ic:!1});return i.rc(t),i}oc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return PT(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(zB(this.ec)&&DW.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class xW{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||bb(t)}lc(t,e,r,i=!1){return new kT({ec:t,methodName:e,hc:r,path:Cs.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function zp(n){const t=n._freezeSettings(),e=bb(n._databaseId);return new xW(n._databaseId,!!t.ignoreUndefinedProperties,e)}function RT(n,t,e,r,i,o={}){const c=n.lc(o.merge||o.mergeFields?2:0,t,e,i);$k("Data must be an object, but it was:",c,r);const h=WB(r,c);let p,_;if(o.merge)p=new __(c.fieldMask),_=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const x of o.mergeFields){const $=Wk(t,x,e);if(!c.contains($))throw new vt(nt.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);ZB(E,$)||E.push($)}p=new __(E),_=c.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,_=c.fieldTransforms;return new AW(new Eo(h),p,_)}class Ib extends Hp{_toFieldTransform(t){if(2!==t.ec)throw t.ac(1===t.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ib}}function GB(n,t,e){return new kT({ec:3,hc:t.settings.hc,methodName:n._methodName,ic:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class Hk extends Hp{_toFieldTransform(t){return new nb(t.path,new E_)}isEqual(t){return t instanceof Hk}}class MW extends Hp{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=GB(this,t,!0),r=this.fc.map(o=>Gp(o,e)),i=new xp(r);return new nb(t.path,i)}isEqual(t){return this===t}}class kW extends Hp{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=GB(this,t,!0),r=this.fc.map(o=>Gp(o,e)),i=new Mp(r);return new nb(t.path,i)}isEqual(t){return this===t}}class RW extends Hp{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new I_(t.M,VL(t.M,this.dc));return new nb(t.path,e)}isEqual(t){return this===t}}function zk(n,t,e,r){const i=n.lc(1,t,e);$k("Data must be an object, but it was:",i,r);const o=[],c=Eo.empty();Ep(r,(p,_)=>{const E=OT(t,p,e);_=(0,ae.m9)(_);const x=i.oc(E);if(_ instanceof Ib)o.push(E);else{const $=Gp(_,x);null!=$&&(o.push(E),c.set(E,$))}});const h=new __(o);return new HB(c,h,i.fieldTransforms)}function Gk(n,t,e,r,i,o){const c=n.lc(1,t,e),h=[Wk(t,r,e)],p=[i];if(o.length%2!=0)throw new vt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<o.length;$+=2)h.push(Wk(t,o[$])),p.push(o[$+1]);const _=[],E=Eo.empty();for(let $=h.length-1;$>=0;--$)if(!ZB(_,h[$])){const se=h[$];let ye=p[$];ye=(0,ae.m9)(ye);const ze=c.oc(se);if(ye instanceof Ib)_.push(se);else{const rt=Gp(ye,ze);null!=rt&&(_.push(se),E.set(se,rt))}}const x=new __(_);return new HB(E,x,c.fieldTransforms)}function $B(n,t,e,r=!1){return Gp(e,n.lc(r?4:3,t))}function Gp(n,t){if(qB(n=(0,ae.m9)(n)))return $k("Unsupported field value:",t,n),WB(n,t);if(n instanceof Hp)return function(e,r){if(!zB(r.ec))throw r.ac(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,r){const i=[];let o=0;for(const c of e){let h=Gp(c,r.uc(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,ae.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return VL(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Xi.fromDate(e);return{timestampValue:lb(r.M,i)}}if(e instanceof Xi){const i=new Xi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lb(r.M,i)}}if(e instanceof MT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iu)return{bytesValue:r2(r.M,e._byteString)};if(e instanceof _i){const i=r.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw r.ac(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:l1(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.ac(`Unsupported field value: ${AT(e)}`)}(n,t)}function WB(n,t){const e={};return fL(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ep(n,(r,i)=>{const o=Gp(i,t.sc(r));null!=o&&(e[r]=o)}),{mapValue:{fields:e}}}function qB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xi||n instanceof MT||n instanceof iu||n instanceof _i||n instanceof Hp)}function $k(n,t,e){if(!qB(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=AT(e);throw t.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function Wk(n,t,e){if((t=(0,ae.m9)(t))instanceof sd)return t._internalPath;if("string"==typeof t)return OT(n,t);throw PT("Field path arguments must be of type string or ",n,!1,void 0,e)}const OW=new RegExp("[~\\*/\\[\\]]");function OT(n,t,e){if(t.search(OW)>=0)throw PT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new sd(...t.split("."))._internalPath}catch(r){throw PT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function PT(n,t,e,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new vt(nt.INVALID_ARGUMENT,h+n+p)}function ZB(n,t){return n.some(e=>e.isEqual(t))}class Tb{constructor(t,e,r,i,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new PW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(NT("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class PW extends Tb{data(){return super.data()}}function NT(n,t){return"string"==typeof t?OT(n,t):t instanceof sd?t._internalPath:t._delegate._internalPath}class $p{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class od extends Tb{constructor(t,e,r,i,o,c){super(t,e,r,i,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Sb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(NT("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class Sb extends od{data(t={}){return super.data(t)}}class Ih{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new $p(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Sb(this._firestore,this._userDataWriter,r.key,r,new $p(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Sb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $p(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new Sb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $p(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),_=o.indexOf(c.doc.key)),{type:NW(c.type),doc:h,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function NW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nn()}}function YB(n,t){return n instanceof od&&t instanceof od?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Ih&&t instanceof Ih&&n._firestore===t._firestore&&BB(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function KB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new vt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Db{}function Th(n,...t){for(const e of t)n=e._apply(n);return n}class FW extends Db{constructor(t,e,r){super(),this._c=t,this.wc=e,this.mc=r,this.type="where"}_apply(t){const e=zp(t.firestore),r=function(i,o,c,h,p,_,E){let x;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new vt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){nV(E,_);const se=[];for(const ye of E)se.push(tV(h,i,ye));x={arrayValue:{values:se}}}else x=tV(h,i,E)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||nV(E,_),x=$B(c,"where",E,"in"===_||"not-in"===_);const $=io.create(p,_,x);return function(se,ye){if(ye.S()){const rt=e1(se);if(null!==rt&&!rt.isEqual(ye.field))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${rt.toString()}' and '${ye.field.toString()}'`);const It=XM(se);null!==It&&rV(0,ye.field,It)}const ze=function(rt,It){for(const jt of rt.filters)if(It.indexOf(jt.op)>=0)return jt.op;return null}(se,function(rt){switch(rt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ye.op));if(null!==ze)throw new vt(nt.INVALID_ARGUMENT,ze===ye.op?`Invalid query. You cannot use more than one '${ye.op.toString()}' filter.`:`Invalid query. You cannot use '${ye.op.toString()}' filters with '${ze.toString()}' filters.`)}(i,$),$}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new Io(t.firestore,t.converter,function(i,o){const c=i.filters.concat([o]);return new rd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class BW extends Db{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(r,i,o){if(null!==r.startAt)throw new vt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new vt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new b_(i,o);return function(h,p){if(null===XM(h)){const _=e1(h);null!==_&&rV(0,_,p.field)}}(r,c),c}(t._query,this._c,this.gc);return new Io(t.firestore,t.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new rd(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class QB extends Db{constructor(t,e,r){super(),this.type=t,this.yc=e,this.Ic=r}_apply(t){return new Io(t.firestore,t.converter,OL(t._query,this.yc,this.Ic))}}class JB extends Db{constructor(t,e,r){super(),this.type=t,this.Tc=e,this.Ec=r}_apply(t){const e=eV(t,this.type,this.Tc,this.Ec);return new Io(t.firestore,t.converter,(i=e,new rd((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XB extends Db{constructor(t,e,r){super(),this.type=t,this.Tc=e,this.Ec=r}_apply(t){const e=eV(t,this.type,this.Tc,this.Ec);return new Io(t.firestore,t.converter,(i=e,new rd((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function eV(n,t,e,r){if(e[0]=(0,ae.m9)(e[0]),e[0]instanceof Tb)return function(i,o,c,h,p){if(!h)throw new vt(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const E of C_(i))if(E.field.isKeyField())_.push(Sp(o,h.key));else{const x=h.data.field(E.field);if(YM(x))throw new vt(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const $=E.field.canonicalString();throw new vt(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}_.push(x)}return new _h(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=zp(n.firestore);return function(o,c,h,p,_,E){const x=o.explicitOrderBy;if(_.length>x.length)throw new vt(nt.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let se=0;se<_.length;se++){const ye=_[se];if(x[se].field.isKeyField()){if("string"!=typeof ye)throw new vt(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof ye}`);if(!t1(o)&&-1!==ye.indexOf("/"))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${ye}' contains a slash.`);const ze=o.path.child(br.fromString(ye));if(!Nt.isDocumentKey(ze))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ze}' is not because it contains an odd number of segments.`);const rt=new Nt(ze);$.push(Sp(c,rt))}else{const ze=$B(h,p,ye);$.push(ze)}}return new _h($,E)}(n._query,n.firestore._databaseId,i,t,e,r)}}function tV(n,t,e){if("string"==typeof(e=(0,ae.m9)(e))){if(""===e)throw new vt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t1(t)&&-1!==e.indexOf("/"))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(br.fromString(e));if(!Nt.isDocumentKey(r))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sp(n,new Nt(r))}if(e instanceof _i)return Sp(n,e._key);throw new vt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AT(e)}.`)}function nV(n,t){if(!Array.isArray(n)||0===n.length)throw new vt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new vt(nt.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function rV(n,t,e){if(!e.isEqual(t))throw new vt(nt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const WW={maxAttempts:5};class qk{convertValue(t,e="none"){switch(Tp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ip(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw nn()}}convertObject(t,e){const r={};return Ep(t.fields,(i,o)=>{r[i]=this.convertValue(o,e)}),r}convertGeoPoint(t){return new MT(Hi(t.latitude),Hi(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=pL(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(q0(t));default:return null}}convertTimestamp(t){const e=ph(t);return new Xi(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=br.fromString(t);Tn(p2(r));const i=new nd(r.get(1),r.get(3)),o=new Nt(r.popFirst(5));return i.isEqual(e)||as(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function FT(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class qW extends qk{constructor(t){super(),this.firestore=t}convertBytes(t){return new iu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _i(this.firestore,null,e)}}class iV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=zp(t)}set(t,e,r){this._verifyNotCommitted();const i=Sh(t,this._firestore),o=FT(i.converter,e,r),c=RT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ls.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const o=Sh(t,this._firestore);let c;return c="string"==typeof(e=(0,ae.m9)(e))||e instanceof sd?Gk(this._dataReader,"WriteBatch.update",o._key,e,r,i):zk(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,ls.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Sh(t,this._firestore);return this._mutations=this._mutations.concat(new ib(e._key,ls.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sh(n,t){if((n=(0,ae.m9)(n)).firestore!==t)throw new vt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Wp extends qk{constructor(t){super(),this.firestore=t}convertBytes(t){return new iu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _i(this.firestore,null,e)}}function sV(n,t,e){n=mr(n,_i);const r=mr(n.firestore,Ii),i=FT(n.converter,t,e);return U_(r,[RT(zp(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,ls.none())])}function oV(n,t,e,...r){n=mr(n,_i);const i=mr(n.firestore,Ii),o=zp(i);let c;return c="string"==typeof(t=(0,ae.m9)(t))||t instanceof sd?Gk(o,"updateDoc",n._key,t,e,r):zk(o,"updateDoc",n._key,t),U_(i,[c.toMutation(n._key,ls.exists(!0))])}function aV(n,...t){var e,r,i;n=(0,ae.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||jk(t[c])||(o=t[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(jk(t[c])){const x=t[c];t[c]=null===(e=x.next)||void 0===e?void 0:e.bind(x),t[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),t[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let p,_,E;if(n instanceof _i)_=mr(n.firestore,Ii),E=w_(n._key.path),p={next:x=>{t[c]&&t[c](Zk(_,n,x))},error:t[c+1],complete:t[c+2]};else{const x=mr(n,Io);_=mr(x.firestore,Ii),E=x._query;const $=new Wp(_);p={next:se=>{t[c]&&t[c](new Ih(_,$,x,se))},error:t[c+1],complete:t[c+2]},KB(n._query)}return function(x,$,se,ye){const ze=new ST(ye),rt=new sk($,ze,se);return x.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return ek(yield V_(x),rt)})),()=>{ze.Aa(),x.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return nk(yield V_(x),rt)}))}}(us(_),E,h,p)}function U_(n,t){return function(e,r){const i=new Fs;return e.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(n,t,e){return uk.apply(this,arguments)}(yield Bk(e),r,i)})),i.promise}(us(n),t)}function Zk(n,t,e){const r=e.docs.get(t._key),i=new Wp(n);return new od(n,i,t._key,r,new $p(e.hasPendingWrites,e.fromCache),t.converter)}class rq extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=zp(t)}get(t){const e=Sh(t,this._firestore),r=new qW(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return nn();const o=i[0];if(o.isFoundDocument())return new Tb(this._firestore,r,o.key,o,e.converter);if(o.isNoDocument())return new Tb(this._firestore,r,e._key,null,e.converter);throw nn()})}set(t,e,r){const i=Sh(t,this._firestore),o=FT(i.converter,e,r),c=RT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(t,e,r,...i){const o=Sh(t,this._firestore);let c;return c="string"==typeof(e=(0,ae.m9)(e))||e instanceof sd?Gk(this._dataReader,"Transaction.update",o._key,e,r,i):zk(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=Sh(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Sh(t,this._firestore),r=new Wp(this._firestore);return super.get(t).then(i=>new od(this._firestore,r,e._key,i._document,new $p(!1,!1),e.converter))}}function Yk(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new vt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function cV(){if("undefined"==typeof Uint8Array)throw new vt("unimplemented","Uint8Arrays are not available in this environment.")}function uV(){if("undefined"==typeof atob)throw new vt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){g_=Fa.SDK_VERSION,(0,Fa._registerComponent)(new cc.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),o=new Ii(i,new mG(e.getProvider("auth-internal")),new vG(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC")),(0,Fa.registerVersion)(aL,"3.4.9",n),(0,Fa.registerVersion)(aL,"3.4.9","esm2017")}();class Ab{constructor(t){this._delegate=t}static fromBase64String(t){return uV(),new Ab(iu.fromBase64String(t))}static fromUint8Array(t){return cV(),new Ab(iu.fromUint8Array(t))}toBase64(){return uV(),this._delegate.toBase64()}toUint8Array(){return cV(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Kk(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class fq{enableIndexedDbPersistence(t,e){return function(n,t){jB(n=mr(n,Ii));const e=us(n),r=n._freezeSettings(),i=new kk;return UB(e,i,new CB(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){jB(n=mr(n,Ii));const t=us(n),e=n._freezeSettings(),r=new kk;return UB(t,r,new tW(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new vt(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ut.Z)(function*(){try{yield(e=(0,ut.Z)(function*(r){if(!hc.vt())return Promise.resolve();const i=r+"main";yield hc.delete(i)}),function(r){return e.apply(this,arguments)})(E1(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class dV{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof nd||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&$0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const o=(n=mr(n,Eb))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&$0("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=no.MOCK_USER;else{c=(0,ae.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new vt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new no(p)}n._authCredentials=new gG(new lL(c,h))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ut.Z)(function*(){const t=yield SB(n),e=yield DB(n);return t.setNetworkEnabled(!0),function(r){const i=zt(r);return i.wu.delete(0),wb(i)}(e)}))}(us(n=mr(n,Ii)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ut.Z)(function*(){const t=yield SB(n),e=yield DB(n);return t.setNetworkEnabled(!1),(r=(0,ut.Z)(function*(i){const o=zt(i);o.wu.add(0),yield R_(o),o.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(us(n=mr(n,Ii)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,kB("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new Fs;return t.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return function(n,t){return gk.apply(this,arguments)}(yield Bk(t),e)})),e.promise}(us(n=mr(n,Ii)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new ST(t);return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return r=yield V_(n),i=e,zt(r).bu.add(i),void i.next();var r,i})),()=>{e.Aa(),n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return r=yield V_(n),i=e,void zt(r).bu.delete(i);var r,i}))}}(us(n=mr(n,Ii)),jk(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new vt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new j_(this,FB(this._delegate,t))}catch(e){throw Ho(e,"collection()","Firestore.collection()")}}doc(t){try{return new bl(this,xT(this._delegate,t))}catch(e){throw Ho(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new zo(this,function(n,t){if(n=mr(n,Eb),Uk("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new vt(nt.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Io(n,null,(e=t,new rd(br.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ho(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t,e){n=mr(n,Ii);const r=Object.assign(Object.assign({},WW),e);return function(i){if(i.maxAttempts<1)throw new vt(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,t,e){const r=new Fs;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){const i=yield(o=n,DT(o).then(c=>c.datastore));var o;new iW(n.asyncQueue,i,e,t,r).run()})),r.promise}(us(n),i=>t(new rq(n,i)),r)}(this._delegate,e=>t(new hV(this,e)))}batch(){return us(this._delegate),new fV(new iV(this._delegate,t=>U_(this._delegate,t)))}loadBundle(t){return function(n,t){const e=us(n=mr(n,Ii)),r=new _W;return function(n,t,e,r){const i=function(o,c){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,_){if(p instanceof Uint8Array)return EB(p,_);if(p instanceof ArrayBuffer)return EB(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new nW(p,c);var p}(e,bb(t));n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){!function(n,t,e){const r=zt(n);var i;(i=(0,ut.Z)(function*(o,c,h){try{const p=yield c.getMetadata();if(yield function($,se){const ye=zt($),ze=Ls(se.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",rt=>ye._s.getBundleMetadata(rt,se.id)).then(rt=>!!rt&&rt.createTime.compareTo(ze)>=0)}(o.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:($=p).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);h._updateProgress(hB(p));const _=new O$(p,o.localStore,c.M);let E=yield c.ma();for(;E;){const $=yield _.Fu(E);$&&h._updateProgress($),E=yield c.ma()}const x=yield _.complete();return yield id(o,x.Lu,void 0),yield function($,se){const ye=zt($);return ye.persistence.runTransaction("Save bundle","readwrite",ze=>ye._s.saveBundleMetadata(ze,se))}(o.localStore,p),h._completeWith(x.progress),Promise.resolve(x.Bu)}catch(p){return $0("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var $}),function(o,c,h){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Bk(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,ut.Z)(function*(){return function(e,r){const i=zt(e);return i.persistence.runTransaction("Get named query","readonly",o=>i._s.getNamedQuery(o,r))}(yield Lk(n),t)}))}(us(n=mr(n,Ii)),t).then(e=>e?new Io(n,null,e.query):null)}(this._delegate,t).then(e=>e?new zo(this,e):null)}}class LT extends qk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ab(new iu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return bl.forKey(e,this.firestore,null)}}class hV{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new LT(t)}get(t){const e=Zp(t);return this._delegate.get(e).then(r=>new xb(this._firestore,new od(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Zp(t);return r?(Yk("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=Zp(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=Zp(t);return this._delegate.delete(e),this}}class fV{constructor(t){this._delegate=t}set(t,e,r){const i=Zp(t);return r?(Yk("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=Zp(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=Zp(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class qp{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new Sb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Mb(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=qp.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let o=i.get(e);return o||(o=new qp(t,new LT(t),e),i.set(e,o)),o}}qp.INSTANCES=new WeakMap;class bl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new LT(t)}static forPath(t,e,r){if(t.length%2!=0)throw new vt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new bl(e,new _i(e._delegate,r,new Nt(t)))}static forKey(t,e,r){return new bl(e,new _i(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new j_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new j_(this.firestore,FB(this._delegate,t))}catch(e){throw Ho(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,ae.m9)(t))instanceof _i&&LB(this._delegate,t)}set(t,e){e=Yk("DocumentReference.set",e);try{return e?sV(this._delegate,t,e):sV(this._delegate,t)}catch(r){throw Ho(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?oV(this._delegate,t):oV(this._delegate,t,e,...r)}catch(i){throw Ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return U_(mr(n.firestore,Ii),[new ib(n._key,ls.none())])}(this._delegate)}onSnapshot(...t){const e=pV(t),r=gV(t,i=>new xb(this.firestore,new od(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return aV(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=mr(n,_i);const t=mr(n.firestore,Ii),e=us(t),r=new Wp(t);return function(n,t){const e=new Fs;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return(r=(0,ut.Z)(function*(i,o,c){try{const h=yield function(p,_){const E=zt(p);return E.persistence.runTransaction("read document","readonly",x=>E.fi.Ls(x,_))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new vt(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=N_(h,`Failed to get document '${o} from cache`);c.reject(p)}}),function(i,o,c){return r.apply(this,arguments)})(yield Lk(n),t,e);var r})),e.promise}(e,n._key).then(i=>new od(t,r,n._key,i,new $p(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=mr(n,_i);const t=mr(n.firestore,Ii);return AB(us(t),n._key,{source:"server"}).then(e=>Zk(t,n,e))}(this._delegate):function(n){n=mr(n,_i);const t=mr(n.firestore,Ii);return AB(us(t),n._key).then(e=>Zk(t,n,e))}(this._delegate),e.then(r=>new xb(this.firestore,new od(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new bl(this.firestore,this._delegate.withConverter(t?qp.getInstance(this.firestore,t):null))}}function Ho(n,t,e){return n.message=n.message.replace(t,e),n}function pV(n){for(const t of n)if("object"==typeof t&&!Kk(t))return t;return{}}function gV(n,t){var e,r;let i;return i=Kk(n[0])?n[0]:Kk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(t(o))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class xb{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new bl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return YB(this._delegate,t._delegate)}}class Mb extends xb{data(t){const e=this._delegate.data(t);return function(n,t){n||nn()}(void 0!==e),e}}class zo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new LT(t)}where(t,e,r){try{return new zo(this.firestore,Th(this._delegate,function(n,t,e){const r=t,i=NT("where",n);return new FW(i,r,e)}(t,e,r)))}catch(i){throw Ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new zo(this.firestore,Th(this._delegate,function(n,t="asc"){const e=t,r=NT("orderBy",n);return new BW(r,e)}(t,e)))}catch(r){throw Ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new zo(this.firestore,Th(this._delegate,function(n){return PB("limit",n),new QB("limit",n,"F")}(t)))}catch(e){throw Ho(e,"limit()","Query.limit()")}}limitToLast(t){try{return new zo(this.firestore,Th(this._delegate,function(n){return PB("limitToLast",n),new QB("limitToLast",n,"L")}(t)))}catch(e){throw Ho(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new zo(this.firestore,Th(this._delegate,function(...n){return new JB("startAt",n,!0)}(...t)))}catch(e){throw Ho(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new zo(this.firestore,Th(this._delegate,function(...n){return new JB("startAfter",n,!1)}(...t)))}catch(e){throw Ho(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new zo(this.firestore,Th(this._delegate,function(...n){return new XB("endBefore",n,!1)}(...t)))}catch(e){throw Ho(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new zo(this.firestore,Th(this._delegate,function(...n){return new XB("endAt",n,!0)}(...t)))}catch(e){throw Ho(e,"endAt()","Query.endAt()")}}isEqual(t){return BB(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=mr(n,Io);const t=mr(n.firestore,Ii),e=us(t),r=new Wp(t);return function(n,t){const e=new Fs;return n.asyncQueue.enqueueAndForget((0,ut.Z)(function*(){return(r=(0,ut.Z)(function*(i,o,c){try{const h=yield bT(i,o,!0),p=new gB(o,h._i),_=p.Wu(h.documents),E=p.applyChanges(_,!1);c.resolve(E.snapshot)}catch(h){const p=N_(h,`Failed to execute query '${o} against cache`);c.reject(p)}}),function(i,o,c){return r.apply(this,arguments)})(yield Lk(n),t,e);var r})),e.promise}(e,n._query).then(i=>new Ih(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=mr(n,Io);const t=mr(n.firestore,Ii),e=us(t),r=new Wp(t);return xB(e,n._query,{source:"server"}).then(i=>new Ih(t,r,n,i))}(this._delegate):function(n){n=mr(n,Io);const t=mr(n.firestore,Ii),e=us(t),r=new Wp(t);return KB(n._query),xB(e,n._query).then(i=>new Ih(t,r,n,i))}(this._delegate),e.then(r=>new Qk(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=pV(t),r=gV(t,i=>new Qk(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return aV(this._delegate,e,r)}withConverter(t){return new zo(this.firestore,this._delegate.withConverter(t?qp.getInstance(this.firestore,t):null))}}class gq{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Mb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Qk{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new zo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Mb(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new gq(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new Mb(this._firestore,r))})}isEqual(t){return YB(this._delegate,t._delegate)}}class j_ extends zo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new bl(this.firestore,t):null}doc(t){try{return new bl(this.firestore,void 0===t?xT(this._delegate):xT(this._delegate,t))}catch(e){throw Ho(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=mr(n.firestore,Ii),r=xT(n),i=FT(n.converter,t);return U_(e,[RT(zp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ls.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new bl(this.firestore,e))}isEqual(t){return LB(this._delegate,t._delegate)}withConverter(t){return new j_(this.firestore,this._delegate.withConverter(t?qp.getInstance(this.firestore,t):null))}}function Zp(n){return mr(n,_i)}class Jk{constructor(...t){this._delegate=new sd(...t)}static documentId(){return new Jk(Cs.keyField().canonicalString())}isEqual(t){return(t=(0,ae.m9)(t))instanceof sd&&this._delegate._internalPath.isEqual(t._internalPath)}}class Yp{constructor(t){this._delegate=t}static serverTimestamp(){const t=new Hk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Yp(t)}static delete(){const t=new Ib("deleteField");return t._methodName="FieldValue.delete",new Yp(t)}static arrayUnion(...t){const e=function(...n){return new MW("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Yp(e)}static arrayRemove(...t){const e=function(...n){return new kW("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Yp(e)}static increment(t){const e=function(n){return new RW("increment",n)}(t);return e._methodName="FieldValue.increment",new Yp(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const mq={Firestore:dV,GeoPoint:MT,Timestamp:Xi,Blob:Ab,Transaction:hV,WriteBatch:fV,DocumentReference:bl,DocumentSnapshot:xb,Query:zo,QueryDocumentSnapshot:Mb,QuerySnapshot:Qk,CollectionReference:j_,FieldPath:Jk,FieldValue:Yp,setLogLevel:function(n){!function(n){fh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,t){n.INTERNAL.registerComponent(new cc.wA("firestore-compat",e=>((t,e)=>new dV(t,e,new fq))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},mq)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(t0.Z);var BT=R(4763),vq=R(1733);class bq extends Wt.x{constructor(t=1/0,e=1/0,r=vq.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;e||(r.push(t),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!t.closed;c+=r?1:2)t.next(o[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=e.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var Xk=R(3174);function mV(n,t,e){var r,i;let o,c=!1;return n&&"object"==typeof n?(o=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,t=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,e=n.scheduler):o=null!=n?n:1/0,(0,Xk.B)({connector:()=>new bq(o,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function _V(n,t){return(0,Ds.m)(t)?Ur(()=>n,t):Ur(()=>n)}var eR=R(5222);const yV=new Map,wq={activated:!1,tokenObservers:[]},Cq={initialized:!1,enabled:!1};function Us(n){return yV.get(n)||wq}function fc(n,t){yV.set(n,t)}function VT(){return Cq}class Dq{constructor(t,e,r,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ut.Z)(function*(){e.stop();try{e.pending=new ae.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new ae.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Go=new ae.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bV(n){if(!Us(n).activated)throw Go.create("use-before-activation",{appName:n.name})}function rR(n,t){return iR.apply(this,arguments)}function iR(){return iR=(0,ut.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const o={method:"POST",body:JSON.stringify(t),headers:r};let c,h;try{c=yield fetch(n,o)}catch(x){throw Go.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw Go.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(x){throw Go.create("fetch-parse-error",{originalErrorMessage:x.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Go.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const _=1e3*Number(p[1]),E=Date.now();return{token:h.token,expireTimeMillis:E+_,issuedAtTimeMillis:E}}),iR.apply(this,arguments)}function Oq(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const kb="firebase-app-check-store";let HT=null;function CV(){return HT||(HT=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(Go.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(kb,{keyPath:"compositeKey"})}}catch(e){t(Go.create("storage-open",{originalErrorMessage:e.message}))}}),HT)}function sR(){return sR=(0,ut.Z)(function*(n,t){const r=(yield CV()).transaction(kb,"readwrite"),o=r.objectStore(kb).put({compositeKey:n,value:t});return new Promise((c,h)=>{o.onsuccess=p=>{c()},r.onerror=p=>{var _;h(Go.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})}),sR.apply(this,arguments)}const Rb=new La.Yd("@firebase/app-check");function SV(n,t){return(0,ae.hl)()?function(n,t){return function(n,t){return sR.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Rb.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function DV(){return VT().enabled}function AV(){return cR.apply(this,arguments)}function cR(){return cR=(0,ut.Z)(function*(){const n=VT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),cR.apply(this,arguments)}const zq={error:"UNKNOWN_ERROR"};function Gq(n){return ae.US.encodeString(JSON.stringify(n),!1)}function zT(n){return uR.apply(this,arguments)}function uR(){return uR=(0,ut.Z)(function*(n,t=!1){const e=n.app;bV(e);const r=Us(e);let o,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&GT(p)&&(i=p)}if(!t&&i&&GT(i))return{token:i.token};let h,c=!1;if(DV()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rR(Oq(e,yield AV()),n.heartbeatServiceProvider).then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0);const p=yield r.exchangeTokenPromise;return yield SV(e,p),fc(e,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),c=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Rb.warn(p.message):Rb.error(p),o=p}return i?(h={token:i.token},fc(e,Object.assign(Object.assign({},r),{token:i})),yield SV(e,i)):h=Wq(o),c&&MV(e,h),h}),uR.apply(this,arguments)}function hR(n,t){const e=Us(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),fc(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function xV(n){const{app:t}=n,e=Us(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new Dq((0,ut.Z)(function*(){let r;if(r=Us(t).token?yield zT(n,!0):yield zT(n),r.error)throw r.error}),()=>!0,()=>{const e=Us(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),fc(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function MV(n,t){const e=Us(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function GT(n){return n.expireTimeMillis-Date.now()>0}function Wq(n){return{token:Gq(zq),error:n}}class qq{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Us(this.app);for(const e of t)hR(this.app,e.next);return Promise.resolve()}}const BV="app-check-internal";(0,Fa._registerComponent)(new cc.wA("app-check",n=>function(n,t){return new qq(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(BV).initialize()})),(0,Fa._registerComponent)(new cc.wA(BV,n=>function(n){return{getToken:t=>zT(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,o=Us(i),c={next:e,error:r,type:t};if(fc(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&GT(o.token)){const h=o.token;Promise.resolve().then(()=>{e({token:h.token}),xV(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xV(n))}(n,"INTERNAL",t),removeTokenListener:t=>hR(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fa.registerVersion)("@firebase/app-check","0.5.8");class WT{constructor(){return(0,Xr.vb)("app-check")}}"undefined"!=typeof window&&window;var h4=R(7892);const _R=new s.OlP("angularfire2.auth.use-emulator"),yR=new s.OlP("angularfire2.auth.settings"),vR=new s.OlP("angularfire2.auth.tenant-id"),bR=new s.OlP("angularfire2.auth.langugage-code"),wR=new s.OlP("angularfire2.auth.use-device-language"),CR=new s.OlP("angularfire.auth.persistence"),ER=(n,t,e,r,i,o,c,h)=>(0,Os.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),r&&(p.tenantId=r),p.languageCode=i,o&&p.useDeviceLanguage(),c)for(const[_,E]of Object.entries(c))p.settings[_]=E;return h&&p.setPersistence(h),p},[e,r,i,o,c,h]);let qT=(()=>{class n{constructor(e,r,i,o,c,h,p,_,E,x,$,se){const ye=new Wt.x,ze=xt(void 0).pipe((0,BT.Q)(c.outsideAngular),Ur(()=>o.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,2115)))),(0,kt.U)(()=>(0,Os.on)(e,o,r)),(0,kt.U)(rt=>ER(rt,o,h,_,E,x,p,$)),mV({bufferSize:1,refCount:!1}));if(yt(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=xt(null);else{ze.pipe(Wl()).subscribe();const It=ze.pipe(Ur(Ht=>Ht.getRedirectResult().then(Sn=>Sn,()=>null)),Xr.iC,mV({bufferSize:1,refCount:!1})),jt=ze.pipe(Ur(Ht=>new Pr.y(Sn=>({unsubscribe:o.runOutsideAngular(()=>Ht.onAuthStateChanged(Hn=>Sn.next(Hn),Hn=>Sn.error(Hn),()=>Sn.complete()))})))),Vt=ze.pipe(Ur(Ht=>new Pr.y(Sn=>({unsubscribe:o.runOutsideAngular(()=>Ht.onIdTokenChanged(Hn=>Sn.next(Hn),Hn=>Sn.error(Hn),()=>Sn.complete()))}))));this.authState=It.pipe(_V(jt),(0,eR.R)(c.outsideAngular),(0,BT.Q)(c.insideAngular)),this.user=It.pipe(_V(Vt),(0,eR.R)(c.outsideAngular),(0,BT.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ur(Ht=>Ht?(0,Dr.D)(Ht.getIdToken()):xt(null))),this.idTokenResult=this.user.pipe(Ur(Ht=>Ht?(0,Dr.D)(Ht.getIdTokenResult()):xt(null))),this.credential=(0,Rs.T)(It,ye,this.authState.pipe(kn(Ht=>!Ht))).pipe((0,kt.U)(Ht=>(null==Ht?void 0:Ht.user)?Ht:null),(0,eR.R)(c.outsideAngular),(0,BT.Q)(c.insideAngular))}return(0,Os.pX)(this,ze,o,{spy:{apply:(rt,It,jt)=>{(rt.startsWith("signIn")||rt.startsWith("createUser"))&&jt.then(Vt=>ye.next(Vt))}}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Os.Dh),s.LFG(Os.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Xr.HU),s.LFG(_R,8),s.LFG(yR,8),s.LFG(vR,8),s.LFG(bR,8),s.LFG(wR,8),s.LFG(CR,8),s.LFG(WT,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function UV(n,t){return function(n,t=Hc.z){return new Pr.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function IR(n,t){return UV(n,t).pipe((0,kt.U)(e=>({payload:e,type:"query"})))}function ZT(n,t){return IR(n,t).pipe(gi(void 0),e0(),(0,kt.U)(([e,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(E=>E.doc.ref.isEqual(c.ref)),_=null==e?void 0:e.payload.docs.find(E=>E.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function jV(n,t,e){return ZT(n,e).pipe(gs((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return TR(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return TR(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return TR(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),t),[]),xf(),(0,kt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function TR(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function HV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zV{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=ZT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,kt.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(gi(void 0),e0(),kn(([r,i])=>i.length>0||!r),(0,kt.U)(([r,i])=>i),Xr.iC)}auditTrail(t){return this.stateChanges(t).pipe(gs((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=HV(t);return jV(this.query,e,this.afs.schedulers.outsideAngular).pipe(Xr.iC)}valueChanges(t={}){return IR(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),Xr.iC)}get(t){return(0,Dr.D)(this.query.get(t)).pipe(Xr.iC)}add(t){return this.ref.add(t)}doc(t){return new GV(this.ref.doc(t),this.afs)}}class GV{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:o}=$V(r,e);return new zV(i,o,this.afs)}snapshotChanges(){return function(n,t){return UV(n,t).pipe(gi(void 0),e0(),(0,kt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xr.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Dr.D)(this.ref.get(t)).pipe(Xr.iC)}}class y4{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ZT(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),kn(e=>e.length>0),Xr.iC):ZT(this.query,this.afs.schedulers.outsideAngular).pipe(Xr.iC)}auditTrail(t){return this.stateChanges(t).pipe(gs((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=HV(t);return jV(this.query,e,this.afs.schedulers.outsideAngular).pipe(Xr.iC)}valueChanges(t={}){return IR(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),Xr.iC)}get(t){return(0,Dr.D)(this.query.get(t)).pipe(Xr.iC)}}const v4=new s.OlP("angularfire2.enableFirestorePersistence"),b4=new s.OlP("angularfire2.firestore.persistenceSettings"),w4=new s.OlP("angularfire2.firestore.settings"),C4=new s.OlP("angularfire2.firestore.use-emulator");function $V(n,t=(e=>e)){return{query:t(n),ref:n}}let SR=(()=>{class n{constructor(e,r,i,o,c,h,p,_,E,x,$,se,ye,ze,rt,It,jt){this.schedulers=p;const Vt=(0,Os.on)(e,h,r),Ht=E;x&&ER(Vt,h,$,ye,ze,rt,se,It),[this.firestore,this.persistenceEnabled$]=(0,Os.cc)(`${Vt.name}.firestore`,"AngularFirestore",Vt.name,()=>{const Sn=h.runOutsideAngular(()=>Vt.firestore());if(o&&Sn.settings(o),Ht&&Sn.useEmulator(...Ht),i&&!yt(c)){const Hn=()=>{try{return(0,Dr.D)(Sn.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(kr){return"undefined"!=typeof console&&console.warn(kr),xt(!1)}};return[Sn,h.runOutsideAngular(Hn)]}return[Sn,xt(!1)]},[o,Ht,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:c}=$V(i,r),h=this.schedulers.ngZone.run(()=>o);return new zV(h,c,this)}collectionGroup(e,r){const i=r||(c=>c),o=this.firestore.collectionGroup(e);return new y4(i(o),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new GV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Os.Dh),s.LFG(Os.xv,8),s.LFG(v4,8),s.LFG(w4,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Xr.HU),s.LFG(b4,8),s.LFG(C4,8),s.LFG(qT,8),s.LFG(_R,8),s.LFG(yR,8),s.LFG(vR,8),s.LFG(bR,8),s.LFG(wR,8),s.LFG(CR,8),s.LFG(WT,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YT=(()=>{class n{constructor(e,r,i,o){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=o,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signWithRedirectPromise(){const e=new Yc.Q;e.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,Yc.n)();return r.languageCode="fr",Jv(r,e)}signWithPopupPromise(){const e=new Yc.Q;e.addScope("https://www.googleapis.com/auth/contacts.readonly");const r=(0,Yc.n)();return r.languageCode="fr",(0,Yc.c)(r,e)}signInWithGoogle(){this.signWithPopupPromise().then(e=>{Yc.Q.credentialFromResult(e),this.setUserData(e.user).then(()=>{this.router.navigate(["tracker"])}),this.router.navigate(["tracker"])}).catch(e=>{const r=e.code,i=e.message;Yc.Q.credentialFromError(e),console.log("Code :"+r+"/ Message :"+i)})}setUserData(e){const r=this.afs.doc(`users/${e.uid}`);return this.userData={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},r.set(this.userData,{merge:!0})}setPersonData(e){this.afs.doc(`person/${e}`).set({uid:e},{merge:!0})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["tracker"])})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(SR),s.LFG(qT),s.LFG(ys),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KT=(()=>{class n{constructor(e,r){this.authService=e,this.router=r}canActivate(e,r){return this.authService.isLoggedIn||this.router.navigate(["authentication"]),!0}isUserLoggedIn(){return!!this.authService.isLoggedIn}disconnect(){this.authService.signOut().then(()=>{this.router.navigate(["authentication"])})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(YT),s.LFG(ys))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var WV=R(2869);const Ob={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=Ob;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(o=>{e=void 0,n(o)});return new ns.w0(()=>null==e?void 0:e(i))},requestAnimationFrame(...n){const{delegate:t}=Ob;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Ob;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var qV=R(8843);new class extends qV.v{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let r,i=-1;t=t||e.shift();const o=e.length;do{if(r=t.execute(t.state,t.delay))break}while(++i<o&&(t=e.shift()));if(this._active=!1,r){for(;++i<o&&(t=e.shift());)t.unsubscribe();throw r}}}(class extends WV.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Ob.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(Ob.cancelAnimationFrame(e),t._scheduled=void 0)}});let DR,S4=1;const QT={};function ZV(n){return n in QT&&(delete QT[n],!0)}const D4={setImmediate(n){const t=S4++;return QT[t]=!0,DR||(DR=Promise.resolve()),DR.then(()=>ZV(t)&&n()),t},clearImmediate(n){ZV(n)}},{setImmediate:A4,clearImmediate:x4}=D4,JT={setImmediate(...n){const{delegate:t}=JT;return((null==t?void 0:t.setImmediate)||A4)(...n)},clearImmediate(n){const{delegate:t}=JT;return((null==t?void 0:t.clearImmediate)||x4)(n)},delegate:void 0};new class extends qV.v{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let r,i=-1;t=t||e.shift();const o=e.length;do{if(r=t.execute(t.state,t.delay))break}while(++i<o&&(t=e.shift()));if(this._active=!1,r){for(;++i<o&&(t=e.shift());)t.unsubscribe();throw r}}}(class extends WV.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=JT.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(JT.clearImmediate(e),t._scheduled=void 0)}});function YV(n,t=Hc.P){return function(n){return(0,Qr.e)((t,e)=>{let r=!1,i=null,o=null,c=!1;const h=()=>{if(null==o||o.unsubscribe(),o=null,r){r=!1;const _=i;i=null,e.next(_)}c&&e.complete()},p=()=>{o=null,c&&e.complete()};t.subscribe(new lr.Q(e,_=>{r=!0,i=_,o||(0,Bi.Xf)(n()).subscribe(o=new lr.Q(e,h,p))},()=>{c=!0,(!r||!o||o.closed)&&e.complete()}))})}(()=>Fm(n,t))}let AR=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new Wt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Pr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(YV(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):xt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(kn(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=rc(r),o=e.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ml(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.R0b),s.LFG(Qi),s.LFG(Y,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xR=(()=>{class n{constructor(e,r,i,o){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new Wt.x,this._elementScrolled=new Pr.y(c=>this.ngZone.runOutsideAngular(()=>ml(this.elementRef.nativeElement,"scroll").pipe(gr(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=i?e.end:e.start),null==e.right&&(e.right=i?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),i&&0!=$g()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==$g()?e.left=e.right:1==$g()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;eA()?r.scrollTo(e):(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left))}measureScrollOffset(e){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==e)return o.scrollTop;if("bottom"==e)return o.scrollHeight-o.clientHeight-o.scrollTop;const c=this.dir&&"rtl"==this.dir.value;return"start"==e?e=c?i:r:"end"==e&&(e=c?r:i),c&&2==$g()?e==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:c&&1==$g()?e==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(AR),s.Y36(s.R0b),s.Y36(il,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Pb=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new Wt.x,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(YV(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qi),s.LFG(s.R0b),s.LFG(Y,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),KV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Pd,Nb],Pd,Nb]}),n})();const QV=["*"],F4=["content"];function L4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",2),s.NdJ("click",function(){return s.CHM(e),s.oxw()._onBackdropClicked()}),s.qZA()}if(2&n){const e=s.oxw();s.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function B4(n,t){1&n&&(s.TgZ(0,"mat-drawer-content"),s.Hsn(1,2),s.qZA())}const V4=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],U4=["mat-drawer","mat-drawer-content","*"],j4={transformDrawer:zu("transform",[Pa("open, open-instant",bs({transform:"none",visibility:"visible"})),Pa("void",bs({"box-shadow":"none",visibility:"hidden"})),dl("void => open-instant",ul("0ms")),dl("void <=> open, open-instant => void",ul("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},H4=new s.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),JV=new s.OlP("MAT_DRAWER_CONTAINER");let MR=(()=>{class n extends xR{constructor(e,r,i,o,c){super(i,o,c),this._changeDetectorRef=e,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO),s.Y36((0,s.Gpc)(()=>eU)),s.Y36(s.SBq),s.Y36(AR),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,r){2&e&&s.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[s._Bn([{provide:xR,useExisting:n}]),s.qOj],ngContentSelectors:QV,decls:1,vars:0,template:function(e,r){1&e&&(s.F$t(),s.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),XV=(()=>{class n{constructor(e,r,i,o,c,h,p,_){this._elementRef=e,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=o,this._ngZone=c,this._interactivityChecker=h,this._doc=p,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Wt.x,this._animationEnd=new Wt.x,this._animationState="void",this.openedChange=new s.vpe(!0),this._openedStream=this.openedChange.pipe(kn(E=>E),(0,kt.U)(()=>{})),this.openedStart=this._animationStarted.pipe(kn(E=>E.fromState!==E.toState&&0===E.toState.indexOf("open")),nI(void 0)),this._closedStream=this.openedChange.pipe(kn(E=>!E),(0,kt.U)(()=>{})),this.closedStart=this._animationStarted.pipe(kn(E=>E.fromState!==E.toState&&"void"===E.toState),nI(void 0)),this._destroyed=new Wt.x,this.onPositionChanged=new s.vpe,this._modeChanged=new Wt.x,this.openedChange.subscribe(E=>{E?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{ml(this._elementRef.nativeElement,"keydown").pipe(kn(E=>27===E.keyCode&&!this.disableClose&&!al(E)),gr(this._destroyed)).subscribe(E=>this._ngZone.run(()=>{this.close(),E.stopPropagation(),E.preventDefault()}))}),this._animationEnd.pipe(xf((E,x)=>E.fromState===x.fromState&&E.toState===x.toState)).subscribe(E=>{const{fromState:x,toState:$}=E;(0===$.indexOf("open")&&"void"===x||"void"===$&&0===x.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=cr(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=cr(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(cr(e))}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(r)}_focusByCssSelector(e,r){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null==(e=this._anchor)||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,r){e&&r&&(this._openedVia=r);const i=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),i}_setOpen(e,r,i){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe((0,Xn.q)(1)).subscribe(c=>o(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(xC),s.Y36(ac),s.Y36(Qi),s.Y36(s.R0b),s.Y36(EC),s.Y36(Y,8),s.Y36(JV,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(e,r){if(1&e&&s.Gf(F4,5),2&e){let i;s.iGM(i=s.CRH())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,r){1&e&&s.WFA("@transform.start",function(o){return r._animationStarted.next(o)})("@transform.done",function(o){return r._animationEnd.next(o)}),2&e&&(s.uIk("align",null),s.d8E("@transform",r._animationState),s.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:QV,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"div",0,1),s.Hsn(2),s.qZA())},directives:[xR],encapsulation:2,data:{animation:[j4.transformDrawer]},changeDetection:0}),n})(),eU=(()=>{class n{constructor(e,r,i,o,c,h=!1,p){this._dir=e,this._element=r,this._ngZone=i,this._changeDetectorRef=o,this._animationMode=p,this._drawers=new s.n_E,this.backdropClick=new s.vpe,this._destroyed=new Wt.x,this._doCheckSubject=new Wt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Wt.x,e&&e.change.pipe(gr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(gr(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=cr(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:cr(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(gi(this._allDrawers),gr(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(gi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Af(10),gr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();e+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,e-=i}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(kn(r=>r.fromState!==r.toState),gr(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(gr(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(gr(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Xn.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(gr((0,Rs.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";e?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(il,8),s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(s.sBO),s.Y36(Pb),s.Y36(H4),s.Y36(Vo,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(e,r,i){if(1&e&&(s.Suo(i,MR,5),s.Suo(i,XV,5)),2&e){let o;s.iGM(o=s.CRH())&&(r._content=o.first),s.iGM(o=s.CRH())&&(r._allDrawers=o)}},viewQuery:function(e,r){if(1&e&&s.Gf(MR,5),2&e){let i;s.iGM(i=s.CRH())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,r){2&e&&s.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[s._Bn([{provide:JV,useExisting:n}])],ngContentSelectors:U4,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,r){1&e&&(s.F$t(V4),s.YNc(0,L4,1,2,"div",0),s.Hsn(1),s.Hsn(2,1),s.YNc(3,B4,2,0,"mat-drawer-content",1)),2&e&&(s.Q6J("ngIf",r.hasBackdrop),s.xp6(3),s.Q6J("ngIf",!r._content))},directives:[qr,MR],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),G4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[be,xr,Nb],Nb,xr]}),n})();const tU=["mat-button",""],nU=["*"],q4=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Z4=qu(Ov(Pv(class{constructor(n){this._elementRef=n}})));let Dh=(()=>{class n extends Z4{constructor(e,r,i){super(e),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of q4)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(ac),s.Y36(Vo,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&s.Gf(Rm,5),2&e){let i;s.iGM(i=s.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(s.uIk("disabled",r.disabled||null),s.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[s.qOj],attrs:tU,ngContentSelectors:nU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"span",0),s.Hsn(1),s.qZA(),s._UZ(2,"span",1),s._UZ(3,"span",2)),2&e&&(s.xp6(2),s.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),s.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Rm],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),rU=(()=>{class n extends Dh{constructor(e,r,i,o){super(r,e,i),this._ngZone=o,this._haltDisabledEvents=c=>{this.disabled&&(c.preventDefault(),c.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ac),s.Y36(s.SBq),s.Y36(Vo,8),s.Y36(s.R0b,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,r){2&e&&(s.uIk("tabindex",r.disabled?-1:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),s.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[s.qOj],attrs:tU,ngContentSelectors:nU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"span",0),s.Hsn(1),s.qZA(),s._UZ(2,"span",1),s._UZ(3,"span",2)),2&e&&(s.xp6(2),s.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),s.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Rm],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),kR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[zE,xr],xr]}),n})();function iU(...n){const t=(0,Ca.jO)(n),{args:e,keys:r}=Hl(n),i=new Pr.y(o=>{const{length:c}=e;if(!c)return void o.complete();const h=new Array(c);let p=c,_=c;for(let E=0;E<c;E++){let x=!1;(0,Bi.Xf)(e[E]).subscribe(new lr.Q(o,$=>{x||(x=!0,_--),h[E]=$},()=>p--,void 0,()=>{(!p||!x)&&(_||o.next(r?xc(r,h):h),o.complete())}))}});return t?i.pipe(sa(t)):i}class sU{}class oU{}class ad{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),c=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ad?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ad;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ad?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let c=this.headers.get(e);if(!c)return;c=c.filter(h=>-1===o.indexOf(h)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Y4{encodeKey(t){return aU(t)}encodeValue(t){return aU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Q4=/%(\d[a-f0-9])/gi,J4={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function aU(n){return encodeURIComponent(n).replace(Q4,(t,e)=>{var r;return null!=(r=J4[e])?r:t})}function lU(n){return`${n}`}class Ah{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Y4,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,h]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],p=e.get(c)||[];p.push(h),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ah({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(lU(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(lU(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class X4{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function cU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function uU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function dU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Fb{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new ad),this.context||(this.context=new X4),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+c}}else this.params=new Ah,this.urlWithParams=e}serializeBody(){return null===this.body?null:cU(this.body)||uU(this.body)||dU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ah?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dU(this.body)?null:uU(this.body)?this.body.type||null:cU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ah?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var x;const e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,h=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,_=t.params||this.params;const E=null!=(x=t.context)?x:this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce(($,se)=>$.set(se,t.setHeaders[se]),p)),t.setParams&&(_=Object.keys(t.setParams).reduce(($,se)=>$.set(se,t.setParams[se]),_)),new Fb(e,r,o,{params:_,headers:p,context:E,reportProgress:h,responseType:i,withCredentials:c})}}var ds=(()=>((ds=ds||{})[ds.Sent=0]="Sent",ds[ds.UploadProgress=1]="UploadProgress",ds[ds.ResponseHeader=2]="ResponseHeader",ds[ds.DownloadProgress=3]="DownloadProgress",ds[ds.Response=4]="Response",ds[ds.User=5]="User",ds))();class RR{constructor(t,e=200,r="OK"){this.headers=t.headers||new ad,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class OR extends RR{constructor(t={}){super(t),this.type=ds.ResponseHeader}clone(t={}){return new OR({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class XT extends RR{constructor(t={}){super(t),this.type=ds.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new XT({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class hU extends RR{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function PR(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let NR=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Fb)o=e;else{let p,_;p=i.headers instanceof ad?i.headers:new ad(i.headers),i.params&&(_=i.params instanceof Ah?i.params:new Ah({fromObject:i.params})),o=new Fb(e,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=xt(o).pipe(Ya(p=>this.handler.handle(p)));if(e instanceof Fb||"events"===i.observe)return c;const h=c.pipe(kn(p=>p instanceof XT));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,kt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,kt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,kt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,kt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Ah).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,PR(i,r))}post(e,r,i={}){return this.request("POST",e,PR(i,r))}put(e,r,i={}){return this.request("PUT",e,PR(i,r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(sU))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class fU{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const pU=new s.OlP("HTTP_INTERCEPTORS");let n5=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const r5=/^\)\]\}',?\n/;let gU=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pr.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((se,ye)=>i.setRequestHeader(se,ye.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const se=e.detectContentTypeHeader();null!==se&&i.setRequestHeader("Content-Type",se)}if(e.responseType){const se=e.responseType.toLowerCase();i.responseType="json"!==se?se:"text"}const o=e.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const se=1223===i.status?204:i.status,ye=i.statusText||"OK",ze=new ad(i.getAllResponseHeaders()),rt=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return c=new OR({headers:ze,status:se,statusText:ye,url:rt}),c},p=()=>{let{headers:se,status:ye,statusText:ze,url:rt}=h(),It=null;204!==ye&&(It=void 0===i.response?i.responseText:i.response),0===ye&&(ye=It?200:0);let jt=ye>=200&&ye<300;if("json"===e.responseType&&"string"==typeof It){const Vt=It;It=It.replace(r5,"");try{It=""!==It?JSON.parse(It):null}catch(Ht){It=Vt,jt&&(jt=!1,It={error:Ht,text:It})}}jt?(r.next(new XT({body:It,headers:se,status:ye,statusText:ze,url:rt||void 0})),r.complete()):r.error(new hU({error:It,headers:se,status:ye,statusText:ze,url:rt||void 0}))},_=se=>{const{url:ye}=h(),ze=new hU({error:se,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ye||void 0});r.error(ze)};let E=!1;const x=se=>{E||(r.next(h()),E=!0);let ye={type:ds.DownloadProgress,loaded:se.loaded};se.lengthComputable&&(ye.total=se.total),"text"===e.responseType&&!!i.responseText&&(ye.partialText=i.responseText),r.next(ye)},$=se=>{let ye={type:ds.UploadProgress,loaded:se.loaded};se.lengthComputable&&(ye.total=se.total),r.next(ye)};return i.addEventListener("load",p),i.addEventListener("error",_),i.addEventListener("timeout",_),i.addEventListener("abort",_),e.reportProgress&&(i.addEventListener("progress",x),null!==o&&i.upload&&i.upload.addEventListener("progress",$)),i.send(o),r.next({type:ds.Sent}),()=>{i.removeEventListener("error",_),i.removeEventListener("abort",_),i.removeEventListener("load",p),i.removeEventListener("timeout",_),e.reportProgress&&(i.removeEventListener("progress",x),null!==o&&i.upload&&i.upload.removeEventListener("progress",$)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(co))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const FR=new s.OlP("XSRF_COOKIE_NAME"),LR=new s.OlP("XSRF_HEADER_NAME");class mU{}let o5=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fr(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y),s.LFG(s.Lbi),s.LFG(FR))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),BR=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const o=this.tokenService.getToken();return null!==o&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,o)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(mU),s.LFG(LR))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),a5=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(pU,[]);this.chain=r.reduceRight((i,o)=>new fU(i,o),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oU),s.LFG(s.zs3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),l5=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:BR,useClass:n5}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:FR,useValue:e.cookieName}:[],e.headerName?{provide:LR,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[BR,{provide:pU,useExisting:BR,multi:!0},{provide:mU,useClass:o5},{provide:FR,useValue:"XSRF-TOKEN"},{provide:LR,useValue:"X-XSRF-TOKEN"}]}),n})(),_U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[NR,{provide:sU,useClass:a5},gU,{provide:oU,useExisting:gU}],imports:[[l5.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const c5=["*"];let eS;function Lb(n){var t;return(null==(t=function(){if(void 0===eS&&(eS=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(eS=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return eS}())?void 0:t.createHTML(n))||n}function yU(n){return Error(`Unable to find icon with the name "${n}"`)}function vU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function bU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Kp{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let tS=(()=>{class n{constructor(e,r,i,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,o){return this._addSvgIconConfig(e,r,new Kp(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,o){const c=this._sanitizer.sanitize(s.q3G.HTML,i);if(!c)throw bU(i);const h=Lb(c);return this._addSvgIconConfig(e,r,new Kp("",h,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new Kp(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){const o=this._sanitizer.sanitize(s.q3G.HTML,r);if(!o)throw bU(r);const c=Lb(o);return this._addSvgIconSetConfig(e,new Kp("",c,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(s.q3G.RESOURCE_URL,e);if(!r)throw vU(e);const i=this._cachedIconsByUrl.get(r);return i?xt(nS(i)):this._loadSvgIconFromConfig(new Kp(e,null)).pipe((0,ki.b)(o=>this._cachedIconsByUrl.set(r,o)),(0,kt.U)(o=>nS(o)))}getNamedSvgIcon(e,r=""){const i=wU(r,e);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(e,c):jv(yU(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?xt(nS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,kt.U)(r=>nS(r)))}_getSvgFromIconSetConfigs(e,r){const i=this._extractIconWithNameFromAnySet(e,r);return i?xt(i):iU(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Qs(h=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(s.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(_)),xt(null)})))).pipe((0,kt.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,r);if(!c)throw yU(e);return c}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(o),h=this._extractSvgIconFromSet(c,e,o.options);if(h)return h}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,ki.b)(r=>e.svgText=r),(0,kt.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?xt(null):this._fetchIcon(e).pipe((0,ki.b)(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){const o=e.querySelector(`[id="${r}"]`);if(!o)return null;const c=o.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const h=this._svgElementFromString(Lb("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,i)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){const r=this._svgElementFromString(Lb("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){const{name:c,value:h}=i[o];"id"!==c&&r.setAttribute(c,h)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){var _;const{url:r,options:i}=e,o=null!=(_=null==i?void 0:i.withCredentials)&&_;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(s.q3G.RESOURCE_URL,r);if(!c)throw vU(r);const h=this._inProgressUrlFetches.get(c);if(h)return h;const p=this._httpClient.get(c,{responseType:"text",withCredentials:o}).pipe((0,kt.U)(E=>Lb(E)),wu(()=>this._inProgressUrlFetches.delete(c)),(0,Xk.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(wU(e,r),i),this}_addSvgIconSetConfig(e,r){const i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,e);if(o)return f5(o)?new Kp(o.url,null,o.options):new Kp(o,null)}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(NR,8),s.LFG(Wa),s.LFG(Y,8),s.LFG(s.qLn))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nS(n){return n.cloneNode(!0)}function wU(n,t){return n+":"+t}function f5(n){return!(!n.url||!n.options)}const p5=qu(class{constructor(n){this._elementRef=n}}),g5=new s.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,s.f3M)(Y),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),CU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],_5=CU.map(n=>`[${n}]`).join(", "),y5=/^url\(['"]?#(.*?)['"]?\)$/;let Bb=(()=>{class n extends p5{constructor(e,r,i,o,c){super(e),this._iconRegistry=r,this._location=o,this._errorHandler=c,this._inline=!1,this._currentIconFetch=ns.w0.EMPTY,i||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=cr(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=e.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),r&&e.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(c=>{o.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(_5),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)CU.forEach(c=>{const h=r[o],p=h.getAttribute(c),_=p?p.match(y5):null;if(_){let E=i.get(h);E||(E=[],i.set(h,E)),E.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,Xn.q)(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(tS),s.$8M("aria-hidden"),s.Y36(g5),s.Y36(s.qLn))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,r){2&e&&(s.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),s.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[s.qOj],ngContentSelectors:c5,decls:1,vars:0,template:function(e,r){1&e&&(s.F$t(),s.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),VR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[xr],xr]}),n})();const v5=["*",[["mat-toolbar-row"]]],b5=["*","mat-toolbar-row"],w5=qu(class{constructor(n){this._elementRef=n}});let C5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),E5=(()=>{class n extends w5{constructor(e,r,i){super(e),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(Qi),s.Y36(Y))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,r,i){if(1&e&&s.Suo(i,C5,5),2&e){let o;s.iGM(o=s.CRH())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,r){2&e&&s.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[s.qOj],ngContentSelectors:b5,decls:2,vars:0,template:function(e,r){1&e&&(s.F$t(v5),s.Hsn(0),s.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),I5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[xr],xr]}),n})(),T5=(()=>{class n{constructor(){this.menuButtonClicked=new s.vpe}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-topbar"]],outputs:{menuButtonClicked:"menuButtonClicked"},decls:8,vars:0,consts:[["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"click"],[1,"appTitle"],[1,"example-spacer"]],template:function(e,r){1&e&&(s.TgZ(0,"mat-toolbar"),s.TgZ(1,"button",0),s.NdJ("click",function(){return r.menuButtonClicked.emit(!0)}),s.TgZ(2,"mat-icon"),s._uU(3,"menu"),s.qZA(),s.qZA(),s.TgZ(4,"div",1),s.TgZ(5,"h1"),s._uU(6,"Minou Tracker"),s.qZA(),s.qZA(),s._UZ(7,"span",2),s.qZA())},directives:[E5,Dh,Bb],styles:[".appTitle[_ngcontent-%COMP%]{margin:auto}.buttonMenu[_ngcontent-%COMP%]{position:fixed}  .menuCloseButton{border-radius:10px;float:right}"]}),n})();function S5(n,t){if(1&n&&(s.TgZ(0,"div"),s._UZ(1,"img",14),s._UZ(2,"br"),s._uU(3),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("src",null==e.connectedUser?null:e.connectedUser.photoURL,s.LSH),s.xp6(2),s.hij(" Hello ",null==e.connectedUser?null:e.connectedUser.displayName," ! ")}}function D5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"a",15),s.NdJ("click",function(){s.CHM(e);const i=s.oxw(),o=s.MAs(2);return i.disconnect(),o.toggle()}),s._uU(1,"Se d\xe9connecter"),s.qZA()}}const A5=function(){return["authentication"]};function x5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"a",16),s.NdJ("click",function(){return s.CHM(e),s.oxw(),s.MAs(2).toggle()}),s._uU(1,"Se connecter"),s.qZA()}2&n&&s.Q6J("routerLink",s.DdM(1,A5))}function M5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"mat-tree-node",20),s._UZ(1,"button",21),s.TgZ(2,"a",22),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(2),h=s.MAs(2);return c.menuButtonClicked(o),h.toggle()}),s._uU(3),s.qZA(),s.qZA()}if(2&n){const e=t.$implicit;s.xp6(3),s.hij(" ",e.name," ")}}function k5(n,t){if(1&n&&(s.TgZ(0,"mat-tree-node",23),s.TgZ(1,"button",24),s.TgZ(2,"mat-icon",25),s._uU(3),s.qZA(),s.qZA(),s._uU(4),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.uIk("aria-label","Toggle "+e.name),s.xp6(2),s.hij(" ",r.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),s.xp6(1),s.hij(" ",e.name," ")}}function R5(n,t){if(1&n&&(s.TgZ(0,"mat-tree",17),s.YNc(1,M5,4,1,"mat-tree-node",18),s.YNc(2,k5,5,3,"mat-tree-node",19),s.qZA()),2&n){const e=s.oxw();s.Q6J("dataSource",e.dataSource)("treeControl",e.treeControl),s.xp6(2),s.Q6J("matTreeNodeDefWhen",e.hasChild)}}let O5=(()=>{class n{constructor(e,r,i){this.authGuard=r,this.title="foodTrackingApp",this._transformer=(o,c)=>({expandable:!!o.children&&o.children.length>0,name:o.name,isPerson:o.isPerson,navigateUrl:o.navigateUrl,level:c}),this.menuContent=[{name:"Tracker",children:[{name:"Tracking du jour",navigateUrl:"tracker"},{name:"Team tracking",navigateUrl:"teamTracking"}]},{name:"Historique",children:[{name:"Tracking du jour",navigateUrl:"history"}]},{name:"Statistiques",children:[{name:"Evolution poids",navigateUrl:"statistiques"}]}],this.treeControl=new zw(o=>o.level,o=>o.expandable),this.treeFlattener=new ip(this._transformer,o=>o.level,o=>o.expandable,o=>o.children),this.dataSource=new Lx(this.treeControl,this.treeFlattener),this.hasChild=(o,c)=>c.expandable,this.selectedPerson=void 0,e.available.subscribe(o=>{e.activateUpdate().then(c=>{document.location.reload()})}),this.dataSource.data=this.menuContent,this.routing=i}ngOnInit(){this.authGuard.isUserLoggedIn()||this.routing.navigate(["authentication"]),this.setUserIfNotSet()}setUserIfNotSet(){if(this.authGuard.isUserLoggedIn()&&void 0===this.connectedUser&&void 0!==localStorage.getItem("user")){const e=JSON.parse(localStorage.getItem("user"));this.connectedUser={uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,displayName:null==e?void 0:e.displayName,photoURL:null==e?void 0:e.photoURL,emailVerified:null==e?void 0:e.emailVerified}}}disconnect(){this.authGuard.disconnect()}menuButtonClicked(e){e.isPerson?(this.selectedPerson=e.name,this.routing.navigate([`${e.navigateUrl}`])):this.routing.navigate([`${e.navigateUrl}`])}}return n.\u0275fac=function(e){return new(e||n)(s.Y36($v),s.Y36(KT),s.Y36(ys))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-root"]],decls:19,vars:5,consts:[["autosize","",1,"example-container"],["mode","side",1,"sidenavMenu"],["drawer",""],[1,"topMenuContainer"],["mat-button","",1,"menuCloseButton",3,"disableRipple","click"],[1,"userNameButtonMenu"],[4,"ngIf"],[1,"loginLogoutButton"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"routerLink","click",4,"ngIf"],[3,"dataSource","treeControl",4,"ngIf"],[1,"globalContainer"],[3,"menuButtonClicked"],[1,"spacingToolbar"],[1,"imageLoggedUser",3,"src"],["mat-button","",3,"click"],["mat-button","",3,"routerLink","click"],[3,"dataSource","treeControl"],["matTreeNodePadding","1",4,"matTreeNodeDef"],["matTreeNodePadding","0",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","1"],["mat-icon-button","","disabled",""],["mat-raised-button","",3,"click"],["matTreeNodePadding","0"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,r){if(1&e){const i=s.EpF();s.TgZ(0,"mat-drawer-container",0),s.TgZ(1,"mat-drawer",1,2),s.TgZ(3,"div",3),s.TgZ(4,"h2"),s._uU(5,"\u{1f63a}MIOUNU"),s.qZA(),s.TgZ(6,"button",4),s.NdJ("click",function(){return s.CHM(i),s.MAs(2).toggle()}),s.TgZ(7,"mat-icon"),s._uU(8,"close"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"div",5),s.YNc(10,S5,4,2,"div",6),s.TgZ(11,"div",7),s.YNc(12,D5,2,0,"a",8),s.YNc(13,x5,2,2,"a",9),s.qZA(),s.qZA(),s.YNc(14,R5,3,3,"mat-tree",10),s.qZA(),s.TgZ(15,"div",11),s.TgZ(16,"app-topbar",12),s.NdJ("menuButtonClicked",function(){return s.CHM(i),s.MAs(2).toggle()}),s.qZA(),s._UZ(17,"div",13),s._UZ(18,"router-outlet"),s.qZA(),s.qZA()}2&e&&(s.xp6(6),s.Q6J("disableRipple",!0),s.xp6(4),s.Q6J("ngIf",r.authGuard.isUserLoggedIn()),s.xp6(2),s.Q6J("ngIf",r.authGuard.isUserLoggedIn()),s.xp6(1),s.Q6J("ngIf",!r.authGuard.isUserLoggedIn()),s.xp6(1),s.Q6J("ngIf",r.authGuard.isUserLoggedIn()))},directives:[eU,XV,Dh,Bb,qr,T5,Ad,rU,Fg,XE,Vv,QE,Uv,Jd],styles:[".globalContainer[_ngcontent-%COMP%]{width:100vw;height:100vh}.spacingToolbar[_ngcontent-%COMP%]{height:64px;width:100vw}app-topbar[_ngcontent-%COMP%]{position:fixed!important;width:100vw;z-index:99}.viewport[_ngcontent-%COMP%]  video{width:100%;height:240px;object-fit:cover}.appContent[_ngcontent-%COMP%]{display:flex}.sidenavMenu[_ngcontent-%COMP%]{padding:20px;width:250px}.topMenuContainer[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .topMenuContainer[_ngcontent-%COMP%] > .menuCloseButton[_ngcontent-%COMP%]{display:inline-block}.topMenuContainer[_ngcontent-%COMP%]{width:100%;height:50px}.userNameButtonMenu[_ngcontent-%COMP%]{background-color:#0000004d;text-align:center;padding:10px 0;border-radius:5px;margin-bottom:20px}.imageLoggedUser[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:30px;margin-bottom:5px}.loginLogoutButton[_ngcontent-%COMP%]{color:#ffffffb3}"]}),n})();const IU=Gg({passive:!0});let P5=(()=>{class n{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Za.E;const r=rc(e),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new Wt.x,c="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,IU),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",h,IU)}}),o}stopMonitoring(e){const r=rc(e),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qi),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),SU=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),Qp=(()=>{class n extends SU{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const su=new s.OlP("NgValueAccessor"),F5={provide:su,useExisting:(0,s.Gpc)(()=>H_),multi:!0},B5=new s.OlP("CompositionEventMode");let H_=(()=>{class n extends SU{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=b()?b().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(B5,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[s._Bn([F5]),s.qOj]}),n})();function xh(n){return null==n||0===n.length}function AU(n){return null!=n&&"number"==typeof n.length}const To=new s.OlP("NgValidators"),Mh=new s.OlP("NgAsyncValidators"),V5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hs{static min(t){return function(n){return t=>{if(xh(t.value)||xh(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function(n){return t=>{if(xh(t.value)||xh(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return kU(t)}static requiredTrue(t){return function(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function(n){return xh(n.value)||V5.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function(n){return t=>xh(t.value)||!AU(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function(n){return t=>AU(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function(n){if(!n)return Vb;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(xh(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return HU(t)}static composeAsync(t){return zU(t)}}function kU(n){return xh(n.value)?{required:!0}:null}function Vb(n){return null}function LU(n){return null!=n}function BU(n){const t=(0,s.QGY)(n)?(0,Dr.D)(n):n;return(0,s.CqO)(t),t}function VU(n){let t={};return n.forEach(e=>{t=null!=e?Mt(Mt({},t),e):t}),0===Object.keys(t).length?null:t}function UU(n,t){return t.map(e=>e(n))}function jU(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function HU(n){if(!n)return null;const t=n.filter(LU);return 0==t.length?null:function(e){return VU(UU(e,t))}}function UR(n){return null!=n?HU(jU(n)):null}function zU(n){if(!n)return null;const t=n.filter(LU);return 0==t.length?null:function(e){return iU(UU(e,t).map(BU)).pipe((0,kt.U)(VU))}}function jR(n){return null!=n?zU(jU(n)):null}function GU(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function $U(n){return n._rawValidators}function WU(n){return n._rawAsyncValidators}function HR(n){return n?Array.isArray(n)?n:[n]:[]}function rS(n,t){return Array.isArray(n)?n.includes(t):n===t}function qU(n,t){const e=HR(t);return HR(n).forEach(i=>{rS(e,i)||e.push(i)}),e}function ZU(n,t){return HR(t).filter(e=>!rS(n,e))}class YU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=UR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=jR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class $o extends YU{get formDirective(){return null}get path(){return null}}class pc extends YU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class KU{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null==(e=this._cd)?void 0:e.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[t])}}let iS=(()=>{class n extends KU{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pc,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[s.qOj]}),n})(),sS=(()=>{class n extends KU{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36($o,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[s.qOj]}),n})();function Ub(n,t){$R(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&QU(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&QU(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function lS(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),uS(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function cS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function $R(n,t){const e=$U(n);null!==t.validator?n.setValidators(GU(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=WU(n);null!==t.asyncValidator?n.setAsyncValidators(GU(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();cS(t._rawValidators,i),cS(t._rawAsyncValidators,i)}function uS(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=$U(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const i=WU(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return cS(t._rawValidators,r),cS(t._rawAsyncValidators,r),e}function QU(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JU(n,t){$R(n,t)}function XU(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function dS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const jb="VALID",hS="INVALID",z_="PENDING",Hb="DISABLED";function ZR(n){return(KR(n)?n.validators:n)||null}function e3(n){return Array.isArray(n)?UR(n):n||null}function YR(n,t){return(KR(t)?t.asyncValidators:n)||null}function t3(n){return Array.isArray(n)?jR(n):n||null}function KR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class QR{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=e3(this._rawValidators),this._composedAsyncValidatorFn=t3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===jb}get invalid(){return this.status===hS}get pending(){return this.status==z_}get disabled(){return this.status===Hb}get enabled(){return this.status!==Hb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=e3(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=t3(t)}addValidators(t){this.setValidators(qU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(qU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ZU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ZU(t,this._rawAsyncValidators))}hasValidator(t){return rS(this._rawValidators,t)}hasAsyncValidator(t){return rS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=z_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Hb,this.errors=null,this._forEachChild(r=>{r.disable(fs(Mt({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fs(Mt({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=jb,this._forEachChild(r=>{r.enable(fs(Mt({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(fs(Mt({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jb||this.status===z_)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hb:jb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=z_,this._hasOwnPendingAsyncValidator=!0;const e=BU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof ou?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof JR&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?Hb:this.errors?hS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z_)?z_:this._anyControlsHaveStatus(hS)?hS:jb}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){KR(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class so extends QR{constructor(t=null,e,r){super(ZR(e),YR(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){dS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){dS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ou extends QR{constructor(t,e,r){super(ZR(e),YR(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof so?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class JR extends QR{constructor(t,e,r){super(ZR(e),YR(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof so?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const J5={provide:$o,useExisting:(0,s.Gpc)(()=>G_)},zb=(()=>Promise.resolve(null))();let G_=(()=>{class n extends $o{constructor(e,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new s.vpe,this.form=new ou({},UR(e),jR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){zb.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Ub(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){zb.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),dS(this._directives,e)})}addFormGroup(e){zb.then(()=>{const r=this._findContainer(e.path),i=new ou({});JU(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){zb.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){zb.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,XU(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(To,10),s.Y36(Mh,10))},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([J5]),s.qOj]}),n})(),fS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const t8={provide:su,useExisting:(0,s.Gpc)(()=>pS),multi:!0};let pS=(()=>{class n extends Qp{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[s._Bn([t8]),s.qOj]}),n})(),o3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const XR=new s.OlP("NgModelWithFormControlWarning"),o8={provide:$o,useExisting:(0,s.Gpc)(()=>ld)};let ld=(()=>{class n extends $o{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return Ub(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){lS(e.control||null,e,!1),dS(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,XU(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(lS(r||null,e),i instanceof so&&(Ub(i,e),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);JU(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function(n,t){return uS(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$R(this.form,this),this._oldForm&&uS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(To,10),s.Y36(Mh,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([o8]),s.qOj,s.TTD]}),n})();const c8={provide:pc,useExisting:(0,s.Gpc)(()=>Gb)};let Gb=(()=>{class n extends pc{constructor(e,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===H_?e=o:function(n){return Object.getPrototypeOf(n.constructor)===Qp}(o)?r=o:i=o}),i||r||e||null}(0,o)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(s.Y36($o,13),s.Y36(To,10),s.Y36(Mh,10),s.Y36(su,10),s.Y36(XR,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([c8]),s.qOj,s.TTD]}),n})();const y8={provide:To,useExisting:(0,s.Gpc)(()=>mS),multi:!0};let mS=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?kU(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[s._Bn([y8])]}),n})(),C3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[o3]]}),n})(),I8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[C3]}),n})(),iO=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:XR,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[C3]}),n})(),S8=(()=>{class n{group(e,r=null){const i=this._reduceControls(e);let h,o=null,c=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new ou(i,{asyncValidators:c,updateOn:h,validators:o})}control(e,r,i){return new so(e,r,i)}array(e,r,i){const o=e.map(c=>this._createControl(c));return new JR(o,r,i)}_reduceControls(e){const r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){return e instanceof so||e instanceof ou||e instanceof JR?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:iO}),n})(),E3=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D8=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=rc(e);return new Pr.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new Wt.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:i}=this._observedElements.get(e);r&&r.disconnect(),i.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(E3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A8=(()=>{class n{constructor(e,r,i){this._contentObserver=e,this._elementRef=r,this._ngZone=i,this.event=new s.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=cr(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Vi(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Af(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null==(e=this._currentSubscription)||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(D8),s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),x8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[E3]}),n})();const M8=["connectionContainer"],k8=["inputContainer"],R8=["label"];function O8(n,t){1&n&&(s.ynx(0),s.TgZ(1,"div",14),s._UZ(2,"div",15),s._UZ(3,"div",16),s._UZ(4,"div",17),s.qZA(),s.TgZ(5,"div",18),s._UZ(6,"div",15),s._UZ(7,"div",16),s._UZ(8,"div",17),s.qZA(),s.BQk())}function P8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",19),s.NdJ("cdkObserveContent",function(){return s.CHM(e),s.oxw().updateOutlineGap()}),s.Hsn(1,1),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function N8(n,t){if(1&n&&(s.ynx(0),s.Hsn(1,2),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.BQk()),2&n){const e=s.oxw(2);s.xp6(3),s.Oqu(e._control.placeholder)}}function F8(n,t){1&n&&s.Hsn(0,3,["*ngSwitchCase","true"])}function L8(n,t){1&n&&(s.TgZ(0,"span",23),s._uU(1," *"),s.qZA())}function B8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"label",20,21),s.NdJ("cdkObserveContent",function(){return s.CHM(e),s.oxw().updateOutlineGap()}),s.YNc(2,N8,4,1,"ng-container",12),s.YNc(3,F8,1,0,"ng-content",12),s.YNc(4,L8,2,0,"span",22),s.qZA()}if(2&n){const e=s.oxw();s.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),s.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),s.uIk("for",e._control.id)("aria-owns",e._control.id),s.xp6(2),s.Q6J("ngSwitchCase",!1),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function V8(n,t){1&n&&(s.TgZ(0,"div",24),s.Hsn(1,4),s.qZA())}function U8(n,t){if(1&n&&(s.TgZ(0,"div",25),s._UZ(1,"span",26),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function j8(n,t){if(1&n&&(s.TgZ(0,"div"),s.Hsn(1,5),s.qZA()),2&n){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState)}}function H8(n,t){if(1&n&&(s.TgZ(0,"div",30),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.Q6J("id",e._hintLabelId),s.xp6(1),s.Oqu(e.hintLabel)}}function z8(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,H8,2,2,"div",28),s.Hsn(2,6),s._UZ(3,"div",29),s.Hsn(4,7),s.qZA()),2&n){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState),s.xp6(1),s.Q6J("ngIf",e.hintLabel)}}const G8=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],$8=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let W8=0;const I3=new s.OlP("MatError");let q8=(()=>{class n{constructor(e,r){this.id="mat-error-"+W8++,e||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(e){return new(e||n)(s.$8M("aria-live"),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("id",r.id)},inputs:{id:"id"},features:[s._Bn([{provide:I3,useExisting:n}])]}),n})();const Z8={transitionMessages:zu("transitionMessages",[Pa("enter",bs({opacity:1,transform:"translateY(0%)"})),dl("void => enter",[bs({opacity:0,transform:"translateY(-5px)"}),ul("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let $b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n}),n})();const Y8=new s.OlP("MatHint");let Wb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-label"]]}),n})(),K8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const Q8=new s.OlP("MatPrefix"),T3=new s.OlP("MatSuffix");let J8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","matSuffix",""]],features:[s._Bn([{provide:T3,useExisting:n}])]}),n})(),S3=0;const eZ=qu(class{constructor(n){this._elementRef=n}},"primary"),tZ=new s.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),sO=new s.OlP("MatFormField");let oO=(()=>{class n extends eZ{constructor(e,r,i,o,c,h,p){super(e),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Wt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+S3++,this._labelId="mat-form-field-label-"+S3++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=cr(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(gi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(gr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(gr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Rs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(gi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(gi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(gr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,ml(this._label.nativeElement,"transitionend").pipe((0,Xn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const E=r.querySelectorAll(`${i}, ${o}`);for(let x=0;x<E.length;x++)E[x].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const p=r.querySelectorAll(i),_=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const E=r.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const x=this._getStartEnd(E),$=e.children,se=this._getStartEnd($[0].getBoundingClientRect());let ye=0;for(let ze=0;ze<$.length;ze++)ye+=$[ze].offsetWidth;c=Math.abs(se-x)-5,h=ye>0?.75*ye+10:0}for(let E=0;E<p.length;E++)p[E].style.width=`${c}px`;for(let E=0;E<_.length;E++)_[E].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(il,8),s.Y36(tZ,8),s.Y36(Qi),s.Y36(s.R0b),s.Y36(Vo,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,i){if(1&e&&(s.Suo(i,$b,5),s.Suo(i,$b,7),s.Suo(i,Wb,5),s.Suo(i,Wb,7),s.Suo(i,K8,5),s.Suo(i,I3,5),s.Suo(i,Y8,5),s.Suo(i,Q8,5),s.Suo(i,T3,5)),2&e){let o;s.iGM(o=s.CRH())&&(r._controlNonStatic=o.first),s.iGM(o=s.CRH())&&(r._controlStatic=o.first),s.iGM(o=s.CRH())&&(r._labelChildNonStatic=o.first),s.iGM(o=s.CRH())&&(r._labelChildStatic=o.first),s.iGM(o=s.CRH())&&(r._placeholderChild=o.first),s.iGM(o=s.CRH())&&(r._errorChildren=o),s.iGM(o=s.CRH())&&(r._hintChildren=o),s.iGM(o=s.CRH())&&(r._prefixChildren=o),s.iGM(o=s.CRH())&&(r._suffixChildren=o)}},viewQuery:function(e,r){if(1&e&&(s.Gf(M8,7),s.Gf(k8,5),s.Gf(R8,5)),2&e){let i;s.iGM(i=s.CRH())&&(r._connectionContainerRef=i.first),s.iGM(i=s.CRH())&&(r._inputContainerRef=i.first),s.iGM(i=s.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,r){2&e&&s.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[s._Bn([{provide:sO,useExisting:n}]),s.qOj],ngContentSelectors:$8,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,r){1&e&&(s.F$t(G8),s.TgZ(0,"div",0),s.TgZ(1,"div",1,2),s.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),s.YNc(3,O8,9,0,"ng-container",3),s.YNc(4,P8,2,1,"div",4),s.TgZ(5,"div",5,6),s.Hsn(7),s.TgZ(8,"span",7),s.YNc(9,B8,5,16,"label",8),s.qZA(),s.qZA(),s.YNc(10,V8,2,0,"div",9),s.qZA(),s.YNc(11,U8,2,4,"div",10),s.TgZ(12,"div",11),s.YNc(13,j8,2,1,"div",12),s.YNc(14,z8,5,2,"div",13),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf","outline"==r.appearance),s.xp6(1),s.Q6J("ngIf",r._prefixChildren.length),s.xp6(5),s.Q6J("ngIf",r._hasFloatingLabel()),s.xp6(1),s.Q6J("ngIf",r._suffixChildren.length),s.xp6(1),s.Q6J("ngIf","outline"!=r.appearance),s.xp6(1),s.Q6J("ngSwitch",r._getDisplayedMessages()),s.xp6(1),s.Q6J("ngSwitchCase","error"),s.xp6(1),s.Q6J("ngSwitchCase","hint"))},directives:[qr,$s,ei,A8],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Z8.transitionMessages]},changeDetection:0}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[be,xr,x8],xr]}),n})();const nZ=new s.OlP("MAT_INPUT_VALUE_ACCESSOR"),rZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let iZ=0;const sZ=Fv(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r}});let aO=(()=>{class n extends sZ{constructor(e,r,i,o,c,h,p,_,E,x){super(h,o,c,i),this._elementRef=e,this._platform=r,this._autofillMonitor=_,this._formField=x,this._uid="mat-input-"+iZ++,this.focused=!1,this.stateChanges=new Wt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ye=>XD().has(ye)),this._iOSKeyupListener=ye=>{const ze=ye.target;!ze.value&&0===ze.selectionStart&&0===ze.selectionEnd&&(ze.setSelectionRange(1,1),ze.setSelectionRange(0,0))};const $=this._elementRef.nativeElement,se=$.nodeName.toLowerCase();this._inputValueAccessor=p||$,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&E.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===se,this._isTextarea="textarea"===se,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=$.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=cr(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,r,i,o;return null!=(o=null!=(i=this._required)?i:null==(r=null==(e=this.ngControl)?void 0:e.control)?void 0:r.hasValidator(hs.required))&&o}set required(e){this._required=cr(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&XD().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=cr(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,i;const e=(null==(i=null==(r=this._formField)?void 0:r._hideControlPlaceholder)?void 0:i.call(r))?null:this.placeholder;if(e!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=e,e?o.setAttribute("placeholder",e):o.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){rZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(Qi),s.Y36(pc,10),s.Y36(G_,8),s.Y36(ld,8),s.Y36(np),s.Y36(nZ,10),s.Y36(P5),s.Y36(s.R0b),s.Y36(sO,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,r){1&e&&s.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(s.Ikx("disabled",r.disabled)("required",r.required),s.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),s.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[s._Bn([{provide:$b,useExisting:n}]),s.qOj,s.TTD]}),n})(),A3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[np],imports:[[TU,_S,xr],TU,_S]}),n})();function oZ(n,t){if(1&n&&(s.O4$(),s._UZ(0,"circle",4)),2&n){const e=s.oxw(),r=s.MAs(1);s.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(r)),s.uIk("r",e._getCircleRadius())}}function aZ(n,t){if(1&n&&(s.O4$(),s._UZ(0,"circle",4)),2&n){const e=s.oxw(),r=s.MAs(1);s.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(r)),s.uIk("r",e._getCircleRadius())}}const cZ=qu(class{constructor(n){this._elementRef=n}},"primary"),uZ=new s.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class cd extends cZ{constructor(t,e,r,i,o,c,h,p){super(t),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=ns.w0.EMPTY,this.mode="determinate";const _=cd._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(r.head)||_.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),e.isBrowser&&e.SAFARI&&h&&c&&p&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Vi(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Vi(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Vi(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=tA(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var r;const e=50*(null!=(r=t.currentScale)?r:1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,r=cd._diameters;let i=r.get(t);if(!i||!i.has(e)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),t.appendChild(o),i||(i=new Set,r.set(t,i)),i.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}cd._diameters=new WeakMap,cd.\u0275fac=function(t){return new(t||cd)(s.Y36(s.SBq),s.Y36(Qi),s.Y36(Y,8),s.Y36(Vo,8),s.Y36(uZ),s.Y36(s.sBO),s.Y36(Pb),s.Y36(s.R0b))},cd.\u0275cmp=s.Xpm({type:cd,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(s.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[s.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(s.O4$(),s.TgZ(0,"svg",0,1),s.YNc(2,oZ,1,11,"circle",2),s.YNc(3,aZ,1,9,"circle",3),s.qZA()),2&t&&(s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.Q6J("ngSwitch","indeterminate"===e.mode),s.uIk("viewBox",e._getViewBox()),s.xp6(2),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1))},directives:[$s,ei],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let x3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[xr,be],xr]}),n})();const M3="@firebase/database";let cO="";function R3(n){cO=n}class gZ{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,ae.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,ae.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class mZ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,ae.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const O3=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new gZ(t)}}catch(t){}return new mZ},Jp=O3("localStorage"),uO=O3("sessionStorage"),$_=new La.Yd("@firebase/database"),P3=function(){let n=1;return function(){return n++}}(),N3=function(n){const t=(0,ae.dS)(n),e=new ae.gQ;e.update(t);const r=e.digest();return ae.US.encodeByteArray(r)},qb=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=qb.apply(null,r):t+="object"==typeof r?(0,ae.Pz)(r):r,t+=" "}return t};let Xp=null,F3=!0;const L3=function(n,t){(0,ae.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($_.logLevel=La.in.VERBOSE,Xp=$_.log.bind($_),t&&uO.set("logging_enabled",!0)):"function"==typeof n?Xp=n:(Xp=null,uO.remove("logging_enabled"))},js=function(...n){if(!0===F3&&(F3=!1,null===Xp&&!0===uO.get("logging_enabled")&&L3(!0)),Xp){const t=qb.apply(null,n);Xp(t)}},Zb=function(n){return function(...t){js(n,...t)}},dO=function(...n){const t="FIREBASE INTERNAL ERROR: "+qb(...n);$_.error(t)},au=function(...n){const t=`FIREBASE FATAL ERROR: ${qb(...n)}`;throw $_.error(t),new Error(t)},So=function(...n){const t="FIREBASE WARNING: "+qb(...n);$_.warn(t)},yS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ud="[MIN_NAME]",lu="[MAX_NAME]",eg=function(n,t){if(n===t)return 0;if(n===ud||t===lu)return-1;if(t===ud||n===lu)return 1;{const e=vS(n),r=vS(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},vZ=function(n,t){return n===t?0:n<t?-1:1},Yb=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,ae.Pz)(t))},hO=function(n){if("object"!=typeof n||null===n)return(0,ae.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,ae.Pz)(t[r]),e+=":",e+=hO(n[t[r]]);return e+="}",e},B3=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function Hs(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const V3=function(n){(0,ae.hu)(!yS(n),"Invalid JSON number");const r=1023;let i,o,c,h,p;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(o%2?1:0),o=Math.floor(o/2);_.push(i?1:0),_.reverse();const E=_.join("");let x="";for(p=0;p<64;p+=8){let $=parseInt(E.substr(p,8),2).toString(16);1===$.length&&($="0"+$),x+=$}return x.toLowerCase()},EZ=new RegExp("^-?(0*)\\d{1,10}$"),U3=-2147483648,fO=2147483647,vS=function(n){if(EZ.test(n)){const t=Number(n);if(t>=U3&&t<=fO)return t}return null},W_=function(n){try{n()}catch(t){setTimeout(()=>{throw So("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Kb=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class TZ{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){So(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class SZ{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(js("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',So(t)}}let Qb=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Z3="websocket",Y3="long_polling";class gO{constructor(t,e,r,i,o=!1,c="",h=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jp.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Jp.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function K3(n,t,e){let r;if((0,ae.hu)("string"==typeof t,"typeof type must == string"),(0,ae.hu)("object"==typeof e,"typeof params must == object"),t===Z3)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Y3)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return Hs(e,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class AZ{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,ae.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,ae.p$)(this.counters_)}}const mO={},_O={};function yO(n){const t=n.toString();return mO[t]||(mO[t]=new AZ),mO[t]}class MZ{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&W_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class kh{constructor(t,e,r,i,o,c,h){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zb(t),this.stats_=yO(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),K3(e,Y3,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new MZ(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ae.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vO((...o)=>{const[c,h,p,_,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$3.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kh.forceAllow_=!0}static forceDisallow(){kh.forceDisallow_=!0}static isAvailable(){return!((0,ae.Yr)()||!kh.forceAllow_&&(kh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,ae.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,ae.h$)(e),i=B3(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,ae.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,ae.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class vO{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ae.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=P3(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=vO.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){js("frame writing exception"),h.stack&&js(h.stack),js(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||js("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,ae.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{js("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let wS=null;"undefined"!=typeof MozWebSocket?wS=MozWebSocket:"undefined"!=typeof WebSocket&&(wS=WebSocket);let q_=(()=>{class n{constructor(e,r,i,o,c,h,p){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zb(this.connId),this.stats_=yO(r),this.connURL=n.connectionURL_(r,h,p,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,o,c){const h={v:"5"};return!(0,ae.Yr)()&&"undefined"!=typeof location&&location.hostname&&$3.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),K3(e,Z3,h)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jp.set("previous_websocket_failure",!0);try{let i;if((0,ae.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${cO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new wS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==wS&&!n.forceDisallow_}static previouslyFailed(){return Jp.isInMemoryStorage||!0===Jp.get("previous_websocket_failure")}markConnectionHealthy(){Jp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,ae.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,ae.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,ae.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=B3(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),rj=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[kh,q_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=q_&&q_.isAvailable();let i=r&&!q_.previouslyFailed();if(e.webSocketOnly&&(r||So("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[q_];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class uj{constructor(t,e,r,i,o,c,h,p,_,E){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zb("c:"+this.id+":"),this.transportManager_=new rj(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Kb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Yb("t",t),r=Yb("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Yb("t",t),r=Yb("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Yb("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?dO("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dO("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&So("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Kb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dj{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class hj{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,ae.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===e&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){(0,ae.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class CS extends hj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ae.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new CS}getInitialEvent(t){return(0,ae.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Gr{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Mr(){return new Gr("")}function tr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Rh(n){return n.pieces_.length-n.pieceNum_}function ai(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Gr(n.pieces_,t)}function wO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Jb(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function gj(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Gr(t,0)}function Ti(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Gr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Gr(e,0)}function nr(n){return n.pieceNum_>=n.pieces_.length}function Wo(n,t){const e=tr(n),r=tr(t);if(null===e)return t;if(e===r)return Wo(ai(n),ai(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function JZ(n,t){const e=Jb(n,0),r=Jb(t,0);for(let i=0;i<e.length&&i<r.length;i++){const o=eg(e[i],r[i]);if(0!==o)return o}return e.length===r.length?0:e.length<r.length?-1:1}function CO(n,t){if(Rh(n)!==Rh(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function wl(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Rh(n)>Rh(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class XZ{constructor(t,e){this.errorPrefix_=e,this.parts_=Jb(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ae.ug)(this.parts_[r]);mj(this)}}function mj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+tg(n))}function tg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EO extends hj{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EO}getInitialEvent(t){return(0,ae.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Xb=1e3;let IS,ng=(()=>{class n extends dj{constructor(e,r,i,o,c,h,p,_){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=Zb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,ae.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EO.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&CS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const o=++this.requestNumber_,c={r:o,a:e,b:r};this.log_((0,ae.Pz)(c)),(0,ae.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const r=new ae.BH,i={p:e._path.toString(),q:e._queryObject},o={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||o!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(e,r,i,o){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,ae.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ae.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:r,query:e,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,E=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(i,o),e.onComplete&&e.onComplete(E,_))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,ae.r3)(e,"w")){const i=(0,ae.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();So(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,ae.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,ae.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,ae.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,r)}sendUnlisten_(e,r,i,o){this.log_("Unlisten on "+e+" for "+r);const c={p:e};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(e,r,i,o){this.putInternal("p",e,r,i,o)}merge(e,r,i,o){this.putInternal("m",e,r,i,o)}putInternal(e,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,ae.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):dO("Unrecognized action received from server: "+(0,ae.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,ae.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ut.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let p=!1,_=null;const E=function(){_?_.close():(p=!0,o())};e.realtime_={close:E,sendRequest:function(se){(0,ae.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(se)}};const $=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[se,ye]=yield Promise.all([e.authTokenProvider_.getToken($),e.appCheckTokenProvider_.getToken($)]);p?js("getToken() completed but was canceled"):(js("getToken() completed. Creating connection."),e.authToken_=se&&se.accessToken,e.appCheckToken_=ye&&ye.token,_=new uj(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,o,ze=>{So(ze+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(se){e.log_("Failed to get token: "+se),p||(e.repoInfo_.nodeAdmin&&So(se),E())}}})()}interrupt(e){js("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){js("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,ae.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Xb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(c=>hO(c)).join("$"):"default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){const i=new Gr(e).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,r){js("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){js("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,ae.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+cO.replace(/\./g,"-")]=1,(0,ae.uI)()?e["framework.cordova"]=1:(0,ae.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=CS.getInstance().currentlyOnline();return(0,ae.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ir{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new ir(t,e)}}class ES{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new ir(ud,t),i=new ir(ud,e);return 0!==this.compare(r,i)}minPost(){return ir.MIN}}class vj extends ES{static get __EMPTY_NODE(){return IS}static set __EMPTY_NODE(t){IS=t}compare(t,e){return eg(t.name,e.name)}isDefinedOn(t){throw(0,ae.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return ir.MIN}maxPost(){return new ir(lu,IS)}makePost(t,e){return(0,ae.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new ir(t,IS)}toString(){return".key"}}const cu=new vj;class TS{constructor(t,e,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?r(t.key,e):1,i&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let TO,gc=(()=>{class n{constructor(e,r,i,o,c){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:ga.EMPTY_NODE,this.right=null!=c?c:ga.EMPTY_NODE}copy(e,r,i,o,c){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(e,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ga.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,o;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return ga.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ga{constructor(t,e=ga.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new ga(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,gc.BLACK,null,null))}remove(t){return new ga(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,gc.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new TS(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new TS(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new TS(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new TS(this.root_,null,this.comparator_,!0,t)}}function lY(n,t){return eg(n.name,t.name)}function IO(n,t){return eg(n,t)}ga.EMPTY_NODE=new class{copy(t,e,r,i,o){return this}insert(t,e,r){return new gc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const bj=function(n){return"number"==typeof n?"number:"+V3(n):"string:"+n},wj=function(n){if(n.isLeafNode()){const t=n.val();(0,ae.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,ae.r3)(t,".sv"),"Priority must be a string or number.")}else(0,ae.hu)(n===TO||n.isEmpty(),"priority of unexpected type.");(0,ae.hu)(n===TO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Cj,Ej,Ij,Z_=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,ae.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wj(this.priorityNode_)}static set __childrenNodeConstructor(e){Cj=e}static get __childrenNodeConstructor(){return Cj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return nr(e)?this:".priority"===tr(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=tr(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,ae.hu)(".priority"!==i||1===Rh(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ai(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+bj(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?V3(this.value_):this.value_,this.lazyHash_=N3(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,ae.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,ae.hu)(o>=0,"Unknown leaf type: "+r),(0,ae.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const hi=new class extends ES{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),o=r.compareTo(i);return 0===o?eg(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return ir.MIN}maxPost(){return new ir(lu,new Z_("[PRIORITY-POST]",Ij))}makePost(t,e){const r=Ej(t);return new ir(e,new Z_("[PRIORITY-POST]",r))}toString(){return".priority"}},fY=Math.log(2);class pY{constructor(t){this.count=parseInt(Math.log(t+1)/fY,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const SS=function(n,t,e,r){n.sort(t);const i=function(p,_){const E=_-p;let x,$;if(0===E)return null;if(1===E)return x=n[p],$=e?e(x):x,new gc($,x.node,gc.BLACK,null,null);{const se=parseInt(E/2,10)+p,ye=i(p,se),ze=i(se+1,_);return x=n[se],$=e?e(x):x,new gc($,x.node,gc.BLACK,ye,ze)}},h=function(p){let _=null,E=null,x=n.length;const $=function(ye,ze){const rt=x-ye,It=x;x-=ye;const jt=i(rt+1,It),Vt=n[rt],Ht=e?e(Vt):Vt;se(new gc(Ht,Vt.node,ze,null,jt))},se=function(ye){_?(_.left=ye,_=ye):(E=ye,_=ye)};for(let ye=0;ye<p.count;++ye){const ze=p.nextBitIsOne(),rt=Math.pow(2,p.count-(ye+1));ze?$(rt,gc.BLACK):($(rt,gc.BLACK),$(rt,gc.RED))}return E}(new pY(n.length));return new ga(r||t,h)};let SO;const Y_={};class dd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,ae.hu)(Y_&&hi,"ChildrenNode.ts has not been loaded"),SO=SO||new dd({".priority":Y_},{".priority":hi}),SO}get(t){const e=(0,ae.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ga?e:null}hasIndex(t){return(0,ae.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,ae.hu)(t!==cu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=e.getIterator(ir.Wrap);let h,c=o.getNext();for(;c;)i=i||t.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?SS(r,t.getCompare()):Y_;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const E=Object.assign({},this.indexes_);return E[p]=h,new dd(E,_)}addToIndexes(t,e){const r=(0,ae.UI)(this.indexes_,(i,o)=>{const c=(0,ae.DV)(this.indexSet_,o);if((0,ae.hu)(c,"Missing index implementation for "+o),i===Y_){if(c.isDefinedOn(t.node)){const h=[],p=e.getIterator(ir.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&h.push(_),_=p.getNext();return h.push(t),SS(h,c.getCompare())}return Y_}{const h=e.get(t.name);let p=i;return h&&(p=p.remove(new ir(t.name,h))),p.insert(t,t.node)}});return new dd(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,ae.UI)(this.indexes_,i=>{if(i===Y_)return i;{const o=e.get(t.name);return o?i.remove(new ir(t.name,o)):i}});return new dd(r,this.indexSet_)}}let ew,Bn=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wj(this.priorityNode_),this.children_.isEmpty()&&(0,ae.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ew||(ew=new n(new ga(IO),null,dd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ew}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?ew:r}}getChild(e){const r=tr(e);return null===r?this:this.getImmediateChild(r).getChild(ai(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,ae.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new ir(e,r);let o,c;r.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?ew:this.priorityNode_;return new n(o,h,c)}}updateChild(e,r){const i=tr(e);if(null===i)return r;{(0,ae.hu)(".priority"!==tr(e)||1===Rh(e),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(ai(e),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(hi,(h,p)=>{r[h]=p.val(e),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!e&&c&&o<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+bj(this.getPriority().val())+":"),this.forEachChild(hi,(r,i)=>{const o=i.hash();""!==o&&(e+=":"+r+":"+o)}),this.lazyHash_=""===e?"":N3(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new ir(e,r));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new ir(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new ir(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,ir.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,ir.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tw?-1:0}withIndex(e){if(e===cu||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===cu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(hi),o=r.getIterator(hi);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===cu?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tw=new class extends Bn{constructor(){super(new ga(IO),Bn.EMPTY_NODE,dd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Bn.EMPTY_NODE}isEmpty(){return!1}};function Ri(n,t=null){if(null===n)return Bn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,ae.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Z_(n,Ri(t));if(n instanceof Array){let e=Bn.EMPTY_NODE;return Hs(n,(r,i)=>{if((0,ae.r3)(n,r)&&"."!==r.substring(0,1)){const o=Ri(i);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(r,o))}}),e.updatePriority(Ri(t))}{const e=[];let r=!1;if(Hs(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Ri(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),e.push(new ir(c,p)))}}),0===e.length)return Bn.EMPTY_NODE;const o=SS(e,lY,c=>c.name,IO);if(r){const c=SS(e,hi.getCompare());return new Bn(o,Ri(t),new dd({".priority":c},{".priority":hi}))}return new Bn(o,Ri(t),dd.Default)}}Object.defineProperties(ir,{MIN:{value:new ir(ud,Bn.EMPTY_NODE)},MAX:{value:new ir(lu,tw)}}),vj.__EMPTY_NODE=Bn.EMPTY_NODE,Z_.__childrenNodeConstructor=Bn,function(n){TO=n}(tw),function(n){Ij=n}(tw),function(n){Ej=n}(Ri);class DO extends ES{constructor(t){super(),this.indexPath_=t,(0,ae.hu)(!nr(t)&&".priority"!==tr(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),o=r.compareTo(i);return 0===o?eg(t.name,e.name):o}makePost(t,e){const r=Ri(t),i=Bn.EMPTY_NODE.updateChild(this.indexPath_,r);return new ir(e,i)}maxPost(){const t=Bn.EMPTY_NODE.updateChild(this.indexPath_,tw);return new ir(lu,t)}toString(){return Jb(this.indexPath_,0).join("/")}}const AO=new class extends ES{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?eg(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return ir.MIN}maxPost(){return ir.MAX}makePost(t,e){const r=Ri(t);return new ir(e,r)}toString(){return".value"}},K_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yY=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const o=new Array(8);for(i=7;i>=0;i--)o[i]=K_.charAt(e%64),e=Math.floor(e/64);(0,ae.hu)(0===e,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=K_.charAt(t[i]);return(0,ae.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),Dj=function(n){if(n===""+fO)return"-";const t=vS(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return lu;const o=K_.charAt(K_.indexOf(e[r])+1);return e[r]=o,e.slice(0,r+1).join("")},Aj=function(n){if(n===""+U3)return ud;const t=vS(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+fO:(delete e[e.length-1],e.join("")):(e[e.length-1]=K_.charAt(K_.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function xj(n){return{type:"value",snapshotNode:n}}function Q_(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function nw(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function rw(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class MO{constructor(t){this.index_=t}updateChild(t,e,r,i,o,c){(0,ae.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?t.hasChild(e)?c.trackChildChange(nw(e,h)):(0,ae.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Q_(e,r)):c.trackChildChange(rw(e,r,h))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(hi,(i,o)=>{e.hasChild(i)||r.trackChildChange(nw(i,o))}),e.isLeafNode()||e.forEachChild(hi,(i,o)=>{if(t.hasChild(i)){const c=t.getImmediateChild(i);c.equals(o)||r.trackChildChange(rw(i,o,c))}else r.trackChildChange(Q_(i,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Bn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class iw{constructor(t){this.indexedFilter_=new MO(t.getIndex()),this.index_=t.getIndex(),this.startPost_=iw.getStartPost_(t),this.endPost_=iw.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,o,c){return this.matches(new ir(e,r))||(r=Bn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,o,c)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Bn.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Bn.EMPTY_NODE);const o=this;return e.forEachChild(hi,(c,h)=>{o.matches(new ir(c,h))||(i=i.updateImmediateChild(c,Bn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class bY{constructor(t){this.rangedFilter_=new iw(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,o,c){return this.rangedFilter_.matches(new ir(e,r))||(r=Bn.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,o,c):this.fullLimitUpdateChild_(t,e,r,o,c)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Bn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;i=Bn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let o,c,h,p;if(i=e.withIndex(this.index_),i=i.updatePriority(Bn.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();h=($,se)=>x(se,$)}else p=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let _=0,E=!1;for(;p.hasNext();){const x=p.getNext();!E&&h(o,x)<=0&&(E=!0),E&&_<this.limit_&&h(x,c)<=0?_++:i=i.updateImmediateChild(x.name,Bn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,o){let c;if(this.reverse_){const x=this.index_.getCompare();c=($,se)=>x(se,$)}else c=this.index_.getCompare();const h=t;(0,ae.hu)(h.numChildren()===this.limit_,"");const p=new ir(e,r),_=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(h.hasChild(e)){const x=h.getImmediateChild(e);let $=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=$&&($.name===e||h.hasChild($.name));)$=i.getChildAfterChild(this.index_,$,this.reverse_);const se=null==$?1:c($,p);if(E&&!r.isEmpty()&&se>=0)return null!=o&&o.trackChildChange(rw(e,r,x)),h.updateImmediateChild(e,r);{null!=o&&o.trackChildChange(nw(e,x));const ze=h.updateImmediateChild(e,Bn.EMPTY_NODE);return null!=$&&this.rangedFilter_.matches($)?(null!=o&&o.trackChildChange(Q_($.name,$.node)),ze.updateImmediateChild($.name,$.node)):ze}}return r.isEmpty()?t:E&&c(_,p)>=0?(null!=o&&(o.trackChildChange(nw(_.name,_.node)),o.trackChildChange(Q_(e,r))),h.updateImmediateChild(e,r).updateImmediateChild(_.name,Bn.EMPTY_NODE)):t}}class DS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ud}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ae.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hi}copy(){const t=new DS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function kO(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function RO(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function AS(n,t){const e=n.copy();return e.index_=t,e}function Mj(n){const t={};if(n.isDefault())return t;let e;return n.index_===hi?e="$priority":n.index_===AO?e="$value":n.index_===cu?e="$key":((0,ae.hu)(n.index_ instanceof DO,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,ae.Pz)(e),n.startSet_&&(t.startAt=(0,ae.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,ae.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,ae.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,ae.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function kj(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==hi&&(t.i=n.index_.toString()),t}class xS extends dj{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Zb("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,ae.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const c=xS.getListenId_(t,r),h={};this.listens_[c]=h;const p=Mj(t._queryParams);this.restRequest_(o+".json",p,(_,E)=>{let x=E;if(404===_&&(x=null,_=null),null===_&&this.onDataUpdate_(o,x,!1,r),(0,ae.DV)(this.listens_,c)===h){let $;$=_?401===_?"permission_denied":"rest_error:"+_:"ok",i($,null)}})}unlisten(t,e){const r=xS.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Mj(t._queryParams),r=t._path.toString(),i=new ae.BH;return this.restRequest_(r+".json",e,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,ae.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,ae.cI)(h.responseText)}catch(_){So("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&So("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class SY{constructor(){this.rootNode_=Bn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function MS(){return{value:null,children:new Map}}function J_(n,t,e){if(nr(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=tr(t);n.children.has(r)||n.children.set(r,MS()),J_(n.children.get(r),t=ai(t),e)}}function OO(n,t){if(nr(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(hi,(r,i)=>{J_(n,new Gr(r),i)}),OO(n,t)}}if(n.children.size>0){const e=tr(t);return t=ai(t),n.children.has(e)&&OO(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function PO(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{PO(i,new Gr(t.toString()+"/"+r),e)})}class AY{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Hs(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class kY{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new AY(t);const r=1e4+2e4*Math.random();Kb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;Hs(t,(i,o)=>{o>0&&(0,ae.r3)(this.statsToReport_,i)&&(e[i]=o,r=!0)}),r&&this.server_.reportStats(e),Kb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Cl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Cl||(Cl={})),Cl))();function LO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kS{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Cl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(nr(this.path)){if(null!=this.affectedTree.value)return(0,ae.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Gr(t));return new kS(Mr(),e,this.revert)}}return(0,ae.hu)(tr(this.path)===t,"operationForChild called for unrelated child."),new kS(ai(this.path),this.affectedTree,this.revert)}}class sw{constructor(t,e){this.source=t,this.path=e,this.type=Cl.LISTEN_COMPLETE}operationForChild(t){return nr(this.path)?new sw(this.source,Mr()):new sw(this.source,ai(this.path))}}class rg{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Cl.OVERWRITE}operationForChild(t){return nr(this.path)?new rg(this.source,Mr(),this.snap.getImmediateChild(t)):new rg(this.source,ai(this.path),this.snap)}}class X_{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Cl.MERGE}operationForChild(t){if(nr(this.path)){const e=this.children.subtree(new Gr(t));return e.isEmpty()?null:e.value?new rg(this.source,Mr(),e.value):new X_(this.source,Mr(),e)}return(0,ae.hu)(tr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new X_(this.source,ai(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Oh{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(nr(t))return this.isFullyInitialized()&&!this.filtered_;const e=tr(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class RY{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function ow(n,t,e,r,i,o){const c=r.filter(h=>h.type===e);c.sort((h,p)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,ae.g5)("Should only compare child_ events.");const r=new ir(t.childName,t.snapshotNode),i=new ir(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,o);i.forEach(_=>{_.respondsTo(h.type)&&t.push(_.createEvent(p,n.query_))})})}function RS(n,t){return{eventCache:n,serverCache:t}}function aw(n,t,e,r){return RS(new Oh(t,e,r),n.serverCache)}function Oj(n,t,e,r){return RS(n.eventCache,new Oh(t,e,r))}function OS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ig(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let BO;class fi{constructor(t,e=(()=>(BO||(BO=new ga(vZ)),BO))()){this.value=t,this.children=e}static fromObject(t){let e=new fi(null);return Hs(t,(r,i)=>{e=e.set(new Gr(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Mr(),value:this.value};if(nr(t))return null;{const r=tr(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(ai(t),e);return null!=o?{path:Ti(new Gr(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(nr(t))return this;{const e=tr(t),r=this.children.get(e);return null!==r?r.subtree(ai(t)):new fi(null)}}set(t,e){if(nr(t))return new fi(e,this.children);{const r=tr(t),o=(this.children.get(r)||new fi(null)).set(ai(t),e),c=this.children.insert(r,o);return new fi(this.value,c)}}remove(t){if(nr(t))return this.children.isEmpty()?new fi(null):new fi(null,this.children);{const e=tr(t),r=this.children.get(e);if(r){const i=r.remove(ai(t));let o;return o=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&o.isEmpty()?new fi(null):new fi(this.value,o)}return this}}get(t){if(nr(t))return this.value;{const e=tr(t),r=this.children.get(e);return r?r.get(ai(t)):null}}setTree(t,e){if(nr(t))return e;{const r=tr(t),o=(this.children.get(r)||new fi(null)).setTree(ai(t),e);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new fi(this.value,c)}}fold(t){return this.fold_(Mr(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ti(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,Mr(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(nr(t))return null;{const o=tr(t),c=this.children.get(o);return c?c.findOnPath_(ai(t),Ti(e,o),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Mr(),e)}foreachOnPath_(t,e,r){if(nr(t))return this;{this.value&&r(e,this.value);const i=tr(t),o=this.children.get(i);return o?o.foreachOnPath_(ai(t),Ti(e,i),r):new fi(null)}}foreach(t){this.foreach_(Mr(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(Ti(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class mc{constructor(t){this.writeTree_=t}static empty(){return new mc(new fi(null))}}function lw(n,t,e){if(nr(t))return new mc(new fi(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const c=Wo(i,t);return o=o.updateChild(c,e),new mc(n.writeTree_.set(i,o))}{const i=new fi(e),o=n.writeTree_.setTree(t,i);return new mc(o)}}}function VO(n,t,e){let r=n;return Hs(e,(i,o)=>{r=lw(r,Ti(t,i),o)}),r}function Pj(n,t){if(nr(t))return mc.empty();{const e=n.writeTree_.setTree(t,new fi(null));return new mc(e)}}function UO(n,t){return null!=sg(n,t)}function sg(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Wo(e.path,t)):null}function Nj(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(hi,(r,i)=>{t.push(new ir(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new ir(r,i.value))}),t}function Ph(n,t){if(nr(t))return n;{const e=sg(n,t);return new mc(null!=e?new fi(e):n.writeTree_.subtree(t))}}function jO(n){return n.writeTree_.isEmpty()}function ey(n,t){return Fj(Mr(),n.writeTree_,t)}function Fj(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?((0,ae.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):e=Fj(Ti(n,i),o,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(Ti(n,".priority"),r)),e}}function PS(n,t){return jj(t,n)}function jY(n,t){if(n.snap)return wl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&wl(Ti(n.path,e),t))return!0;return!1}function zY(n){return n.visible}function Lj(n,t,e){let r=mc.empty();for(let i=0;i<n.length;++i){const o=n[i];if(t(o)){const c=o.path;let h;if(o.snap)wl(e,c)?(h=Wo(e,c),r=lw(r,h,o.snap)):wl(c,e)&&(h=Wo(c,e),r=lw(r,Mr(),o.snap.getChild(h)));else{if(!o.children)throw(0,ae.g5)("WriteRecord should have .snap or .children");if(wl(e,c))h=Wo(e,c),r=VO(r,h,o.children);else if(wl(c,e))if(h=Wo(c,e),nr(h))r=VO(r,Mr(),o.children);else{const p=(0,ae.DV)(o.children,tr(h));if(p){const _=p.getChild(ai(h));r=lw(r,Mr(),_)}}}}}return r}function Bj(n,t,e,r,i){if(r||i){const o=Ph(n.visibleWrites,t);return!i&&jO(o)?e:i||null!=e||UO(o,Mr())?ey(Lj(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(wl(_.path,t)||wl(t,_.path))},t),e||Bn.EMPTY_NODE):null}{const o=sg(n.visibleWrites,t);if(null!=o)return o;{const c=Ph(n.visibleWrites,t);return jO(c)?e:null!=e||UO(c,Mr())?ey(c,e||Bn.EMPTY_NODE):null}}}function NS(n,t,e,r){return Bj(n.writeTree,n.treePath,t,e,r)}function HO(n,t){return function(n,t,e){let r=Bn.EMPTY_NODE;const i=sg(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(hi,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(e){const o=Ph(n.visibleWrites,t);return e.forEachChild(hi,(c,h)=>{const p=ey(Ph(o,new Gr(c)),h);r=r.updateImmediateChild(c,p)}),Nj(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return Nj(Ph(n.visibleWrites,t)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,t)}function Vj(n,t,e,r){return function(n,t,e,r,i){(0,ae.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ti(t,e);if(UO(n.visibleWrites,o))return null;{const c=Ph(n.visibleWrites,o);return jO(c)?i.getChild(e):ey(c,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function FS(n,t){return function(n,t){return sg(n.visibleWrites,t)}(n.writeTree,Ti(n.treePath,t))}function zO(n,t,e){return function(n,t,e,r){const i=Ti(t,e),o=sg(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(e)?ey(Ph(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function Uj(n,t){return jj(Ti(n.treePath,t),n.writeTree)}function jj(n,t){return{treePath:n,writeTree:t}}class QY{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,ae.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,ae.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(r,rw(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(r,nw(r,i.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(r,Q_(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,ae.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,rw(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const Hj=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class GO{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new Oh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zO(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ig(this.viewCache_),o=function(n,t,e,r,i,o){return function(n,t,e,r,i,o,c){let h;const p=Ph(n.visibleWrites,t),_=sg(p,Mr());if(null!=_)h=_;else{if(null==e)return[];h=ey(p,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const E=[],x=c.getCompare(),$=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let se=$.getNext();for(;se&&E.length<i;)0!==x(se,r)&&E.push(se),se=$.getNext();return E}}(n.writeTree,n.treePath,t,e,r,i,o)}(this.writes_,i,e,1,r,t);return 0===o.length?null:o[0]}}function zj(n,t,e,r,i,o){const c=t.eventCache;if(null!=FS(r,e))return t;{let h,p;if(nr(e))if((0,ae.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=ig(t),x=HO(r,_ instanceof Bn?_:Bn.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),x,o)}else{const _=NS(r,ig(t));h=n.filter.updateFullNode(t.eventCache.getNode(),_,o)}else{const _=tr(e);if(".priority"===_){(0,ae.hu)(1===Rh(e),"Can't have a priority with additional path components");const E=c.getNode();p=t.serverCache.getNode();const x=Vj(r,e,E,p);h=null!=x?n.filter.updatePriority(E,x):c.getNode()}else{const E=ai(e);let x;if(c.isCompleteForChild(_)){p=t.serverCache.getNode();const $=Vj(r,e,c.getNode(),p);x=null!=$?c.getNode().getImmediateChild(_).updateChild(E,$):c.getNode().getImmediateChild(_)}else x=zO(r,_,t.serverCache);h=null!=x?n.filter.updateChild(c.getNode(),_,x,E,i,o):c.getNode()}}return aw(t,h,c.isFullyInitialized()||nr(e),n.filter.filtersNodes())}}function LS(n,t,e,r,i,o,c,h){const p=t.serverCache;let _;const E=c?n.filter:n.filter.getIndexedFilter();if(nr(e))_=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const se=p.getNode().updateChild(e,r);_=E.updateFullNode(p.getNode(),se,null)}else{const se=tr(e);if(!p.isCompleteForPath(e)&&Rh(e)>1)return t;const ye=ai(e),rt=p.getNode().getImmediateChild(se).updateChild(ye,r);_=".priority"===se?E.updatePriority(p.getNode(),rt):E.updateChild(p.getNode(),se,rt,ye,Hj,null)}const x=Oj(t,_,p.isFullyInitialized()||nr(e),E.filtersNodes());return zj(n,x,e,i,new GO(i,x,o),h)}function $O(n,t,e,r,i,o,c){const h=t.eventCache;let p,_;const E=new GO(i,t,o);if(nr(e))_=n.filter.updateFullNode(t.eventCache.getNode(),r,c),p=aw(t,_,!0,n.filter.filtersNodes());else{const x=tr(e);if(".priority"===x)_=n.filter.updatePriority(t.eventCache.getNode(),r),p=aw(t,_,h.isFullyInitialized(),h.isFiltered());else{const $=ai(e),se=h.getNode().getImmediateChild(x);let ye;if(nr($))ye=r;else{const ze=E.getCompleteChild(x);ye=null!=ze?".priority"===wO($)&&ze.getChild(gj($)).isEmpty()?ze:ze.updateChild($,r):Bn.EMPTY_NODE}p=se.equals(ye)?t:aw(t,n.filter.updateChild(h.getNode(),x,ye,$,E,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function Gj(n,t){return n.eventCache.isCompleteForChild(t)}function $j(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function WO(n,t,e,r,i,o,c,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=nr(e)?r:new fi(null).setTree(e,r);const E=t.serverCache.getNode();return _.children.inorderTraversal((x,$)=>{if(E.hasChild(x)){const ye=$j(0,t.serverCache.getNode().getImmediateChild(x),$);p=LS(n,p,new Gr(x),ye,i,o,c,h)}}),_.children.inorderTraversal((x,$)=>{const se=!t.serverCache.isCompleteForChild(x)&&void 0===$.value;if(!E.hasChild(x)&&!se){const ze=$j(0,t.serverCache.getNode().getImmediateChild(x),$);p=LS(n,p,new Gr(x),ze,i,o,c,h)}}),p}class aK{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new MO(r.getIndex()),o=function(n){return n.loadsAllData()?new MO(n.getIndex()):n.hasLimit()?new bY(n):new iw(n)}(r);this.processor_=function(n){return{filter:n}}(o);const c=e.serverCache,h=e.eventCache,p=i.updateFullNode(Bn.EMPTY_NODE,c.getNode(),null),_=o.updateFullNode(Bn.EMPTY_NODE,h.getNode(),null),E=new Oh(p,c.isFullyInitialized(),i.filtersNodes()),x=new Oh(_,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=RS(x,E),this.eventGenerator_=new RY(this.query_)}get query(){return this.query_}}function uK(n,t){const e=ig(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!nr(t)&&!e.getImmediateChild(tr(t)).isEmpty())?e.getChild(t):null}function Wj(n){return 0===n.eventRegistrations_.length}function qj(n,t,e){const r=[];if(e){(0,ae.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(e,i);c&&r.push(c)})}if(t){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Zj(n,t,e,r){t.type===Cl.MERGE&&null!==t.source.queryId&&((0,ae.hu)(ig(n.viewCache_),"We should always have a full cache before handling merges"),(0,ae.hu)(OS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function(n,t,e,r,i){const o=new QY;let c,h;if(e.type===Cl.OVERWRITE){const _=e;_.source.fromUser?c=$O(n,t,_.path,_.snap,r,i,o):((0,ae.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||t.serverCache.isFiltered()&&!nr(_.path),c=LS(n,t,_.path,_.snap,r,i,h,o))}else if(e.type===Cl.MERGE){const _=e;_.source.fromUser?c=function(n,t,e,r,i,o,c){let h=t;return r.foreach((p,_)=>{const E=Ti(e,p);Gj(t,tr(E))&&(h=$O(n,h,E,_,i,o,c))}),r.foreach((p,_)=>{const E=Ti(e,p);Gj(t,tr(E))||(h=$O(n,h,E,_,i,o,c))}),h}(n,t,_.path,_.children,r,i,o):((0,ae.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||t.serverCache.isFiltered(),c=WO(n,t,_.path,_.children,r,i,h,o))}else if(e.type===Cl.ACK_USER_WRITE){const _=e;c=_.revert?function(n,t,e,r,i,o){let c;if(null!=FS(r,e))return t;{const h=new GO(r,t,i),p=t.eventCache.getNode();let _;if(nr(e)||".priority"===tr(e)){let E;if(t.serverCache.isFullyInitialized())E=NS(r,ig(t));else{const x=t.serverCache.getNode();(0,ae.hu)(x instanceof Bn,"serverChildren would be complete if leaf node"),E=HO(r,x)}E=E,_=n.filter.updateFullNode(p,E,o)}else{const E=tr(e);let x=zO(r,E,t.serverCache);null==x&&t.serverCache.isCompleteForChild(E)&&(x=p.getImmediateChild(E)),_=null!=x?n.filter.updateChild(p,E,x,ai(e),h,o):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Bn.EMPTY_NODE,ai(e),h,o):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=NS(r,ig(t)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,o)))}return c=t.serverCache.isFullyInitialized()||null!=FS(r,Mr()),aw(t,_,c,n.filter.filtersNodes())}}(n,t,_.path,r,i,o):function(n,t,e,r,i,o,c){if(null!=FS(i,e))return t;const h=t.serverCache.isFiltered(),p=t.serverCache;if(null!=r.value){if(nr(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return LS(n,t,e,p.getNode().getChild(e),i,o,h,c);if(nr(e)){let _=new fi(null);return p.getNode().forEachChild(cu,(E,x)=>{_=_.set(new Gr(E),x)}),WO(n,t,e,_,i,o,h,c)}return t}{let _=new fi(null);return r.foreach((E,x)=>{const $=Ti(e,E);p.isCompleteForPath($)&&(_=_.set(E,p.getNode().getChild($)))}),WO(n,t,e,_,i,o,h,c)}}(n,t,_.path,_.affectedTree,r,i,o)}else{if(e.type!==Cl.LISTEN_COMPLETE)throw(0,ae.g5)("Unknown operation type: "+e.type);c=function(n,t,e,r,i){const o=t.serverCache;return zj(n,Oj(t,o.getNode(),o.isFullyInitialized()||nr(e),o.isFiltered()),e,r,Hj,i)}(n,t,e.path,r,o)}const p=o.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=OS(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&e.push(xj(OS(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,i,t,e,r);return function(n,t){(0,ae.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ae.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,ae.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Yj(n,o.changes,o.viewCache.eventCache.getNode(),null)}function Yj(n,t,e,r){return function(n,t,e,r){const i=[],o=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),ow(n,i,"child_removed",t,r,e),ow(n,i,"child_added",t,r,e),ow(n,i,"child_moved",o,r,e),ow(n,i,"child_changed",t,r,e),ow(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let BS,US;class Kj{constructor(){this.views=new Map}}function qO(n,t,e,r){const i=t.source.queryId;if(null!==i){const o=n.views.get(i);return(0,ae.hu)(null!=o,"SyncTree gave us an op for an invalid query."),Zj(o,t,e,r)}{let o=[];for(const c of n.views.values())o=o.concat(Zj(c,t,e,r));return o}}function Qj(n,t,e,r,i){const c=n.views.get(t._queryIdentifier);if(!c){let h=NS(e,i?r:null),p=!1;h?p=!0:r instanceof Bn?(h=HO(e,r),p=!1):(h=Bn.EMPTY_NODE,p=!1);const _=RS(new Oh(h,p,!1),new Oh(r,i,!1));return new aK(t,_)}return c}function Jj(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Nh(n,t){let e=null;for(const r of n.views.values())e=e||uK(r,t);return e}function Xj(n,t){return t._queryParams.loadsAllData()?VS(n):n.views.get(t._queryIdentifier)}function eH(n,t){return null!=Xj(n,t)}function Fh(n){return null!=VS(n)}function VS(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let bK=1;class tH{constructor(t){this.listenProvider_=t,this.syncPointTree_=new fi(null),this.pendingWriteTree_={visibleWrites:mc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZO(n,t,e,r,i){return function(n,t,e,r,i){(0,ae.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=lw(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?ty(n,new rg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Lh(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,ae.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=e&&jY(h,r.path)?i=!1:wl(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function(n){n.visibleWrites=Lj(n.allWrites,zY,Mr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Pj(n.visibleWrites,r.path):Hs(r.children,p=>{n.visibleWrites=Pj(n.visibleWrites,Ti(r.path,p))}),!0))}(n.pendingWriteTree_,t)){let o=new fi(null);return null!=r.snap?o=o.set(Mr(),!0):Hs(r.children,c=>{o=o.set(new Gr(c),!0)}),ty(n,new kS(r.path,o,e))}return[]}function cw(n,t,e){return ty(n,new rg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function YO(n,t,e,r){const i=t._path,o=n.syncPointTree_.get(i);let c=[];if(o&&("default"===t._queryIdentifier||eH(o,t))){const h=function(n,t,e,r){const i=t._queryIdentifier,o=[];let c=[];const h=Fh(n);if("default"===i)for(const[p,_]of n.views.entries())c=c.concat(qj(_,e,r)),Wj(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||o.push(_.query));else{const p=n.views.get(i);p&&(c=c.concat(qj(p,e,r)),Wj(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!Fh(n)&&o.push(new((0,ae.hu)(BS,"Reference.ts has not been loaded"),BS)(t._repo,t._path)),{removed:o,events:c}}(o,t,e,r);(function(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;c=h.events;const _=-1!==p.findIndex(x=>x._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(i,(x,$)=>Fh($));if(_&&!E){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const $=function(n){return n.fold((t,e,r)=>{if(e&&Fh(e))return[VS(e)];{let i=[];return e&&(i=Jj(e)),Hs(r,(o,c)=>{i=i.concat(c)}),i}})}(x);for(let se=0;se<$.length;++se){const ye=$[se],ze=ye.query,rt=sH(n,ye);n.listenProvider_.startListening(uw(ze),HS(n,ze),rt.hashFn,rt.onComplete)}}}if(!E&&p.length>0&&!r)if(_){const x=null;n.listenProvider_.stopListening(uw(t),x)}else p.forEach(x=>{const $=n.queryToTagMap.get(zS(x));n.listenProvider_.stopListening(uw(x),$)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=zS(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,p)}return c}function nH(n,t,e){const r=t._path;let i=null,o=!1;n.syncPointTree_.foreachOnPath(r,(x,$)=>{const se=Wo(x,r);i=i||Nh($,se),o=o||Fh($)});let h,c=n.syncPointTree_.get(r);c?(o=o||Fh(c),i=i||Nh(c,Mr())):(c=new Kj,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?h=!0:(h=!1,i=Bn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild(($,se)=>{const ye=Nh(se,Mr());ye&&(i=i.updateImmediateChild($,ye))}));const p=eH(c,t);if(!p&&!t._queryParams.loadsAllData()){const x=zS(t);(0,ae.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const $=bK++;n.queryToTagMap.set(x,$),n.tagToQueryMap.set($,x)}let E=function(n,t,e,r,i,o){const c=Qj(n,t,r,i,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function(n,t){n.eventRegistrations_.push(t)}(c,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(hi,(o,c)=>{r.push(Q_(o,c))}),e.isFullyInitialized()&&r.push(xj(e.getNode())),Yj(n,r,e.getNode(),t)}(c,e)}(c,t,e,PS(n.pendingWriteTree_,r),i,h);if(!p&&!o){const x=Xj(c,t);E=E.concat(function(n,t,e){const r=t._path,i=HS(n,t),o=sH(n,e),c=n.listenProvider_.startListening(uw(t),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,ae.hu)(!Fh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((_,E,x)=>{if(!nr(_)&&E&&Fh(E))return[VS(E).query];{let $=[];return E&&($=$.concat(Jj(E).map(se=>se.query))),Hs(x,(se,ye)=>{$=$.concat(ye)}),$}});for(let _=0;_<p.length;++_){const E=p[_];n.listenProvider_.stopListening(uw(E),HS(n,E))}}return c}(n,t,x))}return E}function jS(n,t,e){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(c,h)=>{const _=Nh(h,Wo(c,t));if(_)return _});return Bj(i,t,o,e,!0)}function ty(n,t){return rH(t,n.syncPointTree_,null,PS(n.pendingWriteTree_,Mr()))}function rH(n,t,e,r){if(nr(n.path))return iH(n,t,e,r);{const i=t.get(Mr());null==e&&null!=i&&(e=Nh(i,Mr()));let o=[];const c=tr(n.path),h=n.operationForChild(c),p=t.children.get(c);if(p&&h){const _=e?e.getImmediateChild(c):null,E=Uj(r,c);o=o.concat(rH(h,p,_,E))}return i&&(o=o.concat(qO(i,n,r,e))),o}}function iH(n,t,e,r){const i=t.get(Mr());null==e&&null!=i&&(e=Nh(i,Mr()));let o=[];return t.children.inorderTraversal((c,h)=>{const p=e?e.getImmediateChild(c):null,_=Uj(r,c),E=n.operationForChild(c);E&&(o=o.concat(iH(E,h,p,_)))}),i&&(o=o.concat(qO(i,n,r,e))),o}function sH(n,t){const e=t.query,r=HS(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||Bn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=KO(n,e);if(r){const i=QO(r),o=i.path,c=i.queryId,h=Wo(o,t);return JO(n,o,new sw(LO(c),h))}return[]}(n,e._path,r):function(n,t){return ty(n,new sw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return YO(n,e,null,o)}}}}function HS(n,t){const e=zS(t);return n.queryToTagMap.get(e)}function zS(n){return n._path.toString()+"$"+n._queryIdentifier}function KO(n,t){return n.tagToQueryMap.get(t)}function QO(n){const t=n.indexOf("$");return(0,ae.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Gr(n.substr(0,t))}}function JO(n,t,e){const r=n.syncPointTree_.get(t);return(0,ae.hu)(r,"Missing sync point for query tag that we're tracking"),qO(r,e,PS(n.pendingWriteTree_,t),null)}function uw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,ae.hu)(US,"Reference.ts has not been loaded"),US)(n._repo,n._path):n}class XO{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new XO(e)}node(){return this.node_}}class eP{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ti(this.path_,t);return new eP(this.syncTree_,e)}node(){return jS(this.syncTree_,this.path_)}}const oH=function(n,t,e){return n&&"object"==typeof n?((0,ae.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?OK(n[".sv"],t,e):"object"==typeof n[".sv"]?PK(n[".sv"],t):void(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},OK=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,ae.hu)(!1,"Unexpected server value: "+n)},PK=function(n,t,e){n.hasOwnProperty("increment")||(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ae.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,ae.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},aH=function(n,t,e,r){return nP(t,new eP(e,n),r)},tP=function(n,t,e){return nP(n,new XO(t),e)};function nP(n,t,e){const r=n.getPriority().val(),i=oH(r,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const c=n,h=oH(c.getValue(),t,e);return h!==c.getValue()||i!==c.getPriority().val()?new Z_(h,Ri(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Z_(i))),c.forEachChild(hi,(h,p)=>{const _=nP(p,t.getImmediateChild(h),e);_!==p&&(o=o.updateImmediateChild(h,_))}),o}}class rP{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function GS(n,t){let e=t instanceof Gr?t:new Gr(t),r=n,i=tr(e);for(;null!==i;){const o=(0,ae.DV)(r.node.children,i)||{children:{},childCount:0};r=new rP(i,r,o),e=ai(e),i=tr(e)}return r}function og(n){return n.node.value}function iP(n,t){n.node.value=t,sP(n)}function lH(n){return n.node.childCount>0}function $S(n,t){Hs(n.node.children,(e,r)=>{t(new rP(e,n,r))})}function cH(n,t,e,r){e&&!r&&t(n),$S(n,i=>{cH(i,t,!0,r)}),e&&r&&t(n)}function dw(n){return new Gr(null===n.parent?n.name:dw(n.parent)+"/"+n.name)}function sP(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===og(n)&&!lH(n)}(e),i=(0,ae.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,sP(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,sP(n))}(n.parent,n.name,n)}const BK=/[\[\].#$\/\u0000-\u001F\u007F]/,VK=/[\[\].#$\u0000-\u001F\u007F]/,oP=10485760,WS=function(n){return"string"==typeof n&&0!==n.length&&!BK.test(n)},uH=function(n){return"string"==typeof n&&0!==n.length&&!VK.test(n)},hw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!yS(n)||n&&"object"==typeof n&&(0,ae.r3)(n,".sv")},uu=function(n,t,e,r){r&&void 0===t||fw((0,ae.gK)(n,"value"),t,e)},fw=function(n,t,e){const r=e instanceof Gr?new XZ(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+tg(r));if("function"==typeof t)throw new Error(n+"contains a function "+tg(r)+" with contents = "+t.toString());if(yS(t))throw new Error(n+"contains "+t.toString()+" "+tg(r));if("string"==typeof t&&t.length>oP/3&&(0,ae.ug)(t)>oP)throw new Error(n+"contains a string greater than "+oP+" utf8 bytes "+tg(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(Hs(t,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!WS(c)))throw new Error(n+" contains an invalid key ("+c+") "+tg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,ae.ug)(t),mj(n)})(r,c),fw(n,h,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,ae.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+tg(r)+" in addition to actual children.")}},dH=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,ae.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];Hs(t,(c,h)=>{const p=new Gr(c);if(fw(i,h,Ti(e,p)),".priority"===wO(p)&&!hw(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const o=Jb(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!WS(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(JZ);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&wl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},aP=function(n,t,e){if(!e||void 0!==t){if(yS(t))throw new Error((0,ae.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hw(t))throw new Error((0,ae.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pw=function(n,t,e,r){if(!(r&&void 0===e||WS(e)))throw new Error((0,ae.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gw=function(n,t,e,r){if(!(r&&void 0===e||uH(e)))throw new Error((0,ae.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},El=function(n,t){if(".info"===tr(t))throw new Error(n+" failed = Can't modify data under /.info/")},hH=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!WS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uH(n)}(e))throw new Error((0,ae.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qS(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==e&&!CO(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(i)}e&&n.eventLists_.push(e)}function lP(n,t,e){qS(n,e),fH(n,r=>CO(r,t))}function Il(n,t,e){qS(n,e),fH(n,r=>wl(r,t)||wl(t,r))}function fH(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(GK(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function GK(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();Xp&&js("event: "+e.toString()),W_(r)}}}const pH="repo_interrupt";class WK{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MS(),this.transactionQueueTree_=new rP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gH(n){const e=n.infoData_.getNode(new Gr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function mw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:gH(n)})}function mH(n,t,e,r,i){n.dataUpdateCount++;const o=new Gr(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(i)if(r){const p=(0,ae.UI)(e,_=>Ri(_));c=function(n,t,e,r){const i=KO(n,r);if(i){const o=QO(i),c=o.path,h=o.queryId,p=Wo(c,t),_=fi.fromObject(e);return JO(n,c,new X_(LO(h),p,_))}return[]}(n.serverSyncTree_,o,p,i)}else{const p=Ri(e);c=function(n,t,e,r){const i=KO(n,r);if(null!=i){const o=QO(i),c=o.path,h=o.queryId,p=Wo(c,t);return JO(n,c,new rg(LO(h),p,e))}return[]}(n.serverSyncTree_,o,p,i)}else if(r){const p=(0,ae.UI)(e,_=>Ri(_));c=function(n,t,e){const r=fi.fromObject(e);return ty(n,new X_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,o,p)}else{const p=Ri(e);c=cw(n.serverSyncTree_,o,p)}let h=o;c.length>0&&(h=ry(n,o)),Il(n.eventQueue_,h,c)}function _H(n,t){cP(n,"connected",t),!1===t&&function(n){ny(n,"onDisconnectEvents");const t=mw(n),e=MS();PO(n.onDisconnect_,Mr(),(i,o)=>{const c=aH(i,o,n.serverSyncTree_,t);J_(e,i,c)});let r=[];PO(e,Mr(),(i,o)=>{r=r.concat(cw(n.serverSyncTree_,i,o));const c=fP(n,i);ry(n,c)}),n.onDisconnect_=MS(),Il(n.eventQueue_,Mr(),r)}(n)}function cP(n,t,e){const r=new Gr("/.info/"+t),i=Ri(e);n.infoData_.updateSnapshot(r,i);const o=cw(n.infoSyncTree_,r,i);Il(n.eventQueue_,r,o)}function ZS(n){return n.nextWriteId_++}function uP(n,t,e,r,i){ny(n,"set",{path:t.toString(),value:e,priority:r});const o=mw(n),c=Ri(e,r),h=jS(n.serverSyncTree_,t),p=tP(c,h,o),_=ZS(n),E=ZO(n.serverSyncTree_,t,p,_,!0);qS(n.eventQueue_,E),n.server_.put(t.toString(),c.val(!0),($,se)=>{const ye="ok"===$;ye||So("set at "+t+" failed: "+$);const ze=Lh(n.serverSyncTree_,_,!ye);Il(n.eventQueue_,t,ze),Bh(0,i,$,se)});const x=fP(n,t);ry(n,x),Il(n.eventQueue_,x,[])}function JK(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&OO(n.onDisconnect_,t),Bh(0,e,r,i)})}function yH(n,t,e,r){const i=Ri(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(o,c)=>{"ok"===o&&J_(n.onDisconnect_,t,i),Bh(0,r,o,c)})}function dP(n,t,e){let r;r=".info"===tr(t._path)?YO(n.infoSyncTree_,t,e):YO(n.serverSyncTree_,t,e),lP(n.eventQueue_,t._path,r)}function vH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(pH)}function ny(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),js(e,...t)}function Bh(n,t,e,r){t&&W_(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,t(c)}})}function hP(n,t,e){return jS(n.serverSyncTree_,t,e)||Bn.EMPTY_NODE}function YS(n,t=n.transactionQueueTree_){if(t||KS(n,t),og(t)){const e=wH(n,t);(0,ae.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(_=>_.currentWriteId),i=hP(n,t,r);let o=i;const c=i.hash();for(let _=0;_<e.length;_++){const E=e[_];(0,ae.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const x=Wo(t,E.path);o=o.updateChild(x,E.currentOutputSnapshotRaw)}const h=o.val(!0),p=t;n.server_.put(p.toString(),h,_=>{ny(n,"transaction put response",{path:p.toString(),status:_});let E=[];if("ok"===_){const x=[];for(let $=0;$<e.length;$++)e[$].status=2,E=E.concat(Lh(n.serverSyncTree_,e[$].currentWriteId)),e[$].onComplete&&x.push(()=>e[$].onComplete(null,!0,e[$].currentOutputSnapshotResolved)),e[$].unwatcher();KS(n,GS(n.transactionQueueTree_,t)),YS(n,n.transactionQueueTree_),Il(n.eventQueue_,t,E);for(let $=0;$<x.length;$++)W_(x[$])}else{if("datastale"===_)for(let x=0;x<e.length;x++)e[x].status=3===e[x].status?4:0;else{So("transaction at "+p.toString()+" failed: "+_);for(let x=0;x<e.length;x++)e[x].status=4,e[x].abortReason=_}ry(n,t)}},c)}(n,dw(t),e)}else lH(t)&&$S(t,e=>{YS(n,e)})}function ry(n,t){const e=bH(n,t),r=dw(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const c=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const p=t[h],_=Wo(e,p.path);let x,E=!1;if((0,ae.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,x=p.abortReason,i=i.concat(Lh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,x="maxretry",i=i.concat(Lh(n.serverSyncTree_,p.currentWriteId,!0));else{const $=hP(n,p.path,c);p.currentInputSnapshot=$;const se=t[h].update($.val());if(void 0!==se){fw("transaction failed: Data returned ",se,p.path);let ye=Ri(se);"object"==typeof se&&null!=se&&(0,ae.r3)(se,".priority")||(ye=ye.updatePriority($.getPriority()));const rt=p.currentWriteId,It=mw(n),jt=tP(ye,$,It);p.currentOutputSnapshotRaw=ye,p.currentOutputSnapshotResolved=jt,p.currentWriteId=ZS(n),c.splice(c.indexOf(rt),1),i=i.concat(ZO(n.serverSyncTree_,p.path,jt,p.currentWriteId,p.applyLocally)),i=i.concat(Lh(n.serverSyncTree_,rt,!0))}else E=!0,x="nodata",i=i.concat(Lh(n.serverSyncTree_,p.currentWriteId,!0))}Il(n.eventQueue_,e,i),i=[],E&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&r.push("nodata"===x?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(x),!1,null)))}KS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)W_(r[h]);YS(n,n.transactionQueueTree_)}(n,wH(n,e),r),r}function bH(n,t){let e,r=n.transactionQueueTree_;for(e=tr(t);null!==e&&void 0===og(r);)r=GS(r,e),e=tr(t=ai(t));return r}function wH(n,t){const e=[];return CH(n,t,e),e.sort((r,i)=>r.order-i.order),e}function CH(n,t,e){const r=og(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);$S(t,i=>{CH(n,i,e)})}function KS(n,t){const e=og(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,iP(t,e.length>0?e:void 0)}$S(t,r=>{KS(n,r)})}function fP(n,t){const e=dw(bH(n,t)),r=GS(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{pP(n,i)}),pP(n,r),cH(r,i=>{pP(n,i)}),e}function pP(n,t){const e=og(t);if(e){const r=[];let i=[],o=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,ae.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,e[c].status=3,e[c].abortReason="set"):((0,ae.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),i=i.concat(Lh(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?iP(t,void 0):e.length=o+1,Il(n.eventQueue_,dw(t),i);for(let c=0;c<r.length;c++)W_(r[c])}}const gP=function(n,t){const e=l7(n),r=e.namespace;return"firebase.com"===e.domain&&au(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&au("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&So("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gO(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Gr(e.pathString)}},l7=function(n){let t="",e="",r="",i="",o="",c=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let E=n.indexOf("/");-1===E&&(E=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),t=n.substring(0,Math.min(E,x)),E<x&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(n.substring(E,x)));const $=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):So(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,x)));_=t.indexOf(":"),_>=0?(c="https"===h||"wss"===h,p=parseInt(t.substring(_+1),10)):_=t.length;const se=t.slice(0,_);if("localhost"===se.toLowerCase())e="localhost";else if(se.split(".").length<=2)e=se;else{const ye=t.indexOf(".");r=t.substring(0,ye).toLowerCase(),e=t.substring(ye+1),o=r}"ns"in $&&(o=$.ns)}return{host:t,port:p,domain:e,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};class EH{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ae.Pz)(this.snapshot.exportVal())}}class IH{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class TH{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,ae.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class SH{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new ae.BH;return JK(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){El("OnDisconnect.remove",this._path);const t=new ae.BH;return yH(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){El("OnDisconnect.set",this._path),uu("OnDisconnect.set",t,this._path,!1);const e=new ae.BH;return yH(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){El("OnDisconnect.setWithPriority",this._path),uu("OnDisconnect.setWithPriority",t,this._path,!1),aP("OnDisconnect.setWithPriority",e,!1);const r=new ae.BH;return function(n,t,e,r,i){const o=Ri(e,r);n.server_.onDisconnectPut(t.toString(),o.val(!0),(c,h)=>{"ok"===c&&J_(n.onDisconnect_,t,o),Bh(0,i,c,h)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){El("OnDisconnect.update",this._path),dH("OnDisconnect.update",t,this._path,!1);const e=new ae.BH;return function(n,t,e,r){if((0,ae.xb)(e))return js("onDisconnect().update() called with empty data.  Don't do anything."),void Bh(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,o)=>{"ok"===i&&Hs(e,(c,h)=>{const p=Ri(h);J_(n.onDisconnect_,Ti(t,c),p)}),Bh(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ma{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return nr(this._path)?null:wO(this._path)}get ref(){return new Tl(this._repo,this._path)}get _queryIdentifier(){const t=kj(this._queryParams),e=hO(t);return"{}"===e?"default":e}get _queryObject(){return kj(this._queryParams)}isEqual(t){if(!((t=(0,ae.m9)(t))instanceof ma))return!1;const e=this._repo===t._repo,r=CO(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function QS(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Vh(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===cu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ud)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==lu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===hi){if(null!=t&&!hw(t)||null!=e&&!hw(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ae.hu)(n.getIndex()instanceof DO||n.getIndex()===AO,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function JS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tl extends ma{constructor(t,e){super(t,e,new DS,!1)}get parent(){const t=gj(this._path);return null===t?null:new Tl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class ag{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Gr(t),r=lg(this.ref,t);return new ag(this._node.getChild(e),r,hi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new ag(i,lg(this.ref,r),hi)))}hasChild(t){const e=new Gr(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DH(n,t){return(n=(0,ae.m9)(n))._checkNotDeleted("ref"),void 0!==t?lg(n._root,t):n._root}function AH(n,t){(n=(0,ae.m9)(n))._checkNotDeleted("refFromURL");const e=gP(t,n._repo.repoInfo_.nodeAdmin);hH("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&au("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),DH(n,e.path.toString())}function lg(n,t){return null===tr((n=(0,ae.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),gw("child","path",e,!1)):gw("child","path",t,!1),new Tl(n._repo,Ti(n._path,t));var e}function mP(n,t){n=(0,ae.m9)(n),El("set",n._path),uu("set",t,n._path,!1);const e=new ae.BH;return uP(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function f7(n,t){dH("update",t,n._path,!1);const e=new ae.BH;return function(n,t,e,r){ny(n,"update",{path:t.toString(),value:e});let i=!0;const o=mw(n),c={};if(Hs(e,(h,p)=>{i=!1,c[h]=aH(Ti(t,h),Ri(p),n.serverSyncTree_,o)}),i)js("update() called with empty data.  Don't do anything."),Bh(0,r,"ok",void 0);else{const h=ZS(n),p=function(n,t,e,r){!function(n,t,e,r){(0,ae.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=VO(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=fi.fromObject(e);return ty(n,new X_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,c,h);qS(n.eventQueue_,p),n.server_.merge(t.toString(),e,(_,E)=>{const x="ok"===_;x||So("update at "+t+" failed: "+_);const $=Lh(n.serverSyncTree_,h,!x),se=$.length>0?ry(n,t):t;Il(n.eventQueue_,se,$),Bh(0,r,_,E)}),Hs(e,_=>{const E=fP(n,Ti(t,_));ry(n,E)}),Il(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function p7(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(_,E)=>{const x=Wo(_,e);r=r||Nh(E,x)});let i=n.syncPointTree_.get(e);i?r=r||Nh(i,Mr()):(i=new Kj,n.syncPointTree_=n.syncPointTree_.set(e,i));const o=null!=r,c=o?new Oh(r,!0,!1):null;return function(n){return OS(n.viewCache_)}(Qj(i,t,PS(n.pendingWriteTree_,t._path),o?c.getNode():Bn.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Ri(r).withIndex(t._queryParams.getIndex()),o=cw(n.serverSyncTree_,t._path,i);return lP(n.eventQueue_,t._path,o),Promise.resolve(i)},r=>(ny(n,"get for query "+(0,ae.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,ae.m9)(n))._repo,n).then(t=>new ag(t,new Tl(n._repo,n._path),n._queryParams.getIndex()))}class XS{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new EH("value",this,new ag(t.snapshotNode,new Tl(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new IH(this,t,e):null}matches(t){return t instanceof XS&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class eD{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new IH(this,t,e):null}createEvent(t,e){(0,ae.hu)(null!=t.childName,"Child events should have a childName.");const r=lg(new Tl(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new EH(t.type,this,new ag(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof eD&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _w(n,t,e,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const p=e,_=(E,x)=>{dP(n._repo,n,h),p(E,x)};_.userCallback=e.userCallback,_.context=e.context,e=_}const c=new TH(e,o||void 0),h="value"===t?new XS(c):new eD(t,c);return function(n,t,e){let r;r=".info"===tr(t._path)?nH(n.infoSyncTree_,t,e):nH(n.serverSyncTree_,t,e),lP(n.eventQueue_,t._path,r)}(n._repo,n,h),()=>dP(n._repo,n,h)}function _P(n,t,e,r){return _w(n,"value",t,e,r)}function xH(n,t,e,r){return _w(n,"child_added",t,e,r)}function MH(n,t,e,r){return _w(n,"child_changed",t,e,r)}function kH(n,t,e,r){return _w(n,"child_moved",t,e,r)}function RH(n,t,e,r){return _w(n,"child_removed",t,e,r)}function OH(n,t,e){let r=null;const i=e?new TH(e):null;"value"===t?r=new XS(i):t&&(r=new eD(t,i)),dP(n._repo,n,r)}class _c{}class PH extends _c{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("endAt",this._value,t._path,!0);const e=RO(t._queryParams,this._value,this._key);if(JS(e),Vh(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ma(t._repo,t._path,e,t._orderByCalled)}}class m7 extends _c{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===cu?("string"==typeof t&&(t=Aj(t)),i=RO(n,t,e)):(r=null==e?ud:Aj(e),i=RO(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(JS(e),Vh(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ma(t._repo,t._path,e,t._orderByCalled)}}class NH extends _c{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("startAt",this._value,t._path,!0);const e=kO(t._queryParams,this._value,this._key);if(JS(e),Vh(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ma(t._repo,t._path,e,t._orderByCalled)}}class v7 extends _c{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===cu)"string"==typeof t&&(t=Dj(t)),r=kO(n,t,e);else{let i;i=null==e?lu:Dj(e),r=kO(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(JS(e),Vh(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ma(t._repo,t._path,e,t._orderByCalled)}}class w7 extends _c{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ma(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class E7 extends _c{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ma(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class T7 extends _c{constructor(t){super(),this._path=t}_apply(t){QS(t,"orderByChild");const e=new Gr(this._path);if(nr(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new DO(e),i=AS(t._queryParams,r);return Vh(i),new ma(t._repo,t._path,i,!0)}}class D7 extends _c{_apply(t){QS(t,"orderByKey");const e=AS(t._queryParams,cu);return Vh(e),new ma(t._repo,t._path,e,!0)}}class x7 extends _c{_apply(t){QS(t,"orderByPriority");const e=AS(t._queryParams,hi);return Vh(e),new ma(t._repo,t._path,e,!0)}}class k7 extends _c{_apply(t){QS(t,"orderByValue");const e=AS(t._queryParams,AO);return Vh(e),new ma(t._repo,t._path,e,!0)}}class O7 extends _c{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(uu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new PH(this._value,this._key)._apply(new NH(this._value,this._key)._apply(t))}}function yc(n,...t){let e=(0,ae.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,ae.hu)(!BS,"__referenceConstructor has already been defined"),BS=n})(Tl),function(n){(0,ae.hu)(!US,"__referenceConstructor has already been defined"),US=n}(Tl);const yP={};function LH(n,t,e,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||au("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),js("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=gP(o,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,o=`http://${_}?ns=${h.namespace}`,c=gP(o,i),h=c.repoInfo):p=!c.repoInfo.secure;const E=i&&p?new Qb(Qb.OWNER):new SZ(n.name,n.options,t);hH("Invalid Firebase Database URL",c),nr(c.path)||au("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,t,e,r){let i=yP[t.name];i||(i={},yP[t.name]=i);let o=i[n.toURLString()];return o&&au("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new WK(n,false,e,r),i[n.toURLString()]=o,o}(h,n,E,new TZ(n.name,e));return new U7(x,n)}class U7{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=yO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new xS(n.repoInfo_,(r,i,o,c)=>{mH(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>_H(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ae.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ng(n.repoInfo_,t,(r,i,o,c)=>{mH(n,r,i,o,c)},r=>{_H(n,r)},r=>{!function(n,t){Hs(t,(e,r)=>{cP(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return _O[e]||(_O[e]=t()),_O[e]}(n.repoInfo_,()=>new kY(n.stats_,n.server_)),n.infoData_=new SY,n.infoSyncTree_=new tH({startListening:(r,i,o,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=cw(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),cP(n,"connected",!1),n.serverSyncTree_=new tH({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,p)=>{const _=c(h,p);Il(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tl(this._repo,Mr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=yP[t];(!e||e[n.key]!==n)&&au(`Database ${t}(${n.repoInfo_}) has already been deleted.`),vH(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&au("Cannot call "+t+" on a deleted database.")}}function BH(){rj.IS_TRANSPORT_INITIALIZED&&So("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function j7(){BH(),kh.forceDisallow()}function H7(){BH(),q_.forceDisallow(),kh.forceAllow()}function W7(n,t){L3(n,t)}class Q7{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ng.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},ng.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},R3(Fa.SDK_VERSION),(0,Fa._registerComponent)(new cc.wA("database",(t,{instanceIdentifier:e})=>LH(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Fa.registerVersion)(M3,"0.13.0",void 0),(0,Fa.registerVersion)(M3,"0.13.0","esm2017");const t9=new La.Yd("@firebase/database-compat"),VH=function(n){t9.warn("FIREBASE WARNING: "+n)};class i9{constructor(t){this._delegate=t}cancel(t){(0,ae.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ae.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,ae.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ae.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,ae.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ae.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,ae.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ae.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),o=>r(o)),i}update(t,e){if((0,ae.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,VH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ae.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class s9{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,ae.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Uh{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,ae.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ae.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ae.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ae.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,ae.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),gw("DataSnapshot.child","path",t,!1),new Uh(this._database,this._delegate.child(t))}hasChild(t){return(0,ae.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gw("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,ae.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,ae.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ae.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Uh(this._database,e)))}hasChildren(){return(0,ae.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ae.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ae.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ua(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class oo{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var o;(0,ae.Dv)("Query.on",2,4,arguments.length),(0,ae.Wj)("Query.on","callback",e,!1);const c=oo.getCancelAndContextArgs_("Query.on",r,i),h=(_,E)=>{e.call(c.context,new Uh(this.database,_),E)};h.userCallback=e,h.context=c.context;const p=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(t){case"value":return _P(this._delegate,h,p),e;case"child_added":return xH(this._delegate,h,p),e;case"child_removed":return RH(this._delegate,h,p),e;case"child_changed":return MH(this._delegate,h,p),e;case"child_moved":return kH(this._delegate,h,p),e;default:throw new Error((0,ae.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,ae.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ae.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,ae.Wj)("Query.off","callback",e,!0),(0,ae.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,OH(this._delegate,t,i)}else OH(this._delegate,t)}get(){return p7(this._delegate).then(t=>new Uh(this.database,t))}once(t,e,r,i){(0,ae.Dv)("Query.once",1,4,arguments.length),(0,ae.Wj)("Query.once","callback",e,!0);const o=oo.getCancelAndContextArgs_("Query.once",r,i),c=new ae.BH,h=(_,E)=>{const x=new Uh(this.database,_);e&&e.call(o.context,x,E),c.resolve(x)};h.userCallback=e,h.context=o.context;const p=_=>{o.cancel&&o.cancel.call(o.context,_),c.reject(_)};switch(t){case"value":_P(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":xH(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":RH(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":MH(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":kH(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,ae.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,ae.Dv)("Query.limitToFirst",1,1,arguments.length),new oo(this.database,yc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new w7(n)}(t)))}limitToLast(t){return(0,ae.Dv)("Query.limitToLast",1,1,arguments.length),new oo(this.database,yc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new E7(n)}(t)))}orderByChild(t){return(0,ae.Dv)("Query.orderByChild",1,1,arguments.length),new oo(this.database,yc(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gw("orderByChild","path",n,!1),new T7(n)}(t)))}orderByKey(){return(0,ae.Dv)("Query.orderByKey",0,0,arguments.length),new oo(this.database,yc(this._delegate,new D7))}orderByPriority(){return(0,ae.Dv)("Query.orderByPriority",0,0,arguments.length),new oo(this.database,yc(this._delegate,new x7))}orderByValue(){return(0,ae.Dv)("Query.orderByValue",0,0,arguments.length),new oo(this.database,yc(this._delegate,new k7))}startAt(t=null,e){return(0,ae.Dv)("Query.startAt",0,2,arguments.length),new oo(this.database,yc(this._delegate,function(n=null,t){return pw("startAt","key",t,!0),new NH(n,t)}(t,e)))}startAfter(t=null,e){return(0,ae.Dv)("Query.startAfter",0,2,arguments.length),new oo(this.database,yc(this._delegate,function(n,t){return pw("startAfter","key",t,!0),new v7(n,t)}(t,e)))}endAt(t=null,e){return(0,ae.Dv)("Query.endAt",0,2,arguments.length),new oo(this.database,yc(this._delegate,function(n,t){return pw("endAt","key",t,!0),new PH(n,t)}(t,e)))}endBefore(t=null,e){return(0,ae.Dv)("Query.endBefore",0,2,arguments.length),new oo(this.database,yc(this._delegate,function(n,t){return pw("endBefore","key",t,!0),new m7(n,t)}(t,e)))}equalTo(t,e){return(0,ae.Dv)("Query.equalTo",1,2,arguments.length),new oo(this.database,yc(this._delegate,function(n,t){return pw("equalTo","key",t,!0),new O7(n,t)}(t,e)))}toString(){return(0,ae.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ae.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,ae.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof oo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,ae.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,ae.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,ae.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Ua(this.database,new Tl(this._delegate._repo,this._delegate._path))}}class Ua extends oo{constructor(t,e){super(t,new ma(e._repo,e._path,new DS,!1)),this.database=t,this._delegate=e}getKey(){return(0,ae.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,ae.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ua(this.database,lg(this._delegate,t))}getParent(){(0,ae.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Ua(this.database,t):null}getRoot(){return(0,ae.Dv)("Reference.root",0,0,arguments.length),new Ua(this.database,this._delegate.root)}set(t,e){(0,ae.Dv)("Reference.set",1,2,arguments.length),(0,ae.Wj)("Reference.set","onComplete",e,!0);const r=mP(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,ae.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,VH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}El("Reference.update",this._delegate._path),(0,ae.Wj)("Reference.update","onComplete",e,!0);const r=f7(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,ae.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ae.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(El("setWithPriority",n._path),uu("setWithPriority",t,n._path,!1),aP("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new ae.BH;return uP(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),o=>r(o)),i}remove(t){(0,ae.Dv)("Reference.remove",0,1,arguments.length),(0,ae.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return El("remove",n._path),mP(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,ae.Dv)("Reference.transaction",1,3,arguments.length),(0,ae.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,ae.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,ae.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,ae.m9)(n),El("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,o=new ae.BH,h=_P(n,()=>{});return function(n,t,e,r,i,o){ny(n,"transaction on "+t);const c={path:t,update:e,onComplete:r,status:null,order:P3(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=hP(n,t,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{fw("transaction failed: Data returned ",p,c.path),c.status=0;const _=GS(n.transactionQueueTree_,t),E=og(_)||[];let x;E.push(c),iP(_,E),"object"==typeof p&&null!==p&&(0,ae.r3)(p,".priority")?(x=(0,ae.DV)(p,".priority"),(0,ae.hu)(hw(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(jS(n.serverSyncTree_,t)||Bn.EMPTY_NODE).getPriority().val();const $=mw(n),se=Ri(p,x),ye=tP(se,h,$);c.currentOutputSnapshotRaw=se,c.currentOutputSnapshotResolved=ye,c.currentWriteId=ZS(n);const ze=ZO(n.serverSyncTree_,t,ye,c.currentWriteId,c.applyLocally);Il(n.eventQueue_,t,ze),YS(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,_,E)=>{let x=null;p?o.reject(p):(x=new ag(E,new Tl(n._repo,n._path),hi),o.resolve(new Q7(_,x)))},h,i),o.promise}(this._delegate,t,{applyLocally:r}).then(o=>new s9(o.committed,new Uh(this.database,o.snapshot)));return e&&i.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),i}setPriority(t,e){(0,ae.Dv)("Reference.setPriority",1,2,arguments.length),(0,ae.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,ae.m9)(n),El("setPriority",n._path),aP("setPriority",t,!1);const e=new ae.BH;return uP(n._repo,Ti(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,ae.Dv)("Reference.push",0,2,arguments.length),(0,ae.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,ae.m9)(n),El("push",n._path),uu("push",t,n._path,!0);const e=gH(n._repo),r=yY(e),i=lg(n,r),o=lg(n,r);let c;return c=null!=t?mP(o,t).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,t),i=r.then(c=>new Ua(this.database,c));e&&i.then(()=>e(null),c=>e(c));const o=new Ua(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return El("Reference.onDisconnect",this._delegate._path),new i9(new SH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yw{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:j7,forceLongPolling:H7}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,ae.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&au("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&au('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Qb(Qb.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,ae.Sg)(r.mockUserToken,n.app.options.projectId);o=new Qb(c)}!function(n,t,e,r){n.repoInfo_=new gO(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,o)}(this._delegate,t,e,r)}ref(t){if((0,ae.Dv)("database.ref",0,1,arguments.length),t instanceof Ua){const e=AH(this._delegate,t.toString());return new Ua(this,e)}{const e=DH(this._delegate,t);return new Ua(this,e)}}refFromURL(t){(0,ae.Dv)("database.refFromURL",1,1,arguments.length);const r=AH(this._delegate,t);return new Ua(this,r)}goOffline(){return(0,ae.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,ae.m9)(n))._checkNotDeleted("goOffline"),vH(n._repo)}(this._delegate)}goOnline(){return(0,ae.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,ae.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(pH)}(n._repo)}(this._delegate)}}yw.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var a9=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){R3(e);const c=new cc.zt("auth-internal",new cc.H0("database-standalone"));return c.setComponent(new cc.wA("auth-internal",()=>r,"PRIVATE")),{instance:new yw(LH(n,c,void 0,t,o),n),namespace:i}}});const l9=yw.ServerValue;function UH(n){return null==n}function jH(n){return"function"==typeof n.set}function HH(n,t){return jH(t)?t:n.ref(t)}function zH(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(jH(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function vw(n,t,e="on",r=Hc.z){return new Pr.y(i=>{let o=null;return o=n[e](t,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===e&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,kt.U)(i=>{const{snapshot:o,prevKey:c}=i;let h=null;return o.exists()&&(h=o.key),{type:t,payload:o,prevKey:c,key:h}}),(0,Xk.B)())}function GH(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function p9(n,t){const{payload:e,prevKey:r,key:i}=t,o=GH(n,i),c=function(n,t){if(UH(t))return 0;{const e=GH(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,_],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===i?t:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function $H(n){return(UH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function WH(n,t,e){return function(n,t,e){return vw(n,"value","once",e).pipe(Ur(r=>{const i=[xt(r)];return t.forEach(o=>i.push(vw(n,o,"on",e))),(0,Rs.T)(...i).pipe(gs(p9,[]))}),xf())}(n,t=$H(t),e)}function qH(n,t,e){const r=(t=$H(t)).map(i=>vw(n,i,"on",e));return(0,Rs.T)(...r)}function ZH(n,t){return function(r,i){return zH(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function y9(n){return function(e){return e?zH(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function YH(n,t){return function(){return vw(n,"value","on",t)}}!function(n){n.INTERNAL.registerComponent(new cc.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new yw(i,r)},"PUBLIC").setServiceProps({Reference:Ua,Query:oo,Database:yw,DataSnapshot:Uh,enableLogging:W7,INTERNAL:a9,ServerValue:l9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(t0.Z);const w9=new s.OlP("angularfire2.realtimeDatabaseURL"),C9=new s.OlP("angularfire2.database.use-emulator");let E9=(()=>{class n{constructor(e,r,i,o,c,h,p,_,E,x,$,se,ye,ze,rt){this.schedulers=h;const It=p,jt=(0,Os.on)(e,c,r);_&&ER(jt,c,E,$,se,ye,x,ze),this.database=(0,Os.cc)(`${jt.name}.database.${i}`,"AngularFireDatabase",jt.name,()=>{const Vt=c.runOutsideAngular(()=>jt.database(i||void 0));return It&&Vt.useEmulator(...It),Vt},[It])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>HH(this.database,e));let o=i;return r&&(o=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:ZH(r,"update"),set:ZH(r,"set"),push:i=>r.push(i),remove:y9(r),snapshotChanges:i=>WH(n,i,e).pipe(Xr.iC),stateChanges:i=>qH(n,i,e).pipe(Xr.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return vw(n,"value","on",t).pipe((0,kt.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(function(...n){const t=(0,Ca.jO)(n);return(0,Qr.e)((e,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Bi.Xf)(n[p]).subscribe(new lr.Q(r,_=>{o[p]=_,!h&&!c[p]&&(c[p]=!0,(h=c.every(ia.y))&&(c=null))},_f.Z));e.subscribe(new lr.Q(r,p=>{if(h){const _=[p,...o];r.next(t?t(..._):_)}}))})}(t),(0,kt.U)(([i,o])=>{const c=i.lastKeyToLoad,h=o.map(p=>p.key);return{actions:o,lastKeyToLoad:c,loadedKeys:h}}),(0,Qr.e)((t,e)=>{let r=!1;t.subscribe(new lr.Q(e,o=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(o)))&&e.next(o)))}),(0,kt.U)(i=>i.actions))}(n,qH(n,t).pipe(gs((i,o)=>[...i,o],[])),e)}(n,i,e).pipe(Xr.iC),valueChanges:(i,o)=>WH(n,i,e).pipe((0,kt.U)(h=>h.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),Xr.iC)}}(o,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>YH(n,t.schedulers.outsideAngular)().pipe(Xr.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>YH(n,t.schedulers.outsideAngular)().pipe(Xr.iC,(0,kt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HH(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Os.Dh),s.LFG(Os.xv,8),s.LFG(w9,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Xr.HU),s.LFG(C9,8),s.LFG(qT,8),s.LFG(_R,8),s.LFG(yR,8),s.LFG(vR,8),s.LFG(bR,8),s.LFG(wR,8),s.LFG(CR,8),s.LFG(WT,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I9=(()=>{class n{constructor(){h4.Z.registerVersion("angularfire",Xr.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[E9]}),n})(),T9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-history"]],decls:2,vars:0,template:function(e,r){1&e&&(s.TgZ(0,"p"),s._uU(1,"history works!"),s.qZA())},styles:[""]}),n})(),S9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[be,Od.forChild([{path:"history",component:T9}])]]}),n})();class vP{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class bw extends vP{constructor(t,e,r,i){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i}}class tD extends vP{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class A9 extends vP{constructor(t){super(),this.element=t instanceof s.SBq?t.nativeElement:t}}class nD{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof bw?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof tD?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof A9?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class x9 extends nD{constructor(t,e,r,i,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const h=c.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=o}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||s.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let rD=(()=>{class n extends nD{constructor(e,r,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new s.vpe,this.attachDomPortal=o=>{const c=o.element,h=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=r.createComponent(o,r.length,e.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s._Vd),s.Y36(s.s_b),s.Y36(Y))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[s.qOj]}),n})(),bP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const KH=eA();class k9{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ui(-this._previousScrollPosition.left),t.style.top=Ui(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,o=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),KH&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KH&&(r.scrollBehavior=o,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class R9{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class QH{enable(){}disable(){}attach(){}}function wP(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function JH(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class O9{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();wP(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let P9=(()=>{class n{constructor(e,r,i,o){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new QH,this.close=c=>new R9(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new k9(this._viewportRuler,this._document),this.reposition=c=>new O9(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(AR),s.LFG(Pb),s.LFG(s.R0b),s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iD{constructor(t){if(this.scrollStrategy=new QH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class N9{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let XH=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F9=(()=>{class n extends XH{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){const h=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y),s.LFG(s.R0b,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L9=(()=>{class n extends XH{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ud(o)},this._clickListener=o=>{const c=Ud(o),h="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const E=p[_];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(c)||E.overlayElement.contains(h))break;const x=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(o)):x.next(o)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y),s.LFG(Qi),s.LFG(s.R0b,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CP=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){var e;null==(e=this._containerElement)||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Qw()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(e),Qw()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Y),s.LFG(Qi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class B9{constructor(t,e,r,i,o,c,h,p,_){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=c,this._document=h,this._location=p,this._outsideClickDispatcher=_,this._backdropElement=null,this._backdropClick=new Wt.x,this._attachments=new Wt.x,this._detachments=new Wt.x,this._locationChanges=ns.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new Wt.x,this._outsidePointerEvents=new Wt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(e=this._host)||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Mt(Mt({},this._config),t),this._updateElementSize()}setDirection(t){this._config=fs(Mt({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Ui(this._config.width),t.height=Ui(this._config.height),t.minWidth=Ui(this._config.minWidth),t.minHeight=Ui(this._config.minHeight),t.maxWidth=Ui(this._config.maxWidth),t.maxHeight=Ui(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,r){const i=yf(e||[]).filter(o=>!!o);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(gr((0,Rs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const ez="cdk-overlay-connected-position-bounding-box",V9=/([A-Za-z%]+)$/;class U9{constructor(t,e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Wt.x,this._resizeSubscription=ns.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(ez),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let c;for(let h of this._preferredPositions){let p=this._getOriginPoint(t,i,h),_=this._getOverlayPoint(p,e,h),E=this._getOverlayFit(_,e,r,h);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(E,_,r)?o.push({position:h,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!c||c.overlayFit.visibleArea<E.visibleArea)&&(c={overlayFit:E,overlayPoint:_,originPoint:p,position:h,overlayRect:e})}if(o.length){let h=null,p=-1;for(const _ of o){const E=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);E>p&&(p=E,h=_)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ez),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i,o;if("center"==r.originX)i=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,h=this._isRtl()?t.left:t.right;i="start"==r.originX?c:h}return e.left<0&&(i-=e.left),o="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(t,e,r){let i,o;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+o}}_getOverlayFit(t,e,r,i){const o=nz(e);let{x:c,y:h}=t,p=this._getOffset(i,"x"),_=this._getOffset(i,"y");p&&(c+=p),_&&(h+=_);let $=0-h,se=h+o.height-r.height,ye=this._subtractOverflows(o.width,0-c,c+o.width-r.width),ze=this._subtractOverflows(o.height,$,se),rt=ye*ze;return{visibleArea:rt,isCompletelyWithinViewport:o.width*o.height===rt,fitsInViewportVertically:ze===o.height,fitsInViewportHorizontally:ye==o.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,o=r.right-e.x,c=tz(this._overlayRef.getConfig().minHeight),h=tz(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=h&&h<=o;return(t.fitsInViewportVertically||null!=c&&c<=i)&&_}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=nz(e),o=this._viewportRect,c=Math.max(t.x+i.width-o.width,0),h=Math.max(t.y+i.height-o.height,0),p=Math.max(o.top-r.top-t.y,0),_=Math.max(o.left-r.left-t.x,0);let E=0,x=0;return E=i.width<=o.width?_||-c:t.x<this._viewportMargin?o.left-r.left-t.x:0,x=i.height<=o.height?p||-h:t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:E,y:x},{x:t.x+E,y:t.y+x}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new N9(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let o,c,h,E,x,$;if("top"===e.overlayY)c=t.y,o=r.height-c+this._viewportMargin;else if("bottom"===e.overlayY)h=r.height-t.y+2*this._viewportMargin,o=r.height-h+this._viewportMargin;else{const se=Math.min(r.bottom-t.y+r.top,t.y),ye=this._lastBoundingBoxSize.height;o=2*se,c=t.y-se,o>ye&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-ye/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)$=r.width-t.x+this._viewportMargin,E=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)x=t.x,E=r.right-t.x;else{const se=Math.min(r.right-t.x+r.left,t.x),ye=this._lastBoundingBoxSize.width;E=2*se,x=t.x-se,E>ye&&!this._isInitialRender&&!this._growAfterOpen&&(x=t.x-ye/2)}return{top:c,left:x,bottom:h,right:$,width:E,height:o}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=Ui(r.height),i.top=Ui(r.top),i.bottom=Ui(r.bottom),i.width=Ui(r.width),i.left=Ui(r.left),i.right=Ui(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Ui(o)),c&&(i.maxWidth=Ui(c))}this._lastBoundingBoxSize=r,cg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){cg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();cg(r,this._getExactOverlayY(e,t,E)),cg(r,this._getExactOverlayX(e,t,E))}else r.position="static";let h="",p=this._getOffset(e,"x"),_=this._getOffset(e,"y");p&&(h+=`translateX(${p}px) `),_&&(h+=`translateY(${_}px)`),r.transform=h.trim(),c.maxHeight&&(i?r.maxHeight=Ui(c.maxHeight):o&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=Ui(c.maxWidth):o&&(r.maxWidth="")),cg(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Ui(o.y),i}_getExactOverlayX(t,e,r){let c,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Ui(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:JH(t,r),isOriginOutsideView:wP(t,r),isOverlayClipped:JH(e,r),isOverlayOutsideView:wP(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&yf(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof s.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function cg(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function tz(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(V9);return e&&"px"!==e?null:parseFloat(t)}return n||null}function nz(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const rz="cdk-global-overlay-wrapper";class j9{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(rz),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:c,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==o&&"100vh"!==o||h&&"100%"!==h&&"100vh"!==h);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(rz),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let H9=(()=>{class n{constructor(e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new j9}flexibleConnectedTo(e){return new U9(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Pb),s.LFG(Y),s.LFG(Qi),s.LFG(CP))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z9=0,jh=(()=>{class n{constructor(e,r,i,o,c,h,p,_,E,x,$){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=h,this._ngZone=p,this._document=_,this._directionality=E,this._location=x,this._outsideClickDispatcher=$}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),c=new iD(e);return c.direction=c.direction||this._directionality.value,new B9(o,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+z9++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(s.z2F)),new x9(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(P9),s.LFG(CP),s.LFG(s._Vd),s.LFG(H9),s.LFG(F9),s.LFG(s.zs3),s.LFG(s.R0b),s.LFG(Y),s.LFG(il),s.LFG(Fe),s.LFG(L9))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const G9=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],iz=new s.OlP("cdk-connected-overlay-scroll-strategy");let sz=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),oz=(()=>{class n{constructor(e,r,i,o,c){this._overlay=e,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ns.w0.EMPTY,this._attachSubscription=ns.w0.EMPTY,this._detachSubscription=ns.w0.EMPTY,this._positionSubscription=ns.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new s.vpe,this.positionChange=new s.vpe,this.attach=new s.vpe,this.detach=new s.vpe,this.overlayKeydown=new s.vpe,this.overlayOutsideClick=new s.vpe,this._templatePortal=new tD(r,i),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=cr(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=cr(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=cr(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=cr(e)}get push(){return this._push}set push(e){this._push=cr(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=G9);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!al(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new iD({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof sz?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(n,t=!1){return(0,Qr.e)((e,r)=>{let i=0;e.subscribe(new lr.Q(r,o=>{const c=n(o,i++);(c||t)&&r.next(o),!c&&r.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(jh),s.Y36(s.Rgc),s.Y36(s.s_b),s.Y36(iz),s.Y36(il,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[s.TTD]}),n})();const W9={provide:iz,deps:[jh],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let EP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[jh,W9],imports:[[Pd,bP,KV],KV]}),n})();const az=new Set;let iy,q9=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Y9}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(n){if(!az.has(n))try{iy||(iy=document.createElement("style"),iy.setAttribute("type","text/css"),document.head.appendChild(iy)),iy.sheet&&(iy.sheet.insertRule(`@media ${n} {body{ }}`,0),az.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Y9(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let lz=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new Wt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return cz(yf(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let o=Ys(cz(yf(e)).map(c=>this._registerQuery(c).observable));return o=Ro(o.pipe((0,Xn.q)(1)),o.pipe(bC(1),Af(0))),o.pipe((0,kt.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:_})=>{h.matches=h.matches||p,h.breakpoints[_]=p}),h}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),o={observable:new Pr.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(gi(r),(0,kt.U)(({matches:c})=>({query:e,matches:c})),gr(this._destroySubject)),mql:r};return this._queries.set(e,o),o}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(q9),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cz(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Q9(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",2),s.TgZ(1,"button",3),s.NdJ("click",function(){return s.CHM(e),s.oxw().action()}),s._uU(2),s.qZA(),s.qZA()}if(2&n){const e=s.oxw();s.xp6(2),s.Oqu(e.data.action)}}function J9(n,t){}const IP=new s.OlP("MatSnackBarData");class sD{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const X9=Math.pow(2,31)-1;class TP{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Wt.x,this._afterOpened=new Wt.x,this._onAction=new Wt.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,X9))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let eQ=(()=>{class n{constructor(e,r){this.snackBarRef=e,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(TP),s.Y36(IP))},n.\u0275cmp=s.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"span",0),s._uU(1),s.qZA(),s.YNc(2,Q9,3,1,"div",1)),2&e&&(s.xp6(1),s.Oqu(r.data.message),s.xp6(1),s.Q6J("ngIf",r.hasAction))},directives:[qr,Dh],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const tQ={snackBarState:zu("state",[Pa("void, hidden",bs({transform:"scale(0.8)",opacity:0})),Pa("visible",bs({transform:"scale(1)",opacity:1})),dl("* => visible",ul("150ms cubic-bezier(0, 0, 0.2, 1)")),dl("* => void, * => hidden",ul("75ms cubic-bezier(0.4, 0.0, 1, 1)",bs({opacity:0})))])};let nQ=(()=>{class n extends nD{constructor(e,r,i,o,c){super(),this._ngZone=e,this._elementRef=r,this._changeDetectorRef=i,this._platform=o,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Wt.x,this._onExit=new Wt.x,this._onEnter=new Wt.x,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:r,toState:i}=e;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Xn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>e.classList.add(i)):e.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(i=document.activeElement),e.removeAttribute("aria-hidden"),r.appendChild(e),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(Qi),s.Y36(sD))},n.\u0275cmp=s.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(e,r){if(1&e&&s.Gf(rD,7),2&e){let i;s.iGM(i=s.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,r){1&e&&s.WFA("@state.done",function(o){return r.onAnimationEnd(o)}),2&e&&s.d8E("@state",r._animationState)},features:[s.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.YNc(1,J9,0,0,"ng-template",1),s.qZA(),s._UZ(2,"div")),2&e&&(s.xp6(2),s.uIk("aria-live",r._live)("role",r._role))},directives:[rD],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[tQ.snackBarState]}}),n})(),uz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[EP,bP,be,kR,xr],xr]}),n})();const dz=new s.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new sD}});let iQ=(()=>{class n{constructor(e,r,i,o,c,h){this._overlay=e,this._live=r,this._injector=i,this._breakpointObserver=o,this._parentSnackBar=c,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,r){return this._attach(e,r)}openFromTemplate(e,r){return this._attach(e,r)}open(e,r="",i){const o=Mt(Mt({},this._defaultConfig),i);return o.data={message:e,action:r},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,r){const o=s.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:sD,useValue:r}]}),c=new bw(this.snackBarContainerComponent,r.viewContainerRef,o),h=e.attach(c);return h.instance.snackBarConfig=r,h.instance}_attach(e,r){const i=Mt(Mt(Mt({},new sD),this._defaultConfig),r),o=this._createOverlay(i),c=this._attachSnackBarContainer(o,i),h=new TP(c,o);if(e instanceof s.Rgc){const p=new tD(e,null,{$implicit:i.data,snackBarRef:h});h.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(i,h),_=new bw(e,void 0,p),E=c.attachComponentPortal(_);h.instance=E.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(gr(o.detachments())).subscribe(p=>{o.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(h,i),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(e,r){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),r.duration&&r.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(r.duration))}_createOverlay(e){const r=new iD;r.direction=e.direction;let i=this._overlay.position().global();const o="rtl"===e.direction,c="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,h=!c&&"center"!==e.horizontalPosition;return c?i.left("0"):h?i.right("0"):i.centerHorizontally(),"top"===e.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(e,r){return s.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:TP,useValue:r},{provide:IP,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(jh),s.LFG(zc),s.LFG(s.zs3),s.LFG(lz),s.LFG(n,12),s.LFG(dz))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),SP=(()=>{class n extends iQ{constructor(e,r,i,o,c,h){super(e,r,i,o,c,h),this.simpleSnackBarComponent=eQ,this.snackBarContainerComponent=nQ,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(jh),s.LFG(zc),s.LFG(s.zs3),s.LFG(lz),s.LFG(n,12),s.LFG(dz))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:uz}),n})(),oD=(()=>{class n{constructor(e){this.data=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(IP))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-snackbar"]],decls:2,vars:1,template:function(e,r){1&e&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&e&&(s.xp6(1),s.Oqu(r.data.text))},styles:[""]}),n})();class DP{constructor(t,e,r,i,o,c,h){this.foodName=t,this.calories=e,this.protein=r,this.fat=i,this.carbohydrates=o,this.weight=c,this.ownerUid=h}}function sQ(n,t){}class AP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const oQ={dialogContainer:zu("dialogContainer",[Pa("void, exit",bs({opacity:0,transform:"scale(0.7)"})),Pa("enter",bs({transform:"none"})),dl("* => enter",OC([ul("150ms cubic-bezier(0, 0, 0.2, 1)",bs({transform:"none",opacity:1})),rm("@*",nm(),{optional:!0})])),dl("* => void, * => exit",OC([ul("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",bs({opacity:0})),rm("@*",nm(),{optional:!0})]))])};let aQ=(()=>{class n extends nD{constructor(e,r,i,o,c,h,p,_){super(),this._elementRef=e,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=c,this._interactivityChecker=h,this._ngZone=p,this._focusMonitor=_,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(E)),this._ariaLabelledBy=c.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Kw())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(r)}_focusByCssSelector(e,r){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,r)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const r=Kw(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,r=Kw();return e===r||e.contains(r)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(xC),s.Y36(s.sBO),s.Y36(Y,8),s.Y36(AP),s.Y36(EC),s.Y36(s.R0b),s.Y36(ac))},n.\u0275dir=s.lG2({type:n,viewQuery:function(e,r){if(1&e&&s.Gf(rD,7),2&e){let i;s.iGM(i=s.CRH())&&(r._portalOutlet=i.first)}},features:[s.qOj]}),n})(),lQ=(()=>{class n extends aQ{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:r}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:e,totalTime:r}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,r){1&e&&s.WFA("@dialogContainer.start",function(o){return r._onAnimationStart(o)})("@dialogContainer.done",function(o){return r._onAnimationDone(o)}),2&e&&(s.Ikx("id",r._id),s.uIk("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),s.d8E("@dialogContainer",r._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,r){1&e&&s.YNc(0,sQ,0,0,"ng-template",0)},directives:[rD],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[oQ.dialogContainer]}}),n})(),cQ=0;class uQ{constructor(t,e,r="mat-dialog-"+cQ++){this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Wt.x,this._afterClosed=new Wt.x,this._beforeClosed=new Wt.x,this._state=0,e._id=r,e._animationStateChanged.pipe(kn(i=>"opened"===i.state),(0,Xn.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(kn(i=>"closed"===i.state),(0,Xn.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(kn(i=>27===i.keyCode&&!this.disableClose&&!al(i))).subscribe(i=>{i.preventDefault(),hz(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():hz(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(kn(e=>"closing"===e.state),(0,Xn.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function hz(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const dQ=new s.OlP("MatDialogData"),hQ=new s.OlP("mat-dialog-default-options"),fz=new s.OlP("mat-dialog-scroll-strategy"),pQ={provide:fz,deps:[jh],useFactory:function(n){return()=>n.scrollStrategies.block()}};let gQ=(()=>{class n{constructor(e,r,i,o,c,h,p,_,E,x){this._overlay=e,this._injector=r,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=c,this._dialogRefConstructor=p,this._dialogContainerType=_,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Wt.x,this._afterOpenedAtThisLevel=new Wt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Ss(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(gi(void 0))),this._scrollStrategy=h}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,r){r=function(n,t){return Mt(Mt({},t),n)}(r,this._defaultOptions||new AP),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),o=this._attachDialogContainer(i,r),c=this._attachDialogContent(e,o,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.afterClosed().subscribe(()=>this._removeOpenDialog(c)),this.afterOpened.next(c),o._initializeWithAttachedContent(),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const r=this._getOverlayConfig(e);return this._overlay.create(r)}_getOverlayConfig(e){const r=new iD({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachDialogContainer(e,r){const o=s.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:AP,useValue:r}]}),c=new bw(this._dialogContainerType,r.viewContainerRef,o,r.componentFactoryResolver);return e.attach(c).instance}_attachDialogContent(e,r,i,o){const c=new this._dialogRefConstructor(i,r,o.id);if(e instanceof s.Rgc)r.attachTemplatePortal(new tD(e,null,{$implicit:o.data,dialogRef:c}));else{const h=this._createInjector(o,c,r),p=r.attachComponentPortal(new bw(e,o.viewContainerRef,h,o.componentFactoryResolver));c.componentInstance=p.instance}return c.updateSize(o.width,o.height).updatePosition(o.position),c}_createInjector(e,r,i){const o=e&&e.viewContainerRef&&e.viewContainerRef.injector,c=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:r}];return e.direction&&(!o||!o.get(il,null,s.XFs.Optional))&&c.push({provide:il,useValue:{value:e.direction,change:xt()}}),s.zs3.create({parent:o||this._injector,providers:c})}_removeOpenDialog(e){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,o)=>{i?o.setAttribute("aria-hidden",i):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const r=e.parentElement.children;for(let i=r.length-1;i>-1;i--){let o=r[i];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let r=e.length;for(;r--;)e[r].close()}}return n.\u0275fac=function(e){s.$Z()},n.\u0275dir=s.lG2({type:n}),n})(),aD=(()=>{class n extends gQ{constructor(e,r,i,o,c,h,p,_){super(e,r,o,h,p,c,uQ,lQ,dQ,_)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(jh),s.LFG(s.zs3),s.LFG(Fe,8),s.LFG(hQ,8),s.LFG(fz),s.LFG(n,12),s.LFG(CP),s.LFG(Vo,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),_Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[aD,pQ],imports:[[EP,bP,xr],xr]}),n})(),ww=(()=>{class n{constructor(e,r){this.authService=r,this.database=e}addIntakes(e,r,i,o,c,h){this.authService.userData.uid&&this.database.collection("intakes").add({nickname:e,intakeValue:r,titleIntake:i,protein:o,carbohydrates:c,fat:h,date:new Date,uid:this.authService.userData.uid})}addTargetIntake(e,r,i,o){if(JSON.parse(localStorage.getItem("user")).uid){const c=this.database.doc(`person/${this.authService.userData.uid}`),h=JSON.parse(localStorage.getItem("user"));c.set({uid:h.uid,nickname:h.displayName,targetIntake:e,proteinTarget:r,carbohydratesTarget:i,fatTarget:o},{merge:!0}),this.database.doc(`person/${this.authService.userData.uid}`).update({targetIntake:e,proteinTarget:r,carbohydratesTarget:i,fatTarget:o}),this.database.doc(`users/${this.authService.userData.uid}`).update({targetIntake:e,proteinTarget:r,carbohydratesTarget:i,fatTarget:o})}}addNewTeam(e){JSON.parse(localStorage.getItem("user")).uid&&this.database.collection("teams").add({teamName:e,ownerUid:this.authService.userData.uid}).then(r=>{this.database.collection("teamMembers").add({teamId:r.id,memberUid:this.authService.userData.uid,ownerUid:this.authService.userData.uid})})}addNewFood(e){if(JSON.parse(localStorage.getItem("user")).uid)return this.database.collection("food").add({ownerUid:JSON.parse(localStorage.getItem("user")).uid,foodName:e.foodName,calories:e.calories,protein:e.protein,fat:e.fat,carbohydrates:e.carbohydrates,weight:e.weight})}getAllTeamsForUser(){if(JSON.parse(localStorage.getItem("user")).uid)return this.database.collection("teamMembers",e=>e.where("memberUid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamFromOwnerId(e){return console.log(e),this.database.collection("teams",r=>r.where("ownerUid","==",e)).valueChanges({idField:"eventId"})}getAllIntakesDocuments(){if(void 0!==localStorage.getItem("user"))return this.database.collection("intakes",e=>e.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges({idField:"eventId"})}getAllFoodDocuments(){if(void 0!==localStorage.getItem("user"))return this.database.collection("food",e=>e.where("ownerUid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getPersonConnectedInfos(){if(void 0!==localStorage.getItem("user"))return this.database.collection("person",e=>e.where("uid","==",JSON.parse(localStorage.getItem("user")).uid)).valueChanges()}getTeamMembersWithTeamId(e){return this.database.collection("teamMembers",r=>r.where("teamId","==",e)).valueChanges()}getUserByUid(e){return this.database.collection("users",r=>r.where("uid","==",e)).valueChanges()}getAllIntakesDocumentsByUid(e){return this.database.collection("intakes",r=>r.where("uid","==",e)).valueChanges()}deleteIntake(e){this.database.doc("intakes/"+e).delete()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(SR),s.LFG(YT))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yQ(n,t){1&n&&(s.TgZ(0,"mat-error"),s._uU(1," Le nom est obligatoire. "),s.qZA())}function vQ(n,t){1&n&&(s.TgZ(0,"mat-error"),s._uU(1," Les caloriesest obligatoire. "),s.qZA())}function bQ(n,t){1&n&&(s.TgZ(0,"mat-error"),s._uU(1," Les prot\xe9ines sont obligatoire. "),s.qZA())}function wQ(n,t){1&n&&(s.TgZ(0,"mat-error"),s._uU(1," Les glucides sont obligatoire. "),s.qZA())}function CQ(n,t){1&n&&(s.TgZ(0,"mat-error"),s._uU(1," Les lipides sont obligatoire. "),s.qZA())}function EQ(n,t){1&n&&(s.TgZ(0,"mat-error"),s._uU(1," Le poids est obligatoire. "),s.qZA())}let IQ=(()=>{class n{constructor(e,r,i){this.formBuilder=e,this.dialogRef=r,this.foodForm=void 0,this.FormGroup=ou,this.serviceIntake=i}ngOnInit(){this.foodForm=this.formBuilder.group({foodName:["",hs.required],calories:["",hs.required],protein:["",hs.required],carbohydrates:["",hs.required],fat:["",hs.required],weight:["",hs.required]})}addFood(){var e;this.foodForm&&this.foodForm.valid&&(null===(e=this.serviceIntake.addNewFood(new DP(this.foodForm.value.foodName,this.foodForm.value.calories,this.foodForm.value.protein,this.foodForm.value.fat,this.foodForm.value.carbohydrates,this.foodForm.value.weight,JSON.parse(localStorage.getItem("user")).uid)))||void 0===e||e.then(()=>{this.dialogRef.closeAll()}))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(S8),s.Y36(aD),s.Y36(ww))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-add-food-in-db"]],decls:33,vars:8,consts:[[3,"formGroup"],["appearance","fill"],["matInput","","type","text","id","foodName","formControlName","foodName","required",""],[4,"ngIf"],["matInput","","type","number","id","calories","formControlName","calories","required",""],["matInput","","type","number","id","protein","formControlName","protein","required",""],["matInput","","type","number","id","carbohydrates","formControlName","carbohydrates","required",""],["matInput","","type","number","id","fat","formControlName","fat","required",""],["matInput","","type","number","id","weight","formControlName","weight","required",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,r){if(1&e&&(s.TgZ(0,"form",0),s.TgZ(1,"mat-form-field",1),s.TgZ(2,"mat-label"),s._uU(3,"Food Name"),s.qZA(),s._UZ(4,"input",2),s.YNc(5,yQ,2,0,"mat-error",3),s.qZA(),s.TgZ(6,"mat-form-field",1),s.TgZ(7,"mat-label"),s._uU(8,"Calories"),s.qZA(),s._UZ(9,"input",4),s.YNc(10,vQ,2,0,"mat-error",3),s.qZA(),s.TgZ(11,"mat-form-field",1),s.TgZ(12,"mat-label"),s._uU(13,"Prot\xe9ine"),s.qZA(),s._UZ(14,"input",5),s.YNc(15,bQ,2,0,"mat-error",3),s.qZA(),s.TgZ(16,"mat-form-field",1),s.TgZ(17,"mat-label"),s._uU(18,"Glucides"),s.qZA(),s._UZ(19,"input",6),s.YNc(20,wQ,2,0,"mat-error",3),s.qZA(),s.TgZ(21,"mat-form-field",1),s.TgZ(22,"mat-label"),s._uU(23,"Lipides"),s.qZA(),s._UZ(24,"input",7),s.YNc(25,CQ,2,0,"mat-error",3),s.qZA(),s.TgZ(26,"mat-form-field",1),s.TgZ(27,"mat-label"),s._uU(28,"Poids (g)"),s.qZA(),s._UZ(29,"input",8),s.YNc(30,EQ,2,0,"mat-error",3),s.qZA(),s.TgZ(31,"button",9),s.NdJ("click",function(){return r.addFood()}),s._uU(32,"Submit"),s.qZA(),s.qZA()),2&e){let i,o,c,h,p,_;s.Q6J("formGroup",r.foodForm),s.xp6(5),s.Q6J("ngIf",(null==r.foodForm||null==(i=r.foodForm.get("foodName"))?null:i.invalid)&&(null==r.foodForm||null==(i=r.foodForm.get("foodName"))?null:i.touched)),s.xp6(5),s.Q6J("ngIf",(null==r.foodForm||null==(o=r.foodForm.get("calories"))?null:o.invalid)&&(null==r.foodForm||null==(o=r.foodForm.get("calories"))?null:o.touched)),s.xp6(5),s.Q6J("ngIf",(null==r.foodForm||null==(c=r.foodForm.get("protein"))?null:c.invalid)&&(null==r.foodForm||null==(c=r.foodForm.get("protein"))?null:c.touched)),s.xp6(5),s.Q6J("ngIf",(null==r.foodForm||null==(h=r.foodForm.get("carbohydrates"))?null:h.invalid)&&(null==r.foodForm||null==(h=r.foodForm.get("carbohydrates"))?null:h.touched)),s.xp6(5),s.Q6J("ngIf",(null==r.foodForm||null==(p=r.foodForm.get("fat"))?null:p.invalid)&&(null==r.foodForm||null==(p=r.foodForm.get("fat"))?null:p.touched)),s.xp6(5),s.Q6J("ngIf",(null==r.foodForm||null==(_=r.foodForm.get("weight"))?null:_.invalid)&&(null==r.foodForm||null==(_=r.foodForm.get("weight"))?null:_.touched)),s.xp6(1),s.Q6J("disabled",!(null!=r.foodForm&&r.foodForm.valid))}},directives:[fS,sS,ld,oO,Wb,aO,H_,iS,Gb,mS,qr,pS,Dh,q8],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}button[type=submit][_ngcontent-%COMP%]{margin-top:16px}"]}),n})();const TQ=["trigger"],SQ=["panel"];function DQ(n,t){if(1&n&&(s.TgZ(0,"span",8),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.placeholder)}}function AQ(n,t){if(1&n&&(s.TgZ(0,"span",12),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Oqu(e.triggerValue)}}function xQ(n,t){1&n&&s.Hsn(0,0,["*ngSwitchCase","true"])}function MQ(n,t){if(1&n&&(s.TgZ(0,"span",9),s.YNc(1,AQ,2,1,"span",10),s.YNc(2,xQ,1,0,"ng-content",11),s.qZA()),2&n){const e=s.oxw();s.Q6J("ngSwitch",!!e.customTrigger),s.xp6(2),s.Q6J("ngSwitchCase",!0)}}function kQ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",13),s.TgZ(1,"div",14,15),s.NdJ("@transformPanel.done",function(i){return s.CHM(e),s.oxw()._panelDoneAnimatingStream.next(i.toState)})("keydown",function(i){return s.CHM(e),s.oxw()._handleKeydown(i)}),s.Hsn(3,1),s.qZA(),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("@transformPanelWrap",void 0),s.xp6(1),s.Gre("mat-select-panel ",e._getPanelTheme(),""),s.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),s.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),s.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const RQ=[[["mat-select-trigger"]],"*"],OQ=["mat-select-trigger","*"],pz={transformPanelWrap:zu("transformPanelWrap",[dl("* => void",rm("@transformPanel",[nm()],{optional:!0}))]),transformPanel:zu("transformPanel",[Pa("void",bs({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Pa("showing",bs({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Pa("showing-multiple",bs({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),dl("void => *",ul("120ms cubic-bezier(0, 0, 0.2, 1)")),dl("* => void",ul("100ms 25ms linear",bs({opacity:0})))])};let gz=0;const _z=new s.OlP("mat-select-scroll-strategy"),LQ=new s.OlP("MAT_SELECT_CONFIG"),BQ={provide:_z,deps:[jh],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};class VQ{constructor(t,e){this.source=t,this.value=e}}const UQ=Pv(Nv(Ov(Fv(class{constructor(n,t,e,r,i){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=r,this.ngControl=i}})))),jQ=new s.OlP("MatSelectTrigger");let HQ=(()=>{class n extends UQ{constructor(e,r,i,o,c,h,p,_,E,x,$,se,ye,ze){var rt,It,jt;super(c,o,p,_,x),this._viewportRuler=e,this._changeDetectorRef=r,this._ngZone=i,this._dir=h,this._parentFormField=E,this._liveAnnouncer=ye,this._defaultOptions=ze,this._panelOpen=!1,this._compareWith=(Vt,Ht)=>Vt===Ht,this._uid="mat-select-"+gz++,this._triggerAriaLabelledBy=null,this._destroy=new Wt.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+gz++,this._panelDoneAnimatingStream=new Wt.x,this._overlayPanelClass=(null==(rt=this._defaultOptions)?void 0:rt.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!=(jt=null==(It=this._defaultOptions)?void 0:It.disableOptionCentering)&&jt,this.ariaLabel="",this.optionSelectionChanges=Ss(()=>{const Vt=this.options;return Vt?Vt.changes.pipe(gi(Vt),Ur(()=>(0,Rs.T)(...Vt.map(Ht=>Ht.onSelectionChange)))):this._ngZone.onStable.pipe((0,Xn.q)(1),Ur(()=>this.optionSelectionChanges))}),this.openedChange=new s.vpe,this._openedStream=this.openedChange.pipe(kn(Vt=>Vt),(0,kt.U)(()=>{})),this._closedStream=this.openedChange.pipe(kn(Vt=>!Vt),(0,kt.U)(()=>{})),this.selectionChange=new s.vpe,this.valueChange=new s.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ze?void 0:ze.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ze.typeaheadDebounceInterval),this._scrollStrategyFactory=se,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt($)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){var e,r,i,o;return null!=(o=null!=(i=this._required)?i:null==(r=null==(e=this.ngControl)?void 0:e.control)?void 0:r.hasValidator(hs.required))&&o}set required(e){this._required=cr(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=cr(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=cr(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Vi(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new mf(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(xf(),gr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(gr(this._destroy)).subscribe(e=>{e.added.forEach(r=>r.select()),e.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(gi(null),gr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),r=this.ngControl;if(e!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,r;return this.multiple?(null==(e=this._selectionModel)?void 0:e.selected)||[]:null==(r=this._selectionModel)?void 0:r.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const r=e.keyCode,i=40===r||38===r||37===r||39===r,o=13===r||32===r,c=this._keyManager;if(!c.isTyping()&&o&&!al(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const h=this.selected;c.onKeydown(e);const p=this.selected;p&&h!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(e){const r=this._keyManager,i=e.keyCode,o=40===i||38===i,c=r.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(c||13!==i&&32!==i||!r.activeItem||al(e))if(!c&&this._multiple&&65===i&&e.ctrlKey){e.preventDefault();const h=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(h?p.select():p.deselect())})}else{const h=r.activeItemIndex;r.onKeydown(e),this._multiple&&o&&e.shiftKey&&r.activeItem&&r.activeItemIndex!==h&&r.activeItem._selectViaInteraction()}else e.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Xn.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(e);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,e)}catch(o){return!1}});return r&&this._selectionModel.select(r),r}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new AN(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(gr(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(gr(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,Rs.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(gr(e)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Rs.T)(...this.options.map(r=>r._stateChanges)).pipe(gr(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,r){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),r&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),r&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,e):e.indexOf(r)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null==(e=this.options)?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var i;if(this.ariaLabel)return null;const e=null==(i=this._parentFormField)?void 0:i.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var i;if(this.ariaLabel)return null;const e=null==(i=this._parentFormField)?void 0:i.getLabelId();let r=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Pb),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(np),s.Y36(s.SBq),s.Y36(il,8),s.Y36(G_,8),s.Y36(ld,8),s.Y36(sO,8),s.Y36(pc,10),s.$8M("tabindex"),s.Y36(_z),s.Y36(zc),s.Y36(LQ,8))},n.\u0275dir=s.lG2({type:n,viewQuery:function(e,r){if(1&e&&(s.Gf(TQ,5),s.Gf(SQ,5),s.Gf(oz,5)),2&e){let i;s.iGM(i=s.CRH())&&(r.trigger=i.first),s.iGM(i=s.CRH())&&(r.panel=i.first),s.iGM(i=s.CRH())&&(r._overlayDir=i.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[s.qOj,s.TTD]}),n})(),zQ=(()=>{class n extends HQ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,r,i){const o=this._getItemHeight();return Math.min(Math.max(0,o*e-r+o/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(gr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const r=YE(e,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===r?0:function(n,t,e,r){return n<e?n:n+t>e+256?Math.max(0,n-256+t):e}((e+r)*i,i,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new VQ(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),o=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let _=this._selectionModel.selected[0]||this.options.first;c=_&&_.group?32:16}i||(c*=-1);const h=0-(e.left+c-(i?o:0)),p=e.right+c-r.width+(i?0:o);h>0?c+=h+8:p>0&&(c-=p+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,r,i){const o=this._getItemHeight(),c=(o-this._triggerRect.height)/2,h=Math.floor(256/o);let p;return this.disableOptionCentering?0:(p=0===this._scrollTop?e*o:this._scrollTop===i?(e-(this._getItemCount()-h))*o+(o-(this._getItemCount()*o-256)%o):r-o/2,Math.round(-1*p-c))}_checkOverlayWithinViewport(e){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),o=this._triggerRect.top-8,c=i.height-this._triggerRect.bottom-8,h=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*r,256)-h-this._triggerRect.height;_>c?this._adjustPanelUp(_,c):h>o?this._adjustPanelDown(h,o,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,r){const i=Math.round(e-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,r,i){const o=Math.round(e-r);if(this._scrollTop+=o,this._offsetY+=o,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*e,256),c=r*e-i;let h;h=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),h+=YE(h,this.options,this.optionGroups);const p=i/2;this._scrollTop=this._calculateOverlayScroll(h,p,c),this._offsetY=this._calculateOverlayOffsetY(h,p,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const e=this._getItemHeight(),r=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(e,r,i){if(1&e&&(s.Suo(i,jQ,5),s.Suo(i,Om,5),s.Suo(i,qE,5)),2&e){let o;s.iGM(o=s.CRH())&&(r.customTrigger=o.first),s.iGM(o=s.CRH())&&(r.options=o),s.iGM(o=s.CRH())&&(r.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,r){1&e&&s.NdJ("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&e&&(s.uIk("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-describedby",r._ariaDescribedby||null)("aria-activedescendant",r._getAriaActiveDescendant()),s.ekj("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[s._Bn([{provide:$b,useExisting:n},{provide:WE,useExisting:n}]),s.qOj],ngContentSelectors:OQ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,r){if(1&e&&(s.F$t(RQ),s.TgZ(0,"div",0,1),s.NdJ("click",function(){return r.toggle()}),s.TgZ(3,"div",2),s.YNc(4,DQ,2,1,"span",3),s.YNc(5,MQ,3,2,"span",4),s.qZA(),s.TgZ(6,"div",5),s._UZ(7,"div",6),s.qZA(),s.qZA(),s.YNc(8,kQ,4,14,"ng-template",7),s.NdJ("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&e){const i=s.MAs(1);s.uIk("aria-owns",r.panelOpen?r.id+"-panel":null),s.xp6(3),s.Q6J("ngSwitch",r.empty),s.uIk("id",r._valueId),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1),s.xp6(3),s.Q6J("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},directives:[sz,$s,ei,oz,ui,Wr],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[pz.transformPanelWrap,pz.transformPanel]},changeDetection:0}),n})(),GQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[BQ],imports:[[be,EP,Pm,xr],Nb,_S,Pm,xr]}),n})();const $Q=["*"],yz=new s.OlP("MatChipRemove"),vz=new s.OlP("MatChipAvatar"),bz=new s.OlP("MatChipTrailingIcon");class WQ{constructor(t){this._elementRef=t}}const qQ=Nv(qu(Pv(WQ),"primary"),-1);let cD=(()=>{class n extends qQ{constructor(e,r,i,o,c,h,p,_){super(e),this._ngZone=r,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new Wt.x,this._onBlur=new Wt.x,this.selectionChange=new s.vpe,this.destroyed=new s.vpe,this.removed=new s.vpe,this._addHostClassName(),this._chipRippleTarget=h.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new jE(this,r,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=o||{},this._animationsDisabled="NoopAnimations"===p,this.tabIndex=null!=_&&parseInt(_)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const r=cr(e);r!==this._selected&&(this._selected=r,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=cr(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=cr(e)}get removable(){return this._removable}set removable(e){this._removable=cr(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",r=this._elementRef.nativeElement;r.hasAttribute(e)||r.tagName.toLowerCase()===e?r.classList.add(e):r.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled&&e.preventDefault()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case 46:case 8:this.remove(),e.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Qi),s.Y36(HE,8),s.Y36(s.sBO),s.Y36(Y),s.Y36(Vo,8),s.$8M("tabindex"))},n.\u0275dir=s.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,r,i){if(1&e&&(s.Suo(i,vz,5),s.Suo(i,bz,5),s.Suo(i,yz,5)),2&e){let o;s.iGM(o=s.CRH())&&(r.avatar=o.first),s.iGM(o=s.CRH())&&(r.trailingIcon=o.first),s.iGM(o=s.CRH())&&(r.removeIcon=o.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,r){1&e&&s.NdJ("click",function(o){return r._handleClick(o)})("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&e&&(s.uIk("tabindex",r.disabled?null:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString())("aria-selected",r.ariaSelected),s.ekj("mat-chip-selected",r.selected)("mat-chip-with-avatar",r.avatar)("mat-chip-with-trailing-icon",r.trailingIcon||r.removeIcon)("mat-chip-disabled",r.disabled)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[s.qOj]}),n})(),wz=(()=>{class n{constructor(e,r){this._parentChip=e,"BUTTON"===r.nativeElement.nodeName&&r.nativeElement.setAttribute("type","button")}_handleClick(e){const r=this._parentChip;r.removable&&!r.disabled&&r.remove(),e.stopPropagation(),e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(cD),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,r){1&e&&s.NdJ("click",function(o){return r._handleClick(o)})},features:[s._Bn([{provide:yz,useExisting:n}])]}),n})();const Cz=new s.OlP("mat-chips-default-options"),KQ=Fv(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r}});let QQ=0;class JQ{constructor(t,e){this.source=t,this.value=e}}let Ez=(()=>{class n extends KQ{constructor(e,r,i,o,c,h,p){super(h,o,c,p),this._elementRef=e,this._changeDetectorRef=r,this._dir=i,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new Wt.x,this._uid="mat-chip-list-"+QQ++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(_,E)=>_===E,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new s.vpe,this.valueChange=new s.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var e,r;return this.multiple?(null==(e=this._selectionModel)?void 0:e.selected)||[]:null==(r=this._selectionModel)?void 0:r.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(e){this._multiple=cr(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var e,r,i,o;return null!=(o=null!=(i=this._required)?i:null==(r=null==(e=this.ngControl)?void 0:e.control)?void 0:r.hasValidator(hs.required))&&o}set required(e){this._required=cr(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=cr(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=cr(e),this.chips&&this.chips.forEach(r=>r.chipListSelectable=this._selectable)}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return(0,Rs.T)(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return(0,Rs.T)(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return(0,Rs.T)(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return(0,Rs.T)(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new Oa(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(gr(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe(gr(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(gi(null),gr(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new mf(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const r=e.target;r&&r.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,r=!0){if(this._clearSelection(),this.chips.forEach(i=>i.deselect()),Array.isArray(e))e.forEach(i=>this._selectValue(i,r)),this._sortValues();else{const i=this._selectValue(e,r);i&&r&&this._keyManager.setActiveItem(i)}}_selectValue(e,r=!0){const i=this.chips.find(o=>null!=o.value&&this._compareWith(o.value,e));return i&&(r?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(r=>{r!==e&&r.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let r=null;r=Array.isArray(this.selected)?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=r,this.change.emit(new JQ(this,r)),this.valueChange.emit(r),this._onChange(r),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(r=>{!this._selectionModel.isSelected(r)&&r.selected&&r.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let r=this.chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&this._keyManager.updateActiveItem(r),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const r=e.chip,i=this.chips.toArray().indexOf(e.chip);this._isValidIndex(i)&&r._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(e){let r=e.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-chip"))return!0;r=r.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(il,8),s.Y36(G_,8),s.Y36(ld,8),s.Y36(np),s.Y36(pc,10))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(e,r,i){if(1&e&&s.Suo(i,cD,5),2&e){let o;s.iGM(o=s.CRH())&&(r.chips=o)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,r){1&e&&s.NdJ("focus",function(){return r.focus()})("blur",function(){return r._blur()})("keydown",function(o){return r._keydown(o)}),2&e&&(s.Ikx("id",r._uid),s.uIk("tabindex",r.disabled?null:r._tabIndex)("aria-describedby",r._ariaDescribedby||null)("aria-required",r.role?r.required:null)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-multiselectable",r.multiple)("role",r.role)("aria-orientation",r.ariaOrientation),s.ekj("mat-chip-list-disabled",r.disabled)("mat-chip-list-invalid",r.errorState)("mat-chip-list-required",r.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[s._Bn([{provide:$b,useExisting:n}]),s.qOj],ngContentSelectors:$Q,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.Hsn(1),s.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),tJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[np,{provide:Cz,useValue:{separatorKeyCodes:[13]}}],imports:[[xr]]}),n})();function nJ(n,t){1&n&&(s.TgZ(0,"div"),s.TgZ(1,"div",3),s._uU(2,"\u{1f914}"),s.qZA(),s.qZA())}function rJ(n,t){if(1&n&&(s.TgZ(0,"div"),s.TgZ(1,"div",4),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._uU(4," total calories"),s.qZA(),s.qZA()),2&n){const e=s.oxw();s.xp6(3),s.Oqu(e.calculateTotalCalories())}}function iJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"mat-chip-list",5),s.TgZ(2,"mat-chip"),s._uU(3),s.TgZ(4,"button",6),s.TgZ(5,"mat-icon",7),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw().removeIntake(o)}),s._uU(6,"cancel"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&n){const e=t.$implicit;s.xp6(3),s.AsE(" ",e.titleIntake," | ",e.intakeValue," cal. ")}}let sJ=(()=>{class n{constructor(e,r){this.serviceIntake=e,this._snackBar=r,this.currentIntakes=[],this.totalIntakes=0}ngOnInit(){}calculateTotalCalories(){return this.totalIntakes=0,this.currentIntakes.length>0&&this.currentIntakes.forEach(e=>{this.totalIntakes+=e.intakeValue}),this.totalIntakes}removeIntake(e){this.serviceIntake.deleteIntake(e.eventId),this.confirmDelete(e)}confirmDelete(e){this._snackBar.openFromComponent(oD,{duration:5e3,data:{text:"\u26d4 "+e.titleIntake+" supprim\xe9 --\x3e "+e.intakeValue+" cal. retir\xe9s du total journalier."}})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ww),s.Y36(SP))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-intakes-history"]],inputs:{currentIntakes:"currentIntakes"},decls:6,vars:3,consts:[[1,"historiqueContainer"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"textVide"],[1,"totalCaloriesText"],["aria-label","Intakes"],["matChipRemove",""],[3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"h2"),s._uU(2,"Historique journalier"),s.qZA(),s.YNc(3,nJ,3,0,"div",1),s.YNc(4,rJ,5,1,"div",1),s.YNc(5,iJ,7,2,"div",2),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf",0===r.currentIntakes.length),s.xp6(1),s.Q6J("ngIf",r.currentIntakes.length>0),s.xp6(1),s.Q6J("ngForOf",r.currentIntakes))},directives:[qr,Wi,Ez,cD,wz,Bb],styles:["h2[_ngcontent-%COMP%]{margin:20px 0}.textVide[_ngcontent-%COMP%]{font-size:25px}.totalCaloriesText[_ngcontent-%COMP%]{margin:10px 0 20px;font-size:18px}.historiqueContainer[_ngcontent-%COMP%]{margin:40px 0 0;padding:0 0 40px}"]}),n})();function oJ(n,t){1&n&&(s.TgZ(0,"h1",24),s._uU(1,"OW ! STOP MANGER GROS PORC"),s.qZA())}function aJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",25),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).switchIntakeMacrosDisplay()}),s._uU(1),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngStyle",e.getSpinnerTextStyle()),s.xp6(1),s.AsE(" ",e.getTotalCurrentIntakesFromSelectedUser()," / ",null==e.selectedPerson?null:e.selectedPerson.targetIntake," ")}}function lJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",25),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).switchIntakeMacrosDisplay()}),s._uU(1),s._UZ(2,"br"),s._UZ(3,"br"),s._uU(4),s._UZ(5,"br"),s._UZ(6,"br"),s._uU(7),s._UZ(8,"br"),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngStyle",e.getSpinnerTextStyleMacros()),s.xp6(1),s.AsE(" P : ",e.getCurrentProtein()," / ",null==e.selectedPerson?null:e.selectedPerson.proteinTarget,""),s.xp6(3),s.AsE(" G : ",e.getCurrentCarbohydrates()," / ",null==e.selectedPerson?null:e.selectedPerson.carbohydratesTarget," "),s.xp6(3),s.AsE(" L : ",e.getCurrentFat()," / ",null==e.selectedPerson?null:e.selectedPerson.fatTarget," ")}}function cJ(n,t){if(1&n&&(s.TgZ(0,"div",26),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.Q6J("ngStyle",e.getSpinnerTextStyle()),s.xp6(1),s.hij(" ",e.getCurrentSmiley()," ")}}function uJ(n,t){if(1&n&&(s.TgZ(0,"mat-option",27),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("value",e.food),s.xp6(1),s.AsE(" ",e.viewValue," | ",e.food.weight,"g ")}}function dJ(n,t){1&n&&(s.TgZ(0,"mat-form-field"),s.TgZ(1,"mat-label"),s._uU(2,"Weight"),s.qZA(),s._UZ(3,"input",28),s.qZA())}function hJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"p"),s._uU(2),s.qZA(),s.TgZ(3,"p"),s._uU(4),s.qZA(),s.TgZ(5,"button",29),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).ajouterAliment()}),s._uU(6," Ajouter "),s.qZA(),s.qZA()}if(2&n){const e=s.oxw(2);s.xp6(2),s.hij("Calories : ",e.weightChangeFactor(null==e.selectedFood?null:e.selectedFood.calories),""),s.xp6(2),s.lnq("P: ",e.weightChangeFactor(null==e.selectedFood?null:e.selectedFood.protein)," G: ",e.weightChangeFactor(null==e.selectedFood?null:e.selectedFood.carbohydrates)," L: ",e.weightChangeFactor(null==e.selectedFood?null:e.selectedFood.fat),"")}}function fJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",2),s.TgZ(2,"div"),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",3,4),s.TgZ(6,"form",5),s.YNc(7,oJ,2,0,"h1",6),s.TgZ(8,"div",7),s._UZ(9,"mat-progress-spinner",8),s._UZ(10,"mat-progress-spinner",9),s.qZA(),s.YNc(11,aJ,2,3,"div",10),s.YNc(12,lJ,9,7,"div",10),s.YNc(13,cJ,2,2,"div",11),s.TgZ(14,"mat-form-field"),s.TgZ(15,"mat-label"),s._uU(16,"S\xe9lectionnez ici"),s.qZA(),s.TgZ(17,"mat-select",12),s.NdJ("valueChange",function(i){return s.CHM(e),s.oxw().selectedFood=i})("selectionChange",function(){return s.CHM(e),s.oxw().adjustWeight()}),s._UZ(18,"mat-option"),s.YNc(19,uJ,2,3,"mat-option",13),s.qZA(),s.qZA(),s.TgZ(20,"form",5),s.YNc(21,dJ,4,0,"mat-form-field",1),s.qZA(),s.YNc(22,hJ,7,4,"div",1),s._UZ(23,"br"),s._UZ(24,"br"),s._UZ(25,"br"),s.TgZ(26,"p"),s.TgZ(27,"b"),s._uU(28,"OU"),s.qZA(),s.qZA(),s.TgZ(29,"button",14),s.NdJ("click",function(){return s.CHM(e),s.oxw().goToScanner()}),s._uU(30," Scanner le code barre (NOT WORKING) "),s.qZA(),s._UZ(31,"br"),s._UZ(32,"br"),s._UZ(33,"br"),s.TgZ(34,"p"),s.TgZ(35,"b"),s._uU(36,"OU"),s.qZA(),s.qZA(),s.TgZ(37,"mat-form-field",15),s.TgZ(38,"mat-label"),s._uU(39,"Titre de l'apport calorique"),s.qZA(),s._UZ(40,"input",16),s.TgZ(41,"button",17),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetTitleIntake()}),s.TgZ(42,"mat-icon"),s._uU(43,"close"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(44,"mat-form-field",15),s.TgZ(45,"mat-label"),s._uU(46,"Montant calorique"),s.qZA(),s._UZ(47,"input",18),s.TgZ(48,"button",17),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetIntakeValue()}),s.TgZ(49,"mat-icon"),s._uU(50,"close"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(51,"mat-form-field",15),s.TgZ(52,"mat-label"),s._uU(53,"Prot\xe9ines"),s.qZA(),s._UZ(54,"input",19),s.TgZ(55,"button",17),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetProteinValue()}),s.TgZ(56,"mat-icon"),s._uU(57,"close"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(58,"mat-form-field",15),s.TgZ(59,"mat-label"),s._uU(60,"Glucides"),s.qZA(),s._UZ(61,"input",20),s.TgZ(62,"button",17),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetCarbohydratesValue()}),s.TgZ(63,"mat-icon"),s._uU(64,"close"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(65,"mat-form-field",15),s.TgZ(66,"mat-label"),s._uU(67,"Lipides"),s.qZA(),s._UZ(68,"input",21),s.TgZ(69,"button",17),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetFatValue()}),s.TgZ(70,"mat-icon"),s._uU(71,"close"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(72,"button",22),s.NdJ("click",function(){return s.CHM(e),s.oxw().ajouterApport()}),s._uU(73," Ajouter l'apport "),s.qZA(),s.qZA(),s._UZ(74,"app-intakes-history",23),s.qZA(),s.qZA()}if(2&n){const e=s.oxw();s.xp6(3),s.Oqu(e.getSelectedPerson().displayName),s.xp6(3),s.Q6J("formGroup",e.intakeFormGroup),s.xp6(1),s.Q6J("ngIf",e.isOverMaxIntake()),s.xp6(2),s.Q6J("color","warn")("diameter",e.spinnerDiameter)("strokeWidth",14)("mode","determinate")("value",100),s.xp6(1),s.Q6J("color",e.getColorStateOfSpinner())("diameter",e.spinnerDiameter)("strokeWidth",15)("mode","determinate")("value",e.getSpinnerProgressValue()),s.xp6(1),s.Q6J("ngIf",e.getTargetIntakeOfSelectedUser()>0&&e.isInIntakeView),s.xp6(1),s.Q6J("ngIf",e.getTargetIntakeOfSelectedUser()>0&&!e.isInIntakeView),s.xp6(1),s.Q6J("ngIf",0===e.getTargetIntakeOfSelectedUser()),s.xp6(4),s.Q6J("value",e.selectedFood),s.xp6(2),s.Q6J("ngForOf",e.foods),s.xp6(1),s.Q6J("formGroup",e.foodSelectionFormGroup),s.xp6(1),s.Q6J("ngIf",void 0!==e.selectedFood),s.xp6(1),s.Q6J("ngIf",void 0!==e.selectedFood),s.xp6(52),s.Q6J("currentIntakes",e.selectedUserIntakes)}}function pJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",30),s.TgZ(2,"p",31),s._uU(3,"Il semblerait que vous n'ayez pas d'objectif calorique journalier ..."),s.qZA(),s.TgZ(4,"div",32),s._uU(5,"\u{1f914}"),s.qZA(),s.TgZ(6,"p",33),s._uU(7,"Fixez-vous en un pour commencer \xe0 utiliser le tracker !"),s.qZA(),s.TgZ(8,"form",5),s.TgZ(9,"mat-form-field",15),s.TgZ(10,"mat-label"),s._uU(11,"Objectif calorique journalier"),s.qZA(),s._UZ(12,"input",34),s.TgZ(13,"mat-label"),s._uU(14,"Objectif prot\xe9ines journalier"),s.qZA(),s._UZ(15,"input",35),s.TgZ(16,"mat-label"),s._uU(17,"Objectif glucides journalier"),s.qZA(),s._UZ(18,"input",36),s.TgZ(19,"mat-label"),s._uU(20,"Objectif lipides journalier"),s.qZA(),s._UZ(21,"input",37),s.qZA(),s.TgZ(22,"button",38),s.NdJ("click",function(){return s.CHM(e),s.oxw().ajouterObjectif()}),s._uU(23," Confirmer cet objectif (YOLO) "),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&n){const e=s.oxw();s.xp6(8),s.Q6J("formGroup",e.targetIntakeSetupFormGroup)}}let Iz=(()=>{class n{constructor(e,r,i,o,c){var h,p;this._snackbar=i,this.router=o,this.dialog=c,this.selectedPerson=void 0,this.lastPersonSelected=void 0,this.isInIntakeView=!0,this.currentIntakeValue=1200,this.maxIntakeForTheDay=1300,this.spinnerDiameter=0,this.items=[],this.itemForSelectedUser={nickname:"",currentIntake:"",targetIntake:""},this.selectedUserIntakes=[],this.foods=[{viewValue:"",food:new DP("",0,0,0,0,0,"0")}],this.sportiveSmileyAnimation=["\u{1f975}","\u{1f919}","\u{1f957}","\u{1f346}","\u{1f34c}","\u{1f345}","\u{1f680}","\u{1f3c6}","\u{1f947}","\u{1f6bf}","\u{1f373}","\u{1f3c3}","\u{1f938}"],this.indexRandomIcon=0,this.emojiSubscription=new ns.w0,this.intakeFormGroup=new ou({titleIntake:new so("",hs.minLength(1)),intakeValue:new so("",hs.min(1)),protein:new so("",hs.min(1)),carbohydrates:new so("",hs.min(1)),fat:new so("",hs.min(1))}),this.targetIntakeSetupFormGroup=new ou({targetIntake:new so("",hs.minLength(1)),proteinTarget:new so("",hs.min(0)),carbohydratesTarget:new so("",hs.min(0)),fatTarget:new so("",hs.min(0))}),this.foodSelectionFormGroup=new ou({weight:new so("",hs.minLength(1))}),this.selectedFood=void 0,this.undefined=void 0,this.serviceIntake=r,null===(h=this.serviceIntake.getAllIntakesDocuments())||void 0===h||h.subscribe(_=>{this.items=_}),null===(p=this.serviceIntake.getPersonConnectedInfos())||void 0===p||p.subscribe(_=>{this.selectedPerson=_.length>0?_[0]:{displayName:"",targetIntake:0}})}ngOnInit(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0,protein:void 0,carbohydrates:void 0,fat:void 0}),this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1);const e=function(n=0,t=Hc.z){return n<0&&(n=0),Fm(n,n,t)}(2e3);this.emojiSubscription=e.subscribe(r=>{this.indexRandomIcon=Math.trunc(Math.random()*(this.sportiveSmileyAnimation.length-1)+1-1)}),this.setIntakesFromSelectedUser(),this.setFoodFromSelectedUser()}openPopupAddFood(){this.dialog.open(IQ,{}).afterClosed().subscribe(r=>{})}adjustWeight(){var e;this.foodSelectionFormGroup.reset(),this.foodSelectionFormGroup.setValue({weight:null===(e=this.selectedFood)||void 0===e?void 0:e.weight})}resetTitleIntake(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{titleIntake:""}))}resetIntakeValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{intakeValue:void 0}))}resetProteinValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{protein:void 0}))}resetCarbohydratesValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{carbohydrates:void 0}))}resetFatValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{fat:void 0}))}resetAllForm(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0}),this.targetIntakeSetupFormGroup.reset({targetIntake:void 0}),this.foodSelectionFormGroup.reset({weight:void 0}),this.selectedFood=void 0}getCurrentProtein(){let e=0;return this.selectedUserIntakes.forEach(r=>{e+=r.protein}),e}getCurrentCarbohydrates(){let e=0;return this.selectedUserIntakes.forEach(r=>{e+=r.carbohydrates}),e}getCurrentFat(){let e=0;return this.selectedUserIntakes.forEach(r=>{e+=r.fat}),e}getSpinnerProgressValue(){var e,r;let i=this.getTotalCurrentIntakesFromSelectedUser();return this.selectedPerson&&i/(null===(e=this.selectedPerson)||void 0===e?void 0:e.targetIntake)*100<100?i/(null===(r=this.selectedPerson)||void 0===r?void 0:r.targetIntake)*100:100}getColorStateOfSpinner(){return this.isOverMaxIntake()?"accent":"primary"}getSpinnerTextStyle(){return{"margin-top":"-"+(this.spinnerDiameter/2+16)+"px","padding-bottom":this.spinnerDiameter/2+26+"px"}}getSpinnerTextStyleMacros(){return{"margin-top":"-"+(this.spinnerDiameter/2+55)+"px","padding-bottom":this.spinnerDiameter/2-15+"px"}}isOverMaxIntake(){return this.getTotalCurrentIntakesFromSelectedUser()>this.maxIntakeForTheDay}ajouterApport(){this.intakeFormGroup.value.intakeValue&&this.intakeFormGroup.value.titleIntake&&this.intakeFormGroup.value.protein&&this.intakeFormGroup.value.carbohydrates&&this.intakeFormGroup.value.fat&&(this.serviceIntake.addIntakes(this.itemForSelectedUser.nickname,this.intakeFormGroup.value.intakeValue,this.intakeFormGroup.value.titleIntake,this.intakeFormGroup.value.protein,this.intakeFormGroup.value.carbohydrates,this.intakeFormGroup.value.fat),this.setItemsForSelectedUser(),this._snackbar.openFromComponent(oD,{duration:5e3,data:{text:"\u{1f374} "+this.intakeFormGroup.value.titleIntake+" ajout\xe9 --\x3e "+this.intakeFormGroup.value.intakeValue+" cal. ajout\xe9s au total journalier."}}),this.resetAllForm())}ajouterObjectif(){this.targetIntakeSetupFormGroup.value.targetIntake&&(this.serviceIntake.addTargetIntake(this.targetIntakeSetupFormGroup.value.targetIntake,this.targetIntakeSetupFormGroup.value.proteinTarget,this.targetIntakeSetupFormGroup.value.carbohydratesTarget,this.targetIntakeSetupFormGroup.value.fatTarget),this.setItemsForSelectedUser(),this.resetAllForm())}ajouterAliment(){var e,r,i,o,c,h,p,_;this.foodSelectionFormGroup.value&&(this.serviceIntake.addIntakes(null===(e=this.selectedFood)||void 0===e?void 0:e.foodName,this.weightChangeFactor(null===(r=this.selectedFood)||void 0===r?void 0:r.calories),null===(i=this.selectedFood)||void 0===i?void 0:i.foodName,this.weightChangeFactor(null===(o=this.selectedFood)||void 0===o?void 0:o.protein),this.weightChangeFactor(null===(c=this.selectedFood)||void 0===c?void 0:c.carbohydrates),this.weightChangeFactor(null===(h=this.selectedFood)||void 0===h?void 0:h.fat)),this.setItemsForSelectedUser(),this._snackbar.openFromComponent(oD,{duration:5e3,data:{text:"\u{1f374} "+(null===(p=this.selectedFood)||void 0===p?void 0:p.foodName)+" ajout\xe9 --\x3e "+(null===(_=this.selectedFood)||void 0===_?void 0:_.calories)+" cal. ajout\xe9s au total journalier."}}),this.resetAllForm())}weightChangeFactor(e){if(e)return parseFloat((e/this.selectedFood.weight*this.foodSelectionFormGroup.value.weight).toFixed(2))}getTotalCurrentIntakesFromSelectedUser(){let e=0;return this.selectedUserIntakes.forEach(r=>{e+=r.intakeValue}),e}getSelectedPerson(){return JSON.parse(localStorage.getItem("user"))||{}}getTargetIntakeOfSelectedUser(){var e;return(null===(e=this.selectedPerson)||void 0===e?void 0:e.targetIntake)?this.selectedPerson.targetIntake:0}isUserLoggedAndWithoutTargetIntake(){return!!this.selectedPerson&&(void 0===this.selectedPerson.targetIntake||this.selectedPerson.targetIntake<=0||(this.selectedPerson.targetIntake>0&&(this.maxIntakeForTheDay=this.selectedPerson.targetIntake),!1))}getSmileyAnimation(){return this.sportiveSmileyAnimation[this.indexRandomIcon]}getCurrentSmiley(){return this.getSmileyAnimation()}switchIntakeMacrosDisplay(){this.isInIntakeView=!this.isInIntakeView}setIntakesFromSelectedUser(){this.serviceIntake.getAllIntakesDocuments().subscribe(e=>{this.selectedUserIntakes=[],e.forEach(r=>{r.dateFormatted=r.date.toDate(),r.dateFormatted.getDate()===(new Date).getDate()&&r.dateFormatted.getMonth()===(new Date).getMonth()&&r.dateFormatted.getFullYear()===(new Date).getFullYear()&&this.selectedUserIntakes.push(r)})})}setFoodFromSelectedUser(){this.serviceIntake.getAllFoodDocuments().subscribe(e=>{for(console.log(e);this.foods.length>0;)this.foods.pop();e.forEach(r=>{this.foods.push({viewValue:r.foodName,food:new DP(r.foodName,r.calories,r.protein,r.fat,r.carbohydrates,r.weight,r.ownerUid)})})})}setItemsForSelectedUser(){this.items.forEach(e=>{e.nickname===this.selectedPerson&&(this.itemForSelectedUser=e)}),this.setIntakesFromSelectedUser()}goToScanner(){this.router.navigate(["scanner"])}ngAfterViewInit(){this.spinnerDiameter=document.getElementById("intakeSection").clientWidth}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(SR),s.Y36(ww),s.Y36(SP),s.Y36(ys),s.Y36(aD))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],decls:4,vars:2,consts:[["mat-mini-fab","",1,"addAlimentButton",3,"click"],[4,"ngIf"],[1,"selectionButtonContainer"],["id","intakeSection",1,"formIntake"],["intakeSection",""],[3,"formGroup"],["style","color: red; margin-top: 15px",4,"ngIf"],[1,"spinnerContainer"],[1,"progressSpinnerBackground",3,"color","diameter","strokeWidth","mode","value"],[1,"progressSpinner",3,"color","diameter","strokeWidth","mode","value"],["class","textInSpinner",3,"ngStyle","click",4,"ngIf"],["class","textInSpinnerNotSelected",3,"ngStyle",4,"ngIf"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","aria-label","Scanner code barre",3,"click"],["appearance","standard"],["matInput","","type","text","formControlName","titleIntake"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","number","formControlName","intakeValue"],["matInput","","type","number","formControlName","protein"],["matInput","","type","number","formControlName","carbohydrates"],["matInput","","type","number","formControlName","fat"],["mat-raised-button","","aria-label","Ajouter cet apport",3,"click"],[3,"currentIntakes"],[2,"color","red","margin-top","15px"],[1,"textInSpinner",3,"ngStyle","click"],[1,"textInSpinnerNotSelected",3,"ngStyle"],[3,"value"],["matInput","","type","number","formControlName","weight"],["mat-raised-button","","aria-label","Ajouter cet aliment",3,"click"],[1,"setTargetIntakeContainer"],[2,"font-size","20px"],[1,"textVide",2,"padding","20px 0 50px 0"],[2,"font-size","15px"],["matInput","","type","number","formControlName","targetIntake"],["matInput","","type","number","formControlName","proteinTarget"],["matInput","","type","number","formControlName","carbohydratesTarget"],["matInput","","type","number","formControlName","fatTarget"],["mat-raised-button","","aria-label","Confirmer cet objectif (YOLO)",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return r.openPopupAddFood()}),s._uU(1,"+"),s.qZA(),s.YNc(2,fJ,75,22,"div",1),s.YNc(3,pJ,24,1,"div",1)),2&e&&(s.xp6(2),s.Q6J("ngIf",!r.isUserLoggedAndWithoutTargetIntake()),s.xp6(1),s.Q6J("ngIf",r.isUserLoggedAndWithoutTargetIntake()))},directives:[Dh,qr,fS,sS,ld,cd,oO,Wb,zQ,Om,Wi,aO,H_,iS,Gb,J8,Bb,pS,sJ,ti],styles:["@keyframes circleAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.formIntake[_ngcontent-%COMP%]{margin:auto;width:min-content;text-align:center}.formIntake[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.spinnerContainer[_ngcontent-%COMP%]{margin:35px 0 10px}.textMacroInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center;margin-top:-26px}.textInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center}.textInSpinnerNotSelected[_ngcontent-%COMP%]{margin:auto;width:80%;font-size:50px;text-align:center}.topButton[_ngcontent-%COMP%]{margin:10px}.progressSpinnerBackground[_ngcontent-%COMP%]{animation:circleAnimation linear 30s infinite;position:absolute}.selectionButtonContainer[_ngcontent-%COMP%]{margin:15px 0 2px;text-align:center;font-size:20px}  .spinnerContainer>.progressSpinnerBackground>svg>.mat-progress-spinner.mat-warn circle,   .mat-spinner.mat-warn circle{stroke:#0000004d;stroke-dasharray:17.9!important;overflow-x:hidden}.setTargetIntakeContainer[_ngcontent-%COMP%]{text-align:center;margin:auto;width:80vw}.setTargetIntakeContainer[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){padding:10px 0}.textVide[_ngcontent-%COMP%]{font-size:40px}.addAlimentButton[_ngcontent-%COMP%]{position:absolute;right:20px;margin-top:-5px}"]}),n})();const gJ=["*",[["mat-card-footer"]]],mJ=["*","mat-card-footer"],_J=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],yJ=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let vJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),bJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),wJ=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(e,r){2&e&&s.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),CJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),EJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),IJ=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Vo,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,r){2&e&&s.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:mJ,decls:2,vars:0,template:function(e,r){1&e&&(s.F$t(gJ),s.Hsn(0),s.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),TJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:yJ,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,r){1&e&&(s.F$t(_J),s.Hsn(0),s.TgZ(1,"div",0),s.Hsn(2,1),s.qZA(),s.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),SJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[xr],xr]}),n})();function DJ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div"),s._uU(1," Il semblerait que vous ne soyez dans aucune \xe9quipe. "),s._UZ(2,"br"),s._uU(3," Vous pouvez cr\xe9er la votre si vous le souhaitez "),s.TgZ(4,"form",2),s.TgZ(5,"mat-form-field",3),s.TgZ(6,"mat-label"),s._uU(7,"Nom de l'\xe9quipe"),s.qZA(),s._UZ(8,"input",4),s.qZA(),s.TgZ(9,"button",5),s.NdJ("click",function(){return s.CHM(e),s.oxw().ajouterEquipe()}),s._uU(10," Cr\xe9er l'\xe9quipe "),s.qZA(),s.qZA(),s.qZA()}if(2&n){const e=s.oxw();s.xp6(4),s.Q6J("formGroup",e.createTeamFormGroup)}}const AJ=function(n){return[n]};function xJ(n,t){if(1&n&&(s.TgZ(0,"div"),s.TgZ(1,"mat-card"),s.TgZ(2,"mat-card-header"),s._UZ(3,"div",8),s.TgZ(4,"mat-card-title"),s._uU(5),s.qZA(),s.TgZ(6,"mat-card-subtitle"),s._uU(7,":("),s.qZA(),s.qZA(),s._UZ(8,"img",9),s.TgZ(9,"mat-card-actions"),s.TgZ(10,"button",10),s._uU(11,"Membres"),s.qZA(),s.TgZ(12,"button",11),s._uU(13,"Modifier"),s.qZA(),s.qZA(),s.qZA(),s._UZ(14,"div",12),s.qZA()),2&n){const e=t.$implicit;s.xp6(5),s.Oqu(e.teamName),s.xp6(5),s.Q6J("routerLink",s.VKq(4,AJ,e.eventId))("color","primary"),s.xp6(2),s.Q6J("disabled",!0)}}function MJ(n,t){if(1&n&&(s.TgZ(0,"div"),s.TgZ(1,"h2"),s._uU(2,"Vos \xe9quipes"),s.qZA(),s.TgZ(3,"div",6),s.TgZ(4,"i"),s._uU(5,"C'est toujours mieux d'avancer ensemble"),s.qZA(),s.qZA(),s.YNc(6,xJ,15,6,"div",7),s.qZA()),2&n){const e=s.oxw();s.xp6(6),s.Q6J("ngForOf",e.teams)}}let kJ=(()=>{class n{constructor(e){this.serviceIntakes=e,this.userTeams=void 0,this.teams=[],this.createTeamFormGroup=new ou({teamName:new so("",hs.minLength(1))})}ngOnInit(){this.getTeamsFromConnectedUser()}resetAllForms(){this.createTeamFormGroup.reset({teamName:""})}ajouterEquipe(){this.createTeamFormGroup.invalid||(this.serviceIntakes.addNewTeam(this.createTeamFormGroup.value.teamName),this.getTeamsFromConnectedUser(),this.resetAllForms())}getTeamsFromConnectedUser(){var e;null===(e=this.serviceIntakes.getAllTeamsForUser())||void 0===e||e.subscribe(r=>{r.forEach(i=>{var o;null===(o=this.serviceIntakes.getTeamFromOwnerId(i.ownerUid))||void 0===o||o.subscribe(c=>{this.teams=c})}),this.userTeams=r})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ww))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"teamTrackerContainer"],[4,"ngIf"],[3,"formGroup"],["appearance","standard"],["matInput","","type","text","formControlName","teamName"],["mat-raised-button","","aria-label","Cr\xe9er l'\xe9quipe",3,"click"],[1,"subtitleTeam"],[4,"ngFor","ngForOf"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","src","https://www.signupgenius.com/images/new-landing/sports/get-started-background.jpg","alt","Happy smiling team"],["mat-raised-button","",3,"routerLink","color"],["mat-button","",3,"disabled"],[1,"card-separator"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.YNc(1,DJ,11,1,"div",1),s.YNc(2,MJ,7,1,"div",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",void 0!==r.userTeams&&0===r.userTeams.length),s.xp6(1),s.Q6J("ngIf",r.teams.length>0))},directives:[qr,fS,sS,ld,oO,Wb,aO,H_,iS,Gb,Dh,Wi,IJ,TJ,EJ,vJ,bJ,CJ,wJ,pf],styles:[".teamTrackerContainer[_ngcontent-%COMP%]{margin:auto}.card-separator[_ngcontent-%COMP%]{width:100%;height:30px}h2[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}mat-card[_ngcontent-%COMP%]{width:80vw;margin:auto}.subtitleTeam[_ngcontent-%COMP%]{width:100vw;text-align:center;margin-bottom:10px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://i1.sndcdn.com/artworks-BUOQ4gYsZfCCcg4I-YocETQ-t500x500.jpg);background-size:cover}"]}),n})();const RJ=["primaryValueBar"],OJ=qu(class{constructor(n){this._elementRef=n}},"primary"),PJ=new s.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const n=(0,s.f3M)(Y),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),FJ=new s.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let LJ=0,BJ=(()=>{class n extends OJ{constructor(e,r,i,o,c,h){super(e),this._ngZone=r,this._animationMode=i,this._changeDetectorRef=h,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new s.vpe,this._animationEndSubscription=ns.w0.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+LJ++;const p=o?o.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${p}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===i,c&&(c.color&&(this.color=this.defaultColor=c.color),this.mode=c.mode||this.mode)}get value(){return this._value}set value(e){var r;this._value=Tz(Vi(e)||0),null==(r=this._changeDetectorRef)||r.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(e){var r;this._bufferValue=Tz(e||0),null==(r=this._changeDetectorRef)||r.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=ml(e,"transitionend").pipe(kn(r=>r.target===e)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Vo,8),s.Y36(PJ,8),s.Y36(FJ,8),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(e,r){if(1&e&&s.Gf(RJ,5),2&e){let i;s.iGM(i=s.CRH())&&(r._primaryValueBar=i.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,r){2&e&&(s.uIk("aria-valuenow","indeterminate"===r.mode||"query"===r.mode?null:r.value)("mode",r.mode),s.ekj("_mat-animation-noopable",r._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[s.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.O4$(),s.TgZ(1,"svg",1),s.TgZ(2,"defs"),s.TgZ(3,"pattern",2),s._UZ(4,"circle",3),s.qZA(),s.qZA(),s._UZ(5,"rect",4),s.qZA(),s.kcU(),s._UZ(6,"div",5),s._UZ(7,"div",6,7),s._UZ(9,"div",8),s.qZA()),2&e&&(s.xp6(3),s.Q6J("id",r.progressbarId),s.xp6(2),s.uIk("fill",r._rectangleFillValue),s.xp6(1),s.Q6J("ngStyle",r._bufferTransform()),s.xp6(1),s.Q6J("ngStyle",r._primaryTransform()))},directives:[ti],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),n})();function Tz(n,t=0,e=100){return Math.max(t,Math.min(e,n))}let VJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[be,xr],xr]}),n})();function UJ(n,t){if(1&n&&(s.TgZ(0,"div"),s._UZ(1,"mat-progress-bar",6),s.qZA()),2&n){const e=s.oxw().$implicit,r=s.oxw();s.xp6(1),s.Q6J("value",r.getValueForUser(e))}}function jJ(n,t){if(1&n&&(s.TgZ(0,"div"),s._UZ(1,"mat-progress-bar",7),s.qZA()),2&n){const e=s.oxw().$implicit,r=s.oxw();s.xp6(1),s.Q6J("value",r.getValueForUser(e))("color","warn")}}function HJ(n,t){if(1&n&&(s.TgZ(0,"div"),s.TgZ(1,"h3"),s._uU(2),s.qZA(),s.YNc(3,UJ,2,1,"div",4),s.YNc(4,jJ,2,2,"div",4),s.TgZ(5,"div",5),s._uU(6),s.qZA(),s.qZA()),2&n){const e=t.$implicit,r=s.oxw();s.xp6(2),s.Oqu(e.displayName),s.xp6(1),s.Q6J("ngIf",r.getValueForUser(e)<=100),s.xp6(1),s.Q6J("ngIf",r.getValueForUser(e)>100),s.xp6(2),s.AsE(" ",r.getTotalCurrentIntakesFromSelectedUser(e.intakes)," / ",e.targetIntake," ")}}let zJ=(()=>{class n{constructor(e,r){this.serviceIntake=e,this.route=r,this.teamId=void 0,this.teamMembers=[]}ngOnInit(){this.teamId=this.route.snapshot.paramMap.get("id"),this.serviceIntake.getTeamMembersWithTeamId(this.teamId).subscribe(e=>{e.forEach(r=>{this.serviceIntake.getUserByUid(r.memberUid).subscribe(i=>{const o=i[0];this.serviceIntake.getAllIntakesDocumentsByUid(r.memberUid).subscribe(c=>{const h=[];c.forEach(_=>{_.dateFormatted=_.date.toDate(),_.dateFormatted.getDate()===(new Date).getDate()&&_.dateFormatted.getMonth()===(new Date).getMonth()&&_.dateFormatted.getFullYear()===(new Date).getFullYear()&&h.push(_)});let p=-1;for(let _=0;_<this.teamMembers.length;_++)this.teamMembers[_].uid===o.uid&&(p=_);-1!==p?this.teamMembers[p]=Object.assign(Object.assign({},o),{intakes:h}):this.teamMembers.push(Object.assign(Object.assign({},o),{intakes:h}))})})})})}getTotalCurrentIntakesFromSelectedUser(e){if(e){let r=0;return e.forEach(i=>{r+=i.intakeValue}),r}return 0}getValueForUser(e){return this.getTotalCurrentIntakesFromSelectedUser(e.intakes)/e.targetIntake*100}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ww),s.Y36(Oc))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-team-tracker-progress"]],decls:10,vars:2,consts:[[1,"goBackArrow"],["mat-icon-button","","aria-label","Menu",1,"buttonMenu",3,"routerLink"],[1,"membersContainer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"membersContainer","statusBarNumber"],["mode","determinate",3,"value"],["mode","determinate",3,"value","color"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"button",1),s.TgZ(2,"mat-icon"),s._uU(3," keyboard_arrow_left "),s.qZA(),s.TgZ(4,"mat-icon"),s._uU(5," keyboard_arrow_left "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",2),s.TgZ(7,"h2"),s._uU(8,"Progression de l'\xe9quipe"),s.qZA(),s.YNc(9,HJ,7,5,"div",3),s.qZA()),2&e&&(s.xp6(1),s.Q6J("routerLink","/teamTracking"),s.xp6(8),s.Q6J("ngForOf",r.teamMembers))},directives:[Dh,pf,Bb,Wi,qr,BJ],styles:[".goBackArrow[_ngcontent-%COMP%]{position:absolute}mat-icon[_ngcontent-%COMP%]{width:10px}.membersContainer[_ngcontent-%COMP%]{width:95vw;margin:auto}h2[_ngcontent-%COMP%]{text-align:center}h3[_ngcontent-%COMP%]{margin:0}.statusBarNumber[_ngcontent-%COMP%]{text-align:right}"]}),n})(),GJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[be,Od.forChild([{path:"tracker",component:Iz,canActivate:[KT]},{path:"teamTracking",component:kJ,canActivate:[KT]},{path:"teamTracking/:id",component:zJ,canActivate:[KT]}]),x3,_S,VR,tJ,I8,iO,Fl,_U,Rv,kR,A3,VR,SJ,VJ,GQ]]}),n})(),$J=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}connectWithGoogle(){this.authService.signInWithGoogle()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(YT))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-authentication"]],decls:2,vars:0,consts:[["mat-button","",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"a",0),s.NdJ("click",function(){return r.connectWithGoogle()}),s._uU(1,"Connect with GOOGLE"),s.qZA())},directives:[rU],styles:[""]}),n})();var WJ=R(4762),qJ=R(2501),vc=R.n(qJ),ZJ=R(5477),YJ=R.n(ZJ);const KJ=["BarcodeScanner"],QJ={inputStream:{name:"Live",type:"LiveStream",target:null,constraints:{width:{min:640},height:{min:480},aspectRatio:{min:1,max:2},facingMode:"environment"},singleChannel:!1},locator:{patchSize:"medium",halfSample:!0},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]}},JJ=["code_128","code_39","code_39_vin","ean","ean_extended","ean_8","upc","upc_e","codabar","i2of5","2of5","code_93"];function Sz(n){if(!JJ.some(t=>t===n))throw new Error(`This barcode type '${n}' is not valid.`)}function Dz(n){return`${n}_reader`}let Az=(()=>{class n{constructor(){this.maxWidth="100%",this._valueChanges=new Wt.x,this.valueChanges=new s.vpe,this.started=new s.vpe,this._started=!1,this._destroyed=new Wt.x,this._valueChanges.pipe(gr(this._destroyed),kn(e=>{const r=e.codeResult.decodedCodes.filter(o=>void 0!==o.error).map(o=>o.error),i=this._getMedian(r);return!this.errorFilter||!(this.errorFilter.median&&i>this.errorFilter.median||this.errorFilter.threshold&&r.some(o=>o>this.errorFilter.threshold))})).subscribe(e=>{const r=vc().canvas.ctx.overlay;vc().ImageDebug.drawPath(e.line,{x:"x",y:"y"},r,{color:"red",lineWidth:3}),this.valueChanges.next(e)})}get _maxWidth(){return this.maxWidth?`${this.maxWidth}`:"auto"}get _maxHeight(){return this.maxHeight?`${this.maxHeight}`:"auto"}get isStarted(){return this._started}ngOnDestroy(){this.stop(),this._destroyed.next(!0),this._destroyed.complete()}ngOnChanges(){this.restart()}_init(){return new Promise((e,r)=>{vc().onProcessed(i=>this.onProcessed(i)),vc().onDetected(i=>this.onDetected(i)),this.configQuagga=YJ()({},this.config,QJ),this.configQuagga.inputStream.target=this.barcodeScanner.nativeElement,this.type&&(this.configQuagga.decoder.readers=function(n){return"string"==typeof n?(Sz(n),[Dz(n)]):n.map(t=>(Sz(t),Dz(t)))}(this.type)),this.deviceId&&(this.configQuagga.inputStream.constraints.deviceId=this.deviceId),vc().init(this.configQuagga,i=>{if(i)return console.log(i),r(i);e()})})}_getMedian(e){e.sort((i,o)=>i-o);const r=Math.floor(e.length/2);return e.length%2==1?e[r]:(e[r-1]+e[r])/2}start(){return(0,WJ.mG)(this,void 0,void 0,function*(){this._started||(yield this._init(),vc().start(),this._started=!0,this.started.next(!0))})}stop(){this._started&&(vc().stop(),this._started=!1,this.started.next(!1))}restart(){this._started&&(this.stop(),this.start())}onProcessed(e){const r=vc().canvas.ctx.overlay,i=vc().canvas.dom.overlay;e&&(e.boxes&&(r.clearRect(0,0,parseInt(i.getAttribute("width"),10),parseInt(i.getAttribute("height"),10)),e.boxes.filter(o=>o!==e.box).forEach(o=>{vc().ImageDebug.drawPath(o,{x:0,y:1},r,{color:"green",lineWidth:2})})),e.box&&vc().ImageDebug.drawPath(e.box,{x:0,y:1},r,{color:"#00F",lineWidth:2}))}onDetected(e){this._valueChanges.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["barcode-scanner-livestream"]],viewQuery:function(e,r){if(1&e&&s.Gf(KJ,5),2&e){let i;s.iGM(i=s.CRH())&&(r.barcodeScanner=i.first)}},inputs:{type:"type",deviceId:"deviceId",maxWidth:"maxWidth",maxHeight:"maxHeight",config:"config",errorFilter:"errorFilter"},outputs:{valueChanges:"valueChanges",started:"started"},features:[s.TTD],decls:4,vars:13,consts:[[1,"scanner",3,"hidden"],["BarcodeScanner",""],[1,"drawingBuffer"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0,1),s._UZ(2,"video"),s._UZ(3,"canvas",2),s.qZA()),2&e&&(s.Udp("max-height",r._maxHeight)("max-width",r._maxWidth),s.Q6J("hidden",!r.isStarted),s.xp6(2),s.Udp("max-height",r._maxHeight)("max-width",r._maxWidth),s.xp6(1),s.Udp("max-height",r._maxHeight)("max-width",r._maxWidth))},styles:[".scanner{position:relative}.scanner video,.scanner canvas{width:100%;height:100%}.scanner canvas.drawingBuffer{position:absolute;left:0;top:0}\n"],encapsulation:2}),n})(),eX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[be]]}),n})();const tX=function(){return["code_128","code_39","ean_8","ean"]},nX=function(){return{median:.08,threshold:.1}},rX=[{path:"authentication",component:$J},{path:"scanner",component:(()=>{class n{constructor(e){this._snackBar=e,this.barcodeValue=void 0}ngOnInit(){}ngAfterViewInit(){var e;null===(e=this.barcodeScanner)||void 0===e||e.start()}onValueChanges(e){this.barcodeValue=e.codeResult.code,this._snackBar.openFromComponent(oD,{duration:5e3,data:{text:"Code : "+this.barcodeValue}})}onStarted(e){console.log(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(SP))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,r){if(1&e&&s.Gf(Az,5),2&e){let i;s.iGM(i=s.CRH())&&(r.barcodeScanner=i.first)}},decls:3,vars:6,consts:[[3,"type","errorFilter","valueChanges","started"],[3,"hidden"]],template:function(e,r){1&e&&(s.TgZ(0,"barcode-scanner-livestream",0),s.NdJ("valueChanges",function(o){return r.onValueChanges(o)})("started",function(){return r.onStarted}),s.qZA(),s.TgZ(1,"div",1),s._uU(2),s.qZA()),2&e&&(s.Q6J("type",s.DdM(4,tX))("errorFilter",s.DdM(5,nX)),s.xp6(1),s.Q6J("hidden",!r.barcodeValue),s.xp6(1),s.hij(" ",r.barcodeValue,"\n"))},directives:[Az],styles:[""]}),n})()},{path:"",redirectTo:"tracker",pathMatch:"full"},{path:"**",component:Iz}];let iX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n,bootstrap:[O5]}),n.\u0275inj=s.cJS({providers:[YT,aD],imports:[[Fl,_U,gf,Rv,A3,VR,kR,I5,x3,Zx.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),Os.hO.initializeApp({apiKey:"AIzaSyDwY0ustgrbdUrkt0FXwseq89vcH_zirJo",authDomain:"personnaltrack.firebaseapp.com",projectId:"personnaltrack",storageBucket:"personnaltrack.appspot.com",messagingSenderId:"588509586658",appId:"1:588509586658:web:334cb1ed45319ff2592abb",measurementId:"G-G9PZNFDF99"}),I9,G4,Xd,Od.forRoot(rX),S9,GJ,uz,eX,_Q,iO]]}),n})();(0,s.G48)(),Cc().bootstrapModule(iX).catch(n=>console.error(n))},9162:(St,M,R)=>{"use strict";function re(q,Q,ne,ie){return new(ne||(ne=Promise))(function(W,ce){function Ve(it){try{Xe(ie.next(it))}catch(dt){ce(dt)}}function lt(it){try{Xe(ie.throw(it))}catch(dt){ce(dt)}}function Xe(it){it.done?W(it.value):function(W){return W instanceof ne?W:new ne(function(ce){ce(W)})}(it.value).then(Ve,lt)}Xe((ie=ie.apply(q,Q||[])).next())})}function Ie(q){return this instanceof Ie?(this.v=q,this):new Ie(q)}function me(q,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,ie=ne.apply(q,Q||[]),W=[];return Ce={},ce("next"),ce("throw"),ce("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce;function ce(qt){ie[qt]&&(Ce[qt]=function(en){return new Promise(function(vn,Ot){W.push([qt,en,vn,Ot])>1||Ve(qt,en)})})}function Ve(qt,en){try{!function(qt){qt.value instanceof Ie?Promise.resolve(qt.value.v).then(Xe,it):dt(W[0][2],qt)}(ie[qt](en))}catch(vn){dt(W[0][3],vn)}}function Xe(qt){Ve("next",qt)}function it(qt){Ve("throw",qt)}function dt(qt,en){qt(en),W.shift(),W.length&&Ve(W[0][0],W[0][1])}}function Se(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=q[Symbol.asyncIterator];return Q?Q.call(q):(q=function(q){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&q[Q],ie=0;if(ne)return ne.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ie>=q.length&&(q=void 0),{value:q&&q[ie++],done:!q}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ne={},ie("next"),ie("throw"),ie("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ie(W){ne[W]=q[W]&&function(ce){return new Promise(function(Ve,lt){!function(W,ce,Ve,lt){Promise.resolve(lt).then(function(Xe){W({value:Xe,done:Ve})},ce)}(Ve,lt,(ce=q[W](ce)).done,ce.value)})}}}R.d(M,{mG:()=>re,qq:()=>Ie,FC:()=>me,KL:()=>Se})},4762:(St,M,R)=>{"use strict";function k(Q,ne){var ie={};for(var Ce in Q)Object.prototype.hasOwnProperty.call(Q,Ce)&&ne.indexOf(Ce)<0&&(ie[Ce]=Q[Ce]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var W=0;for(Ce=Object.getOwnPropertySymbols(Q);W<Ce.length;W++)ne.indexOf(Ce[W])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ce[W])&&(ie[Ce[W]]=Q[Ce[W]])}return ie}function re(Q,ne,ie,Ce){return new(ie||(ie=Promise))(function(ce,Ve){function lt(dt){try{it(Ce.next(dt))}catch(qt){Ve(qt)}}function Xe(dt){try{it(Ce.throw(dt))}catch(qt){Ve(qt)}}function it(dt){dt.done?ce(dt.value):function(ce){return ce instanceof ie?ce:new ie(function(Ve){Ve(ce)})}(dt.value).then(lt,Xe)}it((Ce=Ce.apply(Q,ne||[])).next())})}R.d(M,{_T:()=>k,mG:()=>re})},3668:(St,M,R)=>{"use strict";R.d(M,{deG:()=>Ka,tb:()=>a0,AFp:()=>Ns,ip1:()=>sh,CZH:()=>Ku,hGG:()=>O0,z2F:()=>Qu,sBO:()=>v0,Sil:()=>Ym,_Vd:()=>Jd,EJc:()=>EI,SBq:()=>ip,qLn:()=>df,vpe:()=>uc,tBr:()=>si,XFs:()=>tn,OlP:()=>jr,zs3:()=>Ra,ZZ4:()=>gp,aQg:()=>Ju,soG:()=>oh,YKP:()=>Fm,h0i:()=>eh,PXZ:()=>DI,R0b:()=>to,FiY:()=>pr,Lbi:()=>Zm,g9A:()=>o0,n_E:()=>op,Qsj:()=>Bx,FYo:()=>jv,JOm:()=>rl,q3G:()=>oi,tp0:()=>As,Rgc:()=>Zu,dDg:()=>SI,q4F:()=>Hv,GfV:()=>ml,s_b:()=>Hm,ifc:()=>Ft,eFA:()=>xI,G48:()=>RI,Gpc:()=>X,f3M:()=>bt,X6Q:()=>kM,_c5:()=>mp,VLi:()=>AM,c2e:()=>l0,zSh:()=>gC,wAp:()=>gn,vHH:()=>je,EiD:()=>Md,mCW:()=>tc,qzn:()=>Pc,JVY:()=>ku,pB0:()=>my,eBb:()=>wg,L6k:()=>Ru,LAX:()=>rf,cg1:()=>Kf,kL8:()=>Qf,yhl:()=>ec,dqk:()=>Mn,sIi:()=>Jg,CqO:()=>WC,QGY:()=>lc,F4k:()=>$d,RDi:()=>ln,AaK:()=>re,z3N:()=>Aa,qOj:()=>Qy,TTD:()=>oe,_Bn:()=>KE,xp6:()=>Pd,uIk:()=>Xy,Gre:()=>vm,ekj:()=>Wf,Suo:()=>sM,Xpm:()=>fn,lG2:()=>Tt,Yz7:()=>Ot,cJS:()=>_n,oAB:()=>Be,Yjl:()=>sn,Y36:()=>$c,_UZ:()=>GC,GkF:()=>pv,BQk:()=>lm,ynx:()=>fl,qZA:()=>Gd,TgZ:()=>Bf,EpF:()=>Na,n5z:()=>$l,Ikx:()=>Em,LFG:()=>ke,$8M:()=>Xn,$Z:()=>Ff,NdJ:()=>Uf,CRH:()=>oM,kcU:()=>oy,O4$:()=>yu,oxw:()=>ZC,Hsn:()=>vo,F$t:()=>gv,Q6J:()=>am,DdM:()=>Zv,VKq:()=>Yv,iGM:()=>rM,MAs:()=>Pa,CHM:()=>ko,LSH:()=>Dg,Udp:()=>Zd,WFA:()=>cm,d8E:()=>xv,YNc:()=>nv,_uU:()=>uE,Oqu:()=>_m,hij:()=>Zf,AsE:()=>Cv,lnq:()=>Ev,Gf:()=>iM});var s=R(273),I=R(7908),b=R(8305),k=R(3719),O=R(3174);function U(a){for(let l in a)if(a[l]===U)return l;throw Error("Could not find renamed property on target object.")}function Y(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function re(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(re).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function he(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const te=U({__forward_ref__:U});function X(a){return a.__forward_ref__=X,a.toString=function(){return re(this())},a}function we(a){return Je(a)?a():a}function Je(a){return"function"==typeof a&&a.hasOwnProperty(te)&&a.__forward_ref__===X}class je extends Error{constructor(l,u){super(function(a,l){return`${a?`NG0${a}: `:""}${l}`}(l,u)),this.code=l}}function me(a){return"string"==typeof a?a:null==a?"":String(a)}function J(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():me(a)}function Ne(a,l){const u=l?` in ${l}`:"";throw new je("201",`No provider for ${J(a)} found${u}`)}function it(a,l){null==a&&function(a,l,u,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function Ot(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function _n(a){return{providers:a.providers||[],imports:a.imports||[]}}function ur(a){return sr(a,ri)||sr(a,Di)}function sr(a,l){return a.hasOwnProperty(l)?a[l]:null}function Si(a){return a&&(a.hasOwnProperty(Cr)||a.hasOwnProperty(yi))?a[Cr]:null}const ri=U({\u0275prov:U}),Cr=U({\u0275inj:U}),Di=U({ngInjectableDef:U}),yi=U({ngInjectorDef:U});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let Fn;function Jn(a){const l=Fn;return Fn=a,l}function zn(a,l,u){const d=ur(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&tn.Optional?null:void 0!==l?l:void Ne(re(a),"Injector")}function ar(a){return{toString:a}.toString()}var Ln=(()=>((Ln=Ln||{})[Ln.OnPush=0]="OnPush",Ln[Ln.Default=1]="Default",Ln))(),Ft=(()=>{return(a=Ft||(Ft={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Ft;var a})();const Lt="undefined"!=typeof globalThis&&globalThis,li="undefined"!=typeof window&&window,ci="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Mn=Lt||"undefined"!=typeof global&&global||li||ci,Re={},Ae=[],Le=U({\u0275cmp:U}),st=U({\u0275dir:U}),xe=U({\u0275pipe:U}),$e=U({\u0275mod:U}),ht=U({\u0275fac:U}),wt=U({__NG_ELEMENT_ID__:U});let Xt=0;function fn(a){return ar(()=>{const u={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Ln.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||Ae,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Ft.Emulated,id:"c",styles:a.styles||Ae,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,g=a.features,v=a.pipes;return d.id+=Xt++,d.inputs=ct(a.inputs,u),d.outputs=ct(a.outputs),g&&g.forEach(C=>C(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(on):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(Tr):null,d})}function on(a){return Zt(a)||function(a){return a[st]||null}(a)}function Tr(a){return function(a){return a[xe]||null}(a)}const Ye={};function Be(a){return ar(()=>{const l={type:a.type,bootstrap:a.bootstrap||Ae,declarations:a.declarations||Ae,imports:a.imports||Ae,exports:a.exports||Ae,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Ye[a.id]=a.type),l})}function ct(a,l){if(null==a)return Re;const u={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=d,l&&(l[f]=g)}return u}const Tt=fn;function sn(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function Zt(a){return a[Le]||null}function $n(a,l){const u=a[$e]||null;if(!u&&!0===l)throw new Error(`Type ${re(a)} does not have '\u0275mod' property.`);return u}function ei(a){return Array.isArray(a)&&"object"==typeof a[1]}function ui(a){return Array.isArray(a)&&!0===a[1]}function Ws(a){return 0!=(8&a.flags)}function qi(a){return 2==(2&a.flags)}function qs(a){return 1==(1&a.flags)}function ti(a){return null!==a.template}function Do(a){return 0!=(512&a[2])}function L(a,l){return a.hasOwnProperty(ht)?a[ht]:null}class V{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function oe(){return ve}function ve(a){return a.type.prototype.ngOnChanges&&(a.setInput=be),de}function de(){const a=j(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===Re)a.previous=l;else for(let d in l)u[d]=l[d];a.current=null,this.ngOnChanges(l)}}function be(a,l,u,d){const f=j(a)||function(a,l){return a[He]=l}(a,{previous:Re,current:null}),g=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[u],D=v[C];g[C]=new V(D&&D.currentValue,l,v===Re),a[d]=l}oe.ngInherit=!0;const He="__ngSimpleChanges__";function j(a){return a[He]||null}const Pt="http://www.w3.org/2000/svg";let Ut;function ln(a){Ut=a}function Pn(a){return!!a.listen}const xo={createRenderer:(a,l)=>void 0!==Ut?Ut:"undefined"!=typeof document?document:void 0};function Sr(a){for(;Array.isArray(a);)a=a[0];return a}function _a(a,l){return Sr(l[a])}function Mi(a,l){return Sr(l[a.index])}function Qo(a,l){return a.data[l]}function or(a,l){const u=l[a];return ei(u)?u:u[0]}function Sl(a){return 4==(4&a[2])}function ya(a){return 128==(128&a[2])}function Zi(a,l){return null==l?null:a[l]}function wc(a){a[18]=0}function Jo(a,l){a[5]+=l;let u=a,d=a[3];for(;null!==d&&(1===l&&1===u[5]||-1===l&&0===u[5]);)d[5]+=l,u=d,d=d[3]}const cn={lFrame:Ll(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fu(){return cn.bindingsEnabled}function _t(){return cn.lFrame.lView}function Qn(){return cn.lFrame.tView}function ko(a){return cn.lFrame.contextLView=a,a[8]}function ni(){let a=kl();for(;null!==a&&64===a.type;)a=a.parent;return a}function kl(){return cn.lFrame.currentTNode}function Fi(a,l){const u=cn.lFrame;u.currentTNode=a,u.isParent=l}function pu(){return cn.lFrame.isParent}function va(){cn.lFrame.isParent=!1}function za(){return cn.isInCheckNoChangesMode}function Rl(a){cn.isInCheckNoChangesMode=a}function Li(){const a=cn.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Zs(){return cn.lFrame.bindingIndex}function ta(){return cn.lFrame.bindingIndex++}function uo(a){const l=cn.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Nl(a,l){const u=cn.lFrame;u.bindingIndex=u.bindingRootIndex=a,ba(l)}function ba(a){cn.lFrame.currentDirectiveIndex=a}function Cc(a){const l=cn.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Ga(){return cn.lFrame.currentQueryIndex}function Fl(a){cn.lFrame.currentQueryIndex=a}function Ec(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function md(a,l,u){if(u&tn.SkipSelf){let f=l,g=a;for(;!(f=f.parent,null!==f||u&tn.Host||(f=Ec(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;l=f,a=g}const d=cn.lFrame=Ic();return d.currentTNode=l,d.lView=a,!0}function gu(a){const l=Ic(),u=a[1];cn.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Ic(){const a=cn.lFrame,l=null===a?null:a.child;return null===l?Ll(a):l}function Ll(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function mu(){const a=cn.lFrame;return cn.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const wa=mu;function Tc(){const a=mu();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Br(){return cn.lFrame.selectedIndex}function na(a){cn.lFrame.selectedIndex=a}function Vr(){const a=cn.lFrame;return Qo(a.tView,a.selectedIndex)}function yu(){cn.lFrame.currentNamespace=Pt}function oy(){cn.lFrame.currentNamespace=null}function Bl(a,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const g=a.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:B,ngOnDestroy:G}=g;v&&(a.contentHooks||(a.contentHooks=[])).push(-u,v),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),D&&(a.viewHooks||(a.viewHooks=[])).push(-u,D),B&&((a.viewHooks||(a.viewHooks=[])).push(u,B),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,B)),null!=G&&(a.destroyHooks||(a.destroyHooks=[])).push(u,G)}}function vu(a,l,u){bu(a,l,3,u)}function Vl(a,l,u,d){(3&a[2])===u&&bu(a,l,u,d)}function ra(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function bu(a,l,u,d){const g=null!=d?d:-1,v=l.length-1;let C=0;for(let D=void 0!==d?65535&a[18]:0;D<v;D++)if("number"==typeof l[D+1]){if(C=l[D],null!=d&&C>=d)break}else l[D]<0&&(a[18]+=65536),(C<g||-1==g)&&(_d(a,u,l,D),a[18]=(4294901760&a[18])+D+2),D++}function _d(a,l,u,d){const f=u[d]<0,g=u[d+1],C=a[f?-u[d]:u[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Ul{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Dr(a,l,u){const d=Pn(a);let f=0;for(;f<u.length;){const g=u[f];if("number"==typeof g){if(0!==g)break;f++;const v=u[f++],C=u[f++],D=u[f++];d?a.setAttribute(l,C,D,v):l.setAttributeNS(v,C,D)}else{const v=g,C=u[++f];xt(v)?d&&a.setProperty(l,v,C):d?a.setAttribute(l,v,C):l.setAttribute(v,C),f++}}return f}function Ca(a){return 3===a||4===a||6===a}function xt(a){return 64===a.charCodeAt(0)}function Wt(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?u=f:0===u||pi(a,u,f,null,-1===u||2===u?l[++d]:null)}}return a}function pi(a,l,u,d,f){let g=0,v=a.length;if(-1===l)v=-1;else for(;g<a.length;){const C=a[g++];if("number"==typeof C){if(C===l){v=-1;break}if(C>l){v=g-1;break}}}for(;g<a.length;){const C=a[g];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==f&&(a[g+1]=f));if(d===a[g+1])return void(a[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(a.splice(v,0,l),g=v+1),a.splice(g++,0,u),null!==d&&a.splice(g++,0,d),null!==f&&a.splice(g++,0,f)}function Pr(a){return-1!==a}function Ea(a){return 32767&a}function qa(a,l){let u=function(a){return a>>16}(a),d=l;for(;u>0;)d=d[15],u--;return d}let Kr=!0;function Hl(a){const l=Kr;return Kr=a,l}let qh=0;function sa(a,l){const u=lr(a,l);if(-1!==u)return u;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,xc(d.data,a),xc(l,null),xc(d.blueprint,null));const f=zl(a,l),g=a.injectorIndex;if(Pr(f)){const v=Ea(f),C=qa(f,l),D=C[1].data;for(let B=0;B<8;B++)l[g+B]=C[v+B]|D[v+B]}return l[g+8]=f,g}function xc(a,l){a.push(0,0,0,0,0,0,0,0,l)}function lr(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function zl(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,d=null,f=l;for(;null!==f;){const g=f[1],v=g.type;if(d=2===v?g.declTNode:1===v?f[6]:null,null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Ys(a,l,u){!function(a,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(wt)&&(d=u[wt]),null==d&&(d=u[wt]=qh++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function Ks(a,l,u){if(u&tn.Optional)return a;Ne(l,"NodeInjector")}function Gl(a,l,u,d){if(u&tn.Optional&&void 0===d&&(d=null),0==(u&(tn.Self|tn.Host))){const f=a[9],g=Jn(void 0);try{return f?f.get(l,d,u&tn.Optional):zn(l,d,u&tn.Optional)}finally{Jn(g)}}return Ks(d,l,u)}function Ia(a,l,u,d=tn.Default,f){if(null!==a){const g=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(wt)?a[wt]:void 0;return"number"==typeof l?l>=0?255&l:vd:l}(u);if("function"==typeof g){if(!md(l,a,d))return d&tn.Host?Ks(f,u,d):Gl(l,u,d,f);try{const v=g(d);if(null!=v||d&tn.Optional)return v;Ne(u)}finally{wa()}}else if("number"==typeof g){let v=null,C=lr(a,l),D=-1,B=d&tn.Host?l[16][6]:null;for((-1===C||d&tn.SkipSelf)&&(D=-1===C?zl(a,l):l[C+8],-1!==D&&Qr(d,!1)?(v=l[1],C=Ea(D),l=qa(D,l)):C=-1);-1!==C;){const G=l[1];if(ns(g,C,G.data)){const ge=Ro(C,l,u,v,d,B);if(ge!==ho)return ge}D=l[C+8],-1!==D&&Qr(d,l[1].data[C+8]===B)&&ns(g,C,l)?(v=G,C=Ea(D),l=qa(D,l)):C=-1}}}return Gl(l,u,d,f)}const ho={};function vd(){return new Ta(ni(),_t())}function Ro(a,l,u,d,f,g){const v=l[1],C=v.data[a+8],G=Bi(C,v,u,null==d?qi(C)&&Kr:d!=v&&0!=(3&C.type),f&tn.Host&&g===C);return null!==G?Ss(l,v,G,C):ho}function Bi(a,l,u,d,f){const g=a.providerIndexes,v=l.data,C=1048575&g,D=a.directiveStart,G=g>>20,Pe=f?C+G:a.directiveEnd;for(let We=d?C:C+G;We<Pe;We++){const at=v[We];if(We<D&&u===at||We>=D&&at.type===u)return We}if(f){const We=v[D];if(We&&ti(We)&&We.type===u)return D}return null}function Ss(a,l,u,d){let f=a[u];const g=l.data;if(function(a){return a instanceof Ul}(f)){const v=f;v.resolving&&function(a,l){throw new je("200",`Circular dependency in DI detected for ${a}`)}(J(g[u]));const C=Hl(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Jn(v.injectImpl):null;md(a,d,tn.Default);try{f=a[u]=v.factory(void 0,g,a,d),l.firstCreatePass&&u>=d.directiveStart&&function(a,l,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=l.type.prototype;if(d){const v=ve(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,g))}(u,g[u],l)}finally{null!==D&&Jn(D),Hl(C),v.resolving=!1,wa()}}return f}function ns(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Qr(a,l){return!(a&tn.Self||a&tn.Host&&l)}class Ta{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,d){return Ia(this._tNode,this._lView,l,d,u)}}function $l(a){return ar(()=>{const l=a.prototype.constructor,u=l[ht]||Ur(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const g=f[ht]||Ur(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Ur(a){return Je(a)?()=>{const l=Ur(we(a));return l&&l()}:L(a)}function Xn(a){return function(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const g=u[f];if(Ca(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(g===l)return u[f+1];f+=2}}}return null}(ni(),a)}const Oo="__parameters__";function vr(a,l,u){return ar(()=>{const d=function(a){return function(...u){if(a){const d=a(...u);for(const f in d)this[f]=d[f]}}}(l);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return C.annotation=v,C;function C(D,B,G){const ge=D.hasOwnProperty(Oo)?D[Oo]:Object.defineProperty(D,Oo,{value:[]})[Oo];for(;ge.length<=G;)ge.push(null);return(ge[G]=ge[G]||[]).push(v),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class jr{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ot({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ka=new jr("AnalyzeForEntryComponents");function ms(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let d=a[u];Array.isArray(d)?(l===a&&(l=a.slice(0,u)),ms(d,l)):l!==a&&l.push(d)}return l}function fo(a,l){a.forEach(u=>Array.isArray(u)?fo(u,l):l(u))}function Zl(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function oa(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Po(a,l){const u=[];for(let d=0;d<a;d++)u.push(l);return u}function Yi(a,l,u){let d=Js(a,l);return d>=0?a[1|d]=u:(d=~d,function(a,l,u,d){let f=a.length;if(f==l)a.push(u,d);else if(1===f)a.push(d,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=d}}(a,d,l,u)),d}function po(a,l){const u=Js(a,l);if(u>=0)return a[1|u]}function Js(a,l){return function(a,l,u){let d=0,f=a.length>>u;for(;f!==d;){const g=d+(f-d>>1),v=a[g<<u];if(l===v)return g<<u;v>l?f=g:d=g+1}return~(f<<u)}(a,l,1)}const Xs={},Ed="__NG_DI_FLAG__",Ja="ngTempTokenPath",Du=/\n/gm,Au="__source",A=U({provide:String,useValue:U});let P;function Z(a){const l=P;return P=a,l}function Ee(a,l=tn.Default){if(void 0===P)throw new Error("inject() must be called from an injection context");return null===P?zn(a,void 0,l):P.get(a,l&tn.Optional?null:void 0,l)}function ke(a,l=tn.Default){return(Fn||Ee)(we(a),l)}const bt=ke;function Rt(a){const l=[];for(let u=0;u<a.length;u++){const d=we(a[u]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,g=tn.Default;for(let v=0;v<d.length;v++){const C=d[v],D=yn(C);"number"==typeof D?-1===D?f=C.token:g|=D:f=C}l.push(ke(f,g))}else l.push(ke(d))}return l}function pn(a,l){return a[Ed]=l,a.prototype[Ed]=l,a}function yn(a){return a[Ed]}const si=pn(vr("Inject",a=>({token:a})),-1),pr=pn(vr("Optional"),8),As=pn(vr("SkipSelf"),4);let _o;function Jl(a){var l;return(null==(l=function(){if(void 0===_o&&(_o=null,Mn.trustedTypes))try{_o=Mn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return _o}())?void 0:l.createHTML(a))||a}class nl{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class tf extends nl{getTypeName(){return"HTML"}}class nf extends nl{getTypeName(){return"Style"}}class bg extends nl{getTypeName(){return"Script"}}class Mu extends nl{getTypeName(){return"URL"}}class gy extends nl{getTypeName(){return"ResourceURL"}}function Aa(a){return a instanceof nl?a.changingThisBreaksApplicationSecurity:a}function Pc(a,l){const u=ec(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function ec(a){return a instanceof nl&&a.getTypeName()||null}function ku(a){return new tf(a)}function Ru(a){return new nf(a)}function wg(a){return new bg(a)}function rf(a){return new Mu(a)}function my(a){return new gy(a)}class _y{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Jl(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Cg{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Jl(l),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Jl(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const v=u.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&l.removeAttribute(v)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Ig=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tc(a){return(a=String(a)).match(Ig)||a.match(yy)?a:"unsafe:"+a}function m(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function y(...a){const l={};for(const u of a)for(const d in u)u.hasOwnProperty(d)&&(l[d]=!0);return l}const T=m("area,br,col,hr,img,wbr"),H=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),le=m("rp,rt"),Kt=y(T,y(H,m("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),y(le,m("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),y(le,H)),An=m("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hr=m("srcset"),Ma=y(An,Hr,m("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),m("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fc=m("script,style,template");class af{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!Kt.hasOwnProperty(u))return this.sanitizedSomething=!0,!Fc.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=l.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),v=g.name,C=v.toLowerCase();if(!Ma.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=g.value;An[C]&&(D=tc(D)),Hr[C]&&(a=D,D=(a=String(a)).split(",").map(l=>tc(l.trim())).join(", ")),this.buf.push(" ",v,'="',xd(D),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();Kt.hasOwnProperty(u)&&!T.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(xd(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const Lc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ad=/([^\#-~ |!])/g;function xd(a){return a.replace(/&/g,"&amp;").replace(Lc,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Ad,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Bc;function Md(a,l){let u=null;try{Bc=Bc||function(a){const l=new Cg(a);return function(){try{return!!(new window.DOMParser).parseFromString(Jl(""),"text/html")}catch(a){return!1}}()?new _y(l):l}(a);let d=l?String(l):"";u=Bc.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=u.innerHTML,u=Bc.getInertBodyElement(d)}while(d!==g);return Jl((new af).sanitizeChildren(Ou(u)||u))}finally{if(u){const d=Ou(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Ou(a){return"content"in a&&function(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function Dg(a){const l=function(){const a=_t();return a&&a[12]}();return l?l.sanitize(oi.URL,a)||"":Pc(a,"URL")?Aa(a):tc(me(a))}const by="__ngContext__";function ks(a,l){a[by]=l}function wy(a){const l=function(a){return a[by]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function Ey(a){return a.ngOriginalError}function ID(a,...l){a.error(...l)}class df{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),d=(a=l)&&a.ngErrorLogger||ID;var a;d(this._console,"ERROR",l),u&&d(this._console,"ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Ey(l);for(;u&&Ey(u);)u=Ey(u);return u||null}}const xw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mn))();function ka(a){return a instanceof Function?a():a}var rl=(()=>((rl=rl||{})[rl.Important=1]="Important",rl[rl.DashCase=2]="DashCase",rl))();function hf(a,l){return undefined(a,l)}function ff(a){const l=a[3];return ui(l)?l[3]:l}function Dy(a){return Pw(a[13])}function Ay(a){return Pw(a[4])}function Pw(a){for(;null!==a&&!ui(a);)a=a[4];return a}function Fu(a,l,u,d,f){if(null!=d){let g,v=!1;ui(d)?g=d:ei(d)&&(v=!0,d=d[0]);const C=Sr(d);0===a&&null!==u?null==f?Fw(l,u,C):Lu(l,u,C,f||null,!0):1===a&&null!==u?Lu(l,u,C,f||null,!0):2===a?function(a,l,u){const d=Bg(a,l);d&&function(a,l,u,d){Pn(a)?a.removeChild(l,u,d):l.removeChild(u)}(a,d,l,u)}(l,C,v):3===a&&l.destroyNode(C),null!=g&&function(a,l,u,d,f){const g=u[7];g!==Sr(u)&&Fu(l,a,d,g,f);for(let C=10;C<u.length;C++){const D=u[C];gf(D[1],D,a,l,d,g)}}(l,a,g,u,f)}}function My(a,l,u){return Pn(a)?a.createElement(l,u):null===u?a.createElement(l):a.createElementNS(u,l)}function ky(a,l){const u=a[9],d=u.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,Jo(f,-1)),u.splice(d,1)}function Ry(a,l){if(a.length<=10)return;const u=10+l,d=a[u];if(d){const f=d[17];null!==f&&f!==a&&ky(f,d),l>0&&(a[u-1][4]=d[4]);const g=oa(a,10+l);!function(a,l){gf(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Oy(a,l){if(!(256&l[2])){const u=l[11];Pn(u)&&u.destroyNode&&gf(a,l,u,3,null,null),function(a){let l=a[13];if(!l)return Lg(a[1],a);for(;l;){let u=null;if(ei(l))u=l[13];else{const d=l[10];d&&(u=d)}if(!u){for(;l&&!l[4]&&l!==a;)ei(l)&&Lg(l[1],l),l=l[3];null===l&&(l=a),ei(l)&&Lg(l[1],l),u=l&&l[4]}l=u}}(l)}}function Lg(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let d=0;d<u.length;d+=2){const f=l[u[d]];if(!(f instanceof Ul)){const g=u[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=f[g[v]],D=g[v+1];try{D.call(C)}finally{}}else try{g.call(f)}finally{}}}}(a,l),function(a,l){const u=a.cleanup,d=l[7];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],C="function"==typeof v?v(l):Sr(l[v]),D=d[f=u[g+2]],B=u[g+3];"boolean"==typeof B?C.removeEventListener(u[g],D,B):B>=0?d[f=B]():d[f=-B].unsubscribe(),g+=2}else{const v=d[f=u[g+1]];u[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();l[7]=null}}(a,l),1===l[1].type&&Pn(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&ui(l[3])){u!==l[3]&&ky(u,l);const d=l[19];null!==d&&d.detachView(a)}}}function Vc(a,l,u){return function(a,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===Ft.None||f===Ft.Emulated)return null}return Mi(d,u)}(a,l.parent,u)}function Lu(a,l,u,d,f){Pn(a)?a.insertBefore(l,u,d,f):l.insertBefore(u,d,f)}function Fw(a,l,u){Pn(a)?a.appendChild(l,u):l.appendChild(u)}function Od(a,l,u,d,f){null!==d?Lu(a,l,u,d,f):Fw(a,l,u)}function Bg(a,l){return Pn(a)?a.parentNode(l):l.parentNode}function Fy(a,l,u){return Bw(a,l,u)}let Bw=function(a,l,u){return 40&a.type?Mi(a,u):null};function Ug(a,l,u,d){const f=Vc(a,d,l),g=l[11],C=Fy(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)Od(g,f,u[D],C,!1);else Od(g,f,u,C,!1)}function jg(a,l){if(null!==l){const u=l.type;if(3&u)return Mi(l,a);if(4&u)return Vy(-1,a[l.index]);if(8&u){const d=l.child;if(null!==d)return jg(a,d);{const f=a[l.index];return ui(f)?Vy(-1,f):Sr(f)}}if(32&u)return hf(l,a)()||Sr(a[l.index]);{const d=By(a,l);return null!==d?Array.isArray(d)?d[0]:jg(ff(a[16]),d):jg(a,l.next)}}return null}function By(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Vy(a,l){const u=10+a+1;if(u<l.length){const d=l[u],f=d[1].firstChild;if(null!==f)return jg(d,f)}return l[7]}function Uy(a,l,u,d,f,g,v){for(;null!=u;){const C=d[u.index],D=u.type;if(v&&0===l&&(C&&ks(Sr(C),d),u.flags|=4),64!=(64&u.flags))if(8&D)Uy(a,l,u.child,d,f,g,!1),Fu(l,a,f,C,g);else if(32&D){const B=hf(u,d);let G;for(;G=B();)Fu(l,a,f,G,g);Fu(l,a,f,C,g)}else 16&D?Vw(a,l,d,u,f,g):Fu(l,a,f,C,g);u=v?u.projectionNext:u.next}}function gf(a,l,u,d,f,g){Uy(u,d,a.firstChild,l,f,g,!1)}function Vw(a,l,u,d,f,g){const v=u[16],D=v[6].projection[d.projection];if(Array.isArray(D))for(let B=0;B<D.length;B++)Fu(l,a,f,D[B],g);else Uy(a,l,D,v[3],f,g,!0)}function HD(a,l,u){Pn(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function mf(a,l,u){Pn(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function zD(a,l,u){let d=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const g=l.length;if(f+g===d||a.charCodeAt(f+g)<=32)return f}u=f+1}}const GD="ng-template";function Uw(a,l,u){let d=0;for(;d<a.length;){let f=a[d++];if(u&&"class"===f){if(f=a[d],-1!==zD(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function _f(a){return 4===a.type&&a.value!==GD}function gr(a,l,u){return l===(4!==a.type||u?a.value:GD)}function cr(a,l,u){let d=4;const f=a.attrs||[],g=function(a){for(let l=0;l<a.length;l++)if(Ca(a[l]))return l;return a.length}(f);let v=!1;for(let C=0;C<l.length;C++){const D=l[C];if("number"!=typeof D){if(!v)if(4&d){if(d=2|1&d,""!==D&&!gr(a,D,u)||""===D&&1===l.length){if(Vi(d))return!1;v=!0}}else{const B=8&d?D:l[++C];if(8&d&&null!==a.attrs){if(!Uw(a.attrs,B,u)){if(Vi(d))return!1;v=!0}continue}const ge=$D(8&d?"class":D,f,_f(a),u);if(-1===ge){if(Vi(d))return!1;v=!0;continue}if(""!==B){let Pe;Pe=ge>g?"":f[ge+1].toLowerCase();const We=8&d?Pe:null;if(We&&-1!==zD(We,B,0)||2&d&&B!==Pe){if(Vi(d))return!1;v=!0}}}}else{if(!v&&!Vi(d)&&!Vi(D))return!1;if(v&&Vi(D))continue;v=!1,d=D|1&d}}return Vi(d)||v}function Vi(a){return 0==(1&a)}function $D(a,l,u,d){if(null===l)return-1;let f=0;if(d||!u){let g=!1;for(;f<l.length;){const v=l[f];if(v===a)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const d=a[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,a)}function yf(a,l,u=!1){for(let d=0;d<l.length;d++)if(cr(a,l[d],u))return!0;return!1}function WD(a,l){e:for(let u=0;u<l.length;u++){const d=l[u];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function jw(a,l){return a?":not("+l.trim()+")":l}function qD(a){let l=a[0],u=1,d=2,f="",g=!1;for(;u<a.length;){let v=a[u];if("string"==typeof v)if(2&d){const C=a[++u];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Vi(v)&&(l+=jw(g,f),f=""),d=v,g=g||!Vi(d);u++}return""!==f&&(l+=jw(g,f)),l}const Rn={};function Pd(a){Hw(Qn(),_t(),Br()+a,za())}function Hw(a,l,u,d){if(!d)if(3==(3&l[2])){const g=a.preOrderCheckHooks;null!==g&&vu(l,g,u)}else{const g=a.preOrderHooks;null!==g&&Vl(l,g,0,u)}na(u)}function jy(a,l){return a<<17|l<<2}function yo(a){return a>>17&32767}function Fd(a){return 2|a}function Uc(a){return(131068&a)>>2}function Gw(a,l){return-131069&a|l<<2}function $w(a){return 1|a}function eC(a,l){const u=a.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],g=u[d+1];if(-1!==g){const v=a.data[g];Fl(f),v.contentQueries(2,l[g],g)}}}function Vu(a,l,u,d,f,g,v,C,D,B){const G=l.blueprint.slice();return G[0]=f,G[2]=140|d,wc(G),G[3]=G[15]=a,G[8]=u,G[10]=v||a&&a[10],G[11]=C||a&&a[11],G[12]=D||a&&a[12]||null,G[9]=B||a&&a[9]||null,G[6]=g,G[16]=2==l.type?a[16]:G,G}function Uu(a,l,u,d,f){let g=a.data[l];if(null===g)g=function(a,l,u,d,f){const g=kl(),v=pu(),D=a.data[l]=function(a,l,u,d,f,g){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,l,d,f);return null===a.firstChild&&(a.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(a,l,u,d,f),cn.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=d,g.attrs=f;const v=function(){const a=cn.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Fi(g,!0),g}function If(a,l,u,d){if(0===u)return-1;const f=l.length;for(let g=0;g<u;g++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function Yg(a,l,u){gu(l);try{const d=a.viewQuery;null!==d&&fC(1,d,u);const f=a.template;null!==f&&nC(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&eC(a,l),a.staticViewQueries&&fC(2,a.viewQuery,u);const g=a.components;null!==g&&function(a,l){for(let u=0;u<l.length;u++)aN(a,l[u])}(l,g)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,Tc()}}function Tf(a,l,u,d){const f=l[2];if(256==(256&f))return;gu(l);const g=za();try{wc(l),function(a){cn.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&nC(a,l,u,2,d);const v=3==(3&f);if(!g)if(v){const B=a.preOrderCheckHooks;null!==B&&vu(l,B,null)}else{const B=a.preOrderHooks;null!==B&&Vl(l,B,0,null),ra(l,0)}if(function(a){for(let l=Dy(a);null!==l;l=Ay(l)){if(!l[2])continue;const u=l[9];for(let d=0;d<u.length;d++){const f=u[d],g=f[3];0==(1024&f[2])&&Jo(g,1),f[2]|=1024}}}(l),function(a){for(let l=Dy(a);null!==l;l=Ay(l))for(let u=10;u<l.length;u++){const d=l[u],f=d[1];ya(d)&&Tf(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&eC(a,l),!g)if(v){const B=a.contentCheckHooks;null!==B&&vu(l,B)}else{const B=a.contentHooks;null!==B&&Vl(l,B,1),ra(l,1)}!function(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)na(~f);else{const g=f,v=u[++d],C=u[++d];Nl(v,g),C(2,l[g])}}}finally{na(-1)}}(a,l);const C=a.components;null!==C&&function(a,l){for(let u=0;u<l.length;u++)oN(a,l[u])}(l,C);const D=a.viewQuery;if(null!==D&&fC(2,D,d),!g)if(v){const B=a.viewCheckHooks;null!==B&&vu(l,B)}else{const B=a.viewHooks;null!==B&&Vl(l,B,2),ra(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),g||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Jo(l[3],-1))}finally{Tc()}}function rA(a,l,u,d){const f=l[10],g=!za(),v=Sl(l);try{g&&!v&&f.begin&&f.begin(),v&&Yg(a,l,d),Tf(a,l,u,d)}finally{g&&!v&&f.end&&f.end()}}function nC(a,l,u,d,f){const g=Br(),v=2&d;try{na(-1),v&&l.length>20&&Hw(a,l,20,za()),u(d,f)}finally{na(g)}}function iA(a,l,u){if(Ws(l)){const f=l.directiveEnd;for(let g=l.directiveStart;g<f;g++){const v=a.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function rC(a,l,u){!fu()||(function(a,l,u,d){const f=u.directiveStart,g=u.directiveEnd;a.firstCreatePass||sa(u,l),ks(d,l);const v=u.initialInputs;for(let C=f;C<g;C++){const D=a.data[C],B=ti(D);B&&tN(l,u,D);const G=Ss(l,a,C,u);ks(G,l),null!==v&&nN(0,C-f,G,D,0,v),B&&(or(u.index,l)[8]=G)}}(a,l,u,Mi(u,l)),128==(128&u.flags)&&function(a,l,u){const d=u.directiveStart,f=u.directiveEnd,v=u.index,C=cn.lFrame.currentDirectiveIndex;try{na(v);for(let D=d;D<f;D++){const B=a.data[D],G=l[D];ba(D),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&dA(B,G)}}finally{na(-1),ba(C)}}(a,l,u))}function iC(a,l,u=Mi){const d=l.localNames;if(null!==d){let f=l.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],C=-1===v?u(l,a):a[v];a[f++]=C}}}function sA(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Wy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Wy(a,l,u,d,f,g,v,C,D,B){const G=20+d,ge=G+f,Pe=function(a,l){const u=[];for(let d=0;d<l;d++)u.push(d<a?null:Rn);return u}(G,ge),We="function"==typeof B?B():B;return Pe[1]={type:a,blueprint:Pe,template:u,queries:null,viewQuery:C,declTNode:l,data:Pe.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:We,incompleteFirstPass:!1}}function aA(a,l,u,d){const f=yA(l);null===u?f.push(d):(f.push(u),a.firstCreatePass&&vA(a).push(d,f.length-1))}function lA(a,l,u){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(l,f):u[d]=[l,f]}return u}function ca(a,l,u,d,f,g,v,C){const D=Mi(l,u);let G,B=l.inputs;!C&&null!=B&&(G=B[d])?(CA(a,u,G,d,f),qi(l)&&function(a,l){const u=or(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(d=function(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=v?v(f,l.value||"",d):f,Pn(g)?g.setProperty(D,d,f):xt(d)||(D.setProperty?D.setProperty(d,f):D[d]=f))}function aC(a,l,u,d){let f=!1;if(fu()){const g=function(a,l,u){const d=a.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];yf(u,v.selectors,!1)&&(f||(f=[]),Ys(sa(u,l),a,v.type),ti(v)?(hA(a,u),f.unshift(v)):f.push(v))}return f}(a,l,u),v=null===d?null:{"":-1};if(null!==g){f=!0,fA(u,a.data.length,g.length);for(let G=0;G<g.length;G++){const ge=g[G];ge.providersResolver&&ge.providersResolver(ge)}let C=!1,D=!1,B=If(a,l,g.length,null);for(let G=0;G<g.length;G++){const ge=g[G];u.mergedAttrs=Wt(u.mergedAttrs,ge.hostAttrs),pA(a,u,l,B,ge),eN(B,ge,v),null!==ge.contentQueries&&(u.flags|=8),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(u.flags|=128);const Pe=ge.type.prototype;!C&&(Pe.ngOnChanges||Pe.ngOnInit||Pe.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!D&&(Pe.ngOnChanges||Pe.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),D=!0),B++}!function(a,l){const d=l.directiveEnd,f=a.data,g=l.attrs,v=[];let C=null,D=null;for(let B=l.directiveStart;B<d;B++){const G=f[B],ge=G.inputs,Pe=null===g||_f(l)?null:gA(ge,g);v.push(Pe),C=lA(ge,B,C),D=lA(G.outputs,B,D)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=v,l.inputs=C,l.outputs=D}(a,u)}v&&function(a,l,u){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const g=u[l[f+1]];if(null==g)throw new je("301",`Export of name '${l[f+1]}' not found!`);d.push(l[f],g)}}}(u,d,v)}return u.mergedAttrs=Wt(u.mergedAttrs,u.attrs),f}function uA(a,l,u,d,f,g){const v=g.hostBindings;if(v){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~l.index;(function(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(d,f,v)}}function dA(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function hA(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function eN(a,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=a;ti(l)&&(u[""]=a)}}function fA(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function pA(a,l,u,d,f){a.data[d]=f;const g=f.factory||(f.factory=L(f.type)),v=new Ul(g,ti(f),null);a.blueprint[d]=v,u[d]=v,uA(a,l,0,d,If(a,u,f.hostVars,Rn),f)}function tN(a,l,u){const d=Mi(l,a),f=sA(u),g=a[10],v=qy(a,Vu(a,f,null,u.onPush?64:16,d,l,g,g.createRenderer(d,u),null,null));a[l.index]=v}function sc(a,l,u,d,f,g){const v=Mi(a,l);!function(a,l,u,d,f,g,v){if(null==g)Pn(a)?a.removeAttribute(l,f,u):l.removeAttribute(f);else{const C=null==v?me(g):v(g,d||"",f);Pn(a)?a.setAttribute(l,f,C,u):u?l.setAttributeNS(u,f,C):l.setAttribute(f,C)}}(l[11],v,g,a.value,u,d,f)}function nN(a,l,u,d,f,g){const v=g[l];if(null!==v){const C=d.setInput;for(let D=0;D<v.length;){const B=v[D++],G=v[D++],ge=v[D++];null!==C?d.setInput(u,ge,B,G):u[G]=ge}}}function gA(a,l){let u=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return u}function mA(a,l,u,d){return new Array(a,!0,!1,l,null,0,d,u,null,null)}function oN(a,l){const u=or(l,a);if(ya(u)){const d=u[1];80&u[2]?Tf(d,u,d.template,u[8]):u[5]>0&&cC(u)}}function cC(a){for(let d=Dy(a);null!==d;d=Ay(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const v=g[1];Tf(v,g,v.template,g[8])}else g[5]>0&&cC(g)}const u=a[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=or(u[d],a);ya(f)&&f[5]>0&&cC(f)}}function aN(a,l){const u=or(l,a),d=u[1];(function(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(d,u),Yg(d,u,u[8])}function qy(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function uC(a){for(;a;){a[2]|=64;const l=ff(a);if(Do(a)&&!l)return a;a=l}return null}function hC(a,l,u){const d=l[10];d.begin&&d.begin();try{Tf(a,l,a.template,u)}catch(f){throw wA(l,f),f}finally{d.end&&d.end()}}function _A(a){!function(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],d=wy(u),f=d[1];rA(f,d,f.template,u)}}(a[8])}function fC(a,l,u){Fl(0),l(a,u)}const hN=(()=>Promise.resolve(null))();function yA(a){return a[7]||(a[7]=[])}function vA(a){return a.cleanup||(a.cleanup=[])}function bA(a,l,u){return(null===a||ti(a))&&(u=function(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function wA(a,l){const u=a[9],d=u?u.get(df,null):null;d&&d.handleError(l)}function CA(a,l,u,d,f){for(let g=0;g<u.length;){const v=u[g++],C=u[g++],D=l[v],B=a.data[v];null!==B.setInput?B.setInput(D,f,d,C):D[C]=f}}function jc(a,l,u){const d=_a(l,a);!function(a,l,u){Pn(a)?a.setValue(l,u):l.textContent=u}(a[11],d,u)}function Zy(a,l,u){let d=u?a.styles:null,f=u?a.classes:null,g=0;if(null!==l)for(let v=0;v<l.length;v++){const C=l[v];"number"==typeof C?g=C:1==g?f=he(f,C):2==g&&(d=he(d,C+": "+l[++v]+";"))}u?a.styles=d:a.stylesWithoutHost=d,u?a.classes=f:a.classesWithoutHost=f}const pC=new jr("INJECTOR",-1);class EA{get(l,u=Xs){if(u===Xs){const d=new Error(`NullInjectorError: No provider for ${re(l)}!`);throw d.name="NullInjectorError",d}return u}}const gC=new jr("Set Injector scope."),Kg={},gN={};let mC;function IA(){return void 0===mC&&(mC=new EA),mC}function TA(a,l=null,u=null,d){const f=SA(a,l,u,d);return f._resolveInjectorDefTypes(),f}function SA(a,l=null,u=null,d){return new mN(a,u,l||IA(),d)}class mN{constructor(l,u,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&fo(u,C=>this.processProvider(C,l,u)),fo([l],C=>this.processInjectorType(C,[],g)),this.records.set(pC,Sf(void 0,this));const v=this.records.get(gC);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof l?null:re(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=Xs,d=tn.Default){this.assertNotDestroyed();const f=Z(this),g=Jn(void 0);try{if(!(d&tn.SkipSelf)){let C=this.records.get(l);if(void 0===C){const D=("function"==typeof(a=l)||"object"==typeof a&&a instanceof jr)&&ur(l);C=D&&this.injectableDefInScope(D)?Sf(_C(l),Kg):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&tn.Self?IA():this.parent).get(l,u=d&tn.Optional&&u===Xs?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Ja]=v[Ja]||[]).unshift(re(l)),f)throw v;return function(a,l,u,d){const f=a[Ja];throw l[Au]&&f.unshift(l[Au]),a.message=function(a,l,u,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=re(l);if(Array.isArray(l))f=l.map(re).join(" -> ");else if("object"==typeof l){let g=[];for(let v in l)if(l.hasOwnProperty(v)){let C=l[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):re(C)))}f=`{${g.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${a.replace(Du,"\n  ")}`}("\n"+a.message,f,u,d),a.ngTokenPath=f,a[Ja]=null,a}(v,l,"R3InjectorError",this.source)}throw v}finally{Jn(g),Z(f)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(re(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(l,u,d){if(!(l=we(l)))return!1;let f=Si(l);const g=null==f&&l.ngModule||void 0,v=void 0===g?l:g,C=-1!==d.indexOf(v);if(void 0!==g&&(f=Si(g)),null==f)return!1;if(null!=f.imports&&!C){let G;d.push(v);try{fo(f.imports,ge=>{this.processInjectorType(ge,u,d)&&(void 0===G&&(G=[]),G.push(ge))})}finally{}if(void 0!==G)for(let ge=0;ge<G.length;ge++){const{ngModule:Pe,providers:We}=G[ge];fo(We,at=>this.processProvider(at,Pe,We||Ae))}}this.injectorDefTypes.add(v);const D=L(v)||(()=>new v);this.records.set(v,Sf(D,Kg));const B=f.providers;if(null!=B&&!C){const G=l;fo(B,ge=>this.processProvider(ge,G,B))}return void 0!==g&&void 0!==l.providers}processProvider(l,u,d){let f=Df(l=we(l))?l:we(l&&l.provide);const g=(a=l,AA(a)?Sf(void 0,a.useValue):Sf(DA(a),Kg));var a;if(Df(l)||!0!==l.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=Sf(void 0,Kg,!0),v.factory=()=>Rt(v.multi),this.records.set(f,v)),f=l,v.multi.push(l)}this.records.set(f,g)}hydrate(l,u){return u.value===Kg&&(u.value=gN,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(a=u.value)&&"object"==typeof a&&"function"==typeof a.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var a}injectableDefInScope(l){if(!l.providedIn)return!1;const u=we(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function _C(a){const l=ur(a),u=null!==l?l.factory:L(a);if(null!==u)return u;if(a instanceof jr)throw new Error(`Token ${re(a)} is missing a \u0275prov definition.`);if(a instanceof Function)return function(a){const l=a.length;if(l>0){const d=Po(l,"?");throw new Error(`Can't resolve all parameters for ${re(a)}: (${d.join(", ")}).`)}const u=function(a){const l=a&&(a[ri]||a[Di]);if(l){const u=function(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Error("unreachable")}function DA(a,l,u){let d;if(Df(a)){const f=we(a);return L(f)||_C(f)}if(AA(a))d=()=>we(a.useValue);else if(function(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Rt(a.deps||[]));else if(function(a){return!(!a||!a.useExisting)}(a))d=()=>ke(we(a.useExisting));else{const f=we(a&&(a.useClass||a.provide));if(!function(a){return!!a.deps}(a))return L(f)||_C(f);d=()=>new f(...Rt(a.deps))}return d}function Sf(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function AA(a){return null!==a&&"object"==typeof a&&A in a}function Df(a){return"function"==typeof a}let Ra=(()=>{class a{static create(u,d){var f;if(Array.isArray(u))return TA({name:""},d,u,"");{const g=null!=(f=u.name)?f:"";return TA({name:g},u.parent,u.providers,g)}}}return a.THROW_IF_NOT_FOUND=Xs,a.NULL=new EA,a.\u0275prov=Ot({token:a,providedIn:"any",factory:()=>ke(pC)}),a.__NG_ELEMENT_ID__=-1,a})();function OA(a,l){Bl(wy(a)[1],ni())}function Qy(a){let l=function(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const d=[a];for(;l;){let f;if(ti(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Error("Directives cannot inherit Components");f=l.\u0275dir}if(f){if(u){d.push(f);const v=a;v.inputs=Qg(a.inputs),v.declaredInputs=Qg(a.declaredInputs),v.outputs=Qg(a.outputs);const C=f.hostBindings;C&&FA(a,C);const D=f.viewQuery,B=f.contentQueries;if(D&&PA(a,D),B&&NA(a,B),Y(a.inputs,f.inputs),Y(a.declaredInputs,f.declaredInputs),Y(a.outputs,f.outputs),ti(f)&&f.data.animation){const G=a.data;G.animation=(G.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(a),C===Qy&&(u=!1)}}l=Object.getPrototypeOf(l)}!function(a){let l=0,u=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=Wt(f.hostAttrs,u=Wt(u,f.hostAttrs))}}(d)}function Qg(a){return a===Re?{}:a===Ae?[]:a}function PA(a,l){const u=a.viewQuery;a.viewQuery=u?(d,f)=>{l(d,f),u(d,f)}:l}function NA(a,l){const u=a.contentQueries;a.contentQueries=u?(d,f,g)=>{l(d,f,g),u(d,f,g)}:l}function FA(a,l){const u=a.hostBindings;a.hostBindings=u?(d,f)=>{l(d,f),u(d,f)}:l}let Jy=null;function Mf(){if(!Jy){const a=Mn.Symbol;if(a&&a.iterator)Jy=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const d=l[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Jy=d)}}}return Jy}function Jg(a){return!!Xg(a)&&(Array.isArray(a)||!(a instanceof Map)&&Mf()in a)}function Xg(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ll(a,l,u){return a[l]=u}function vs(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function ua(a,l,u,d){const f=vs(a,l,u);return vs(a,l+1,d)||f}function Xy(a,l,u,d){const f=_t();return vs(f,ta(),l)&&(Qn(),sc(Vr(),f,a,l,u,d)),Xy}function zc(a,l,u,d){return vs(a,ta(),u)?l+me(u)+d:Rn}function Hd(a,l,u,d,f,g,v,C){const B=function(a,l,u,d,f){const g=ua(a,l,u,d);return vs(a,l+2,f)||g}(a,Zs(),u,f,v);return uo(3),B?l+me(u)+d+me(f)+g+me(v)+C:Rn}function nv(a,l,u,d,f,g,v,C){const D=_t(),B=Qn(),G=a+20,ge=B.firstCreatePass?function(a,l,u,d,f,g,v,C,D){const B=l.consts,G=Uu(l,a,4,v||null,Zi(B,C));aC(l,u,G,Zi(B,D)),Bl(l,G);const ge=G.tViews=Wy(2,G,d,f,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,B);return null!==l.queries&&(l.queries.template(l,G),ge.queries=l.queries.embeddedTView(G)),G}(G,B,D,l,u,d,f,g,v):B.data[G];Fi(ge,!1);const Pe=D[11].createComment("");Ug(B,D,Pe,ge),ks(Pe,D),qy(D,D[G]=mA(Pe,D,Pe,ge)),qs(ge)&&rC(B,D,ge),null!=v&&iC(D,ge,C)}function Pa(a){return function(a,l){return a[l]}(cn.lFrame.contextLView,20+a)}function $c(a,l=tn.Default){const u=_t();return null===u?ke(a,l):Ia(ni(),u,we(a),l)}function Ff(){throw new Error("invalid")}function am(a,l,u){const d=_t();return vs(d,ta(),l)&&ca(Qn(),Vr(),d,a,l,d[11],u,!1),am}function Lf(a,l,u,d,f){const v=f?"class":"style";CA(a,u,l.inputs[v],v,d)}function Bf(a,l,u,d){const f=_t(),g=Qn(),v=20+a,C=f[11],D=f[v]=My(C,l,cn.lFrame.currentNamespace),B=g.firstCreatePass?function(a,l,u,d,f,g,v){const C=l.consts,B=Uu(l,a,2,f,Zi(C,g));return aC(l,u,B,Zi(C,v)),null!==B.attrs&&Zy(B,B.attrs,!1),null!==B.mergedAttrs&&Zy(B,B.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,B),B}(v,g,f,0,l,u,d):g.data[v];Fi(B,!0);const G=B.mergedAttrs;null!==G&&Dr(C,D,G);const ge=B.classes;null!==ge&&mf(C,D,ge);const Pe=B.styles;null!==Pe&&HD(C,D,Pe),64!=(64&B.flags)&&Ug(g,f,D,B),0===cn.lFrame.elementDepthCount&&ks(D,f),cn.lFrame.elementDepthCount++,qs(B)&&(rC(g,f,B),iA(g,B,f)),null!==d&&iC(f,B)}function Gd(){let a=ni();pu()?va():(a=a.parent,Fi(a,!1));const l=a;cn.lFrame.elementDepthCount--;const u=Qn();u.firstCreatePass&&(Bl(u,a),Ws(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function(a){return 0!=(16&a.flags)}(l)&&Lf(u,l,_t(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function(a){return 0!=(32&a.flags)}(l)&&Lf(u,l,_t(),l.stylesWithoutHost,!1)}function GC(a,l,u,d){Bf(a,l,u,d),Gd()}function fl(a,l,u){const d=_t(),f=Qn(),g=a+20,v=f.firstCreatePass?function(a,l,u,d,f){const g=l.consts,v=Zi(g,d),C=Uu(l,a,8,"ng-container",v);return null!==v&&Zy(C,v,!0),aC(l,u,C,Zi(g,f)),null!==l.queries&&l.queries.elementStart(l,C),C}(g,f,d,l,u):f.data[g];Fi(v,!0);const C=d[g]=d[11].createComment("");Ug(f,d,C,v),ks(C,d),qs(v)&&(rC(f,d,v),iA(f,v,d)),null!=u&&iC(d,v)}function lm(){let a=ni();const l=Qn();pu()?va():(a=a.parent,Fi(a,!1)),l.firstCreatePass&&(Bl(l,a),Ws(a)&&l.queries.elementEnd(a))}function pv(a,l,u){fl(a,l,u),lm()}function Na(){return _t()}function lc(a){return!!a&&"function"==typeof a.then}function $d(a){return!!a&&"function"==typeof a.subscribe}const WC=$d;function Uf(a,l,u,d){const f=_t(),g=Qn(),v=ni();return jf(g,f,f[11],v,a,l,!!u,d),Uf}function cm(a,l){const u=ni(),d=_t(),f=Qn();return jf(f,d,bA(Cc(f.data),u,d),u,a,l,!1),cm}function jf(a,l,u,d,f,g,v,C){const D=qs(d),G=a.firstCreatePass&&vA(a),ge=l[8],Pe=yA(l);let We=!0;if(3&d.type||C){const At=Mi(d,l),Yt=C?C(At):At,ft=Pe.length,un=C?er=>C(Sr(er[d.index])):d.index;if(Pn(u)){let er=null;if(!C&&D&&(er=function(a,l,u,d){const f=a.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===u&&f[g+1]===d){const C=l[7],D=f[g+2];return C.length>D?C[D]:null}"string"==typeof v&&(g+=2)}return null}(a,l,f,d.index)),null!==er)(er.__ngLastListenerFn__||er).__ngNextListenerFn__=g,er.__ngLastListenerFn__=g,We=!1;else{g=Hf(d,l,ge,g,!1);const Er=u.listen(Yt,f,g);Pe.push(g,Er),G&&G.push(f,un,ft,ft+1)}}else g=Hf(d,l,ge,g,!0),Yt.addEventListener(f,g,v),Pe.push(g),G&&G.push(f,un,ft,v)}else g=Hf(d,l,ge,g,!1);const at=d.outputs;let Ct;if(We&&null!==at&&(Ct=at[f])){const At=Ct.length;if(At)for(let Yt=0;Yt<At;Yt+=2){const Uo=l[Ct[Yt]][Ct[Yt+1]].subscribe(g),Xc=Pe.length;Pe.push(g,Uo),G&&G.push(f,d.index,Xc,-(Xc+1))}}}function qC(a,l,u,d){try{return!1!==u(d)}catch(f){return wA(a,f),!1}}function Hf(a,l,u,d,f){return function g(v){if(v===Function)return d;const C=2&a.flags?or(a.index,l):l;0==(32&l[2])&&uC(C);let D=qC(l,0,d,v),B=g.__ngNextListenerFn__;for(;B;)D=qC(l,0,B,v)&&D,B=B.__ngNextListenerFn__;return f&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function ZC(a=1){return function(a){return(cn.lFrame.contextLView=function(a,l){for(;a>0;)l=l[15],a--;return l}(a,cn.lFrame.contextLView))[8]}(a)}function YC(a,l){let u=null;const d=function(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const g=l[f];if("*"!==g){if(null===d?yf(a,g,!0):WD(d,g))return f}else u=f}return u}function gv(a){const l=_t()[16][6];if(!l.projection){const d=l.projection=Po(a?a.length:1,null),f=d.slice();let g=l.child;for(;null!==g;){const v=a?YC(g,a):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function vo(a,l=0,u){const d=_t(),f=Qn(),g=Uu(f,20+a,16,null,u||null);null===g.projection&&(g.projection=l),va(),64!=(64&g.flags)&&function(a,l,u){Vw(l[11],0,l,u,Vc(a,u,l),Fy(u.parent||l[6],u,l))}(f,d,g)}function nE(a,l,u,d,f){const g=a[u+1],v=null===l;let C=d?yo(g):Uc(g),D=!1;for(;0!==C&&(!1===D||v);){const G=a[C+1];zA(a[C],l)&&(D=!0,a[C+1]=d?$w(G):Fd(G)),C=d?yo(G):Uc(G)}D&&(a[u+1]=d?Fd(g):$w(g))}function zA(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Js(a,l)>=0}const Ji={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rE(a){return a.substring(Ji.key,Ji.keyEnd)}function Wc(a,l){const u=Ji.textEnd;return u===l?-1:(l=Ji.keyEnd=function(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Ji.key=l,u),qd(a,l,u))}function qd(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function Zd(a,l,u){return gl(a,l,u,!1),Zd}function Wf(a,l){return gl(a,l,null,!0),Wf}function pl(a,l){for(let u=function(a){return function(a){Ji.key=0,Ji.keyEnd=0,Ji.value=0,Ji.valueEnd=0,Ji.textEnd=a.length}(a),Wc(a,qd(a,0,Ji.textEnd))}(l);u>=0;u=Wc(l,u))Yi(a,rE(l),!0)}function gl(a,l,u,d){const f=_t(),g=Qn(),v=uo(2);g.firstUpdatePass&&oE(g,a,v,d),l!==Rn&&vs(f,v,l)&&cE(g,g.data[Br()],f,f[11],a,f[v+1]=function(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=re(Aa(a)))),a}(l,u),d,v)}function YA(a,l){return l>=a.expandoStartIndex}function oE(a,l,u,d){const f=a.data;if(null===f[u+1]){const g=f[Br()],v=YA(a,u);wv(g,d)&&null===l&&!v&&(l=!1),l=function(a,l,u,d){const f=Cc(a);let g=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(u=qf(u=gm(null,a,l,u,d),l.attrs,d),g=null);else{const v=l.directiveStylingLast;if(-1===v||a[v]!==f)if(u=gm(f,a,l,u,d),null===g){let D=function(a,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==Uc(d))return a[yo(d)]}(a,l,d);void 0!==D&&Array.isArray(D)&&(D=gm(null,a,l,D[1],d),D=qf(D,l.attrs,d),function(a,l,u,d){a[yo(u?l.classBindings:l.styleBindings)]=d}(a,l,d,D))}else g=function(a,l,u){let d;const f=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<f;g++)d=qf(d,a[g].hostAttrs,u);return qf(d,l.attrs,u)}(a,l,d)}return void 0!==g&&(d?l.residualClasses=g:l.residualStyles=g),u}(f,g,l,d),function(a,l,u,d,f,g){let v=g?l.classBindings:l.styleBindings,C=yo(v),D=Uc(v);a[d]=u;let G,B=!1;if(Array.isArray(u)){const ge=u;G=ge[1],(null===G||Js(ge,G)>0)&&(B=!0)}else G=u;if(f)if(0!==D){const Pe=yo(a[C+1]);a[d+1]=jy(Pe,C),0!==Pe&&(a[Pe+1]=Gw(a[Pe+1],d)),a[C+1]=function(a,l){return 131071&a|l<<17}(a[C+1],d)}else a[d+1]=jy(C,0),0!==C&&(a[C+1]=Gw(a[C+1],d)),C=d;else a[d+1]=jy(D,0),0===C?C=d:a[D+1]=Gw(a[D+1],d),D=d;B&&(a[d+1]=Fd(a[d+1])),nE(a,G,d,!0),nE(a,G,d,!1),function(a,l,u,d,f){const g=f?a.residualClasses:a.residualStyles;null!=g&&"string"==typeof l&&Js(g,l)>=0&&(u[d+1]=$w(u[d+1]))}(l,G,a,d,g),v=jy(C,D),g?l.classBindings=v:l.styleBindings=v}(f,g,l,u,v,d)}}function gm(a,l,u,d,f){let g=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(g=l[C],d=qf(d,g.hostAttrs,f),g!==a);)C++;return null!==a&&(u.directiveStylingLast=C),d}function qf(a,l,u){const d=u?1:2;let f=-1;if(null!==l)for(let g=0;g<l.length;g++){const v=l[g];"number"==typeof v?f=v:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Yi(a,v,!!u||l[++g]))}return void 0===a?null:a}function cE(a,l,u,d,f,g,v,C){if(!(3&l.type))return;const D=a.data,B=D[C+1];mm(function(a){return 1==(1&a)}(B)?bv(D,l,u,f,Uc(B),v):void 0)||(mm(g)||function(a){return 2==(2&a)}(B)&&(g=bv(D,null,u,f,C,v)),function(a,l,u,d,f){const g=Pn(a);if(l)f?g?a.addClass(u,d):u.classList.add(d):g?a.removeClass(u,d):u.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:rl.DashCase;if(null==f)g?a.removeStyle(u,d,v):u.style.removeProperty(d);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),v|=rl.Important),g?a.setStyle(u,d,f,v):u.style.setProperty(d,f,C?"important":"")}}}(d,v,_a(Br(),u),f,g))}function bv(a,l,u,d,f,g){const v=null===l;let C;for(;f>0;){const D=a[f],B=Array.isArray(D),G=B?D[1]:D,ge=null===G;let Pe=u[f+1];Pe===Rn&&(Pe=ge?Ae:void 0);let We=ge?po(Pe,d):G===d?Pe:void 0;if(B&&!mm(We)&&(We=po(D,d)),mm(We)&&(C=We,v))return C;const at=a[f+1];f=v?yo(at):Uc(at)}if(null!==l){let D=g?l.residualClasses:l.residualStyles;null!=D&&(C=po(D,d))}return C}function mm(a){return void 0!==a}function wv(a,l){return 0!=(a.flags&(l?16:32))}function uE(a,l=""){const u=_t(),d=Qn(),f=a+20,g=d.firstCreatePass?Uu(d,f,1,l,null):d.data[f],v=u[f]=function(a,l){return Pn(a)?a.createText(l):a.createTextNode(l)}(u[11],l);Ug(d,u,v,g),Fi(g,!1)}function _m(a){return Zf("",a,""),_m}function Zf(a,l,u){const d=_t(),f=zc(d,a,l,u);return f!==Rn&&jc(d,Br(),f),Zf}function Cv(a,l,u,d,f){const g=_t(),v=function(a,l,u,d,f,g){const C=ua(a,Zs(),u,f);return uo(2),C?l+me(u)+d+me(f)+g:Rn}(g,a,l,u,d,f);return v!==Rn&&jc(g,Br(),v),Cv}function Ev(a,l,u,d,f,g,v){const C=_t(),D=Hd(C,a,l,u,d,f,g,v);return D!==Rn&&jc(C,Br(),D),Ev}function vm(a,l,u){!function(a,l,u,d){const f=Qn(),g=uo(2);f.firstUpdatePass&&oE(f,null,g,d);const v=_t();if(u!==Rn&&vs(v,g,u)){const C=f.data[Br()];if(wv(C,d)&&!YA(f,g)){let D=d?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(u=he(D,u||"")),Lf(f,C,v,u,d)}else!function(a,l,u,d,f,g,v,C){f===Rn&&(f=Ae);let D=0,B=0,G=0<f.length?f[0]:null,ge=0<g.length?g[0]:null;for(;null!==G||null!==ge;){const Pe=D<f.length?f[D+1]:void 0,We=B<g.length?g[B+1]:void 0;let Ct,at=null;G===ge?(D+=2,B+=2,Pe!==We&&(at=ge,Ct=We)):null===ge||null!==G&&G<ge?(D+=2,at=G):(B+=2,at=ge,Ct=We),null!==at&&cE(a,l,u,d,at,Ct,v,C),G=D<f.length?f[D]:null,ge=B<g.length?g[B]:null}}(f,C,v,v[11],v[g+1],v[g+1]=function(a,l,u){if(null==u||""===u)return Ae;const d=[],f=Aa(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)a(d,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&a(d,g,f[g]);else"string"==typeof f&&l(d,f);return d}(a,l,u),d,g)}}(Yi,pl,zc(_t(),a,l,u),!0)}function Em(a,l,u){const d=_t();return vs(d,ta(),l)&&ca(Qn(),Vr(),d,a,l,d[11],u,!0),Em}function xv(a,l,u){const d=_t();if(vs(d,ta(),l)){const g=Qn(),v=Vr();ca(g,v,d,a,l,bA(Cc(g.data),v,d),u,!0)}return xv}const Wu=void 0;var lx=["en",[["a","p"],["AM","PM"],Wu],[["AM","PM"],Wu,Wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wu,"{1} 'at' {0}",Wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(a){const u=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Qd={};function Kf(a){const l=function(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Im(l);if(u)return u;const d=l.split("-")[0];if(u=Im(d),u)return u;if("en"===d)return lx;throw new Error(`Missing locale data for the locale "${a}".`)}function Qf(a){return Kf(a)[gn.PluralCase]}function Im(a){return a in Qd||(Qd[a]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[a]),Qd[a]}var gn=(()=>((gn=gn||{})[gn.LocaleId=0]="LocaleId",gn[gn.DayPeriodsFormat=1]="DayPeriodsFormat",gn[gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",gn[gn.DaysFormat=3]="DaysFormat",gn[gn.DaysStandalone=4]="DaysStandalone",gn[gn.MonthsFormat=5]="MonthsFormat",gn[gn.MonthsStandalone=6]="MonthsStandalone",gn[gn.Eras=7]="Eras",gn[gn.FirstDayOfWeek=8]="FirstDayOfWeek",gn[gn.WeekendRange=9]="WeekendRange",gn[gn.DateFormat=10]="DateFormat",gn[gn.TimeFormat=11]="TimeFormat",gn[gn.DateTimeFormat=12]="DateTimeFormat",gn[gn.NumberSymbols=13]="NumberSymbols",gn[gn.NumberFormats=14]="NumberFormats",gn[gn.CurrencyCode=15]="CurrencyCode",gn[gn.CurrencySymbol=16]="CurrencySymbol",gn[gn.CurrencyName=17]="CurrencyName",gn[gn.Currencies=18]="Currencies",gn[gn.Directionality=19]="Directionality",gn[gn.PluralCase=20]="PluralCase",gn[gn.ExtraData=21]="ExtraData",gn))();const Tm="en-US";let Mv=Tm;function Lv(a,l,u,d,f){if(a=we(a),Array.isArray(a))for(let g=0;g<a.length;g++)Lv(a[g],l,u,d,f);else{const g=Qn(),v=_t();let C=Df(a)?a:we(a.provide),D=DA(a);const B=ni(),G=1048575&B.providerIndexes,ge=B.directiveStart,Pe=B.providerIndexes>>20;if(Df(a)||!a.multi){const We=new Ul(D,f,$c),at=Om(C,l,f?G:G+Pe,ge);-1===at?(Ys(sa(B,v),g,C),Bv(g,a,l.length),l.push(C),B.directiveStart++,B.directiveEnd++,f&&(B.providerIndexes+=1048576),u.push(We),v.push(We)):(u[at]=We,v[at]=We)}else{const We=Om(C,l,G+Pe,ge),at=Om(C,l,G,G+Pe),Ct=We>=0&&u[We],At=at>=0&&u[at];if(f&&!At||!f&&!Ct){Ys(sa(B,v),g,C);const Yt=function(a,l,u,d,f){const g=new Ul(a,u,$c);return g.multi=[],g.index=l,g.componentProviders=0,ZE(g,f,d&&!u),g}(f?Nx:YE,u.length,f,d,D);!f&&At&&(u[at].providerFactory=Yt),Bv(g,a,l.length,0),l.push(C),B.directiveStart++,B.directiveEnd++,f&&(B.providerIndexes+=1048576),u.push(Yt),v.push(Yt)}else Bv(g,a,We>-1?We:at,ZE(u[f?at:We],D,!f&&d));!f&&d&&At&&u[at].componentProviders++}}}function Bv(a,l,u,d){const f=Df(l),g=function(a){return!!a.useClass}(l);if(f||g){const D=(g?we(l.useClass):l).prototype.ngOnDestroy;if(D){const B=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const G=B.indexOf(u);-1===G?B.push(u,[d,D]):B[G+1].push(d,D)}else B.push(u,D)}}}function ZE(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Om(a,l,u,d){for(let f=u;f<d;f++)if(l[f]===a)return f;return-1}function YE(a,l,u,d){return Pm(this.multi,[])}function Nx(a,l,u,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Ss(u,u[1],this.providerFactory.index,d);g=C.slice(0,v),Pm(f,g);for(let D=v;D<C.length;D++)g.push(C[D])}else g=[],Pm(f,g);return g}function Pm(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function KE(a,l=[]){return u=>{u.providersResolver=(d,f)=>function(a,l,u){const d=Qn();if(d.firstCreatePass){const f=ti(a);Lv(u,d.data,d.blueprint,f,!0),Lv(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class Vv{}class XE{resolveComponentFactory(l){throw function(a){const l=Error(`No component factory found for ${re(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Jd=(()=>{class a{}return a.NULL=new XE,a})();function eF(){return Xd(ni(),_t())}function Xd(a,l){return new ip(Mi(a,l))}let ip=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=eF,a})();function Lx(a){return a instanceof ip?a.nativeElement:a}class jv{}let Bx=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function(){const a=_t(),u=or(ni().index,a);return function(a){return a[11]}(ei(u)?u:a)}(),a})(),jx=(()=>{class a{}return a.\u0275prov=Ot({token:a,providedIn:"root",factory:()=>null}),a})();class ml{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Hv=new ml("13.0.3"),zv={};function Nm(a,l,u,d,f=!1){for(;null!==u;){const g=l[u.index];if(null!==g&&d.push(Sr(g)),ui(g))for(let C=10;C<g.length;C++){const D=g[C],B=D[1].firstChild;null!==B&&Nm(D[1],D,B,d)}const v=u.type;if(8&v)Nm(a,l,u.child,d);else if(32&v){const C=hf(u,l);let D;for(;D=C();)d.push(D)}else if(16&v){const C=By(l,u);if(Array.isArray(C))d.push(...C);else{const D=ff(l[16]);Nm(D[1],D,C,d,!0)}}u=f?u.projectionNext:u.next}return d}class sp{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Nm(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(ui(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(Ry(l,d),oa(u,d))}this._attachedToViewContainer=!1}Oy(this._lView[1],this._lView)}onDestroy(l){aA(this._lView[1],this._lView,null,l)}markForCheck(){uC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hC(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(a,l,u){Rl(!0);try{hC(a,l,u)}finally{Rl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var l;this._appRef=null,gf(this._lView[1],l=this._lView,l[11],2,null,null)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=l}}class Zc extends sp{constructor(l){super(l),this._view=l}detectChanges(){_A(this._view)}checkNoChanges(){!function(a){Rl(!0);try{_A(a)}finally{Rl(!1)}}(this._view)}get context(){return null}}class Hx extends Jd{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=Zt(l);return new Gv(u,this.ngModule)}}function eI(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}const tI=new jr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xw});class Gv extends Vv{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=l.selectors.map(qD).join(","),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return eI(this.componentDef.inputs)}get outputs(){return eI(this.componentDef.outputs)}create(l,u,d,f){const g=(f=f||this.ngModule)?function(a,l){return{get:(u,d,f)=>{const g=a.get(u,zv,f);return g!==zv||d===zv?g:l.get(u,d,f)}}}(l,f.injector):l,v=g.get(jv,xo),C=g.get(jx,null),D=v.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",G=d?function(a,l,u){if(Pn(a))return a.selectRootElement(l,u===Ft.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(D,d,this.componentDef.encapsulation):My(v.createRenderer(null,this.componentDef),B,function(a){const l=a.toLowerCase();return"svg"===l?Pt:"math"===l?"http://www.w3.org/1998/MathML/":null}(B)),ge=this.componentDef.onPush?576:528,Pe=function(a,l){return{components:[],scheduler:a||xw,clean:hN,playerHandler:l||null,flags:0}}(),We=Wy(0,null,null,1,0,null,null,null,null,null),at=Vu(null,We,Pe,ge,null,null,v,D,C,g);let Ct,At;gu(at);try{const Yt=function(a,l,u,d,f,g){const v=u[1];u[20]=a;const D=Uu(v,20,2,"#host",null),B=D.mergedAttrs=l.hostAttrs;null!==B&&(Zy(D,B,!0),null!==a&&(Dr(f,a,B),null!==D.classes&&mf(f,a,D.classes),null!==D.styles&&HD(f,a,D.styles)));const G=d.createRenderer(a,l),ge=Vu(u,sA(l),null,l.onPush?64:16,u[20],D,d,G,g||null,null);return v.firstCreatePass&&(Ys(sa(D,u),v,l.type),hA(v,D),fA(D,u.length,1)),qy(u,ge),u[20]=ge}(G,this.componentDef,at,v,D);if(G)if(d)Dr(D,G,["ng-version",Hv.full]);else{const{attrs:ft,classes:un}=function(a){const l=[],u=[];let d=1,f=2;for(;d<a.length;){let g=a[d];if("string"==typeof g)2===f?""!==g&&l.push(g,a[++d]):8===f&&u.push(g);else{if(!Vi(f))break;f=g}d++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);ft&&Dr(D,G,ft),un&&un.length>0&&mf(D,G,un.join(" "))}if(At=Qo(We,20),void 0!==u){const ft=At.projection=[];for(let un=0;un<this.ngContentSelectors.length;un++){const er=u[un];ft.push(null!=er?Array.from(er):null)}}Ct=function(a,l,u,d,f){const g=u[1],v=function(a,l,u){const d=ni();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),pA(a,d,l,If(a,l,1,null),u));const f=Ss(l,a,d.directiveStart,d);ks(f,l);const g=Mi(d,l);return g&&ks(g,l),f}(g,u,l);if(d.components.push(v),a[8]=v,f&&f.forEach(D=>D(v,l)),l.contentQueries){const D=ni();l.contentQueries(1,v,D.directiveStart)}const C=ni();return!g.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(na(C.index),uA(u[1],C,0,C.directiveStart,C.directiveEnd,l),dA(l,v)),v}(Yt,this.componentDef,at,Pe,[OA]),Yg(We,at,null)}finally{Tc()}return new rI(this.componentType,Ct,Xd(At,at),at,At)}}class rI extends class{}{constructor(l,u,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new Zc(f),this.componentType=l}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class eh{}class Fm{}const th=new Map;class Wv extends eh{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hx(this);const d=$n(l);this._bootstrapComponents=ka(d.bootstrap),this._r3Injector=SA(l,u,[{provide:eh,useValue:this},{provide:Jd,useValue:this.componentFactoryResolver}],re(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=Ra.THROW_IF_NOT_FOUND,d=tn.Default){return l===Ra||l===eh||l===pC?this:this._r3Injector.get(l,u,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class qv extends Fm{constructor(l){super(),this.moduleType=l,null!==$n(l)&&function(a){const l=new Set;!function u(d){const f=$n(d,!0),g=f.id;null!==g&&(function(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${re(l)} vs ${re(l.name)}`)}(g,th.get(g),d),th.set(g,d));const v=ka(f.imports);for(const C of v)l.has(C)||(l.add(C),u(C))}(a)}(l)}create(l){return new Wv(this.moduleType,l)}}function Zv(a,l,u){const d=Li()+a,f=_t();return f[d]===Rn?ll(f,d,u?l.call(u):l()):function(a,l){return a[l]}(f,d)}function Yv(a,l,u,d){return function(a,l,u,d,f,g){const v=l+u;return vs(a,v,f)?ll(a,v+1,g?d.call(g,f):d(f)):function(a,l){const u=a[l];return u===Rn?void 0:u}(a,v+1)}(_t(),Li(),a,l,u,d)}function lI(a){return l=>{setTimeout(a,void 0,l)}}const uc=class extends s.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){var D,B,G;let f=l,g=u||(()=>null),v=d;if(l&&"object"==typeof l){const ge=l;f=null==(D=ge.next)?void 0:D.bind(ge),g=null==(B=ge.error)?void 0:B.bind(ge),v=null==(G=ge.complete)?void 0:G.bind(ge)}this.__isAsync&&(g=lI(g),f&&(f=lI(f)),v&&(v=lI(v)));const C=super.subscribe({next:f,error:g,complete:v});return l instanceof I.w0&&l.add(C),C}};function lF(){return this._results[Mf()]()}class op{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Mf(),d=op.prototype;d[u]||(d[u]=lF)}get changes(){return this._changes||(this._changes=new uc)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const f=ms(l);(this._changesDetected=!function(a,l,u){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],g=l[d];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Zu=(()=>{class a{}return a.__NG_ELEMENT_ID__=Kv,a})();const Jx=Zu,cF=class extends Jx{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(l){const u=this._declarationTContainer.tViews,d=Vu(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(u)),Yg(u,d,l),new sp(d)}};function Kv(){return jm(ni(),_t())}function jm(a,l){return 4&a.type?new cF(l,a,Xd(a,l)):null}let Hm=(()=>{class a{}return a.__NG_ELEMENT_ID__=uF,a})();function uF(){return eM(ni(),_t())}const dF=Hm,cI=class extends dF{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Ta(this._hostTNode,this._hostLView)}get parentInjector(){const l=zl(this._hostTNode,this._hostLView);if(Pr(l)){const u=qa(l,this._hostLView),d=Ea(l);return new Ta(u[1].data[d+8],u)}return new Ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Xx(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,d){const f=l.createEmbeddedView(u||{});return this.insert(f,d),f}createComponent(l,u,d,f,g){const v=l&&!("function"==typeof l);let C;if(v)C=u;else{const ge=u||{};C=ge.index,d=ge.injector,f=ge.projectableNodes,g=ge.ngModuleRef}const D=v?l:new Gv(Zt(l)),B=d||this.parentInjector;if(!g&&null==D.ngModule&&B){const ge=B.get(eh,null);ge&&(g=ge)}const G=D.create(B,f,void 0,g);return this.insert(G.hostView,C),G}insert(l,u){const d=l._lView,f=d[1];if(ui(d[3])){const G=this.indexOf(l);if(-1!==G)this.detach(G);else{const ge=d[3],Pe=new cI(ge,ge[6],ge[3]);Pe.detach(Pe.indexOf(l))}}const g=this._adjustIndex(u),v=this._lContainer;!function(a,l,u,d){const f=10+d,g=u.length;d>0&&(u[f-1][4]=l),d<g-10?(l[4]=u[f],Zl(u,10+d,l)):(u.push(l),l[4]=null),l[3]=u;const v=l[17];null!==v&&u!==v&&function(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(v,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=128}(f,d,v,g);const C=Vy(g,v),D=d[11],B=Bg(D,v[7]);return null!==B&&function(a,l,u,d,f,g){d[0]=f,d[6]=l,gf(a,d,u,1,f,g)}(f,v[6],D,d,B,C),l.attachToViewContainerRef(),Zl(uI(v),g,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Xx(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=Ry(this._lContainer,u);d&&(oa(uI(this._lContainer),u),Oy(d[1],d))}detach(l){const u=this._adjustIndex(l,-1),d=Ry(this._lContainer,u);return d&&null!=oa(uI(this._lContainer),u)?new sp(d):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function Xx(a){return a[8]}function uI(a){return a[8]||(a[8]=[])}function eM(a,l){let u;const d=l[a.index];if(ui(d))u=d;else{let f;if(8&a.type)f=Sr(d);else{const g=l[11];f=g.createComment("");const v=Mi(a,l);Lu(g,Bg(g,v),f,function(a,l){return Pn(a)?a.nextSibling(l):l.nextSibling}(g,v),!1)}l[a.index]=u=mA(d,l,f,a),qy(l,u)}return new cI(u,a,l)}class dI{constructor(l){this.queryList=l,this.matches=null}clone(){return new dI(this.queryList)}setDirty(){this.queryList.setDirty()}}class hI{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let g=0;g<d;g++){const v=u.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new hI(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==cM(l,u).matches&&this.queries[u].setDirty()}}class tM{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class fI{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,g=this.getByIndex(d).embeddedTView(l,f);g&&(g.indexInDeclarationView=d,null!==u?u.push(g):u=[g])}return null!==u?new fI(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class pI{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new pI(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(l,u,pF(u,g)),this.matchTNodeWithReadOption(l,u,Bi(u,l,g,!1,!1))}else d===Zu?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Bi(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===ip||f===Hm||f===Zu&&4&u.type)this.addMatch(u.index,-2);else{const g=Bi(u,l,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function pF(a,l){const u=a.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function mF(a,l,u,d){return-1===u?function(a,l){return 11&a.type?Xd(a,l):4&a.type?jm(a,l):null}(l,a):-2===u?function(a,l,u){return u===ip?Xd(l,a):u===Zu?jm(l,a):u===Hm?eM(l,a):void 0}(a,l,d):Ss(a,a[1],u,l)}function nM(a,l,u,d){const f=l[19].queries[d];if(null===f.matches){const g=a.data,v=u.matches,C=[];for(let D=0;D<v.length;D+=2){const B=v[D];C.push(B<0?null:mF(l,g[B],v[D+1],u.metadata.read))}f.matches=C}return f.matches}function gI(a,l,u,d){const f=a.queries.getByIndex(u),g=f.matches;if(null!==g){const v=nM(a,l,f,u);for(let C=0;C<g.length;C+=2){const D=g[C];if(D>0)d.push(v[C/2]);else{const B=g[C+1],G=l[-D];for(let ge=10;ge<G.length;ge++){const Pe=G[ge];Pe[17]===Pe[3]&&gI(Pe[1],Pe,B,d)}if(null!==G[9]){const ge=G[9];for(let Pe=0;Pe<ge.length;Pe++){const We=ge[Pe];gI(We[1],We,B,d)}}}}}return d}function rM(a){const l=_t(),u=Qn(),d=Ga();Fl(d+1);const f=cM(u,d);if(a.dirty&&Sl(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const g=f.crossesNgTemplate?gI(u,l,d,[]):nM(u,l,f,d);a.reset(g,Lx),a.notifyOnChanges()}return!0}return!1}function iM(a,l,u){const d=Qn();d.firstCreatePass&&(lM(d,new tM(a,l,u),-1),2==(2&l)&&(d.staticViewQueries=!0)),aM(d,_t(),l)}function sM(a,l,u,d){const f=Qn();if(f.firstCreatePass){const g=ni();lM(f,new tM(l,u,d),g.index),function(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}aM(f,_t(),u)}function oM(){return a=_t(),l=Ga(),a[19].queries[l].queryList;var a,l}function aM(a,l,u){const d=new op(4==(4&u));aA(a,l,d,d.destroy),null===l[19]&&(l[19]=new hI),l[19].queries.push(new dI(d))}function lM(a,l,u){null===a.queries&&(a.queries=new fI),a.queries.track(new pI(l,u))}function cM(a,l){return a.queries.getByIndex(l)}function lp(...a){}const sh=new jr("Application Initializer");let Ku=(()=>{class a{constructor(u){this.appInits=u,this.resolve=lp,this.reject=lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(lc(g))u.push(g);else if(WC(g)){const v=new Promise((C,D)=>{g.subscribe({complete:C,error:D})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(ke(sh,8))},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})();const Ns=new jr("AppId"),eo={provide:Ns,useFactory:function(){return`${qm()}${qm()}${qm()}`},deps:[]};function qm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const o0=new jr("Platform Initializer"),Zm=new jr("Platform ID"),a0=new jr("appBootstrapListener");let l0=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})();const oh=new jr("LocaleId"),EI=new jr("DefaultCurrencyCode");class c0{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let Ym=(()=>{class a{compileModuleSync(u){return new qv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),g=ka($n(u).declarations).reduce((v,C)=>{const D=Zt(C);return D&&v.push(new Gv(D)),v},[]);return new c0(d,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})();const Km=(()=>Promise.resolve(0))();function up(a){"undefined"==typeof Zone?Km.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class to{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uc(!1),this.onMicrotaskEmpty=new uc(!1),this.onStable=new uc(!1),this.onError=new uc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let a=Mn.requestAnimationFrame,l=Mn.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(a){const l=()=>{!function(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Mn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,f0(a),a.isCheckStableRunning=!0,d0(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),f0(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,g,v,C)=>{try{return TI(a),u.invokeTask(f,g,v,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||a.shouldCoalesceRunChangeDetection)&&l(),ws(a)}},onInvoke:(u,d,f,g,v,C,D)=>{try{return TI(a),u.invoke(f,g,v,C,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),ws(a)}},onHasTask:(u,d,f,g)=>{u.hasTask(f,g),d===f&&("microTask"==g.change?(a._hasPendingMicrotasks=g.microTask,f0(a),d0(a)):"macroTask"==g.change&&(a.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,d,f,g)=>(u.handleError(f,g),a.runOutsideAngular(()=>a.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!to.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(to.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,l,SM,lp,lp);try{return g.runTask(v,u,d)}finally{g.cancelTask(v)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const SM={};function d0(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function f0(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function TI(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function ws(a){a._nesting--,d0(a)}class dp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uc,this.onMicrotaskEmpty=new uc,this.onStable=new uc,this.onError=new uc}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,f){return l.apply(u,d)}}let SI=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{to.assertNotInAngularZone(),up(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())up(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(ke(to))},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})(),ah=(()=>{class a{constructor(){this._applications=new Map,lh.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return lh.findTestabilityInTree(this,u,d)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})();class DM{addToWindow(l){}findTestabilityInTree(l,u,d){return null}}function AM(a){lh=a}let wo,lh=new DM;const Qm=new jr("AllowMultipleToken");class DI{constructor(l,u){this.name=l,this.token=u}}function xI(a,l,u=[]){const d=`Platform: ${l}`,f=new jr(d);return(g=[])=>{let v=Jm();if(!v||v.injector.get(Qm,!1))if(a)a(u.concat(g).concat({provide:f,useValue:!0}));else{const C=u.concat(g).concat({provide:f,useValue:!0},{provide:gC,useValue:"platform"});!function(a){if(wo&&!wo.destroyed&&!wo.injector.get(Qm,!1))throw new je("400","");wo=a.get(_0);const l=a.get(o0,null);l&&l.forEach(u=>u())}(Ra.create({providers:C,name:d}))}return function(a){const l=Jm();if(!l)throw new je("401","");return l}()}}function Jm(){return wo&&!wo.destroyed?wo:null}let _0=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const C=function(a,l){let u;return u="noop"===a?new dp:("zone.js"===a?void 0:a)||new to({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:to,useValue:C}];return C.run(()=>{const B=Ra.create({providers:D,parent:this.injector,name:u.moduleType.name}),G=u.create(B),ge=G.injector.get(df,null);if(!ge)throw new je("402","");return C.runOutsideAngular(()=>{const Pe=C.onError.subscribe({next:We=>{ge.handleError(We)}});G.onDestroy(()=>{ji(this._modules,G),Pe.unsubscribe()})}),function(a,l,u){try{const d=u();return lc(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(ge,C,()=>{const Pe=G.injector.get(Ku);return Pe.runInitializers(),Pe.donePromise.then(()=>(function(a){it(a,"Expected localeId to be defined"),"string"==typeof a&&(Mv=a.toLowerCase().replace(/_/g,"-"))}(G.injector.get(oh,Tm)||Tm),this._moduleDoBootstrap(G),G))})})}bootstrapModule(u,d=[]){const f=Xm({},d);return function(a,l,u){const d=new qv(u);return Promise.resolve(d)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const d=u.injector.get(Qu);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new je("403","");u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je("404","");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(ke(Ra))},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})();function Xm(a,l){return Array.isArray(l)?l.reduce(Xm,a):Mt(Mt({},a),l)}let Qu=(()=>{class a{constructor(u,d,f,g,v){this._zone=u,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new b.y(B=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{B.next(this._stable),B.complete()})}),D=new b.y(B=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{to.assertNotInAngularZone(),up(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,B.next(!0))})})});const ge=this._zone.onUnstable.subscribe(()=>{to.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{B.next(!1)}))});return()=>{G.unsubscribe(),ge.unsubscribe()}});this.isStable=(0,k.T)(C,D.pipe((0,O.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new je("405","");let f;f=u instanceof Vv?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const g=function(a){return a.isBoundToModule}(f)?void 0:this._injector.get(eh),C=f.create(Ra.NULL,[],d||f.selector,g),D=C.location.nativeElement,B=C.injector.get(SI,null),G=B&&C.injector.get(ah);return B&&G&&G.registerApplication(D,B),C.onDestroy(()=>{this.detachView(C.hostView),ji(this.components,C),G&&G.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new je("101","");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;ji(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(a0,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(ke(to),ke(Ra),ke(df),ke(Jd),ke(Ku))},a.\u0275prov=Ot({token:a,factory:a.\u0275fac}),a})();function ji(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let t_=!0,kI=!1;function kM(){return kI=!0,t_}function RI(){if(kI)throw new Error("Cannot enable prod mode after platform setup.");t_=!1}let v0=(()=>{class a{}return a.__NG_ELEMENT_ID__=RM,a})();function RM(a){return function(a,l,u){if(qi(a)&&!u){const d=or(a.index,l);return new sp(d,d)}return 47&a.type?new sp(l[16],l):null}(ni(),_t(),16==(16&a))}class pp{constructor(){}supports(l){return Jg(l)}create(l){return new x0(l)}}const LI=(a,l)=>l;class x0{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||LI}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,f=0,g=null;for(;u||d;){const v=!d||u&&u.currentIndex<o_(d,f,g)?u:d,C=o_(v,f,g),D=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{g||(g=[]);const B=C-f,G=D-f;if(B!=G){for(let Pe=0;Pe<B;Pe++){const We=Pe<g.length?g[Pe]:g[Pe]=0,at=We+Pe;G<=at&&at<B&&(g[Pe]=We+1)}g[v.previousIndex]=G-B}}C!==D&&l(v,C,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Jg(l))throw new Error(`Error trying to diff '${re(l)}'. Only arrays and iterables are allowed`);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,g,v,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)g=l[C],v=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,g,v,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,C),d=!0),u=u._next}else f=0,function(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Mf()]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,C=>{v=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,C,v,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,f){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,g,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,g,f)):l=this._addAfter(new BI(u,d),g,f),l}_verifyReinsertion(l,u,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?l=this._reinsertAfter(g,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,g=l._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new uh),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uh),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class BI{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VI{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class uh{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new VI,this.map.set(u,d)),d.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function o_(a,l,u){const d=a.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+l+f}class a_{constructor(){}supports(l){return l instanceof Map||Xg(l)}create(){return new M0}}class M0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Xg(l)))throw new Error(`Error trying to diff '${re(l)}'. Only maps and objects are allowed`)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new l_(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class l_{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dh(){return new gp([new pp])}let gp=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||dh()),deps:[[a,new As,new pr]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(a){return a.name||typeof a}(u)}'`)}}return a.\u0275prov=Ot({token:a,providedIn:"root",factory:dh}),a})();function c_(){return new Ju([new a_])}let Ju=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||c_()),deps:[[a,new As,new pr]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return a.\u0275prov=Ot({token:a,providedIn:"root",factory:c_}),a})();const k0=[new a_],jI=new gp([new pp]),HI=new Ju(k0),mp=xI(null,"core",[{provide:Zm,useValue:"unknown"},{provide:_0,deps:[Ra]},{provide:ah,deps:[]},{provide:l0,deps:[]}]),R0=[{provide:Qu,useClass:Qu,deps:[to,Ra,df,Jd,Ku]},{provide:tI,deps:[to],useFactory:function(a){let l=[];return a.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(u){l.push(u)}}},{provide:Ku,useClass:Ku,deps:[[new pr,sh]]},{provide:Ym,useClass:Ym,deps:[]},eo,{provide:gp,useFactory:function(){return jI},deps:[]},{provide:Ju,useFactory:function(){return HI},deps:[]},{provide:oh,useFactory:function(a){return a||"undefined"!=typeof $localize&&$localize.locale||Tm},deps:[[new si(oh),new pr,new As]]},{provide:EI,useValue:"USD"}];let O0=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(ke(Qu))},a.\u0275mod=Be({type:a}),a.\u0275inj=_n({providers:R0}),a})()},6293:(St,M,R)=>{"use strict";R.d(M,{Z:()=>je});var s=R(4213),I=R(1177),b=R(1572),k=R(3855);class O{constructor(Ie,me){this._delegate=Ie,this.firebase=me,(0,b._addComponent)(Ie,new I.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,b.deleteApp)(this._delegate)))}_getService(Ie,me=b._DEFAULT_ENTRY_NAME){var J;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(Ie);return!Se.isInitialized()&&"EXPLICIT"===(null===(J=Se.getComponent())||void 0===J?void 0:J.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:me})}_removeServiceInstance(Ie,me=b._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(me)}_addComponent(Ie){(0,b._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,b._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Y=new s.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function he(){const Ge=function(Ge){const Ie={},me={__esModule:!0,initializeApp:function(ue,Me={}){const q=b.initializeApp(ue,Me);if((0,s.r3)(Ie,q.name))return Ie[q.name];const Q=new Ge(q,me);return Ie[q.name]=Q,Q},app:Se,registerVersion:b.registerVersion,setLogLevel:b.setLogLevel,onLog:b.onLog,apps:null,SDK_VERSION:b.SDK_VERSION,INTERNAL:{registerComponent:function(ue){const Me=ue.name,q=Me.replace("-compat","");if(b._registerComponent(ue)&&"PUBLIC"===ue.type){const Q=(ne=Se())=>{if("function"!=typeof ne[q])throw Y.create("invalid-app-argument",{appName:Me});return ne[q]()};void 0!==ue.serviceProps&&(0,s.ZB)(Q,ue.serviceProps),me[q]=Q,Ge.prototype[q]=function(...ne){return this._getService.bind(this,Me).apply(this,ue.multipleInstances?ne:[])}}return"PUBLIC"===ue.type?me[q]:null},removeApp:function(ue){delete Ie[ue]},useAsService:function(ue,Me){return"serverAuth"===Me?null:Me},modularAPIs:b}};function Se(ue){if(!(0,s.r3)(Ie,ue=ue||b._DEFAULT_ENTRY_NAME))throw Y.create("no-app",{appName:ue});return Ie[ue]}return me.default=me,Object.defineProperty(me,"apps",{get:function(){return Object.keys(Ie).map(ue=>Ie[ue])}}),Se.App=Ge,me}(O);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function(me){(0,s.ZB)(Ge,me)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),Ge}(),X=new k.Yd("@firebase/app-compat");if((0,s.jU)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=te;(0,b.registerVersion)("@firebase/app-compat","0.1.25",undefined)},1572:(St,M,R)=>{"use strict";R.r(M),R.d(M,{FirebaseError:()=>k.ZR,SDK_VERSION:()=>Si,_DEFAULT_ENTRY_NAME:()=>Xe,_addComponent:()=>en,_addOrOverwriteComponent:()=>vn,_apps:()=>dt,_clearComponents:()=>ur,_components:()=>qt,_getProvider:()=>dn,_registerComponent:()=>Ot,_removeServiceInstance:()=>_n,deleteApp:()=>yi,getApp:()=>Cr,getApps:()=>Di,initializeApp:()=>ri,onLog:()=>Zn,registerVersion:()=>Fn,setLogLevel:()=>Jn});var s=R(8239),I=R(1177),b=R(3855),k=R(4213),O=R(5600);class U{constructor($e){this.container=$e}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function(xe){const $e=xe.getComponent();return"VERSION"===(null==$e?void 0:$e.type)}(ht)){const wt=ht.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(ht=>ht).join(" ")}}const re="@firebase/app",te=new b.Yd("@firebase/app"),Xe="[DEFAULT]",it={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,qt=new Map;function en(xe,$e){try{xe.container.addComponent($e)}catch(ht){te.debug(`Component ${$e.name} failed to register with FirebaseApp ${xe.name}`,ht)}}function vn(xe,$e){xe.container.addOrOverwriteComponent($e)}function Ot(xe){const $e=xe.name;if(qt.has($e))return te.debug(`There were multiple attempts to register component ${$e}.`),!1;qt.set($e,xe);for(const ht of dt.values())en(ht,xe);return!0}function dn(xe,$e){const ht=xe.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),xe.container.getProvider($e)}function _n(xe,$e,ht=Xe){dn(xe,$e).clearInstance(ht)}function ur(){qt.clear()}const Nn=new k.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Nr{constructor($e,ht,wt){this._isDeleted=!1,this._options=Object.assign({},$e),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new I.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this.checkDestroyed(),this._automaticDataCollectionEnabled=$e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($e){this._isDeleted=$e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const Si="9.8.1";function ri(xe,$e={}){"object"!=typeof $e&&($e={name:$e});const ht=Object.assign({name:Xe,automaticDataCollectionEnabled:!1},$e),wt=ht.name;if("string"!=typeof wt||!wt)throw Nn.create("bad-app-name",{appName:String(wt)});const Xt=dt.get(wt);if(Xt){if((0,k.vZ)(xe,Xt.options)&&(0,k.vZ)(ht,Xt.config))return Xt;throw Nn.create("duplicate-app",{appName:wt})}const fn=new I.H0(wt);for(const on of qt.values())fn.addComponent(on);const Gn=new Nr(xe,ht,fn);return dt.set(wt,Gn),Gn}function Cr(xe=Xe){const $e=dt.get(xe);if(!$e)throw Nn.create("no-app",{appName:xe});return $e}function Di(){return Array.from(dt.values())}function yi(xe){return tn.apply(this,arguments)}function tn(){return(tn=(0,s.Z)(function*(xe){const $e=xe.name;dt.has($e)&&(dt.delete($e),yield Promise.all(xe.container.getProviders().map(ht=>ht.delete())),xe.isDeleted=!0)})).apply(this,arguments)}function Fn(xe,$e,ht){var wt;let Xt=null!==(wt=it[xe])&&void 0!==wt?wt:xe;ht&&(Xt+=`-${ht}`);const fn=Xt.match(/\s|\//),Gn=$e.match(/\s|\//);if(fn||Gn){const on=[`Unable to register library "${Xt}" with version "${$e}":`];return fn&&on.push(`library name "${Xt}" contains illegal characters (whitespace or "/")`),fn&&Gn&&on.push("and"),Gn&&on.push(`version name "${$e}" contains illegal characters (whitespace or "/")`),void te.warn(on.join(" "))}Ot(new I.wA(`${Xt}-version`,()=>({library:Xt,version:$e}),"VERSION"))}function Zn(xe,$e){if(null!==xe&&"function"!=typeof xe)throw Nn.create("invalid-log-argument");(0,b.Am)(xe,$e)}function Jn(xe){(0,b.Ub)(xe)}const ar="firebase-heartbeat-store";let Ln=null;function Oi(){return Ln||(Ln=(0,O.X3)("firebase-heartbeat-database",1,{upgrade:(xe,$e)=>{0===$e&&xe.createObjectStore(ar)}}).catch(xe=>{throw Nn.create("storage-open",{originalErrorMessage:xe.message})})),Ln}function Ft(){return(Ft=(0,s.Z)(function*(xe){try{return(yield Oi()).transaction(ar).objectStore(ar).get(ci(xe))}catch($e){throw Nn.create("storage-get",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function Lt(xe,$e){return li.apply(this,arguments)}function li(){return(li=(0,s.Z)(function*(xe,$e){try{const wt=(yield Oi()).transaction(ar,"readwrite");return yield wt.objectStore(ar).put($e,ci(xe)),wt.done}catch(ht){throw Nn.create("storage-set",{originalErrorMessage:ht.message})}})).apply(this,arguments)}function ci(xe){return`${xe.name}!${xe.options.appId}`}class Yn{constructor($e){this.container=$e,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new Ae(ht),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var $e=this;return(0,s.Z)(function*(){const wt=$e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xt=Kn();if(null===$e._heartbeatsCache&&($e._heartbeatsCache=yield $e._heartbeatsCachePromise),$e._heartbeatsCache.lastSentHeartbeatDate!==Xt&&!$e._heartbeatsCache.heartbeats.some(fn=>fn.date===Xt))return $e._heartbeatsCache.heartbeats.push({date:Xt,agent:wt}),$e._heartbeatsCache.heartbeats=$e._heartbeatsCache.heartbeats.filter(fn=>{const Gn=new Date(fn.date).valueOf();return Date.now()-Gn<=2592e6}),$e._storage.overwrite($e._heartbeatsCache)})()}getHeartbeatsHeader(){var $e=this;return(0,s.Z)(function*(){if(null===$e._heartbeatsCache&&(yield $e._heartbeatsCachePromise),null===$e._heartbeatsCache||0===$e._heartbeatsCache.heartbeats.length)return"";const ht=Kn(),{heartbeatsToSend:wt,unsentEntries:Xt}=function(xe,$e=1024){const ht=[];let wt=xe.slice();for(const Xt of xe){const fn=ht.find(Gn=>Gn.agent===Xt.agent);if(fn){if(fn.dates.push(Xt.date),Le(ht)>$e){fn.dates.pop();break}}else if(ht.push({agent:Xt.agent,dates:[Xt.date]}),Le(ht)>$e){ht.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:ht,unsentEntries:wt}}($e._heartbeatsCache.heartbeats),fn=(0,k.L)(JSON.stringify({version:2,heartbeats:wt}));return $e._heartbeatsCache.lastSentHeartbeatDate=ht,Xt.length>0?($e._heartbeatsCache.heartbeats=Xt,yield $e._storage.overwrite($e._heartbeatsCache)):($e._heartbeatsCache.heartbeats=[],$e._storage.overwrite($e._heartbeatsCache)),fn})()}}function Kn(){return(new Date).toISOString().substring(0,10)}class Ae{constructor($e){this.app=$e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,s.Z)(function*(){return!!(0,k.hl)()&&(0,k.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $e=this;return(0,s.Z)(function*(){return(yield $e._canUseIndexedDBPromise)&&(yield function(xe){return Ft.apply(this,arguments)}($e.app))||{heartbeats:[]}})()}overwrite($e){var ht=this;return(0,s.Z)(function*(){var wt;if(yield ht._canUseIndexedDBPromise){const fn=yield ht.read();return Lt(ht.app,{lastSentHeartbeatDate:null!==(wt=$e.lastSentHeartbeatDate)&&void 0!==wt?wt:fn.lastSentHeartbeatDate,heartbeats:$e.heartbeats})}})()}add($e){var ht=this;return(0,s.Z)(function*(){var wt;if(yield ht._canUseIndexedDBPromise){const fn=yield ht.read();return Lt(ht.app,{lastSentHeartbeatDate:null!==(wt=$e.lastSentHeartbeatDate)&&void 0!==wt?wt:fn.lastSentHeartbeatDate,heartbeats:[...fn.heartbeats,...$e.heartbeats]})}})()}}function Le(xe){return(0,k.L)(JSON.stringify({version:2,heartbeats:xe})).length}Ot(new I.wA("platform-logger",$e=>new U($e),"PRIVATE")),Ot(new I.wA("heartbeat",$e=>new Yn($e),"PRIVATE")),Fn(re,"0.7.24",""),Fn(re,"0.7.24","esm2017"),Fn("fire-js","")},1177:(St,M,R)=>{"use strict";R.d(M,{wA:()=>b,H0:()=>re,zt:()=>O});var s=R(8239),I=R(4213);class b{constructor(te,X,we){this.name=te,this.instanceFactory=X,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const k="[DEFAULT]";class O{constructor(te,X){this.name=te,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const X=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(X)){const we=new I.BH;if(this.instancesDeferred.set(X,we),this.isInitialized(X)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:X});Je&&we.resolve(Je)}catch(Je){}}return this.instancesDeferred.get(X).promise}getImmediate(te){var X;const we=this.normalizeInstanceIdentifier(null==te?void 0:te.identifier),Je=null!==(X=null==te?void 0:te.optional)&&void 0!==X&&X;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(qe){if(Je)return null;throw qe}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if("EAGER"===te.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:k})}catch(X){}for(const[X,we]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(X);try{const qe=this.getOrInitializeService({instanceIdentifier:Je});we.resolve(qe)}catch(qe){}}}}clearInstance(te=k){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,s.Z)(function*(){const X=Array.from(te.instances.values());yield Promise.all([...X.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...X.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=k){return this.instances.has(te)}getOptions(te=k){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:X={}}=te,we=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:we,options:X});for(const[qe,je]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(qe)&&je.resolve(Je);return Je}onInit(te,X){var we;const Je=this.normalizeInstanceIdentifier(X),qe=null!==(we=this.onInitCallbacks.get(Je))&&void 0!==we?we:new Set;qe.add(te),this.onInitCallbacks.set(Je,qe);const je=this.instances.get(Je);return je&&te(je,Je),()=>{qe.delete(te)}}invokeOnInitCallbacks(te,X){const we=this.onInitCallbacks.get(X);if(we)for(const Je of we)try{Je(te,X)}catch(qe){}}getOrInitializeService({instanceIdentifier:te,options:X={}}){let we=this.instances.get(te);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(he=te,he===k?void 0:he),options:X}),this.instances.set(te,we),this.instancesOptions.set(te,X),this.invokeOnInitCallbacks(we,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,we)}catch(Je){}var he;return we||null}normalizeInstanceIdentifier(te=k){return this.component?this.component.multipleInstances?te:k:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class re{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const X=this.getProvider(te.name);if(X.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);X.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const X=new O(te,this);return this.providers.set(te,X),X}getProviders(){return Array.from(this.providers.values())}}},3855:(St,M,R)=>{"use strict";R.d(M,{in:()=>I,Yd:()=>Y,Ub:()=>re,Am:()=>he});const s=[];var I=(()=>{return(te=I||(I={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",I;var te})();const b={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},k=I.INFO,O={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},U=(te,X,...we)=>{if(X<te.logLevel)return;const Je=(new Date).toISOString(),qe=O[X];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[qe](`[${Je}]  ${te.name}:`,...we)};class Y{constructor(X){this.name=X,this._logLevel=k,this._logHandler=U,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in I))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?b[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...X),this._logHandler(this,I.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...X),this._logHandler(this,I.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,I.INFO,...X),this._logHandler(this,I.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,I.WARN,...X),this._logHandler(this,I.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,I.ERROR,...X),this._logHandler(this,I.ERROR,...X)}}function re(te){s.forEach(X=>{X.setLogLevel(te)})}function he(te,X){for(const we of s){let Je=null;X&&X.level&&(Je=b[X.level]),we.userLogHandler=null===te?null:(qe,je,...Ge)=>{const Ie=Ge.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch(J){return null}}).filter(me=>me).join(" ");je>=(null!=Je?Je:qe.logLevel)&&te({level:I[je].toLowerCase(),message:Ie,args:Ge,type:qe.name})}}}},5600:(St,M,R)=>{"use strict";R.d(M,{Lj:()=>De,X3:()=>Se});var s=R(8239);let b,k;const Y=new WeakMap,re=new WeakMap,he=new WeakMap,te=new WeakMap,X=new WeakMap;let qe={get(Me,q,Q){if(Me instanceof IDBTransaction){if("done"===q)return re.get(Me);if("objectStoreNames"===q)return Me.objectStoreNames||he.get(Me);if("store"===q)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return me(Me[q])},set:(Me,q,Q)=>(Me[q]=Q,!0),has:(Me,q)=>Me instanceof IDBTransaction&&("done"===q||"store"===q)||q in Me};function Ie(Me){return"function"==typeof Me?function(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(k||(k=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Me)?function(...q){return Me.apply(J(this),q),me(Y.get(this))}:function(...q){return me(Me.apply(J(this),q))}:function(q,...Q){const ne=Me.call(J(this),q,...Q);return he.set(ne,q.sort?q.sort():[q]),me(ne)}}(Me):(Me instanceof IDBTransaction&&function(Me){if(re.has(Me))return;const q=new Promise((Q,ne)=>{const ie=()=>{Me.removeEventListener("complete",Ce),Me.removeEventListener("error",W),Me.removeEventListener("abort",W)},Ce=()=>{Q(),ie()},W=()=>{ne(Me.error||new DOMException("AbortError","AbortError")),ie()};Me.addEventListener("complete",Ce),Me.addEventListener("error",W),Me.addEventListener("abort",W)});re.set(Me,q)}(Me),((Me,q)=>q.some(Q=>Me instanceof Q))(Me,b||(b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Me,qe):Me)}function me(Me){if(Me instanceof IDBRequest)return function(Me){const q=new Promise((Q,ne)=>{const ie=()=>{Me.removeEventListener("success",Ce),Me.removeEventListener("error",W)},Ce=()=>{Q(me(Me.result)),ie()},W=()=>{ne(Me.error),ie()};Me.addEventListener("success",Ce),Me.addEventListener("error",W)});return q.then(Q=>{Q instanceof IDBCursor&&Y.set(Q,Me)}).catch(()=>{}),X.set(q,Me),q}(Me);if(te.has(Me))return te.get(Me);const q=Ie(Me);return q!==Me&&(te.set(Me,q),X.set(q,Me)),q}const J=Me=>X.get(Me);function Se(Me,q,{blocked:Q,upgrade:ne,blocking:ie,terminated:Ce}={}){const W=indexedDB.open(Me,q),ce=me(W);return ne&&W.addEventListener("upgradeneeded",Ve=>{ne(me(W.result),Ve.oldVersion,Ve.newVersion,me(W.transaction))}),Q&&W.addEventListener("blocked",()=>Q()),ce.then(Ve=>{Ce&&Ve.addEventListener("close",()=>Ce()),ie&&Ve.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ce}function De(Me,{blocked:q}={}){const Q=indexedDB.deleteDatabase(Me);return q&&Q.addEventListener("blocked",()=>q()),me(Q).then(()=>{})}const Fe=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],Ue=new Map;function ue(Me,q){if(!(Me instanceof IDBDatabase)||q in Me||"string"!=typeof q)return;if(Ue.get(q))return Ue.get(q);const Q=q.replace(/FromIndex$/,""),ne=q!==Q,ie=Ne.includes(Q);if(!(Q in(ne?IDBIndex:IDBObjectStore).prototype)||!ie&&!Fe.includes(Q))return;const Ce=function(){var W=(0,s.Z)(function*(ce,...Ve){const lt=this.transaction(ce,ie?"readwrite":"readonly");let Xe=lt.store;return ne&&(Xe=Xe.index(Ve.shift())),(yield Promise.all([Xe[Q](...Ve),ie&&lt.done]))[0]});return function(Ve){return W.apply(this,arguments)}}();return Ue.set(q,Ce),Ce}var Me;qe=fs(Mt({},Me=qe),{get:(q,Q,ne)=>ue(q,Q)||Me.get(q,Q,ne),has:(q,Q)=>!!ue(q,Q)||Me.has(q,Q)})},8239:(St,M,R)=>{"use strict";function s(b,k,O,U,Y,re,he){try{var te=b[re](he),X=te.value}catch(we){return void O(we)}te.done?k(X):Promise.resolve(X).then(U,Y)}function I(b){return function(){var k=this,O=arguments;return new Promise(function(U,Y){var re=b.apply(k,O);function he(X){s(re,U,Y,he,te,"next",X)}function te(X){s(re,U,Y,he,te,"throw",X)}he(void 0)})}}R.d(M,{Z:()=>I})}},St=>{St(St.s=4648)}]);