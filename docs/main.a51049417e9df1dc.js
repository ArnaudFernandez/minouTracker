"use strict";var j5=Object.defineProperty,H5=Object.defineProperties,$5=Object.getOwnPropertyDescriptors,Ej=Object.getOwnPropertySymbols,G5=Object.prototype.hasOwnProperty,z5=Object.prototype.propertyIsEnumerable,wj=(Xe,be,F)=>be in Xe?j5(Xe,be,{enumerable:!0,configurable:!0,writable:!0,value:F}):Xe[be]=F,it=(Xe,be)=>{for(var F in be||(be={}))G5.call(be,F)&&wj(Xe,F,be[F]);if(Ej)for(var F of Ej(be))z5.call(be,F)&&wj(Xe,F,be[F]);return Xe},pi=(Xe,be)=>H5(Xe,$5(be));(self.webpackChunkfoodTrackingApp=self.webpackChunkfoodTrackingApp||[]).push([[179],{7905:(Xe,be,F)=>{F.d(be,{hO:()=>qe,xv:()=>ge,Dh:()=>de,GT:()=>Ee,cc:()=>Ae,on:()=>z,pX:()=>ce});var h=F(3668),re=F(7892),L=F(7233);Xe=F.hmd(Xe);const he=["ngOnDestroy"],ce=(oe,Te,je,Le={})=>new Proxy(oe,{get:(ct,Pe)=>je.runOutsideAngular(()=>{var Ge;if(oe[Pe])return(null===(Ge=null==Le?void 0:Le.spy)||void 0===Ge?void 0:Ge.get)&&Le.spy.get(Pe,oe[Pe]),oe[Pe];if(he.indexOf(Pe)>-1)return()=>{};const Ye=Te.toPromise().then(we=>{const Q=we&&we[Pe];return"function"==typeof Q?Q.bind(we):Q&&Q.then?Q.then(ne=>je.run(()=>ne)):je.run(()=>Q)});return new Proxy(()=>{},{get:(we,Q)=>Ye[Q],apply:(we,Q,ne)=>Ye.then(fe=>{var _e;const Re=fe&&fe(...ne);return(null===(_e=null==Le?void 0:Le.spy)||void 0===_e?void 0:_e.apply)&&Le.spy.apply(Pe,ne,Re),Re})})})}),Ee=(oe,Te)=>{Te.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(Le=>{Object.defineProperty(oe.prototype,Le,Object.getOwnPropertyDescriptor(je.prototype||je,Le))})})};class le{constructor(Te){return Te}}const de=new h.OlP("angularfire2.app.options"),ge=new h.OlP("angularfire2.app.name");function z(oe,Te,je){const ct="object"==typeof je&&je||{};ct.name=ct.name||"string"==typeof je&&je||"[DEFAULT]";const Ge=re.Z.apps.filter(Ye=>Ye&&Ye.name===ct.name)[0]||Te.runOutsideAngular(()=>re.Z.initializeApp(oe,ct));try{JSON.stringify(oe)!==JSON.stringify(Ge.options)&&K("error",`${Ge.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return new le(Ge)}const K=(oe,...Te)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[oe](...Te)},ae={provide:le,useFactory:z,deps:[de,h.R0b,[new h.FiY,ge]]};let qe=(()=>{class oe{constructor(je){re.Z.registerVersion("angularfire",L.q4.full,"core"),re.Z.registerVersion("angularfire",L.q4.full,"app-compat"),re.Z.registerVersion("angular",h.q4F.full,je.toString())}static initializeApp(je,Le){return{ngModule:oe,providers:[{provide:de,useValue:je},{provide:ge,useValue:Le}]}}}return oe.\u0275fac=function(je){return new(je||oe)(h.LFG(h.Lbi))},oe.\u0275mod=h.oAB({type:oe}),oe.\u0275inj=h.cJS({providers:[ae]}),oe})();function Ae(oe,Te,je,Le,ct){const[,Pe,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===oe)||[];if(Pe)return function(oe,Te){try{return oe.toString()===Te.toString()}catch(je){return oe===Te}}(ct,Ge)||(Ve("error",`${Te} was already initialized on the ${je} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),Ve("warn",{is:ct,was:Ge})),Pe;{const Ye=Le();return globalThis.\u0275AngularfireInstanceCache.push([oe,Ye,ct]),Ye}}const He=!!Xe.hot,Ve=(oe,...Te)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[oe](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(Xe,be,F)=>{F.d(be,{q4:()=>sc,iC:()=>uo,HU:()=>ac,vb:()=>_f,JM:()=>gf});var h=F(3668),re=F(7713),L=F(8239),he=F(1572),ce=F(4213),Ee=F(1177),le=F(3855),de=F(5600);const ge="@firebase/installations",z="0.5.9",ae=`w:${z}`,qe="FIS_v2",Te=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function je(T){return T instanceof ce.ZR&&T.code.includes("request-failed")}function Le({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function ct(T){return{token:T.token,requestStatus:2,expiresIn:fe(T.expiresIn),creationTime:Date.now()}}function Pe(T,M){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,L.Z)(function*(T,M){const B=(yield M.json()).error;return Te.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Ye({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function we(T,{refreshToken:M}){const N=Ye(T);return N.append("Authorization",function(T){return`${qe} ${T}`}(M)),N}function Q(T){return ne.apply(this,arguments)}function ne(){return(ne=(0,L.Z)(function*(T){const M=yield T();return M.status>=500&&M.status<600?T():M})).apply(this,arguments)}function fe(T){return Number(T.replace("s","000"))}function Re(T,M){return ue.apply(this,arguments)}function ue(){return(ue=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:M},{fid:N}){const B=Le(T),J=Ye(T),X=M.getImmediate({optional:!0});if(X){const vt=yield X.getHeartbeatsHeader();vt&&J.append("x-firebase-client",vt)}const at={method:"POST",headers:J,body:JSON.stringify({fid:N,authVersion:qe,appId:T.appId,sdkVersion:ae})},_t=yield Q(()=>fetch(B,at));if(_t.ok){const vt=yield _t.json();return{fid:vt.fid||N,registrationStatus:2,refreshToken:vt.refreshToken,authToken:ct(vt.authToken)}}throw yield Pe("Create Installation",_t)})).apply(this,arguments)}function bt(T){return new Promise(M=>{setTimeout(M,T)})}const Dn=/^[cdef][\w-]{21}$/;function Zt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Dn.test(N)?N:""}catch(T){return""}}function an(T){return`${T.appName}!${T.appId}`}const ur=new Map;function mi(T,M){const N=an(T);Xn(N,M),function(T,M){const N=(!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=T=>{Xn(T.data.key,T.data.fid)}),Tr);N&&N.postMessage({key:T,fid:M}),0===ur.size&&Tr&&(Tr.close(),Tr=null)}(N,M)}function Xn(T,M){const N=ur.get(T);if(N)for(const B of N)B(M)}let Tr=null;const _r="firebase-installations-store";let Oe=null;function yr(){return Oe||(Oe=(0,de.X3)("firebase-installations-database",1,{upgrade:(T,M)=>{0===M&&T.createObjectStore(_r)}})),Oe}function ft(T,M){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,L.Z)(function*(T,M){const N=an(T),J=(yield yr()).transaction(_r,"readwrite"),X=J.objectStore(_r),ke=yield X.get(N);return yield X.put(M,N),yield J.done,(!ke||ke.fid!==M.fid)&&mi(T,M.fid),M})).apply(this,arguments)}function kn(T){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,L.Z)(function*(T){const M=an(T),B=(yield yr()).transaction(_r,"readwrite");yield B.objectStore(_r).delete(M),yield B.done})).apply(this,arguments)}function Yr(T,M){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(T,M){const N=an(T),J=(yield yr()).transaction(_r,"readwrite"),X=J.objectStore(_r),ke=yield X.get(N),at=M(ke);return void 0===at?yield X.delete(N):yield X.put(at,N),yield J.done,at&&(!ke||ke.fid!==at.fid)&&mi(T,at.fid),at})).apply(this,arguments)}function zn(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,L.Z)(function*(T){let M;const N=yield Yr(T.appConfig,B=>{const J=Ua(B),X=Pn(T,J);return M=X.registrationPromise,X.installationEntry});return""===N.fid?{installationEntry:yield M}:{installationEntry:N,registrationPromise:M}})).apply(this,arguments)}function Ua(T){return Dt(T||{fid:Zt(),registrationStatus:0})}function Pn(T,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Te.create("app-offline"))};const N={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},B=function(T,M){return Et.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:B}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Zs(T)}:{installationEntry:M}}function Et(){return(Et=(0,L.Z)(function*(T,M){try{const N=yield Re(T,M);return ft(T.appConfig,N)}catch(N){throw je(N)&&409===N.customData.serverCode?yield kn(T.appConfig):yield ft(T.appConfig,{fid:M.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Zs(T){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,L.Z)(function*(T){let M=yield Qr(T.appConfig);for(;1===M.registrationStatus;)yield bt(100),M=yield Qr(T.appConfig);if(0===M.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield zn(T);return B||N}return M})).apply(this,arguments)}function Qr(T){return Yr(T,M=>{if(!M)throw Te.create("installation-not-found");return Dt(M)})}function Dt(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function To(T,M){return W.apply(this,arguments)}function W(){return(W=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:M},N){const B=H(T,N),J=we(T,N),X=M.getImmediate({optional:!0});if(X){const vt=yield X.getHeartbeatsHeader();vt&&J.append("x-firebase-client",vt)}const at={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ae,appId:T.appId}})},_t=yield Q(()=>fetch(B,at));if(_t.ok)return ct(yield _t.json());throw yield Pe("Generate Auth Token",_t)})).apply(this,arguments)}function H(T,{fid:M}){return`${Le(T)}/${M}/authTokens:generate`}function Y(T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,L.Z)(function*(T,M=!1){let N;const B=yield Yr(T.appConfig,X=>{if(!kt(X))throw Te.create("not-registered");const ke=X.authToken;if(!M&&pn(ke))return X;if(1===ke.requestStatus)return N=q(T,M),X;{if(!navigator.onLine)throw Te.create("app-offline");const at=Or(X);return N=tt(T,at),at}});return N?yield N:B.authToken})).apply(this,arguments)}function q(T,M){return se.apply(this,arguments)}function se(){return(se=(0,L.Z)(function*(T,M){let N=yield xe(T.appConfig);for(;1===N.authToken.requestStatus;)yield bt(100),N=yield xe(T.appConfig);const B=N.authToken;return 0===B.requestStatus?Y(T,M):B})).apply(this,arguments)}function xe(T){return Yr(T,M=>{if(!kt(M))throw Te.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function tt(T,M){return At.apply(this,arguments)}function At(){return(At=(0,L.Z)(function*(T,M){try{const N=yield To(T,M),B=Object.assign(Object.assign({},M),{authToken:N});return yield ft(T.appConfig,B),N}catch(N){if(!je(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield ft(T.appConfig,B)}else yield kn(T.appConfig);throw N}})).apply(this,arguments)}function kt(T){return void 0!==T&&2===T.registrationStatus}function pn(T){return 2===T.requestStatus&&!function(T){const M=Date.now();return M<T.creationTime||T.creationTime+T.expiresIn<M+36e5}(T)}function Or(T){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:M})}function Hu(){return(Hu=(0,L.Z)(function*(T){const M=T,{installationEntry:N,registrationPromise:B}=yield zn(M);return B?B.catch(console.error):Y(M).catch(console.error),N.fid})).apply(this,arguments)}function oa(){return(oa=(0,L.Z)(function*(T,M=!1){const N=T;return yield aa(N),(yield Y(N,M)).token})).apply(this,arguments)}function aa(T){return ir.apply(this,arguments)}function ir(){return(ir=(0,L.Z)(function*(T){const{registrationPromise:M}=yield zn(T);M&&(yield M)})).apply(this,arguments)}function Jr(T){return Te.create("missing-app-config-values",{valueName:T})}const Jn="installations";(0,he._registerComponent)(new Ee.wA(Jn,T=>{const M=T.getProvider("app").getImmediate(),N=function(T){if(!T||!T.options)throw Jr("App Configuration");if(!T.name)throw Jr("App Name");const M=["projectId","apiKey","appId"];for(const N of M)if(!T.options[N])throw Jr(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(M);return{app:M,appConfig:N,heartbeatServiceProvider:(0,he._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,he._registerComponent)(new Ee.wA("installations-internal",T=>{const M=T.getProvider("app").getImmediate(),N=(0,he._getProvider)(M,Jn).getImmediate();return{getId:()=>function(T){return Hu.apply(this,arguments)}(N),getToken:J=>function(T){return oa.apply(this,arguments)}(N,J)}},"PRIVATE")),(0,he.registerVersion)(ge,z),(0,he.registerVersion)(ge,z,"esm2017");const wt="@firebase/remote-config",Xt=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nf{constructor(M,N,B,J){this.client=M,this.storage=N,this.storageCache=B,this.logger=J}isCachedDataFresh(M,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,J=B<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${J}.`),J}fetch(M){var N=this;return(0,L.Z)(function*(){const[B,J]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(J&&N.isCachedDataFresh(M.cacheMaxAgeMillis,B))return J;M.eTag=J&&J.eTag;const X=yield N.client.fetch(M),ke=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&ke.push(N.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(ke),X})()}}function wm(T=navigator){return T.languages&&T.languages[0]||T.language}class ji{constructor(M,N,B,J,X,ke){this.firebaseInstallations=M,this.sdkVersion=N,this.namespace=B,this.projectId=J,this.apiKey=X,this.appId=ke}fetch(M){var N=this;return(0,L.Z)(function*(){const[B,J]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,at={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},_t={sdk_version:N.sdkVersion,app_instance_id:B,app_instance_id_token:J,app_id:N.appId,language_code:wm()},vt={method:"POST",headers:at,body:JSON.stringify(_t)},Wt=fetch(ke,vt),Rt=new Promise((Ps,Zi)=>{M.signal.addEventListener(()=>{const Wo=new Error("The operation was aborted.");Wo.name="AbortError",Zi(Wo)})});let Ei;try{yield Promise.race([Wt,Rt]),Ei=yield Wt}catch(Ps){let Zi="fetch-client-network";throw"AbortError"===Ps.name&&(Zi="fetch-timeout"),Xt.create(Zi,{originalErrorMessage:Ps.message})}let vn=Ei.status;const Ur=Ei.headers.get("ETag")||void 0;let qo,ai;if(200===Ei.status){let Ps;try{Ps=yield Ei.json()}catch(Zi){throw Xt.create("fetch-client-parse",{originalErrorMessage:Zi.message})}qo=Ps.entries,ai=Ps.state}if("INSTANCE_STATE_UNSPECIFIED"===ai?vn=500:"NO_CHANGE"===ai?vn=304:("NO_TEMPLATE"===ai||"EMPTY_CONFIG"===ai)&&(qo={}),304!==vn&&200!==vn)throw Xt.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:Ur,config:qo}})()}}class $a{constructor(M,N){this.client=M,this.storage=N}fetch(M){var N=this;return(0,L.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(M,B)})()}attemptFetch(M,{throttleEndTimeMillis:N,backoffCount:B}){var J=this;return(0,L.Z)(function*(){yield function(T,M){return new Promise((N,B)=>{const J=Math.max(M-Date.now(),0),X=setTimeout(N,J);T.addEventListener(()=>{clearTimeout(X),B(Xt.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,N);try{const X=yield J.client.fetch(M);return yield J.storage.deleteThrottleMetadata(),X}catch(X){if(!function(T){if(!(T instanceof ce.ZR&&T.customData))return!1;const M=Number(T.customData.httpStatus);return 429===M||500===M||503===M||504===M}(X))throw X;const ke={throttleEndTimeMillis:Date.now()+(0,ce.$s)(B),backoffCount:B+1};return yield J.storage.setThrottleMetadata(ke),J.attemptFetch(M,ke)}})()}}class sf{constructor(M,N,B,J,X){this.app=M,this._client=N,this._storageCache=B,this._storage=J,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ga(T,M){const N=T.target.error||void 0;return Xt.create(M,{originalErrorMessage:N&&N.message})}const la="app_namespace_store";class $u{constructor(M,N,B,J=function(){return new Promise((T,M)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=B=>{M(Ga(B,"storage-open"))},N.onsuccess=B=>{T(B.target.result)},N.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(la,{keyPath:"compositeKey"})}}catch(N){M(Xt.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=M,this.appName=N,this.namespace=B,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var N=this;return(0,L.Z)(function*(){const B=yield N.openDbPromise;return new Promise((J,X)=>{const at=B.transaction([la],"readonly").objectStore(la),_t=N.createCompositeKey(M);try{const vt=at.get(_t);vt.onerror=Wt=>{X(Ga(Wt,"storage-get"))},vt.onsuccess=Wt=>{const Rt=Wt.target.result;J(Rt?Rt.value:void 0)}}catch(vt){X(Xt.create("storage-get",{originalErrorMessage:vt&&vt.message}))}})})()}set(M,N){var B=this;return(0,L.Z)(function*(){const J=yield B.openDbPromise;return new Promise((X,ke)=>{const _t=J.transaction([la],"readwrite").objectStore(la),vt=B.createCompositeKey(M);try{const Wt=_t.put({compositeKey:vt,value:N});Wt.onerror=Rt=>{ke(Ga(Rt,"storage-set"))},Wt.onsuccess=()=>{X()}}catch(Wt){ke(Xt.create("storage-set",{originalErrorMessage:Wt&&Wt.message}))}})})()}delete(M){var N=this;return(0,L.Z)(function*(){const B=yield N.openDbPromise;return new Promise((J,X)=>{const at=B.transaction([la],"readwrite").objectStore(la),_t=N.createCompositeKey(M);try{const vt=at.delete(_t);vt.onerror=Wt=>{X(Ga(Wt,"storage-delete"))},vt.onsuccess=()=>{J()}}catch(vt){X(Xt.create("storage-delete",{originalErrorMessage:vt&&vt.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class dd{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,L.Z)(function*(){const N=M.storage.getLastFetchStatus(),B=M.storage.getLastSuccessfulFetchTimestampMillis(),J=M.storage.getActiveConfig(),X=yield N;X&&(M.lastFetchStatus=X);const ke=yield B;ke&&(M.lastSuccessfulFetchTimestampMillis=ke);const at=yield J;at&&(M.activeConfig=at)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function za(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,L.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,he._registerComponent)(new Ee.wA("remote-config",function(M,{instanceIdentifier:N}){const B=M.getProvider("app").getImmediate(),J=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Xt.create("registration-window");if(!(0,ce.hl)())throw Xt.create("indexed-db-unavailable");const{projectId:X,apiKey:ke,appId:at}=B.options;if(!X)throw Xt.create("registration-project-id");if(!ke)throw Xt.create("registration-api-key");if(!at)throw Xt.create("registration-app-id");const _t=new $u(at,B.name,N=N||"firebase"),vt=new dd(_t),Wt=new le.Yd(wt);Wt.logLevel=le.in.ERROR;const Rt=new ji(J,he.SDK_VERSION,N,X,ke,at),Ei=new $a(Rt,_t),vn=new nf(Ei,_t,vt,Wt),Ur=new sf(B,vn,vt,_t,Wt);return function(T){const M=(0,ce.m9)(T);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Ur),Ur},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(wt,"0.3.8"),(0,he.registerVersion)(wt,"0.3.8","esm2017");const hd="/firebase-messaging-sw.js",Dm="/firebase-cloud-messaging-push-scope",ls="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xs="google.c.a.c_id",fd="google.c.a.c_l",pd="google.c.a.ts",xo="google.c.a.e";var As=(()=>{return(T=As||(As={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",As;var T})();function Ms(T){const M=new Uint8Array(T);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yi(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),J=new Uint8Array(B.length);for(let X=0;X<B.length;++X)J[X]=B.charCodeAt(X);return J}const qa="fcm_token_details_db",md="fcm_token_object_Store";function qu(T){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,L.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(qa))return null;let M=null;return(yield(0,de.X3)(qa,5,{upgrade:(B=(0,L.Z)(function*(J,X,ke,at){var _t;if(X<2||!J.objectStoreNames.contains(md))return;const vt=at.objectStore(md),Wt=yield vt.index("fcmSenderId").get(T);if(yield vt.clear(),Wt)if(2===X){const Rt=Wt;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;M={token:Rt.fcmToken,createTime:null!==(_t=Rt.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:Ms(Rt.vapidKey)}}}else if(3===X){const Rt=Wt;M={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Ms(Rt.auth),p256dh:Ms(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Ms(Rt.vapidKey)}}}else if(4===X){const Rt=Wt;M={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Ms(Rt.auth),p256dh:Ms(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Ms(Rt.vapidKey)}}}}),function(X,ke,at,_t){return B.apply(this,arguments)})})).close(),yield(0,de.Lj)(qa),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Wu(M)?M:null;var B}),Gl.apply(this,arguments)}function Wu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:M}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const nn="firebase-messaging-store";let xs=null;function Zu(){return xs||(xs=(0,de.X3)("firebase-messaging-database",1,{upgrade:(T,M)=>{0===M&&T.createObjectStore(nn)}})),xs}function jn(T){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(T){const M=Hi(T),B=yield(yield Zu()).transaction(nn).objectStore(nn).get(M);if(B)return B;{const J=yield qu(T.appConfig.senderId);if(J)return yield Wa(T,J),J}})).apply(this,arguments)}function Wa(T,M){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(T,M){const N=Hi(T),J=(yield Zu()).transaction(nn,"readwrite");return yield J.objectStore(nn).put(M,N),yield J.done,M})).apply(this,arguments)}function Nn(T){return eo.apply(this,arguments)}function eo(){return(eo=(0,L.Z)(function*(T){const M=Hi(T),B=(yield Zu()).transaction(nn,"readwrite");yield B.objectStore(nn).delete(M),yield B.done})).apply(this,arguments)}function Hi({appConfig:T}){return T.appId}const rn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ka(T,M){return Za.apply(this,arguments)}function Za(){return(Za=(0,L.Z)(function*(T,M){const N=yield Ya(T),B=Qa(M),J={method:"POST",headers:N,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(gt(T.appConfig),J)).json()}catch(ke){throw rn.create("token-subscribe-failed",{errorInfo:ke})}if(X.error)throw rn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw rn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function ks(T,M){return ri.apply(this,arguments)}function ri(){return(ri=(0,L.Z)(function*(T,M){const N=yield Ya(T),B=Qa(M.subscriptionOptions),J={method:"PATCH",headers:N,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(`${gt(T.appConfig)}/${M.token}`,J)).json()}catch(ke){throw rn.create("token-update-failed",{errorInfo:ke})}if(X.error)throw rn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw rn.create("token-update-no-token");return X.token})).apply(this,arguments)}function ko(T,M){return No.apply(this,arguments)}function No(){return(No=(0,L.Z)(function*(T,M){const B={method:"DELETE",headers:yield Ya(T)};try{const X=yield(yield fetch(`${gt(T.appConfig)}/${M}`,B)).json();if(X.error)throw rn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(J){throw rn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function gt({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Ya(T){return br.apply(this,arguments)}function br(){return(br=(0,L.Z)(function*({appConfig:T,installations:M}){const N=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Qa({p256dh:T,auth:M,endpoint:N,vapidKey:B}){const J={web:{endpoint:N,auth:M,p256dh:T}};return B!==ls&&(J.web.applicationPubKey=B),J}const gd=6048e5;function Xa(T){return ua.apply(this,arguments)}function ua(){return(ua=(0,L.Z)(function*(T){const M=yield $i(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:M.endpoint,auth:Ms(M.getKey("auth")),p256dh:Ms(M.getKey("p256dh"))},B=yield jn(T.firebaseDependencies);if(B){if(zl(B.subscriptionOptions,N))return Date.now()>=B.createTime+gd?qt(T,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield ko(T.firebaseDependencies,B.token)}catch(J){console.warn(J)}return On(T.firebaseDependencies,N)}return On(T.firebaseDependencies,N)})).apply(this,arguments)}function Yu(T){return Me.apply(this,arguments)}function Me(){return(Me=(0,L.Z)(function*(T){const M=yield jn(T.firebaseDependencies);M&&(yield ko(T.firebaseDependencies,M.token),yield Nn(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function qt(T,M){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,L.Z)(function*(T,M){try{const N=yield ks(T.firebaseDependencies,M),B=Object.assign(Object.assign({},M),{token:N,createTime:Date.now()});return yield Wa(T.firebaseDependencies,B),N}catch(N){throw yield Yu(T),N}})).apply(this,arguments)}function On(T,M){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,L.Z)(function*(T,M){const B={token:yield Ka(T,M),createTime:Date.now(),subscriptionOptions:M};return yield Wa(T,B),B.token})).apply(this,arguments)}function $i(T,M){return Er.apply(this,arguments)}function Er(){return(Er=(0,L.Z)(function*(T,M){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yi(M)})})).apply(this,arguments)}function zl(T,M){return M.vapidKey===T.vapidKey&&M.endpoint===T.endpoint&&M.auth===T.auth&&M.p256dh===T.p256dh}function Oo(T){const M={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,M){if(!M.notification)return;T.notification={};const N=M.notification.title;N&&(T.notification.title=N);const B=M.notification.body;B&&(T.notification.body=B);const J=M.notification.image;J&&(T.notification.image=J)}(M,T),function(T,M){!M.data||(T.data=M.data)}(M,T),function(T,M){if(!M.fcmOptions)return;T.fcmOptions={};const N=M.fcmOptions.link;N&&(T.fcmOptions.link=N);const B=M.fcmOptions.analytics_label;B&&(T.fcmOptions.analyticsLabel=B)}(M,T),M}function Fo(T){return"object"==typeof T&&!!T&&Xs in T}function dr(T,M){const N=[];for(let B=0;B<T.length;B++)N.push(T.charAt(B)),B<M.length&&N.push(M.charAt(B));return N.join("")}function ca(T){return rn.create("missing-app-config-values",{valueName:T})}dr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class to{constructor(M,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function(T){if(!T||!T.options)throw ca("App Configuration Object");if(!T.name)throw ca("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const B of M)if(!N[B])throw ca(B);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:J,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function cs(T){return el.apply(this,arguments)}function el(){return(el=(0,L.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(hd,{scope:Dm}),T.swRegistration.update().catch(()=>{})}catch(M){throw rn.create("failed-service-worker-registration",{browserErrorMessage:M.message})}})).apply(this,arguments)}function _d(T,M){return tl.apply(this,arguments)}function tl(){return(tl=(0,L.Z)(function*(T,M){if(!M&&!T.swRegistration&&(yield cs(T)),M||!T.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");T.swRegistration=M}})).apply(this,arguments)}function ql(T,M){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,L.Z)(function*(T,M){M?T.vapidKey=M:T.vapidKey||(T.vapidKey=ls)})).apply(this,arguments)}function Wl(){return(Wl=(0,L.Z)(function*(T,M){if(!navigator)throw rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rn.create("permission-blocked");return yield ql(T,null==M?void 0:M.vapidKey),yield _d(T,null==M?void 0:M.serviceWorkerRegistration),Xa(T)})).apply(this,arguments)}function da(T,M,N){return yd.apply(this,arguments)}function yd(){return(yd=(0,L.Z)(function*(T,M,N){const B=Kl(M);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[Xs],message_name:N[fd],message_time:N[pd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Kl(T){switch(T){case As.NOTIFICATION_CLICKED:return"notification_open";case As.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function nl(){return(nl=(0,L.Z)(function*(T,M){const N=M.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===As.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Oo(N)):T.onMessageHandler.next(Oo(N)));const B=N.data;Fo(B)&&"1"===B[xo]&&(yield da(T,N.messageType,B))})).apply(this,arguments)}const Zl="@firebase/messaging";function sl(){return An.apply(this,arguments)}function An(){return(An=(0,L.Z)(function*(){try{yield(0,ce.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,he._registerComponent)(new Ee.wA("messaging",T=>{const M=new to(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function(T,M){return nl.apply(this,arguments)}(M,N)),M},"PUBLIC")),(0,he._registerComponent)(new Ee.wA("messaging-internal",T=>{const M=T.getProvider("messaging").getImmediate();return{getToken:B=>function(T,M){return Wl.apply(this,arguments)}(M,B)}},"PRIVATE")),(0,he.registerVersion)(Zl,"0.9.13"),(0,he.registerVersion)(Zl,"0.9.13","esm2017");const ro="analytics",Ql="firebase_id",Ju="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wd="https://www.googletagmanager.com/gtag/js",Cn=new le.Yd("@firebase/analytics");function al(T){return Promise.all(T.map(M=>M.catch(N=>N)))}function Cd(T,M){const N=document.createElement("script");N.src=`${wd}?l=${T}&id=${M}`,N.async=!0,document.head.appendChild(N)}function Xl(T,M,N,B,J,X){return ll.apply(this,arguments)}function ll(){return(ll=(0,L.Z)(function*(T,M,N,B,J,X){const ke=B[J];try{if(ke)yield M[ke];else{const _t=(yield al(N)).find(vt=>vt.measurementId===J);_t&&(yield M[_t.appId])}}catch(at){Cn.error(at)}T("config",J,X)})).apply(this,arguments)}function ul(T,M,N,B,J){return ec.apply(this,arguments)}function ec(){return(ec=(0,L.Z)(function*(T,M,N,B,J){try{let X=[];if(J&&J.send_to){let ke=J.send_to;Array.isArray(ke)||(ke=[ke]);const at=yield al(N);for(const _t of ke){const vt=at.find(Rt=>Rt.measurementId===_t),Wt=vt&&M[vt.appId];if(!Wt){X=[];break}X.push(Wt)}}0===X.length&&(X=Object.values(M)),yield Promise.all(X),T("event",B,J||{})}catch(X){Cn.error(X)}})).apply(this,arguments)}function _n(){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(wd))return M;return null}const Ze=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fa=new class{constructor(M={},N=1e3){this.throttleMetadata=M,this.intervalMillis=N}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,N){this.throttleMetadata[M]=N}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Rm(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function cl(T){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,L.Z)(function*(T){var M;const{appId:N,apiKey:B}=T,J={method:"GET",headers:Rm(B)},X=Ju.replace("{app-id}",N),ke=yield fetch(X,J);if(200!==ke.status&&304!==ke.status){let at="";try{const _t=yield ke.json();(null===(M=_t.error)||void 0===M?void 0:M.message)&&(at=_t.error.message)}catch(_t){}throw Ze.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:at})}return ke.json()})).apply(this,arguments)}function eu(T){return ff.apply(this,arguments)}function ff(){return(ff=(0,L.Z)(function*(T,M=fa,N){const{appId:B,apiKey:J,measurementId:X}=T.options;if(!B)throw Ze.create("no-app-id");if(!J){if(X)return{measurementId:X,appId:B};throw Ze.create("no-api-key")}const ke=M.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},at=new jo;return setTimeout((0,L.Z)(function*(){at.abort()}),void 0!==N?N:6e4),Uo({appId:B,apiKey:J,measurementId:X},ke,at,M)})).apply(this,arguments)}function Uo(T,M,N){return nt.apply(this,arguments)}function nt(){return(nt=(0,L.Z)(function*(T,{throttleEndTimeMillis:M,backoffCount:N},B,J=fa){const{appId:X,measurementId:ke}=T;try{yield Bo(B,M)}catch(at){if(ke)return Cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${at.message}]`),{appId:X,measurementId:ke};throw at}try{const at=yield cl(T);return J.deleteThrottleMetadata(X),at}catch(at){if(!tc(at)){if(J.deleteThrottleMetadata(X),ke)return Cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${at.message}]`),{appId:X,measurementId:ke};throw at}const _t=503===Number(at.customData.httpStatus)?(0,ce.$s)(N,J.intervalMillis,30):(0,ce.$s)(N,J.intervalMillis),vt={throttleEndTimeMillis:Date.now()+_t,backoffCount:N+1};return J.setThrottleMetadata(X,vt),Cn.debug(`Calling attemptFetch again in ${_t} millis`),Uo(T,vt,B,J)}})).apply(this,arguments)}function Bo(T,M){return new Promise((N,B)=>{const J=Math.max(M-Date.now(),0),X=setTimeout(N,J);T.addEventListener(()=>{clearTimeout(X),B(Ze.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function tc(T){if(!(T instanceof ce.ZR&&T.customData))return!1;const M=Number(T.customData.httpStatus);return 429===M||500===M||503===M||504===M}class jo{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function tu(){return yn.apply(this,arguments)}function yn(){return(yn=(0,L.Z)(function*(){if(!(0,ce.hl)())return Cn.warn(Ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(T){return Cn.warn(Ze.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function so(){return(so=(0,L.Z)(function*(T,M,N,B,J,X,ke){var at;const _t=eu(T);_t.then(vn=>{N[vn.measurementId]=vn.appId,T.options.measurementId&&vn.measurementId!==T.options.measurementId&&Cn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>Cn.error(vn)),M.push(_t);const vt=tu().then(vn=>{if(vn)return B.getId()}),[Wt,Rt]=yield Promise.all([_t,vt]);_n()||Cd(X,Wt.measurementId),J("js",new Date);const Ei=null!==(at=null==ke?void 0:ke.config)&&void 0!==at?at:{};return Ei.origin="firebase",Ei.update=!0,null!=Rt&&(Ei[Ql]=Rt),J("config",Wt.measurementId,Ei),Wt.measurementId})).apply(this,arguments)}class nc{constructor(M){this.app=M}_delete(){return delete zi[this.app.options.appId],Promise.resolve()}}let zi={},pa=[];const Ho={};let ma,Lr,oo="dataLayer",si=!1;function Hn(T,M,N){!function(){const T=[];if((0,ce.ru)()&&T.push("This is a browser extension environment."),(0,ce.zI)()||T.push("Cookies are not available."),T.length>0){const M=T.map((B,J)=>`(${J+1}) ${B}`).join(" "),N=Ze.create("invalid-analytics-context",{errorInfo:M});Cn.warn(N.message)}}();const B=T.options.appId;if(!B)throw Ze.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Ze.create("no-api-key");Cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zi[B])throw Ze.create("already-exists",{id:B});if(!si){!function(T){let M=[];Array.isArray(window[T])?M=window[T]:window[T]=M}(oo);const{wrappedGtag:X,gtagCore:ke}=function(T,M,N,B,J){let X=function(...ke){window[B].push(arguments)};return window[J]&&"function"==typeof window[J]&&(X=window[J]),window[J]=function(T,M,N,B){function X(){return(X=(0,L.Z)(function*(ke,at,_t){try{"event"===ke?yield ul(T,M,N,at,_t):"config"===ke?yield Xl(T,M,N,B,at,_t):T("set",at)}catch(vt){Cn.error(vt)}})).apply(this,arguments)}return function(ke,at,_t){return X.apply(this,arguments)}}(X,T,M,N),{gtagCore:X,wrappedGtag:window[J]}}(zi,pa,Ho,oo,"gtag");Lr=X,ma=ke,si=!0}return zi[B]=function(T,M,N,B,J,X,ke){return so.apply(this,arguments)}(T,pa,Ho,M,ma,oo,N),new nc(T)}function Os(){return(Os=(0,L.Z)(function*(T,M,N,B,J){if(J&&J.global)T("event",N,B);else{const X=yield M;T("event",N,Object.assign(Object.assign({},B),{send_to:X}))}})).apply(this,arguments)}function hn(){return hl.apply(this,arguments)}function hl(){return(hl=(0,L.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(T){return!1}})).apply(this,arguments)}const ru="@firebase/analytics";(0,he._registerComponent)(new Ee.wA(ro,(M,{options:N})=>Hn(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,he._registerComponent)(new Ee.wA("analytics-internal",function(M){try{const N=M.getProvider(ro).getImmediate();return{logEvent:(B,J,X)=>function(T,M,N,B){T=(0,ce.m9)(T),function(T,M,N,B,J){return Os.apply(this,arguments)}(Lr,zi[T.app.options.appId],M,N,B).catch(J=>Cn.error(J))}(N,B,J,X)}}catch(N){throw Ze.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,he.registerVersion)(ru,"0.7.9"),(0,he.registerVersion)(ru,"0.7.9","esm2017");var Mn=F(2869),fl=F(8843);const _a=new class extends fl.v{}(class extends Mn.o{constructor(M,N){super(M,N),this.scheduler=M,this.work=N}schedule(M,N=0){return N>0?super.schedule(M,N):(this.delay=N,this.state=M,this.scheduler.flush(this),this)}execute(M,N){return N>0||this.closed?super.execute(M,N):this._execute(M,N)}requestAsyncId(M,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(M,N,B):M.flush(this)}});var hs=F(2210),Td=F(7384),zo=F(5222),ya=F(4763);const sc=new h.GfV("7.3.0"),ou="__angularfire_symbol__analyticsIsSupportedValue",oc="__angularfire_symbol__analyticsIsSupported",Dd="__angularfire_symbol__remoteConfigIsSupportedValue",va="__angularfire_symbol__remoteConfigIsSupported",Pt="__angularfire_symbol__messagingIsSupportedValue",Sr="__angularfire_symbol__messagingIsSupported";function gf(T,M,N){if(M){if(1===M.length)return M[0];const X=M.filter(ke=>ke.app===N);if(1===X.length)return X[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[oc]||(globalThis[oc]=hn().then(T=>globalThis[ou]=T).catch(()=>globalThis[ou]=!1)),globalThis[Sr]||(globalThis[Sr]=sl().then(T=>globalThis[Pt]=T).catch(()=>globalThis[Pt]=!1)),globalThis[va]||(globalThis[va]=za().then(T=>globalThis[Dd]=T).catch(()=>globalThis[Dd]=!1));const _f=(T,M)=>{const N=M?[M]:(0,re.C6)(),B=[];return N.forEach(J=>{J.container.getProvider(T).instances.forEach(ke=>{B.includes(ke)||B.push(ke)})}),B};function Ar(){}class au{constructor(M,N=_a){this.zone=M,this.delegate=N}now(){return this.delegate.now()}schedule(M,N,B){const J=this.zone;return this.delegate.schedule(function(ke){J.runGuarded(()=>{M.apply(this,[ke])})},N,B)}}class Sd{constructor(M){this.zone=M,this.task=null}call(M,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ar,{},Ar,Ar)),N.pipe((0,Td.b)({next:B,complete:B,error:B})).subscribe(M).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ac=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new au(Zone.current)),this.insideAngular=N.run(()=>new au(Zone.current,hs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function lo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function uo(T){return lo(),function(T){return function(N){return(N=N.lift(new Sd(T.ngZone))).pipe((0,zo.R)(T.outsideAngular),(0,ya.Q)(T.insideAngular))}}(lo())(T)}},4213:(Xe,be,F)=>{F.d(be,{BH:()=>qe,LL:()=>ue,ZR:()=>Re,gQ:()=>_r,zI:()=>ne,hu:()=>re,g5:()=>L,US:()=>Ee,tV:()=>ge,h$:()=>le,L:()=>de,$s:()=>Qr,r3:()=>dn,Sg:()=>Ae,ne:()=>Oe,p$:()=>z,vZ:()=>Tr,ZB:()=>K,gK:()=>Yr,pd:()=>Zr,m9:()=>To,z$:()=>$e,GJ:()=>mi,jU:()=>oe,ru:()=>Te,d:()=>Le,xb:()=>Xn,w1:()=>ct,hl:()=>we,uI:()=>He,UG:()=>Ve,Yr:()=>Ge,b$:()=>je,G6:()=>Ye,Mn:()=>Pe,w9:()=>ur,cI:()=>Dn,UI:()=>os,xO:()=>Un,zd:()=>Io,DV:()=>Ts,ug:()=>Pn,dS:()=>Ua,Pz:()=>Ct,Dv:()=>Nr,Wj:()=>zn,lb:()=>wn,eu:()=>Q});const re=function(W,H){if(!W)throw L(H)},L=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},he=function(W){const H=[];let Y=0;for(let Ie=0;Ie<W.length;Ie++){let q=W.charCodeAt(Ie);q<128?H[Y++]=q:q<2048?(H[Y++]=q>>6|192,H[Y++]=63&q|128):55296==(64512&q)&&Ie+1<W.length&&56320==(64512&W.charCodeAt(Ie+1))?(q=65536+((1023&q)<<10)+(1023&W.charCodeAt(++Ie)),H[Y++]=q>>18|240,H[Y++]=q>>12&63|128,H[Y++]=q>>6&63|128,H[Y++]=63&q|128):(H[Y++]=q>>12|224,H[Y++]=q>>6&63|128,H[Y++]=63&q|128)}return H},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,H){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let q=0;q<W.length;q+=3){const se=W[q],xe=q+1<W.length,tt=xe?W[q+1]:0,At=q+2<W.length,kt=At?W[q+2]:0;let Or=(15&tt)<<2|kt>>6,gi=63&kt;At||(gi=64,xe||(Or=64)),Ie.push(Y[se>>2],Y[(3&se)<<4|tt>>4],Y[Or],Y[gi])}return Ie.join("")},encodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(W):this.encodeByteArray(he(W),H)},decodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(W):function(W){const H=[];let Y=0,Ie=0;for(;Y<W.length;){const q=W[Y++];if(q<128)H[Ie++]=String.fromCharCode(q);else if(q>191&&q<224){const se=W[Y++];H[Ie++]=String.fromCharCode((31&q)<<6|63&se)}else if(q>239&&q<365){const At=((7&q)<<18|(63&W[Y++])<<12|(63&W[Y++])<<6|63&W[Y++])-65536;H[Ie++]=String.fromCharCode(55296+(At>>10)),H[Ie++]=String.fromCharCode(56320+(1023&At))}else{const se=W[Y++],xe=W[Y++];H[Ie++]=String.fromCharCode((15&q)<<12|(63&se)<<6|63&xe)}}return H.join("")}(this.decodeStringToByteArray(W,H))},decodeStringToByteArray(W,H){this.init_();const Y=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let q=0;q<W.length;){const se=Y[W.charAt(q++)],tt=q<W.length?Y[W.charAt(q)]:0;++q;const kt=q<W.length?Y[W.charAt(q)]:64;++q;const Nt=q<W.length?Y[W.charAt(q)]:64;if(++q,null==se||null==tt||null==kt||null==Nt)throw Error();Ie.push(se<<2|tt>>4),64!==kt&&(Ie.push(tt<<4&240|kt>>2),64!==Nt&&Ie.push(kt<<6&192|Nt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},le=function(W){const H=he(W);return Ee.encodeByteArray(H,!0)},de=function(W){return le(W).replace(/\./g,"")},ge=function(W){try{return Ee.decodeString(W,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z(W){return K(void 0,W)}function K(W,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return H}for(const Y in H)!H.hasOwnProperty(Y)||!ae(Y)||(W[Y]=K(W[Y],H[Y]));return W}function ae(W){return"__proto__"!==W}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Y)=>{this.resolve=H,this.reject=Y})}wrapCallback(H){return(Y,Ie)=>{Y?this.reject(Y):this.resolve(Ie),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Y):H(Y,Ie))}}}function Ae(W,H){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=H||"demo-project",q=W.iat||0,se=W.sub||W.user_id;if(!se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:q,exp:q+3600,auth_time:q,sub:se,user_id:se,firebase:{sign_in_provider:"custom",identities:{}}},W);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(xe)),""].join(".")}function $e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function oe(){return"object"==typeof self&&self.self===self}function Te(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return $e().indexOf("Electron/")>=0}function ct(){const W=$e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Pe(){return $e().indexOf("MSAppHost/")>=0}function Ge(){return!1}function Ye(){return!Ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){return"object"==typeof indexedDB}function Q(){return new Promise((W,H)=>{try{let Y=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Ie);q.onsuccess=()=>{q.result.close(),Y||self.indexedDB.deleteDatabase(Ie),W(!0)},q.onupgradeneeded=()=>{Y=!1},q.onerror=()=>{var se;H((null===(se=q.error)||void 0===se?void 0:se.message)||"")}}catch(Y){H(Y)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Re extends Error{constructor(H,Y,Ie){super(Y),this.code=H,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(H,Y,Ie){this.service=H,this.serviceName=Y,this.errors=Ie}create(H,...Y){const Ie=Y[0]||{},q=`${this.service}/${H}`,se=this.errors[H],xe=se?function(W,H){return W.replace(jt,(Y,Ie)=>{const q=H[Ie];return null!=q?String(q):`<${Ie}?>`})}(se,Ie):"Error";return new Re(q,`${this.serviceName}: ${xe} (${q}).`,Ie)}}const jt=/\{\$([^}]+)}/g;function Dn(W){return JSON.parse(W)}function Ct(W){return JSON.stringify(W)}const Zt=function(W){let H={},Y={},Ie={},q="";try{const se=W.split(".");H=Dn(ge(se[0])||""),Y=Dn(ge(se[1])||""),q=se[2],Ie=Y.d||{},delete Y.d}catch(se){}return{header:H,claims:Y,data:Ie,signature:q}},ur=function(W){const Y=Zt(W).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},mi=function(W){const H=Zt(W).claims;return"object"==typeof H&&!0===H.admin};function dn(W,H){return Object.prototype.hasOwnProperty.call(W,H)}function Ts(W,H){if(Object.prototype.hasOwnProperty.call(W,H))return W[H]}function Xn(W){for(const H in W)if(Object.prototype.hasOwnProperty.call(W,H))return!1;return!0}function os(W,H,Y){const Ie={};for(const q in W)Object.prototype.hasOwnProperty.call(W,q)&&(Ie[q]=H.call(Y,W[q],q,W));return Ie}function Tr(W,H){if(W===H)return!0;const Y=Object.keys(W),Ie=Object.keys(H);for(const q of Y){if(!Ie.includes(q))return!1;const se=W[q],xe=H[q];if(tn(se)&&tn(xe)){if(!Tr(se,xe))return!1}else if(se!==xe)return!1}for(const q of Ie)if(!Y.includes(q))return!1;return!0}function tn(W){return null!==W&&"object"==typeof W}function Un(W){const H=[];for(const[Y,Ie]of Object.entries(W))Array.isArray(Ie)?Ie.forEach(q=>{H.push(encodeURIComponent(Y)+"="+encodeURIComponent(q))}):H.push(encodeURIComponent(Y)+"="+encodeURIComponent(Ie));return H.length?"&"+H.join("&"):""}function Io(W){const H={};return W.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[q,se]=Ie.split("=");H[decodeURIComponent(q)]=decodeURIComponent(se)}}),H}function Zr(W){const H=W.indexOf("?");if(!H)return"";const Y=W.indexOf("#",H);return W.substring(H,Y>0?Y:void 0)}class _r{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Y){Y||(Y=0);const Ie=this.W_;if("string"==typeof H)for(let Nt=0;Nt<16;Nt++)Ie[Nt]=H.charCodeAt(Y)<<24|H.charCodeAt(Y+1)<<16|H.charCodeAt(Y+2)<<8|H.charCodeAt(Y+3),Y+=4;else for(let Nt=0;Nt<16;Nt++)Ie[Nt]=H[Y]<<24|H[Y+1]<<16|H[Y+2]<<8|H[Y+3],Y+=4;for(let Nt=16;Nt<80;Nt++){const Or=Ie[Nt-3]^Ie[Nt-8]^Ie[Nt-14]^Ie[Nt-16];Ie[Nt]=4294967295&(Or<<1|Or>>>31)}let kt,pn,q=this.chain_[0],se=this.chain_[1],xe=this.chain_[2],tt=this.chain_[3],At=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(kt=tt^se&(xe^tt),pn=1518500249):(kt=se^xe^tt,pn=1859775393):Nt<60?(kt=se&xe|tt&(se|xe),pn=2400959708):(kt=se^xe^tt,pn=3395469782);const Or=(q<<5|q>>>27)+kt+At+pn+Ie[Nt]&4294967295;At=tt,tt=xe,xe=4294967295&(se<<30|se>>>2),se=q,q=Or}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+se&4294967295,this.chain_[2]=this.chain_[2]+xe&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+At&4294967295}update(H,Y){if(null==H)return;void 0===Y&&(Y=H.length);const Ie=Y-this.blockSize;let q=0;const se=this.buf_;let xe=this.inbuf_;for(;q<Y;){if(0===xe)for(;q<=Ie;)this.compress_(H,q),q+=this.blockSize;if("string"==typeof H){for(;q<Y;)if(se[xe]=H.charCodeAt(q),++xe,++q,xe===this.blockSize){this.compress_(se),xe=0;break}}else for(;q<Y;)if(se[xe]=H[q],++xe,++q,xe===this.blockSize){this.compress_(se),xe=0;break}}this.inbuf_=xe,this.total_+=Y}digest(){const H=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&Y,Y/=256;this.compress_(this.buf_);let Ie=0;for(let q=0;q<5;q++)for(let se=24;se>=0;se-=8)H[Ie]=this.chain_[q]>>se&255,++Ie;return H}}function Oe(W,H){const Y=new yr(W,H);return Y.subscribe.bind(Y)}class yr{constructor(H,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{H(this)}).catch(Ie=>{this.error(Ie)})}next(H){this.forEachObserver(Y=>{Y.next(H)})}error(H){this.forEachObserver(Y=>{Y.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Y,Ie){let q;if(void 0===H&&void 0===Y&&void 0===Ie)throw new Error("Missing Observer.");q=function(W,H){if("object"!=typeof W||null===W)return!1;for(const Y of["next","error","complete"])if(Y in W&&"function"==typeof W[Y])return!0;return!1}(H)?H:{next:H,error:Y,complete:Ie},void 0===q.next&&(q.next=kn),void 0===q.error&&(q.error=kn),void 0===q.complete&&(q.complete=kn);const se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(xe){}}),this.observers.push(q),se}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,H)}sendOne(H,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Y(this.observers[H])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const Nr=function(W,H,Y,Ie){let q;if(Ie<H?q="at least "+H:Ie>Y&&(q=0===Y?"none":"no more than "+Y),q)throw new Error(W+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+q+".")};function Yr(W,H){return`${W} failed: ${H} argument `}function zn(W,H,Y,Ie){if((!Ie||Y)&&"function"!=typeof Y)throw new Error(Yr(W,H)+"must be a valid function.")}function wn(W,H,Y,Ie){if((!Ie||Y)&&("object"!=typeof Y||null===Y))throw new Error(Yr(W,H)+"must be a valid context object.")}const Ua=function(W){const H=[];let Y=0;for(let Ie=0;Ie<W.length;Ie++){let q=W.charCodeAt(Ie);if(q>=55296&&q<=56319){const se=q-55296;Ie++,re(Ie<W.length,"Surrogate pair missing trail surrogate."),q=65536+(se<<10)+(W.charCodeAt(Ie)-56320)}q<128?H[Y++]=q:q<2048?(H[Y++]=q>>6|192,H[Y++]=63&q|128):q<65536?(H[Y++]=q>>12|224,H[Y++]=q>>6&63|128,H[Y++]=63&q|128):(H[Y++]=q>>18|240,H[Y++]=q>>12&63|128,H[Y++]=q>>6&63|128,H[Y++]=63&q|128)}return H},Pn=function(W){let H=0;for(let Y=0;Y<W.length;Y++){const Ie=W.charCodeAt(Y);Ie<128?H++:Ie<2048?H+=2:Ie>=55296&&Ie<=56319?(H+=4,Y++):H+=3}return H};function Qr(W,H=1e3,Y=2){const Ie=H*Math.pow(Y,W),q=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+q)}function To(W){return W&&W._delegate?W._delegate:W}},7713:(Xe,be,F)=>{F.d(be,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=F(1572);(0,h.registerVersion)("firebase","9.8.1","app")},7892:(Xe,be,F)=>{F.d(be,{Z:()=>h.Z});var h=F(6293);h.Z.registerVersion("firebase","9.8.1","app-compat")},6600:(Xe,be,F)=>{F.r(be);var h=F(8239),re=F(6293),L=F(4213),he=F(1572);function de(y,p){var m={};for(var E in y)Object.prototype.hasOwnProperty.call(y,E)&&p.indexOf(E)<0&&(m[E]=y[E]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(E=Object.getOwnPropertySymbols(y);S<E.length;S++)p.indexOf(E[S])<0&&Object.prototype.propertyIsEnumerable.call(y,E[S])&&(m[E[S]]=y[E[S]])}return m}var ue=F(3855),bt=F(1177);const mi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},dn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ts=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),os=new ue.Yd("@firebase/auth");function Tr(y,...p){os.logLevel<=ue.in.ERROR&&os.error(`Auth (${he.SDK_VERSION}): ${y}`,...p)}function tn(y,...p){throw _r(y,...p)}function Un(y,...p){return _r(y,...p)}function Io(y,p,m){const E=Object.assign(Object.assign({},dn()),{[p]:m});return new L.LL("auth","Firebase",E).create(p,{appName:y.name})}function Zr(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&tn(y,"argument-error"),Io(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _r(y,...p){if("string"!=typeof y){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return Ts.create(y,...p)}function Oe(y,p,...m){if(!y)throw _r(p,...m)}function yr(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Tr(p),new Error(p)}function ft(y,p){y||yr(p)}const Sn=new Map;function kn(y){ft(y instanceof Function,"Expected a class definition");let p=Sn.get(y);return p?(ft(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Sn.set(y,p),p)}function Ds(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function zn(){return"http:"===wn()||"https:"===wn()}function wn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class et{constructor(p,m){this.shortDelay=p,this.longDelay=m,ft(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zn()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Et(y,p){ft(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Zs{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qr=new et(3e4,6e4);function Dt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function en(y,p,m,E){return To.apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(y,p,m,E,S={}){return W(y,S,(0,h.Z)(function*(){let R={},$={};E&&("GET"===p?$=E:R={body:JSON.stringify(E)});const ie=(0,L.xO)(Object.assign({key:y.config.apiKey},$)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Zs.fetch()(q(y,y.config.apiHost,m,ie),Object.assign({method:p,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function W(y,p,m){return H.apply(this,arguments)}function H(){return(H=(0,h.Z)(function*(y,p,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Fi),p);try{const S=new se(y),R=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const $=yield R.json();if("needConfirmation"in $)throw xe(y,"account-exists-with-different-credential",$);if(R.ok&&!("errorMessage"in $))return $;{const ie=R.ok?$.errorMessage:$.error.message,[Fe,Se]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw xe(y,"credential-already-in-use",$);if("EMAIL_EXISTS"===Fe)throw xe(y,"email-already-in-use",$);const lt=E[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw Io(y,lt,Se);tn(y,lt)}}catch(S){if(S instanceof L.ZR)throw S;tn(y,"network-request-failed")}})).apply(this,arguments)}function Y(y,p,m,E){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,h.Z)(function*(y,p,m,E,S={}){const R=yield en(y,p,m,E,S);return"mfaPendingCredential"in R&&tn(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function q(y,p,m,E){const S=`${p}${m}?${E}`;return y.config.emulator?Et(y.config,S):`${y.config.apiScheme}://${S}`}class se{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Un(this.auth,"network-request-failed")),Qr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xe(y,p,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=Un(y,p,E);return S.customData._tokenResponse=m,S}function At(){return(At=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function kt(y,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Nt(y,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function gi(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Bl(){return(Bl=(0,h.Z)(function*(y,p=!1){const m=(0,L.m9)(y),E=yield m.getIdToken(p),S=aa(E);Oe(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,$=null==R?void 0:R.sign_in_provider;return{claims:S,token:E,authTime:gi(oa(S.auth_time)),issuedAtTime:gi(oa(S.iat)),expirationTime:gi(oa(S.exp)),signInProvider:$||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function oa(y){return 1e3*Number(y)}function aa(y){const[p,m,E]=y.split(".");if(void 0===p||void 0===m||void 0===E)return Tr("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(m);return S?JSON.parse(S):(Tr("Failed to decode base64 JWT payload"),null)}catch(S){return Tr("Caught error parsing JWT payload as JSON",S),null}}function cr(y,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,h.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof L.ZR&&vr(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function vr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Li{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class We{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=gi(this.lastLoginAt),this.creationTime=gi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xt(y){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(y){var p;const m=y.auth,E=yield y.getIdToken(),S=yield cr(y,Nt(m,{idToken:E}));Oe(null==S?void 0:S.users.length,m,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const $=(null===(p=R.providerUserInfo)||void 0===p?void 0:p.length)?Do(R.providerUserInfo):[],ie=Jn(y.providerData,$),lt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ie?void 0:ie.length)),dt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ie,metadata:new We(R.createdAt,R.lastLoginAt),isAnonymous:lt};Object.assign(y,dt)})).apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(y){const p=(0,L.m9)(y);yield xt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Jn(y,p){return[...y.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}function Do(y){return y.map(p=>{var{providerId:m}=p,E=de(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ss(){return(Ss=(0,h.Z)(function*(y,p){const m=yield W(y,{},(0,h.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,$=q(y,S,"/v1/token",`key=${R}`),ie=yield y._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",Zs.fetch()($,{method:"POST",headers:ie,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class as{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Oe(p.idToken,"internal-error"),Oe(void 0!==p.idToken,"internal-error"),Oe(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(y){const p=aa(y);return Oe(p,"internal-error"),Oe(void 0!==p.exp,"internal-error"),Oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return Oe(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:$}=yield function(y,p){return Ss.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(S,R,Number($))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:S,expirationTime:R}=m,$=new as;return E&&(Oe("string"==typeof E,"internal-error",{appName:p}),$.refreshToken=E),S&&(Oe("string"==typeof S,"internal-error",{appName:p}),$.accessToken=S),R&&(Oe("number"==typeof R,"internal-error",{appName:p}),$.expirationTime=R),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new as,this.toJSON())}_performRefresh(){return yr("not implemented")}}function wt(y,p){Oe("string"==typeof y||void 0===y,"internal-error",{appName:p})}class Vi{constructor(p){var{uid:m,auth:E,stsTokenManager:S}=p,R=de(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new We(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield cr(m,m.stsTokenManager.getToken(m.auth,p));return Oe(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function(y){return Bl.apply(this,arguments)}(this,p)}reload(){return function(y){return Jr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Vi(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield xt(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield cr(p,function(y,p){return At.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,S,R,$,ie,Fe,Se,lt;const dt=null!==(E=m.displayName)&&void 0!==E?E:void 0,Kt=null!==(S=m.email)&&void 0!==S?S:void 0,tr=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,Ta=null!==($=m.photoURL)&&void 0!==$?$:void 0,vu=null!==(ie=m.tenantId)&&void 0!==ie?ie:void 0,qd=null!==(Fe=m._redirectEventId)&&void 0!==Fe?Fe:void 0,Hf=null!==(Se=m.createdAt)&&void 0!==Se?Se:void 0,Wd=null!==(lt=m.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:bu,emailVerified:wc,isAnonymous:Cc,providerData:Ic,stsTokenManager:Kd}=m;Oe(bu&&Kd,p,"internal-error");const Vy=as.fromJSON(this.name,Kd);Oe("string"==typeof bu,p,"internal-error"),wt(dt,p.name),wt(Kt,p.name),Oe("boolean"==typeof wc,p,"internal-error"),Oe("boolean"==typeof Cc,p,"internal-error"),wt(tr,p.name),wt(Ta,p.name),wt(vu,p.name),wt(qd,p.name),wt(Hf,p.name),wt(Wd,p.name);const Tc=new Vi({uid:bu,auth:p,email:Kt,emailVerified:wc,displayName:dt,isAnonymous:Cc,photoURL:Ta,phoneNumber:tr,tenantId:vu,stsTokenManager:Vy,createdAt:Hf,lastLoginAt:Wd});return Ic&&Array.isArray(Ic)&&(Tc.providerData=Ic.map(Dc=>Object.assign({},Dc))),qd&&(Tc._redirectEventId=qd),Tc}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const S=new as;S.updateFromServerResponse(m);const R=new Vi({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield xt(R),R})()}}const _i=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,h.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function ei(y,p,m){return`firebase:${y}:${p}:${m}`}class Xt{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:S,name:R}=this.auth;this.fullUserKey=ei(this.userKey,S.apiKey,R),this.fullPersistenceKey=ei("persistence",S.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Vi._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Xt(kn(_i),p,E);const S=(yield Promise.all(m.map(function(){var Se=(0,h.Z)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let R=S[0]||kn(_i);const $=ei(E,p.config.apiKey,p.name);let ie=null;for(const Se of m)try{const lt=yield Se._get($);if(lt){const dt=Vi._fromJSON(p,lt);Se!==R&&(ie=dt),R=Se;break}}catch(lt){}const Fe=S.filter(Se=>Se._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],ie&&(yield R._set($,ie.toJSON())),yield Promise.all(m.map(function(){var Se=(0,h.Z)(function*(lt){if(lt!==R)try{yield lt._remove($)}catch(dt){}});return function(lt){return Se.apply(this,arguments)}}())),new Xt(R,p,E)):new Xt(R,p,E)})()}}function Ba(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(od(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ao(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ja(p))return"Blackberry";if(jl(p))return"Webos";if(ti(p))return"Safari";if((p.includes("chrome/")||ln(p))&&!p.includes("edge/"))return"Chrome";if(Mo(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ao(y=(0,L.z$)()){return/firefox\//i.test(y)}function ti(y=(0,L.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ln(y=(0,L.z$)()){return/crios\//i.test(y)}function od(y=(0,L.z$)()){return/iemobile/i.test(y)}function Mo(y=(0,L.z$)()){return/android/i.test(y)}function ja(y=(0,L.z$)()){return/blackberry/i.test(y)}function jl(y=(0,L.z$)()){return/webos/i.test(y)}function Fr(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ha(y=(0,L.z$)()){return Fr(y)||Mo(y)||jl(y)||ja(y)||/windows phone/i.test(y)||od(y)}function Bi(y,p=[]){let m;switch(y){case"Browser":m=Ba((0,L.z$)());break;case"Worker":m=`${Ba((0,L.z$)())}-${y}`;break;default:m=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${he.SDK_VERSION}/${E}`}class tf{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=R=>new Promise(($,ie)=>{try{$(p(R))}catch(Fe){ie(Fe)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const S of m.queue)yield S(p),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const R of E)try{R()}catch($){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S.message})}})()}}class Qs{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ni(this),this.idTokenSubscription=new ni(this),this.beforeStateQueue=new tf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ts,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=kn(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var S,R;if(!E._deleted&&(E.persistenceManager=yield Xt.create(E,p),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch($){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let R=S,$=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ie=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Se=yield m.tryRedirectSignIn(p);(!ie||ie===Fe)&&(null==Se?void 0:Se.user)&&(R=Se.user,$=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if($)try{yield m.beforeStateQueue.runMiddleware(R)}catch(ie){R=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ie))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return Oe(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(S){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield xt(p)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,L.m9)(p):null;return E&&Oe(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&Oe(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(kn(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&kn(p)||m._popupRedirectResolver;Oe(E,m,"argument-error"),m.redirectPersistenceManager=yield Xt.create(m,[kn(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,S){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),$=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe($,this,"internal-error"),$.then(()=>R(this.currentUser)),"function"==typeof m?p.addObserver(m,E,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Bi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function Wn(y){return(0,L.m9)(y)}class ni{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wm(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function ad(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class $a{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return yr("not implemented")}_getIdTokenResponse(p){return yr("not implemented")}_linkToIdToken(p,m){return yr("not implemented")}_getReauthenticationResolver(p){return yr("not implemented")}}function rf(y,p){return ld.apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:resetPassword",Dt(y,p))})).apply(this,arguments)}function sf(y,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function la(y,p){return ud.apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",Dt(y,p))})).apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithPassword",Dt(y,p))})).apply(this,arguments)}function $u(y,p){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:sendOobCode",Dt(y,p))})).apply(this,arguments)}function Tm(y,p){return af.apply(this,arguments)}function af(){return(af=(0,h.Z)(function*(y,p){return $u(y,p)})).apply(this,arguments)}function $l(y,p){return za.apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(y,p){return $u(y,p)})).apply(this,arguments)}function Gu(y,p){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(y,p){return $u(y,p)})).apply(this,arguments)}function Dm(y,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(y,p){return $u(y,p)})).apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithEmailLink",Dt(y,p))})).apply(this,arguments)}function pd(){return(pd=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithEmailLink",Dt(y,p))})).apply(this,arguments)}class xo extends $a{constructor(p,m,E,S=null){super("password",E),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new xo(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new xo(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function(y,p){return cd.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(y,p){return Xs.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:tn(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return sf(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(y,p){return pd.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:tn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function us(y,p){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithIdp",Dt(y,p))})).apply(this,arguments)}class yi extends $a{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new yi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):tn("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=m,R=de(m,["providerId","signInMethod"]);if(!E||!S)return null;const $=new yi(E,S);return $.idToken=R.idToken||void 0,$.accessToken=R.accessToken||void 0,$.secret=R.secret,$.nonce=R.nonce,$.pendingToken=R.pendingToken||null,$}_getIdTokenResponse(p){return us(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,us(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,us(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,L.xO)(m)}return p}}function qa(y,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:sendVerificationCode",Dt(y,p))})).apply(this,arguments)}function qu(){return(qu=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithPhoneNumber",Dt(y,p))})).apply(this,arguments)}function Wu(){return(Wu=(0,h.Z)(function*(y,p){const m=yield Y(y,"POST","/v1/accounts:signInWithPhoneNumber",Dt(y,p));if(m.temporaryProof)throw xe(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ku={USER_NOT_FOUND:"user-not-found"};function nn(){return(nn=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithPhoneNumber",Dt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Ku)})).apply(this,arguments)}class xs extends $a{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new xs({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new xs({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function(y,p){return qu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function(y,p){return Wu.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(y,p){return nn.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:R}=p;return E||m||S||R?new xs({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:R}):null}}class Rs{constructor(p){var m,E,S,R,$,ie;const Fe=(0,L.zd)((0,L.pd)(p)),Se=null!==(m=Fe.apiKey)&&void 0!==m?m:null,lt=null!==(E=Fe.oobCode)&&void 0!==E?E:null,dt=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);Oe(Se&&lt&&dt,"argument-error"),this.apiKey=Se,this.operation=dt,this.code=lt,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==($=Fe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(ie=Fe.tenantId)&&void 0!==ie?ie:null}static parseLink(p){const m=function(y){const p=(0,L.zd)((0,L.pd)(y)).link,m=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||p||y}(p);try{return new Rs(m)}catch(E){return null}}}let Js=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return xo._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=Rs.parseLink(E);return Oe(S,"argument-error"),xo._fromEmailAndCode(m,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Nn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class eo extends Nn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Hi extends eo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Oe("providerId"in m&&"signInMethod"in m,"argument-error"),yi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Oe(p.idToken||p.accessToken,"argument-error"),yi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Hi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Hi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:R,nonce:$,providerId:ie}=p;if(!E&&!S&&!m&&!R||!ie)return null;try{return new Hi(ie)._credential({idToken:m,accessToken:E,nonce:$,pendingToken:R})}catch(Fe){return null}}}let Ro=(()=>{class y extends eo{constructor(){super("facebook.com")}static credential(m){return yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),rn=(()=>{class y extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return y.credential(E,S)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ka=(()=>{class y extends eo{constructor(){super("github.com")}static credential(m){return yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ks extends $a{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return us(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,us(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,us(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:R}=m;return E&&S&&R&&E===S?new ks(E,R):null}static _create(p,m){return new ks(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ko extends Nn{constructor(p){Oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ko.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ko.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=ks.fromJSON(p);return Oe(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return ks._create(E,m)}catch(S){return null}}}let No=(()=>{class y extends eo{constructor(){super("twitter.com")}static credential(m,E){return yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return y.credential(E,S)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function gt(y,p){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signUp",Dt(y,p))})).apply(this,arguments)}class br{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,S=!1){return(0,h.Z)(function*(){const R=yield Vi._fromIdTokenResponse(p,E,S),$=Qa(E);return new br({user:R,providerId:$,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=Qa(E);return new br({user:p,providerId:S,_tokenResponse:E,operationType:m})})()}}function Qa(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Xa(){return(Xa=(0,h.Z)(function*(y){var p;const m=Wn(y);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new br({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield gt(m,{returnSecureToken:!0}),S=yield br._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class ua extends L.ZR{constructor(p,m,E,S){var R;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,ua.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,S){return new ua(p,m,E,S)}}function Yu(y,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?ua._fromErrorAndOperation(y,R,p,E):R})}function Me(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Ns(){return(Ns=(0,h.Z)(function*(y,p){const m=(0,L.m9)(y);yield $i(!0,m,p);const{providerUserInfo:E}=yield kt(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=Me(E||[]);return m.providerData=m.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function On(y,p){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,h.Z)(function*(y,p,m=!1){const E=yield cr(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return br._forOperation(y,"link",E)})).apply(this,arguments)}function $i(y,p,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(y,p,m){yield xt(p);const S=!1===y?"provider-already-linked":"no-such-provider";Oe(Me(p.providerData).has(m)===y,p.auth,S)})).apply(this,arguments)}function zl(y,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(y,p,m=!1){const{auth:E}=y,S="reauthenticate";try{const R=yield cr(y,Yu(E,S,p,y),m);Oe(R.idToken,E,"internal-error");const $=aa(R.idToken);Oe($,E,"internal-error");const{sub:ie}=$;return Oe(y.uid===ie,E,"user-mismatch"),br._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&tn(E,"user-mismatch"),R}})).apply(this,arguments)}function uf(y,p){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,h.Z)(function*(y,p,m=!1){const E="signIn",S=yield Yu(y,E,p),R=yield br._fromIdTokenResponse(y,E,S);return m||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Po(y,p){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(y,p){return uf(Wn(y),p)})).apply(this,arguments)}function dr(y,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(y,p){const m=(0,L.m9)(y);return yield $i(!1,m,p.providerId),On(m,p)})).apply(this,arguments)}function ca(y,p){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(y,p){return zl((0,L.m9)(y),p)})).apply(this,arguments)}function cs(y,p){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(y,p){return Y(y,"POST","/v1/accounts:signInWithCustomToken",Dt(y,p))})).apply(this,arguments)}function tl(){return(tl=(0,h.Z)(function*(y,p){const m=Wn(y),E=yield cs(m,{token:p,returnSecureToken:!0}),S=yield br._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class ql{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Lo._fromServerResponse(p,m):tn(p,"internal-error")}}class Lo extends ql{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Lo(m)}}function Vo(y,p,m){var E;Oe((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),Oe(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Oe(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Oe(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function da(){return(da=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y),S={requestType:"PASSWORD_RESET",email:p};m&&Vo(E,S,m),yield $l(E,S)})).apply(this,arguments)}function Kl(){return(Kl=(0,h.Z)(function*(y,p,m){yield rf((0,L.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(y,p){yield la((0,L.m9)(y),{oobCode:p})})).apply(this,arguments)}function Zl(y,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,h.Z)(function*(y,p){const m=(0,L.m9)(y),E=yield rf(m,{oobCode:p}),S=E.requestType;switch(Oe(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(E.mfaInfo,m,"internal-error");default:Oe(E.email,m,"internal-error")}let R=null;return E.mfaInfo&&(R=ql._fromServerResponse(Wn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(y,p){const{data:m}=yield Zl((0,L.m9)(y),p);return m.email})).apply(this,arguments)}function sl(){return(sl=(0,h.Z)(function*(y,p,m){const E=Wn(y),S=yield gt(E,{returnSecureToken:!0,email:p,password:m}),R=yield br._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y),S={requestType:"EMAIL_SIGNIN",email:p};Oe(m.handleCodeInApp,E,"argument-error"),m&&Vo(E,S,m),yield Gu(E,S)})).apply(this,arguments)}function df(){return(df=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y),S=Js.credentialWithLink(p,m||Ds());return Oe(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Po(E,S)})).apply(this,arguments)}function bd(y,p){return hf.apply(this,arguments)}function hf(){return(hf=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:createAuthUri",Dt(y,p))})).apply(this,arguments)}function ro(){return(ro=(0,h.Z)(function*(y,p){const E={identifier:p,continueUri:zn()?Ds():"http://localhost"},{signinMethods:S}=yield bd((0,L.m9)(y),E);return S||[]})).apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(y,p){const m=(0,L.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Vo(m.auth,S,p);const{email:R}=yield Tm(m.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ju(){return(Ju=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&Vo(E.auth,R,m);const{email:$}=yield Dm(E.auth,R);$!==y.email&&(yield y.reload())})).apply(this,arguments)}function wd(y,p){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(y,p){return en(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,L.m9)(y),R={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},$=yield cr(E,wd(E.auth,R));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const ie=E.providerData.find(({providerId:Fe})=>"password"===Fe);ie&&(ie.displayName=E.displayName,ie.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)})).apply(this,arguments)}function ll(y,p,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(y,p,m){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(R.email=p),m&&(R.password=m);const $=yield cr(y,sf(E,R));yield y._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class ha{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class xm extends ha{constructor(p,m,E,S){super(p,m,E),this.username=S}}class _n extends ha{constructor(p,m){super(p,"facebook.com",m)}}class io extends xm{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Ze extends ha{constructor(p,m){super(p,"google.com",m)}}class Fn extends xm{constructor(p,m,E){super(p,"twitter.com",m,E)}}function ii(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(y){var p,m;if(!y)return null;const{providerId:E}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const $=null===(m=null===(p=aa(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if($)return new ha(R,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new _n(R,S);case"github.com":return new io(R,S);case"google.com":return new Ze(R,S);case"twitter.com":return new Fn(R,S,y.screenName||null);case"custom":case"anonymous":return new ha(R,null);default:return new ha(R,E,S)}}(m)}class Bo{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new Bo("enroll",p)}static _fromMfaPendingCredential(p){return new Bo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Bo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return Bo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class tc{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Wn(p),S=m.customData._serverResponse,R=(S.mfaInfo||[]).map(ie=>ql._fromServerResponse(E,ie));Oe(S.mfaPendingCredential,E,"internal-error");const $=Bo._fromMfaPendingCredential(S.mfaPendingCredential);return new tc($,R,function(){var ie=(0,h.Z)(function*(Fe){const Se=yield Fe._process(E,$);delete S.mfaInfo,delete S.mfaPendingCredential;const lt=Object.assign(Object.assign({},S),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(m.operationType){case"signIn":const dt=yield br._fromIdTokenResponse(E,m.operationType,lt);return yield E._updateCurrentUser(dt.user),dt;case"reauthenticate":return Oe(m.user,E,"internal-error"),br._forOperation(m.user,m.operationType,lt);default:tn(E,"internal-error")}});return function(Fe){return ie.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function tu(y,p){return en(y,"POST","/v2/accounts/mfaEnrollment:start",Dt(y,p))}class so{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>ql._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new so(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Bo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const S=p,R=yield E.getSession(),$=yield cr(E.user,S._process(E.user.auth,R,m));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,S=yield m.user.getIdToken(),R=yield cr(m.user,function(y,p){return en(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(y,p))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:$})=>$!==E),yield m.user._updateTokensIfNecessary(R);try{yield m.user.reload()}catch($){if("auth/user-token-expired"!==$.code)throw $}})()}}const nc=new WeakMap,pa="__sak";class Ho{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(pa,"1"),this.storage.removeItem(pa),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const si=(()=>{class y extends Ho{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,L.z$)();return ti(y)||Fr(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ha(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),R=this.localCache[E];S!==R&&m(E,R,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ie,Fe,Se)=>{this.notifyListeners(ie,Se)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(S);if(m.newValue!==ie)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const R=()=>{const ie=this.storage.getItem(S);!E&&this.localCache[S]===ie||this.notifyListeners(S,ie)},$=this.storage.getItem(S);(0,L.w1)()&&10===document.documentMode&&$!==m.newValue&&m.newValue!==m.oldValue?setTimeout(R,10):R()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,R=this;return(0,h.Z)(function*(){yield S().call(R,m,E),R.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,h.Z)(function*(){const R=yield E().call(S,m);return S.localCache[m]=JSON.stringify(R),R})()}_remove(m){var E=()=>super._remove,S=this;return(0,h.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return y.type="LOCAL",y})(),oi=(()=>{class y extends Ho{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let $o=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(R=>R.isListeningto(m));if(E)return E;const S=new y(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const S=m,{eventId:R,eventType:$,data:ie}=S.data,Fe=E.handlersMap[$];if(!(null==Fe?void 0:Fe.size))return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:$});const Se=Array.from(Fe).map(function(){var dt=(0,h.Z)(function*(Kt){return Kt(S.origin,ie)});return function(Kt){return dt.apply(this,arguments)}}()),lt=yield function(y){return Promise.all(y.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Se);S.ports[0].postMessage({status:"done",eventId:R,eventType:$,response:lt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Os(y="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return y+m}class Ln{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var S=this;return(0,h.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let $,ie;return new Promise((Fe,Se)=>{const lt=Os("",20);R.port1.start();const dt=setTimeout(()=>{Se(new Error("unsupported_event"))},E);ie={messageChannel:R,onMessage(Kt){const tr=Kt;if(tr.data.eventId===lt)switch(tr.data.status){case"ack":clearTimeout(dt),$=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Fe(tr.data.response);break;default:clearTimeout(dt),clearTimeout($),Se(new Error("invalid_response"))}}},S.handlers.add(ie),R.port1.addEventListener("message",ie.onMessage),S.target.postMessage({eventType:p,eventId:lt,data:m},[R.port2])}).finally(()=>{ie&&S.removeMessageHandler(ie)})})()}}function Gt(){return window}function ds(){return void 0!==Gt().WorkerGlobalScope&&"function"==typeof Gt().importScripts}function In(){return(In=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Wi="firebaseLocalStorageDb",hn="firebaseLocalStorage",hl="fbase_key";class rc{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ic(y,p){return y.transaction([hn],p?"readwrite":"readonly").objectStore(hn)}function Go(){const y=indexedDB.open(Wi,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(hn,{keyPath:hl})}catch(S){m(S)}}),y.addEventListener("success",(0,h.Z)(function*(){const E=y.result;E.objectStoreNames.contains(hn)?p(E):(E.close(),yield function(){const y=indexedDB.deleteDatabase(Wi);return new rc(y).toPromise()}(),p(yield Go()))}))})}function hr(y,p,m){return ru.apply(this,arguments)}function ru(){return(ru=(0,h.Z)(function*(y,p,m){const E=ic(y,!0).put({[hl]:p,value:m});return new rc(E).toPromise()})).apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(y,p){const m=ic(y,!1).get(p),E=yield new rc(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Mn(y,p){const m=ic(y,!0).delete(p);return new rc(m).toPromise()}const _a=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Go()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let S=0;for(;;)try{const R=yield E._openDb();return yield m(R)}catch(R){if(S++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return ds()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=$o._getInstance(ds()?self:null),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(S,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(S,R){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function(){return In.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ln(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Go();return yield hr(m,pa,"1"),yield Mn(m,pa),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,h.Z)(function*(){return S._withPendingWrite((0,h.Z)(function*(){return yield S._withRetries(R=>hr(R,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const S=yield E._withRetries(R=>function(y,p){return iu.apply(this,arguments)}(R,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(S=>Mn(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries($=>{const ie=ic($,!1).getAll();return new rc(ie).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:$,value:ie}of E)R.add($),JSON.stringify(m.localCache[$])!==JSON.stringify(ie)&&(m.notifyListeners($,ie),S.push($));for(const $ of Object.keys(m.localCache))m.localCache[$]&&!R.has($)&&(m.notifyListeners($,null),S.push($));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ki(y,p){return en(y,"POST","/v2/accounts/mfaSignIn:start",Dt(y,p))}function zo(){return(zo=(0,h.Z)(function*(y){return(yield en(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function sc(y){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=S=>{const R=Un("internal-error");R.customData=S,m(R)},E.type="text/javascript",E.charset="UTF-8",function(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function ou(y){return`__${y}${Math.floor(1e6*Math.random())}`}const va=1e12;class Pt{constructor(p){this.auth=p,this.counter=va,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new Sr(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||va;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||va))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||va))||void 0===E||E.execute(),""})()}}class Sr{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;Oe(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}();const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ao=ou("rcb"),pf=new et(3e4,6e4);class gf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gt().grecaptcha}load(p,m=""){return Oe((y=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Gt().grecaptcha):new Promise((E,S)=>{const R=Gt().setTimeout(()=>{S(Un(p,"network-request-failed"))},pf.get());Gt()[ao]=()=>{Gt().clearTimeout(R),delete Gt()[ao];const ie=Gt().grecaptcha;if(!ie)return void S(Un(p,"internal-error"));const Fe=ie.render;ie.render=(Se,lt)=>{const dt=Fe(Se,lt);return this.counter++,dt},this.hostLanguage=m,E(ie)},sc(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ao,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),S(Un(p,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Gt().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ar{load(p){return(0,h.Z)(function*(){return new Pt(p)})()}clearedOneInstance(){}}const au="recaptcha",Sd={theme:"light",type:"image"};class ac{constructor(p,m=Object.assign({},Sd),E){this.parameters=m,this.type=au,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(E),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;Oe(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ar:new gf,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(R=>{const $=ie=>{!ie||(p.tokenChangeListeners.delete($),R(ie))};p.tokenChangeListeners.add($),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Gt()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){Oe(zn()&&!ds(),p.auth,"internal-error"),yield function(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function(y){return zo.apply(this,arguments)}(p.auth);Oe(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vn{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=xs._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ba(){return(ba=(0,h.Z)(function*(y,p,m){const E=Wn(y),S=yield lu(E,p,(0,L.m9)(m));return new Vn(S,R=>Po(E,R))})).apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y);yield $i(!1,E,"phone");const S=yield lu(E.auth,p,(0,L.m9)(m));return new Vn(S,R=>dr(E,R))})).apply(this,arguments)}function lc(){return(lc=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y),S=yield lu(E.auth,p,(0,L.m9)(m));return new Vn(S,R=>ca(E,R))})).apply(this,arguments)}function lu(y,p,m){return T.apply(this,arguments)}function T(){return(T=(0,h.Z)(function*(y,p,m){var E;const S=yield m.verify();try{let R;if(Oe("string"==typeof S,y,"argument-error"),Oe(m.type===au,y,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const $=R.session;if("phoneNumber"in R)return Oe("enroll"===$.type,y,"internal-error"),(yield tu(y,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Oe("signin"===$.type,y,"internal-error");const ie=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Oe(ie,y,"missing-multi-factor-info"),(yield Ki(y,{mfaPendingCredential:$.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield qa(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return $}}finally{m._reset()}})).apply(this,arguments)}function N(){return(N=(0,h.Z)(function*(y,p){yield On((0,L.m9)(y),p)})).apply(this,arguments)}let B=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Wn(m)}verifyPhoneNumber(m,E){return lu(this.auth,m,(0,L.m9)(E))}static credential(m,E){return xs._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?xs._fromTokenResponse(E,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function J(y,p){return p?kn(p):(Oe(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class X extends $a{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return us(p,this._buildIdpRequest())}_linkToIdToken(p,m){return us(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return us(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ke(y){return uf(y.auth,new X(y),y.bypassAuthState)}function at(y){const{auth:p,user:m}=y;return Oe(m,p,"internal-error"),zl(m,new X(y),y.bypassAuthState)}function _t(y){return vt.apply(this,arguments)}function vt(){return(vt=(0,h.Z)(function*(y){const{auth:p,user:m}=y;return Oe(m,p,"internal-error"),On(m,new X(y),y.bypassAuthState)})).apply(this,arguments)}class Wt{constructor(p,m,E,S,R=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:R,tenantId:$,error:ie,type:Fe}=p;if(ie)return void m.reject(ie);const Se={auth:m.auth,requestUri:E,sessionId:S,tenantId:$||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Fe)(Se))}catch(lt){m.reject(lt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ke;case"linkViaPopup":case"linkViaRedirect":return _t;case"reauthViaPopup":case"reauthViaRedirect":return at;default:tn(this.auth,"internal-error")}}resolve(p){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rt=new et(2e3,1e4);function vn(){return(vn=(0,h.Z)(function*(y,p,m){const E=Wn(y);Zr(y,p,Nn);const S=J(E,m);return new Zi(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y);Zr(E.auth,p,Nn);const S=J(E.auth,m);return new Zi(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y);Zr(E.auth,p,Nn);const S=J(E.auth,m);return new Zi(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let Zi=(()=>{class y extends Wt{constructor(m,E,S,R,$){super(m,E,R,$),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return Oe(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ft(1===m.filter.length,"Popup operations only handle one event");const E=Os();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Un(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Rt.get())};m()}}return y.currentPopupAction=null,y})();const Ko=new Map;class yf extends Wt{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Ko.get(m.auth._key());if(!E){try{const R=(yield function(y,p){return vf.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(R)}catch(S){E=()=>Promise.reject(S)}Ko.set(m.auth._key(),E)}return m.bypassAuthState||Ko.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function vf(){return(vf=(0,h.Z)(function*(y,p){const m=Nm(p),E=bf(y);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function Ea(y,p){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(y,p){return bf(y)._set(Nm(p),"true")})).apply(this,arguments)}function km(y,p){Ko.set(y._key(),p)}function bf(y){return kn(y._redirectPersistence)}function Nm(y){return ei("pendingRedirect",y.config.apiKey,y.name)}function uc(){return(uc=(0,h.Z)(function*(y,p,m){const E=Wn(y);Zr(y,p,Nn);const S=J(E,m);return yield Ea(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y);Zr(E.auth,p,Nn);const S=J(E.auth,m);yield Ea(S,E.auth);const R=yield xd(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function wf(){return(wf=(0,h.Z)(function*(y,p,m){const E=(0,L.m9)(y);Zr(E.auth,p,Nn);const S=J(E.auth,m);yield $i(!1,E,p.providerId),yield Ea(S,E.auth);const R=yield xd(E);return S._openRedirect(E.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function ml(){return(ml=(0,h.Z)(function*(y,p){return yield Wn(y)._initializationPromise,uu(y,p,!1)})).apply(this,arguments)}function uu(y,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,h.Z)(function*(y,p,m=!1){const E=Wn(y),S=J(E,p),$=yield new yf(E,S,m).execute();return $&&!m&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,p)),$})).apply(this,arguments)}function xd(y){return cu.apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(y){const p=Os(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Rd{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fm(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Fm(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Un(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kd(p))}saveEventToCache(p){this.cachedEventUids.add(kd(p)),this.lastProcessedEventTime=Date.now()}}function kd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Fm({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Lm(y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(y,p={}){return en(y,"GET","/v1/projects",p)})).apply(this,arguments)}const du=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hc=/^https?/;function pc(){return(pc=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Lm(y);for(const m of p)try{if(Vm(m))return}catch(E){}tn(y,"unauthorized-domain")})).apply(this,arguments)}function Vm(y){const p=Ds(),{protocol:m,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const $=new URL(y);return""===$.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&$.hostname===E}if(!hc.test(m))return!1;if(du.test(y))return E===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Um=new et(3e4,6e4);function Bm(){const y=Gt().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Od=null;function _y(y){return Od=Od||function(y){return new Promise((p,m)=>{var E,S,R;function $(){Bm(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Bm(),m(Un(y,"network-request-failed"))},timeout:Um.get()})}if(null===(S=null===(E=Gt().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(R=Gt().gapi)||void 0===R?void 0:R.load)){const ie=ou("iframefcb");return Gt()[ie]=()=>{gapi.load?$():m(Un(y,"network-request-failed"))},sc(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Fe=>m(Fe))}$()}}).catch(p=>{throw Od=null,p})}(y),Od}const yy=new et(5e3,15e3),vy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_l=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hm(y){const p=y.config;Oe(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?Et(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:y.name,v:he.SDK_VERSION},S=_l.get(y.config.apiHost);S&&(E.eid=S);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function Ca(){return Ca=(0,h.Z)(function*(y){const p=yield _y(y),m=Gt().gapi;return Oe(m,y,"internal-error"),p.open({where:document.body,url:Hm(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vy,dontclear:!0},E=>new Promise(function(){var S=(0,h.Z)(function*(R,$){yield E.restyle({setHideOnLeave:!1});const ie=Un(y,"network-request-failed"),Fe=Gt().setTimeout(()=>{$(ie)},yy.get());function Se(){Gt().clearTimeout(Fe),R(E)}E.ping(Se).then(Se,()=>{$(ie)})});return function(R,$){return S.apply(this,arguments)}}()))}),Ca.apply(this,arguments)}const $m={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class by{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Wm(y,p,m,E,S,R){Oe(y.config.authDomain,y,"auth-domain-config-required"),Oe(y.config.apiKey,y,"invalid-api-key");const $={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:he.SDK_VERSION,eventId:S};if(p instanceof Nn){p.setDefaultLanguage(y.languageCode),$.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||($.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Fe,Se]of Object.entries(R||{}))$[Fe]=Se}if(p instanceof eo){const Fe=p.getScopes().filter(Se=>""!==Se);Fe.length>0&&($.scopes=Fe.join(","))}y.tenantId&&($.tid=y.tenantId);const ie=$;for(const Fe of Object.keys(ie))void 0===ie[Fe]&&delete ie[Fe];return`${function({config:y}){return y.emulator?Et(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(ie).slice(1)}`}const vl="webStorageSupport";class Pd extends class{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return yr("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Pd(p)}_finalizeEnroll(p,m,E){return function(y,p){return en(y,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(y,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function(y,p){return en(y,"POST","/v2/accounts/mfaSignIn:finalize",Dt(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mc=(()=>{class y{constructor(){}static assertion(m){return Pd._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var y,Fd="@firebase/auth";class wy{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{var S;p((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fo(){return window}function Df(){return Df=(0,h.Z)(function*(y,p,m){var E;const{BuildInfo:S}=fo();ft(p.sessionId,"AuthEvent did not contain a session ID");const R=yield fr(p.sessionId),$={};return Fr()?$.ibi=S.packageName:Mo()?$.apn=S.packageName:tn(y,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=R,Wm(y,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,$)}),Df.apply(this,arguments)}function Sf(){return Sf=(0,h.Z)(function*(y){const{BuildInfo:p}=fo(),m={};Fr()?m.iosBundleId=p.packageName:Mo()?m.androidPackageName=p.packageName:tn(y,"operation-not-supported-in-this-environment"),yield Lm(y,m)}),Sf.apply(this,arguments)}function Mf(){return Mf=(0,h.Z)(function*(y,p,m){const{cordova:E}=fo();let S=()=>{};try{yield new Promise((R,$)=>{let ie=null;function Fe(){var dt;R();const Kt=null===(dt=E.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof Kt&&Kt(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Se(){ie||(ie=window.setTimeout(()=>{$(Un(y,"redirect-cancelled-by-user"))},2e3))}function lt(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}p.addPassiveListener(Fe),document.addEventListener("resume",Se,!1),Mo()&&document.addEventListener("visibilitychange",lt,!1),S=()=>{p.removePassiveListener(Fe),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",lt,!1),ie&&window.clearTimeout(ie)}})}finally{S()}}),Mf.apply(this,arguments)}function fr(y){return mu.apply(this,arguments)}function mu(){return mu=(0,h.Z)(function*(y){const p=_c(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")}),mu.apply(this,arguments)}function _c(y){if(ft(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}y="Browser",(0,he._registerComponent)(new bt.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:R,authDomain:$}=E.options;return((ie,Fe)=>{Oe(R&&!R.includes(":"),"invalid-api-key",{appName:ie.name}),Oe(!(null==$?void 0:$.includes(":")),"argument-error",{appName:ie.name});const Se={apiKey:R,authDomain:$,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bi(y)},lt=new Qs(ie,Fe,Se);return function(y,p){const m=(null==p?void 0:p.persistence)||[],E=(Array.isArray(m)?m:[m]).map(kn);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(lt,m),lt})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new bt.wA("auth-internal",p=>{const m=Wn(p.getProvider("auth").getImmediate());return new wy(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Fd,"0.20.1",void 0),(0,he.registerVersion)(Fd,"0.20.1","esm2017");class Br extends Rd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function Zm(y){return kf.apply(this,arguments)}function kf(){return kf=(0,h.Z)(function*(y){const p=yield vc()._get(gu(y));return p&&(yield vc()._remove(gu(y))),p}),kf.apply(this,arguments)}function Dy(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function vc(){return kn(si)}function gu(y){return ei("authEvent",y.config.apiKey,y.name)}function bl(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...m]=y.split("?");return(0,L.zd)(m.join("?"))}function Qm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Un("no-auth-event")}}function Ia(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Xm(y=(0,L.z$)()){return!("file:"!==Ia()&&"ionic:"!==Ia()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jm(){try{const y=self.localStorage,p=Os();if(y)return y.setItem(p,"1"),y.removeItem(p),!function(y=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch(y){return Pf()&&(0,L.hl)()}return!1}function Pf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ff(){return("http:"===Ia()||"https:"===Ia()||(0,L.ru)()||Xm())&&!((0,L.b$)()||(0,L.UG)())&&Jm()&&!Pf()}function eg(){return Xm()&&"undefined"!=typeof document}function jd(){return jd=(0,h.Z)(function*(){return!!eg()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})}),jd.apply(this,arguments)}const wi={LOCAL:"local",NONE:"none",SESSION:"session"},Vs=Oe,gs="persistence";function ng(y){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,h.Z)(function*(y){yield y._initializationPromise;const p=Us(),m=ei(gs,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())}),Hd.apply(this,arguments)}function Us(){var y;try{return(null===(y="undefined"!=typeof window?window:null)||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Lf=Oe;class _s{constructor(){this.browserResolver=kn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oi,this._completeRedirectFn=uu,this._overrideRedirectResult=km}_openPopup(p,m,E,S){var R=this;return(0,h.Z)(function*(){var $;ft(null===($=R.eventManagers[p._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const ie=Wm(p,m,E,Ds(),S);return function(y,p,m,E=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let ie="";const Fe=Object.assign(Object.assign({},$m),{width:E.toString(),height:S.toString(),top:R,left:$}),Se=(0,L.z$)().toLowerCase();m&&(ie=ln(Se)?"_blank":m),Ao(Se)&&(p=p||"http://localhost",Fe.scrollbars="yes");const lt=Object.entries(Fe).reduce((Kt,[tr,Ta])=>`${Kt}${tr}=${Ta},`,"");if(function(y=(0,L.z$)()){var p;return Fr(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Se)&&"_self"!==ie)return function(y,p){const m=document.createElement("a");m.href=y,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",ie),new by(null);const dt=window.open(p||"",ie,lt);Oe(dt,y,"popup-blocked");try{dt.focus()}catch(Kt){}return new by(dt)}(p,ie,Os())})()}_openRedirect(p,m,E,S){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(p),y=Wm(p,m,E,Ds(),S),Gt().location.href=y,new Promise(()=>{});var y})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:R}=this.eventManagers[m];return S?Promise.resolve(S):(ft(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function(y){return Ca.apply(this,arguments)}(p),S=new Rd(p);return E.register("authEvent",R=>(Oe(null==R?void 0:R.authEvent,p,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(vl,{type:vl},S=>{var R;const $=null===(R=null==S?void 0:S[0])||void 0===R?void 0:R[vl];void 0!==$&&m(!!$),tn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(y){return pc.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ha()||ti()||Fr()}}),this.cordovaResolver=kn(class{constructor(){this._redirectPersistence=oi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uu,this._overrideRedirectResult=km}_initialize(p){var m=this;return(0,h.Z)(function*(){const E=p._key();let S=m.eventManagers.get(E);return S||(S=new Br(p),m.eventManagers.set(E,S),m.attachCallbackListeners(p,S)),S})()}_openPopup(p){tn(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,S){var R=this;return(0,h.Z)(function*(){!function(y){var p,m,E,S,R,$,ie,Fe,Se,lt;const dt=fo();Oe("function"==typeof(null===(p=null==dt?void 0:dt.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oe(void 0!==(null===(m=null==dt?void 0:dt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oe("function"==typeof(null===(R=null===(S=null===(E=null==dt?void 0:dt.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(Fe=null===(ie=null===($=null==dt?void 0:dt.cordova)||void 0===$?void 0:$.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(lt=null===(Se=null==dt?void 0:dt.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===lt?void 0:lt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const $=yield R._initialize(p);yield $.initialized(),$.resetRedirect(),Ko.clear(),yield R._originValidation(p);const ie=function(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Dy(),postBody:null,tenantId:y.tenantId,error:Un(y,"no-auth-event")}}(p,E,S);yield function(y,p){return vc()._set(gu(y),p)}(p,ie);const Fe=yield function(y,p,m){return Df.apply(this,arguments)}(p,ie,m),Se=yield function(y){const{cordova:p}=fo();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let S=null;E?p.plugins.browsertab.openUrl(y):S=p.InAppBrowser.open(y,function(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(S)})})}(Fe);return function(y,p,m){return Mf.apply(this,arguments)}(p,$,Se)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(y){return Sf.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:S,BuildInfo:R}=fo(),$=setTimeout((0,h.Z)(function*(){yield Zm(p),m.onEvent(Qm())}),500),ie=function(){var lt=(0,h.Z)(function*(dt){clearTimeout($);const Kt=yield Zm(p);let tr=null;Kt&&(null==dt?void 0:dt.url)&&(tr=function(y,p){var m,E;const S=function(y){const p=bl(y),m=p.link?decodeURIComponent(p.link):void 0,E=bl(m).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return bl(S).link||S||E||m||y}(p);if(S.includes("/__/auth/callback")){const R=bl(S),$=R.firebaseError?function(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(R.firebaseError)):null,ie=null===(E=null===(m=null==$?void 0:$.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Fe=ie?Un(ie):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Kt,dt.url)),m.onEvent(tr||Qm())});return function(Kt){return lt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ie);const Fe=S,Se=`${R.packageName.toLowerCase()}://`;fo().handleOpenURL=function(){var lt=(0,h.Z)(function*(dt){if(dt.toLowerCase().startsWith(Se)&&ie({url:dt}),"function"==typeof Fe)try{Fe(dt)}catch(Kt){console.error(Kt)}});return function(dt){return lt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=oi,this._completeRedirectFn=uu,this._overrideRedirectResult=km}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,S){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(p,m,E,S)})()}_openRedirect(p,m,E,S){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(p,m,E,S)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return eg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function(){return jd.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function rg(y){return y.unwrap()}function bc(y){return Gd(y)}function Gd(y){const{_tokenResponse:p}=y instanceof L.ZR?y.customData:y;if(!p)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return B.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=rn;break;case"facebook.com":E=Ro;break;case"github.com":E=Ka;break;case"twitter.com":E=No;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:$,pendingToken:ie,nonce:Fe}=p;return R||$||S||ie?ie?m.startsWith("saml.")?ks._create(m,ie):yi._fromParams({providerId:m,signInMethod:m,pendingToken:ie,idToken:S,accessToken:R}):new Hi(m).credential({idToken:S,accessToken:R,rawNonce:Fe}):null}return y instanceof L.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function jr(y,p){return p.catch(m=>{throw m instanceof L.ZR&&function(y,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new x0(y,function(y,p){var m;const E=(0,L.m9)(y),S=p;return Oe(p.customData.operationType,E,"argument-error"),Oe(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),tc._fromError(E,S)}(y,p));else if(E){const S=Gd(p),R=p;S&&(R.credential=S,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:bc(m),additionalUserInfo:ii(m),user:li.getOrCreate(S)}})}function Ec(y,p){return zd.apply(this,arguments)}function zd(){return zd=(0,h.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>jr(y,m.confirm(E))}}),zd.apply(this,arguments)}class x0{constructor(p,m){this.resolver=m,this.auth=function(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return jr(rg(this.auth),this.resolver.resolveSignIn(p))}}class li{constructor(p){this._delegate=p,this.multiFactor=function(y){const p=(0,L.m9)(y);return nc.has(p)||nc.set(p,so._fromUser(p)),nc.get(p)}(p)}static getOrCreate(p){return li.USER_MAP.has(p)||li.USER_MAP.set(p,new li(p)),li.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return jr(m.auth,dr(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,h.Z)(function*(){return Ec(E.auth,function(y,p,m){return uo.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return jr(m.auth,function(y,p,m){return Ps.apply(this,arguments)}(m._delegate,p,_s))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield ng(Wn(m.auth)),function(y,p,m){return function(y,p,m){return wf.apply(this,arguments)}(y,p,m)}(m._delegate,p,_s)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return jr(m.auth,ca(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Ec(this.auth,function(y,p,m){return lc.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return jr(this.auth,function(y,p,m){return qo.apply(this,arguments)}(this._delegate,p,_s))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield ng(Wn(m.auth)),function(y,p,m){return function(y,p,m){return ho.apply(this,arguments)}(y,p,m)}(m._delegate,p,_s)})()}sendEmailVerification(p){return function(y,p){return ol.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function(y,p){return Ns.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function(y,p){return ll((0,L.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function(y,p){return ll((0,L.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(y,p){return N.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(y,p){return Cd.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function(y,p,m){return Ju.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}li.USER_MAP=new WeakMap;const wl=Oe;let Vf=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;wl(S,"invalid-api-key",{appName:m.name}),wl(S,"invalid-api-key",{appName:m.name});const R="undefined"!=typeof window?_s:void 0;this._delegate=E.initialize({options:{persistence:Uf(S,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(mi),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?li.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function(y,p,m){const E=Wn(y);Oe(E._canInitEmulator,E,"emulator-config-failed"),Oe(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),R=wm(p),{host:$,port:ie}=function(y){const p=wm(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const R=S[1];return{host:R,port:ad(E.substr(R.length+1))}}{const[R,$]=E.split(":");return{host:R,port:ad($)}}}(p);E.config.emulator={url:`${R}//${$}${null===ie?"":`:${ie}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:ie,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function(y,p){return nl.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Zl(this._delegate,m)}confirmPasswordReset(m,E){return function(y,p,m){return Kl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var S=this;return(0,h.Z)(function*(){return jr(S._delegate,function(y,p,m){return sl.apply(this,arguments)}(S._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(y,p){return ro.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(y,p){const m=Rs.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){wl(Ff(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function(y,p){return ml.apply(this,arguments)}(m._delegate,_s);return E?jr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(y,p){Wn(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,S){const{next:R,error:$,complete:ie}=Ci(m,E,S);return this._delegate.onAuthStateChanged(R,$,ie)}onIdTokenChanged(m,E,S){const{next:R,error:$,complete:ie}=Ci(m,E,S);return this._delegate.onIdTokenChanged(R,$,ie)}sendSignInLinkToEmail(m,E){return function(y,p,m){return gn.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function(y,p,m){return da.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let S;switch(function(y,p){Vs(Object.values(wi).includes(p),y,"invalid-persistence-type"),(0,L.b$)()?Vs(p!==wi.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?Vs(p===wi.NONE,y,"unsupported-persistence-type"):Pf()?Vs(p===wi.NONE||p===wi.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):Vs(p===wi.NONE||Jm(),y,"unsupported-persistence-type")}(E._delegate,m),m){case wi.SESSION:S=oi;break;case wi.LOCAL:S=(yield kn(_a)._isAvailable())?_a:si;break;case wi.NONE:S=_i;break;default:return tn("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return jr(this._delegate,function(y){return Xa.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return jr(this._delegate,Po(this._delegate,m))}signInWithCustomToken(m){return jr(this._delegate,function(y,p){return tl.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return jr(this._delegate,function(y,p,m){return Po((0,L.m9)(y),Js.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return jr(this._delegate,function(y,p,m){return df.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Ec(this._delegate,function(y,p,m){return ba.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return wl(Ff(),E._delegate,"operation-not-supported-in-this-environment"),jr(E._delegate,function(y,p,m){return vn.apply(this,arguments)}(E._delegate,m,_s))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return wl(Ff(),E._delegate,"operation-not-supported-in-this-environment"),yield ng(E._delegate),function(y,p,m){return function(y,p,m){return uc.apply(this,arguments)}(y,p,m)}(E._delegate,m,_s)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(y,p){return il.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=wi,y})();function Ci(y,p,m){let E=y;"function"!=typeof y&&({next:E,error:p,complete:m}=y);const S=E;return{next:$=>S($&&li.getOrCreate($)),error:p,complete:m}}function Uf(y,p){const m=function(y,p){const m=Us();if(!m)return[];const E=ei(gs,y,p);switch(m.getItem(E)){case wi.NONE:return[_i];case wi.LOCAL:return[_a,oi];case wi.SESSION:return[oi];default:return[]}}(y,p);if("undefined"!=typeof self&&!m.includes(_a)&&m.push(_a),"undefined"!=typeof window)for(const E of[si,oi])m.includes(E)||m.push(E);return m.includes(_i)||m.push(_i),m}class _u{constructor(){this.providerId="phone",this._delegate=new B(rg(re.Z.auth()))}static credential(p,m){return B.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}_u.PHONE_SIGN_IN_METHOD=B.PHONE_SIGN_IN_METHOD,_u.PROVIDER_ID=B.PROVIDER_ID;const Bf=Oe;class jf{constructor(p,m,E=re.Z.app()){var S;Bf(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ac(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new bt.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Vf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Js,FacebookAuthProvider:Ro,GithubAuthProvider:Ka,GoogleAuthProvider:rn,OAuthProvider:Hi,SAMLAuthProvider:ko,PhoneAuthProvider:_u,PhoneMultiFactorGenerator:mc,RecaptchaVerifier:jf,TwitterAuthProvider:No,Auth:Vf,AuthCredential:$a,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(re.Z)},8305:(Xe,be,F)=>{F.d(be,{y:()=>z});var h=F(584),re=F(7908),L=F(4816),he=F(4623);var le=F(5367),de=F(5044),ge=F(8706);let z=(()=>{class Ae{constructor(He){He&&(this._subscribe=He)}lift(He){const Ve=new Ae;return Ve.source=this,Ve.operator=He,Ve}subscribe(He,Ve,oe){const Te=function(Ae){return Ae&&Ae instanceof h.Lv||function(Ae){return Ae&&(0,de.m)(Ae.next)&&(0,de.m)(Ae.error)&&(0,de.m)(Ae.complete)}(Ae)&&(0,re.Nn)(Ae)}(He)?He:new h.Hp(He,Ve,oe);return(0,ge.x)(()=>{const{operator:je,source:Le}=this;Te.add(je?je.call(Te,Le):Le?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(He){try{return this._subscribe(He)}catch(Ve){He.error(Ve)}}forEach(He,Ve){return new(Ve=K(Ve))((oe,Te)=>{let je;je=this.subscribe(Le=>{try{He(Le)}catch(ct){Te(ct),null==je||je.unsubscribe()}},Te,oe)})}_subscribe(He){var Ve;return null===(Ve=this.source)||void 0===Ve?void 0:Ve.subscribe(He)}[L.L](){return this}pipe(...He){return function(Ae){return 0===Ae.length?he.y:1===Ae.length?Ae[0]:function(He){return Ae.reduce((Ve,oe)=>oe(Ve),He)}}(He)(this)}toPromise(He){return new(He=K(He))((Ve,oe)=>{let Te;this.subscribe(je=>Te=je,je=>oe(je),()=>Ve(Te))})}}return Ae.create=$e=>new Ae($e),Ae})();function K(Ae){var $e;return null!==($e=null!=Ae?Ae:le.v.Promise)&&void 0!==$e?$e:Promise}},273:(Xe,be,F)=>{F.d(be,{x:()=>le});var h=F(8305),re=F(7908);const he=(0,F(4893).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=F(3980),Ee=F(8706);let le=(()=>{class ge extends h.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(K){const ae=new de(this,this);return ae.operator=K,ae}_throwIfClosed(){if(this.closed)throw new he}next(K){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ae=this.observers.slice();for(const qe of ae)qe.next(K)}})}error(K){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=K;const{observers:ae}=this;for(;ae.length;)ae.shift().error(K)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:K}=this;for(;K.length;)K.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var K;return(null===(K=this.observers)||void 0===K?void 0:K.length)>0}_trySubscribe(K){return this._throwIfClosed(),super._trySubscribe(K)}_subscribe(K){return this._throwIfClosed(),this._checkFinalizedStatuses(K),this._innerSubscribe(K)}_innerSubscribe(K){const{hasError:ae,isStopped:qe,observers:Ae}=this;return ae||qe?re.Lc:(Ae.push(K),new re.w0(()=>(0,ce.P)(Ae,K)))}_checkFinalizedStatuses(K){const{hasError:ae,thrownError:qe,isStopped:Ae}=this;ae?K.error(qe):Ae&&K.complete()}asObservable(){const K=new h.y;return K.source=this,K}}return ge.create=(z,K)=>new de(z,K),ge})();class de extends le{constructor(z,K){super(),this.destination=z,this.source=K}next(z){var K,ae;null===(ae=null===(K=this.destination)||void 0===K?void 0:K.next)||void 0===ae||ae.call(K,z)}error(z){var K,ae;null===(ae=null===(K=this.destination)||void 0===K?void 0:K.error)||void 0===ae||ae.call(K,z)}complete(){var z,K;null===(K=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===K||K.call(z)}_subscribe(z){var K,ae;return null!==(ae=null===(K=this.source)||void 0===K?void 0:K.subscribe(z))&&void 0!==ae?ae:re.Lc}}},584:(Xe,be,F)=>{F.d(be,{Hp:()=>qe,Lv:()=>ae});var h=F(5044),re=F(7908),L=F(5367),he=F(5160),ce=F(6921);const Ee=ge("C",void 0,void 0);function ge(oe,Te,je){return{kind:oe,value:Te,error:je}}var z=F(2496),K=F(8706);class ae extends re.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,re.Nn)(Te)&&Te.add(this)):this.destination=Ve}static create(Te,je,Le){return new qe(Te,je,Le)}next(Te){this.isStopped?He(ge("N",Te,void 0),this):this._next(Te)}error(Te){this.isStopped?He(ge("E",void 0,Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?He(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class qe extends ae{constructor(Te,je,Le){let ct;if(super(),(0,h.m)(Te))ct=Te;else if(Te){let Pe;({next:ct,error:je,complete:Le}=Te),this&&L.v.useDeprecatedNextContext?(Pe=Object.create(Te),Pe.unsubscribe=()=>this.unsubscribe()):Pe=Te,ct=null==ct?void 0:ct.bind(Pe),je=null==je?void 0:je.bind(Pe),Le=null==Le?void 0:Le.bind(Pe)}this.destination={next:ct?Ae(ct):ce.Z,error:Ae(null!=je?je:$e),complete:Le?Ae(Le):ce.Z}}}function Ae(oe,Te){return(...je)=>{try{oe(...je)}catch(Le){L.v.useDeprecatedSynchronousErrorHandling?(0,K.O)(Le):(0,he.h)(Le)}}}function $e(oe){throw oe}function He(oe,Te){const{onStoppedNotification:je}=L.v;je&&z.z.setTimeout(()=>je(oe,Te))}const Ve={closed:!0,next:ce.Z,error:$e,complete:ce.Z}},7908:(Xe,be,F)=>{F.d(be,{Lc:()=>Ee,w0:()=>ce,Nn:()=>le});var h=F(5044);const L=(0,F(4893).d)(ge=>function(K){ge(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((ae,qe)=>`${qe+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K});var he=F(3980);class ce{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:K}=this;if(K)if(this._parentage=null,Array.isArray(K))for(const Ae of K)Ae.remove(this);else K.remove(this);const{initialTeardown:ae}=this;if((0,h.m)(ae))try{ae()}catch(Ae){z=Ae instanceof L?Ae.errors:[Ae]}const{_teardowns:qe}=this;if(qe){this._teardowns=null;for(const Ae of qe)try{de(Ae)}catch($e){z=null!=z?z:[],$e instanceof L?z=[...z,...$e.errors]:z.push($e)}}if(z)throw new L(z)}}add(z){var K;if(z&&z!==this)if(this.closed)de(z);else{if(z instanceof ce){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._teardowns=null!==(K=this._teardowns)&&void 0!==K?K:[]).push(z)}}_hasParent(z){const{_parentage:K}=this;return K===z||Array.isArray(K)&&K.includes(z)}_addParent(z){const{_parentage:K}=this;this._parentage=Array.isArray(K)?(K.push(z),K):K?[K,z]:z}_removeParent(z){const{_parentage:K}=this;K===z?this._parentage=null:Array.isArray(K)&&(0,he.P)(K,z)}remove(z){const{_teardowns:K}=this;K&&(0,he.P)(K,z),z instanceof ce&&z._removeParent(this)}}ce.EMPTY=(()=>{const ge=new ce;return ge.closed=!0,ge})();const Ee=ce.EMPTY;function le(ge){return ge instanceof ce||ge&&"closed"in ge&&(0,h.m)(ge.remove)&&(0,h.m)(ge.add)&&(0,h.m)(ge.unsubscribe)}function de(ge){(0,h.m)(ge)?ge():ge.unsubscribe()}},5367:(Xe,be,F)=>{F.d(be,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(Xe,be,F)=>{F.d(be,{E:()=>re});const re=new(F(8305).y)(ce=>ce.complete())},5947:(Xe,be,F)=>{F.d(be,{D:()=>ct});var h=F(9985),re=F(4763),L=F(5222),Ee=F(8305),de=F(5497),ge=F(5044),z=F(8395);function ae(Pe,Ge){if(!Pe)throw new Error("Iterable cannot be null");return new Ee.y(Ye=>{(0,z.f)(Ye,Ge,()=>{const we=Pe[Symbol.asyncIterator]();(0,z.f)(Ye,Ge,()=>{we.next().then(Q=>{Q.done?Ye.complete():Ye.next(Q.value)})},0,!0)})})}var qe=F(1073),Ae=F(2442),$e=F(1537),He=F(2317),Ve=F(9908),oe=F(3754),Te=F(7751);function ct(Pe,Ge){return Ge?function(Pe,Ge){if(null!=Pe){if((0,qe.c)(Pe))return function(Pe,Ge){return(0,h.Xf)(Pe).pipe((0,L.R)(Ge),(0,re.Q)(Ge))}(Pe,Ge);if((0,$e.z)(Pe))return function(Pe,Ge){return new Ee.y(Ye=>{let we=0;return Ge.schedule(function(){we===Pe.length?Ye.complete():(Ye.next(Pe[we++]),Ye.closed||this.schedule())})})}(Pe,Ge);if((0,Ae.t)(Pe))return function(Pe,Ge){return(0,h.Xf)(Pe).pipe((0,L.R)(Ge),(0,re.Q)(Ge))}(Pe,Ge);if((0,Ve.D)(Pe))return ae(Pe,Ge);if((0,He.T)(Pe))return function(Pe,Ge){return new Ee.y(Ye=>{let we;return(0,z.f)(Ye,Ge,()=>{we=Pe[de.h](),(0,z.f)(Ye,Ge,()=>{let Q,ne;try{({value:Q,done:ne}=we.next())}catch(fe){return void Ye.error(fe)}ne?Ye.complete():Ye.next(Q)},0,!0)}),()=>(0,ge.m)(null==we?void 0:we.return)&&we.return()})}(Pe,Ge);if((0,Te.L)(Pe))return function(Pe,Ge){return ae((0,Te.Q)(Pe),Ge)}(Pe,Ge)}throw(0,oe.z)(Pe)}(Pe,Ge):(0,h.Xf)(Pe)}},9985:(Xe,be,F)=>{F.d(be,{Xf:()=>qe});var h=F(9162),re=F(1537),L=F(2442),he=F(8305),ce=F(1073),Ee=F(9908),le=F(3754),de=F(2317),ge=F(7751),z=F(5044),K=F(5160),ae=F(4816);function qe(Le){if(Le instanceof he.y)return Le;if(null!=Le){if((0,ce.c)(Le))return function(Le){return new he.y(ct=>{const Pe=Le[ae.L]();if((0,z.m)(Pe.subscribe))return Pe.subscribe(ct);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,re.z)(Le))return function(Le){return new he.y(ct=>{for(let Pe=0;Pe<Le.length&&!ct.closed;Pe++)ct.next(Le[Pe]);ct.complete()})}(Le);if((0,L.t)(Le))return function(Le){return new he.y(ct=>{Le.then(Pe=>{ct.closed||(ct.next(Pe),ct.complete())},Pe=>ct.error(Pe)).then(null,K.h)})}(Le);if((0,Ee.D)(Le))return oe(Le);if((0,de.T)(Le))return function(Le){return new he.y(ct=>{for(const Pe of Le)if(ct.next(Pe),ct.closed)return;ct.complete()})}(Le);if((0,ge.L)(Le))return function(Le){return oe((0,ge.Q)(Le))}(Le)}throw(0,le.z)(Le)}function oe(Le){return new he.y(ct=>{(function(Le,ct){var Pe,Ge,Ye,we;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,h.KL)(Le);!(Ge=yield Pe.next()).done;)if(ct.next(Ge.value),ct.closed)return}catch(Q){Ye={error:Q}}finally{try{Ge&&!Ge.done&&(we=Pe.return)&&(yield we.call(Pe))}finally{if(Ye)throw Ye.error}}ct.complete()})})(Le,ct).catch(Pe=>ct.error(Pe))})}},3719:(Xe,be,F)=>{F.d(be,{T:()=>Ee});var h=F(5373),re=F(9985),L=F(5583),he=F(7613),ce=F(5947);function Ee(...le){const de=(0,he.yG)(le),ge=(0,he._6)(le,1/0),z=le;return z.length?1===z.length?(0,re.Xf)(z[0]):(0,h.J)(ge)((0,ce.D)(z,de)):L.E}},8889:(Xe,be,F)=>{F.d(be,{Q:()=>re});var h=F(584);class re extends h.Lv{constructor(he,ce,Ee,le,de){super(he),this.onFinalize=de,this._next=ce?function(ge){try{ce(ge)}catch(z){he.error(z)}}:super._next,this._error=le?function(ge){try{le(ge)}catch(z){he.error(z)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(ge){he.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}},4753:(Xe,be,F)=>{F.d(be,{U:()=>L});var h=F(9947),re=F(8889);function L(he,ce){return(0,h.e)((Ee,le)=>{let de=0;Ee.subscribe(new re.Q(le,ge=>{le.next(he.call(ce,ge,de++))}))})}},5373:(Xe,be,F)=>{F.d(be,{J:()=>L});var h=F(5724),re=F(4623);function L(he=1/0){return(0,h.z)(re.y,he)}},5724:(Xe,be,F)=>{F.d(be,{z:()=>de});var h=F(4753),re=F(9985),L=F(9947),ce=(F(8395),F(8889)),le=F(5044);function de(ge,z,K=1/0){return(0,le.m)(z)?de((ae,qe)=>(0,h.U)((Ae,$e)=>z(ae,Ae,qe,$e))((0,re.Xf)(ge(ae,qe))),K):("number"==typeof z&&(K=z),(0,L.e)((ae,qe)=>function(ge,z,K,ae,qe,Ae,$e,He){const Ve=[];let oe=0,Te=0,je=!1;const Le=()=>{je&&!Ve.length&&!oe&&z.complete()},ct=Ge=>oe<ae?Pe(Ge):Ve.push(Ge),Pe=Ge=>{oe++;let Ye=!1;(0,re.Xf)(K(Ge,Te++)).subscribe(new ce.Q(z,we=>{z.next(we)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(oe--;Ve.length&&oe<ae;){const we=Ve.shift();Pe(we)}Le()}catch(we){z.error(we)}}))};return ge.subscribe(new ce.Q(z,ct,()=>{je=!0,Le()})),()=>{}}(ae,qe,ge,K)))}},4763:(Xe,be,F)=>{F.d(be,{Q:()=>he});var h=F(8395),re=F(9947),L=F(8889);function he(ce,Ee=0){return(0,re.e)((le,de)=>{le.subscribe(new L.Q(de,ge=>(0,h.f)(de,ce,()=>de.next(ge),Ee),()=>(0,h.f)(de,ce,()=>de.complete(),Ee),ge=>(0,h.f)(de,ce,()=>de.error(ge),Ee)))})}},3174:(Xe,be,F)=>{F.d(be,{B:()=>Ee});var h=F(5947),re=F(9468),L=F(273),he=F(584),ce=F(9947);function Ee(de={}){const{connector:ge=(()=>new L.x),resetOnError:z=!0,resetOnComplete:K=!0,resetOnRefCountZero:ae=!0}=de;return qe=>{let Ae=null,$e=null,He=null,Ve=0,oe=!1,Te=!1;const je=()=>{null==$e||$e.unsubscribe(),$e=null},Le=()=>{je(),Ae=He=null,oe=Te=!1},ct=()=>{const Pe=Ae;Le(),null==Pe||Pe.unsubscribe()};return(0,ce.e)((Pe,Ge)=>{Ve++,!Te&&!oe&&je();const Ye=He=null!=He?He:ge();Ge.add(()=>{Ve--,0===Ve&&!Te&&!oe&&($e=le(ct,ae))}),Ye.subscribe(Ge),Ae||(Ae=new he.Hp({next:we=>Ye.next(we),error:we=>{Te=!0,je(),$e=le(Le,z,we),Ye.error(we)},complete:()=>{oe=!0,je(),$e=le(Le,K),Ye.complete()}}),(0,h.D)(Pe).subscribe(Ae))})(qe)}}function le(de,ge,...z){return!0===ge?(de(),null):!1===ge?null:ge(...z).pipe((0,re.q)(1)).subscribe(()=>de())}},5222:(Xe,be,F)=>{F.d(be,{R:()=>re});var h=F(9947);function re(L,he=0){return(0,h.e)((ce,Ee)=>{Ee.add(L.schedule(()=>ce.subscribe(Ee),he))})}},9468:(Xe,be,F)=>{F.d(be,{q:()=>he});var h=F(5583),re=F(9947),L=F(8889);function he(ce){return ce<=0?()=>h.E:(0,re.e)((Ee,le)=>{let de=0;Ee.subscribe(new L.Q(le,ge=>{++de<=ce&&(le.next(ge),ce<=de&&le.complete())}))})}},7384:(Xe,be,F)=>{F.d(be,{b:()=>ce});var h=F(5044),re=F(9947),L=F(8889),he=F(4623);function ce(Ee,le,de){const ge=(0,h.m)(Ee)||le||de?{next:Ee,error:le,complete:de}:Ee;return ge?(0,re.e)((z,K)=>{var ae;null===(ae=ge.subscribe)||void 0===ae||ae.call(ge);let qe=!0;z.subscribe(new L.Q(K,Ae=>{var $e;null===($e=ge.next)||void 0===$e||$e.call(ge,Ae),K.next(Ae)},()=>{var Ae;qe=!1,null===(Ae=ge.complete)||void 0===Ae||Ae.call(ge),K.complete()},Ae=>{var $e;qe=!1,null===($e=ge.error)||void 0===$e||$e.call(ge,Ae),K.error(Ae)},()=>{var Ae,$e;qe&&(null===(Ae=ge.unsubscribe)||void 0===Ae||Ae.call(ge)),null===($e=ge.finalize)||void 0===$e||$e.call(ge)}))}):he.y}},2869:(Xe,be,F)=>{F.d(be,{o:()=>ce});var h=F(7908);class re extends h.w0{constructor(le,de){super()}schedule(le,de=0){return this}}const L={setInterval(...Ee){const{delegate:le}=L;return((null==le?void 0:le.setInterval)||setInterval)(...Ee)},clearInterval(Ee){const{delegate:le}=L;return((null==le?void 0:le.clearInterval)||clearInterval)(Ee)},delegate:void 0};var he=F(3980);class ce extends re{constructor(le,de){super(le,de),this.scheduler=le,this.work=de,this.pending=!1}schedule(le,de=0){if(this.closed)return this;this.state=le;const ge=this.id,z=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(z,ge,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(z,this.id,de),this}requestAsyncId(le,de,ge=0){return L.setInterval(le.flush.bind(le,this),ge)}recycleAsyncId(le,de,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return de;L.clearInterval(de)}execute(le,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(le,de);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,de){let z,ge=!1;try{this.work(le)}catch(K){ge=!0,z=K||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:le,scheduler:de}=this,{actions:ge}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ge,this),null!=le&&(this.id=this.recycleAsyncId(de,le,null)),this.delay=null,super.unsubscribe()}}}},8843:(Xe,be,F)=>{F.d(be,{v:()=>L});var h=F(1733);class re{constructor(ce,Ee=re.now){this.schedulerActionCtor=ce,this.now=Ee}schedule(ce,Ee=0,le){return new this.schedulerActionCtor(this,ce).schedule(le,Ee)}}re.now=h.l.now;class L extends re{constructor(ce,Ee=re.now){super(ce,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:Ee}=this;if(this._active)return void Ee.push(ce);let le;this._active=!0;do{if(le=ce.execute(ce.state,ce.delay))break}while(ce=Ee.shift());if(this._active=!1,le){for(;ce=Ee.shift();)ce.unsubscribe();throw le}}}},2210:(Xe,be,F)=>{F.d(be,{z:()=>L,P:()=>he});var h=F(2869);const L=new(F(8843).v)(h.o),he=L},1733:(Xe,be,F)=>{F.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},2496:(Xe,be,F)=>{F.d(be,{z:()=>h});const h={setTimeout(...re){const{delegate:L}=h;return((null==L?void 0:L.setTimeout)||setTimeout)(...re)},clearTimeout(re){const{delegate:L}=h;return((null==L?void 0:L.clearTimeout)||clearTimeout)(re)},delegate:void 0}},5497:(Xe,be,F)=>{F.d(be,{h:()=>re});const re="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(Xe,be,F)=>{F.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(Xe,be,F)=>{F.d(be,{jO:()=>he,yG:()=>ce,_6:()=>Ee});var h=F(5044),re=F(7398);function L(le){return le[le.length-1]}function he(le){return(0,h.m)(L(le))?le.pop():void 0}function ce(le){return(0,re.K)(L(le))?le.pop():void 0}function Ee(le,de){return"number"==typeof L(le)?le.pop():de}},3980:(Xe,be,F)=>{function h(re,L){if(re){const he=re.indexOf(L);0<=he&&re.splice(he,1)}}F.d(be,{P:()=>h})},4893:(Xe,be,F)=>{function h(re){const he=re(ce=>{Error.call(ce),ce.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}F.d(be,{d:()=>h})},8706:(Xe,be,F)=>{F.d(be,{x:()=>L,O:()=>he});var h=F(5367);let re=null;function L(ce){if(h.v.useDeprecatedSynchronousErrorHandling){const Ee=!re;if(Ee&&(re={errorThrown:!1,error:null}),ce(),Ee){const{errorThrown:le,error:de}=re;if(re=null,le)throw de}}else ce()}function he(ce){h.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=ce)}},8395:(Xe,be,F)=>{function h(re,L,he,ce=0,Ee=!1){const le=L.schedule(function(){he(),Ee?re.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(re.add(le),!Ee)return le}F.d(be,{f:()=>h})},4623:(Xe,be,F)=>{function h(re){return re}F.d(be,{y:()=>h})},1537:(Xe,be,F)=>{F.d(be,{z:()=>h});const h=re=>re&&"number"==typeof re.length&&"function"!=typeof re},9908:(Xe,be,F)=>{F.d(be,{D:()=>re});var h=F(5044);function re(L){return Symbol.asyncIterator&&(0,h.m)(null==L?void 0:L[Symbol.asyncIterator])}},5044:(Xe,be,F)=>{function h(re){return"function"==typeof re}F.d(be,{m:()=>h})},1073:(Xe,be,F)=>{F.d(be,{c:()=>L});var h=F(4816),re=F(5044);function L(he){return(0,re.m)(he[h.L])}},2317:(Xe,be,F)=>{F.d(be,{T:()=>L});var h=F(5497),re=F(5044);function L(he){return(0,re.m)(null==he?void 0:he[h.h])}},2442:(Xe,be,F)=>{F.d(be,{t:()=>re});var h=F(5044);function re(L){return(0,h.m)(null==L?void 0:L.then)}},7751:(Xe,be,F)=>{F.d(be,{Q:()=>L,L:()=>he});var h=F(9162),re=F(5044);function L(ce){return(0,h.FC)(this,arguments,function*(){const le=ce.getReader();try{for(;;){const{value:de,done:ge}=yield(0,h.qq)(le.read());if(ge)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(de)}}finally{le.releaseLock()}})}function he(ce){return(0,re.m)(null==ce?void 0:ce.getReader)}},7398:(Xe,be,F)=>{F.d(be,{K:()=>re});var h=F(5044);function re(L){return L&&(0,h.m)(L.schedule)}},9947:(Xe,be,F)=>{F.d(be,{A:()=>re,e:()=>L});var h=F(5044);function re(he){return(0,h.m)(null==he?void 0:he.lift)}function L(he){return ce=>{if(re(ce))return ce.lift(function(Ee){try{return he(Ee,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(Xe,be,F)=>{function h(){}F.d(be,{Z:()=>h})},5160:(Xe,be,F)=>{F.d(be,{h:()=>L});var h=F(5367),re=F(2496);function L(he){re.z.setTimeout(()=>{const{onUnhandledError:ce}=h.v;if(!ce)throw he;ce(he)})}},3754:(Xe,be,F)=>{function h(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>h})},4168:(Xe,be,F)=>{var h=F(3668);let re=null;function L(){return re}const le=new h.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.LFG)(K)},providedIn:"platform"}),n})();const z=new h.OlP("Location Initialized");let K=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ae()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ae()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return new K((0,h.LFG)(le))},providedIn:"platform"}),n})();function ae(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function(n){const e=(0,h.LFG)(le).location;return new je((0,h.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Te=new h.OlP("appBaseHref");let je=(()=>{class n extends Ve{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+He(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+He(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(Te,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+He(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+He(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(Te,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ct=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=$e(Ye(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ae,n.stripTrailingSlash=$e,n.\u0275fac=function(t){return new(t||n)(h.LFG(Ve),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return new ct((0,h.LFG)(Ve),(0,h.LFG)(de))},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Zero=0]="Zero",ne[ne.One=1]="One",ne[ne.Two=2]="Two",ne[ne.Few=3]="Few",ne[ne.Many=4]="Many",ne[ne.Other=5]="Other",ne))();const Zr=h.kL8;class _i{}let Xt=(()=>{class n extends _i{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Zr(r||this.locale)(t)){case ne.Zero:return"zero";case ne.One:return"one";case ne.Two:return"two";case ne.Few:return"few";case ne.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ys("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ys("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Hl{constructor(){this.$implicit=null,this.ngIf=null}}function Ys(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class qn{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ha=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Ui=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new qn(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(Ha,9))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),ni=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split(".");null!=(r=null!=r&&o?`${r}${o}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),xo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[{provide:_i,useClass:Xt}]}),n})();const us="browser";function qa(n){return n===us}function Dr(n){return"server"===n}let Wu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ku((0,h.LFG)(le),window)}),n})();class Ku{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lf(this.window.history)||lf(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function lf(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Rs extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Rs,re||(re=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Wa=Wa||document.querySelector("base"),Wa?Wa.getAttribute("href"):null);return null==t?null:function(n){Nn=Nn||document.createElement("a"),Nn.setAttribute("href",n);const e=Nn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Nn,Wa=null;const Hi=new h.OlP("TRANSITION_ID"),rn=[{provide:h.ip1,useFactory:function(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Hi,le,h.zs3],multi:!0}];class Ka{static init(){(0,h.VLi)(new Ka)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const d=function(g){u=u||g,o--,0==o&&r(u)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Za=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ks=new h.OlP("EventManagerPlugins");let ri=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const u=i[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ks),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let No=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),gt=(()=>{class n extends No{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ya),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ya))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ya(n){L().remove(n)}const br={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qa=/%COMP%/g;function Ns(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ns(n,i,t):(i=i.replace(Qa,n),t.push(i))}return t}function On(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let $i=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Er(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new uf(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Qu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ns(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ri),h.LFG(gt),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Er{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(br[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=br[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=br[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,On(r)):this.eventManager.addEventListener(e,t,On(r))}}class uf extends Er{constructor(e,t,r,i){super(e),this.component=r;const o=Ns(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(Qa,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Qa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Qu extends Er{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ns(i.id,i.styles,[]);for(let u=0;u<o.length;u++){const d=document.createElement("style");d.textContent=o[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Po=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=["alt","control","meta","shift"],Gi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ca={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},to={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let cs=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="";if(Fo.forEach(g=>{const v=r.indexOf(g);v>-1&&(r.splice(v,1),u+=g+".")}),u+=o,0!=r.length||0===o.length)return null;const d={};return d.domEventName=i,d.fullKey=u,d}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ca.hasOwnProperty(e)&&(e=ca[e]))}return Gi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fo.forEach(o=>{o!=i&&to[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vo=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:us},{provide:h.g9A,useValue:function(){Rs.makeCurrent(),Ka.init()},multi:!0},{provide:le,useFactory:function(){return(0,h.RDi)(document),document},deps:[]}]),Wl=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function(){return new h.qLn},deps:[]},{provide:ks,useClass:Po,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:ks,useClass:cs,multi:!0,deps:[le]},{provide:$i,useClass:$i,deps:[ri,gt,h.AFp]},{provide:h.FYo,useExisting:$i},{provide:No,useExisting:gt},{provide:gt,useClass:gt,deps:[le]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ri,useClass:ri,deps:[ks,h.R0b]},{provide:class{},useClass:Za,deps:[]}];let da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Hi,useExisting:h.AFp},rn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Wl,imports:[xo,h.hGG]}),n})();"undefined"!=typeof window&&window;let ul=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(ha),r},providedIn:"root"}),n})(),ha=(()=>{class n extends ul{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(r),(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function(n){return new ha(n.get(le))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var _n=F(5947),io=F(7613);function Ze(...n){const e=(0,io.yG)(n);return(0,_n.D)(n,e)}var Fn=F(273);class ii extends Fn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var er=F(8305);const{isArray:fa}=Array,{getPrototypeOf:Rm,prototype:cl,keys:Jl}=Object;function eu(n){if(1===n.length){const e=n[0];if(fa(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&Rm(n)===cl}(e)){const t=Jl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Uo=F(4623),nt=F(4753);const{isArray:Bo}=Array;function jo(n){return(0,nt.U)(e=>function(n,e){return Bo(e)?n(...e):n(e)}(n,e))}function tu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var yn=F(8889),nu=F(8395);function zi(n,e,t){n?(0,nu.f)(t,n,e):e()}const Ho=(0,F(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var oo=F(5373);function ma(...n){return(0,oo.J)(1)((0,_n.D)(n,(0,io.yG)(n)))}var Lr=F(9985);function si(n){return new er.y(e=>{(0,Lr.Xf)(n()).subscribe(e)})}var dl=F(5583),oi=F(7908),Hn=F(9947);function $o(){return(0,Hn.e)((n,e)=>{let t=null;n._refCount++;const r=new yn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Os extends er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new oi.w0;const t=this.getSubject();e.add(this.source.subscribe(new yn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=oi.w0.EMPTY)}return e}refCount(){return $o()(this)}}function Ln(n,e){return(0,Hn.e)((t,r)=>{let i=null,o=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe(new yn.Q(r,g=>{null==i||i.unsubscribe();let v=0;const C=o++;(0,Lr.Xf)(n(g,C)).subscribe(i=new yn.Q(r,D=>r.next(e?e(g,D,C,v++):D),()=>{i=null,d()}))},()=>{u=!0,d()}))})}var Gt=F(9468);function vi(...n){const e=(0,io.yG)(n);return(0,Hn.e)((t,r)=>{(e?ma(n,t,e):ma(n,t)).subscribe(r)})}function ds(n,e,t,r,i){return(o,u)=>{let d=t,g=e,v=0;o.subscribe(new yn.Q(u,C=>{const D=v++;g=d?n(g,C,D):(d=!0,C),r&&u.next(g)},i&&(()=>{d&&u.next(g),u.complete()})))}}function bi(n,e){return(0,Hn.e)(ds(n,e,arguments.length>=2,!0))}function In(n,e){return(0,Hn.e)((t,r)=>{let i=0;t.subscribe(new yn.Q(r,o=>n.call(e,o,i++)&&r.next(o)))})}function qi(n){return(0,Hn.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe(new yn.Q(t,void 0,void 0,u=>{o=(0,Lr.Xf)(n(u,qi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}var Tn=F(5724),Wi=F(5044);function ga(n,e){return(0,Wi.m)(e)?(0,Tn.z)(n,e,1):(0,Tn.z)(n,1)}function hn(n){return n<=0?()=>dl.E:(0,Hn.e)((e,t)=>{let r=[];e.subscribe(new yn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hl(n=rc){return(0,Hn.e)((e,t)=>{let r=!1;e.subscribe(new yn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function rc(){return new Ho}function ic(n){return(0,Hn.e)((e,t)=>{let r=!1;e.subscribe(new yn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Go(n,e){const t=arguments.length>=2;return r=>r.pipe(n?In((i,o)=>n(i,o,r)):Uo.y,(0,Gt.q)(1),t?ic(e):hl(()=>new Ho))}var hr=F(7384);function ru(n){return(0,Hn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Vr{constructor(e,t){this.id=e,this.url=t}}class iu extends Vr{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mn extends Vr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class su extends Vr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fl extends Vr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class py extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _a extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki extends Vr{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hs extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Td extends Vr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ya{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ou{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class va{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Sr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fs(n){return new Sr(n)}const ao="ngNavigationCancelingError";function pf(n){const e=Error("NavigationCancelingError: "+n);return e[ao]=!0,e}function gf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],d=n[o];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ar(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!au(n[i],e[i]))return!1;return!0}function au(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Sd(n){return Array.prototype.concat.apply([],n)}function ac(n){return n.length>0?n[n.length-1]:null}function Vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Mr(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,_n.D)(Promise.resolve(n)):Ze(n)}const Ad={exact:function lu(n,e,t){if(!_t(n.segments,e.segments)||!B(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!lu(n.children[r],e.children[r],t))return!1;return!0},subset:M},uo={exact:function(n,e){return Ar(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>au(n[t],e[t]))},ignored:()=>!0};function Md(n,e,t){return Ad[t.paths](n.root,e.root,t.matrixParams)&&uo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return N(n,e,e.segments,t)}function N(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_t(i,t)||e.hasChildren()||!B(i,t,r))}if(n.segments.length===t.length){if(!_t(n.segments,t)||!B(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!M(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(_t(n.segments,i)&&B(n.segments,i,r)&&n.children[Pt])&&N(n.children[Pt],e,o,r)}}function B(n,e,t){return e.every((r,i)=>uo[t](n[i].parameters,r.parameters))}class J{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fs(this.queryParams)),this._queryParamMap}toString(){return Ei.serialize(this)}}class X{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vn(this)}}class ke{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fs(this.parameters)),this._parameterMap}toString(){return yf(this)}}function _t(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Wt{}class Rt{parse(e){const t=new D0(e);return new J(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ur(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ai(t)}=${ai(i)}`).join("&"):`${ai(t)}=${ai(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Ei=new Rt;function vn(n){return n.segments.map(e=>yf(e)).join("/")}function Ur(n,e){if(!n.hasChildren())return vn(n);if(e){const t=n.children[Pt]?Ur(n.children[Pt],!1):"",r=[];return Vn(n.children,(i,o)=>{o!==Pt&&r.push(`${o}:${Ur(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Vn(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),Vn(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[Ur(n.children[Pt],!1)]:[`${i}:${Ur(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${vn(n)}/${t[0]}`:`${vn(n)}/(${t.join("//")})`}}function qo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ai(n){return qo(n).replace(/%3B/gi,";")}function Zi(n){return qo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wo(n){return decodeURIComponent(n)}function Ko(n){return Wo(n.replace(/\+/g,"%20"))}function yf(n){return`${Zi(n.path)}${function(n){return Object.keys(n).map(e=>`;${Zi(e)}=${Zi(n[e])}`).join("")}(n.parameters)}`}const Ea=/^[^\/()?;=#]+/;function co(n){const e=n.match(Ea);return e?e[0]:""}const gy=/^[^=?&#]+/,bf=/^[^&#]+/;class D0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new X(e,t)),r}parseSegment(){const e=co(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ke(Wo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=co(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=co(this.remaining);i&&(r=i,this.capture(r))}e[Wo(t)]=Wo(r)}parseQueryParam(e){const t=function(n){const e=n.match(gy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(bf);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Ko(t),o=Ko(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=co(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[Pt]:new X([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Om{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ef(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ef(e,this._root).map(t=>t.value)}}function uc(n,e){if(n===e.value)return e;for(const t of e.children){const r=uc(n,t);if(r)return r}return null}function Ef(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ef(n,t);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ho(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pl extends Om{constructor(e,t){super(e),this.snapshot=t,cu(this,e)}toString(){return this.snapshot.toString()}}function Pm(n,e){const t=function(n,e){const u=new gl([],{},{},"",{},Pt,e,null,n.root,-1,{});return new xd("",new ps(u,[]))}(n,e),r=new ii([new ke("",{})]),i=new ii({}),o=new ii({}),u=new ii({}),d=new ii(""),g=new cc(r,i,u,d,o,Pt,e,t.root);return g.snapshot=t.root,new pl(new ps(g,[]),t)}class cc{constructor(e,t,r,i,o,u,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=d,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(e=>fs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(e=>fs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ml(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:it(it({},e.params),t.params),data:it(it({},e.data),t.data),resolve:it(it({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gl{constructor(e,t,r,i,o,u,d,g,v,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=d,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xd extends Om{constructor(e,t){super(t),this.url=e,cu(this,t)}toString(){return wa(this._root)}}function cu(n,e){e.value._routerState=n,e.children.forEach(t=>cu(n,t))}function wa(n){const e=n.children.length>0?` { ${n.children.map(wa).join(", ")} } `:"";return`${n.value}${e}`}function Rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ar(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ar(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ar(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ar(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kd(n,e){const t=Ar(n.params,e.params)&&function(n,e){return _t(n,e)&&n.every((t,r)=>Ar(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kd(n.parent,e.parent))}function dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dc(n,r,i);return dc(n,r)})}(n,e,t);return new ps(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>dc(n,d)),u}}const r=function(n){return new cc(new ii(n.url),new ii(n.params),new ii(n.queryParams),new ii(n.fragment),new ii(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>dc(n,o));return new ps(r,i)}}function hc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fc(n){return"object"==typeof n&&null!=n&&n.outlets}function pc(n,e,t,r,i){let o={};return r&&Vn(r,(u,d)=>{o[d]=Array.isArray(u)?u.map(g=>`${g}`):`${u}`}),new J(t.root===n?e:Vm(t.root,n,e),o,i)}function Vm(n,e,t){const r={};return Vn(n.children,(i,o)=>{r[o]=i===e?t:Vm(i,e,t)}),new X(n.segments,r)}class Um{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(fc);if(i&&i!==ac(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jm(n,e,t){if(n||(n=new X([],{})),0===n.segments.length&&n.hasChildren())return Cf(n,e,t);const r=function(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],d=t[r];if(fc(d))break;const g=`${d}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!Ca(g,v,u))return o;r+=2}else{if(!Ca(g,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new X(n.segments.slice(0,r.pathIndex),{});return o.children[Pt]=new X(n.segments.slice(r.pathIndex),n.children),Cf(o,0,i)}return r.match&&0===i.length?new X(n.segments,{}):r.match&&!n.hasChildren()?_l(n,e,t):r.match?Cf(n,0,i):_l(n,e,t)}function Cf(n,e,t){if(0===t.length)return new X(n.segments,{});{const r=function(n){return fc(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return Vn(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[u]=jm(n.children[u],e,o))}),Vn(n.children,(o,u)=>{void 0===r[u]&&(i[u]=o)}),new X(n.segments,i)}}function _l(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(fc(o)){const g=Hm(o.outlets);return new X(r,g)}if(0===i&&hc(t[0])){r.push(new ke(n.segments[e].path,Ls(t[0]))),i++;continue}const u=fc(o)?o.outlets[Pt]:`${o}`,d=i<t.length-1?t[i+1]:null;u&&d&&hc(d)?(r.push(new ke(u,Ls(d))),i+=2):(r.push(new ke(u,{})),i++)}return new X(r,{})}function Hm(n){const e={};return Vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_l(new X([],{}),0,t))}),e}function Ls(n){const e={};return Vn(n,(t,r)=>e[r]=`${t}`),e}function Ca(n,e,t){return n==t.path&&Ar(e,t.parameters)}class Gm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ho(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),Vn(i,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ho(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ho(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ho(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ou(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Rd(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),Rd(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=d?d.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=g,u.outlet&&u.outlet.activateWith(i,g),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class qm{constructor(e,t){this.routes=e,this.module=t}}function yl(n){return"function"==typeof n}function Zo(n){return n instanceof J}const hu=Symbol("INITIAL_VALUE");function vl(){return Ln(n=>function(...n){const e=(0,io.yG)(n),t=(0,io.jO)(n),{args:r,keys:i}=eu(n);if(0===r.length)return(0,_n.D)([],e);const o=new er.y(function(n,e,t=Uo.y){return r=>{zi(e,()=>{const{length:i}=n,o=new Array(i);let u=i,d=i;for(let g=0;g<i;g++)zi(e,()=>{const v=(0,_n.D)(n[g],e);let C=!1;v.subscribe(new yn.Q(r,D=>{o[g]=D,C||(C=!0,d--),d||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>tu(i,u):Uo.y));return t?o.pipe(jo(t)):o}(n.map(e=>e.pipe((0,Gt.q)(1),vi(hu)))).pipe(bi((e,t)=>{let r=!1;return t.reduce((i,o,u)=>i!==hu?i:(o===hu&&(r=!0),r||!1!==o&&u!==t.length-1&&!Zo(o)?i:o),e)},hu),In(e=>e!==hu),(0,nt.U)(e=>Zo(e)?e:!0===e),(0,Gt.q)(1)))}class Ey{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fu,this.attachRef=null}}class fu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ey,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Km=(()=>{class n{constructor(t,r,i,o,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=o||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,g=new Pd(t,d,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fu),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Pd{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===cc?this.route:e===fu?this.childContexts:this.parent.get(e,t)}}let mc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[Km],encapsulation:2}),n})();function Fd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ld(r,wy(e,r))}}function Ld(n,e){n.children&&Fd(n.children,e)}function wy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function $n(n){const e=n.children&&n.children.map($n),t=e?pi(it({},n),{children:e}):it({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=mc),t}function ms(n){return n.outlet||Pt}function Cy(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}const fo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gc(n,e,t){var d;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?it({},fo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gf)(t,n,e);if(!i)return it({},fo);const o={};Vn(i.posParams,(g,v)=>{o[v]=g.path});const u=i.consumed.length>0?it(it({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:u,positionalParamSegments:null!=(d=i.posParams)?d:{}}}function Vd(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Af(n,e,r)&&ms(r)!==Pt)}(n,t,r)){const u=new X(e,function(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&ms(o)!==Pt){const u=new X([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[ms(o)]=u}return i}(n,e,r,new X(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Af(n,e,r))}(n,t,r)){const u=new X(n.segments,function(n,e,t,r,i,o){const u={};for(const d of r)if(Af(n,t,d)&&!i[ms(d)]){const g=new X([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[ms(d)]=g}return it(it({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new X(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Af(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Mf(n,e,t,r){return!!(ms(n)===r||r!==Pt&&Af(e,t,n))&&("**"===n.path||gc(e,n,t).matched)}function pu(n,e,t){return 0===e.length&&!n.children[t]}class fr{constructor(e){this.segmentGroup=e||null}}class mu{constructor(e){this.urlTree=e}}function _c(n){return new er.y(e=>e.error(new fr(n)))}function xf(n){return new er.y(e=>e.error(new mu(n)))}function Br(n){return new er.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Zm{constructor(e,t,r,i,o){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Vd(this.urlTree.root,[],[],this.config).segmentGroup,t=new X(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,nt.U)(o=>this.createUrlTree(Ud(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qi(o=>{if(o instanceof mu)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof fr?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,nt.U)(i=>this.createUrlTree(Ud(i),e.queryParams,e.fragment))).pipe(qi(i=>{throw i instanceof fr?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new X([],{[Pt]:e}):e;return new J(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,nt.U)(o=>new X([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,_n.D)(i).pipe(ga(o=>{const u=r.children[o],d=Cy(t,o);return this.expandSegmentGroup(e,d,u,o).pipe((0,nt.U)(g=>({segment:g,outlet:o})))}),bi((o,u)=>(o[u.outlet]=u.segment,o),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?In((i,o)=>n(i,o,r)):Uo.y,hn(1),t?ic(e):hl(()=>new Ho))}())}expandSegment(e,t,r,i,o,u){return(0,_n.D)(r).pipe(ga(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,o,u).pipe(qi(v=>{if(v instanceof fr)return Ze(null);throw v}))),Go(d=>!!d),qi((d,g)=>{if(d instanceof Ho||"EmptyError"===d.name){if(pu(t,i,o))return Ze(new X([],{}));throw new fr(t)}throw d}))}expandSegmentAgainstRoute(e,t,r,i,o,u,d){return Mf(i,t,o,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u):_c(t):_c(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xf(o):this.lineralizeSegments(r,o).pipe((0,Tn.z)(u=>{const d=new X(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:d,consumedSegments:g,lastChild:v,positionalParamSegments:C}=gc(t,i,o);if(!d)return _c(t);const D=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?xf(D):this.lineralizeSegments(i,D).pipe((0,Tn.z)(O=>this.expandSegment(e,t,r,O.concat(o.slice(v)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ze(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,nt.U)(O=>(r._loadedConfig=O,new X(i,{})))):Ze(new X(i,{}));const{matched:u,consumedSegments:d,lastChild:g}=gc(t,r,i);if(!u)return _c(t);const v=i.slice(g);return this.getChildConfig(e,r,i).pipe((0,Tn.z)(D=>{const O=D.module,U=D.routes,{segmentGroup:j,slicedSegments:te}=Vd(t,d,v,U),ve=new X(j.segments,j.children);if(0===te.length&&ve.hasChildren())return this.expandChildren(O,U,ve).pipe((0,nt.U)(ot=>new X(d,ot)));if(0===U.length&&0===te.length)return Ze(new X(d,{}));const Je=ms(r)===o;return this.expandSegment(O,ve,U,te,Je?Pt:o,!0).pipe((0,nt.U)(ht=>new X(d.concat(ht.segments),ht.children)))}))}getChildConfig(e,t,r){return t.children?Ze(new qm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ze(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Tn.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,nt.U)(o=>(t._loadedConfig=o,o))):(n=t,new er.y(e=>e.error(pf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):Ze(new qm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Ze(i.map(u=>{const d=e.get(u);let g;if((n=d)&&yl(n.canLoad))g=d.canLoad(t,r);else{if(!yl(d))throw new Error("Invalid CanLoad guard");g=d(t,r)}var n;return Mr(g)})).pipe(vl(),(0,hr.b)(u=>{if(!Zo(u))return;const d=pf(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw d.url=u,d}),(0,nt.U)(u=>!0===u)):Ze(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[Pt])return Br(e.redirectTo);i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new J(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vn(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[o]=t[d]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return Vn(t.children,(d,g)=>{u[g]=this.createSegmentGroup(e,d,r,i)}),new X(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ud(n){const e={};for(const r of Object.keys(n.children)){const o=Ud(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new X(n.segments.concat(e.segments),e.children)}return n}(new X(n.segments,e))}class vc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gu{constructor(e,t){this.component=e,this.route=t}}function Ym(n,e,t){const r=n._root;return El(r,e?e._root:null,t,[r.value])}function bl(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function El(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ho(e);return n.children.forEach(u=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const g=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_t(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_t(n.url,e.url)||!Ar(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kd(n,e)||!Ar(n.queryParams,e.queryParams);default:return!kd(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new vc(r)):(o.data=u.data,o._resolvedData=u._resolvedData),El(n,e,o.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new gu(d.outlet.component,u))}else u&&Bd(e,d,i),i.canActivateChecks.push(new vc(r)),El(n,null,o.component?d?d.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),Vn(o,(u,d)=>Bd(u,t.getContext(d),i)),i}function Bd(n,e,t){const r=ho(n),i=n.value;Vn(r,(o,u)=>{Bd(o,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new gu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Py{}function Of(n){return new er.y(e=>e.error(n))}class Pf{constructor(e,t,r,i,o,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=u}recognize(){const e=Vd(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new gl([],Object.freeze({}),Object.freeze(it({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ps(r,t),o=new xd(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=ml(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const u=t.children[o],d=Cy(e,o),g=this.processSegmentGroup(d,u,o);if(null===g)return null;r.push(...g)}const i=jd(r);return i.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const o of e){const u=this.processSegmentAgainstRoute(o,t,r,i);if(null!==u)return u}return pu(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Mf(e,t,r,i))return null;let o,u=[],d=[];if("**"===e.path){const U=r.length>0?ac(r).parameters:{};o=new gl(r,U,Object.freeze(it({},this.urlTree.queryParams)),this.urlTree.fragment,gs(e),ms(e),e.component,e,wi(t),Vs(t)+r.length,Fy(e))}else{const U=gc(t,e,r);if(!U.matched)return null;u=U.consumedSegments,d=r.slice(U.lastChild),o=new gl(u,U.parameters,Object.freeze(it({},this.urlTree.queryParams)),this.urlTree.fragment,gs(e),ms(e),e.component,e,wi(t),Vs(t)+u.length,Fy(e))}const g=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:v,slicedSegments:C}=Vd(t,u,d,g.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);var n;if(0===C.length&&v.hasChildren()){const U=this.processChildren(g,v);return null===U?null:[new ps(o,U)]}if(0===g.length&&0===C.length)return[new ps(o,[])];const D=ms(e)===i,O=this.processSegment(g,v,C,D?Pt:i);return null===O?null:[new ps(o,O)]}}function tg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function jd(n){const e=[],t=new Set;for(const r of n){if(!tg(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=jd(r.children);e.push(new ps(r.value,i))}return e.filter(r=>!t.has(r))}function wi(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Vs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function gs(n){return n.data||{}}function Fy(n){return n.resolve||{}}function _s(n){return Ln(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,nt.U)(()=>e)):Ze(e)})}class bc extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $d=new h.OlP("ROUTES");class Gd{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,nt.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=o.create(e);return new qm(Sd(u.injector.get($d,void 0,h.XFs.Self|h.XFs.Optional)).map($n),u)}),qi(o=>{throw t._loader$=void 0,o}));return t._loader$=new Os(i,()=>new Fn.x).pipe($o()),t._loader$}loadModuleFactory(e){return Mr(e()).pipe((0,Tn.z)(t=>t instanceof h.YKP?Ze(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class Ec{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zd(n){throw n}function x0(n,e,t){return e.parse("/")}function li(n,e){return Ze(null)}const wl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ci=(()=>{class n{constructor(t,r,i,o,u,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fn.x,this.errorHandler=zd,this.malformedUriErrorHandler=x0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:li,afterPreactivation:li},this.urlHandlingStrategy=new Ec,this.routeReuseStrategy=new bc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const D=u.get(h.R0b);this.isNgZoneEnabled=D instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=new J(new X([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gd(u,d,O=>this.triggerEvent(new zo(O)),O=>this.triggerEvent(new ya(O))),this.routerState=Pm(this.currentUrlTree,this.rootComponentType),this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(In(i=>0!==i.id),(0,nt.U)(i=>pi(it({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ln(i=>{let o=!1,u=!1;return Ze(i).pipe((0,hr.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?pi(it({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ln(d=>{const g=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return _u(d.source)&&(this.browserUrlTree=d.extractedUrl),Ze(d).pipe(Ln(D=>{const O=this.transitions.getValue();return r.next(new iu(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),O!==this.transitions.getValue()?dl.E:Promise.resolve(D)}),function(n,e,t,r){return Ln(i=>function(n,e,t,r,i){return new Zm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,nt.U)(o=>pi(it({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,hr.b)(D=>{this.currentNavigation=pi(it({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Tn.z)(o=>function(n,e,t,r,i="emptyOnly",o="legacy"){try{const u=new Pf(n,e,t,r,i,o).recognize();return null===u?Of(new Py):Ze(u)}catch(u){return Of(u)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe((0,nt.U)(u=>pi(it({},o),{targetSnapshot:u}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,hr.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(U,D)}this.browserUrlTree=D.urlAfterRedirects}const O=new py(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(O)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:U,source:j,restoredState:te,extras:ve}=d,Je=new iu(O,this.serializeUrl(U),j,te);r.next(Je);const st=Pm(U,this.rootComponentType).snapshot;return Ze(pi(it({},d),{targetSnapshot:st,urlAfterRedirects:U,extras:pi(it({},ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),dl.E}),_s(d=>{const{targetSnapshot:g,id:v,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:O,replaceUrl:U}}=d;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!O,replaceUrl:!!U})}),(0,hr.b)(d=>{const g=new _a(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,nt.U)(d=>pi(it({},d),{guards:Ym(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?Ze(pi(it({},t),{guardsResult:!0})):function(n,e,t,r){return(0,_n.D)(n).pipe((0,Tn.z)(i=>function(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ze(o.map(d=>{const g=bl(d,e,i);let v;if(function(n){return n&&yl(n.canDeactivate)}(g))v=Mr(g.canDeactivate(n,e,t,r));else{if(!yl(g))throw new Error("Invalid CanDeactivate guard");v=Mr(g(n,e,t,r))}return v.pipe(Go())})).pipe(vl()):Ze(!0)}(i.component,i.route,t,e,r)),Go(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Tn.z)(d=>d&&function(n){return"boolean"==typeof n}(d)?function(n,e,t,r){return(0,_n.D)(e).pipe(ga(i=>ma(function(n,e){return null!==n&&e&&e(new sc(n)),Ze(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new oc(n)),Ze(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>si(()=>Ze(u.guards.map(g=>{const v=bl(g,u.node,t);let C;if(function(n){return n&&yl(n.canActivateChild)}(v))C=Mr(v.canActivateChild(r,n));else{if(!yl(v))throw new Error("Invalid CanActivateChild guard");C=Mr(v(r,n))}return C.pipe(Go())})).pipe(vl())));return Ze(o).pipe(vl())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(o=>si(()=>{const u=bl(o,e,t);let d;if(function(n){return n&&yl(n.canActivate)}(u))d=Mr(u.canActivate(e,n));else{if(!yl(u))throw new Error("Invalid CanActivate guard");d=Mr(u(e,n))}return d.pipe(Go())}));return Ze(i).pipe(vl())}(n,i.route,t))),Go(i=>!0!==i,!0))}(r,o,n,e):Ze(d)),(0,nt.U)(d=>pi(it({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,hr.b)(d=>{if(Zo(d.guardsResult)){const v=pf(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw v.url=d.guardsResult,v}const g=new Ki(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),In(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),_s(d=>{if(d.guards.canActivateChecks.length)return Ze(d).pipe((0,hr.b)(g=>{const v=new hs(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Ln(g=>{let v=!1;return Ze(g).pipe(function(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ze(t);let o=0;return(0,_n.D)(i).pipe(ga(u=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Ze({});const o={};return(0,_n.D)(i).pipe((0,Tn.z)(u=>function(n,e,t,r){const i=bl(n,e,r);return Mr(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,hr.b)(d=>{o[u]=d}))),hn(1),(0,Tn.z)(()=>Object.keys(o).length===i.length?Ze(o):dl.E))}(n._resolve,n,e,r).pipe((0,nt.U)(o=>(n._resolvedData=o,n.data=it(it({},n.data),ml(n,t).resolve),null)))}(u.route,r,n,e)),(0,hr.b)(()=>o++),hn(1),(0,Tn.z)(u=>o===i.length?Ze(t):dl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,hr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,hr.b)(g=>{const v=new Td(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),_s(d=>{const{targetSnapshot:g,id:v,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:O,replaceUrl:U}}=d;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!O,replaceUrl:!!U})}),(0,nt.U)(d=>{const g=function(n,e,t){const r=dc(n,e._root,t?t._root:void 0);return new pl(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return pi(it({},d),{targetRouterState:g})}),(0,hr.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,nt.U)(r=>(new Gm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,hr.b)({next(){o=!0},complete(){o=!0}}),ru(()=>{var d;o||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(d=this.currentNavigation)?void 0:d.id)===i.id&&(this.currentNavigation=null)}),qi(d=>{if(u=!0,function(n){return n&&n[ao]}(d)){const g=Zo(d.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const v=new su(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(v),g?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_u(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new fl(i.id,this.serializeUrl(i.extractedUrl),d);r.next(g);try{i.resolve(this.errorHandler(d))}catch(v){i.reject(v)}}return dl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(it(it({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var d;const i={replaceUrl:!0},o=(null==(d=t.state)?void 0:d.navigationId)?t.state:null;if(o){const g=it({},o);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(i.state=g)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fd(t),this.config=t.map($n),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:d,preserveFragment:g}=r,v=i||this.routerState.root,C=g?this.currentUrlTree.fragment:u;let D=null;switch(d){case"merge":D=it(it({},this.currentUrlTree.queryParams),o);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}return null!==D&&(D=this.removeEmptyProps(D)),function(n,e,t,r,i){if(0===t.length)return pc(e.root,e.root,e,r,i);const o=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Um(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Vn(o.outlets,(g,v)=>{d[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new Um(t,e,r)}(t);if(o.toRoot())return pc(e.root,new X([],{}),e,r,i);const u=function(n,e,t){if(n.isAbsolute)return new Nd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new Nd(o,o===e.root,0)}const r=hc(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Nd(r,!1,i-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,e,n),d=u.processChildren?Cf(u.segmentGroup,u.index,o.commands):jm(u.segmentGroup,u.index,o.commands);return pc(u.segmentGroup,d,e,r,i)}(v,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?it({},wl):!1===r?it({},Vf):r,Zo(t))return Md(this.currentUrlTree,t,i);const o=this.parseUrl(t);return Md(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,u){var Je,st,ht;if(this.disposed)return Promise.resolve(!1);const d=this.transitions.value,g=_u(r)&&d&&!_u(d.source),v=d.rawUrl.toString()===t.toString(),C=d.id===(null==(Je=this.currentNavigation)?void 0:Je.id);if(g&&v&&C)return Promise.resolve(!0);let O,U,j;u?(O=u.resolve,U=u.reject,j=u.promise):j=new Promise((ot,Lt)=>{O=ot,U=Lt});const te=++this.navigationId;let ve;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ve=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!=(st=this.browserPageId)?st:0:(null!=(ht=this.browserPageId)?ht:0)+1):ve=0,this.setTransition({id:te,targetPageId:ve,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:O,reject:U,promise:j,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),j.catch(ot=>Promise.reject(ot))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o=it(it({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null==(o=this.currentNavigation)?void 0:o.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new su(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function _u(n){return"imperative"!==n}class p{}class E{preload(e,t){return Ze(null)}}let S=(()=>{class n{constructor(t,r,i,o){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new Gd(i,r,g=>t.triggerEvent(new zo(g)),g=>t.triggerEvent(new ya(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(In(t=>t instanceof Mn),ga(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const u=o._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(t,o)):o.children&&i.push(this.processRoutes(t,o.children));return(0,_n.D)(i).pipe((0,oo.J)(),(0,nt.U)(o=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ze(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Tn.z)(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ci),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(p))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),R=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof iu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof va&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new va(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ie=new h.OlP("ROUTER_CONFIGURATION"),Fe=new h.OlP("ROUTER_FORROOT_GUARD"),Se=[ct,{provide:Wt,useClass:Rt},{provide:Ci,useFactory:function(n,e,t,r,i,o,u={},d,g){const v=new Ci(null,n,e,t,r,i,Sd(o));return d&&(v.urlHandlingStrategy=d),g&&(v.routeReuseStrategy=g),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,v),u.enableTracing&&v.events.subscribe(C=>{var D,O;null==(D=console.group)||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null==(O=console.groupEnd)||O.call(console)}),v},deps:[Wt,fu,ct,h.zs3,h.Sil,$d,ie,[class{},new h.FiY],[class{},new h.FiY]]},fu,{provide:cc,useFactory:function(n){return n.routerState.root},deps:[Ci]},S,E,class{preload(e,t){return t().pipe(qi(()=>Ze(null)))}},{provide:ie,useValue:{enableTracing:!1}}];function lt(){return new h.PXZ("Router",Ci)}let dt=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Se,vu(t),{provide:Fe,useFactory:Ta,deps:[[Ci,new h.FiY,new h.tp0]]},{provide:ie,useValue:r||{}},{provide:Ve,useFactory:tr,deps:[de,[new h.tBr(Te),new h.FiY],ie]},{provide:R,useFactory:Kt,deps:[Ci,Wu,ie]},{provide:p,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:E},{provide:h.PXZ,multi:!0,useFactory:lt},[bu,{provide:h.ip1,multi:!0,useFactory:wc,deps:[bu]},{provide:Ic,useFactory:Cc,deps:[bu]},{provide:h.tb,multi:!0,useExisting:Ic}]]}}static forChild(t){return{ngModule:n,providers:[vu(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fe,8),h.LFG(Ci,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Kt(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new R(n,e,t)}function tr(n,e,t={}){return t.useHash?new Le(n,e):new je(n,e)}function Ta(n){return"guarded"}function vu(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:$d,multi:!0,useValue:n}]}let bu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fn.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),o=this.injector.get(Ci),u=this.injector.get(ie);return"disabled"===u.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Ze(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ie),i=this.injector.get(S),o=this.injector.get(R),u=this.injector.get(Ci),d=this.injector.get(h.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),o.init(),u.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function wc(n){return n.appInitializer.bind(n)}function Cc(n){return n.bootstrapListener.bind(n)}const Ic=new h.OlP("Router Initializer"),Tc=[];let Dc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[dt.forRoot(Tc)],dt]}),n})();function R0(n,e){const t=(0,Wi.m)(n)?n:()=>n,r=i=>i.error(t());return new er.y(e?i=>e.schedule(r,0,i):r)}var k0=F(1537);const qD=["addListener","removeListener"],WD=["addEventListener","removeEventListener"],N0=["on","off"];function Sc(n,e,t,r){if((0,Wi.m)(t)&&(r=t,t=void 0),r)return Sc(n,e,t).pipe(jo(r));const[i,o]=function(n){return(0,Wi.m)(n.addEventListener)&&(0,Wi.m)(n.removeEventListener)}(n)?WD.map(u=>d=>n[u](e,d,t)):function(n){return(0,Wi.m)(n.addListener)&&(0,Wi.m)(n.removeListener)}(n)?qD.map(Uy(n,e)):function(n){return(0,Wi.m)(n.on)&&(0,Wi.m)(n.off)}(n)?N0.map(Uy(n,e)):[];if(!i&&(0,k0.z)(n))return(0,Tn.z)(u=>Sc(u,e,t))((0,Lr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new er.y(u=>{const d=(...g)=>u.next(1<g.length?g:g[0]);return i(d),()=>o(d)})}function Uy(n,e){return t=>r=>n[t](e,r)}var $f=F(6921);const Eu=new er.y($f.Z);var Ii=F(3719);const P0={connector:()=>new Fn.x};function F0(n,e=P0){const{connector:t}=e;return(0,Hn.e)((r,i)=>{const o=t();(0,_n.D)(n(function(n){return new er.y(e=>n.subscribe(e))}(o))).subscribe(i),i.add(r.subscribe(o))})}var Zd=F(2210);function V0(n,e){return e?t=>ma(e.pipe((0,Gt.q)(1),(0,Hn.e)((n,e)=>{n.subscribe(new yn.Q(e,$f.Z))})),t.pipe(V0(n))):(0,Tn.z)((t,r)=>n(t,r).pipe((0,Gt.q)(1),function(n){return(0,nt.U)(()=>n)}(t)))}var JD=F(7398);function By(n=0,e,t=Zd.P){let r=-1;return null!=e&&((0,JD.K)(e)?t=e:r=e),new er.y(i=>{let o=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},o)})}const Yd="Service workers are disabled or not supported by this browser";class ys{constructor(e){if(this.serviceWorker=e,e){const r=Sc(e,"controllerchange").pipe((0,nt.U)(()=>e.controller)),o=ma(si(()=>Ze(e.controller)),r);this.worker=o.pipe(In(C=>!!C)),this.registration=this.worker.pipe(Ln(()=>e.getRegistration()));const v=Sc(e,"message").pipe((0,nt.U)(C=>C.data)).pipe(In(C=>C&&C.type)).pipe(function(n){return n?e=>F0(n)(e):e=>function(n,e){const t=(0,Wi.m)(n)?n:()=>n;return(0,Wi.m)(e)?F0(e,{connector:t}):r=>new Os(r,t)}(new Fn.x)(e)}());v.connect(),this.events=v}else this.worker=this.events=this.registration=(Yd,si(()=>R0(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe((0,Gt.q)(1),(0,hr.b)(r=>{r.postMessage(it({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(In(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Gt.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(In(t=>t.nonce===e),(0,Gt.q)(1),(0,nt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let B0=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Fn.x,!t.isEnabled)return this.messages=Eu,this.notificationClicks=Eu,void(this.subscription=Eu);this.messages=this.sw.eventsOfType("PUSH").pipe((0,nt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,nt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,nt.U)(i=>i.pushManager));const r=this.pushManager.pipe(Ln(i=>i.getSubscription()));this.subscription=(0,Ii.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Yd));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)o[u]=i.charCodeAt(u);return r.applicationServerKey=o,this.pushManager.pipe(Ln(u=>u.subscribe(r)),(0,Gt.q)(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Gt.q)(1),Ln(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Yd))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ys))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),j0=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Eu,this.available=Eu,this.activated=Eu,void(this.unrecoverable=Eu);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(In(r=>"VERSION_READY"===r.type),(0,nt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Yd));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Yd));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ys))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Gf{}const Da=new h.OlP("NGSW_REGISTER_SCRIPT");function jy(n,e,t,r){return()=>{if(!qa(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)o=t.registrationStrategy();else{const[d,...g]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":o=Ze(null);break;case"registerWithDelay":o=Hy(+g[0]||0);break;case"registerWhenStable":o=g[0]?(0,Ii.T)(og(n),Hy(+g[0])):og(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(h.R0b).runOutsideAngular(()=>o.pipe((0,Gt.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function Hy(n){return Ze(null).pipe(function(n,e=Zd.z){const t=By(n,e);return V0(()=>t)}(n))}function og(n){return n.get(h.z2F).isStable.pipe(In(t=>t))}function oO(n,e){return new ys(qa(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let $0,H0=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:Da,useValue:t},{provide:Gf,useValue:r},{provide:ys,useFactory:oO,deps:[Gf,h.Lbi]},{provide:h.ip1,useFactory:jy,deps:[h.zs3,Da,Gf,h.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[B0,j0]}),n})();try{$0="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){$0=!1}let wu,Bs=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?qa(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!$0)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ag=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function lg(){if(wu)return wu;if("object"!=typeof document||!document)return wu=new Set(ag),wu;let n=document.createElement("input");return wu=new Set(ag.filter(e=>(n.setAttribute("type",e),n.type===e))),wu}let ug,Gy;function cg(n){return function(){if(null==ug&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ug=!0}))}finally{ug=ug||!1}return ug}()?n:!!n.capture}function zy(n){if(function(){if(null==Gy){const n="undefined"!=typeof document?document.head:null;Gy=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Gy}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function zf(n){return n.composedPath?n.composedPath()[0]:n.target}function Yy(n,e=Uo.y){return n=null!=n?n:PS,(0,Hn.e)((t,r)=>{let i,o=!0;t.subscribe(new yn.Q(r,u=>{const d=e(u);(o||!n(i,d))&&(o=!1,i=d,r.next(u))}))})}function PS(n,e){return n===e}function mg(n){return(0,Hn.e)((e,t)=>{(0,Lr.Xf)(n).subscribe(new yn.Q(t,()=>t.complete(),$f.Z)),!t.closed&&e.subscribe(t)})}function Iu(n){return null!=n&&"false"!=`${n}`}function Yi(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Il(n){return n instanceof h.SBq?n.nativeElement:n}function gw(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Xd(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const WS=new h.OlP("cdk-input-modality-detector-options"),KS={ignoreKeys:[18,17,224,91,16]},Qi=cg({passive:!0,capture:!0});let Qf=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new ii(null),this._lastTouchMs=0,this._onKeydown=u=>{var d,g;(null==(g=null==(d=this._options)?void 0:d.ignoreKeys)?void 0:g.some(v=>v===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=zf(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gw(u)?"keyboard":"mouse"),this._mostRecentTarget=zf(u))},this._onTouchstart=u=>{Xd(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zf(u))},this._options=it(it({},KS),o),this.modalityDetected=this._modality.pipe(In((e,t)=>1<=t)),this.modalityChanged=this.modalityDetected.pipe(Yy()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Qi),i.addEventListener("mousedown",this._onMousedown,Qi),i.addEventListener("touchstart",this._onTouchstart,Qi)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Qi),document.removeEventListener("mousedown",this._onMousedown,Qi),document.removeEventListener("touchstart",this._onTouchstart,Qi))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bs),h.LFG(h.R0b),h.LFG(le),h.LFG(WS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jd=new h.OlP("cdk-focus-monitor-default-options"),Tl=cg({passive:!0,capture:!0});let eh=(()=>{class n{constructor(t,r,i,o,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Fn.x,this._rootNodeFocusAndBlurListener=d=>{const g=zf(d),v="focus"===d.type?this._onFocus:this._onBlur;for(let C=g;C;C=C.parentElement)v.call(this,d,C)},this._document=o,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=Il(t);if(!this._platform.isBrowser||1!==i.nodeType)return Ze(null);const o=zy(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const d={checkChildren:r,subject:new Fn.x,rootNode:o};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=Il(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Il(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([d,g])=>this._originChanged(d,r,g)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=zf(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Tl),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Tl)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(mg(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Tl),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Tl),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(Bs),h.LFG(Qf),h.LFG(le,8),h.LFG(Jd,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kc="cdk-high-contrast-black-on-white",Nc="cdk-high-contrast-white-on-black",Tu="cdk-high-contrast-active";let th=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Tu),t.remove(kc),t.remove(Nc),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(Tu),t.add(kc)):2===r&&(t.add(Tu),t.add(Nc))}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bs),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yw=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,h.f3M)(le)}}),bw=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ww=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?bw.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ev=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class nv{}const Aa="*";function QS(n,e){return{type:7,name:n,definitions:e,options:{}}}function Cw(n,e=null){return{type:4,styles:e,timings:n}}function Iw(n,e=null){return{type:2,steps:n,options:e}}function _g(n){return{type:6,styles:n,offset:null}}function Tw(n,e,t){return{type:0,name:n,styles:e,options:t}}function Dw(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function yg(n){Promise.resolve(null).then(n)}class nh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yg(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class JS{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?yg(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++r==o&&this._onDestroy()}),u.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function eA(){return"undefined"!=typeof window&&void 0!==window.document}function rv(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dl(n){switch(n.length){case 0:return new nh;case 1:return n[0];default:return new JS(n)}}function tA(n,e,t,r,i={},o={}){const u=[],d=[];let g=-1,v=null;if(r.forEach(C=>{const D=C.offset,O=D==g,U=O&&v||{};Object.keys(C).forEach(j=>{let te=j,ve=C[j];if("offset"!==j)switch(te=e.normalizePropertyName(te,u),ve){case"!":ve=i[j];break;case Aa:ve=o[j];break;default:ve=e.normalizeStyleValue(j,te,ve,u)}U[te]=ve}),O||d.push(U),v=U,g=D}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return d}function iv(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Du(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Du(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Du(t,"destroy",n)))}}function Du(n,e,t){const r=t.totalTime,o=sv(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function sv(n,e,t,r,i="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!u}}function vs(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function Mw(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let vg=(n,e)=>!1,rh=(n,e)=>!1,xw=(n,e,t)=>[];const ov=rv();(ov||"undefined"!=typeof Element)&&(vg=eA()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),rh=(()=>{if(ov||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):rh}})(),xw=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let o=0;o<i.length;o++)r.push(i[o])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let Oc=null,Rw=!1;function av(n){Oc||(Oc=("undefined"!=typeof document?document.body:null)||{},Rw=!!Oc.style&&"WebkitAppearance"in Oc.style);let e=!0;return Oc.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Oc.style,!e&&Rw&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Oc.style)),e}const bg=rh,lv=vg,Eg=xw;function uv(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let wg=(()=>{class n{validateStyleProperty(t){return av(t)}matchesElement(t,r){return bg(t,r)}containsElement(t,r){return lv(t,r)}query(t,r,i){return Eg(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,u,d=[],g){return new nh(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),kw=(()=>{class n{}return n.NOOP=new wg,n})();const Pc="ng-enter",ep="ng-leave",Cg="ng-trigger",ih=".ng-trigger",Ig="ng-animating",Tg=".ng-animating";function sh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:dv(parseFloat(e[1]),e[2])}function dv(n,e){return"s"===e?1e3*n:n}function oh(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,o=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=dv(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(o=dv(parseFloat(g),d[4]));const v=d[5];v&&(u=v)}else i=n;if(!t){let d=!1,g=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),d=!0),o<0&&(e.push("Delay values below 0 are not allowed for this animation step."),d=!0),d&&e.splice(g,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:o,easing:u}}(n,e,t)}function ah(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ma(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else ah(n,t);return t}function pv(n,e,t){return t?e+":"+t+";":""}function mv(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=pv(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=pv(0,Vw(t),n.style[t]));n.setAttribute("style",e)}function mo(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Mg(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),rv()&&mv(n))}function Su(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Mg(t);n.style[r]=""}),rv()&&mv(n))}function tp(n){return Array.isArray(n)?1==n.length?n[0]:Iw(n):n}const Dg=new RegExp("{{\\s*(.+?)\\s*}}","g");function Sg(n){let e=[];if("string"==typeof n){let t;for(;t=Dg.exec(n);)e.push(t[1]);Dg.lastIndex=0}return e}function np(n,e,t){const r=n.toString(),i=r.replace(Dg,(o,u)=>{let d=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),d=""),d.toString()});return i==r?n:i}function Ag(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Lw=/-+([a-z0-9])/g;function Mg(n){return n.replace(Lw,(...e)=>e[1].toUpperCase())}function Vw(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xg(n,e){return 0===n||0===e}function gv(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let o=e[0],u=[];if(r.forEach(d=>{o.hasOwnProperty(d)||u.push(d),o[d]=t[d]}),u.length)for(var i=1;i<e.length;i++){let d=e[i];u.forEach(function(g){d[g]=Rg(n,g)})}}return e}function bs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Rg(n,e){return window.getComputedStyle(n)[e]}function Uw(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const g=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],o=r[2],u=r[3];e.push(Hw(i,u));"<"==o[0]&&!("*"==i&&"*"==u)&&e.push(Hw(u,i))}(r,t,e)):t.push(n),t}const ip=new Set(["true","1"]),_v=new Set(["false","0"]);function Hw(n,e){const t=ip.has(n)||_v.has(n),r=ip.has(e)||_v.has(e);return(i,o)=>{let u="*"==n||n==i,d="*"==e||e==o;return!u&&t&&"boolean"==typeof i&&(u=i?ip.has(n):_v.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?ip.has(e):_v.has(e)),u&&d}}const Gw=new RegExp("s*:selfs*,?","g");function yv(n,e,t){return new zw(n).build(e,t)}class zw{constructor(e){this._driver=e}build(e,t){const r=new qw(t);return this._resetContextStyleTimingState(r),bs(this,tp(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,v=g.name;v.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,o.push(this.visitState(g,t))}),g.name=v}else if(1==d.type){const g=this.visitTransition(d,t);r+=g.queryCount,i+=g.depCount,u.push(g)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:o,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,u=i||{};if(r.styles.forEach(d=>{if(sp(d)){const g=d;Object.keys(g).forEach(v=>{Sg(g[v]).forEach(C=>{u.hasOwnProperty(C)||o.add(C)})})}}),o.size){const d=Ag(o.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${d.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=bs(this,tp(e.animation),t);return{type:1,matchers:Uw(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:go(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>bs(this,r,t)),options:go(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(u=>{t.currentTime=r;const d=bs(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:o,options:go(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return vv(oh(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=vv(0,0,"");return o.dynamic=!0,o.strValue=r,o}return t=t||oh(r,e),vv(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:_g({});if(5==o.type)i=this.visitKeyframes(o,t);else{let u=e.styles,d=!1;if(!u){d=!0;const v={};r.easing&&(v.easing=r.easing),u=_g(v)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(u,t);g.isEmptyStep=d,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Aa?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,o=null;return r.forEach(u=>{if(sp(u)){const d=u,g=d.easing;if(g&&(o=g,delete d.easing),!i)for(let v in d)if(d[v].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(d=>{if(!this._driver.validateStyleProperty(d))return void t.errors.push(`The provided animation property "${d}" is not a supported CSS property for animations`);const g=t.collectedStyles[t.currentQuerySelector],v=g[d];let C=!0;v&&(o!=i&&o>=v.startTime&&i<=v.endTime&&(t.errors.push(`The CSS property "${d}" that exists between the times of "${v.startTime}ms" and "${v.endTime}ms" is also being animated in a parallel animation between the times of "${o}ms" and "${i}ms"`),C=!1),o=v.startTime),C&&(g[d]={startTime:o,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=Sg(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(`Unable to resolve the local animation param ${o} in the given list of values`)})}(u[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let o=0;const u=[];let d=!1,g=!1,v=0;const C=e.steps.map(Je=>{const st=this._makeStyleAst(Je,t);let ht=null!=st.offset?st.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(sp(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(sp(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(st.styles),ot=0;return null!=ht&&(o++,ot=st.offset=ht),g=g||ot<0||ot>1,d=d||ot<v,v=ot,u.push(ot),st});g&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),d&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let O=0;o>0&&o<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==o&&(O=1/(D-1));const U=D-1,j=t.currentTime,te=t.currentAnimateTimings,ve=te.duration;return C.forEach((Je,st)=>{const ht=O>0?st==U?1:O*st:u[st],ot=ht*ve;t.currentTime=j+te.delay+ot,te.duration=ot,this._validateStyleAst(Je,t),Je.offset=ht,r.styles.push(Je)}),r}visitReference(e,t){return{type:8,animation:bs(this,tp(e.animation),t),options:go(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:go(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:go(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Gw,"")),n=n.replace(/@\*/g,ih).replace(/@\w+/g,t=>ih+"-"+t.substr(1)).replace(/:animating/g,Tg),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,vs(t.collectedStyles,t.currentQuerySelector,{});const d=bs(this,tp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:go(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:oh(e.timings,t.errors,!0);return{type:12,animation:bs(this,tp(e.animation),t),timings:r,options:null}}}class qw{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function sp(n){return!Array.isArray(n)&&"object"==typeof n}function go(n){return n?(n=ah(n)).params&&(n.params=function(n){return n?ah(n):null}(n.params)):n={},n}function vv(n,e,t){return{duration:n,delay:e,easing:t}}function bv(n,e,t,r,i,o,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:u,subTimeline:d}}class op{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const fP=new RegExp(":enter","g"),wv=new RegExp(":leave","g");function _o(n,e,t,r,i,o={},u={},d,g,v=[]){return(new lA).buildKeyframes(n,e,t,r,i,o,u,d,g,v)}class lA{buildKeyframes(e,t,r,i,o,u,d,g,v,C=[]){v=v||new op;const D=new yo(e,t,v,i,o,C,[]);D.options=g,D.currentTimeline.setStyles([u],null,D.errors,g),bs(this,r,D);const O=D.timelines.filter(U=>U.containsAnimation());if(O.length&&Object.keys(d).length){const U=O[O.length-1];U.allowOnlyTimelineStyles()||U.setStyles([d],null,D.errors,g)}return O.length?O.map(U=>U.buildKeyframes()):[bv(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const u=null!=r.duration?sh(r.duration):null,d=null!=r.delay?sh(r.delay):null;return 0!==u&&e.forEach(g=>{const v=t.appendInstructionToTimeline(g,u,d);o=Math.max(o,v.duration+v.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),bs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=kg);const u=sh(o.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>bs(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?sh(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);o&&d.delayNextStep(o),bs(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return oh(t.params?np(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*o),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?sh(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=kg);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((v,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,v);o&&D.delayNextStep(o),v===t.element&&(g=D.currentTimeline),bs(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),d=u*(t.currentQueryTotal-1);let g=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=d-g;break;case"full":g=r.currentStaggerTime}const C=t.currentTimeline;g&&C.delayNextStep(g);const D=C.currentTime;bs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const kg={};class yo{constructor(e,t,r,i,o,u,d,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new Es(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=sh(r.duration)),null!=r.delay&&(i.delay=sh(r.delay));const o=r.params;if(o){let u=i.params;u||(u=this.options.params={}),Object.keys(o).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=np(o[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new yo(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=kg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},o=new Qo(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(fP,"."+this._enterClassName)).replace(wv,"."+this._leaveClassName);let v=this._driver.query(this.element,e,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),d.push(...v)}return!o&&0==d.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),d}}class Es{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Es(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Aa,this._currentKeyframe[t]=Aa}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const o=i&&i.params||{},u=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(o=>{t[o]=Aa})):Ma(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(d=>{const g=np(u[d],o,r);this._pendingStyles[d]=g,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Aa),this._updateStyle(d,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,g)=>{const v=Ma(d,!0);Object.keys(v).forEach(C=>{const D=v[C];"!"==D?e.add(C):D==Aa&&t.add(C)}),r||(v.offset=g/this.duration),i.push(v)});const o=e.size?Ag(e.values()):[],u=t.size?Ag(t.values()):[];if(r){const d=i[0],g=ah(d);d.offset=0,g.offset=1,i=[d,g]}return bv(this.element,i,o,u,this.duration,this.startTime,this.easing,!1)}}class Qo extends Es{constructor(e,t,r,i,o,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=r+t,d=t/u,g=Ma(e[0],!1);g.offset=0,o.push(g);const v=Ma(e[0],!1);v.offset=Cv(d),o.push(v);const C=e.length-1;for(let D=1;D<=C;D++){let O=Ma(e[D],!1);O.offset=Cv((t+O.offset*r)/u),o.push(O)}r=u,t=0,i="",e=o}return bv(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Cv(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Iv{}class uA extends Iv{normalizePropertyName(e,t){return Mg(e)}normalizeStyleValue(e,t,r,i){let o="";const u=r.toString().trim();if(Tv[t]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+o}}const Tv=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Yw(n,e,t,r,i,o,u,d,g,v,C,D,O){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:u,timelines:d,queriedElements:g,preStyleProps:v,postStyleProps:C,totalTime:D,errors:O}}const Ng={};class Qw{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],o=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return o?o.buildStyles(t,r):u}build(e,t,r,i,o,u,d,g,v,C){const D=[],O=this.ast.options&&this.ast.options.params||Ng,j=this.buildStyles(r,d&&d.params||Ng,D),te=g&&g.params||Ng,ve=this.buildStyles(i,te,D),Je=new Set,st=new Map,ht=new Map,ot="void"===i,Lt={params:it(it({},O),te)},$t=C?[]:_o(e,t,this.ast.animation,o,u,j,ve,Lt,v,D);let En=0;if($t.forEach(id=>{En=Math.max(id.duration+id.delay,En)}),D.length)return Yw(t,this._triggerName,r,i,ot,j,ve,[],[],st,ht,En,D);$t.forEach(id=>{const sd=id.element,yj=vs(st,sd,{});id.preStyleProps.forEach(bm=>yj[bm]=!0);const I0=vs(ht,sd,{});id.postStyleProps.forEach(bm=>I0[bm]=!0),sd!==t&&Je.add(sd)});const Ks=Ag(Je.values());return Yw(t,this._triggerName,r,i,ot,j,ve,$t,Ks,st,ht,En)}}class Jw{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=ah(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!=u&&(i[o]=u)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const u=o;Object.keys(u).forEach(d=>{let g=u[d];g.length>1&&(g=np(g,i,t));const v=this.normalizer.normalizePropertyName(d,t);g=this.normalizer.normalizeStyleValue(d,v,g,t),r[v]=g})}}),r}}class cA{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new Jw(i.style,i.options&&i.options.params||{},r)}),Dv(this.states,"true","1"),Dv(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Qw(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new Qw(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Dv(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Sv=new op;class Av{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=yv(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,o=tA(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations[e];let u;const d=new Map;if(o?(u=_o(this._driver,t,o,Pc,ep,{},{},r,Sv,i),u.forEach(C=>{const D=vs(d,C.element,{});C.postStyleProps.forEach(O=>D[O]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);d.forEach((C,D)=>{Object.keys(C).forEach(O=>{C[O]=this._driver.computeStyle(D,O,Aa)})});const v=Dl(u.map(C=>{const D=d.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=v,v.onDestroy(()=>this.destroy(e)),this.players.push(v),v}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const o=sv(t,"","","");return iv(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Pg="ng-animate-queued",Mv="ng-animate-disabled",xv=".ng-animate-disabled",iC=[],Rv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dA={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vo="__ng_removed";class kv{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const o=ah(e);delete o.value,this.options=o}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const lp="void",Nv=new kv(lp);class hA{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,bo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const o=vs(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};o.push(u);const d=vs(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(bo(e,Cg),bo(e,Cg+"-"+t),d[t]=Nv),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(u);g>=0&&o.splice(g,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),u=new Ov(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(bo(e,Cg),bo(e,Cg+"-"+t),this._engine.statesByElement.set(e,d={}));let g=d[t];const v=new kv(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&v.absorbOptions(g.options),d[t]=v,g||(g=Nv),v.value!==lp&&g.value===v.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(g.params,v.params)){const te=[],ve=o.matchStyles(g.value,g.params,te),Je=o.matchStyles(v.value,v.params,te);te.length?this._engine.reportError(te):this._engine.afterFlush(()=>{Su(e,ve),mo(e,Je)})}return}const O=vs(this._engine.playersByElement,e,[]);O.forEach(te=>{te.namespaceId==this.id&&te.triggerName==t&&te.queued&&te.destroy()});let U=o.matchTransition(g.value,v.value,e,v.params),j=!1;if(!U){if(!i)return;U=o.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:g,toState:v,player:u,isFallbackTransition:j}),j||(bo(e,Pg),u.onStart(()=>{Fc(e,Pg)})),u.onDone(()=>{let te=this.players.indexOf(u);te>=0&&this.players.splice(te,1);const ve=this._engine.playersByElement.get(e);if(ve){let Je=ve.indexOf(u);Je>=0&&ve.splice(Je,1)}}),this.players.push(u),O.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ih,!0);r.forEach(i=>{if(i[vo])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e);if(o){const u=[];if(Object.keys(o).forEach(d=>{if(this._triggers[d]){const g=this.trigger(e,d,lp,i);g&&u.push(g)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Dl(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const u=o.name;if(i.has(u))return;i.add(u);const g=this._triggers[u].fallbackTransition,v=r[u]||Nv,C=new kv(lp),D=new Ov(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:g,fromState:v,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[vo];(!o||o===Rv)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){bo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,u=this._elementListeners.get(o);u&&u.forEach(d=>{if(d.name==r.triggerName){const g=sv(o,r.triggerName,r.fromState.value,r.toState.value);g._data=e,iv(r.player,d.phase,g,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class fA{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new hA(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let o=r;o>=0;o--)if(this.driver.containsElement(this._namespaceList[o].hostElement,t)){this._namespaceList.splice(o+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let o=0;o<i.length;o++){const u=r[i[o]].namespaceId;if(u){const d=this._fetchNamespace(u);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(Fg(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Fg(t))return;const o=t[vo];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),bo(e,Mv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Fc(e,Mv))}removeNode(e,t,r,i){if(Fg(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[vo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,o){return Fg(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,ih,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Tg,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[vo];if(t&&t.setForRemoval){if(e[vo]=Rv,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,xv)&&this.markElementAsDisabled(e,!1),this.driver.query(e,xv,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)bo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Dl(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new op,i=[],o=new Map,u=[],d=new Map,g=new Map,v=new Map,C=new Set;this.disabledNodes.forEach(mt=>{C.add(mt);const St=this.driver.query(mt,".ng-animate-queued",!0);for(let Ut=0;Ut<St.length;Ut++)C.add(St[Ut])});const D=this.bodyNode,O=Array.from(this.statesByElement.keys()),U=aC(O,this.collectedEnterElements),j=new Map;let te=0;U.forEach((mt,St)=>{const Ut=Pc+te++;j.set(St,Ut),mt.forEach(fn=>bo(fn,Ut))});const ve=[],Je=new Set,st=new Set;for(let mt=0;mt<this.collectedLeaveElements.length;mt++){const St=this.collectedLeaveElements[mt],Ut=St[vo];Ut&&Ut.setForRemoval&&(ve.push(St),Je.add(St),Ut.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(fn=>Je.add(fn)):st.add(St))}const ht=new Map,ot=aC(O,Array.from(Je));ot.forEach((mt,St)=>{const Ut=ep+te++;ht.set(St,Ut),mt.forEach(fn=>bo(fn,Ut))}),e.push(()=>{U.forEach((mt,St)=>{const Ut=j.get(St);mt.forEach(fn=>Fc(fn,Ut))}),ot.forEach((mt,St)=>{const Ut=ht.get(St);mt.forEach(fn=>Fc(fn,Ut))}),ve.forEach(mt=>{this.processLeaveNode(mt)})});const Lt=[],$t=[];for(let mt=this._namespaceList.length-1;mt>=0;mt--)this._namespaceList[mt].drainQueuedTransitions(t).forEach(Ut=>{const fn=Ut.player,Pi=Ut.element;if(Lt.push(fn),this.collectedEnterElements.length){const ju=Pi[vo];if(ju&&ju.setForMove)return void fn.destroy()}const Bu=!D||!this.driver.containsElement(D,Pi),sa=ht.get(Pi),ef=j.get(Pi),Ir=this._buildInstruction(Ut,r,ef,sa,Bu);if(Ir.errors&&Ir.errors.length)$t.push(Ir);else{if(Bu)return fn.onStart(()=>Su(Pi,Ir.fromStyles)),fn.onDestroy(()=>mo(Pi,Ir.toStyles)),void i.push(fn);if(Ut.isFallbackTransition)return fn.onStart(()=>Su(Pi,Ir.fromStyles)),fn.onDestroy(()=>mo(Pi,Ir.toStyles)),void i.push(fn);Ir.timelines.forEach(ju=>ju.stretchStartingKeyframe=!0),r.append(Pi,Ir.timelines),u.push({instruction:Ir,player:fn,element:Pi}),Ir.queriedElements.forEach(ju=>vs(d,ju,[]).push(fn)),Ir.preStyleProps.forEach((ju,T0)=>{const zD=Object.keys(ju);if(zD.length){let Em=g.get(T0);Em||g.set(T0,Em=new Set),zD.forEach(rO=>Em.add(rO))}}),Ir.postStyleProps.forEach((ju,T0)=>{const zD=Object.keys(ju);let Em=v.get(T0);Em||v.set(T0,Em=new Set),zD.forEach(rO=>Em.add(rO))})}});if($t.length){const mt=[];$t.forEach(St=>{mt.push(`@${St.triggerName} has failed due to:\n`),St.errors.forEach(Ut=>mt.push(`- ${Ut}\n`))}),Lt.forEach(St=>St.destroy()),this.reportError(mt)}const En=new Map,Ks=new Map;u.forEach(mt=>{const St=mt.element;r.has(St)&&(Ks.set(St,St),this._beforeAnimationBuild(mt.player.namespaceId,mt.instruction,En))}),i.forEach(mt=>{const St=mt.element;this._getPreviousPlayers(St,!1,mt.namespaceId,mt.triggerName,null).forEach(fn=>{vs(En,St,[]).push(fn),fn.destroy()})});const id=ve.filter(mt=>Fv(mt,g,v)),sd=new Map;oC(sd,this.driver,st,v,Aa).forEach(mt=>{Fv(mt,g,v)&&id.push(mt)});const I0=new Map;U.forEach((mt,St)=>{oC(I0,this.driver,new Set(mt),g,"!")}),id.forEach(mt=>{const St=sd.get(mt),Ut=I0.get(mt);sd.set(mt,it(it({},St),Ut))});const bm=[],vj=[],bj={};u.forEach(mt=>{const{element:St,player:Ut,instruction:fn}=mt;if(r.has(St)){if(C.has(St))return Ut.onDestroy(()=>mo(St,fn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(fn.totalTime),void i.push(Ut);let Pi=bj;if(Ks.size>1){let sa=St;const ef=[];for(;sa=sa.parentNode;){const Ir=Ks.get(sa);if(Ir){Pi=Ir;break}ef.push(sa)}ef.forEach(Ir=>Ks.set(Ir,Pi))}const Bu=this._buildAnimation(Ut.namespaceId,fn,En,o,I0,sd);if(Ut.setRealPlayer(Bu),Pi===bj)bm.push(Ut);else{const sa=this.playersByElement.get(Pi);sa&&sa.length&&(Ut.parentPlayer=Dl(sa)),i.push(Ut)}}else Su(St,fn.fromStyles),Ut.onDestroy(()=>mo(St,fn.toStyles)),vj.push(Ut),C.has(St)&&i.push(Ut)}),vj.forEach(mt=>{const St=o.get(mt.element);if(St&&St.length){const Ut=Dl(St);mt.setRealPlayer(Ut)}}),i.forEach(mt=>{mt.parentPlayer?mt.syncPlayerEvents(mt.parentPlayer):mt.destroy()});for(let mt=0;mt<ve.length;mt++){const St=ve[mt],Ut=St[vo];if(Fc(St,ep),Ut&&Ut.hasAnimation)continue;let fn=[];if(d.size){let Bu=d.get(St);Bu&&Bu.length&&fn.push(...Bu);let sa=this.driver.query(St,Tg,!0);for(let ef=0;ef<sa.length;ef++){let Ir=d.get(sa[ef]);Ir&&Ir.length&&fn.push(...Ir)}}const Pi=fn.filter(Bu=>!Bu.destroyed);Pi.length?lC(this,St,Pi):this.processLeaveNode(St)}return ve.length=0,bm.forEach(mt=>{this.players.push(mt),mt.onDone(()=>{mt.destroy();const St=this.players.indexOf(mt);this.players.splice(St,1)}),mt.play()}),bm}elementContainsData(e,t){let r=!1;const i=t[vo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const g=!o||o==lp;d.forEach(v=>{v.queued||!g&&v.triggerName!=i||u.push(v)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const o=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const v=g.element,C=v!==o,D=vs(r,v,[]);this._getPreviousPlayers(v,C,u,d,t.toState).forEach(U=>{const j=U.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),U.destroy(),D.push(U)})}Su(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,u){const d=t.triggerName,g=t.element,v=[],C=new Set,D=new Set,O=t.timelines.map(j=>{const te=j.element;C.add(te);const ve=te[vo];if(ve&&ve.removedBeforeQueried)return new nh(j.duration,j.delay);const Je=te!==g,st=function(n){const e=[];return Pv(n,e),e}((r.get(te)||iC).map(En=>En.getRealPlayer())).filter(En=>!!En.element&&En.element===te),ht=o.get(te),ot=u.get(te),Lt=tA(0,this._normalizer,0,j.keyframes,ht,ot),$t=this._buildPlayer(j,Lt,st);if(j.subTimeline&&i&&D.add(te),Je){const En=new Ov(e,d,te);En.setRealPlayer($t),v.push(En)}return $t});v.forEach(j=>{vs(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),C.forEach(j=>bo(j,Ig));const U=Dl(O);return U.onDestroy(()=>{C.forEach(j=>Fc(j,Ig)),mo(g,t.toStyles)}),D.forEach(j=>{vs(i,j,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new nh(e.duration,e.delay)}}class Ov{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new nh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>iv(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){vs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Fg(n){return n&&1===n.nodeType}function sC(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function oC(n,e,t,r,i){const o=[];t.forEach(g=>o.push(sC(g)));const u=[];r.forEach((g,v)=>{const C={};g.forEach(D=>{const O=C[D]=e.computeStyle(v,D,i);(!O||0==O.length)&&(v[vo]=dA,u.push(v))}),n.set(v,C)});let d=0;return t.forEach(g=>sC(g,o[d++])),u}function aC(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),o=new Map;function u(d){if(!d)return 1;let g=o.get(d);if(g)return g;const v=d.parentNode;return g=t.has(v)?v:i.has(v)?1:u(v),o.set(d,g),g}return e.forEach(d=>{const g=u(d);1!==g&&t.get(g).push(d)}),t}const Lg="$$classes";function bo(n,e){if(n.classList)n.classList.add(e);else{let t=n[Lg];t||(t=n[Lg]={}),t[e]=!0}}function Fc(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Lg];t&&delete t[e]}}function lC(n,e,t){Dl(t).onDone(()=>n.processLeaveNode(e))}function Pv(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof JS?Pv(r.players,e):e.push(r)}}function Fv(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class up{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new fA(e,t,r),this._timelineEngine=new Av(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const g=[],v=yv(this._driver,o,g);if(g.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${g.join("\n - ")}`);d=function(n,e,t){return new cA(n,e,t)}(i,v,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,u]=Mw(r);this._timelineEngine.command(o,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[u,d]=Mw(r);return this._timelineEngine.listen(u,t,d,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Lv(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=cp(e[0]),e.length>1&&(r=cp(e[e.length-1]))):e&&(t=cp(e)),t||r?new dC(n,t,r):null}let dC=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&mo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(mo(this._element,this._initialStyles),this._endStyles&&(mo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Su(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Su(this._element,this._endStyles),this._endStyles=null),mo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cp(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];hC(i)&&(e=e||{},e[i]=n[i])}return e}function hC(n){return"display"===n||"position"===n}const fC="animation",pC="animationend";class _P{constructor(e,t,r,i,o,u,d){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=o,this._fillMode=u,this._onDoneFn=d,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=g=>this._handleCallback(g)}apply(){(function(n,e){const t=Uv(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Ug(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),It(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Vg(this._element,this._name,"paused")}resume(){Vg(this._element,this._name,"running")}setPosition(e){const t=Vv(this._element,this._name);this._position=e*this._duration,Ug(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),It(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=Uv(n,"").split(","),i=gC(r,e);i>=0&&(r.splice(i,1),Ug(n,"",r.join(",")))}(this._element,this._name))}}function Vg(n,e,t){Ug(n,"PlayState",t,Vv(n,e))}function Vv(n,e){const t=Uv(n,"");return t.indexOf(",")>0?gC(t.split(","),e):gC([t],e)}function gC(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function It(n,e,t){t?n.removeEventListener(pC,e):n.addEventListener(pC,e)}function Ug(n,e,t,r){const i=fC+e;if(null!=r){const o=n.style[i];if(o.length){const u=o.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function Uv(n,e){return n.style[fC+e]||""}class dp{constructor(e,t,r,i,o,u,d,g){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=d,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+o,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new _P(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:Rg(this.element,r))})}this.currentSnapshot=e}}class jg extends nh{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=uv(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Bv{constructor(){this._count=0}validateStyleProperty(e){return av(e)}matchesElement(e,t){return bg(e,t)}containsElement(e,t){return lv(e,t)}query(e,t,r){return Eg(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(d=>uv(d));let i=`@keyframes ${t} {\n`,o="";r.forEach(d=>{o=" ";const g=parseFloat(d.offset);i+=`${o}${100*g}% {\n`,o+=" ",Object.keys(d).forEach(v=>{const C=d[v];switch(v){case"offset":return;case"easing":return void(C&&(i+=`${o}animation-timing-function: ${C};\n`));default:return void(i+=`${o}${v}: ${C};\n`)}}),i+=`${o}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,o,u=[],d){const g=u.filter(ve=>ve instanceof dp),v={};xg(r,i)&&g.forEach(ve=>{let Je=ve.currentSnapshot;Object.keys(Je).forEach(st=>v[st]=Je[st])});const C=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=gv(e,t,v));if(0==r)return new jg(e,C);const D="gen_css_kf_"+this._count++,O=this.buildKeyframeElement(e,D,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(O);const j=Lv(e,t),te=new dp(e,t,D,r,i,o,C,j);return te.onDestroy(()=>{var n;(n=O).parentNode.removeChild(n)}),te}}class Hv{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Rg(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class CA{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(yC().toString()),this._cssKeyframesDriver=new Bv}validateStyleProperty(e){return av(e)}matchesElement(e,t){return bg(e,t)}containsElement(e,t){return lv(e,t)}query(e,t,r){return Eg(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,o,u=[],d){if(!d&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,o,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(C.easing=o);const D={},O=u.filter(j=>j instanceof Hv);xg(r,i)&&O.forEach(j=>{let te=j.currentSnapshot;Object.keys(te).forEach(ve=>D[ve]=te[ve])});const U=Lv(e,t=gv(e,t=t.map(j=>Ma(j,!1)),D));return new Hv(e,t,C,U)}}function yC(){return eA()&&Element.prototype.animate||{}}let hp=(()=>{class n extends nv{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Iw(t):t;return vC(this._renderer,null,r,"register",[i]),new TA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class TA extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new DA(this._id,e,t||{},this._renderer)}}class DA{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return vC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function vC(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const $v="@.disabled";let bC=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,u)=>{const d=null==u?void 0:u.parentNode(o);d&&u.removeChild(d,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(o);return C||(C=new Gv("",o,this.engine),this._rendererCache.set(o,C)),C}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=C=>{Array.isArray(C)?C.forEach(g):this.engine.registerTrigger(u,d,t,C.name,C)};return r.data.animation.forEach(g),new SA(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,d]=o;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(up),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Gv{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$v?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class SA extends Gv{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$v?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.substr(1),u="";return"@"!=o.charAt(0)&&([o,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let AA=(()=>{class n extends up{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(kw),h.LFG(Iv))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Uc=new h.OlP("AnimationModuleType"),zv=[{provide:nv,useClass:hp},{provide:Iv,useFactory:function(){return new uA}},{provide:up,useClass:AA},{provide:h.FYo,useFactory:function(n,e,t){return new bC(n,e,t)},deps:[$i,up,h.R0b]}],wC=[{provide:kw,useFactory:function(){return"function"==typeof yC()?new CA:new Bv}},{provide:Uc,useValue:"BrowserAnimations"},...zv],CC=[{provide:kw,useClass:wg},{provide:Uc,useValue:"NoopAnimations"},...zv];let RA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?CC:wC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:wC,imports:[da]}),n})();const gp=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let js=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!("undefined"!=typeof __karma__&&__karma__||"undefined"!=typeof jasmine&&jasmine||"undefined"!=typeof jest&&jest||"undefined"!=typeof Mocha&&Mocha)&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(th),h.LFG(gp,8),h.LFG(le))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ev],ev]}),n})();function NA(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Iu(e)}}}function uh(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function OA(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Iu(e)}}}function ch(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Fn.x,this.errorState=!1}updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}}}let DC=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class HA{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const AC={enterDuration:225,exitDuration:150},qv=cg({passive:!0}),MC=["mousedown","touchstart"],xC=["mouseup","mouseleave","touchend","touchcancel"];class GA{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Il(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=it(it({},AC),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,g=t-i.top,v=o.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=d-u+"px",C.style.top=g-u+"px",C.style.height=2*u+"px",C.style.width=2*u+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(C),window.getComputedStyle(C).getPropertyValue("opacity"),C.style.transform="scale(1)";const D=new HA(this,C,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const O=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!O||!this._isPointerDown)&&D.fadeOut()},v),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=it(it({},AC),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Il(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(MC))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(xC),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=gw(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Xd(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,qv)})})}_removeTriggerEvents(){this._triggerElement&&(MC.forEach(e=>{this._triggerElement.removeEventListener(e,this,qv)}),this._pointerUpEventsRegistered&&xC.forEach(e=>{this._triggerElement.removeEventListener(e,this,qv)}))}}const kC=new h.OlP("mat-ripple-global-options");let NC=(()=>{class n{constructor(t,r,i,o,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new GA(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:it(it(it({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,it(it({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,it(it({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(Bs),h.Y36(kC,8),h.Y36(Uc,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&h.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),qA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[js],js]}),n})();const QA=["*",[["mat-toolbar-row"]]],VC=["*","mat-toolbar-row"],UP=uh(class{constructor(n){this._elementRef=n}});let XA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),yp=(()=>{class n extends UP{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(Bs),h.Y36(le))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&h.Suo(i,XA,5),2&t){let o;h.iGM(o=h.CRH())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&h.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[h.qOj],ngContentSelectors:VC,decls:2,vars:0,template:function(t,r){1&t&&(h.F$t(QA),h.Hsn(0),h.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[js],js]}),n})(),vp=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-topbar"]],decls:5,vars:0,consts:[[1,"appTitle"],[1,"example-spacer"]],template:function(t,r){1&t&&(h.TgZ(0,"mat-toolbar"),h.TgZ(1,"div",0),h.TgZ(2,"h1"),h._uU(3,"Minou Tracker"),h.qZA(),h.qZA(),h._UZ(4,"span",1),h.qZA())},directives:[yp],styles:[".appTitle[_ngcontent-%COMP%]{margin:auto}"]}),n})();function UC(...n){const e=(0,io.jO)(n),{args:t,keys:r}=eu(n),i=new er.y(o=>{const{length:u}=t;if(!u)return void o.complete();const d=new Array(u);let g=u,v=u;for(let C=0;C<u;C++){let D=!1;(0,Lr.Xf)(t[C]).subscribe(new yn.Q(o,O=>{D||(D=!0,v--),d[C]=O},()=>g--,void 0,()=>{(!g||!D)&&(v||o.next(r?tu(r,d):d),o.complete())}))}});return e?i.pipe(jo(e)):i}let JA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Au=(()=>{class n extends JA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const xa=new h.OlP("NgValueAccessor"),tM={provide:xa,useExisting:(0,h.Gpc)(()=>hh),multi:!0},HC=new h.OlP("CompositionEventMode");let hh=(()=>{class n extends JA{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(HC,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[h._Bn([tM]),h.qOj]}),n})();function Xo(n){return null==n||0===n.length}function fh(n){return null!=n&&"number"==typeof n.length}const Ti=new h.OlP("NgValidators"),Sl=new h.OlP("NgAsyncValidators"),$C=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Wv{static min(e){return function(n){return e=>{if(Xo(e.value)||Xo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(Xo(e.value)||Xo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return Xo(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return Xo(n.value)||$C.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>Xo(e.value)||!fh(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>fh(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return ph;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Xo(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return iM(e)}static composeAsync(e){return Gg(e)}}function ph(n){return null}function jc(n){return null!=n}function rM(n){const e=(0,h.QGY)(n)?(0,_n.D)(n):n;return(0,h.CqO)(e),e}function Kv(n){let e={};return n.forEach(t=>{e=null!=t?it(it({},e),t):e}),0===Object.keys(e).length?null:e}function ZC(n,e){return e.map(t=>t(n))}function Zv(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function iM(n){if(!n)return null;const e=n.filter(jc);return 0==e.length?null:function(t){return Kv(ZC(t,e))}}function $g(n){return null!=n?iM(Zv(n)):null}function Gg(n){if(!n)return null;const e=n.filter(jc);return 0==e.length?null:function(t){return UC(ZC(t,e).map(rM)).pipe((0,nt.U)(Kv))}}function Yv(n){return null!=n?Gg(Zv(n)):null}function YC(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function QC(n){return n._rawValidators}function XC(n){return n._rawAsyncValidators}function Qv(n){return n?Array.isArray(n)?n:[n]:[]}function zg(n,e){return Array.isArray(n)?n.includes(e):n===e}function JC(n,e){const t=Qv(e);return Qv(n).forEach(i=>{zg(t,i)||t.push(i)}),t}function eI(n,e){return Qv(e).filter(t=>!zg(n,t))}class tI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$g(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ji extends tI{get formDirective(){return null}get path(){return null}}class Hs extends tI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xv{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}let Jv=(()=>{class n extends Xv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Hs,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),eb=(()=>{class n extends Xv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ji,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function Ml(n,e){gh(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&rb(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&rb(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Kg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Zg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gh(n,e){const t=QC(n);null!==e.validator?n.setValidators(YC(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=XC(n);null!==e.asyncValidator?n.setAsyncValidators(YC(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Zg(e._rawValidators,i),Zg(e._rawAsyncValidators,i)}function Hc(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=QC(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=XC(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return Zg(e._rawValidators,r),Zg(e._rawAsyncValidators,r),t}function rb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Yg(n,e){gh(n,e)}function Qg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function _h(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const bp="VALID",Jg="INVALID",yh="PENDING",Ep="DISABLED";function wp(n){return(t_(n)?n.validators:n)||null}function sb(n){return Array.isArray(n)?$g(n):n||null}function e_(n,e){return(t_(e)?e.asyncValidators:n)||null}function ob(n){return Array.isArray(n)?Yv(n):n||null}function t_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ab{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sb(this._rawValidators),this._composedAsyncValidatorFn=ob(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bp}get invalid(){return this.status===Jg}get pending(){return this.status==yh}get disabled(){return this.status===Ep}get enabled(){return this.status!==Ep}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ob(e)}addValidators(e){this.setValidators(JC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eI(e,this._rawAsyncValidators))}hasValidator(e){return zg(this._rawValidators,e)}hasAsyncValidator(e){return zg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ep,this.errors=null,this._forEachChild(r=>{r.disable(pi(it({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pi(it({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bp,this._forEachChild(r=>{r.enable(pi(it({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pi(it({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bp||this.status===yh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ep:bp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yh,this._hasOwnPendingAsyncValidator=!0;const t=rM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof Cp?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof pM&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Ep:this.errors?Jg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yh)?yh:this._anyControlsHaveStatus(Jg)?Jg:bp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){t_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class $c extends ab{constructor(e=null,t,r){super(wp(t),e_(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_h(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_h(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Cp extends ab{constructor(e,t,r){super(wp(t),e_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof $c?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class pM extends ab{constructor(e,t,r){super(wp(t),e_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof $c?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const lI={provide:Ji,useExisting:(0,h.Gpc)(()=>Hr)},Ip=(()=>Promise.resolve(null))();let Hr=(()=>{class n extends Ji{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new h.vpe,this.form=new Cp({},$g(t),Yv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ip.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ml(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ip.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),_h(this._directives,t)})}addFormGroup(t){Ip.then(()=>{const r=this._findContainer(t.path),i=new Cp({});Yg(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ip.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ip.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Qg(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10),h.Y36(Sl,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([lI]),h.qOj]}),n})(),cI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const ub={provide:xa,useExisting:(0,h.Gpc)(()=>i_),multi:!0};let i_=(()=>{class n extends Au{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([ub]),h.qOj]}),n})(),s_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const vh=new h.OlP("NgModelWithFormControlWarning"),fb={provide:Ji,useExisting:(0,h.Gpc)(()=>zc)};let zc=(()=>{class n extends Ji{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ml(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Kg(t.control||null,t,!1),_h(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Qg(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Kg(r||null,t),i instanceof $c&&(Ml(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Yg(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Hc(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gh(this.form,this),this._oldForm&&Hc(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10),h.Y36(Sl,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([fb]),h.qOj,h.TTD]}),n})();const vM={provide:Hs,useExisting:(0,h.Gpc)(()=>a_)};let a_=(()=>{class n extends Hs{constructor(t,r,i,o,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===hh?t=o:function(n){return Object.getPrototypeOf(n.constructor)===Au}(o)?r=o:i=o}),i||r||t||null}(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Ji,13),h.Y36(Ti,10),h.Y36(Sl,10),h.Y36(xa,10),h.Y36(vh,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([vM]),h.qOj,h.TTD]}),n})(),Cb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[s_]]}),n})(),c_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Cb]}),n})(),wI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vh,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Cb]}),n})();var Kn=F(7233);function Dp(){return(0,Hn.e)((n,e)=>{let t,r=!1;n.subscribe(new yn.Q(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var ut,es=F(7905),CI=(F(6600),F(6293)),Ce=F(8239),Jo=F(1572),pr=F(1177),ea=F(3855),P=F(4213),MM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xl={},d_=d_||{},Ot=MM||self;function h_(){}function f_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Eh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ib="closure_uid_"+(1e9*Math.random()>>>0),Tb=0;function ta(n,e,t){return n.call.apply(n.bind,arguments)}function RM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ui(n,e,t){return(ui=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ta:RM).apply(null,arguments)}function p_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Mu(){this.s=this.s,this.o=this.o}var II={};Mu.prototype.s=!1,Mu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Ib)&&n[Ib]||(n[Ib]=++Tb)}(this);delete II[n]}},Mu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const TI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},NM=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function Db(n){return Array.prototype.concat.apply([],arguments)}function Sb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function m_(n){return/^[\s\xa0]*$/.test(n)}var Di,Ab=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xr(n,e){return-1!=n.indexOf(e)}function Sp(n,e){return n<e?-1:n>e?1:0}e:{var SI=Ot.navigator;if(SI){var Mb=SI.userAgent;if(Mb){Di=Mb;break e}}Di=""}function g_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function AI(n){const e={};for(const t in n)e[t]=n[t];return e}var MI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function OM(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<MI.length;o++)t=MI[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xI(n){return xI[" "](n),n}xI[" "]=h_;var xb,n,PM=xr(Di,"Opera"),wh=xr(Di,"Trident")||xr(Di,"MSIE"),kI=xr(Di,"Edge"),NI=kI||wh,FM=xr(Di,"Gecko")&&!(xr(Di.toLowerCase(),"webkit")&&!xr(Di,"Edge"))&&!(xr(Di,"Trident")||xr(Di,"MSIE"))&&!xr(Di,"Edge"),eF=xr(Di.toLowerCase(),"webkit")&&!xr(Di,"Edge");function LM(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Rb="",Ch=(n=Di,FM?/rv:([^\);]+)(\)|;)/.exec(n):kI?/Edge\/([\d\.]+)/.exec(n):wh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eF?/WebKit\/(\S+)/.exec(n):PM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ch&&(Rb=Ch?Ch[1]:""),wh){var kb=LM();if(null!=kb&&kb>parseFloat(Rb)){xb=String(kb);break e}}xb=Rb}var VM={};function OI(){return e=VM,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Ab(String(xb)).split("."),t=Ab("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",o=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=Sp(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||Sp(0==i[2].length,0==o[2].length)||Sp(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n}();var e}var Ob=Ot.document&&wh&&(LM()||parseInt(xb,10))||void 0,Pb=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",h_,e),Ot.removeEventListener("test",h_,e)}catch(t){}return n}();function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qc(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(FM){e:{try{xI(e.nodeName);var i=!0;break e}catch(o){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Fb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qc.Z.h.call(this)}}Si.prototype.h=function(){this.defaultPrevented=!0},$r(qc,Si);var Fb={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ih="closure_listenable_"+(1e6*Math.random()|0),PI=0;function tF(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++PI,this.ca=this.fa=!1}function Lb(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Vb(n){this.src=n,this.g={},this.h=0}function FI(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=TI(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Lb(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function LI(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}Vb.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=LI(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new tF(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var VI="closure_lm_"+(1e6*Math.random()|0),UI={};function Ub(n,e,t,r,i){if(r&&r.once)return jI(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ub(n,e[o],t,r,i);return null}return t=y_(t),n&&n[Ih]?n.N(e,t,Eh(r)?!!r.capture:!!r,i):BI(n,e,t,!1,r,i)}function BI(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=Eh(i)?!!i.capture:!!i,d=jb(n);if(d||(n[VI]=d=new Vb(n)),(t=d.add(e,t,r,u,o)).proxy)return t;if(r=function(){var e=$I;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Pb||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Bb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jI(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)jI(n,e[o],t,r,i);return null}return t=y_(t),n&&n[Ih]?n.O(e,t,Eh(r)?!!r.capture:!!r,i):BI(n,e,t,!0,r,i)}function HI(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)HI(n,e[o],t,r,i);else r=Eh(r)?!!r.capture:!!r,t=y_(t),n&&n[Ih]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=LI(o=n.g[e],t,r,i))&&(Lb(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=jb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=LI(e,t,r,i)),(t=-1<n?e[n]:null)&&__(t))}function __(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ih])FI(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Bb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=jb(e))?(FI(t,n),0==t.h&&(t.src=null,e[VI]=null)):Lb(n)}}}function Bb(n){return n in UI?UI[n]:UI[n]="on"+n}function $I(n,e){if(n.ca)n=!0;else{e=new qc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&__(n),n=t.call(r,e)}return n}function jb(n){return(n=n[VI])instanceof Vb?n:null}var Hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function y_(n){return"function"==typeof n?n:(n[Hb]||(n[Hb]=function(e){return n.handleEvent(e)}),n[Hb])}function mr(){Mu.call(this),this.i=new Vb(this),this.P=this,this.I=null}function ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var i=e;OM(e=new Si(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=Ap(u,r,!0,e)&&i}if(i=Ap(u=e.g=n,r,!0,e)&&i,i=Ap(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ap(u=e.g=t[o],r,!1,e)&&i}function Ap(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.ca&&u.capture==t){var d=u.listener,g=u.ia||u.src;u.fa&&FI(n.i,u),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}$r(mr,Mu),mr.prototype[Ih]=!0,mr.prototype.removeEventListener=function(n,e,t,r){HI(this,n,e,t,r)},mr.prototype.M=function(){if(mr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lb(t[r]);delete n.g[e],n.h--}}this.I=null},mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Th=Ot.JSON.stringify;function BM(){var n=zI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gb,GI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new HM,n=>n.reset());class HM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nF(n){Ot.setTimeout(()=>{throw n},0)}function $b(n,e){Gb||function(){var n=Ot.Promise.resolve(void 0);Gb=function(){n.then(GM)}}(),zb||(Gb(),zb=!0),zI.add(n,e)}var zb=!1,zI=new class{constructor(){this.h=this.g=null}add(e,t){const r=GI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function GM(){for(var n;n=BM();){try{n.h.call(n.g)}catch(t){nF(t)}var e=GI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zb=!1}function v_(n,e){mr.call(this),this.h=n||1,this.g=e||Ot,this.j=ui(this.kb,this),this.l=Date.now()}function qb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function qI(n,e,t){if("function"==typeof n)t&&(n=ui(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ui(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function zM(n){n.g=qI(()=>{n.g=null,n.i&&(n.i=!1,zM(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(v_,mr),(ut=v_.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ci(this,"tick"),this.da&&(qb(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){v_.Z.M.call(this),qb(this),delete this.g};class rF extends Mu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zM(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function b_(n){Mu.call(this),this.h=n,this.g={}}$r(b_,Mu);var qM=[];function WI(n,e,t,r){Array.isArray(t)||(t&&(qM[0]=t.toString()),t=qM);for(var i=0;i<t.length;i++){var o=Ub(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function WM(n){g_(n.g,function(e,t){this.g.hasOwnProperty(t)&&__(e)},n),n.g={}}function Wb(){this.g=!0}function s(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return Th(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}b_.prototype.M=function(){b_.Z.M.call(this),WM(this)},b_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wb.prototype.Aa=function(){this.g=!1},Wb.prototype.info=function(){};var c={},f=null;function _(){return f=f||new mr}function b(n){Si.call(this,c.Ma,n)}function w(n){const e=_();ci(e,new b(e,n))}function I(n,e){Si.call(this,c.STAT_EVENT,n),this.stat=e}function x(n){const e=_();ci(e,new I(e,n))}function k(n,e){Si.call(this,c.Na,n),this.size=e}function V(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}c.Ma="serverreachability",$r(b,Si),c.STAT_EVENT="statevent",$r(I,Si),c.Na="timingevent",$r(k,Si);var G={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ee={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ye(){}function ze(){}ye.prototype.h=null;var zt,rt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function De(){Si.call(this,"d")}function yt(){Si.call(this,"c")}function sn(){}function di(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new b_(this),this.P=Kb,this.W=new v_(n=NI?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xu}function xu(){this.i=null,this.g="",this.h=!1}$r(De,Si),$r(yt,Si),$r(sn,ye),sn.prototype.g=function(){return new XMLHttpRequest},sn.prototype.i=function(){return{}},zt=new sn;var Kb=45e3,Mp={},Dh={};function xp(n,e,t){n.K=1,n.v=XI(Kc(e)),n.s=t,n.U=!0,E_(n,null)}function E_(n,e){n.F=Date.now(),Wc(n),n.A=Kc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),hF(t.h,"t",r),n.C=0,t=n.l.H,n.h=new xu,n.g=PF(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rF(ui(n.Ia,n,n.g),n.O)),WI(n.V,n.g,"readystatechange",n.gb),e=n.H?AI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),w(1),function(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",d=o.split("&"),g=0;g<d.length;g++){var v=d[g].split("=");if(1<v.length){var C=v[0];v=v[1];var D=C.split("_");u=2<=D.length&&"type"==D[1]?u+(C+"=")+v+"&":u+(C+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function w_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function C_(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Zb(n,t),i==Dh){4==e&&(n.o=4,x(14),r=!1),s(n.j,n.m,null,"[Incomplete Response]");break}if(i==Mp){n.o=4,x(15),s(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}s(n.j,n.m,i,null),KM(n,i)}w_(n)&&i!=Dh&&i!=Mp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,x(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),sx(e),e.L=!0,x(11))):(s(n.j,n.m,t,"[Invalid Chunked Response]"),Rp(n),Yb(n))}function Zb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dh:(t=Number(e.substring(t,r)),isNaN(t)?Mp:(r+=1)+t>e.length?Dh:(e=e.substr(r,t),n.C=r+t,e))}function Wc(n){n.Y=Date.now()+n.P,oF(n,n.P)}function oF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=V(ui(n.eb,n),e)}function KI(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Yb(n){0==n.l.G||n.I||RF(n.l,n)}function Rp(n){KI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qb(n.W),WM(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function KM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||QM(t.i,n)))if(t.I=n.N,!n.J&&QM(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=V(ui(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;iT(t),nT(t)}ix(t),x(18)}if(1>=mF(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else Op(t,11)}else if((n.J||t.g==n)&&iT(t),!m_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const C=v[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=v[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const O=v[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const j=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var o=r.i;!o.g&&(xr(j,"spdy")||xr(j,"quic")||xr(j,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(XM(o,o.h),o.h=null))}if(r.D){const te=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.sa=te,or(r.F,r.D,te))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=OF(r,r.H?r.la:null,r.W),u.J){gF(r.i,u);var d=u,g=r.K;g&&d.setTimeout(g),d.B&&(KI(d),Wc(d)),r.g=u}else MF(r);0<t.l.length&&rT(t)}else"stop"!=v[0]&&"close"!=v[0]||Op(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Op(t,7):nx(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}w(4)}catch(v){}}function ZM(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(f_(n)||"string"==typeof n)NM(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(f_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(f_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function I_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof I_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function YM(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];kp(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)kp(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function kp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=di.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==Zc(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const C=Zc(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||NI||this.g&&(this.h.h||this.g.ga()||IF(this.g)))){this.I||4!=C||7==e||w(8==e||0>=D?3:2),KI(this);var t=this.g.ba();this.N=t;t:if(w_(this)){var r=IF(this.g);n="";var i=r.length,o=4==Zc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Rp(this),Yb(this);var u="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m_(d)){var v=d;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,x(12),Rp(this),Yb(this);break e}s(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,KM(this,t)}this.U?(C_(this,C,u),NI&&this.i&&3==C&&(WI(this.V,this.W,"tick",this.fb),this.W.start())):(s(this.j,this.m,u,null),KM(this,u)),4==C&&Rp(this),this.i&&!this.I&&(4==C?RF(this.l,this):(this.i=!1,Wc(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,x(12)):(this.o=0,x(13)),Rp(this),Yb(this)}}}catch(C){}},ut.fb=function(){if(this.g){var n=Zc(this.g),e=this.g.ga();this.C<e.length&&(KI(this),C_(this,n,e),this.i&&4!=n&&Wc(this))}},ut.cancel=function(){this.I=!0,Rp(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(w(3),x(17)),Rp(this),this.o=2,Yb(this)):oF(this,this.Y-n)},(ut=I_.prototype).R=function(){YM(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return YM(this),this.g.concat()},ut.get=function(n,e){return kp(this.h,n)?this.h[n]:e},ut.set=function(n,e){kp(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var aF=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Np(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Np){this.g=void 0!==e?e:n.g,ZI(this,n.j),this.s=n.s,YI(this,n.i),QI(this,n.m),this.l=n.l,e=n.h;var t=new Jb;t.i=e.i,e.g&&(t.g=new I_(e.g),t.h=e.h),lF(this,t),this.o=n.o}else n&&(t=String(n).match(aF))?(this.g=!!e,ZI(this,t[1]||"",!0),this.s=Qb(t[2]||""),YI(this,t[3]||"",!0),QI(this,t[4]),this.l=Qb(t[5]||"",!0),lF(this,t[6]||"",!0),this.o=Qb(t[7]||"")):(this.g=!!e,this.h=new Jb(null,this.g))}function Kc(n){return new Np(n)}function ZI(n,e,t){n.j=t?Qb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function YI(n,e,t){n.i=t?Qb(e,!0):e}function QI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function lF(n,e,t){e instanceof Jb?(n.h=e,function(n,e){e&&!n.j&&(Sh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(cF(this,r),hF(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Xb(e,oH)),n.h=new Jb(e,n.g))}function or(n,e,t){n.h.set(e,t)}function XI(n){return or(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Np.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xb(e,uF,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xb(e,uF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xb(t,"/"==t.charAt(0)?sH:iH,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xb(t,aH)),n.join("")};var uF=/[#\/\?@]/g,iH=/[#\?:]/g,sH=/[#\?]/g,oH=/[#\?@]/g,aH=/#/g;function Jb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Sh(n){n.g||(n.g=new I_,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cF(n,e){Sh(n),e=T_(n,e),kp(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kp((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&YM(n)))}function dF(n,e){return Sh(n),e=T_(n,e),kp(n.g.h,e)}function hF(n,e,t){cF(n,e),0<t.length&&(n.i=null,n.g.set(T_(n,e),Sb(t)),n.h+=t.length)}function T_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fF(n){this.l=n||cH,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Jb.prototype).add=function(n,e){Sh(this),this.i=null,n=T_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Sh(this),this.g.forEach(function(t,r){NM(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){Sh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},ut.R=function(n){Sh(this);var e=[];if("string"==typeof n)dF(this,n)&&(e=Db(e,this.g.get(T_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Db(e,n[t])}return e},ut.set=function(n,e){return Sh(this),this.i=null,dF(this,n=T_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var u=i;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),n.push(u)}}return this.i=n.join("&")};var cH=10;function pF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mF(n){return n.h?1:n.g?n.g.size:0}function QM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function XM(n,e){n.g?n.g.add(e):n.h=e}function gF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _F(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Sb(n.i)}function JM(){}function dH(){this.g=new JM}function hH(n,e,t){const r=t||"";try{ZM(n,function(i,o){let u=i;Eh(i)&&(u=Th(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function JI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function eE(n){this.l=n.$b||null,this.j=n.ib||!1}function eT(n,e){mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ex,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fF.prototype.cancel=function(){if(this.i=_F(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},JM.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},JM.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},$r(eE,ye),eE.prototype.g=function(){return new eT(this.l,this.j)},eE.prototype.i=function(n){return function(){return n}}({}),$r(eT,mr);var ex=0;function yF(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function tE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,nE(n)}function nE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=eT.prototype).open=function(n,e){if(this.readyState!=ex)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,nE(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tE(this)),this.readyState=ex},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,nE(this)),this.g&&(this.readyState=3,nE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yF(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?tE(this):nE(this),3==this.readyState&&yF(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,tE(this))},ut.Ta=function(n){this.g&&(this.response=n,tE(this))},ut.ha=function(){this.g&&tE(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(eT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pH=Ot.JSON.parse;function Gr(n){mr.call(this),this.headers=new I_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vF,this.K=this.L=!1}$r(Gr,mr);var vF="",mH=/^https?$/i,gH=["POST","PUT"];function yH(n){return"content-type"==n.toLowerCase()}function bF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,EF(n),tT(n)}function EF(n){n.D||(n.D=!0,ci(n,"complete"),ci(n,"error"))}function wF(n){if(n.h&&void 0!==d_&&(!n.C[1]||4!=Zc(n)||2!=n.ba()))if(n.v&&4==Zc(n))qI(n.Fa,0,n);else if(ci(n,"readystatechange"),4==Zc(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(aF)[1]||null;if(!i&&Ot.self&&Ot.self.location){var o=Ot.self.location.protocol;i=o.substr(0,o.length-1)}r=!mH.test(i?i.toLowerCase():"")}t=r}if(t)ci(n,"complete"),ci(n,"success");else{n.m=6;try{var u=2<Zc(n)?n.g.statusText:""}catch(g){u=""}n.j=u+" ["+n.ba()+"]",EF(n)}}finally{tT(n)}}}function tT(n,e){if(n.g){CF(n);const t=n.g,r=n.C[0]?h_:null;n.g=null,n.C=null,e||ci(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function CF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Zc(n){return n.g?n.g.readyState:0}function IF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return g_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):or(n,e,t))}function rE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function TF(n){this.za=0,this.l=[],this.h=new Wb,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rE("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rE("baseRetryDelayMs",5e3,n),this.$a=rE("retryDelaySeedMs",1e4,n),this.Ya=rE("forwardChannelMaxRetries",2,n),this.ra=rE("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new fF(n&&n.concurrentRequestLimit),this.Ca=new dH,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function nx(n){if(DF(n),3==n.G){var e=n.V++,t=Kc(n.F);or(t,"SID",n.J),or(t,"RID",e),or(t,"TYPE","terminate"),iE(n,t),(e=new di(n,n.h,e,void 0)).K=2,e.v=XI(Kc(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=PF(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wc(e)}NF(n)}function nT(n){n.g&&(sx(n),n.g.cancel(),n.g=null)}function DF(n){nT(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),iT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function rx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&rT(n)}function rT(n){pF(n.i)||n.m||(n.m=!0,$b(n.Ha,n),n.C=0)}function SF(n,e){var t;t=e?e.m:n.V++;const r=Kc(n.F);or(r,"SID",n.J),or(r,"RID",t),or(r,"AID",n.U),iE(n,r),n.o&&n.s&&tx(r,n.o,n.s),t=new di(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=AF(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),XM(n.i,t),xp(t,r,e)}function iE(n,e){n.j&&ZM({},function(t,r){or(e,r,t)})}function AF(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ui(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let d=!0;for(let g=0;g<t;g++){let v=i[g].h;const C=i[g].g;if(v-=o,0>v)o=Math.max(0,i[g].h-100),d=!1;else try{hH(C,u,"req"+v+"_")}catch(D){r&&r(C)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function MF(n){n.g||n.u||(n.Y=1,$b(n.Ga,n),n.A=0)}function ix(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=V(ui(n.Ga,n),kF(n,n.A)),n.A++,0))}function sx(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function xF(n){n.g=new di(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Kc(n.oa);or(e,"RID","rpc"),or(e,"SID",n.J),or(e,"CI",n.N?"0":"1"),or(e,"AID",n.U),iE(n,e),or(e,"TYPE","xmlhttp"),n.o&&n.s&&tx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=XI(Kc(e)),t.s=null,t.U=!0,E_(t,n)}function iT(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function RF(n,e){var t=null;if(n.g==e){iT(n),sx(n),n.g=null;var r=2}else{if(!QM(n.i,e))return;t=e.D,gF(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ci(r=_(),new k(r,t,e,i)),rT(n)}else MF(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(mF(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=V(ui(n.Ha,n,e),kF(n,n.C)),n.C++,0)))}(n,e)||2==r&&ix(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Op(n,5);break;case 4:Op(n,10);break;case 3:Op(n,6);break;default:Op(n,2)}}function kF(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Op(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ui(n.jb,n);t||(t=new Np("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||ZI(t,"https"),XI(t)),function(n,e){const t=new Wb;if(Ot.Image){const r=new Image;r.onload=p_(JI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=p_(JI,t,r,"TestLoadImage: error",!1,e),r.onabort=p_(JI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=p_(JI,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else x(2);n.G=0,n.j&&n.j.va(e),NF(n),DF(n)}function NF(n){n.G=0,n.I=-1,n.j&&((0!=_F(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Sb(n.l),n.l.length=0),n.j.ua())}function OF(n,e,t){let r=function(n){return n instanceof Np?Kc(n):new Np(n,void 0)}(t);if(""!=r.i)e&&YI(r,e+"."+r.i),QI(r,r.m);else{const i=Ot.location;r=function(n,e,t,r){var i=new Np(null,void 0);return n&&ZI(i,n),e&&YI(i,e),t&&QI(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&g_(n.aa,function(i,o){or(r,o,i)}),t=n.sa,(e=n.D)&&t&&or(r,e,t),or(r,"VER",n.ma),iE(n,r),r}function PF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gr(t&&n.Ba&&!n.qa?new eE({ib:!0}):n.qa)).L=n.H,e}function FF(){}function sT(){if(wh&&!(10<=Number(Ob)))throw Error("Environmental error: no available transport.")}function na(n,e){mr.call(this),this.g=new TF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!m_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!m_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new D_(this)}function LF(n){De.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function VF(){yt.call(this),this.status=1}function D_(n){this.g=n}(ut=Gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zt.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:zt),this.g.onreadystatechange=ui(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void bF(this,o)}n=t||"";const i=new I_(this.headers);r&&ZM(r,function(o,u){i.set(u,o)}),r=function(n){e:{var e=yH;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=TI(gH,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,u){this.g.setRequestHeader(u,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{CF(this),0<this.B&&((this.K=function(n){return wh&&OI()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ui(this.pa,this)):this.A=qI(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){bF(this,o)}},ut.pa=function(){void 0!==d_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ci(this,"complete"),ci(this,"abort"),tT(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tT(this,!0)),Gr.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?wF(this):this.cb())},ut.cb=function(){wF(this)},ut.ba=function(){try{return 2<Zc(this)?this.g.status:-1}catch(n){return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pH(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=TF.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new di(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=AI(o),OM(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=AF(this,i,e),or(t=Kc(this.F),"RID",n),or(t,"CVER",22),this.D&&or(t,"X-HTTP-Session-Id",this.D),iE(this,t),this.o&&o&&tx(t,this.o,o),XM(this.i,i),this.Ra&&or(t,"TYPE","init"),this.ja?(or(t,"$req",e),or(t,"SID","null"),i.$=!0,xp(i,t,null)):xp(i,t,e),this.G=2}}else 3==this.G&&(n?SF(this,n):0==this.l.length||pF(this.i)||SF(this))},ut.Ga=function(){if(this.u=null,xF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=V(ui(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,x(10),nT(this),xF(this))},ut.ab=function(){null!=this.v&&(this.v=null,nT(this),ix(this),x(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),x(2)):(this.h.info("Failed to ping google.com"),x(1))},(ut=FF.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},sT.prototype.g=function(n,e){return new na(n,e)},$r(na,mr),na.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),$b(ui(n.hb,n,e))),x(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=OF(n,null,n.W),rT(n)},na.prototype.close=function(){nx(this.g)},na.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,rx(this.g,e)}else this.v?((e={}).__data__=Th(n),rx(this.g,e)):rx(this.g,n)},na.prototype.M=function(){this.g.j=null,delete this.j,nx(this.g),delete this.g,na.Z.M.call(this)},$r(LF,De),$r(VF,yt),$r(D_,FF),D_.prototype.xa=function(){ci(this.g,"a")},D_.prototype.wa=function(n){ci(this.g,new LF(n))},D_.prototype.va=function(n){ci(this.g,new VF(n))},D_.prototype.ua=function(){ci(this.g,"b")},sT.prototype.createWebChannel=sT.prototype.g,na.prototype.send=na.prototype.u,na.prototype.open=na.prototype.m,na.prototype.close=na.prototype.close,G.NO_ERROR=0,G.TIMEOUT=8,G.HTTP_ERROR=6,ee.COMPLETE="complete",ze.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",mr.prototype.listen=mr.prototype.N,Gr.prototype.listenOnce=Gr.prototype.O,Gr.prototype.getLastError=Gr.prototype.La,Gr.prototype.getLastErrorCode=Gr.prototype.Da,Gr.prototype.getStatus=Gr.prototype.ba,Gr.prototype.getResponseJson=Gr.prototype.Qa,Gr.prototype.getResponseText=Gr.prototype.ga,Gr.prototype.send=Gr.prototype.ea;var EH=xl.createWebChannelTransport=function(){return new sT},wH=xl.getStatEventTarget=function(){return _()},ox=xl.ErrorCode=G,CH=xl.EventType=ee,IH=xl.Event=c,UF=xl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},TH=xl.FetchXmlHttpFactory=eE,oT=xl.WebChannel=ze,DH=xl.XhrIo=Gr;const BF="@firebase/firestore";class ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let S_="9.8.0";const Ah=new ea.Yd("@firebase/firestore");function ax(){return Ah.logLevel}function Be(n,...e){if(Ah.logLevel<=ea.in.DEBUG){const t=e.map(lx);Ah.debug(`Firestore (${S_}): ${n}`,...t)}}function zr(n,...e){if(Ah.logLevel<=ea.in.ERROR){const t=e.map(lx);Ah.error(`Firestore (${S_}): ${n}`,...t)}}function sE(n,...e){if(Ah.logLevel<=ea.in.WARN){const t=e.map(lx);Ah.warn(`Firestore (${S_}): ${n}`,...t)}}function lx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${S_}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function Ft(n,e){n||pt()}function Qe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ts.UNAUTHENTICATED))}shutdown(){}}class xH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class RH{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ai,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const v=u;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},g=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ai)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new jF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new ts(e)}}class kH{constructor(e,t,r){this.type="FirstParty",this.user=ts.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class NH{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kH(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OH{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=o=>{null!=o.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.p;return this.p=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new HF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ra{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function PH(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ra.A=-1;class $F{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function A_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function GF(n){return n+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Rr(0,0))}static max(){return new Mt(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function zF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class oE{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===oE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends oE{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const FH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends oE{construct(e,t,r){return new hi(e,t,r)}static isValidIdentifier(e){return FH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ne(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ne(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ne(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(o(),i++)}if(o(),u)throw new Ne(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class M_{constructor(e){this.fields=e,e.sort(hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return A_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const VH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mh(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=VH.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fp(n){return"string"==typeof n?fi.fromBase64String(n):fi.fromUint8Array(n)}function ux(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WF(n){const e=n.mapValue.fields.__previous_value__;return ux(e)?WF(e):e}function aE(n){const e=Mh(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class UH{constructor(e,t,r,i,o,u,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class Yc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}function lE(n){return null==n}function uE(n){return 0===n&&1/n==-1/0}function KF(n){return"number"==typeof n&&Number.isInteger(n)&&!uE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(un.fromString(e))}static fromName(e){return new Ke(un.fromString(e).popFirst(5))}static empty(){return new Ke(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new un(e.slice()))}}const xh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},aT={nullValue:"NULL_VALUE"};function Lp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ux(n)?4:XF(n)?9007199254740991:10:pt()}function Ru(n,e){if(n===e)return!0;const t=Lp(n);if(t!==Lp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return aE(n).isEqual(aE(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Mh(r.timestampValue),u=Mh(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Fp(n.bytesValue).isEqual(Fp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Cr(r.geoPointValue.latitude)===Cr(i.geoPointValue.latitude)&&Cr(r.geoPointValue.longitude)===Cr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Cr(r.integerValue)===Cr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Cr(r.doubleValue),u=Cr(i.doubleValue);return o===u?uE(o)===uE(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return A_(n.arrayValue.values||[],e.arrayValue.values||[],Ru);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(zF(o)!==zF(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===u[d]||!Ru(o[d],u[d])))return!1;return!0}(n,e);default:return pt()}var i}function cE(n,e){return void 0!==(n.values||[]).find(t=>Ru(t,e))}function Rh(n,e){if(n===e)return 0;const t=Lp(n),r=Lp(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Cr(i.integerValue||i.doubleValue),d=Cr(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return ZF(n.timestampValue,e.timestampValue);case 4:return ZF(aE(n),aE(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,o){const u=Fp(i),d=Fp(o);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),d=o.split("/");for(let g=0;g<u.length&&g<d.length;g++){const v=Ht(u[g],d[g]);if(0!==v)return v}return Ht(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=Ht(Cr(i.latitude),Cr(o.latitude));return 0!==u?u:Ht(Cr(i.longitude),Cr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],d=o.values||[];for(let g=0;g<u.length&&g<d.length;++g){const v=Rh(u[g],d[g]);if(v)return v}return Ht(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===xh.mapValue&&o===xh.mapValue)return 0;if(i===xh.mapValue)return 1;if(o===xh.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),g=o.fields||{},v=Object.keys(g);d.sort(),v.sort();for(let C=0;C<d.length&&C<v.length;++C){const D=Ht(d[C],v[C]);if(0!==D)return D;const O=Rh(u[d[C]],g[v[C]]);if(0!==O)return O}return Ht(d.length,v.length)}(n.mapValue,e.mapValue);default:throw pt()}}function ZF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Mh(n),r=Mh(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function x_(n){return cx(n)}function cx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Mh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fp(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=cx(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${cx(r.fields[d])}`;return o+"}"}(n.mapValue):pt();var e}function Vp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dx(n){return!!n&&"integerValue"in n}function dE(n){return!!n&&"arrayValue"in n}function YF(n){return!!n&&"nullValue"in n}function QF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lT(n){return!!n&&"mapValue"in n}function hE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function BH(n){return"nullValue"in n?aT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vp(Yc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function jH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vp(Yc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xh:pt()}function JF(n,e){const t=Rh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function e1(n,e){const t=Rh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ws{constructor(e){this.value=e}static empty(){return new ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hE(t)}setAll(e){let t=hi.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=hE(u):i.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());lT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ru(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pp(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ws(hE(this.value))}}function t1(n){const e=[];return Pp(n.fields,(t,r)=>{const i=new hi([t]);if(lT(r)){const o=t1(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new M_(e)}class nr{constructor(e,t,r,i,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new nr(e,0,Mt.min(),Mt.min(),ws.empty(),0)}static newFoundDocument(e,t,r){return new nr(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new nr(e,2,t,Mt.min(),ws.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,Mt.min(),ws.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function hx(n){return n.fields.find(e=>2===e.kind)}function Up(n){return n.fields.filter(e=>2!==e.kind)}uT.UNKNOWN_ID=-1;class cT{constructor(e,t){this.fieldPath=e,this.kind=t}}class fE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fE(0,kl.min())}}function n1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Rr(t+1,0):new Rr(t,r));return new kl(i,Ke.empty(),e)}function HH(n){return new kl(n.readTime,n.key,-1)}class kl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new kl(Mt.min(),Ke.empty(),-1)}static max(){return new kl(Mt.max(),Ke.empty(),-1)}}function r1(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}class kr{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dT(this.root,e,this.comparator,!1)}getReverseIterator(){return new dT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dT(this.root,e,this.comparator,!0)}}class dT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=null!=r?r:ns.RED,this.left=null!=i?i:ns.EMPTY,this.right=null!=o?o:ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ns(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s1(this.data.getIterator())}getIteratorFrom(e){return new s1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class s1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function R_(n){return n.hasNext()?n.getNext():void 0}class $H{constructor(e,t=null,r=[],i=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=d,this.P=null}}function o1(n,e=null,t=[],r=[],i=null,o=null,u=null){return new $H(n,e,t,r,i,o,u)}function Bp(n){const e=Qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+x_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),lE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>x_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>x_(r)).join(",")),e.P=t}return e.P}function pE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!XH(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ru(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d1(n.startAt,e.startAt)&&d1(n.endAt,e.endAt)}function hT(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fT(n,e){return n.filters.filter(t=>t instanceof rs&&t.field.isEqual(e))}function a1(n,e,t){let r=aT,i=!0;for(const o of fT(n,e)){let u=aT,d=!0;switch(o.op){case"<":case"<=":u=BH(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,d=!1;break;case"!=":case"not-in":u=aT}JF({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];JF({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function l1(n,e,t){let r=xh,i=!0;for(const o of fT(n,e)){let u=xh,d=!0;switch(o.op){case">=":case">":u=jH(o.value),d=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,d=!1;break;case"!=":case"not-in":u=xh}e1({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];e1({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class rs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new zH(e,t,r):"array-contains"===t?new KH(e,r):"in"===t?new ZH(e,r):"not-in"===t?new YH(e,r):"array-contains-any"===t?new QH(e,r):new rs(e,t,r)}static V(e,t,r){return"in"===t?new qH(e,r):new WH(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Rh(t,this.value)):null!==t&&Lp(this.value)===Lp(t)&&this.v(Rh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class zH extends rs{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.v(t)}}class qH extends rs{constructor(e,t){super(e,"in",t),this.keys=u1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WH extends rs{constructor(e,t){super(e,"not-in",t),this.keys=u1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function u1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class KH extends rs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dE(t)&&cE(t.arrayValue,this.value)}}class ZH extends rs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cE(this.value.arrayValue,t)}}class YH extends rs{constructor(e,t){super(e,"not-in",t)}matches(e){if(cE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cE(this.value.arrayValue,t)}}class QH extends rs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cE(this.value.arrayValue,r))}}class kh{constructor(e,t){this.position=e,this.inclusive=t}}class k_{constructor(e,t="asc"){this.field=e,this.dir=t}}function XH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function c1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?Ke.comparator(Ke.fromName(u.referenceValue),t.key):Rh(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function d1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ru(n.position[t],e.position[t]))return!1;return!0}class Qc{constructor(e,t=null,r=[],i=[],o=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=g,this.D=null,this.C=null}}function h1(n,e,t,r,i,o,u,d){return new Qc(n,e,t,r,i,o,u,d)}function N_(n){return new Qc(n)}function fx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function px(n){for(const e of n.filters)if(e.S())return e.field;return null}function mx(n){return null!==n.collectionGroup}function O_(n){const e=Qe(n);if(null===e.D){e.D=[];const t=px(e),r=fx(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new k_(t)),e.D.push(new k_(hi.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.D.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new k_(hi.keyField(),o))}}}return e.D}function Ra(n){const e=Qe(n);if(!e.C)if("F"===e.limitType)e.C=o1(e.path,e.collectionGroup,O_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of O_(e))t.push(new k_(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new kh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new kh(e.startAt.position,e.startAt.inclusive):null;e.C=o1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function f1(n,e,t){return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mE(n,e){return pE(Ra(n),Ra(e))&&n.limitType===e.limitType}function p1(n){return`${Bp(Ra(n))}|lt:${n.limitType}`}function gx(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${x_(r.value)}`;var r}).join(", ")}]`),lE(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>x_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>x_(t)).join(",")),`Target(${e})`}(Ra(n))}; limitType=${n.limitType})`}function _x(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const d=c1(i,o,u);return i.inclusive?d<=0:d<0}(t.startAt,O_(t),r)||t.endAt&&!function(i,o,u){const d=c1(i,o,u);return i.inclusive?d>=0:d>0}(t.endAt,O_(t),r)));var t,r}function m1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function g1(n){return(e,t)=>{let r=!1;for(const i of O_(n)){const o=e$(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function e$(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,o,u){const d=o.data.field(i),g=u.data.field(i);return null!==d&&null!==g?Rh(d,g):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function _1(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uE(e)?"-0":e}}function y1(n){return{integerValue:""+n}}function v1(n,e){return KF(e)?y1(e):_1(n,e)}class pT{constructor(){this._=void 0}}function t$(n,e,t){return n instanceof P_?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof jp?E1(n,e):n instanceof Hp?w1(n,e):function(r,i){const o=b1(r,i),u=C1(o)+C1(r.k);return dx(o)&&dx(r.k)?y1(u):_1(r.M,u)}(n,e)}function n$(n,e,t){return n instanceof jp?E1(n,e):n instanceof Hp?w1(n,e):t}function b1(n,e){return n instanceof F_?dx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class P_ extends pT{}class jp extends pT{constructor(e){super(),this.elements=e}}function E1(n,e){const t=I1(e);for(const r of n.elements)t.some(i=>Ru(i,r))||t.push(r);return{arrayValue:{values:t}}}class Hp extends pT{constructor(e){super(),this.elements=e}}function w1(n,e){let t=I1(e);for(const r of n.elements)t=t.filter(i=>!Ru(i,r));return{arrayValue:{values:t}}}class F_ extends pT{constructor(e,t){super(),this.M=e,this.k=t}}function C1(n){return Cr(n.integerValue||n.doubleValue)}function I1(n){return dE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gE{constructor(e,t){this.field=e,this.transform=t}}class i${constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gT{}function s$(n,e,t){n instanceof _E?function(r,i,o){const u=r.value.clone(),d=A1(r.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof $p?function(r,i,o){if(!mT(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=A1(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(S1(r)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yx(n,e,t){var i;n instanceof _E?function(r,i,o){if(!mT(r.precondition,i))return;const u=r.value.clone(),d=M1(r.fieldTransforms,o,i);u.setAll(d),i.convertToFoundDocument(D1(i),u).setHasLocalMutations()}(n,e,t):n instanceof $p?function(r,i,o){if(!mT(r.precondition,i))return;const u=M1(r.fieldTransforms,o,i),d=i.data;d.setAll(S1(r)),d.setAll(u),i.convertToFoundDocument(D1(i),d).setHasLocalMutations()}(n,e,t):mT(n.precondition,i=e)&&i.convertToNoDocument(Mt.min())}function o$(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=b1(r.transform,i||null);null!=o&&(null==t&&(t=ws.empty()),t.set(r.field,o))}return t||null}function T1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&A_(t,r,(i,o)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof jp&&r instanceof jp||t instanceof Hp&&r instanceof Hp?A_(t.elements,r.elements,Ru):t instanceof F_&&r instanceof F_?Ru(t.k,r.k):t instanceof P_&&r instanceof P_);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function D1(n){return n.isFoundDocument()?n.version:Mt.min()}class _E extends gT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class $p extends gT{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}}function S1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function A1(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,d=e.data.field(o.field);r.set(o.field,n$(u,d,t[i]))}return r}function M1(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,t$(o,u,e))}return r}class yE extends gT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class vx extends gT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class a${constructor(e){this.count=e}}var Wr,cn;function x1(n){switch(n){default:return pt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function R1(n){if(void 0===n)return zr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Wr.OK:return pe.OK;case Wr.CANCELLED:return pe.CANCELLED;case Wr.UNKNOWN:return pe.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return pe.INTERNAL;case Wr.UNAVAILABLE:return pe.UNAVAILABLE;case Wr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Wr.NOT_FOUND:return pe.NOT_FOUND;case Wr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Wr.ABORTED:return pe.ABORTED;case Wr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Wr.DATA_LOSS:return pe.DATA_LOSS;default:return pt()}}(cn=Wr||(Wr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class Nh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pp(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return qF(this.inner)}size(){return this.innerSize}}const l$=new kr(Ke.comparator);function ka(){return l$}const u$=new kr(Ke.comparator);function bx(...n){let e=u$;for(const t of n)e=e.insert(t.key,t);return e}function vE(){return new Nh(n=>n.toString(),(n,e)=>n.isEqual(e))}const c$=new kr(Ke.comparator),d$=new Zn(Ke.comparator);function xn(...n){let e=d$;for(const t of n)e=e.add(t);return e}const h$=new Zn(Ht);function _T(){return h$}class bE{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,EE.createSynthesizedTargetChangeForCurrentChange(e,t)),new bE(Mt.min(),r,_T(),ka(),xn())}}class EE{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new EE(fi.EMPTY_BYTE_STRING,t,xn(),xn(),xn())}}class yT{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class k1{constructor(e,t){this.targetId=e,this.$=t}}class N1{constructor(e,t,r=fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class O1{constructor(){this.B=0,this.L=F1(),this.U=fi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=xn(),t=xn(),r=xn();return this.L.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new EE(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=F1()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class f${constructor(e){this.nt=e,this.st=new Map,this.it=ka(),this.rt=P1(),this.ot=new Zn(Ht)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const o=i.target;if(hT(o))if(0===r){const u=new Ke(o.path);this.ct(t,u,nr.newNoDocument(u,Mt.min()))}else Ft(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((o,u)=>{const d=this.wt(u);if(d){if(o.current&&hT(d.target)){const g=new Ke(d.target.path);null!==this.it.get(g)||this.It(u,g)||this.ct(u,g,nr.newNoDocument(g,e))}o.j&&(t.set(u,o.H()),o.J())}});let r=xn();this.rt.forEach((o,u)=>{let d=!0;u.forEachWhile(g=>{const v=this.wt(g);return!v||2===v.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.it.forEach((o,u)=>u.setReadTime(e));const i=new bE(e,t,this.ot,this.it,r);return this.it=ka(),this.rt=P1(),this.ot=new Zn(Ht),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new O1,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Zn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new O1),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function P1(){return new kr(Ke.comparator)}function F1(){return new kr(Ke.comparator)}const p$={asc:"ASCENDING",desc:"DESCENDING"},m$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class g${constructor(e,t){this.databaseId=e,this.N=t}}function wE(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L1(n,e){return n.N?e.toBase64():e.toUint8Array()}function _$(n,e){return wE(n,e.toTimestamp())}function Mi(n){return Ft(!!n),Mt.fromTimestamp(function(e){const t=Mh(e);return new Rr(t.seconds,t.nanos)}(n))}function Ex(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function V1(n){const e=un.fromString(n);return Ft(W1(e)),e}function CE(n,e){return Ex(n.databaseId,e.path)}function ku(n,e){const t=V1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(B1(t))}function wx(n,e){return Ex(n.databaseId,e)}function U1(n){const e=V1(n);return 4===e.length?un.emptyPath():B1(e)}function IE(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function B1(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function j1(n,e,t){return{name:CE(n,e),fields:t.value.mapValue.fields}}function H1(n,e,t){const r=ku(n,e.name),i=Mi(e.updateTime),o=new ws({mapValue:{fields:e.fields}}),u=nr.newFoundDocument(r,i,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function TE(n,e){let t;if(e instanceof _E)t={update:j1(n,e.key,e.value)};else if(e instanceof yE)t={delete:CE(n,e.key)};else if(e instanceof $p)t={update:j1(n,e.key,e.data),updateMask:D$(e.fieldMask)};else{if(!(e instanceof vx))return pt();t={verify:CE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof P_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Hp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof F_)return{fieldPath:o.field.canonicalString(),increment:u.k};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function Cx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qr.updateTime(Mi(i.updateTime)):void 0!==i.exists?qr.exists(i.exists):qr.none():qr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let d=null;"setToServerValue"in u?(Ft("REQUEST_TIME"===u.setToServerValue),d=new P_):"appendMissingElements"in u?d=new jp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new Hp(u.removeAllFromArray.values||[]):"increment"in u?d=new F_(o,u.increment):pt();const g=hi.fromServerFormat(u.fieldPath);return new gE(g,d)}(n,i)):[];var i;if(e.update){const i=ku(n,e.update.name),o=new ws({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new M_((e.updateMask.fieldPaths||[]).map(v=>hi.fromServerFormat(v)));return new $p(i,o,u,t,r)}return new _E(i,o,t,r)}if(e.delete){const i=ku(n,e.delete);return new yE(i,t)}if(e.verify){const i=ku(n,e.verify);return new vx(i,t)}return pt()}function $1(n,e){return{documents:[wx(n,e.path)]}}function G1(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(C=>function(D){if("=="===D.op){if(QF(D.value))return{unaryFilter:{field:L_(D.field),op:"IS_NAN"}};if(YF(D.value))return{unaryFilter:{field:L_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(QF(D.value))return{unaryFilter:{field:L_(D.field),op:"IS_NOT_NAN"}};if(YF(D.value))return{unaryFilter:{field:L_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:L_(D.field),op:C$(D.op),value:D.value}}}(C));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(v=>{return{field:L_((C=v).field),direction:w$(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=(v=e.limit,n.N||lE(v)?v:{value:v});var v,d,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function z1(n){let e=U1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let o=[];t.where&&(o=q1(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new k_(V_((D=C).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(C){let D;return D="object"==typeof C?C.value:C,lE(D)?null:D}(t.limit));let g=null;var C;t.startAt&&(g=new kh((C=t.startAt).values||[],!!C.before));let v=null;return t.endAt&&(v=function(C){return new kh(C.values||[],!C.before)}(t.endAt)),h1(e,i,u,o,d,"F",g,v)}function q1(n){return n?void 0!==n.unaryFilter?[T$(n)]:void 0!==n.fieldFilter?[I$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>q1(e)).reduce((e,t)=>e.concat(t)):pt():[]}function w$(n){return p$[n]}function C$(n){return m$[n]}function L_(n){return{fieldPath:n.canonicalString()}}function V_(n){return hi.fromServerFormat(n.fieldPath)}function I$(n){return rs.create(V_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function T$(n){switch(n.unaryFilter.op){case"IS_NAN":const e=V_(n.unaryFilter.field);return rs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=V_(n.unaryFilter.field);return rs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=V_(n.unaryFilter.field);return rs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=V_(n.unaryFilter.field);return rs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function D$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function W1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $s(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=K1(e)),e=S$(n.get(t),e);return K1(e)}function S$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function K1(n){return n+"\x01\x01"}function Nu(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&pt(),n.charAt(u+1)){case"\x01":const d=n.substring(o,u);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:pt()}o=u+2}return new un(r)}const Z1=["userId","batchId"];function vT(n,e){return[n,$s(e)]}function Y1(n,e,t){return[n,$s(e),t]}const A$={},M$=["prefixPath","collectionGroup","readTime","documentId"],x$=["prefixPath","collectionGroup","documentId"],R$=["collectionGroup","readTime","prefixPath","documentId"],k$=["canonicalId","targetId"],N$=["targetId","path"],O$=["path","targetId"],P$=["collectionId","parent"],F$=["indexId","uid"],L$=["uid","sequenceNumber"],V$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],U$=["indexId","uid","orderedDocumentKey"],B$=["userId","collectionPath","documentId"],j$=["userId","collectionPath","largestBatchId"],H$=["userId","collectionGroup","largestBatchId"],Q1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$$=[...Q1,"documentOverlays"],X1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],G$=[...X1,"indexConfiguration","indexState","indexEntries"],J1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,o=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++o,u&&o===i&&t()},g=>r(g))}),u=!0,o===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}}class bT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ai,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new DE(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Ix(r.target.error);this.At.reject(new DE(e,i))}}static open(e,t,r,i){try{return new bT(t,e.transaction(i,r))}catch(o){throw new DE(t,o)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new q$(t)}}class Nl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Nl.Vt((0,P.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),zp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,P.hl)())return!1;if(Nl.St())return!0;const e=(0,P.z$)(),t=Nl.Vt(e),r=0<t&&t<10,i=Nl.Dt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new DE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Ne(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ne(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new DE(e,d))},o.onupgradeneeded=u=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,Ce.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{o.db=yield o.Nt(e);const g=bT.open(o.db,e,u?"readonly":"readwrite",r),v=i(g).next(C=>(g.bt(),C)).catch(C=>(g.abort(C),me.reject(C))).toPromise();return v.catch(()=>{}),yield g.Rt,v}catch(g){const v="FirebaseError"!==g.name&&d<3;if(Be("SimpleDb","Transaction failed with error:",g.message,"Retrying:",v),o.close(),!v)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class z${constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return zp(this.Ft.delete())}}class DE extends Ne{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gp(n){return"IndexedDbTransactionError"===n.name}class q${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zp(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),zp(this.store.add(e))}get(e){return zp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),zp(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),zp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.Kt(i,(u,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new me((o,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(o,u,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=o=>{const u=Ix(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const g=new z$(d),v=t(d.primaryKey,d.value,g);if(v instanceof me){const C=v.catch(D=>(g.done(),me.reject(D)));r.push(C)}g.isDone?i():null===g.Lt?d.continue():d.continue(g.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zp(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ix(r.target.error);t(i)}})}let tL=!1;function Ix(n){const e=Nl.Vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tL||(tL=!0,setTimeout(()=>{throw r},0)),r}}return n}class nL extends eL{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function xi(n,e){const t=Qe(n);return Nl.xt(t.Ht,e)}class Tx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&s$(o,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&yx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&yx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xn())}isEqual(e){return this.batchId===e.batchId&&A_(this.mutations,e.mutations,(t,r)=>T1(t,r))&&A_(this.baseMutations,e.baseMutations,(t,r)=>T1(t,r))}}class Dx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=c$;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new Dx(e,t,r,i)}}class Sx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Oh{constructor(e,t,r,i,o=Mt.min(),u=Mt.min(),d=fi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new Oh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Oh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rL{constructor(e){this.Jt=e}}function iL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ET(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:CE(i=n.Jt,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:wE(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qp(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:qp(e.version)}}var i,o;return r}function ET(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wp(n){const e=new Rr(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function U_(n,e){const t=(e.baseMutations||[]).map(o=>Cx(n.Jt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>Cx(n.Jt,o)),i=Rr.fromMillis(e.localWriteTimeMs);return new Tx(e.batchId,i,t,r)}function SE(n){const e=Wp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wp(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=Ra(N_(U1(i.documents[0])))):r=Ra(z1(n.query)),new Oh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,fi.fromBase64String(n.resumeToken))}function sL(n,e){const t=qp(e.snapshotVersion),r=qp(e.lastLimboFreeSnapshotVersion);let i;i=hT(e.target)?$1(n.Jt,e.target):G1(n.Jt,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bp(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ax(n){const e=z1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?f1(e,e.limit,"L"):e}function Mx(n,e){return new Sx(e.largestBatchId,Cx(n.Jt,e.overlayMutation))}function oL(n,e){const t=e.path.lastSegment();return[n,$s(e.path.popLast()),t]}class K${getBundleMetadata(e,t){return aL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Wp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return aL(e).put({bundleId:(r=t).id,createTime:qp(Mi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ax(i.bundledQuery),readTime:Wp(i.readTime)};var i})}saveNamedQuery(e,t){return lL(e).put({name:(r=t).name,readTime:qp(Mi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function aL(n){return xi(n,"bundles")}function lL(n){return xi(n,"namedQueries")}class xx{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new xx(e,t.uid||"")}getOverlay(e,t){return AE(e).get(oL(this.userId,t)).next(r=>r?Mx(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const d=new Sx(t,u);i.push(this.Xt(e,d))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add($s(u.getCollectionPath())));const o=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(AE(e).Qt("collectionPathOverlayIndex",d))}),me.waitFor(o)}getOverlaysForCollection(e,t,r){const i=vE(),o=$s(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return AE(e).qt("collectionPathOverlayIndex",u).next(d=>{for(const g of d){const v=Mx(this.M,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=vE();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return AE(e).Wt({index:"collectionGroupOverlayIndex",range:d},(g,v,C)=>{const D=Mx(this.M,v);o.size()<i||D.largestBatchId===u?(o.set(D.getKey(),D),u=D.largestBatchId):C.done()}).next(()=>o)}Xt(e,t){return AE(e).put(function(r,i,o){const[u,d,g]=oL(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:TE(r.Jt,o.mutation)}}(this.M,this.userId,t))}}function AE(n){return xi(n,"documentOverlays")}class Kp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Cr(e.integerValue));else if("doubleValue"in e){const r=Cr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),uE(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Fp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?XF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):pt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ke.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Z$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=Z$(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Kp.fe=new Kp;class Y${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=uL(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=uL(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Q${constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class X${constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ME{constructor(){this.De=new Y$,this.Ce=new Q$(this.De),this.xe=new X$(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Zp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zp(this.indexId,this.documentKey,this.arrayValue,r)}}function Yp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cL(n.arrayValue,e.arrayValue),0!==t?t:(t=cL(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function cL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class J${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=hx(e);if(void 0!==t&&!this.Be(t))return!1;const r=Up(e);let i=0,o=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[o++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(o>=this.Me.length||!this.Ue(this.Me[o++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class eG{constructor(){this.qe=new Rx}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(kl.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class Rx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zn(un.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(un.comparator)).toArray()}}const wT=new Uint8Array(0);class tG{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Rx,this.Ge=new Nh(r=>Bp(r),(r,i)=>pE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const o={collectionId:r,parent:$s(i)};return dL(e).put(o)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[GF(t),""],!1,!0);return dL(e).qt(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Nu(u.parent))}return r})}addFieldIndex(e,t){const r=CT(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var o;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=CT(e),i=IT(e),o=xE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xE(e);let i=!0;const o=new Map;return me.forEach(this.Qe(t),u=>this.je(e,u).next(d=>{i&&(i=!!d),o.set(u,d)})).next(()=>{if(i){let u=xn();const d=[];return me.forEach(o,(g,v)=>{var C;Be("IndexedDbIndexManager",`Using index ${C=g,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${Bp(t)}`);const D=function(ht,ot){const Lt=hx(ot);if(void 0===Lt)return null;for(const $t of fT(ht,Lt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(v,g),O=function(ht,ot){const Lt=new Map;for(const $t of Up(ot))for(const En of fT(ht,$t.fieldPath))switch(En.op){case"==":case"in":Lt.set($t.fieldPath.canonicalString(),En.value);break;case"not-in":case"!=":return Lt.set($t.fieldPath.canonicalString(),En.value),Array.from(Lt.values())}return null}(v,g),U=function(ht,ot){const Lt=[];let $t=!0;for(const En of Up(ot)){const Ks=0===En.kind?a1(ht,En.fieldPath,ht.startAt):l1(ht,En.fieldPath,ht.startAt);Lt.push(Ks.value),$t&&($t=Ks.inclusive)}return new kh(Lt,$t)}(v,g),j=function(ht,ot){const Lt=[];let $t=!0;for(const En of Up(ot)){const Ks=0===En.kind?l1(ht,En.fieldPath,ht.endAt):a1(ht,En.fieldPath,ht.endAt);Lt.push(Ks.value),$t&&($t=Ks.inclusive)}return new kh(Lt,$t)}(v,g),te=this.We(g,v,U),ve=this.We(g,v,j),Je=this.ze(g,v,O),st=this.He(g.indexId,D,te,U.inclusive,ve,j.inclusive,Je);return me.forEach(st,ht=>r.Gt(ht,t.limit).next(ot=>{ot.forEach(Lt=>{const $t=Ke.fromSegments(Lt.documentKey);u.has($t)||(u=u.add($t),d.push($t))})}))}).next(()=>d)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,o,u,d){const g=(null!=t?t.length:1)*Math.max(r.length,o.length),v=g/(null!=t?t.length:1),C=[];for(let D=0;D<g;++D){const O=t?this.Je(t[D/v]):wT,U=this.Ye(e,O,r[D%v],i),j=this.Xe(e,O,o[D%v],u),te=d.map(ve=>this.Ye(e,O,ve,!0));C.push(...this.createRange(U,j,te))}return C}Ye(e,t,r,i){const o=new Zp(e,Ke.empty(),t,r);return i?o:o.ke()}Xe(e,t,r,i){const o=new Zp(e,Ke.empty(),t,r);return i?o.ke():o}je(e,t){const r=new J$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const d of o)r.$e(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Zn(hi.comparator),g=!1;for(const v of u.filters){const C=v;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?g=!0:d=d.add(C.field))}for(const v of u.orderBy)v.field.isKeyField()||(d=d.add(v.field));return d.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new ME;for(const i of Up(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.Ne(i.kind);Kp.fe.Zt(o,u)}return r.Se()}Je(e){const t=new ME;return Kp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new ME;return Kp.fe.Zt(Vp(this.databaseId,t),r.Ne(function(i){const o=Up(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new ME);let o=0;for(const u of Up(e)){const d=r[o++];for(const g of i)if(this.en(t,u.fieldPath)&&dE(d))i=this.nn(i,u,d);else{const v=g.Ne(u.kind);Kp.fe.Zt(d,v)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const d of i){const g=new ME;g.seed(d.Se()),Kp.fe.Zt(u,g.Ne(t.kind)),o.push(g)}return o}en(e,t){return!!e.filters.find(r=>r instanceof rs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=CT(e),i=IT(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(o=>{const u=[];return me.forEach(o,d=>i.get([d.indexId,this.uid]).next(g=>{u.push(function(v,C){const D=C?new fE(C.sequenceNumber,new kl(Wp(C.readTime),new Ke(Nu(C.documentKey)),C.largestBatchId)):fE.empty(),O=v.fields.map(([U,j])=>new cT(hi.fromServerFormat(U),j));return new uT(v.indexId,v.collectionGroup,O,D)}(d,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=CT(e),o=IT(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>me.forEach(d,g=>{return o.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:qp((O=r).readTime),documentKey:$s(O.documentKey.path),largestBatchId:O.largestBatchId});var O})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?me.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),me.forEach(d,g=>this.on(e,i,g).next(v=>{const C=this.un(o,g);return v.isEqual(C)?me.resolve():this.an(e,o,g,v,C)}))))})}cn(e,t,r,i){return xE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return xE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=xE(e);let o=new Zn(Yp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,d)=>{o=o.add(new Zp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>o)}un(e,t){let r=new Zn(Yp);const i=this.Ze(t,e);if(null==i)return r;const o=hx(t);if(null!=o){const u=e.data.field(o.fieldPath);if(dE(u))for(const d of u.arrayValue.values||[])r=r.add(new Zp(t.indexId,e.key,this.Je(d),i))}else r=r.add(new Zp(t.indexId,e.key,wT,i));return r}an(e,t,r,i,o){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,g,v,C,D){const O=d.getIterator(),U=g.getIterator();let j=R_(O),te=R_(U);for(;j||te;){let ve=!1,Je=!1;if(j&&te){const st=v(j,te);st<0?Je=!0:st>0&&(ve=!0)}else null!=j?Je=!0:ve=!0;ve?(C(te),te=R_(U)):Je?(D(j),j=R_(O)):(j=R_(O),te=R_(U))}}(i,o,Yp,d=>{u.push(this.cn(e,t,r,d))},d=>{u.push(this.hn(e,t,r,d))}),me.waitFor(u)}rn(e){let t=1;return IT(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Yp(u,d)).filter((u,d,g)=>!d||0!==Yp(u,g[d-1]));const i=[];i.push(e);for(const u of r){const d=Yp(u,e),g=Yp(u,t);if(0===d)i[0]=e.ke();else if(d>0&&g<0)i.push(u),i.push(u.ke());else if(g>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2)o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,wT,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,wT,[]]));return o}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(o=>{o?(!r||r1(o.indexState.offset,r)<0)&&(r=o.indexState.offset):r=kl.min()})).next(()=>r)}}function dL(n){return xi(n,"collectionParents")}function xE(n){return xi(n,"indexEntries")}function CT(n){return xi(n,"indexConfiguration")}function IT(n){return xi(n,"indexState")}const hL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Eo(e,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let d=0;const g=r.Wt({range:u},(C,D,O)=>(d++,O.delete()));o.push(g.next(()=>{Ft(1===d)}));const v=[];for(const C of t.mutations){const D=Y1(e,C.key.path,t.batchId);o.push(i.delete(D)),v.push(C.key)}return me.waitFor(o).next(()=>v)}function TT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}Eo.DEFAULT_COLLECTION_PERCENTILE=10,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eo.DEFAULT=new Eo(41943040,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eo.DISABLED=new Eo(-1,0,0);class kx{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ft(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new kx(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ph(e).Wt({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=B_(e),u=Ph(e);return u.add({}).next(d=>{Ft("number"==typeof d);const g=new Tx(d,t,r,i),v=function(O,U,j){const te=j.baseMutations.map(Je=>TE(O.Jt,Je)),ve=j.mutations.map(Je=>TE(O.Jt,Je));return{userId:U,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:te,mutations:ve}}(this.M,this.userId,g),C=[];let D=new Zn((O,U)=>Ht(O.canonicalString(),U.canonicalString()));for(const O of i){const U=Y1(this.userId,O.key.path,d);D=D.add(O.key.path.popLast()),C.push(u.put(v)),C.push(o.put(U,A$))}return D.forEach(O=>{C.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.ln[d]=g.keys()}),me.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return Ph(e).get(t).next(r=>r?(Ft(r.userId===this.userId),U_(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ph(e).Wt({index:"userMutationsIndex",range:i},(u,d,g)=>{d.userId===this.userId&&(Ft(d.batchId>=r),o=U_(this.M,d)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ph(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ph(e).qt("userMutationsIndex",t).next(r=>r.map(i=>U_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return B_(e).Wt({range:i},(u,d,g)=>{const[v,C,D]=u,O=Nu(C);if(v===this.userId&&t.path.isEqual(O))return Ph(e).get(D).next(U=>{if(!U)throw pt();Ft(U.userId===this.userId),o.push(U_(this.M,U))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Ht);const i=[];return t.forEach(o=>{const u=vT(this.userId,o.path),d=IDBKeyRange.lowerBound(u),g=B_(e).Wt({range:d},(v,C,D)=>{const[O,U,j]=v,te=Nu(U);O===this.userId&&o.path.isEqual(te)?r=r.add(j):D.done()});i.push(g)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=vT(this.userId,r),u=IDBKeyRange.lowerBound(o);let d=new Zn(Ht);return B_(e).Wt({range:u},(g,v,C)=>{const[D,O,U]=g,j=Nu(O);D===this.userId&&r.isPrefixOf(j)?j.length===i&&(d=d.add(U)):C.done()}).next(()=>this.dn(e,d))}dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Ph(e).get(o).next(u=>{if(null===u)throw pt();Ft(u.userId===this.userId),r.push(U_(this.M,u))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fL(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return B_(e).Wt({range:r},(o,u,d)=>{if(o[0]===this.userId){const g=Nu(o[1]);i.push(g)}else d.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return pL(e,this.userId,t)}wn(e){return mL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pL(n,e,t){const r=vT(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return B_(n).Wt({range:o,jt:!0},(d,g,v)=>{const[C,D,O]=d;C===e&&D===i&&(u=!0),v.done()}).next(()=>u)}function Ph(n){return xi(n,"mutations")}function B_(n){return xi(n,"documentMutations")}function mL(n){return xi(n,"mutationQueues")}class Qp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Qp(0)}static yn(){return new Qp(-1)}}class nG{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Qp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Mt.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>j_(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return j_(e).Wt((u,d)=>{const g=SE(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(e,g)))}).next(()=>me.waitFor(o)).next(()=>i)}forEachTarget(e,t){return j_(e).Wt((r,i)=>{const o=SE(i);t(o)})}pn(e){return gL(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}In(e,t){return gL(e).put("targetGlobalKey",t)}Tn(e,t){return j_(e).put(sL(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return j_(e).Wt({range:i,index:"queryTargetsIndex"},(u,d,g)=>{const v=SE(d);pE(t,v.target)&&(o=v,g.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Fh(e);return t.forEach(u=>{const d=$s(u.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=Fh(e);return me.forEach(t,o=>{const u=$s(o.path);return me.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Fh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Fh(e);let o=xn();return i.Wt({range:r,jt:!0},(u,d,g)=>{const v=Nu(u[1]),C=new Ke(v);o=o.add(C)}).next(()=>o)}containsKey(e,t){const r=$s(t.path),i=IDBKeyRange.bound([r],[GF(r)],!1,!0);let o=0;return Fh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,d],g,v)=>{0!==u&&(o++,v.done())}).next(()=>o>0)}Et(e,t){return j_(e).get(t).next(r=>r?SE(r):null)}}function j_(n){return xi(n,"targets")}function gL(n){return xi(n,"targetGlobal")}function Fh(n){return xi(n,"targetDocuments")}function Xp(n){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,Ce.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==J1)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),Nx.apply(this,arguments)}function _L([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class rG{constructor(e){this.An=e,this.buffer=new Zn(_L),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_L(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iG{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Gp(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Xp(i)}yield t.Sn(e)}))}}class sG{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(ra.A);const r=new rG(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(hL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hL):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,o,u,d,g,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(o=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(v=Date.now(),ax()<=ea.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${o} targets in `+(g-d)+`ms\n\tRemoved ${D} documents in `+(v-g)+`ms\nTotal Duration: ${v-C}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:D})))}}class oG{constructor(e,t){this.db=e,this.garbageCollector=new sG(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return DT(e,r)}removeReference(e,t,r){return DT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return DT(e,t)}On(e,t){return function(r,i){let o=!1;return mL(r).zt(u=>pL(r,u,i).next(d=>(d&&(o=!0),me.resolve(!d)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Mn(e,(u,d)=>{if(d<=t){const g=this.On(e,u).next(v=>{if(!v)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Mt.min()),Fh(e).delete([0,$s(u.path)])))});i.push(g)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return DT(e,t)}Mn(e,t){const r=Fh(e);let i,o=ra.A;return r.Wt({index:"documentTargetsIndex"},([u,d],{path:g,sequenceNumber:v})=>{0===u?(o!==ra.A&&t(new Ke(Nu(i)),o),o=v,i=g):o=ra.A}).next(()=>{o!==ra.A&&t(new Ke(Nu(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function DT(n,e){return Fh(n).put((r=n.currentSequenceNumber,{targetId:0,path:$s(e.path),sequenceNumber:r}));var r}class yL{constructor(){this.changes=new Nh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aG{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Jp(e).put(r)}removeEntry(e,t,r){return Jp(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],ET(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=nr.newInvalidDocument(t);return Jp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(RE(t))},(i,o)=>{r=this.$n(t,o)}).next(()=>r)}Bn(e,t){let r={size:0,document:nr.newInvalidDocument(t)};return Jp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(RE(t))},(i,o)=>{r={document:this.$n(t,o),size:TT(o)}}).next(()=>r)}getEntries(e,t){let r=ka();return this.Ln(e,t,(i,o)=>{const u=this.$n(i,o);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=ka(),i=new kr(Ke.comparator);return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d),i=i.insert(o,TT(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new Zn(EL);t.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(RE(i.first()),RE(i.last())),u=i.getIterator();let d=u.getNext();return Jp(e).Wt({index:"documentKeyIndex",range:o},(g,v,C)=>{const D=Ke.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&EL(d,D)<0;)r(d,null),d=u.getNext();d&&d.isEqual(D)&&(r(d,v),d=u.hasNext()?u.getNext():null),d?C.Ut(RE(d)):C.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ET(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jp(e).qt(IDBKeyRange.bound(i,o,!0)).next(u=>{let d=ka();for(const g of u){const v=this.$n(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(e,t,r,i){let o=ka();const u=bL(t,r),d=bL(t,kl.max());return Jp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(g,v,C)=>{const D=this.$n(Ke.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);o=o.insert(D.key,D),o.size===i&&C.done()}).next(()=>o)}newChangeBuffer(e){return new lG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vL(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Fn(e,t){return vL(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=H1(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Wp(e.noDocument.readTime);t=nr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=Ke.fromSegments(e.unknownDocument.path),i=Wp(e.unknownDocument.version);t=nr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Rr(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return nr.newInvalidDocument(e)}}class lG extends yL{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Nh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Zn((o,u)=>Ht(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const d=this.Gn.get(o);if(t.push(this.Kn.removeEntry(e,o,d.readTime)),u.isValidDocument()){const g=iL(this.Kn.M,u);i=i.add(o.path.popLast()),r+=TT(g)-d.size,t.push(this.Kn.addEntry(e,o,g))}else if(r-=d.size,this.trackRemovals){const g=iL(this.Kn.M,u.convertToNoDocument(Mt.min()));t.push(this.Kn.addEntry(e,o,g))}}),i.forEach(o=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((o,u)=>{this.Gn.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function vL(n){return xi(n,"remoteDocumentGlobal")}function Jp(n){return xi(n,"remoteDocumentsV14")}function RE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bL(n,e){const t=e.documentKey.path.toArray();return[n,ET(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function EL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Ht(t[o],r[o]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class uG{constructor(e){this.M=e}kt(e,t,r,i){const o=new bT("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z1,{unique:!0}),d.createObjectStore("documentMutations"),wL(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=me.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),wL(e)),u=u.next(()=>function(d){const g=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,g){return g.store("mutations").qt().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z1,{unique:!0});const C=g.store("mutations"),D=v.map(O=>C.put(O));return me.waitFor(D)})}(e,o))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(o))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(o)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(o))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(o))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:B$});g.createIndex("collectionPathOverlayIndex",j$,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",H$,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:M$});g.createIndex("documentKeyIndex",x$),g.createIndex("collectionGroupIndex",R$)}(e)).next(()=>this.Jn(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:F$}).createIndex("sequenceNumberIndex",L$,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:V$}).createIndex("documentKeyIndex",U$,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=TT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(d=>me.forEach(d,g=>{Ft(g.userId===o.userId);const v=U_(this.M,g);return fL(e,o.userId,v).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Wt((u,d)=>{const g=new un(u),v=[0,$s(g)];o.push(t.get(v).next(C=>C?me.resolve():t.put({targetId:0,path:$s(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(o))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:P$});const r=t.store("collectionParents"),i=new Rx,o=u=>{if(i.add(u)){const d=u.lastSegment(),g=u.popLast();return r.put({collectionId:d,parent:$s(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,d)=>{const g=new un(u);return o(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,d,g],v)=>{const C=Nu(d);return o(C.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const o=SE(i),u=sL(this.M,o);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((o,u)=>{const d=t.store("remoteDocumentsV14"),g=(v=u,v.document?new Ke(un.fromString(v.document.name).popFirst(5)):v.noDocument?Ke.fromSegments(v.noDocument.path):v.unknownDocument?Ke.fromSegments(v.unknownDocument.path):pt()).path.toArray();var v;const C={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(C))}).next(()=>me.waitFor(i))}}function wL(n){n.createObjectStore("targetDocuments",{keyPath:N$}).createIndex("documentTargetsIndex",O$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",k$,{unique:!0}),n.createObjectStore("targetGlobal")}const Ox="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Px{constructor(e,t,r,i,o,u,d,g,v,C,D=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=o,this.window=u,this.document=d,this.Xn=v,this.Zn=C,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=O=>Promise.resolve(),!Px.vt())throw new Ne(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oG(this,i),this.hs=t+"main",this.M=new rL(g),this.ls=new Nl(this.hs,this.ts,new uG(this.M)),this.fs=new nG(this.referenceDelegate,this.M),this.ds=new aG(this.M),this._s=new K$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(pe.FAILED_PRECONDITION,Ox);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ra(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ST(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Gp(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return kE(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return ST(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xi(r,"clientMetadata");return i.qt().next(o=>{const u=e.Ds(o,18e5),d=o.filter(g=>-1===u.indexOf(g));return me.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):kE(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Ne(pe.FAILED_PRECONDITION,Ox);return!1}}return!(!this.networkEnabled||!this.inForeground)||ST(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new nL(t,ra.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ST(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return kx.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new tG(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return xx.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=14===(u=this.ts)?G$:13===u?X1:12===u?$$:11===u?Q1:void pt();var u;let d;return this.ls.runTransaction(e,i,o,g=>(d=new nL(g,this.es?this.es.next():ra.A),"readwrite-primary"===t?this.Es(d).next(v=>!!v||this.As(d)).next(v=>{if(!v)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ne(pe.FAILED_PRECONDITION,J1);return r(d)}).next(v=>this.bs(d).next(()=>v)):this.$s(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}$s(e){return kE(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(pe.FAILED_PRECONDITION,Ox)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kE(e).put("owner",t)}static vt(){return Nl.vt()}Rs(e){const t=kE(e);return t.get("owner").next(r=>this.Ps(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kE(n){return xi(n,"owner")}function ST(n){return xi(n,"clientMetadata")}function Fx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cG{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const o of r)o.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const o of t)o.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):mx(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Ke(t)).next(r=>{let i=bx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let o=bx();return this.indexManager.getCollectionParents(e,i).next(u=>me.forEach(u,d=>{const g=(v=t,C=d.child(i),new Qc(C,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,C;return this.zs(e,g,r).next(v=>{v.forEach((C,D)=>{o=o.insert(C,D)})})}).next(()=>o))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(o=>{for(const u of o)for(const d of u.mutations){const g=d.key;let v=i.get(g);null==v&&(v=nr.newInvalidDocument(g),i=i.insert(g,v)),yx(d,v,u.localWriteTime),v.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((o,u)=>{_x(t,u)||(i=i.remove(o))}),i))}}class Lx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=xn(),i=xn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Lx(e,t.fromCache,r,i)}}class CL{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(o=>o||this.ei(e,t,i,r)).next(o=>o||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Mt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(o=>{const u=this.si(t,o);return this.ii(t,u,r,i)?this.ni(e,t):(ax()<=ea.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gx(t)),this.ri(e,u,t,n1(i,-1)))})}si(e,t){let r=new Zn(g1(e));return t.forEach((i,o)=>{_x(e,o)&&(r=r.add(o))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ni(e,t){return ax()<=ea.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",gx(t)),this.Zs.Qs(e,t,kl.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class dG{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new kr(Ht),this.ai=new Nh(o=>Bp(o),pE),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new cG(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function IL(n,e,t,r){return new dG(n,e,t,r)}function TL(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Ce.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(o=>(i=o,t.li(e),t.Bs.getAllMutationBatches(r))).next(o=>{const u=[],d=[];let g=xn();for(const v of i){u.push(v.batchId);for(const C of v.mutations)g=g.add(C.key)}for(const v of o){d.push(v.batchId);for(const C of v.mutations)g=g.add(C.key)}return t.fi.Ks(r,g).next(v=>({di:v,removedBatchIds:u,addedBatchIds:d}))})})}),Vx.apply(this,arguments)}function hG(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.hi.newChangeBuffer({trackRemovals:!0});return function(u,d,g,v){const C=g.batch,D=C.keys();let O=me.resolve();return D.forEach(U=>{O=O.next(()=>v.getEntry(d,U)).next(j=>{const te=g.docVersions.get(U);Ft(null!==te),j.version.compareTo(te)<0&&(C.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))})}),O.next(()=>u.Bs.removeMutationBatch(d,C))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function DL(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function fG(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const d=[];e.targetChanges.forEach((v,C)=>{const D=i.get(C);if(!D)return;d.push(t.fs.removeMatchingKeys(o,v.removedDocuments,C).next(()=>t.fs.addMatchingKeys(o,v.addedDocuments,C)));let O=D.withSequenceNumber(o.currentSequenceNumber);var U,j,te;e.targetMismatches.has(C)?O=O.withResumeToken(fi.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,r)),i=i.insert(C,O),j=O,te=v,(0===(U=D).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(o,O))});let g=ka();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))}),d.push(SL(o,u,e.documentUpdates).next(v=>{g=v})),!r.isEqual(Mt.min())){const v=t.fs.getLastRemoteSnapshotVersion(o).next(C=>t.fs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(v)}return me.waitFor(d).next(()=>u.apply(o)).next(()=>t.fi.Gs(o,g)).next(()=>g)}).then(o=>(t.ui=i,o))}function SL(n,e,t){let r=xn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=ka();return t.forEach((u,d)=>{const g=i.get(u);d.isNoDocument()&&d.version.isEqual(Mt.min())?(e.removeEntry(u,d.readTime),o=o.insert(u,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||0===d.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(d),o=o.insert(u,d)):Be("LocalStore","Ignoring outdated watch update for ",u,". Current version:",g.version," Watch version:",d.version)}),o})}function pG(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function H_(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(o=>o?(i=o,me.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new Oh(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function $_(n,e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,Ce.Z)(function*(n,e,t){const r=Qe(n),i=r.ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Gp(u))throw u;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),Ux.apply(this,arguments)}function AT(n,e,t){const r=Qe(n);let i=Mt.min(),o=xn();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,g,v){const C=Qe(d),D=C.ai.get(v);return void 0!==D?me.resolve(C.ui.get(D)):C.fs.getTargetData(g,v)}(r,u,Ra(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,d.targetId).next(g=>{o=g})}).next(()=>r.oi.Qs(u,e,t?i:Mt.min(),t?o:xn())).next(d=>(xL(r,m1(e),d),{documents:d,_i:o})))}function AL(n,e){const t=Qe(n),r=Qe(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(u=>u?u.target:null))}function ML(n,e){const t=Qe(n),r=t.ci.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,n1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xL(t,e,i),i))}function xL(n,e,t){let r=Mt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ci.set(e,r)}function Bx(){return Bx=(0,Ce.Z)(function*(n,e,t,r){const i=Qe(n);let o=xn(),u=ka();for(const v of t){const C=e.wi(v.metadata.name);v.document&&(o=o.add(C));const D=e.mi(v);D.setReadTime(e.gi(v.metadata.readTime)),u=u.insert(C,D)}const d=i.hi.newChangeBuffer({trackRemovals:!0}),g=yield H_(i,(v=r,Ra(N_(un.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>SL(v,d,u).next(C=>(d.apply(v),C)).next(C=>i.fs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.fs.addMatchingKeys(v,o,g.targetId)).next(()=>i.fi.Gs(v,C)).next(()=>C)))}),Bx.apply(this,arguments)}function gG(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,Ce.Z)(function*(n,e,t=xn()){const r=yield H_(n,Ra(Ax(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=Mi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(o,e);const d=r.withResumeToken(fi.EMPTY_BYTE_STRING,u);return i.ui=i.ui.insert(d.targetId,d),i.fs.updateTargetData(o,d).next(()=>i.fs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.fs.addMatchingKeys(o,t,r.targetId)).next(()=>i._s.saveNamedQuery(o,e))})}),jx.apply(this,arguments)}class _G{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Mi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Ax(r.bundledQuery),readTime:Mi(r.readTime)}),me.resolve();var r}}class yG{constructor(){this.overlays=new kr(Ke.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Xt(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=vE(),o=t.length+1,u=new Ke(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new kr((v,C)=>v-C);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=o.get(v.largestBatchId);null===C&&(C=vE(),o=o.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const d=vE(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,C)=>d.set(v,C)),!(d.size()>=i)););return me.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Sx(t,r));let o=this.Ii.get(t);void 0===o&&(o=xn(),this.Ii.set(t,o)),this.Ii.set(t,o.add(r.key))}}class Hx{constructor(){this.Ti=new Zn(Ri.Ei),this.Ai=new Zn(Ri.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ri(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ri(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ke(new un([])),r=new Ri(t,e),i=new Ri(t,e+1),o=[];return this.Ai.forEachInRange([r,i],u=>{this.Pi(u),o.push(u.key)}),o}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ke(new un([])),r=new Ri(t,e),i=new Ri(t,e+1);let o=xn();return this.Ai.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Ri(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ri{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ke.comparator(e.key,t.key)||Ht(e.Ci,t.Ci)}static Ri(e,t){return Ht(e.Ci,t.Ci)||Ke.comparator(e.key,t.key)}}class vG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Zn(Ri.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const o=this.xi;this.xi++;const u=new Tx(o,t,r,i);this.Bs.push(u);for(const d of i)this.Ni=this.Ni.add(new Ri(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),o=i<0?0:i;return me.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ri(t,0),i=new Ri(t,Number.POSITIVE_INFINITY),o=[];return this.Ni.forEachInRange([r,i],u=>{const d=this.ki(u.Ci);o.push(d)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Ht);return t.forEach(i=>{const o=new Ri(i,0),u=new Ri(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([o,u],d=>{r=r.add(d.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const u=new Ri(new Ke(o),0);let d=new Zn(Ht);return this.Ni.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(d=d.add(g.Ci)),!0)},u),me.resolve(this.Oi(d))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const o=new Ri(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ri(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class bG{constructor(e){this.$i=e,this.docs=new kr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let r=ka();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nr.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=ka();const o=new Ke(t.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||r1(HH(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EG(this)}getSize(e){return me.resolve(this.size)}}class EG extends yL{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class wG{constructor(e){this.persistence=e,this.Li=new Nh(t=>Bp(t),pE),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Hx,this.targetCount=0,this.Ki=Qp.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Qp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Li.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Li.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),me.waitFor(o).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class CG{constructor(e,t){this.Gi={},this.overlays={},this.es=new ra(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new wG(this),this.indexManager=new eG,this.ds=new bG(r=>this.referenceDelegate.Qi(r)),this.M=new rL(t),this._s=new _G(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new vG(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new IG(this.es.next());return this.referenceDelegate.ji(),r(i).next(o=>this.referenceDelegate.Wi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class IG extends eL{constructor(e){super(),this.currentSequenceNumber=e}}class $x{constructor(e){this.persistence=e,this.Hi=new Hx,this.Ji=null}static Yi(e){return new $x(e)}get Xi(){if(this.Ji)return this.Ji;throw pt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=Ke.fromPath(r);return this.Zi(e,i).next(o=>{o||t.removeEntry(i,Mt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function RL(n,e){return`firestore_clients_${n}_${e}`}function kL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gx(n,e){return`firestore_targets_${n}_${e}`}class MT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new Ne(i.error.code,i.error.message))),u?new MT(e,t,i.state,o):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class NE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ne(r.error.code,r.error.message))),o?new NE(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=_T();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=KF(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new xT(e,o):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zx{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zx(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qx{constructor(){this.activeTargetIds=_T()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wx{constructor(e,t,r,i,o){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new kr(Ht),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.hr=RL(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new qx),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const o=e.getItem(RL(e.persistenceKey,i));if(o){const u=xT.tr(i,o);u&&(e.ar=e.ar.insert(u.clientId,u))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Gx(this.persistenceKey,e));if(r){const i=NE.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gx(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(o){let u=ra.A;if(null!=o)try{const d=JSON.parse(o);Ft("number"==typeof d),u=d}catch(d){zr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==ra.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Fr(o)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new MT(this.currentUser,e,t,r),o=kL(this.persistenceKey,this.currentUser,e);this.setItem(o,i.er())}Ar(e){const t=kL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=Gx(this.persistenceKey,e),o=new NE(e,t,r);this.setItem(i,o.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return xT.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return MT.tr(new ts(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return NE.tr(i,t)}pr(e){return zx.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),o=this.Tr(r),u=[],d=[];return o.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{o.has(g)||d.push(g)}),this.syncEngine.Lr(u,d).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=_T();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class NL{constructor(){this.Ur=new qx,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new qx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TG{Kr(e){}shutdown(){}}class OL{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const DG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class SG{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class AG extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,o){const u=this.ho(e,t);Be("RestConnection","Sending: ",u,r);const d={};return this.lo(d,i,o),this.fo(e,u,d,r).then(g=>(Be("RestConnection","Received: ",g),g),g=>{throw sE("RestConnection",`${e} failed with error: `,g,"url: ",u,"request:",r),g})}_o(e,t,r,i,o){return this.co(e,t,r,i,o)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+S_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ho(e,t){return`${this.uo}/v1/${t}:${DG[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((o,u)=>{const d=new DH;d.listenOnce(CH.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ox.NO_ERROR:const v=d.getResponseJson();Be("Connection","XHR received:",JSON.stringify(v)),o(v);break;case ox.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),u(new Ne(pe.DEADLINE_EXCEEDED,"Request time out"));break;case ox.HTTP_ERROR:const C=d.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const O=function(U){const j=U.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(j)>=0?j:pe.UNKNOWN}(D.status);u(new Ne(O,D.message))}else u(new Ne(pe.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ne(pe.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EH(),u=wH(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new TH({})),this.lo(d.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Be("Connection","Creating WebChannel: "+g,d);const v=o.createWebChannel(g,d);let C=!1,D=!1;const O=new SG({Jr:j=>{D?Be("Connection","Not sending because WebChannel is closed:",j):(C||(Be("Connection","Opening WebChannel transport."),v.open(),C=!0),Be("Connection","WebChannel sending:",j),v.send(j))},Yr:()=>v.close()}),U=(j,te,ve)=>{j.listen(te,Je=>{try{ve(Je)}catch(st){setTimeout(()=>{throw st},0)}})};return U(v,oT.EventType.OPEN,()=>{D||Be("Connection","WebChannel transport opened.")}),U(v,oT.EventType.CLOSE,()=>{D||(D=!0,Be("Connection","WebChannel transport closed"),O.ro())}),U(v,oT.EventType.ERROR,j=>{D||(D=!0,sE("Connection","WebChannel transport errored:",j),O.ro(new Ne(pe.UNAVAILABLE,"The operation could not be completed")))}),U(v,oT.EventType.MESSAGE,j=>{var te;if(!D){const ve=j.data[0];Ft(!!ve);const Je=ve,st=Je.error||(null===(te=Je[0])||void 0===te?void 0:te.error);if(st){Be("Connection","WebChannel received error:",st);const ht=st.status;let ot=function($t){const En=Wr[$t];if(void 0!==En)return R1(En)}(ht),Lt=st.message;void 0===ot&&(ot=pe.INTERNAL,Lt="Unknown error status: "+ht+" with message "+st.message),D=!0,O.ro(new Ne(ot,Lt)),v.close()}else Be("Connection","WebChannel received:",ve),O.oo(ve)}}),U(u,IH.STAT_EVENT,j=>{j.stat===UF.PROXY?Be("Connection","Detected buffering proxy"):j.stat===UF.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.io()},0),O}}function PL(){return"undefined"!=typeof window?window:null}function RT(){return"undefined"!=typeof document?document:null}function OE(n){return new g$(n,!0)}class Kx{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class FL{constructor(e,t,r,i,o,u,d,g){this.Yn=e,this.Vo=r,this.vo=i,this.So=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Kx(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ce.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Ne(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MG extends FL{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=o}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:pt(),i=e.targetChange.targetIds||[],o=function(g,v){return g.N?(Ft(void 0===v||"string"==typeof v),fi.fromBase64String(v||"")):(Ft(void 0===v||v instanceof Uint8Array),fi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const v=void 0===g.code?pe.UNKNOWN:R1(g.code);return new Ne(v,g.message||"")}(u);t=new N1(r,i,o,d||null)}else if("documentChange"in e){const r=e.documentChange,i=ku(n,r.document.name),o=Mi(r.document.updateTime),u=new ws({mapValue:{fields:r.document.fields}}),d=nr.newFoundDocument(i,o,u);t=new yT(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=ku(n,r.document),o=r.readTime?Mi(r.readTime):Mt.min(),u=nr.newNoDocument(i,o);t=new yT([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=ku(n,r.document);t=new yT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,o=new a$(r.count||0);t=new k1(r.targetId,o)}}var g;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Mt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Mt.min():o.readTime?Mi(o.readTime):Mt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=IE(this.M),t.addTarget=function(i,o){let u;const d=o.target;return u=hT(d)?{documents:$1(i,d)}:{query:G1(i,d)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?u.resumeToken=L1(i,o.resumeToken):o.snapshotVersion.compareTo(Mt.min())>0&&(u.readTime=wE(i,o.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=IE(this.M),t.removeTarget=e,this.Lo(t)}}class xG extends FL{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=o,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let o=Mi(r.updateTime?r.updateTime:i);return o.isEqual(Mt.min())&&(o=Mi(i)),new i$(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.tu(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=IE(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>TE(this.M,r))};this.Lo(t)}}class RG extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So.co(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(pe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So._o(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(pe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class kG{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(zr(t),this.uu=!1):Be("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class NG{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.Kr(d=>{r.enqueueAndForget((0,Ce.Z)(function*(){var g;Lh(u)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ce.Z)(function*(v){const C=Qe(v);C.wu.add(4),yield G_(C),C.yu.set("Unknown"),C.wu.delete(4),yield PE(C)}),function(v){return g.apply(this,arguments)})(u))}))}),this.yu=new kG(r,i)}}function PE(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ce.Z)(function*(n){if(Lh(n))for(const e of n.mu)yield e(!0)}),Zx.apply(this,arguments)}function G_(n){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,Ce.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Yx.apply(this,arguments)}function kT(n,e){const t=Qe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Jx(t)?Xx(t):q_(t).Mo()&&Qx(t,e))}function FE(n,e){const t=Qe(n),r=q_(t);t._u.delete(e),r.Mo()&&LL(t,e),0===t._u.size&&(r.Mo()?r.$o():Lh(t)&&t.yu.set("Unknown"))}function Qx(n,e){n.pu.Z(e.targetId),q_(n).Ho(e)}function LL(n,e){n.pu.Z(e),q_(n).Jo(e)}function Xx(n){n.pu=new f$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),q_(n).start(),n.yu.au()}function Jx(n){return Lh(n)&&!q_(n).ko()&&n._u.size>0}function Lh(n){return 0===Qe(n).wu.size}function VL(n){n.pu=void 0}function OG(n){return eR.apply(this,arguments)}function eR(){return eR=(0,Ce.Z)(function*(n){n._u.forEach((e,t)=>{Qx(n,e)})}),eR.apply(this,arguments)}function PG(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,Ce.Z)(function*(n,e){VL(n),Jx(n)?(n.yu.lu(e),Xx(n)):n.yu.set("Unknown")}),tR.apply(this,arguments)}function FG(n,e,t){return nR.apply(this,arguments)}function nR(){return nR=(0,Ce.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof N1&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,o){const u=o.cause;for(const d of o.targetIds)i._u.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i._u.delete(d),i.pu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield NT(n,r)}else if(e instanceof yT?n.pu.ut(e):e instanceof k1?n.pu._t(e):n.pu.ht(e),!t.isEqual(Mt.min()))try{const r=yield DL(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.pu.yt(o);return u.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const v=i._u.get(g);v&&i._u.set(g,v.withResumeToken(d.resumeToken,o))}}),u.targetMismatches.forEach(d=>{const g=i._u.get(d);if(!g)return;i._u.set(d,g.withResumeToken(fi.EMPTY_BYTE_STRING,g.snapshotVersion)),LL(i,d);const v=new Oh(g.target,d,1,g.sequenceNumber);Qx(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield NT(n,r)}var r}),nR.apply(this,arguments)}function NT(n,e,t){return rR.apply(this,arguments)}function rR(){return rR=(0,Ce.Z)(function*(n,e,t){if(!Gp(e))throw e;n.wu.add(1),yield G_(n),n.yu.set("Offline"),t||(t=()=>DL(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield PE(n)}))}),rR.apply(this,arguments)}function UL(n,e){return e().catch(t=>NT(n,t,e))}function z_(n){return iR.apply(this,arguments)}function iR(){return iR=(0,Ce.Z)(function*(n){const e=Qe(n),t=Vh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;LG(e);)try{const i=yield pG(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,VG(e,i)}catch(i){yield NT(e,i)}BL(e)&&jL(e)}),iR.apply(this,arguments)}function LG(n){return Lh(n)&&n.du.length<10}function VG(n,e){n.du.push(e);const t=Vh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function BL(n){return Lh(n)&&!Vh(n).ko()&&n.du.length>0}function jL(n){Vh(n).start()}function UG(n){return sR.apply(this,arguments)}function sR(){return sR=(0,Ce.Z)(function*(n){Vh(n).nu()}),sR.apply(this,arguments)}function BG(n){return oR.apply(this,arguments)}function oR(){return oR=(0,Ce.Z)(function*(n){const e=Vh(n);for(const t of n.du)e.Zo(t.mutations)}),oR.apply(this,arguments)}function jG(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=(0,Ce.Z)(function*(n,e,t){const r=n.du.shift(),i=Dx.from(r,e,t);yield UL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield z_(n)}),aR.apply(this,arguments)}function HG(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,Ce.Z)(function*(n,e){var t;e&&Vh(n).Xo&&(yield(t=(0,Ce.Z)(function*(r,i){if(x1(o=i.code)&&o!==pe.ABORTED){const u=r.du.shift();Vh(r).Fo(),yield UL(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield z_(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),BL(n)&&jL(n)}),lR.apply(this,arguments)}function HL(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,Ce.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Lh(t);t.wu.add(3),yield G_(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield PE(t)}),uR.apply(this,arguments)}function cR(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,Ce.Z)(function*(n,e){const t=Qe(n);e?(t.wu.delete(2),yield PE(t)):e||(t.wu.add(2),yield G_(t),t.yu.set("Unknown"))}),dR.apply(this,arguments)}function q_(n){return n.Iu||(n.Iu=function(e,t,r){const i=Qe(e);return i.iu(),new MG(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:OG.bind(null,n),eo:PG.bind(null,n),zo:FG.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Iu.Fo(),Jx(n)?Xx(n):n.yu.set("Unknown")):(yield n.Iu.stop(),VL(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Vh(n){return n.Tu||(n.Tu=function(e,t,r){const i=Qe(e);return i.iu(),new xG(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:UG.bind(null,n),eo:HG.bind(null,n),eu:BG.bind(null,n),tu:jG.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Tu.Fo(),yield z_(n)):(yield n.Tu.stop(),n.du.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class hR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,d=new hR(e,t,u,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function W_(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Gp(n))return new Ne(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class K_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=bx(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new K_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof K_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new K_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $L{constructor(){this.Eu=new kr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):pt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Z_{constructor(e,t,r,i,o,u,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new Z_(e,t,K_.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class $G{constructor(){this.Ru=void 0,this.listeners=[]}}class GG{constructor(){this.queries=new Nh(e=>p1(e),mE),this.onlineState="Unknown",this.bu=new Set}}function fR(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new $G),i)try{o.Ru=yield t.onListen(r)}catch(u){const d=W_(u,`Initialization of query '${gx(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,o),o.listeners.push(e),e.Pu(t.onlineState),o.Ru&&e.Vu(o.Ru)&&_R(t)}),pR.apply(this,arguments)}function mR(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),gR.apply(this,arguments)}function zG(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Vu(i)&&(r=!0);u.Ru=i}}r&&_R(t)}function qG(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function _R(n){n.bu.forEach(e=>{e.next()})}class yR{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Z_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Z_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class WG{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class GL{constructor(e){this.M=e}wi(e){return ku(this.M,e)}mi(e){return e.metadata.exists?H1(this.M,e.document,!1):nr.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Mi(e)}}class KG{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new GL(this.M);for(const i of e)if(i.metadata.queries){const o=r.wi(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||xn()).add(o);t.set(u,d)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function(n,e,t,r){return Bx.apply(this,arguments)}(e.localStore,new GL(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield gG(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function zL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qL{constructor(e){this.key=e}}class WL{constructor(e){this.key=e}}class KL{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=xn(),this.mutatedKeys=xn(),this.Gu=g1(e),this.Qu=new K_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new $L,i=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const O=i.get(C),U=_x(this.query,D)?D:null,j=!!O&&this.mutatedKeys.has(O.key),te=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ve=!1;O&&U?O.data.isEqual(U.data)?j!==te&&(r.track({type:3,doc:U}),ve=!0):this.Hu(O,U)||(r.track({type:2,doc:U}),ve=!0,(g&&this.Gu(U,g)>0||v&&this.Gu(U,v)<0)&&(d=!0)):!O&&U?(r.track({type:0,doc:U}),ve=!0):O&&!U&&(r.track({type:1,doc:O}),ve=!0,(g||v)&&(d=!0)),ve&&(U?(u=u.add(U),o=te?o.add(C):o.delete(C)):(u=u.delete(C),o=o.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),o=o.delete(C.key),r.track({type:1,doc:C})}return{Qu:u,zu:r,ii:d,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Au();o.sort((v,C)=>function(D,O){const U=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return U(D)-U(O)}(v.type,C.type)||this.Gu(v.doc,C.doc)),this.Ju(r);const u=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,g=d!==this.qu;return this.qu=d,0!==o.length||g?{snapshot:new Z_(this.query,e.Qu,i,o,e.mutatedKeys,0===d,g,!1),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new $L,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new WL(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new qL(r))}),t}ta(e){this.Uu=e._i,this.Ku=xn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Z_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class ZG{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YG{constructor(e){this.key=e,this.na=!1}}class QG{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new Nh(d=>p1(d),mE),this.ra=new Map,this.oa=new Set,this.ua=new kr(Ke.comparator),this.aa=new Map,this.ca=new Hx,this.ha={},this.la=new Map,this.fa=Qp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function XG(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,Ce.Z)(function*(n,e){const t=HR(n);let r,i;const o=t.ia.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.ea();else{const u=yield H_(t.localStore,Ra(e));t.isPrimaryClient&&kT(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield bR(t,e,r,"current"===d)}return i}),vR.apply(this,arguments)}function bR(n,e,t,r){return ER.apply(this,arguments)}function ER(){return ER=(0,Ce.Z)(function*(n,e,t,r){n._a=(C,D,O)=>{return(U=(0,Ce.Z)(function*(j,te,ve,Je){let st=te.view.Wu(ve);st.ii&&(st=yield AT(j.localStore,te.query,!1).then(({documents:Lt})=>te.view.Wu(Lt,st)));const ht=Je&&Je.targetChanges.get(te.targetId),ot=te.view.applyChanges(st,j.isPrimaryClient,ht);return RR(j,te.targetId,ot.Xu),ot.snapshot}),function(j,te,ve,Je){return U.apply(this,arguments)})(n,C,D,O);var U};const i=yield AT(n.localStore,e,!0),o=new KL(e,i._i),u=o.Wu(i.documents),d=EE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=o.applyChanges(u,n.isPrimaryClient,d);RR(n,t,g.Xu);const v=new ZG(e,t,o);return n.ia.set(e,v),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),g.snapshot}),ER.apply(this,arguments)}function JG(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(o=>!mE(o,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),FE(t.remoteStore,r.targetId),Y_(t,r.targetId)}).catch(Xp))):(Y_(t,r.targetId),yield $_(t.localStore,r.targetId,!0))}),wR.apply(this,arguments)}function CR(){return CR=(0,Ce.Z)(function*(n,e,t){const r=$R(n);try{const i=yield function(o,u){const d=Qe(o),g=Rr.now(),v=u.reduce((D,O)=>D.add(O.key),xn());let C;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>d.fi.Ks(D,v).next(O=>{C=O;const U=[];for(const j of u){const te=o$(j,C.get(j.key));null!=te&&U.push(new $p(j.key,te,t1(te.value.mapValue),qr.exists(!0)))}return d.Bs.addMutationBatch(D,g,U,u)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,d){let g=o.ha[o.currentUser.toKey()];g||(g=new kr(Ht)),g=g.insert(u,d),o.ha[o.currentUser.toKey()]=g}(r,i.batchId,t),yield Xc(r,i.changes),yield z_(r.remoteStore)}catch(i){const o=W_(i,"Failed to persist write");t.reject(o)}}),CR.apply(this,arguments)}function ZL(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,Ce.Z)(function*(n,e){const t=Qe(n);try{const r=yield fG(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.aa.get(o);u&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.na=!0:i.modifiedDocuments.size>0?Ft(u.na):i.removedDocuments.size>0&&(Ft(u.na),u.na=!1))}),yield Xc(t,r,e)}catch(r){yield Xp(r)}}),IR.apply(this,arguments)}function YL(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((o,u)=>{const d=u.view.Pu(e);d.snapshot&&i.push(d.snapshot)}),function(o,u){const d=Qe(o);d.onlineState=u;let g=!1;d.queries.forEach((v,C)=>{for(const D of C.listeners)D.Pu(u)&&(g=!0)}),g&&_R(d)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function t3(n,e,t){return TR.apply(this,arguments)}function TR(){return TR=(0,Ce.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),o=i&&i.key;if(o){let u=new kr(Ke.comparator);u=u.insert(o,nr.newNoDocument(o,Mt.min()));const d=xn().add(o),g=new bE(Mt.min(),new Map,new Zn(Ht),u,d);yield ZL(r,g),r.ua=r.ua.remove(o),r.aa.delete(e),kR(r)}else yield $_(r.localStore,e,!1).then(()=>Y_(r,e,t)).catch(Xp)}),TR.apply(this,arguments)}function n3(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield hG(t.localStore,e);xR(t,r,null),MR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xc(t,i)}catch(i){yield Xp(i)}}),DR.apply(this,arguments)}function r3(n,e,t){return SR.apply(this,arguments)}function SR(){return SR=(0,Ce.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(o,u){const d=Qe(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return d.Bs.lookupMutationBatch(g,u).next(C=>(Ft(null!==C),v=C.keys(),d.Bs.removeMutationBatch(g,C))).next(()=>d.Bs.performConsistencyCheck(g)).next(()=>d.fi.Ks(g,v))})}(r.localStore,e);xR(r,e,t),MR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xc(r,i)}catch(i){yield Xp(i)}}),SR.apply(this,arguments)}function AR(){return AR=(0,Ce.Z)(function*(n,e){const t=Qe(n);Lh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=Qe(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=W_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),AR.apply(this,arguments)}function MR(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function xR(n,e,t){const r=Qe(n);let i=r.ha[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Y_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||QL(n,r)})}function QL(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(FE(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),kR(n))}function RR(n,e,t){for(const r of t)r instanceof qL?(n.ca.addReference(r.key,e),o3(n,r)):r instanceof WL?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||QL(n,r.key)):pt()}function o3(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oa.add(r),kR(n))}function kR(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ke(un.fromString(e)),r=n.fa.next();n.aa.set(r,new YG(t)),n.ua=n.ua.insert(t,r),kT(n.remoteStore,new Oh(Ra(N_(t.path)),r,2,ra.A))}}function Xc(n,e,t){return NR.apply(this,arguments)}function NR(){return NR=(0,Ce.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[],u=[];var d;r.ia.isEmpty()||(r.ia.forEach((d,g)=>{u.push(r._a(g,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v.fromCache?"not-current":"current"),i.push(v);const C=Lx.Ys(g.targetId,v);o.push(C)}}))}),yield Promise.all(u),r.sa.zo(i),yield(d=(0,Ce.Z)(function*(g,v){const C=Qe(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(v,O=>me.forEach(O.Hs,U=>C.persistence.referenceDelegate.addReference(D,O.targetId,U)).next(()=>me.forEach(O.Js,U=>C.persistence.referenceDelegate.removeReference(D,O.targetId,U)))))}catch(D){if(!Gp(D))throw D;Be("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const O=D.targetId;if(!D.fromCache){const U=C.ui.get(O),te=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);C.ui=C.ui.insert(O,te)}}}),function(g,v){return d.apply(this,arguments)})(r.localStore,o))}),NR.apply(this,arguments)}function a3(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,Ce.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield TL(t.localStore,e);t.currentUser=e,(i=t).la.forEach(u=>{u.forEach(d=>{d.reject(new Ne(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xc(t,r.di)}var i}),OR.apply(this,arguments)}function l3(n,e){const t=Qe(n),r=t.aa.get(e);if(r&&r.na)return xn().add(r.key);{let i=xn();const o=t.ra.get(e);if(!o)return i;for(const u of o){const d=t.ia.get(u);i=i.unionWith(d.view.ju)}return i}}function u3(n,e){return PR.apply(this,arguments)}function PR(){return PR=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=yield AT(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&RR(t,e.targetId,i.Xu),i}),PR.apply(this,arguments)}function c3(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,Ce.Z)(function*(n,e){const t=Qe(n);return ML(t.localStore,e).then(r=>Xc(t,r))}),FR.apply(this,arguments)}function d3(n,e,t,r){return LR.apply(this,arguments)}function LR(){return LR=(0,Ce.Z)(function*(n,e,t,r){const i=Qe(n),o=yield function(u,d){const g=Qe(u),v=Qe(g.Bs);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>v.fn(C,d).next(D=>D?g.fi.Ks(C,D):me.resolve(null)))}(i.localStore,e);var d;null!==o?("pending"===t?yield z_(i.remoteStore):"acknowledged"===t||"rejected"===t?(xR(i,e,r||null),MR(i,e),d=e,Qe(Qe(i.localStore).Bs)._n(d)):pt(),yield Xc(i,o)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),LR.apply(this,arguments)}function VR(){return VR=(0,Ce.Z)(function*(n,e){const t=Qe(n);if(HR(t),$R(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XL(t,r.toArray());t.da=!0,yield cR(t.remoteStore,!0);for(const o of i)kT(t.remoteStore,o)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Y_(t,u),$_(t.localStore,u,!0))),FE(t.remoteStore,u)}),yield i,yield XL(t,r),function(o){const u=Qe(o);u.aa.forEach((d,g)=>{FE(u.remoteStore,g)}),u.ca.Si(),u.aa=new Map,u.ua=new kr(Ke.comparator)}(t),t.da=!1,yield cR(t.remoteStore,!1)}}),VR.apply(this,arguments)}function XL(n,e,t){return UR.apply(this,arguments)}function UR(){return UR=(0,Ce.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[];for(const u of e){let d;const g=r.ra.get(u);if(g&&0!==g.length){d=yield H_(r.localStore,Ra(g[0]));for(const v of g){const C=r.ia.get(v),D=yield u3(r,C);D.snapshot&&o.push(D.snapshot)}}else{const v=yield AL(r.localStore,u);d=yield H_(r.localStore,v),yield bR(r,JL(v),u,!1)}i.push(d)}return r.sa.zo(o),i}),UR.apply(this,arguments)}function JL(n){return h1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function f3(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).Fs()}function p3(n,e,t,r){return BR.apply(this,arguments)}function BR(){return BR=(0,Ce.Z)(function*(n,e,t,r){const i=Qe(n);if(i.da)return void Be("SyncEngine","Ignoring unexpected query state notification.");const o=i.ra.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield ML(i.localStore,m1(o[0])),d=bE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Xc(i,u,d);break}case"rejected":yield $_(i.localStore,e,!0),Y_(i,e,r);break;default:pt()}}),BR.apply(this,arguments)}function m3(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,Ce.Z)(function*(n,e,t){const r=HR(n);if(r.da){for(const i of e){if(r.ra.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const o=yield AL(r.localStore,i),u=yield H_(r.localStore,o);yield bR(r,JL(o),u.targetId,!1),kT(r.remoteStore,u)}for(const i of t)r.ra.has(i)&&(yield $_(r.localStore,i,!1).then(()=>{FE(r.remoteStore,i),Y_(r,i)}).catch(Xp))}}),jR.apply(this,arguments)}function HR(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t3.bind(null,e),e.sa.zo=zG.bind(null,e.eventManager),e.sa.wa=qG.bind(null,e.eventManager),e}function $R(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r3.bind(null,e),e}class eV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=OE(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return IL(this.persistence,new CL,e.initialUser,this.M)}ya(e){return new CG($x.Yi,this.M)}ga(e){return new NL}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tV extends eV{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield $R(r.Ta.syncEngine),yield z_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return IL(this.persistence,new CL,e.initialUser,this.M)}pa(e){return new iG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Fx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Eo.withCacheSize(this.cacheSizeBytes):Eo.DEFAULT;return new Px(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PL(),RT(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new NL}}class _3 extends tV{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Wx&&(r.sharedClientState.syncEngine={$r:d3.bind(null,i),Br:p3.bind(null,i),Lr:m3.bind(null,i),Fs:f3.bind(null,i),Fr:c3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var o=(0,Ce.Z)(function*(u){yield function(n,e){return VR.apply(this,arguments)}(r.Ta.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}ga(e){const t=PL();if(!Wx.vt(t))throw new Ne(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class GR{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>YL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=a3.bind(null,r.syncEngine),yield cR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GG}createDatastore(e){const t=OE(e.databaseInfo.databaseId),r=new AG(e.databaseInfo);return new RG(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=d=>YL(this.syncEngine,d,0),u=OL.vt()?new OL:new TG,new NG(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,d,g,v){const C=new QG(r,i,o,u,d,g);return v&&(C.da=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=Qe(t);Be("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield G_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nV(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class OT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class y3{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ai,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const o=yield e.Sa(i);return new WG(JSON.parse(o),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ce.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class v3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(o,u){const d=Qe(o),g=IE(d.M)+"/documents",v={documents:u.map(U=>CE(d.M,U))},C=yield d._o("BatchGetDocuments",g,v),D=new Map;C.forEach(U=>{const j=function(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=ku(t,r.found.name),o=Mi(r.found.updateTime),u=new ws({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(i,o,u)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=ku(t,r.missing),o=Mi(r.readTime);return nr.newNoDocument(i,o)}(n,e):pt()}(d.M,U);D.set(j.key.toString(),j)});const O=[];return u.forEach(U=>{const j=D.get(U.toString());Ft(!!j),O.push(j)}),O}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ke.fromPath(i);e.mutations.push(new vx(o,e.precondition(o)))}),yield(r=(0,Ce.Z)(function*(i,o){const u=Qe(i),d=IE(u.M)+"/documents",g={writes:o.map(v=>TE(u.M,v))};yield u.co("Commit",d,g)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?qr.updateTime(t):qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Ne(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qr.updateTime(t)}return qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class b3{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.xa=r.maxAttempts,this.No=new Kx(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ce.Z)(function*(){const t=new v3(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Ma(o)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!lE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!x1(t)}return!1}}class E3{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=$F.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ce.Z)(function*(d){Be("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=W_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function rV(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(o){r.isEqual(o)||(yield TL(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),zR.apply(this,arguments)}function iV(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield WR(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>HL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>HL(e.remoteStore,o)),n.onlineComponents=e}),qR.apply(this,arguments)}function WR(n){return KR.apply(this,arguments)}function KR(){return KR=(0,Ce.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield rV(n,new eV)),n.offlineComponents}),KR.apply(this,arguments)}function PT(n){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ce.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield iV(n,new GR)),n.onlineComponents}),ZR.apply(this,arguments)}function sV(n){return WR(n).then(e=>e.persistence)}function YR(n){return WR(n).then(e=>e.localStore)}function oV(n){return PT(n).then(e=>e.remoteStore)}function QR(n){return PT(n).then(e=>e.syncEngine)}function Q_(n){return XR.apply(this,arguments)}function XR(){return XR=(0,Ce.Z)(function*(n){const e=yield PT(n),t=e.eventManager;return t.onListen=XG.bind(null,e.syncEngine),t.onUnlisten=JG.bind(null,e.syncEngine),t}),XR.apply(this,arguments)}function aV(n,e,t={}){const r=new Ai;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,o,u,d,g){const v=new OT({next:D=>{o.enqueueAndForget(()=>mR(i,C));const O=D.docs.has(u);!O&&D.fromCache?g.reject(new Ne(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&D.fromCache&&d&&"server"===d.source?g.reject(new Ne(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new yR(N_(u.path),v,{includeMetadataChanges:!0,ku:!0});return fR(i,C)}(yield Q_(n),n.asyncQueue,e,t,r)})),r.promise}function lV(n,e,t={}){const r=new Ai;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,o,u,d,g){const v=new OT({next:D=>{o.enqueueAndForget(()=>mR(i,C)),D.fromCache&&"server"===d.source?g.reject(new Ne(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new yR(u,v,{includeMetadataChanges:!0,ku:!0});return fR(i,C)}(yield Q_(n),n.asyncQueue,e,t,r)})),r.promise}const uV=new Map;function JR(n,e,t){if(!t)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cV(n,e,t,r){if(!0===e&&!0===r)throw new Ne(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dV(n){if(!Ke.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hV(n){if(Ke.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function FT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=FT(n);throw new Ne(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fV(n,e){if(e<=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class pV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class LE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pV({}),this._settingsFrozen=!1,e instanceof Yc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new MH;switch(t.type){case"gapi":const r=t.client;return Ft(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new NH(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uV.get(e);t&&(Be("ComponentProvider","Removing Datastore"),uV.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class Cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cs(this.firestore,e,this._query)}}class Ou extends Cs{constructor(e,t,r){super(e,t,N_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new Ke(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function mV(n,e,...t){if(n=(0,P.m9)(n),JR("collection","path",e),n instanceof LE){const r=un.fromString(e,...t);return hV(r),new Ou(n,null,r)}{if(!(n instanceof rr||n instanceof Ou))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return hV(r),new Ou(n.firestore,null,r)}}function LT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=$F.R()),JR("doc","path",e),n instanceof LE){const r=un.fromString(e,...t);return dV(r),new rr(n,null,new Ke(r))}{if(!(n instanceof rr||n instanceof Ou))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return dV(r),new rr(n.firestore,n instanceof Ou?n.converter:null,new Ke(r))}}function gV(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof rr||n instanceof Ou)&&(e instanceof rr||e instanceof Ou)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _V(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof Cs&&e instanceof Cs&&n.firestore===e.firestore&&mE(n._query,e._query)&&n.converter===e.converter}class k3{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Kx(this,"async_queue_retry"),this.Qa=()=>{const t=RT();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=RT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=RT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ai;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Gp(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,zr("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=hR.createAndSchedule(this,e,t,r,o=>this.Ha(o));return this.La.push(i),i}ja(){this.Ua&&pt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function ek(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class N3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends LE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new k3,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||yV(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||yV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yV(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new UH(n._databaseId,o,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new E3(n._authCredentials,n._appCheckCredentials,n._queue,r)}function vV(n,e,t){const r=new Ai;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield rV(n,t),yield iV(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(o=i).name?o.code===pe.FAILED_PRECONDITION||o.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var o})).then(()=>r.promise)}function bV(n){if(n._initialized||n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(fi.fromBase64String(e))}catch(t){throw new Ne(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class em{constructor(e){this._methodName=e}}class VT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const $3=/^__.*__$/;class G3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $p(e,this.data,this.fieldMask,t,this.fieldTransforms):new _E(e,this.data,t,this.fieldTransforms)}}class EV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $p(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class UT{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===o&&this.tc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new UT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return HT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(wV(this.ec)&&$3.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class z3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||OE(e)}lc(e,t,r,i=!1){return new UT({ec:e,methodName:t,hc:r,path:hi.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function tm(n){const e=n._freezeSettings(),t=OE(n._databaseId);return new z3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BT(n,e,t,r,i,o={}){const u=n.lc(o.merge||o.mergeFields?2:0,e,t,i);ik("Data must be an object, but it was:",u,r);const d=TV(r,u);let g,v;if(o.merge)g=new M_(u.fieldMask),v=u.fieldTransforms;else if(o.mergeFields){const C=[];for(const D of o.mergeFields){const O=sk(e,D,t);if(!u.contains(O))throw new Ne(pe.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);SV(C,O)||C.push(O)}g=new M_(C),v=u.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,v=u.fieldTransforms;return new G3(new ws(d),g,v)}class VE extends em{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof VE}}function CV(n,e,t){return new UT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class tk extends em{_toFieldTransform(e){return new gE(e.path,new P_)}isEqual(e){return e instanceof tk}}class q3 extends em{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=CV(this,e,!0),r=this.fc.map(o=>nm(o,t)),i=new jp(r);return new gE(e.path,i)}isEqual(e){return this===e}}class W3 extends em{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=CV(this,e,!0),r=this.fc.map(o=>nm(o,t)),i=new Hp(r);return new gE(e.path,i)}isEqual(e){return this===e}}class K3 extends em{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new F_(e.M,v1(e.M,this.dc));return new gE(e.path,t)}isEqual(e){return this===e}}function nk(n,e,t,r){const i=n.lc(1,e,t);ik("Data must be an object, but it was:",i,r);const o=[],u=ws.empty();Pp(r,(g,v)=>{const C=jT(e,g,t);v=(0,P.m9)(v);const D=i.oc(C);if(v instanceof VE)o.push(C);else{const O=nm(v,D);null!=O&&(o.push(C),u.set(C,O))}});const d=new M_(o);return new EV(u,d,i.fieldTransforms)}function rk(n,e,t,r,i,o){const u=n.lc(1,e,t),d=[sk(e,r,t)],g=[i];if(o.length%2!=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<o.length;O+=2)d.push(sk(e,o[O])),g.push(o[O+1]);const v=[],C=ws.empty();for(let O=d.length-1;O>=0;--O)if(!SV(v,d[O])){const U=d[O];let j=g[O];j=(0,P.m9)(j);const te=u.oc(U);if(j instanceof VE)v.push(U);else{const ve=nm(j,te);null!=ve&&(v.push(U),C.set(U,ve))}}const D=new M_(v);return new EV(C,D,u.fieldTransforms)}function IV(n,e,t,r=!1){return nm(t,n.lc(r?4:3,e))}function nm(n,e){if(DV(n=(0,P.m9)(n)))return ik("Unsupported field value:",e,n),TV(n,e);if(n instanceof em)return function(t,r){if(!wV(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let d=nm(u,r.uc(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return v1(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Rr.fromDate(t);return{timestampValue:wE(r.M,i)}}if(t instanceof Rr){const i=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wE(r.M,i)}}if(t instanceof VT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:L1(r.M,t._byteString)};if(t instanceof rr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.ac(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ex(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${FT(t)}`)}(n,e)}function TV(n,e){const t={};return qF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pp(n,(r,i)=>{const o=nm(i,e.sc(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function DV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof VT||n instanceof Pu||n instanceof rr||n instanceof em)}function ik(n,e,t){if(!DV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=FT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function sk(n,e,t){if((e=(0,P.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return jT(n,e);throw HT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Z3=new RegExp("[~\\*/\\[\\]]");function jT(n,e,t){if(e.search(Z3)>=0)throw HT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch(r){throw HT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function HT(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(o||u)&&(g+=" (found",o&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Ne(pe.INVALID_ARGUMENT,d+n+g)}function SV(n,e){return n.some(t=>t.isEqual(e))}class UE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Y3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($T("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Y3 extends UE{data(){return super.data()}}function $T(n,e){return"string"==typeof e?jT(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class rm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ed extends UE{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new BE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($T("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class BE extends ed{data(e={}){return super.data(e)}}class Uh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new BE(this._firestore,this._userDataWriter,r.key,r,new rm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new BE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new rm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new BE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new rm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==u.type&&(g=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),v=o.indexOf(u.doc.key)),{type:Q3(u.type),doc:d,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Q3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function AV(n,e){return n instanceof ed&&e instanceof ed?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uh&&e instanceof Uh&&n._firestore===e._firestore&&_V(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jE{}function Bh(n,...e){for(const t of e)n=t._apply(n);return n}class X3 extends jE{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=tm(e.firestore),r=function(i,o,u,d,g,v,C){let D;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){PV(C,v);const U=[];for(const j of C)U.push(OV(d,i,j));D={arrayValue:{values:U}}}else D=OV(d,i,C)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||PV(C,v),D=IV(u,"where",C,"in"===v||"not-in"===v);const O=rs.create(g,v,D);return function(U,j){if(j.S()){const ve=px(U);if(null!==ve&&!ve.isEqual(j.field))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ve.toString()}' and '${j.field.toString()}'`);const Je=fx(U);null!==Je&&FV(0,j.field,Je)}const te=function(ve,Je){for(const st of ve.filters)if(Je.indexOf(st.op)>=0)return st.op;return null}(U,function(ve){switch(ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==te)throw new Ne(pe.INVALID_ARGUMENT,te===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${te.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Cs(e.firestore,e.converter,function(i,o){const u=i.filters.concat([o]);return new Qc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class ez extends jE{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new k_(i,o);return function(d,g){if(null===fx(d)){const v=px(d);null!==v&&FV(0,v,g.field)}}(r,u),u}(e._query,this._c,this.gc);return new Cs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Qc(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xV extends jE{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Cs(e.firestore,e.converter,f1(e._query,this.yc,this.Ic))}}class RV extends jE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=NV(e,this.type,this.Tc,this.Ec);return new Cs(e.firestore,e.converter,(i=t,new Qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class kV extends jE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=NV(e,this.type,this.Tc,this.Ec);return new Cs(e.firestore,e.converter,(i=t,new Qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function NV(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof UE)return function(i,o,u,d,g){if(!d)throw new Ne(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const C of O_(i))if(C.field.isKeyField())v.push(Vp(o,d.key));else{const D=d.data.field(C.field);if(ux(D))throw new Ne(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const O=C.field.canonicalString();throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}v.push(D)}return new kh(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=tm(n.firestore);return function(o,u,d,g,v,C){const D=o.explicitOrderBy;if(v.length>D.length)throw new Ne(pe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let U=0;U<v.length;U++){const j=v[U];if(D[U].field.isKeyField()){if("string"!=typeof j)throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof j}`);if(!mx(o)&&-1!==j.indexOf("/"))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${j}' contains a slash.`);const te=o.path.child(un.fromString(j));if(!Ke.isDocumentKey(te))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const ve=new Ke(te);O.push(Vp(u,ve))}else{const te=IV(d,g,j);O.push(te)}}return new kh(O,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function OV(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mx(e)&&-1!==t.indexOf("/"))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Ke.isDocumentKey(r))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vp(n,new Ke(r))}if(t instanceof rr)return Vp(n,t._key);throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${FT(t)}.`)}function PV(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function FV(n,e,t){if(!t.isEqual(e))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const lz={maxAttempts:5};class ok{convertValue(e,t="none"){switch(Lp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return Pp(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new VT(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=WF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(aE(e));default:return null}}convertTimestamp(e){const t=Mh(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);Ft(W1(r));const i=new Yc(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||zr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function GT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uz extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class LV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tm(e)}set(e,t,r){this._verifyNotCommitted();const i=jh(e,this._firestore),o=GT(i.converter,t,r),u=BT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,qr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=jh(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof Jc?rk(this._dataReader,"WriteBatch.update",o._key,t,r,i):nk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jh(e,this._firestore);return this._mutations=this._mutations.concat(new yE(t._key,qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Ne(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class im extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function VV(n,e,t){n=on(n,rr);const r=on(n.firestore,ar),i=GT(n.converter,e,t);return X_(r,[BT(tm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qr.none())])}function UV(n,e,t,...r){n=on(n,rr);const i=on(n.firestore,ar),o=tm(i);let u;return u="string"==typeof(e=(0,P.m9)(e))||e instanceof Jc?rk(o,"updateDoc",n._key,e,t,r):nk(o,"updateDoc",n._key,e),X_(i,[u.toMutation(n._key,qr.exists(!0))])}function BV(n,...e){var t,r,i;n=(0,P.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||ek(e[u])||(o=e[u],u++);const d={includeMetadataChanges:o.includeMetadataChanges};if(ek(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,v,C;if(n instanceof rr)v=on(n.firestore,ar),C=N_(n._key.path),g={next:D=>{e[u]&&e[u](ak(v,n,D))},error:e[u+1],complete:e[u+2]};else{const D=on(n,Cs);v=on(D.firestore,ar),C=D._query;const O=new im(v);g={next:U=>{e[u]&&e[u](new Uh(v,O,D,U))},error:e[u+1],complete:e[u+2]},MV(n._query)}return function(D,O,U,j){const te=new OT(j),ve=new yR(O,te,U);return D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return fR(yield Q_(D),ve)})),()=>{te.Aa(),D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return mR(yield Q_(D),ve)}))}}(Kr(v),C,d,g)}function X_(n,e){return function(t,r){const i=new Ai;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e,t){return CR.apply(this,arguments)}(yield QR(t),r,i)})),i.promise}(Kr(n),e)}function ak(n,e,t){const r=t.docs.get(e._key),i=new im(n);return new ed(n,i,e._key,r,new rm(t.hasPendingWrites,t.fromCache),e.converter)}class vz extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tm(e)}get(e){const t=jh(e,this._firestore),r=new uz(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const o=i[0];if(o.isFoundDocument())return new UE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new UE(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=jh(e,this._firestore),o=GT(i.converter,t,r),u=BT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=jh(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof Jc?rk(this._dataReader,"Transaction.update",o._key,t,r,i):nk(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jh(e,this._firestore),r=new im(this._firestore);return super.get(e).then(i=>new ed(this._firestore,r,t._key,i._document,new rm(!1,!1),t.converter))}}function lk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function HV(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function $V(){if("undefined"==typeof atob)throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){S_=Jo.SDK_VERSION,(0,Jo._registerComponent)(new pr.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),o=new ar(i,new RH(t.getProvider("auth-internal")),new OH(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC")),(0,Jo.registerVersion)(BF,"3.4.9",n),(0,Jo.registerVersion)(BF,"3.4.9","esm2017")}();class HE{constructor(e){this._delegate=e}static fromBase64String(e){return $V(),new HE(Pu.fromBase64String(e))}static fromUint8Array(e){return HV(),new HE(Pu.fromUint8Array(e))}toBase64(){return $V(),this._delegate.toBase64()}toUint8Array(){return HV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uk(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Mz{enableIndexedDbPersistence(e,t){return function(n,e){bV(n=on(n,ar));const t=Kr(n),r=n._freezeSettings(),i=new GR;return vV(t,i,new tV(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){bV(n=on(n,ar));const e=Kr(n),t=n._freezeSettings(),r=new GR;return vV(e,r,new _3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ai;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Nl.vt())return Promise.resolve();const i=r+"main";yield Nl.delete(i)}),function(r){return t.apply(this,arguments)})(Fx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class GV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sE("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const o=(n=on(n,LE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&sE("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=ts.MOCK_USER;else{u=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ne(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ts(g)}n._authCredentials=new xH(new jF(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield sV(n),t=yield oV(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.wu.delete(0),PE(i)}(t)}))}(Kr(n=on(n,ar)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield sV(n),t=yield oV(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const o=Qe(i);o.wu.add(0),yield G_(o),o.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=on(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Ai;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e){return AR.apply(this,arguments)}(yield QR(e),t)})),t.promise}(Kr(n=on(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new OT(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Q_(n),i=t,Qe(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Q_(n),i=t,void Qe(r).bu.delete(i);var r,i}))}}(Kr(n=on(n,ar)),ek(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new J_(this,mV(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Na(this,LT(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zs(this,function(n,e){if(n=on(n,LE),JR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cs(n,null,(t=e,new Qc(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=on(n,ar);const r=Object.assign(Object.assign({},lz),t);return function(i){if(i.maxAttempts<1)throw new Ne(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new Ai;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const i=yield(o=n,PT(o).then(u=>u.datastore));var o;new b3(n.asyncQueue,i,t,e,r).run()})),r.promise}(Kr(n),i=>e(new vz(n,i)),r)}(this._delegate,t=>e(new zV(this,t)))}batch(){return Kr(this._delegate),new qV(new LV(this._delegate,e=>X_(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Kr(n=on(n,ar)),r=new N3;return function(n,e,t,r){const i=function(o,u){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,g=function(g,v){if(g instanceof Uint8Array)return nV(g,v);if(g instanceof ArrayBuffer)return nV(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new y3(g,u);var g}(t,OE(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(n,e,t){const r=Qe(n);var i;(i=(0,Ce.Z)(function*(o,u,d){try{const g=yield u.getMetadata();if(yield function(O,U){const j=Qe(O),te=Mi(U.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",ve=>j._s.getBundleMetadata(ve,U.id)).then(ve=>!!ve&&ve.createTime.compareTo(te)>=0)}(o.localStore,g))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(O=g).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);d._updateProgress(zL(g));const v=new KG(g,o.localStore,u.M);let C=yield u.ma();for(;C;){const O=yield v.Fu(C);O&&d._updateProgress(O),C=yield u.ma()}const D=yield v.complete();return yield Xc(o,D.Lu,void 0),yield function(O,U){const j=Qe(O);return j.persistence.runTransaction("Save bundle","readwrite",te=>j._s.saveBundleMetadata(te,U))}(o.localStore,g),d._completeWith(D.progress),Promise.resolve(D.Bu)}catch(g){return sE("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var O}),function(o,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield QR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i._s.getNamedQuery(o,r))}(yield YR(n),e)}))}(Kr(n=on(n,ar)),e).then(t=>t?new Cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zs(this,t):null)}}class zT extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new HE(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Na.forKey(t,this.firestore,null)}}class zV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}get(e){const t=om(e);return this._delegate.get(t).then(r=>new $E(this._firestore,new ed(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=om(e);return r?(lk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=om(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=om(e);return this._delegate.delete(t),this}}class qV{constructor(e){this._delegate=e}set(e,t,r){const i=om(e);return r?(lk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=om(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=om(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new BE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new GE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new sm(e,new zT(e),t),i.set(t,o)),o}}sm.INSTANCES=new WeakMap;class Na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Na(t,new rr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Na(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new J_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new J_(this.firestore,mV(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof rr&&gV(this._delegate,e)}set(e,t){t=lk("DocumentReference.set",t);try{return t?VV(this._delegate,e,t):VV(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?UV(this._delegate,e):UV(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return X_(on(n.firestore,ar),[new yE(n._key,qr.none())])}(this._delegate)}onSnapshot(...e){const t=WV(e),r=KV(e,i=>new $E(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BV(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=on(n,rr);const e=on(n.firestore,ar),t=Kr(e),r=new im(e);return function(n,e){const t=new Ai;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,o,u){try{const d=yield function(g,v){const C=Qe(g);return C.persistence.runTransaction("read document","readonly",D=>C.fi.Ls(D,v))}(i,o);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Ne(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=W_(d,`Failed to get document '${o} from cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield YR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ed(e,r,n._key,i,new rm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=on(n,rr);const e=on(n.firestore,ar);return aV(Kr(e),n._key,{source:"server"}).then(t=>ak(e,n,t))}(this._delegate):function(n){n=on(n,rr);const e=on(n.firestore,ar);return aV(Kr(e),n._key).then(t=>ak(e,n,t))}(this._delegate),t.then(r=>new $E(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Na(this.firestore,this._delegate.withConverter(e?sm.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function WV(n){for(const e of n)if("object"==typeof e&&!uk(e))return e;return{}}function KV(n,e){var t,r;let i;return i=uk(n[0])?n[0]:uk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $E{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return AV(this._delegate,e._delegate)}}class GE extends $E{data(e){const t=this._delegate.data(e);return function(n,e){n||pt()}(void 0!==t),t}}class zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}where(e,t,r){try{return new zs(this.firestore,Bh(this._delegate,function(n,e,t){const r=e,i=$T("where",n);return new X3(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zs(this.firestore,Bh(this._delegate,function(n,e="asc"){const t=e,r=$T("orderBy",n);return new ez(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zs(this.firestore,Bh(this._delegate,function(n){return fV("limit",n),new xV("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zs(this.firestore,Bh(this._delegate,function(n){return fV("limitToLast",n),new xV("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zs(this.firestore,Bh(this._delegate,function(...n){return new RV("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zs(this.firestore,Bh(this._delegate,function(...n){return new RV("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zs(this.firestore,Bh(this._delegate,function(...n){return new kV("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zs(this.firestore,Bh(this._delegate,function(...n){return new kV("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return _V(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=on(n,Cs);const e=on(n.firestore,ar),t=Kr(e),r=new im(e);return function(n,e){const t=new Ai;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,o,u){try{const d=yield AT(i,o,!0),g=new KL(o,d._i),v=g.Wu(d.documents),C=g.applyChanges(v,!1);u.resolve(C.snapshot)}catch(d){const g=W_(d,`Failed to execute query '${o} against cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield YR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Uh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=on(n,Cs);const e=on(n.firestore,ar),t=Kr(e),r=new im(e);return lV(t,n._query,{source:"server"}).then(i=>new Uh(e,r,n,i))}(this._delegate):function(n){n=on(n,Cs);const e=on(n.firestore,ar),t=Kr(e),r=new im(e);return MV(n._query),lV(t,n._query).then(i=>new Uh(e,r,n,i))}(this._delegate),t.then(r=>new ck(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WV(e),r=KV(e,i=>new ck(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BV(this._delegate,t,r)}withConverter(e){return new zs(this.firestore,this._delegate.withConverter(e?sm.getInstance(this.firestore,e):null))}}class Rz{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new GE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ck{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new GE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Rz(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new GE(this._firestore,r))})}isEqual(e){return AV(this._delegate,e._delegate)}}class J_ extends zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Na(this.firestore,e):null}doc(e){try{return new Na(this.firestore,void 0===e?LT(this._delegate):LT(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=on(n.firestore,ar),r=LT(n),i=GT(n.converter,e);return X_(t,[BT(tm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Na(this.firestore,t))}isEqual(e){return gV(this._delegate,e._delegate)}withConverter(e){return new J_(this.firestore,this._delegate.withConverter(e?sm.getInstance(this.firestore,e):null))}}function om(n){return on(n,rr)}class dk{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new dk(hi.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class am{constructor(e){this._delegate=e}static serverTimestamp(){const e=new tk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new am(e)}static delete(){const e=new VE("deleteField");return e._methodName="FieldValue.delete",new am(e)}static arrayUnion(...e){const t=function(...n){return new q3("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new am(t)}static arrayRemove(...e){const t=function(...n){return new W3("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new am(t)}static increment(e){const t=function(n){return new K3("increment",n)}(e);return t._methodName="FieldValue.increment",new am(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const kz={Firestore:GV,GeoPoint:VT,Timestamp:Rr,Blob:HE,Transaction:zV,WriteBatch:qV,DocumentReference:Na,DocumentSnapshot:$E,Query:zs,QueryDocumentSnapshot:GE,QuerySnapshot:ck,CollectionReference:J_,FieldPath:dk,FieldValue:am,setLogLevel:function(n){!function(n){Ah.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new pr.wA("firestore-compat",t=>((e,t)=>new GV(e,t,new Mz))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},kz)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(CI.Z);var qT=F(4763),Pz=F(1733);class Fz extends Fn.x{constructor(e=1/0,t=1/0,r=Pz.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)d=g;d&&r.splice(0,d+1)}}}var hk=F(3174);function ZV(n,e,t){var r,i;let o,u=!1;return n&&"object"==typeof n?(o=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):o=null!=n?n:1/0,(0,hk.B)({connector:()=>new Fz(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function YV(n,e){return(0,Wi.m)(e)?Ln(()=>n,e):Ln(()=>n)}var fk=F(5222);F(7713);const XV=new Map,jz={activated:!1,tokenObservers:[]},Hz={initialized:!1,enabled:!1};function ki(n){return XV.get(n)||jz}function Ol(n,e){XV.set(n,e)}function KT(){return Hz}class Wz{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function eU(n){if(!ki(n).activated)throw qs.create("use-before-activation",{appName:n.name})}function _k(n,e){return yk.apply(this,arguments)}function yk(){return yk=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const o={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,o)}catch(D){throw qs.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==u.status)throw qs.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(D){throw qs.create("fetch-parse-error",{originalErrorMessage:D.message})}const g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw qs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const v=1e3*Number(g[1]),C=Date.now();return{token:d.token,expireTimeMillis:C+v,issuedAtTimeMillis:C}}),yk.apply(this,arguments)}function Jz(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const zE="firebase-app-check-store";let QT=null;function nU(){return QT||(QT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zE,{keyPath:"compositeKey"})}}catch(t){e(qs.create("storage-open",{originalErrorMessage:t.message}))}}),QT)}function vk(){return vk=(0,Ce.Z)(function*(n,e){const r=(yield nU()).transaction(zE,"readwrite"),o=r.objectStore(zE).put({compositeKey:n,value:e});return new Promise((u,d)=>{o.onsuccess=g=>{u()},r.onerror=g=>{var v;d(qs.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),vk.apply(this,arguments)}const qE=new ea.Yd("@firebase/app-check");function oU(n,e){return(0,P.hl)()?function(n,e){return function(n,e){return vk.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aU(){return KT().enabled}function lU(){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,Ce.Z)(function*(){const n=KT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ck.apply(this,arguments)}const uq={error:"UNKNOWN_ERROR"};function cq(n){return P.US.encodeString(JSON.stringify(n),!1)}function XT(n){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,Ce.Z)(function*(n,e=!1){const t=n.app;eU(t);const r=ki(t);let o,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&JT(g)&&(i=g)}if(!e&&i&&JT(i))return{token:i.token};let d,u=!1;if(aU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_k(Jz(t,yield lU()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),u=!0);const g=yield r.exchangeTokenPromise;return yield oU(t,g),Ol(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),u=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?qE.warn(g.message):qE.error(g),o=g}return i?(d={token:i.token},Ol(t,Object.assign(Object.assign({},r),{token:i})),yield oU(t,i)):d=hq(o),u&&cU(t,d),d}),Ik.apply(this,arguments)}function Dk(n,e){const t=ki(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ol(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function uU(n){const{app:e}=n,t=ki(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new Wz((0,Ce.Z)(function*(){let r;if(r=ki(e).token?yield XT(n,!0):yield XT(n),r.error)throw r.error}),()=>!0,()=>{const t=ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ol(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function cU(n,e){const t=ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function JT(n){return n.expireTimeMillis-Date.now()>0}function hq(n){return{token:cq(uq),error:n}}class fq{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ki(this.app);for(const t of e)Dk(this.app,t.next);return Promise.resolve()}}const yU="app-check-internal";(0,Jo._registerComponent)(new pr.wA("app-check",n=>function(n,e){return new fq(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yU).initialize()})),(0,Jo._registerComponent)(new pr.wA(yU,n=>function(n){return{getToken:e=>XT(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,o=ki(i),u={next:t,error:r,type:e};if(Ol(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,u]})),o.token&&JT(o.token)){const d=o.token;Promise.resolve().then(()=>{t({token:d.token}),uU(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uU(n))}(n,"INTERNAL",e),removeTokenListener:e=>Dk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jo.registerVersion)("@firebase/app-check","0.5.8");class tD{constructor(){return(0,Kn.vb)("app-check")}}"undefined"!=typeof window&&window;var kq=F(7892);const Rk=new h.OlP("angularfire2.auth.use-emulator"),kk=new h.OlP("angularfire2.auth.settings"),Nk=new h.OlP("angularfire2.auth.tenant-id"),Ok=new h.OlP("angularfire2.auth.langugage-code"),Pk=new h.OlP("angularfire2.auth.use-device-language"),Fk=new h.OlP("angularfire.auth.persistence"),Lk=(n,e,t,r,i,o,u,d)=>(0,es.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),u)for(const[v,C]of Object.entries(u))g.settings[v]=C;return d&&g.setPersistence(d),g},[t,r,i,o,u,d]);let Vk=(()=>{class n{constructor(t,r,i,o,u,d,g,v,C,D,O,U){const j=new Fn.x,te=Ze(void 0).pipe((0,qT.Q)(u.outsideAngular),Ln(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,6600)))),(0,nt.U)(()=>(0,es.on)(t,o,r)),(0,nt.U)(ve=>Lk(ve,o,d,v,C,D,g,O)),ZV({bufferSize:1,refCount:!1}));if(Dr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ze(null);else{te.pipe(Go()).subscribe();const Je=te.pipe(Ln(ot=>ot.getRedirectResult().then(Lt=>Lt,()=>null)),Kn.iC,ZV({bufferSize:1,refCount:!1})),st=te.pipe(Ln(ot=>new er.y(Lt=>({unsubscribe:o.runOutsideAngular(()=>ot.onAuthStateChanged($t=>Lt.next($t),$t=>Lt.error($t),()=>Lt.complete()))})))),ht=te.pipe(Ln(ot=>new er.y(Lt=>({unsubscribe:o.runOutsideAngular(()=>ot.onIdTokenChanged($t=>Lt.next($t),$t=>Lt.error($t),()=>Lt.complete()))}))));this.authState=Je.pipe(YV(st),(0,fk.R)(u.outsideAngular),(0,qT.Q)(u.insideAngular)),this.user=Je.pipe(YV(ht),(0,fk.R)(u.outsideAngular),(0,qT.Q)(u.insideAngular)),this.idToken=this.user.pipe(Ln(ot=>ot?(0,_n.D)(ot.getIdToken()):Ze(null))),this.idTokenResult=this.user.pipe(Ln(ot=>ot?(0,_n.D)(ot.getIdTokenResult()):Ze(null))),this.credential=(0,Ii.T)(Je,j,this.authState.pipe(In(ot=>!ot))).pipe((0,nt.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,fk.R)(u.outsideAngular),(0,qT.Q)(u.insideAngular))}return(0,es.pX)(this,te,o,{spy:{apply:(ve,Je,st)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&st.then(ht=>j.next(ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(es.Dh),h.LFG(es.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(Rk,8),h.LFG(kk,8),h.LFG(Nk,8),h.LFG(Ok,8),h.LFG(Pk,8),h.LFG(Fk,8),h.LFG(tD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function bU(n,e){return function(n,e=Zd.z){return new er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Uk(n,e){return bU(n,e).pipe((0,nt.U)(t=>({payload:t,type:"query"})))}function nD(n,e){return Uk(n,e).pipe(vi(void 0),Dp(),(0,nt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const g=i.find(C=>C.doc.ref.isEqual(u.ref)),v=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),o}))}function EU(n,e,t){return nD(n,t).pipe(bi((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Bk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Bk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Bk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Yy(),(0,nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Bk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function wU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class CU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,nt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(vi(void 0),Dp(),In(([r,i])=>i.length>0||!r),(0,nt.U)(([r,i])=>i),Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wU(e);return EU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return Uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Kn.iC)}add(e){return this.ref.add(e)}doc(e){return new IU(this.ref.doc(e),this.afs)}}class IU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=TU(r,t);return new CU(i,o,this.afs)}snapshotChanges(){return function(n,e){return bU(n,e).pipe(vi(void 0),Dp(),(0,nt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(Kn.iC)}}class Vq{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nD(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),In(t=>t.length>0),Kn.iC):nD(this.query,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wU(e);return EU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return Uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Kn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Kn.iC)}}const Uq=new h.OlP("angularfire2.enableFirestorePersistence"),Bq=new h.OlP("angularfire2.firestore.persistenceSettings"),jq=new h.OlP("angularfire2.firestore.settings"),Hq=new h.OlP("angularfire2.firestore.use-emulator");function TU(n,e=(t=>t)){return{query:e(n),ref:n}}let DU=(()=>{class n{constructor(t,r,i,o,u,d,g,v,C,D,O,U,j,te,ve,Je,st){this.schedulers=g;const ht=(0,es.on)(t,d,r),ot=C;D&&Lk(ht,d,O,j,te,ve,U,Je),[this.firestore,this.persistenceEnabled$]=(0,es.cc)(`${ht.name}.firestore`,"AngularFirestore",ht.name,()=>{const Lt=d.runOutsideAngular(()=>ht.firestore());if(o&&Lt.settings(o),ot&&Lt.useEmulator(...ot),i&&!Dr(u)){const $t=()=>{try{return(0,_n.D)(Lt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(En){return"undefined"!=typeof console&&console.warn(En),Ze(!1)}};return[Lt,d.runOutsideAngular($t)]}return[Lt,Ze(!1)]},[o,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=TU(i,r),d=this.schedulers.ngZone.run(()=>o);return new CU(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new Vq(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new IU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(es.Dh),h.LFG(es.xv,8),h.LFG(Uq,8),h.LFG(jq,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(Bq,8),h.LFG(Hq,8),h.LFG(Vk,8),h.LFG(Rk,8),h.LFG(kk,8),h.LFG(Nk,8),h.LFG(Ok,8),h.LFG(Pk,8),h.LFG(Fk,8),h.LFG(tD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$q=(()=>{class n{constructor(t){this.database=t}addIntakes(t,r,i){this.database.collection("intakes").add({nickname:t,intakeValue:r,titleIntake:i,date:new Date})}getAllIntakesDocuments(){return this.database.collection("intakes").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(DU))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gq=["mat-button",""],zq=["*"],Wq=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Kq=uh(NA(OA(class{constructor(n){this._elementRef=n}})));let Zq=(()=>{class n extends Kq{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of Wq)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(eh),h.Y36(Uc,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&h.Gf(NC,5),2&t){let i;h.iGM(i=h.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(h.uIk("disabled",r.disabled||null),h.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[h.qOj],attrs:Gq,ngContentSelectors:zq,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"span",0),h.Hsn(1),h.qZA(),h._UZ(2,"span",1),h._UZ(3,"span",2)),2&t&&(h.xp6(2),h.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),h.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[NC],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Yq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[qA,js],js]}),n})();var SU=F(2869);const WE={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=WE;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new oi.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=WE;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=WE;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var AU=F(8843);new class extends AU.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const o=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<o&&(e=t.shift()));if(this._active=!1,r){for(;++i<o&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends SU.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=WE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(WE.cancelAnimationFrame(t),e._scheduled=void 0)}});let jk,eW=1;const rD={};function MU(n){return n in rD&&(delete rD[n],!0)}const tW={setImmediate(n){const e=eW++;return rD[e]=!0,jk||(jk=Promise.resolve()),jk.then(()=>MU(e)&&n()),e},clearImmediate(n){MU(n)}},{setImmediate:nW,clearImmediate:rW}=tW,iD={setImmediate(...n){const{delegate:e}=iD;return((null==e?void 0:e.setImmediate)||nW)(...n)},clearImmediate(n){const{delegate:e}=iD;return((null==e?void 0:e.clearImmediate)||rW)(n)},delegate:void 0};new class extends AU.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const o=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<o&&(e=t.shift()));if(this._active=!1,r){for(;++i<o&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends SU.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=iD.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(iD.clearImmediate(t),e._scheduled=void 0)}});let cW=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Fn.x,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function(n,e=Zd.P){return function(n){return(0,Hn.e)((e,t)=>{let r=!1,i=null,o=null,u=!1;const d=()=>{if(null==o||o.unsubscribe(),o=null,r){r=!1;const v=i;i=null,t.next(v)}u&&t.complete()},g=()=>{o=null,u&&t.complete()};e.subscribe(new yn.Q(t,v=>{r=!0,i=v,o||(0,Lr.Xf)(n()).subscribe(o=new yn.Q(t,d,g))},()=>{u=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>By(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bs),h.LFG(h.R0b),h.LFG(le,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dW(n,e){if(1&n&&(h.O4$(),h._UZ(0,"circle",4)),2&n){const t=h.oxw(),r=h.MAs(1);h.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),h.uIk("r",t._getCircleRadius())}}function hW(n,e){if(1&n&&(h.O4$(),h._UZ(0,"circle",4)),2&n){const t=h.oxw(),r=h.MAs(1);h.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),h.uIk("r",t._getCircleRadius())}}const pW=uh(class{constructor(n){this._elementRef=n}},"primary"),mW=new h.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class td extends pW{constructor(e,t,r,i,o,u,d,g){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=oi.w0.EMPTY,this.mode="determinate";const v=td._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),v.has(r.head)||v.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),t.isBrowser&&t.SAFARI&&d&&u&&g&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&g.run(()=>u.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Yi(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Yi(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Yi(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=zy(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var r;const t=50*(null!=(r=e.currentScale)?r:1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=td._diameters;let i=r.get(e);if(!i||!i.has(t)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),e.appendChild(o),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}td._diameters=new WeakMap,td.\u0275fac=function(e){return new(e||td)(h.Y36(h.SBq),h.Y36(Bs),h.Y36(le,8),h.Y36(Uc,8),h.Y36(mW),h.Y36(h.sBO),h.Y36(cW),h.Y36(h.R0b))},td.\u0275cmp=h.Xpm({type:td,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(h.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),h.Udp("width",t.diameter,"px")("height",t.diameter,"px"),h.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[h.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(h.O4$(),h.TgZ(0,"svg",0,1),h.YNc(2,dW,1,11,"circle",2),h.YNc(3,hW,1,9,"circle",3),h.qZA()),2&e&&(h.Udp("width",t.diameter,"px")("height",t.diameter,"px"),h.Q6J("ngSwitch","indeterminate"===t.mode),h.uIk("viewBox",t._getViewBox()),h.xp6(2),h.Q6J("ngSwitchCase",!0),h.xp6(1),h.Q6J("ngSwitchCase",!1))},directives:[Ha,Ui],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let yW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[js,xo],js]}),n})(),xU=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bW=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Il(t);return new er.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Fn.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xU))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EW=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new h.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Iu(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Yi(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(n,e=Zd.z){return(0,Hn.e)((t,r)=>{let i=null,o=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const v=o;o=null,r.next(v)}};function g(){const v=u+n,C=e.now();if(C<v)return i=this.schedule(void 0,v-C),void r.add(i);d()}t.subscribe(new yn.Q(r,v=>{o=v,u=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bW),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275dir=h.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),wW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xU]}),n})();const CW=["connectionContainer"],IW=["inputContainer"],TW=["label"];function DW(n,e){1&n&&(h.ynx(0),h.TgZ(1,"div",14),h._UZ(2,"div",15),h._UZ(3,"div",16),h._UZ(4,"div",17),h.qZA(),h.TgZ(5,"div",18),h._UZ(6,"div",15),h._UZ(7,"div",16),h._UZ(8,"div",17),h.qZA(),h.BQk())}function SW(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",19),h.NdJ("cdkObserveContent",function(){return h.CHM(t),h.oxw().updateOutlineGap()}),h.Hsn(1,1),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function AW(n,e){if(1&n&&(h.ynx(0),h.Hsn(1,2),h.TgZ(2,"span"),h._uU(3),h.qZA(),h.BQk()),2&n){const t=h.oxw(2);h.xp6(3),h.Oqu(t._control.placeholder)}}function MW(n,e){1&n&&h.Hsn(0,3,["*ngSwitchCase","true"])}function xW(n,e){1&n&&(h.TgZ(0,"span",23),h._uU(1," *"),h.qZA())}function RW(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"label",20,21),h.NdJ("cdkObserveContent",function(){return h.CHM(t),h.oxw().updateOutlineGap()}),h.YNc(2,AW,4,1,"ng-container",12),h.YNc(3,MW,1,0,"ng-content",12),h.YNc(4,xW,2,0,"span",22),h.qZA()}if(2&n){const t=h.oxw();h.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),h.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),h.uIk("for",t._control.id)("aria-owns",t._control.id),h.xp6(2),h.Q6J("ngSwitchCase",!1),h.xp6(1),h.Q6J("ngSwitchCase",!0),h.xp6(1),h.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function kW(n,e){1&n&&(h.TgZ(0,"div",24),h.Hsn(1,4),h.qZA())}function NW(n,e){if(1&n&&(h.TgZ(0,"div",25),h._UZ(1,"span",26),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function OW(n,e){if(1&n&&(h.TgZ(0,"div"),h.Hsn(1,5),h.qZA()),2&n){const t=h.oxw();h.Q6J("@transitionMessages",t._subscriptAnimationState)}}function PW(n,e){if(1&n&&(h.TgZ(0,"div",30),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.Q6J("id",t._hintLabelId),h.xp6(1),h.Oqu(t.hintLabel)}}function FW(n,e){if(1&n&&(h.TgZ(0,"div",27),h.YNc(1,PW,2,2,"div",28),h.Hsn(2,6),h._UZ(3,"div",29),h.Hsn(4,7),h.qZA()),2&n){const t=h.oxw();h.Q6J("@transitionMessages",t._subscriptAnimationState),h.xp6(1),h.Q6J("ngIf",t.hintLabel)}}const LW=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],VW=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],UW=new h.OlP("MatError"),BW={transitionMessages:QS("transitionMessages",[Tw("enter",_g({opacity:1,transform:"translateY(0%)"})),Dw("void => enter",[_g({opacity:0,transform:"translateY(-5px)"}),Cw("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let $k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n}),n})();const jW=new h.OlP("MatHint");let Gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-label"]]}),n})(),HW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const $W=new h.OlP("MatPrefix"),RU=new h.OlP("MatSuffix");let GW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","matSuffix",""]],features:[h._Bn([{provide:RU,useExisting:n}])]}),n})(),kU=0;const qW=uh(class{constructor(n){this._elementRef=n}},"primary"),WW=new h.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),OU=new h.OlP("MatFormField");let KW=(()=>{class n extends qW{constructor(t,r,i,o,u,d,g){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=u,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Fn.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+kU++,this._labelId="mat-form-field-label-"+kU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==g,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Iu(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(vi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(mg(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(mg(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Ii.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(vi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(vi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(mg(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Sc(this._label.nativeElement,"transitionend").pipe((0,Gt.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${o}`);for(let D=0;D<C.length;D++)C[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,d=0;const g=r.querySelectorAll(i),v=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(C),O=t.children,U=this._getStartEnd(O[0].getBoundingClientRect());let j=0;for(let te=0;te<O.length;te++)j+=O[te].offsetWidth;u=Math.abs(U-D)-5,d=j>0?.75*j+10:0}for(let C=0;C<g.length;C++)g[C].style.width=`${u}px`;for(let C=0;C<v.length;C++)v[C].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(ww,8),h.Y36(WW,8),h.Y36(Bs),h.Y36(h.R0b),h.Y36(Uc,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,$k,5),h.Suo(i,$k,7),h.Suo(i,Gk,5),h.Suo(i,Gk,7),h.Suo(i,HW,5),h.Suo(i,UW,5),h.Suo(i,jW,5),h.Suo(i,$W,5),h.Suo(i,RU,5)),2&t){let o;h.iGM(o=h.CRH())&&(r._controlNonStatic=o.first),h.iGM(o=h.CRH())&&(r._controlStatic=o.first),h.iGM(o=h.CRH())&&(r._labelChildNonStatic=o.first),h.iGM(o=h.CRH())&&(r._labelChildStatic=o.first),h.iGM(o=h.CRH())&&(r._placeholderChild=o.first),h.iGM(o=h.CRH())&&(r._errorChildren=o),h.iGM(o=h.CRH())&&(r._hintChildren=o),h.iGM(o=h.CRH())&&(r._prefixChildren=o),h.iGM(o=h.CRH())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(h.Gf(CW,7),h.Gf(IW,5),h.Gf(TW,5)),2&t){let i;h.iGM(i=h.CRH())&&(r._connectionContainerRef=i.first),h.iGM(i=h.CRH())&&(r._inputContainerRef=i.first),h.iGM(i=h.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&h.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[h._Bn([{provide:OU,useExisting:n}]),h.qOj],ngContentSelectors:VW,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(h.F$t(LW),h.TgZ(0,"div",0),h.TgZ(1,"div",1,2),h.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),h.YNc(3,DW,9,0,"ng-container",3),h.YNc(4,SW,2,1,"div",4),h.TgZ(5,"div",5,6),h.Hsn(7),h.TgZ(8,"span",7),h.YNc(9,RW,5,16,"label",8),h.qZA(),h.qZA(),h.YNc(10,kW,2,0,"div",9),h.qZA(),h.YNc(11,NW,2,4,"div",10),h.TgZ(12,"div",11),h.YNc(13,OW,2,1,"div",12),h.YNc(14,FW,5,2,"div",13),h.qZA(),h.qZA()),2&t&&(h.xp6(3),h.Q6J("ngIf","outline"==r.appearance),h.xp6(1),h.Q6J("ngIf",r._prefixChildren.length),h.xp6(5),h.Q6J("ngIf",r._hasFloatingLabel()),h.xp6(1),h.Q6J("ngIf",r._suffixChildren.length),h.xp6(1),h.Q6J("ngIf","outline"!=r.appearance),h.xp6(1),h.Q6J("ngSwitch",r._getDisplayedMessages()),h.xp6(1),h.Q6J("ngSwitchCase","error"),h.xp6(1),h.Q6J("ngSwitchCase","hint"))},directives:[Fr,Ha,Ui,EW],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[BW.transitionMessages]},changeDetection:0}),n})(),PU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[xo,js,wW],js]}),n})();const FU=cg({passive:!0});let ZW=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return dl.E;const r=Il(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new Fn.x,u="cdk-text-field-autofilled",d=g=>{"cdk-text-field-autofill-start"!==g.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===g.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",d,FU),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",d,FU)}}),o}stopMonitoring(t){const r=Il(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const YW=new h.OlP("MAT_INPUT_VALUE_ACCESSOR"),QW=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let XW=0;const JW=ch(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let e6=(()=>{class n extends JW{constructor(t,r,i,o,u,d,g,v,C,D){super(d,o,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=v,this._formField=D,this._uid="mat-input-"+XW++,this.focused=!1,this.stateChanges=new Fn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(j=>lg().has(j)),this._iOSKeyupListener=j=>{const te=j.target;!te.value&&0===te.selectionStart&&0===te.selectionEnd&&(te.setSelectionRange(1,1),te.setSelectionRange(0,0))};const O=this._elementRef.nativeElement,U=O.nodeName.toLowerCase();this._inputValueAccessor=g||O,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===U,this._isTextarea="textarea"===U,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=O.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Iu(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,o;return null!=(o=null!=(i=this._required)?i:null==(r=null==(t=this.ngControl)?void 0:t.control)?void 0:r.hasValidator(Wv.required))&&o}set required(t){this._required=Iu(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&lg().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Iu(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var r,i;const t=(null==(i=null==(r=this._formField)?void 0:r._hideControlPlaceholder)?void 0:i.call(r))?null:this.placeholder;if(t!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=t,t?o.setAttribute("placeholder",t):o.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){QW.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(Bs),h.Y36(Hs,10),h.Y36(Hr,8),h.Y36(zc,8),h.Y36(DC),h.Y36(YW,10),h.Y36(ZW),h.Y36(h.R0b),h.Y36(OU,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&h.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(h.Ikx("disabled",r.disabled)("required",r.required),h.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),h.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[h._Bn([{provide:$k,useExisting:n}]),h.qOj,h.TTD]}),n})(),t6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[DC],imports:[[LU,PU,js],LU,PU]}),n})();class n6{}class Hh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Hh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Hh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Hh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(d=>-1===o.indexOf(d)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class r6{encodeKey(e){return VU(e)}encodeValue(e){return VU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const s6=/%(\d[a-f0-9])/gi,o6={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function VU(n){return encodeURIComponent(n).replace(s6,(e,t)=>{var r;return null!=(r=o6[t])?r:e})}function UU(n){return`${n}`}class $h{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new r6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[u,d]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],g=t.get(u)||[];g.push(d),t.set(u,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $h({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(UU(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(UU(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class a6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function BU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function jU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function HU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class KE{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Hh),this.context||(this.context=new a6),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+u}}else this.params=new $h,this.urlWithParams=t}serializeBody(){return null===this.body?null:BU(this.body)||jU(this.body)||HU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $h?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||HU(this.body)?null:jU(this.body)?this.body.type||null:BU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $h?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var D;const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,v=e.params||this.params;const C=null!=(D=e.context)?D:this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((O,U)=>O.set(U,e.setHeaders[U]),g)),e.setParams&&(v=Object.keys(e.setParams).reduce((O,U)=>O.set(U,e.setParams[U]),v)),new KE(t,r,o,{params:v,headers:g,context:C,reportProgress:d,responseType:i,withCredentials:u})}}var is=(()=>((is=is||{})[is.Sent=0]="Sent",is[is.UploadProgress=1]="UploadProgress",is[is.ResponseHeader=2]="ResponseHeader",is[is.DownloadProgress=3]="DownloadProgress",is[is.Response=4]="Response",is[is.User=5]="User",is))();class zk extends class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Hh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=is.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new zk({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function qk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let GU=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof KE)o=t;else{let g,v;g=i.headers instanceof Hh?i.headers:new Hh(i.headers),i.params&&(v=i.params instanceof $h?i.params:new $h({fromObject:i.params})),o=new KE(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=Ze(o).pipe(ga(g=>this.handler.handle(g)));if(t instanceof KE||"events"===i.observe)return u;const d=u.pipe(In(g=>g instanceof zk));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe((0,nt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return d.pipe((0,nt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return d.pipe((0,nt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return d.pipe((0,nt.U)(g=>g.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new $h).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,qk(i,r))}post(t,r,i={}){return this.request("POST",t,qk(i,r))}put(t,r,i={}){return this.request("PUT",t,qk(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n6))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const h6=["*"];let sD;function ZE(n){var e;return(null==(e=function(){if(void 0===sD&&(sD=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(sD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return sD}())?void 0:e.createHTML(n))||n}function zU(n){return Error(`Unable to find icon with the name "${n}"`)}function qU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function WU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class lm{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let oD=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new lm(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const u=this._sanitizer.sanitize(h.q3G.HTML,i);if(!u)throw WU(i);const d=ZE(u);return this._addSvgIconConfig(t,r,new lm("",d,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new lm(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(h.q3G.HTML,r);if(!o)throw WU(r);const u=ZE(o);return this._addSvgIconSetConfig(t,new lm("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(h.q3G.RESOURCE_URL,t);if(!r)throw qU(t);const i=this._cachedIconsByUrl.get(r);return i?Ze(aD(i)):this._loadSvgIconFromConfig(new lm(t,null)).pipe((0,hr.b)(o=>this._cachedIconsByUrl.set(r,o)),(0,nt.U)(o=>aD(o)))}getNamedSvgIcon(t,r=""){const i=KU(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):R0(zU(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ze(aD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,nt.U)(r=>aD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Ze(i):UC(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(qi(d=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(h.q3G.RESOURCE_URL,u.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(v)),Ze(null)})))).pipe((0,nt.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw zU(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(o),d=this._extractSvgIconFromSet(u,t,o.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,hr.b)(r=>t.svgText=r),(0,nt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ze(null):this._fetchIcon(t).pipe((0,hr.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const u=o.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const d=this._svgElementFromString(ZE("<svg></svg>"));return d.appendChild(u),this._setSvgAttributes(d,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(ZE("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:u,value:d}=i[o];"id"!==u&&r.setAttribute(u,d)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var v;const{url:r,options:i}=t,o=null!=(v=null==i?void 0:i.withCredentials)&&v;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const u=this._sanitizer.sanitize(h.q3G.RESOURCE_URL,r);if(!u)throw qU(r);const d=this._inProgressUrlFetches.get(u);if(d)return d;const g=this._httpClient.get(u,{responseType:"text",withCredentials:o}).pipe((0,nt.U)(C=>ZE(C)),ru(()=>this._inProgressUrlFetches.delete(u)),(0,hk.B)());return this._inProgressUrlFetches.set(u,g),g}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(KU(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return g6(o)?new lm(o.url,null,o.options):new lm(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(GU,8),h.LFG(ul),h.LFG(le,8),h.LFG(h.qLn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aD(n){return n.cloneNode(!0)}function KU(n,e){return n+":"+e}function g6(n){return!(!n.url||!n.options)}const _6=uh(class{constructor(n){this._elementRef=n}}),y6=new h.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,h.f3M)(le),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),ZU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],b6=ZU.map(n=>`[${n}]`).join(", "),E6=/^url\(['"]?#(.*?)['"]?\)$/;let w6=(()=>{class n extends _6{constructor(t,r,i,o,u){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=u,this._inline=!1,this._currentIconFetch=oi.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Iu(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(u=>{o.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(b6),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)ZU.forEach(u=>{const d=r[o],g=d.getAttribute(u),v=g?g.match(E6):null;if(v){let C=i.get(d);C||(C=[],i.set(d,C)),C.push({name:u,value:v[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,Gt.q)(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(oD),h.$8M("aria-hidden"),h.Y36(y6),h.Y36(h.qLn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(h.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),h.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[h.qOj],ngContentSelectors:h6,decls:1,vars:0,template:function(t,r){1&t&&(h.F$t(),h.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),C6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[js],js]}),n})();function I6(n,e){1&n&&(h.TgZ(0,"h1"),h._uU(1,"OW ! STOP MANGER GROS PORC"),h.qZA())}let T6=(()=>{class n{constructor(t,r){this.currentIntakeValue=1200,this.maxIntakeForTheDay=1300,this.spinnerDiameter=250,this.items=[],this.itemForSelectedUser={nickname:"",currentIntake:"",targetIntake:""},this.selectedUserToDisplay="",this.selectedUserIntakes=[],this.intakeFormGroup=new Cp({titleIntake:new $c("",Wv.minLength(1)),intakeValue:new $c("",Wv.min(1))}),this.serviceIntake=r,t.collection("person").valueChanges().subscribe(i=>{this.items=i,console.log(this.items)})}ngOnInit(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0})}resetTitleIntake(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{titleIntake:""}))}resetIntakeValue(){this.intakeFormGroup.reset(Object.assign(Object.assign({},this.intakeFormGroup.value),{intakeValue:void 0}))}resetAllForm(){this.intakeFormGroup.reset({titleIntake:"",intakeValue:void 0})}getSpinnerProgressValue(){return this.getTotalCurrentIntakesFromSelectedUser()/this.maxIntakeForTheDay*100}getColorStateOfSpinner(){return this.isOverMaxIntake()?"warn":"primary"}getSpinnerTextStyle(){return{"margin-top":"-"+(this.spinnerDiameter/2+16)+"px","padding-bottom":this.spinnerDiameter/2+26+"px"}}isOverMaxIntake(){return this.currentIntakeValue>this.maxIntakeForTheDay}ajouterApport(){this.intakeFormGroup.value.intakeValue&&this.intakeFormGroup.value.titleIntake&&(this.serviceIntake.addIntakes(this.itemForSelectedUser.nickname,this.intakeFormGroup.value.intakeValue,this.intakeFormGroup.value.titleIntake),this.setItemsForSelectedUser(),this.resetAllForm())}goToLaura(){this.selectedUserToDisplay="Laura",this.setItemsForSelectedUser()}goToArnaud(){this.selectedUserToDisplay="Arnaud",this.setItemsForSelectedUser()}getTotalCurrentIntakesFromSelectedUser(){let t=0;return this.selectedUserIntakes.forEach(r=>{t+=r.intakeValue}),t}setIntakesFromSelectedUser(){this.serviceIntake.getAllIntakesDocuments().subscribe(t=>{this.selectedUserIntakes=[],t.forEach(r=>{r.dateFormatted=r.date.toDate(),r.nickname===this.selectedUserToDisplay&&r.dateFormatted.getDate()===(new Date).getDate()&&r.dateFormatted.getMonth()===(new Date).getMonth()&&r.dateFormatted.getFullYear()===(new Date).getFullYear()&&this.selectedUserIntakes.push(r)})})}setItemsForSelectedUser(){this.items.forEach(t=>{t.nickname===this.selectedUserToDisplay&&(this.itemForSelectedUser=t)}),this.setIntakesFromSelectedUser()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(DU),h.Y36($q))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-main"]],decls:27,vars:10,consts:[[1,"formIntake"],[3,"formGroup"],["mat-raised-button","",1,"topButton",3,"click"],[4,"ngIf"],[1,"spinnerContainer"],[1,"progressSpinner",3,"color","diameter","strokeWidth","mode","value"],[1,"textInSpinner",3,"ngStyle"],["appearance","standard"],["matInput","","type","text","formControlName","titleIntake"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","number","formControlName","intakeValue"],["mat-raised-button","","aria-label","Ajouter cet apport",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"form",1),h.TgZ(2,"button",2),h.NdJ("click",function(){return r.goToLaura()}),h._uU(3,"Laura"),h.qZA(),h.TgZ(4,"button",2),h.NdJ("click",function(){return r.goToArnaud()}),h._uU(5,"Arnaud"),h.qZA(),h.YNc(6,I6,2,0,"h1",3),h.TgZ(7,"div",4),h._UZ(8,"mat-progress-spinner",5),h.qZA(),h.TgZ(9,"div",6),h._uU(10),h.qZA(),h.TgZ(11,"mat-form-field",7),h.TgZ(12,"mat-label"),h._uU(13,"Titre de l'apport calorique"),h.qZA(),h._UZ(14,"input",8),h.TgZ(15,"button",9),h.NdJ("click",function(){return r.resetTitleIntake()}),h.TgZ(16,"mat-icon"),h._uU(17,"close"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(18,"mat-form-field",7),h.TgZ(19,"mat-label"),h._uU(20,"Montant calorique"),h.qZA(),h._UZ(21,"input",10),h.TgZ(22,"button",9),h.NdJ("click",function(){return r.resetIntakeValue()}),h.TgZ(23,"mat-icon"),h._uU(24,"close"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(25,"button",11),h.NdJ("click",function(){return r.ajouterApport()}),h._uU(26," Ajouter l'apport "),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(1),h.Q6J("formGroup",r.intakeFormGroup),h.xp6(5),h.Q6J("ngIf",r.isOverMaxIntake()),h.xp6(2),h.Q6J("color",r.getColorStateOfSpinner())("diameter",r.spinnerDiameter)("strokeWidth",15)("mode","determinate")("value",r.getSpinnerProgressValue()),h.xp6(1),h.Q6J("ngStyle",r.getSpinnerTextStyle()),h.xp6(1),h.AsE(" ",r.getTotalCurrentIntakesFromSelectedUser()," / ",r.itemForSelectedUser.targetIntake," "))},directives:[cI,eb,zc,Zq,Fr,td,ni,KW,Gk,e6,hh,Jv,a_,GW,w6,i_],styles:[".formIntake[_ngcontent-%COMP%]{margin:auto;width:min-content;text-align:center}.formIntake[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.spinnerContainer[_ngcontent-%COMP%]{margin:35px 0 10px}.textInSpinner[_ngcontent-%COMP%]{position:relative;font-size:26px;text-align:center}.topButton[_ngcontent-%COMP%]{margin:10px}"]}),n})(),D6=(()=>{class n{constructor(t){this.title="foodTrackingApp",t.available.subscribe(r=>{t.activateUpdate().then(i=>{document.location.reload()})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(j0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"globalContainer"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"app-topbar"),h._UZ(2,"app-main"),h.qZA())},directives:[vp,T6],styles:[".globalContainer[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#000c}"]}),n})();const QU="@firebase/database";let Wk="";function JU(n){Wk=n}class M6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class x6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const eB=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new M6(e)}}catch(e){}return new x6},um=eB("localStorage"),Kk=eB("sessionStorage"),ey=new ea.Yd("@firebase/database"),tB=function(){let n=1;return function(){return n++}}(),nB=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},YE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=YE.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let cm=null,rB=!0;const iB=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ey.logLevel=ea.in.VERBOSE,cm=ey.log.bind(ey),e&&Kk.set("logging_enabled",!0)):"function"==typeof n?cm=n:(cm=null,Kk.remove("logging_enabled"))},Ni=function(...n){if(!0===rB&&(rB=!1,null===cm&&!0===Kk.get("logging_enabled")&&iB(!0)),cm){const e=YE.apply(null,n);cm(e)}},QE=function(n){return function(...e){Ni(n,...e)}},Zk=function(...n){const e="FIREBASE INTERNAL ERROR: "+YE(...n);ey.error(e)},Fu=function(...n){const e=`FIREBASE FATAL ERROR: ${YE(...n)}`;throw ey.error(e),new Error(e)},Is=function(...n){const e="FIREBASE WARNING: "+YE(...n);ey.warn(e)},lD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nd="[MIN_NAME]",Lu="[MAX_NAME]",dm=function(n,e){if(n===e)return 0;if(n===nd||e===Lu)return-1;if(e===nd||n===Lu)return 1;{const t=uD(n),r=uD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},N6=function(n,e){return n===e?0:n<e?-1:1},XE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},Yk=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=Yk(n[e[r]]);return t+="}",t},sB=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const oB=function(n){(0,P.hu)(!lD(n),"Invalid JSON number");const r=1023;let i,o,u,d,g;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const C=v.join("");let D="";for(g=0;g<64;g+=8){let O=parseInt(C.substr(g,8),2).toString(16);1===O.length&&(O="0"+O),D+=O}return D.toLowerCase()},L6=new RegExp("^-?(0*)\\d{1,10}$"),aB=-2147483648,Qk=2147483647,uD=function(n){if(L6.test(n)){const e=Number(n);if(e>=aB&&e<=Qk)return e}return null},ty=function(n){try{n()}catch(e){setTimeout(()=>{throw Is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},JE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class U6{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class B6{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ni("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}let e0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const hB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mB="websocket",gB="long_polling";class Jk{constructor(e,t,r,i,o=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=um.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&um.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function _B(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===mB)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==gB)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class H6{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const eN={},tN={};function nN(n){const e=n.toString();return eN[e]||(eN[e]=new H6),eN[e]}class G6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ty(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Gh{constructor(e,t,r,i,o,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=QE(e),this.stats_=nN(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),_B(t,gB,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new G6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rN((...o)=>{const[u,d,g,v,C]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&hB.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gh.forceAllow_=!0}static forceDisallow(){Gh.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Gh.forceAllow_&&(Gh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=sB(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class rN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=tB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=rN.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){Ni("frame writing exception"),d.stack&&Ni(d.stack),Ni(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ni("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ni("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let dD=null;"undefined"!=typeof MozWebSocket?dD=MozWebSocket:"undefined"!=typeof WebSocket&&(dD=WebSocket);let ny=(()=>{class n{constructor(t,r,i,o,u,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=QE(this.connId),this.stats_=nN(r),this.connURL=n.connectionURL_(r,d,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const d={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&hB.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),o&&(d.ac=o),u&&(d.p=u),_B(t,mB,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,um.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${Wk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,g=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;g&&(u.proxy={origin:g})}this.mySock=new dD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==dD&&!n.forceDisallow_}static previouslyFailed(){return um.isInMemoryStorage||!0===um.get("previous_websocket_failure")}markConnectionHealthy(){um.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=sB(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),IB=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Gh,ny]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ny&&ny.isAvailable();let i=r&&!ny.previouslyFailed();if(t.webSocketOnly&&(r||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ny];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class RB{constructor(e,t,r,i,o,u,d,g,v,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=QE("c:"+this.id+":"),this.transportManager_=new IB(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=JE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=XE("t",e),r=XE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=XE("t",e),r=XE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=XE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Zk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),JE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):JE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(um.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kB{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class NB{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class hD extends NB{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hD}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bn(){return new Rn("")}function Yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function zh(n){return n.pieces_.length-n.pieceNum_}function Gn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Rn(n.pieces_,e)}function sN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function t0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function FB(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Rn(e,0)}function lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Rn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Rn(t,0)}function Qt(n){return n.pieceNum_>=n.pieces_.length}function Ws(n,e){const t=Yt(n),r=Yt(e);if(null===t)return e;if(t===r)return Ws(Gn(n),Gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hK(n,e){const t=t0(n,0),r=t0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=dm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function oN(n,e){if(zh(n)!==zh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Oa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(zh(n)>zh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class fK{constructor(e,t){this.errorPrefix_=t,this.parts_=t0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);LB(this)}}function LB(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+hm(n))}function hm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class aN extends NB{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new aN}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const n0=1e3;let pD,fm=(()=>{class n extends kB{constructor(t,r,i,o,u,d,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=QE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=n0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&hD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,P.Pz)(u)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},o={action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[u];void 0===d||o!==d||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const v=g.d,C=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(i,o),t.onComplete&&t.onComplete(C,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,d=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Zk("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=n0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=n0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=n0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,v=null;const C=function(){v?v.close():(g=!0,o())};t.realtime_={close:C,sendRequest:function(U){(0,P.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(U)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,j]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);g?Ni("getToken() completed but was canceled"):(Ni("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=j&&j.token,v=new RB(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,te=>{Is(te+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(U){t.log_("Failed to get token: "+U),g||(t.repoInfo_.nodeAdmin&&Is(U),C())}}})()}interrupt(t){Ni("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ni("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=n0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>Yk(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Rn(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Ni("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ni("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Wk.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=hD.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class fD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jt(nd,e),i=new Jt(nd,t);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class BB extends fD{static get __EMPTY_NODE(){return pD}static set __EMPTY_NODE(e){pD=e}compare(e,t){return dm(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(Lu,pD)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,pD)}toString(){return".key"}}const Vu=new BB;class mD{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let uN,Pl=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:wo.EMPTY_NODE,this.right=null!=u?u:wo.EMPTY_NODE}copy(t,r,i,o,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return wo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class wo{constructor(e,t=wo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new wo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pl.BLACK,null,null))}remove(e){return new wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mD(this.root_,null,this.comparator_,!0,e)}}function wK(n,e){return dm(n.name,e.name)}function lN(n,e){return dm(n,e)}wo.EMPTY_NODE=new class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Pl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const jB=function(n){return"number"==typeof n?"number:"+oB(n):"string:"+n},HB=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===uN||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===uN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $B,GB,zB,ry=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),HB(this.priorityNode_)}static set __childrenNodeConstructor(t){$B=t}static get __childrenNodeConstructor(){return $B}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Qt(t)?this:".priority"===Yt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Yt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===zh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jB(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?oB(this.value_):this.value_,this.lazyHash_=nB(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(o>=0,"Unknown leaf type: "+r),(0,P.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yn=new class extends fD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?dm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(Lu,new ry("[PRIORITY-POST]",zB))}makePost(e,t){const r=GB(e);return new Jt(t,new ry("[PRIORITY-POST]",r))}toString(){return".priority"}},SK=Math.log(2);class AK{constructor(e){this.count=parseInt(Math.log(e+1)/SK,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gD=function(n,e,t,r){n.sort(e);const i=function(g,v){const C=v-g;let D,O;if(0===C)return null;if(1===C)return D=n[g],O=t?t(D):D,new Pl(O,D.node,Pl.BLACK,null,null);{const U=parseInt(C/2,10)+g,j=i(g,U),te=i(U+1,v);return D=n[U],O=t?t(D):D,new Pl(O,D.node,Pl.BLACK,j,te)}},d=function(g){let v=null,C=null,D=n.length;const O=function(j,te){const ve=D-j,Je=D;D-=j;const st=i(ve+1,Je),ht=n[ve],ot=t?t(ht):ht;U(new Pl(ot,ht.node,te,null,st))},U=function(j){v?(v.left=j,v=j):(C=j,v=j)};for(let j=0;j<g.count;++j){const te=g.nextBitIsOne(),ve=Math.pow(2,g.count-(j+1));te?O(ve,Pl.BLACK):(O(ve,Pl.BLACK),O(ve,Pl.RED))}return C}(new AK(n.length));return new wo(r||e,d)};let cN;const iy={};class rd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(iy&&Yn,"ChildrenNode.ts has not been loaded"),cN=cN||new rd({".priority":iy},{".priority":Yn}),cN}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof wo?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Vu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Jt.Wrap);let d,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();d=i?gD(r,e.getCompare()):iy;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const C=Object.assign({},this.indexes_);return C[g]=d,new rd(C,v)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,o)=>{const u=(0,P.DV)(this.indexSet_,o);if((0,P.hu)(u,"Missing index implementation for "+o),i===iy){if(u.isDefinedOn(e.node)){const d=[],g=t.getIterator(Jt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&d.push(v),v=g.getNext();return d.push(e),gD(d,u.getCompare())}return iy}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new Jt(e.name,d))),g.insert(e,e.node)}});return new rd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===iy)return i;{const o=t.get(e.name);return o?i.remove(new Jt(e.name,o)):i}});return new rd(r,this.indexSet_)}}let r0,Bt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&HB(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return r0||(r0=new n(new wo(lN),null,rd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||r0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?r0:r}}getChild(t){const r=Yt(t);return null===r?this:this.getImmediateChild(r).getChild(Gn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jt(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?r0:this.priorityNode_;return new n(o,d,u)}}updateChild(t,r){const i=Yt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Yt(t)||1===zh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Gn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(Yn,(d,g)=>{r[d]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):u=!1}),!t&&u&&o<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+jB(this.getPriority().val())+":"),this.forEachChild(Yn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":nB(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new Jt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Jt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===s0?-1:0}withIndex(t){if(t===Vu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Vu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Yn),o=r.getIterator(Yn);let u=i.getNext(),d=o.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=o.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Vu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const s0=new class extends Bt{constructor(){super(new wo(lN),Bt.EMPTY_NODE,rd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function gr(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ry(n,gr(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const o=gr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(gr(e))}{const t=[];let r=!1;if(Oi(n,(u,d)=>{if("."!==u.substring(0,1)){const g=gr(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Jt(u,g)))}}),0===t.length)return Bt.EMPTY_NODE;const o=gD(t,wK,u=>u.name,lN);if(r){const u=gD(t,Yn.getCompare());return new Bt(o,gr(e),new rd({".priority":u},{".priority":Yn}))}return new Bt(o,gr(e),rd.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(nd,Bt.EMPTY_NODE)},MAX:{value:new Jt(Lu,s0)}}),BB.__EMPTY_NODE=Bt.EMPTY_NODE,ry.__childrenNodeConstructor=Bt,function(n){uN=n}(s0),function(n){zB=n}(s0),function(n){GB=n}(gr);class dN extends fD{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Qt(e)&&".priority"!==Yt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?dm(e.name,t.name):o}makePost(e,t){const r=gr(e),i=Bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(t,i)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,s0);return new Jt(Lu,e)}toString(){return t0(this.indexPath_,0).join("/")}}const hN=new class extends fD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?dm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const r=gr(e);return new Jt(t,r)}toString(){return".value"}},sy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kK=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=sy.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=sy.charAt(e[i]);return(0,P.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),KB=function(n){if(n===""+Qk)return"-";const e=uD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Lu;const o=sy.charAt(sy.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},ZB=function(n){if(n===""+aB)return nd;const e=uD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Qk:(delete t[t.length-1],t.join("")):(t[t.length-1]=sy.charAt(sy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function YB(n){return{type:"value",snapshotNode:n}}function oy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function o0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function a0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class pN{constructor(e){this.index_=e}updateChild(e,t,r,i,o,u){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(o0(t,d)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(oy(t,r)):u.trackChildChange(a0(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Yn,(i,o)=>{t.hasChild(i)||r.trackChildChange(o0(i,o))}),t.isLeafNode()||t.forEachChild(Yn,(i,o)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(a0(i,o,u))}else r.trackChildChange(oy(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class l0{constructor(e){this.indexedFilter_=new pN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=l0.getStartPost_(e),this.endPost_=l0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,u){return this.matches(new Jt(t,r))||(r=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Bt.EMPTY_NODE);const o=this;return t.forEachChild(Yn,(u,d)=>{o.matches(new Jt(u,d))||(i=i.updateImmediateChild(u,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class OK{constructor(e){this.rangedFilter_=new l0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,u){return this.rangedFilter_.matches(new Jt(t,r))||(r=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,u):this.fullLimitUpdateChild_(e,t,r,o,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Bt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const d=o.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let o,u,d,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Bt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(O,U)=>D(U,O)}else g=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let v=0,C=!1;for(;g.hasNext();){const D=g.getNext();!C&&d(o,D)<=0&&(C=!0),C&&v<this.limit_&&d(D,u)<=0?v++:i=i.updateImmediateChild(D.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let u;if(this.reverse_){const D=this.index_.getCompare();u=(O,U)=>D(U,O)}else u=this.index_.getCompare();const d=e;(0,P.hu)(d.numChildren()===this.limit_,"");const g=new Jt(t,r),v=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(d.hasChild(t)){const D=d.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=O&&(O.name===t||d.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const U=null==O?1:u(O,g);if(C&&!r.isEmpty()&&U>=0)return null!=o&&o.trackChildChange(a0(t,r,D)),d.updateImmediateChild(t,r);{null!=o&&o.trackChildChange(o0(t,D));const te=d.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=o&&o.trackChildChange(oy(O.name,O.node)),te.updateImmediateChild(O.name,O.node)):te}}return r.isEmpty()?e:C&&u(v,g)>=0?(null!=o&&(o.trackChildChange(o0(v.name,v.node)),o.trackChildChange(oy(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(v.name,Bt.EMPTY_NODE)):e}}class _D{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yn}copy(){const e=new _D;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function gN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function yD(n,e){const t=n.copy();return t.index_=e,t}function QB(n){const e={};if(n.isDefault())return e;let t;return n.index_===Yn?t="$priority":n.index_===hN?t="$value":n.index_===Vu?t="$key":((0,P.hu)(n.index_ instanceof dN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function XB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Yn&&(e.i=n.index_.toString()),e}class vD extends kB{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=QE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=vD.getListenId_(e,r),d={};this.listens_[u]=d;const g=QB(e._queryParams);this.restRequest_(o+".json",g,(v,C)=>{let D=C;if(404===v&&(D=null,v=null),null===v&&this.onDataUpdate_(o,D,!1,r),(0,P.DV)(this.listens_,u)===d){let O;O=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(O,null)}})}unlisten(e,t){const r=vD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=QB(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(o,u)=>{let d=u;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,P.cI)(d.responseText)}catch(v){Is("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&Is("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class BK{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bD(){return{value:null,children:new Map}}function ay(n,e,t){if(Qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Yt(e);n.children.has(r)||n.children.set(r,bD()),ay(n.children.get(r),e=Gn(e),t)}}function _N(n,e){if(Qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Yn,(r,i)=>{ay(n,new Rn(r),i)}),_N(n,e)}}if(n.children.size>0){const t=Yt(e);return e=Gn(e),n.children.has(t)&&_N(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function yN(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{yN(i,new Rn(e.toString()+"/"+r),t)})}class HK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class zK{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new HK(e);const r=1e4+2e4*Math.random();JE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,o)=>{o>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),JE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pa||(Pa={})),Pa))();function EN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ED{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Qt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Rn(e));return new ED(bn(),t,this.revert)}}return(0,P.hu)(Yt(this.path)===e,"operationForChild called for unrelated child."),new ED(Gn(this.path),this.affectedTree,this.revert)}}class u0{constructor(e,t){this.source=e,this.path=t,this.type=Pa.LISTEN_COMPLETE}operationForChild(e){return Qt(this.path)?new u0(this.source,bn()):new u0(this.source,Gn(this.path))}}class pm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pa.OVERWRITE}operationForChild(e){return Qt(this.path)?new pm(this.source,bn(),this.snap.getImmediateChild(e)):new pm(this.source,Gn(this.path),this.snap)}}class ly{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pa.MERGE}operationForChild(e){if(Qt(this.path)){const t=this.children.subtree(new Rn(e));return t.isEmpty()?null:t.value?new pm(this.source,bn(),t.value):new ly(this.source,bn(),t)}return(0,P.hu)(Yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ly(this.source,Gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Yt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class qK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function c0(n,e,t,r,i,o){const u=r.filter(d=>d.type===t);u.sort((d,g)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Jt(e.childName,e.snapshotNode),i=new Jt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),u.forEach(d=>{const g=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,o);i.forEach(v=>{v.respondsTo(d.type)&&e.push(v.createEvent(g,n.query_))})})}function wD(n,e){return{eventCache:n,serverCache:e}}function d0(n,e,t,r){return wD(new qh(e,t,r),n.serverCache)}function e2(n,e,t,r){return wD(n.eventCache,new qh(e,t,r))}function CD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function mm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wN;class Qn{constructor(e,t=(()=>(wN||(wN=new wo(N6)),wN))()){this.value=e,this.children=t}static fromObject(e){let t=new Qn(null);return Oi(e,(r,i)=>{t=t.set(new Rn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bn(),value:this.value};if(Qt(e))return null;{const r=Yt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Gn(e),t);return null!=o?{path:lr(new Rn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qt(e))return this;{const t=Yt(e),r=this.children.get(t);return null!==r?r.subtree(Gn(e)):new Qn(null)}}set(e,t){if(Qt(e))return new Qn(t,this.children);{const r=Yt(e),o=(this.children.get(r)||new Qn(null)).set(Gn(e),t),u=this.children.insert(r,o);return new Qn(this.value,u)}}remove(e){if(Qt(e))return this.children.isEmpty()?new Qn(null):new Qn(null,this.children);{const t=Yt(e),r=this.children.get(t);if(r){const i=r.remove(Gn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Qn(null):new Qn(this.value,o)}return this}}get(e){if(Qt(e))return this.value;{const t=Yt(e),r=this.children.get(t);return r?r.get(Gn(e)):null}}setTree(e,t){if(Qt(e))return t;{const r=Yt(e),o=(this.children.get(r)||new Qn(null)).setTree(Gn(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Qn(this.value,u)}}fold(e){return this.fold_(bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Qt(e))return null;{const o=Yt(e),u=this.children.get(o);return u?u.findOnPath_(Gn(e),lr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bn(),t)}foreachOnPath_(e,t,r){if(Qt(e))return this;{this.value&&r(t,this.value);const i=Yt(e),o=this.children.get(i);return o?o.foreachOnPath_(Gn(e),lr(t,i),r):new Qn(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Fl{constructor(e){this.writeTree_=e}static empty(){return new Fl(new Qn(null))}}function h0(n,e,t){if(Qt(e))return new Fl(new Qn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=Ws(i,e);return o=o.updateChild(u,t),new Fl(n.writeTree_.set(i,o))}{const i=new Qn(t),o=n.writeTree_.setTree(e,i);return new Fl(o)}}}function CN(n,e,t){let r=n;return Oi(t,(i,o)=>{r=h0(r,lr(e,i),o)}),r}function t2(n,e){if(Qt(e))return Fl.empty();{const t=n.writeTree_.setTree(e,new Qn(null));return new Fl(t)}}function IN(n,e){return null!=gm(n,e)}function gm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ws(t.path,e)):null}function n2(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Yn,(r,i)=>{e.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jt(r,i.value))}),e}function Wh(n,e){if(Qt(e))return n;{const t=gm(n,e);return new Fl(null!=t?new Qn(t):n.writeTree_.subtree(e))}}function TN(n){return n.writeTree_.isEmpty()}function uy(n,e){return r2(bn(),n.writeTree_,e)}function r2(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,P.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=r2(lr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(lr(n,".priority"),r)),t}}function ID(n,e){return u2(e,n)}function t8(n,e){if(n.snap)return Oa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Oa(lr(n.path,t),e))return!0;return!1}function r8(n){return n.visible}function s2(n,e,t){let r=Fl.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let d;if(o.snap)Oa(t,u)?(d=Ws(t,u),r=h0(r,d,o.snap)):Oa(u,t)&&(d=Ws(u,t),r=h0(r,bn(),o.snap.getChild(d)));else{if(!o.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Oa(t,u))d=Ws(t,u),r=CN(r,d,o.children);else if(Oa(u,t))if(d=Ws(u,t),Qt(d))r=CN(r,bn(),o.children);else{const g=(0,P.DV)(o.children,Yt(d));if(g){const v=g.getChild(Gn(d));r=h0(r,bn(),v)}}}}}return r}function o2(n,e,t,r,i){if(r||i){const o=Wh(n.visibleWrites,e);return!i&&TN(o)?t:i||null!=t||IN(o,bn())?uy(s2(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Oa(v.path,e)||Oa(e,v.path))},e),t||Bt.EMPTY_NODE):null}{const o=gm(n.visibleWrites,e);if(null!=o)return o;{const u=Wh(n.visibleWrites,e);return TN(u)?t:null!=t||IN(u,bn())?uy(u,t||Bt.EMPTY_NODE):null}}}function TD(n,e,t,r){return o2(n.writeTree,n.treePath,e,t,r)}function DN(n,e){return function(n,e,t){let r=Bt.EMPTY_NODE;const i=gm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yn,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=Wh(n.visibleWrites,e);return t.forEachChild(Yn,(u,d)=>{const g=uy(Wh(o,new Rn(u)),d);r=r.updateImmediateChild(u,g)}),n2(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return n2(Wh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function a2(n,e,t,r){return function(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=lr(e,t);if(IN(n.visibleWrites,o))return null;{const u=Wh(n.visibleWrites,o);return TN(u)?i.getChild(t):uy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function DD(n,e){return function(n,e){return gm(n.visibleWrites,e)}(n.writeTree,lr(n.treePath,e))}function SN(n,e,t){return function(n,e,t,r){const i=lr(e,t),o=gm(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?uy(Wh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function l2(n,e){return u2(lr(n.treePath,e),n.writeTree)}function u2(n,e){return{treePath:n,writeTree:e}}class d8{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,a0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,o0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,oy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,a0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const c2=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class AN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new qh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return SN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:mm(this.viewCache_),o=function(n,e,t,r,i,o){return function(n,e,t,r,i,o,u){let d;const g=Wh(n.visibleWrites,e),v=gm(g,bn());if(null!=v)d=v;else{if(null==t)return[];d=uy(g,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const C=[],D=u.getCompare(),O=o?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let U=O.getNext();for(;U&&C.length<i;)0!==D(U,r)&&C.push(U),U=O.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function d2(n,e,t,r,i,o){const u=e.eventCache;if(null!=DD(r,t))return e;{let d,g;if(Qt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=mm(e),D=DN(r,v instanceof Bt?v:Bt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,o)}else{const v=TD(r,mm(e));d=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const v=Yt(t);if(".priority"===v){(0,P.hu)(1===zh(t),"Can't have a priority with additional path components");const C=u.getNode();g=e.serverCache.getNode();const D=a2(r,t,C,g);d=null!=D?n.filter.updatePriority(C,D):u.getNode()}else{const C=Gn(t);let D;if(u.isCompleteForChild(v)){g=e.serverCache.getNode();const O=a2(r,t,u.getNode(),g);D=null!=O?u.getNode().getImmediateChild(v).updateChild(C,O):u.getNode().getImmediateChild(v)}else D=SN(r,v,e.serverCache);d=null!=D?n.filter.updateChild(u.getNode(),v,D,C,i,o):u.getNode()}}return d0(e,d,u.isFullyInitialized()||Qt(t),n.filter.filtersNodes())}}function SD(n,e,t,r,i,o,u,d){const g=e.serverCache;let v;const C=u?n.filter:n.filter.getIndexedFilter();if(Qt(t))v=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){const U=g.getNode().updateChild(t,r);v=C.updateFullNode(g.getNode(),U,null)}else{const U=Yt(t);if(!g.isCompleteForPath(t)&&zh(t)>1)return e;const j=Gn(t),ve=g.getNode().getImmediateChild(U).updateChild(j,r);v=".priority"===U?C.updatePriority(g.getNode(),ve):C.updateChild(g.getNode(),U,ve,j,c2,null)}const D=e2(e,v,g.isFullyInitialized()||Qt(t),C.filtersNodes());return d2(n,D,t,i,new AN(i,D,o),d)}function MN(n,e,t,r,i,o,u){const d=e.eventCache;let g,v;const C=new AN(i,e,o);if(Qt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=d0(e,v,!0,n.filter.filtersNodes());else{const D=Yt(t);if(".priority"===D)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=d0(e,v,d.isFullyInitialized(),d.isFiltered());else{const O=Gn(t),U=d.getNode().getImmediateChild(D);let j;if(Qt(O))j=r;else{const te=C.getCompleteChild(D);j=null!=te?".priority"===sN(O)&&te.getChild(FB(O)).isEmpty()?te:te.updateChild(O,r):Bt.EMPTY_NODE}g=U.equals(j)?e:d0(e,n.filter.updateChild(d.getNode(),D,j,O,C,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function h2(n,e){return n.eventCache.isCompleteForChild(e)}function f2(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xN(n,e,t,r,i,o,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=Qt(t)?r:new Qn(null).setTree(t,r);const C=e.serverCache.getNode();return v.children.inorderTraversal((D,O)=>{if(C.hasChild(D)){const j=f2(0,e.serverCache.getNode().getImmediateChild(D),O);g=SD(n,g,new Rn(D),j,i,o,u,d)}}),v.children.inorderTraversal((D,O)=>{const U=!e.serverCache.isCompleteForChild(D)&&void 0===O.value;if(!C.hasChild(D)&&!U){const te=f2(0,e.serverCache.getNode().getImmediateChild(D),O);g=SD(n,g,new Rn(D),te,i,o,u,d)}}),g}class E8{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new pN(r.getIndex()),o=function(n){return n.loadsAllData()?new pN(n.getIndex()):n.hasLimit()?new OK(n):new l0(n)}(r);this.processor_=function(n){return{filter:n}}(o);const u=t.serverCache,d=t.eventCache,g=i.updateFullNode(Bt.EMPTY_NODE,u.getNode(),null),v=o.updateFullNode(Bt.EMPTY_NODE,d.getNode(),null),C=new qh(g,u.isFullyInitialized(),i.filtersNodes()),D=new qh(v,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=wD(D,C),this.eventGenerator_=new qK(this.query_)}get query(){return this.query_}}function I8(n,e){const t=mm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Qt(e)&&!t.getImmediateChild(Yt(e)).isEmpty())?t.getChild(e):null}function p2(n){return 0===n.eventRegistrations_.length}function m2(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function g2(n,e,t,r){e.type===Pa.MERGE&&null!==e.source.queryId&&((0,P.hu)(mm(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(CD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function(n,e,t,r,i){const o=new d8;let u,d;if(t.type===Pa.OVERWRITE){const v=t;v.source.fromUser?u=MN(n,e,v.path,v.snap,r,i,o):((0,P.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered()&&!Qt(v.path),u=SD(n,e,v.path,v.snap,r,i,d,o))}else if(t.type===Pa.MERGE){const v=t;v.source.fromUser?u=function(n,e,t,r,i,o,u){let d=e;return r.foreach((g,v)=>{const C=lr(t,g);h2(e,Yt(C))&&(d=MN(n,d,C,v,i,o,u))}),r.foreach((g,v)=>{const C=lr(t,g);h2(e,Yt(C))||(d=MN(n,d,C,v,i,o,u))}),d}(n,e,v.path,v.children,r,i,o):((0,P.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered(),u=xN(n,e,v.path,v.children,r,i,d,o))}else if(t.type===Pa.ACK_USER_WRITE){const v=t;u=v.revert?function(n,e,t,r,i,o){let u;if(null!=DD(r,t))return e;{const d=new AN(r,e,i),g=e.eventCache.getNode();let v;if(Qt(t)||".priority"===Yt(t)){let C;if(e.serverCache.isFullyInitialized())C=TD(r,mm(e));else{const D=e.serverCache.getNode();(0,P.hu)(D instanceof Bt,"serverChildren would be complete if leaf node"),C=DN(r,D)}C=C,v=n.filter.updateFullNode(g,C,o)}else{const C=Yt(t);let D=SN(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=g.getImmediateChild(C)),v=null!=D?n.filter.updateChild(g,C,D,Gn(t),d,o):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,Bt.EMPTY_NODE,Gn(t),d,o):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=TD(r,mm(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=DD(r,bn()),d0(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,o):function(n,e,t,r,i,o,u){if(null!=DD(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Qt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return SD(n,e,t,g.getNode().getChild(t),i,o,d,u);if(Qt(t)){let v=new Qn(null);return g.getNode().forEachChild(Vu,(C,D)=>{v=v.set(new Rn(C),D)}),xN(n,e,t,v,i,o,d,u)}return e}{let v=new Qn(null);return r.foreach((C,D)=>{const O=lr(t,C);g.isCompleteForPath(O)&&(v=v.set(C,g.getNode().getChild(O)))}),xN(n,e,t,v,i,o,d,u)}}(n,e,v.path,v.affectedTree,r,i,o)}else{if(t.type!==Pa.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);u=function(n,e,t,r,i){const o=e.serverCache;return d2(n,e2(e,o.getNode(),o.isFullyInitialized()||Qt(t),o.isFiltered()),t,r,c2,i)}(n,e,t.path,r,o)}const g=o.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=CD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(YB(CD(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,P.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,_2(n,o.changes,o.viewCache.eventCache.getNode(),null)}function _2(n,e,t,r){return function(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),c0(n,i,"child_removed",e,r,t),c0(n,i,"child_added",e,r,t),c0(n,i,"child_moved",o,r,t),c0(n,i,"child_changed",e,r,t),c0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let AD,xD;class y2{constructor(){this.views=new Map}}function RN(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,P.hu)(null!=o,"SyncTree gave us an op for an invalid query."),g2(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(g2(u,e,t,r));return o}}function v2(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=TD(t,i?r:null),g=!1;d?g=!0:r instanceof Bt?(d=DN(t,r),g=!1):(d=Bt.EMPTY_NODE,g=!1);const v=wD(new qh(d,g,!1),new qh(r,i,!1));return new E8(e,v)}return u}function b2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Kh(n,e){let t=null;for(const r of n.views.values())t=t||I8(r,e);return t}function E2(n,e){return e._queryParams.loadsAllData()?MD(n):n.views.get(e._queryIdentifier)}function w2(n,e){return null!=E2(n,e)}function Zh(n){return null!=MD(n)}function MD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let O8=1;class C2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qn(null),this.pendingWriteTree_={visibleWrites:Fl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kN(n,e,t,r,i){return function(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=h0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?cy(n,new pm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Yh(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&t8(d,r.path)?i=!1:Oa(r.path,d.path)&&(o=!0)),u--}return!!i&&(o?(function(n){n.visibleWrites=s2(n.allWrites,r8,bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=t2(n.visibleWrites,r.path):Oi(r.children,g=>{n.visibleWrites=t2(n.visibleWrites,lr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new Qn(null);return null!=r.snap?o=o.set(bn(),!0):Oi(r.children,u=>{o=o.set(new Rn(u),!0)}),cy(n,new ED(r.path,o,t))}return[]}function f0(n,e,t){return cy(n,new pm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function NN(n,e,t,r){const i=e._path,o=n.syncPointTree_.get(i);let u=[];if(o&&("default"===e._queryIdentifier||w2(o,e))){const d=function(n,e,t,r){const i=e._queryIdentifier,o=[];let u=[];const d=Zh(n);if("default"===i)for(const[g,v]of n.views.entries())u=u.concat(m2(v,t,r)),p2(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||o.push(v.query));else{const g=n.views.get(i);g&&(u=u.concat(m2(g,t,r)),p2(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return d&&!Zh(n)&&o.push(new((0,P.hu)(AD,"Reference.ts has not been loaded"),AD)(e._repo,e._path)),{removed:o,events:u}}(o,e,t,r);(function(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=d.removed;u=d.events;const v=-1!==g.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(D,O)=>Zh(O));if(v&&!C){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const O=function(n){return n.fold((e,t,r)=>{if(t&&Zh(t))return[MD(t)];{let i=[];return t&&(i=b2(t)),Oi(r,(o,u)=>{i=i.concat(u)}),i}})}(D);for(let U=0;U<O.length;++U){const j=O[U],te=j.query,ve=S2(n,j);n.listenProvider_.startListening(p0(te),kD(n,te),ve.hashFn,ve.onComplete)}}}if(!C&&g.length>0&&!r)if(v){const D=null;n.listenProvider_.stopListening(p0(e),D)}else g.forEach(D=>{const O=n.queryToTagMap.get(ND(D));n.listenProvider_.stopListening(p0(D),O)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ND(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,g)}return u}function I2(n,e,t){const r=e._path;let i=null,o=!1;n.syncPointTree_.foreachOnPath(r,(D,O)=>{const U=Ws(D,r);i=i||Kh(O,U),o=o||Zh(O)});let d,u=n.syncPointTree_.get(r);u?(o=o||Zh(u),i=i||Kh(u,bn())):(u=new y2,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?d=!0:(d=!1,i=Bt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,U)=>{const j=Kh(U,bn());j&&(i=i.updateImmediateChild(O,j))}));const g=w2(u,e);if(!g&&!e._queryParams.loadsAllData()){const D=ND(e);(0,P.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const O=O8++;n.queryToTagMap.set(D,O),n.tagToQueryMap.set(O,D)}let C=function(n,e,t,r,i,o){const u=v2(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Yn,(o,u)=>{r.push(oy(o,u))}),t.isFullyInitialized()&&r.push(YB(t.getNode())),_2(n,r,t.getNode(),e)}(u,t)}(u,e,t,ID(n.pendingWriteTree_,r),i,d);if(!g&&!o){const D=E2(u,e);C=C.concat(function(n,e,t){const r=e._path,i=kD(n,e),o=S2(n,t),u=n.listenProvider_.startListening(p0(e),i,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Zh(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((v,C,D)=>{if(!Qt(v)&&C&&Zh(C))return[MD(C).query];{let O=[];return C&&(O=O.concat(b2(C).map(U=>U.query))),Oi(D,(U,j)=>{O=O.concat(j)}),O}});for(let v=0;v<g.length;++v){const C=g[v];n.listenProvider_.stopListening(p0(C),kD(n,C))}}return u}(n,e,D))}return C}function RD(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,d)=>{const v=Kh(d,Ws(u,e));if(v)return v});return o2(i,e,o,t,!0)}function cy(n,e){return T2(e,n.syncPointTree_,null,ID(n.pendingWriteTree_,bn()))}function T2(n,e,t,r){if(Qt(n.path))return D2(n,e,t,r);{const i=e.get(bn());null==t&&null!=i&&(t=Kh(i,bn()));let o=[];const u=Yt(n.path),d=n.operationForChild(u),g=e.children.get(u);if(g&&d){const v=t?t.getImmediateChild(u):null,C=l2(r,u);o=o.concat(T2(d,g,v,C))}return i&&(o=o.concat(RN(i,n,r,t))),o}}function D2(n,e,t,r){const i=e.get(bn());null==t&&null!=i&&(t=Kh(i,bn()));let o=[];return e.children.inorderTraversal((u,d)=>{const g=t?t.getImmediateChild(u):null,v=l2(r,u),C=n.operationForChild(u);C&&(o=o.concat(D2(C,d,g,v)))}),i&&(o=o.concat(RN(i,n,r,t))),o}function S2(n,e){const t=e.query,r=kD(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=ON(n,t);if(r){const i=PN(r),o=i.path,u=i.queryId,d=Ws(o,e);return FN(n,o,new u0(EN(u),d))}return[]}(n,t._path,r):function(n,e){return cy(n,new u0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return NN(n,t,null,o)}}}}function kD(n,e){const t=ND(e);return n.queryToTagMap.get(t)}function ND(n){return n._path.toString()+"$"+n._queryIdentifier}function ON(n,e){return n.tagToQueryMap.get(e)}function PN(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Rn(n.substr(0,e))}}function FN(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),RN(r,t,ID(n.pendingWriteTree_,e),null)}function p0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,P.hu)(xD,"Reference.ts has not been loaded"),xD)(n._repo,n._path):n}class LN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new LN(t)}node(){return this.node_}}class VN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lr(this.path_,e);return new VN(this.syncTree_,t)}node(){return RD(this.syncTree_,this.path_)}}const A2=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?W8(n[".sv"],e,t):"object"==typeof n[".sv"]?K8(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},W8=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},K8=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},M2=function(n,e,t,r){return BN(e,new VN(t,n),r)},UN=function(n,e,t){return BN(n,new LN(e),t)};function BN(n,e,t){const r=n.getPriority().val(),i=A2(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,d=A2(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new ry(d,gr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new ry(i))),u.forEachChild(Yn,(d,g)=>{const v=BN(g,e.getImmediateChild(d),t);v!==g&&(o=o.updateImmediateChild(d,v))}),o}}class jN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function OD(n,e){let t=e instanceof Rn?e:new Rn(e),r=n,i=Yt(t);for(;null!==i;){const o=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new jN(i,r,o),t=Gn(t),i=Yt(t)}return r}function _m(n){return n.node.value}function HN(n,e){n.node.value=e,$N(n)}function x2(n){return n.node.childCount>0}function PD(n,e){Oi(n.node.children,(t,r)=>{e(new jN(t,n,r))})}function R2(n,e,t,r){t&&!r&&e(n),PD(n,i=>{R2(i,e,!0,r)}),t&&r&&e(n)}function m0(n){return new Rn(null===n.parent?n.name:m0(n.parent)+"/"+n.name)}function $N(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===_m(n)&&!x2(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,$N(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,$N(n))}(n.parent,n.name,n)}const X8=/[\[\].#$\/\u0000-\u001F\u007F]/,J8=/[\[\].#$\u0000-\u001F\u007F]/,GN=10485760,FD=function(n){return"string"==typeof n&&0!==n.length&&!X8.test(n)},k2=function(n){return"string"==typeof n&&0!==n.length&&!J8.test(n)},g0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!lD(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Uu=function(n,e,t,r){r&&void 0===e||_0((0,P.gK)(n,"value"),e,t)},_0=function(n,e,t){const r=t instanceof Rn?new fK(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+hm(r));if("function"==typeof e)throw new Error(n+"contains a function "+hm(r)+" with contents = "+e.toString());if(lD(e))throw new Error(n+"contains "+e.toString()+" "+hm(r));if("string"==typeof e&&e.length>GN/3&&(0,P.ug)(e)>GN)throw new Error(n+"contains a string greater than "+GN+" utf8 bytes "+hm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Oi(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!FD(u)))throw new Error(n+" contains an invalid key ("+u+") "+hm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),LB(n)})(r,u),_0(n,d,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+hm(r)+" in addition to actual children.")}},N2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Oi(e,(u,d)=>{const g=new Rn(u);if(_0(i,d,lr(t,g)),".priority"===sN(g)&&!g0(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=t0(r);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!FD(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(hK);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Oa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},zN=function(n,e,t){if(!t||void 0!==e){if(lD(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!g0(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},y0=function(n,e,t,r){if(!(r&&void 0===t||FD(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},v0=function(n,e,t,r){if(!(r&&void 0===t||k2(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fa=function(n,e){if(".info"===Yt(e))throw new Error(n+" failed = Can't modify data under /.info/")},O2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!FD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),k2(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class r4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function LD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!oN(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function qN(n,e,t){LD(n,t),P2(n,r=>oN(r,e))}function La(n,e,t){LD(n,t),P2(n,r=>Oa(r,e)||Oa(e,r))}function P2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(i4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function i4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();cm&&Ni("event: "+t.toString()),ty(r)}}}const F2="repo_interrupt";class o4{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new r4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bD(),this.transactionQueueTree_=new jN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L2(n){const t=n.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function b0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:L2(n)})}function V2(n,e,t,r,i){n.dataUpdateCount++;const o=new Rn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,P.UI)(t,v=>gr(v));u=function(n,e,t,r){const i=ON(n,r);if(i){const o=PN(i),u=o.path,d=o.queryId,g=Ws(u,e),v=Qn.fromObject(t);return FN(n,u,new ly(EN(d),g,v))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=gr(t);u=function(n,e,t,r){const i=ON(n,r);if(null!=i){const o=PN(i),u=o.path,d=o.queryId,g=Ws(u,e);return FN(n,u,new pm(EN(d),g,t))}return[]}(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,P.UI)(t,v=>gr(v));u=function(n,e,t){const r=Qn.fromObject(t);return cy(n,new ly({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,g)}else{const g=gr(t);u=f0(n.serverSyncTree_,o,g)}let d=o;u.length>0&&(d=hy(n,o)),La(n.eventQueue_,d,u)}function U2(n,e){WN(n,"connected",e),!1===e&&function(n){dy(n,"onDisconnectEvents");const e=b0(n),t=bD();yN(n.onDisconnect_,bn(),(i,o)=>{const u=M2(i,o,n.serverSyncTree_,e);ay(t,i,u)});let r=[];yN(t,bn(),(i,o)=>{r=r.concat(f0(n.serverSyncTree_,i,o));const u=QN(n,i);hy(n,u)}),n.onDisconnect_=bD(),La(n.eventQueue_,bn(),r)}(n)}function WN(n,e,t){const r=new Rn("/.info/"+e),i=gr(t);n.infoData_.updateSnapshot(r,i);const o=f0(n.infoSyncTree_,r,i);La(n.eventQueue_,r,o)}function VD(n){return n.nextWriteId_++}function KN(n,e,t,r,i){dy(n,"set",{path:e.toString(),value:t,priority:r});const o=b0(n),u=gr(t,r),d=RD(n.serverSyncTree_,e),g=UN(u,d,o),v=VD(n),C=kN(n.serverSyncTree_,e,g,v,!0);LD(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(O,U)=>{const j="ok"===O;j||Is("set at "+e+" failed: "+O);const te=Yh(n.serverSyncTree_,v,!j);La(n.eventQueue_,e,te),Qh(0,i,O,U)});const D=QN(n,e);hy(n,D),La(n.eventQueue_,D,[])}function h4(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&_N(n.onDisconnect_,e),Qh(0,t,r,i)})}function B2(n,e,t,r){const i=gr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,u)=>{"ok"===o&&ay(n.onDisconnect_,e,i),Qh(0,r,o,u)})}function ZN(n,e,t){let r;r=".info"===Yt(e._path)?NN(n.infoSyncTree_,e,t):NN(n.serverSyncTree_,e,t),qN(n.eventQueue_,e._path,r)}function j2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(F2)}function dy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ni(t,...e)}function Qh(n,e,t,r){e&&ty(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const u=new Error(o);u.code=i,e(u)}})}function YN(n,e,t){return RD(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function UD(n,e=n.transactionQueueTree_){if(e||BD(n,e),_m(e)){const t=$2(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(v=>v.currentWriteId),i=YN(n,e,r);let o=i;const u=i.hash();for(let v=0;v<t.length;v++){const C=t[v];(0,P.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Ws(e,C.path);o=o.updateChild(D,C.currentOutputSnapshotRaw)}const d=o.val(!0),g=e;n.server_.put(g.toString(),d,v=>{dy(n,"transaction put response",{path:g.toString(),status:v});let C=[];if("ok"===v){const D=[];for(let O=0;O<t.length;O++)t[O].status=2,C=C.concat(Yh(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&D.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();BD(n,OD(n.transactionQueueTree_,e)),UD(n,n.transactionQueueTree_),La(n.eventQueue_,e,C);for(let O=0;O<D.length;O++)ty(D[O])}else{if("datastale"===v)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Is("transaction at "+g.toString()+" failed: "+v);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=v}hy(n,e)}},u)}(n,m0(e),t)}else x2(e)&&PD(e,t=>{UD(n,t)})}function hy(n,e){const t=H2(n,e),r=m0(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],v=Ws(t,g.path);let D,C=!1;if((0,P.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,D=g.abortReason,i=i.concat(Yh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)C=!0,D="maxretry",i=i.concat(Yh(n.serverSyncTree_,g.currentWriteId,!0));else{const O=YN(n,g.path,u);g.currentInputSnapshot=O;const U=e[d].update(O.val());if(void 0!==U){_0("transaction failed: Data returned ",U,g.path);let j=gr(U);"object"==typeof U&&null!=U&&(0,P.r3)(U,".priority")||(j=j.updatePriority(O.getPriority()));const ve=g.currentWriteId,Je=b0(n),st=UN(j,O,Je);g.currentOutputSnapshotRaw=j,g.currentOutputSnapshotResolved=st,g.currentWriteId=VD(n),u.splice(u.indexOf(ve),1),i=i.concat(kN(n.serverSyncTree_,g.path,st,g.currentWriteId,g.applyLocally)),i=i.concat(Yh(n.serverSyncTree_,ve,!0))}else C=!0,D="nodata",i=i.concat(Yh(n.serverSyncTree_,g.currentWriteId,!0))}La(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}BD(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)ty(r[d]);UD(n,n.transactionQueueTree_)}(n,$2(n,t),r),r}function H2(n,e){let t,r=n.transactionQueueTree_;for(t=Yt(e);null!==t&&void 0===_m(r);)r=OD(r,t),t=Yt(e=Gn(e));return r}function $2(n,e){const t=[];return G2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function G2(n,e,t){const r=_m(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);PD(e,i=>{G2(n,i,t)})}function BD(n,e){const t=_m(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,HN(e,t.length>0?t:void 0)}PD(e,r=>{BD(n,r)})}function QN(n,e){const t=m0(H2(n,e)),r=OD(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{XN(n,i)}),XN(n,r),R2(r,i=>{XN(n,i)}),t}function XN(n,e){const t=_m(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,P.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,P.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Yh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?HN(e,void 0):t.length=o+1,La(n.eventQueue_,m0(e),i);for(let u=0;u<r.length;u++)ty(r[u])}}const JN=function(n,e){const t=w4(n),r=t.namespace;return"firebase.com"===t.domain&&Fu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Fu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Jk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Rn(t.pathString)}},w4=function(n){let e="",t="",r="",i="",o="",u=!0,d="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(d=n.substring(0,v-1),n=n.substring(v+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(n.substring(C,D)));const O=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));v=e.indexOf(":"),v>=0?(u="https"===d||"wss"===d,g=parseInt(e.substring(v+1),10)):v=e.length;const U=e.slice(0,v);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),o=r}"ns"in O&&(o=O.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:o}};class z2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class q2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class W2{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class K2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return h4(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fa("OnDisconnect.remove",this._path);const e=new P.BH;return B2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fa("OnDisconnect.set",this._path),Uu("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return B2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Fa("OnDisconnect.setWithPriority",this._path),Uu("OnDisconnect.setWithPriority",e,this._path,!1),zN("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function(n,e,t,r,i){const o=gr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,d)=>{"ok"===u&&ay(n.onDisconnect_,e,o),Qh(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Fa("OnDisconnect.update",this._path),N2("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function(n,e,t,r){if((0,P.xb)(t))return Ni("onDisconnect().update() called with empty data.  Don't do anything."),void Qh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Oi(t,(u,d)=>{const g=gr(d);ay(n.onDisconnect_,lr(e,u),g)}),Qh(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Qt(this._path)?null:sN(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const e=XB(this._queryParams),t=Yk(e);return"{}"===t?"default":t}get _queryObject(){return XB(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=oN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function jD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Xh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Vu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==nd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Lu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Yn){if(null!=e&&!g0(e)||null!=t&&!g0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof dN||n.getIndex()===hN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function HD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Va extends Co{constructor(e,t){super(e,t,new _D,!1)}get parent(){const e=FB(this._path);return null===e?null:new Va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ym{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Rn(e),r=vm(this.ref,e);return new ym(this._node.getChild(t),r,Yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ym(i,vm(this.ref,r),Yn)))}hasChild(e){const t=new Rn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Z2(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?vm(n._root,e):n._root}function Y2(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=JN(e,n._repo.repoInfo_.nodeAdmin);O2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Fu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Z2(n,t.path.toString())}function vm(n,e){return null===Yt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),v0("child","path",t,!1)):v0("child","path",e,!1),new Va(n._repo,lr(n._path,e));var t}function eO(n,e){n=(0,P.m9)(n),Fa("set",n._path),Uu("set",e,n._path,!1);const t=new P.BH;return KN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function S4(n,e){N2("update",e,n._path,!1);const t=new P.BH;return function(n,e,t,r){dy(n,"update",{path:e.toString(),value:t});let i=!0;const o=b0(n),u={};if(Oi(t,(d,g)=>{i=!1,u[d]=M2(lr(e,d),gr(g),n.serverSyncTree_,o)}),i)Ni("update() called with empty data.  Don't do anything."),Qh(0,r,"ok",void 0);else{const d=VD(n),g=function(n,e,t,r){!function(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=CN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Qn.fromObject(t);return cy(n,new ly({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);LD(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,C)=>{const D="ok"===v;D||Is("update at "+e+" failed: "+v);const O=Yh(n.serverSyncTree_,d,!D),U=O.length>0?hy(n,e):e;La(n.eventQueue_,U,O),Qh(0,r,v,C)}),Oi(t,v=>{const C=QN(n,lr(e,v));hy(n,C)}),La(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function A4(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,C)=>{const D=Ws(v,t);r=r||Kh(C,D)});let i=n.syncPointTree_.get(t);i?r=r||Kh(i,bn()):(i=new y2,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,u=o?new qh(r,!0,!1):null;return function(n){return CD(n.viewCache_)}(v2(i,e,ID(n.pendingWriteTree_,e._path),o?u.getNode():Bt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=gr(r).withIndex(e._queryParams.getIndex()),o=f0(n.serverSyncTree_,e._path,i);return qN(n.eventQueue_,e._path,o),Promise.resolve(i)},r=>(dy(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new ym(e,new Va(n._repo,n._path),n._queryParams.getIndex()))}class $D{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new z2("value",this,new ym(e.snapshotNode,new Va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q2(this,e,t):null}matches(e){return e instanceof $D&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class GD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q2(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=vm(new Va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new z2(e.type,this,new ym(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof GD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function E0(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const g=t,v=(C,D)=>{ZN(n._repo,n,d),g(C,D)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new W2(t,o||void 0),d="value"===e?new $D(u):new GD(e,u);return function(n,e,t){let r;r=".info"===Yt(e._path)?I2(n.infoSyncTree_,e,t):I2(n.serverSyncTree_,e,t),qN(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>ZN(n._repo,n,d)}function tO(n,e,t,r){return E0(n,"value",e,t,r)}function Q2(n,e,t,r){return E0(n,"child_added",e,t,r)}function X2(n,e,t,r){return E0(n,"child_changed",e,t,r)}function J2(n,e,t,r){return E0(n,"child_moved",e,t,r)}function ej(n,e,t,r){return E0(n,"child_removed",e,t,r)}function tj(n,e,t){let r=null;const i=t?new W2(t):null;"value"===e?r=new $D(i):e&&(r=new GD(e,i)),ZN(n._repo,n,r)}class Ll{}class nj extends Ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Uu("endAt",this._value,e._path,!0);const t=gN(e._queryParams,this._value,this._key);if(HD(t),Xh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class x4 extends Ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Uu("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===Vu?("string"==typeof e&&(e=ZB(e)),i=gN(n,e,t)):(r=null==t?nd:ZB(t),i=gN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(HD(t),Xh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class rj extends Ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Uu("startAt",this._value,e._path,!0);const t=mN(e._queryParams,this._value,this._key);if(HD(t),Xh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class N4 extends Ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Uu("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Vu)"string"==typeof e&&(e=KB(e)),r=mN(n,e,t);else{let i;i=null==t?Lu:KB(t),r=mN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(HD(t),Xh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class P4 extends Ll{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class L4 extends Ll{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class U4 extends Ll{constructor(e){super(),this._path=e}_apply(e){jD(e,"orderByChild");const t=new Rn(this._path);if(Qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new dN(t),i=yD(e._queryParams,r);return Xh(i),new Co(e._repo,e._path,i,!0)}}class j4 extends Ll{_apply(e){jD(e,"orderByKey");const t=yD(e._queryParams,Vu);return Xh(t),new Co(e._repo,e._path,t,!0)}}class $4 extends Ll{_apply(e){jD(e,"orderByPriority");const t=yD(e._queryParams,Yn);return Xh(t),new Co(e._repo,e._path,t,!0)}}class z4 extends Ll{_apply(e){jD(e,"orderByValue");const t=yD(e._queryParams,hN);return Xh(t),new Co(e._repo,e._path,t,!0)}}class W4 extends Ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Uu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nj(this._value,this._key)._apply(new rj(this._value,this._key)._apply(e))}}function Vl(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,P.hu)(!AD,"__referenceConstructor has already been defined"),AD=n})(Va),function(n){(0,P.hu)(!xD,"__referenceConstructor has already been defined"),xD=n}(Va);const nO={};function sj(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Fu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ni("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,u=JN(o,i),d=u.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,o=`http://${v}?ns=${d.namespace}`,u=JN(o,i),d=u.repoInfo):g=!u.repoInfo.secure;const C=i&&g?new e0(e0.OWNER):new B6(n.name,n.options,e);O2("Invalid Firebase Database URL",u),Qt(u.path)||Fu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function(n,e,t,r){let i=nO[e.name];i||(i={},nO[e.name]=i);let o=i[n.toURLString()];return o&&Fu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new o4(n,false,t,r),i[n.toURLString()]=o,o}(d,n,C,new U6(n.name,t));return new e5(D,n)}class e5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=nN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new vD(n.repoInfo_,(r,i,o,u)=>{V2(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>U2(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new fm(n.repoInfo_,e,(r,i,o,u)=>{V2(n,r,i,o,u)},r=>{U2(n,r)},r=>{!function(n,e){Oi(e,(t,r)=>{WN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return tN[t]||(tN[t]=e()),tN[t]}(n.repoInfo_,()=>new zK(n.stats_,n.server_)),n.infoData_=new BK,n.infoSyncTree_=new C2({startListening:(r,i,o,u)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=f0(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),WN(n,"connected",!1),n.serverSyncTree_=new C2({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(d,g)=>{const v=u(d,g);La(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=nO[e];(!t||t[n.key]!==n)&&Fu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),j2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Fu("Cannot call "+e+" on a deleted database.")}}function oj(){IB.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function t5(){oj(),Gh.forceDisallow()}function n5(){oj(),ny.forceDisallow(),Gh.forceAllow()}function o5(n,e){iB(n,e)}class d5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}fm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},fm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},JU(Jo.SDK_VERSION),(0,Jo._registerComponent)(new pr.wA("database",(e,{instanceIdentifier:t})=>sj(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Jo.registerVersion)(QU,"0.13.0",void 0),(0,Jo.registerVersion)(QU,"0.13.0","esm2017");const m5=new ea.Yd("@firebase/database-compat"),aj=function(n){m5.warn("FIREBASE WARNING: "+n)};class y5{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,aj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class v5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Jh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),v0("DataSnapshot.child","path",e,!1),new Jh(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),v0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Jh(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ss{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const u=ss.getCancelAndContextArgs_("Query.on",r,i),d=(v,C)=>{t.call(u.context,new Jh(this.database,v),C)};d.userCallback=t,d.context=u.context;const g=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return tO(this._delegate,d,g),t;case"child_added":return Q2(this._delegate,d,g),t;case"child_removed":return ej(this._delegate,d,g),t;case"child_changed":return X2(this._delegate,d,g),t;case"child_moved":return J2(this._delegate,d,g),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,tj(this._delegate,e,i)}else tj(this._delegate,e)}get(){return A4(this._delegate).then(e=>new Jh(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const o=ss.getCancelAndContextArgs_("Query.once",r,i),u=new P.BH,d=(v,C)=>{const D=new Jh(this.database,v);t&&t.call(o.context,D,C),u.resolve(D)};d.userCallback=t,d.context=o.context;const g=v=>{o.cancel&&o.cancel.call(o.context,v),u.reject(v)};switch(e){case"value":tO(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":Q2(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":ej(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":X2(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":J2(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ss(this.database,Vl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new P4(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ss(this.database,Vl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new L4(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ss(this.database,Vl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return v0("orderByChild","path",n,!1),new U4(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ss(this.database,Vl(this._delegate,new j4))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ss(this.database,Vl(this._delegate,new $4))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ss(this.database,Vl(this._delegate,new z4))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ss(this.database,Vl(this._delegate,function(n=null,e){return y0("startAt","key",e,!0),new rj(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ss(this.database,Vl(this._delegate,function(n,e){return y0("startAfter","key",e,!0),new N4(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ss(this.database,Vl(this._delegate,function(n,e){return y0("endAt","key",e,!0),new nj(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ss(this.database,Vl(this._delegate,function(n,e){return y0("endBefore","key",e,!0),new x4(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ss(this.database,Vl(this._delegate,function(n,e){return y0("equalTo","key",e,!0),new W4(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ss))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ia(this.database,new Va(this._delegate._repo,this._delegate._path))}}class ia extends ss{constructor(e,t){super(e,new Co(t._repo,t._path,new _D,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ia(this.database,vm(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ia(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new ia(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=eO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,aj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fa("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=S4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Fa("setWithPriority",n._path),Uu("setWithPriority",e,n._path,!1),zN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return KN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Fa("remove",n._path),eO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,P.m9)(n),Fa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,o=new P.BH,d=tO(n,()=>{});return function(n,e,t,r,i,o){dy(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:tB(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=YN(n,e,void 0);u.currentInputSnapshot=d;const g=u.update(d.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{_0("transaction failed: Data returned ",g,u.path),u.status=0;const v=OD(n.transactionQueueTree_,e),C=_m(v)||[];let D;C.push(u),HN(v,C),"object"==typeof g&&null!==g&&(0,P.r3)(g,".priority")?(D=(0,P.DV)(g,".priority"),(0,P.hu)(g0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(RD(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const O=b0(n),U=gr(g,D),j=UN(U,d,O);u.currentOutputSnapshotRaw=U,u.currentOutputSnapshotResolved=j,u.currentWriteId=VD(n);const te=kN(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);La(n.eventQueue_,e,te),UD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,C)=>{let D=null;g?o.reject(g):(D=new ym(C,new Va(n._repo,n._path),Yn),o.resolve(new d5(v,D)))},d,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new v5(o.committed,new Jh(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,P.m9)(n),Fa("setPriority",n._path),zN("setPriority",e,!1);const t=new P.BH;return KN(n._repo,lr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,P.m9)(n),Fa("push",n._path),Uu("push",e,n._path,!0);const t=L2(n._repo),r=kK(t),i=vm(n,r),o=vm(n,r);let u;return u=null!=e?eO(o,e).then(()=>o):Promise.resolve(o),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new ia(this.database,u));t&&i.then(()=>t(null),u=>t(u));const o=new ia(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Fa("Reference.onDisconnect",this._delegate._path),new y5(new K2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class w0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:t5,forceLongPolling:n5}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Fu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new e0(e0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);o=new e0(u)}!function(n,e,t,r){n.repoInfo_=new Jk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof ia){const t=Y2(this._delegate,e.toString());return new ia(this,t)}{const t=Z2(this._delegate,e);return new ia(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=Y2(this._delegate,e);return new ia(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),j2(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(F2)}(n._repo)}(this._delegate)}}w0.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var E5=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){JU(t);const u=new pr.zt("auth-internal",new pr.H0("database-standalone"));return u.setComponent(new pr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new w0(sj(n,u,void 0,e,o),n),namespace:i}}});const w5=w0.ServerValue;function lj(n){return null==n}function uj(n){return"function"==typeof n.set}function cj(n,e){return uj(e)?e:n.ref(e)}function dj(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(uj(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function C0(n,e,t="on",r=Zd.z){return new er.y(i=>{let o=null;return o=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,nt.U)(i=>{const{snapshot:o,prevKey:u}=i;let d=null;return o.exists()&&(d=o.key),{type:e,payload:o,prevKey:u,key:d}}),(0,hk.B)())}function hj(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function A5(n,e){const{payload:t,prevKey:r,key:i}=e,o=hj(n,i),u=function(n,e){if(lj(e))return 0;{const t=hj(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,v],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function fj(n){return(lj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pj(n,e,t){return function(n,e,t){return C0(n,"value","once",t).pipe(Ln(r=>{const i=[Ze(r)];return e.forEach(o=>i.push(C0(n,o,"on",t))),(0,Ii.T)(...i).pipe(bi(A5,[]))}),Yy())}(n,e=fj(e),t)}function mj(n,e,t){const r=(e=fj(e)).map(i=>C0(n,i,"on",t));return(0,Ii.T)(...r)}function gj(n,e){return function(r,i){return dj(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function k5(n){return function(t){return t?dj(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function _j(n,e){return function(){return C0(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new pr.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new w0(i,r)},"PUBLIC").setServiceProps({Reference:ia,Query:ss,Database:w0,DataSnapshot:Jh,enableLogging:o5,INTERNAL:E5,ServerValue:w5}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(CI.Z);const P5=new h.OlP("angularfire2.realtimeDatabaseURL"),F5=new h.OlP("angularfire2.database.use-emulator");let L5=(()=>{class n{constructor(t,r,i,o,u,d,g,v,C,D,O,U,j,te,ve){this.schedulers=d;const Je=g,st=(0,es.on)(t,u,r);v&&Lk(st,u,C,O,U,j,D,te),this.database=(0,es.cc)(`${st.name}.database.${i}`,"AngularFireDatabase",st.name,()=>{const ht=u.runOutsideAngular(()=>st.database(i||void 0));return Je&&ht.useEmulator(...Je),ht},[Je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>cj(this.database,t));let o=i;return r&&(o=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:gj(r,"update"),set:gj(r,"set"),push:i=>r.push(i),remove:k5(r),snapshotChanges:i=>pj(n,i,t).pipe(Kn.iC),stateChanges:i=>mj(n,i,t).pipe(Kn.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return C0(n,"value","on",e).pipe((0,nt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,io.jO)(n);return(0,Hn.e)((t,r)=>{const i=n.length,o=new Array(i);let u=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,Lr.Xf)(n[g]).subscribe(new yn.Q(r,v=>{o[g]=v,!d&&!u[g]&&(u[g]=!0,(d=u.every(Uo.y))&&(u=null))},$f.Z));t.subscribe(new yn.Q(r,g=>{if(d){const v=[g,...o];r.next(e?e(...v):v)}}))})}(e),(0,nt.U)(([i,o])=>{const u=i.lastKeyToLoad,d=o.map(g=>g.key);return{actions:o,lastKeyToLoad:u,loadedKeys:d}}),(0,Hn.e)((e,t)=>{let r=!1;e.subscribe(new yn.Q(t,o=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(o)))&&t.next(o)))}),(0,nt.U)(i=>i.actions))}(n,mj(n,e).pipe(bi((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Kn.iC),valueChanges:(i,o)=>pj(n,i,t).pipe((0,nt.U)(d=>d.map(g=>o&&o.idField?Object.assign(Object.assign({},g.payload.val()),{[o.idField]:g.key}):g.payload.val())),Kn.iC)}}(o,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>_j(n,e.schedulers.outsideAngular)().pipe(Kn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>_j(n,e.schedulers.outsideAngular)().pipe(Kn.iC,(0,nt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>cj(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(es.Dh),h.LFG(es.xv,8),h.LFG(P5,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(F5,8),h.LFG(Vk,8),h.LFG(Rk,8),h.LFG(kk,8),h.LFG(Nk,8),h.LFG(Ok,8),h.LFG(Pk,8),h.LFG(Fk,8),h.LFG(tD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),V5=(()=>{class n{constructor(){kq.Z.registerVersion("angularfire",Kn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[L5]}),n})(),U5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[D6]}),n.\u0275inj=h.cJS({providers:[],imports:[[da,Dc,H0.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),RA,t6,C6,Yq,c_,dh,wI,yW,es.hO.initializeApp({apiKey:"AIzaSyDwY0ustgrbdUrkt0FXwseq89vcH_zirJo",authDomain:"personnaltrack.firebaseapp.com",projectId:"personnaltrack",storageBucket:"personnaltrack.appspot.com",messagingSenderId:"588509586658",appId:"1:588509586658:web:334cb1ed45319ff2592abb",measurementId:"G-G9PZNFDF99"}),V5]]}),n})();(0,h.G48)(),Vo().bootstrapModule(U5).catch(n=>console.error(n))},9162:(Xe,be,F)=>{function de(Q,ne,fe,_e){return new(fe||(fe=Promise))(function(ue,bt){function jt(Zt){try{Ct(_e.next(Zt))}catch(Tt){bt(Tt)}}function Dn(Zt){try{Ct(_e.throw(Zt))}catch(Tt){bt(Tt)}}function Ct(Zt){Zt.done?ue(Zt.value):function(ue){return ue instanceof fe?ue:new fe(function(bt){bt(ue)})}(Zt.value).then(jt,Dn)}Ct((_e=_e.apply(Q,ne||[])).next())})}function Ve(Q){return this instanceof Ve?(this.v=Q,this):new Ve(Q)}function oe(Q,ne,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,_e=fe.apply(Q,ne||[]),ue=[];return Re={},bt("next"),bt("throw"),bt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function bt(an){_e[an]&&(Re[an]=function(ur){return new Promise(function(mi,dn){ue.push([an,ur,mi,dn])>1||jt(an,ur)})})}function jt(an,ur){try{!function(an){an.value instanceof Ve?Promise.resolve(an.value.v).then(Ct,Zt):Tt(ue[0][2],an)}(_e[an](ur))}catch(mi){Tt(ue[0][3],mi)}}function Ct(an){jt("next",an)}function Zt(an){jt("throw",an)}function Tt(an,ur){an(ur),ue.shift(),ue.length&&jt(ue[0][0],ue[0][1])}}function je(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ne=Q[Symbol.asyncIterator];return ne?ne.call(Q):(Q=function(Q){var ne="function"==typeof Symbol&&Symbol.iterator,fe=ne&&Q[ne],_e=0;if(fe)return fe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&_e>=Q.length&&(Q=void 0),{value:Q&&Q[_e++],done:!Q}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),fe={},_e("next"),_e("throw"),_e("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function _e(ue){fe[ue]=Q[ue]&&function(bt){return new Promise(function(jt,Dn){!function(ue,bt,jt,Dn){Promise.resolve(Dn).then(function(Ct){ue({value:Ct,done:jt})},bt)}(jt,Dn,(bt=Q[ue](bt)).done,bt.value)})}}}F.d(be,{mG:()=>de,qq:()=>Ve,FC:()=>oe,KL:()=>je})},3668:(Xe,be,F)=>{F.d(be,{deG:()=>hl,tb:()=>AM,AFp:()=>bb,ip1:()=>u_,CZH:()=>bh,hGG:()=>qb,z2F:()=>xr,sBO:()=>PM,Sil:()=>Dp,_Vd:()=>yp,EJc:()=>wI,SBq:()=>vp,qLn:()=>Ia,vpe:()=>Al,tBr:()=>vn,XFs:()=>ft,OlP:()=>hn,zs3:()=>Yi,ZZ4:()=>mr,aQg:()=>Th,soG:()=>c_,YKP:()=>ph,h0i:()=>Bc,PXZ:()=>Mu,R0b:()=>pr,FiY:()=>Ur,Lbi:()=>SM,g9A:()=>wb,Qsj:()=>xa,FYo:()=>Au,JOm:()=>Us,q3G:()=>$n,tp0:()=>ai,Rgc:()=>Ml,dDg:()=>f_,q4F:()=>HC,GfV:()=>jC,s_b:()=>Hc,ifc:()=>et,eFA:()=>II,G48:()=>MI,Gpc:()=>K,f3M:()=>at,X6Q:()=>AI,_c5:()=>$b,VLi:()=>Ib,c2e:()=>Cb,zSh:()=>sw,wAp:()=>It,vHH:()=>$e,EiD:()=>Fd,mCW:()=>_l,qzn:()=>du,JVY:()=>fc,pB0:()=>Bm,eBb:()=>Vm,L6k:()=>pc,LAX:()=>Um,cg1:()=>Vg,kL8:()=>mC,yhl:()=>hc,dqk:()=>Dt,sIi:()=>Xd,CqO:()=>mv,QGY:()=>Ma,F4k:()=>pv,RDi:()=>Wu,AaK:()=>de,z3N:()=>Fs,qOj:()=>pw,TTD:()=>Xs,_Bn:()=>ZA,xp6:()=>By,uIk:()=>_w,ekj:()=>wv,Suo:()=>ob,Xpm:()=>kt,lG2:()=>oa,Yz7:()=>dn,cJS:()=>Xn,oAB:()=>Ul,Yjl:()=>aa,Y36:()=>Pc,_UZ:()=>Tg,BQk:()=>hv,ynx:()=>oh,qZA:()=>Ig,TgZ:()=>ih,EpF:()=>fv,n5z:()=>Os,Ikx:()=>cp,LFG:()=>X,$8M:()=>Gt,$Z:()=>ep,NdJ:()=>mo,CRH:()=>t_,O4$:()=>Yl,oxw:()=>np,Hsn:()=>Mg,F$t:()=>Lw,Q6J:()=>Ow,iGM:()=>sb,MAs:()=>Cw,CHM:()=>Ns,LSH:()=>fo,Udp:()=>Ev,YNc:()=>Aa,_uU:()=>Dv,Oqu:()=>Sv,AsE:()=>Pg,Gf:()=>e_});var h=F(273),re=F(7908),L=F(8305),he=F(3719),ce=F(3174);function Ee(s){for(let a in s)if(s[a]===Ee)return a;throw Error("Could not find renamed property on target object.")}function le(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ge(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const z=Ee({__forward_ref__:Ee});function K(s){return s.__forward_ref__=K,s.toString=function(){return de(this())},s}function ae(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===K}class $e extends Error{constructor(a,l){super(function(s,a){return`${s?`NG0${s}: `:""}${a}`}(a,l)),this.code=a}}function oe(s){return"string"==typeof s?s:null==s?"":String(s)}function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():oe(s)}function Pe(s,a){const l=a?` in ${a}`:"";throw new $e("201",`No provider for ${Te(s)} found${l}`)}function Zt(s,a){null==s&&function(s,a,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function dn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xn(s){return{providers:s.providers||[],imports:s.imports||[]}}function os(s){return Tr(s,Zr)||Tr(s,Oe)}function Tr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Io(s){return s&&(s.hasOwnProperty(_r)||s.hasOwnProperty(yr))?s[_r]:null}const Zr=Ee({\u0275prov:Ee}),_r=Ee({\u0275inj:Ee}),Oe=Ee({ngInjectableDef:Ee}),yr=Ee({ngInjectorDef:Ee});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Sn;function Nr(s){const a=Sn;return Sn=s,a}function Yr(s,a,l){const c=os(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&ft.Optional?null:void 0!==a?a:void Pe(de(s),"Injector")}function zn(s){return{toString:s}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),et=(()=>{return(s=et||(et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",et;var s})();const Et="undefined"!=typeof globalThis&&globalThis,Zs="undefined"!=typeof window&&window,Fi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt=Et||"undefined"!=typeof global&&global||Zs||Fi,W={},H=[],Y=Ee({\u0275cmp:Ee}),Ie=Ee({\u0275dir:Ee}),q=Ee({\u0275pipe:Ee}),se=Ee({\u0275mod:Ee}),xe=Ee({\u0275fac:Ee}),tt=Ee({__NG_ELEMENT_ID__:Ee});let At=0;function kt(s){return zn(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||H,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||et.Emulated,id:"c",styles:s.styles||H,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,_=s.features,b=s.pipes;return c.id+=At++,c.inputs=Bl(s.inputs,l),c.outputs=Bl(s.outputs),_&&_.forEach(w=>w(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Nt):null,c.pipeDefs=b?()=>("function"==typeof b?b():b).map(Or):null,c})}function Nt(s){return ir(s)||function(s){return s[Ie]||null}(s)}function Or(s){return function(s){return s[q]||null}(s)}const gi={};function Ul(s){return zn(()=>{const a={type:s.type,bootstrap:s.bootstrap||H,declarations:s.declarations||H,imports:s.imports||H,exports:s.exports||H,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(gi[s.id]=s.type),a})}function Bl(s,a){if(null==s)return W;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),l[f]=c,a&&(a[f]=_)}return l}const oa=kt;function aa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ir(s){return s[Y]||null}function vr(s,a){const l=s[se]||null;if(!l&&!0===a)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return l}function Ui(s){return Array.isArray(s)&&"object"==typeof s[1]}function Bi(s){return Array.isArray(s)&&!0===s[1]}function tf(s){return 0!=(8&s.flags)}function Qs(s){return 2==(2&s.flags)}function Wn(s){return 1==(1&s.flags)}function ni(s){return null!==s.template}function nf(s){return 0!=(512&s[2])}function ls(s,a){return s.hasOwnProperty(xe)?s[xe]:null}class zu{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Xs(){return fd}function fd(s){return s.type.prototype.ngOnChanges&&(s.setInput=xo),pd}function pd(){const s=As(this),a=null==s?void 0:s.current;if(a){const l=s.previous;if(l===W)s.previous=a;else for(let c in a)l[c]=a[c];s.current=null,this.ngOnChanges(a)}}function xo(s,a,l,c){const f=As(s)||function(s,a){return s[us]=a}(s,{previous:W,current:null}),_=f.current||(f.current={}),b=f.previous,w=this.declaredInputs[l],I=b[w];_[w]=new zu(I&&I.currentValue,a,b===W),s[c]=a}Xs.ngInherit=!0;const us="__ngSimpleChanges__";function As(s){return s[us]||null}const md="http://www.w3.org/2000/svg";let Gl;function Wu(s){Gl=s}function nn(s){return!!s.listen}const xs={createRenderer:(s,a)=>void 0!==Gl?Gl:"undefined"!=typeof document?document:void 0};function jn(s){for(;Array.isArray(s);)s=s[0];return s}function Js(s,a){return jn(a[s])}function Nn(s,a){return jn(a[s.index])}function Hi(s,a){return s.data[a]}function rn(s,a){const l=a[s];return Ui(l)?l:l[0]}function Ka(s){return 4==(4&s[2])}function Za(s){return 128==(128&s[2])}function ri(s,a){return null==a?null:s[a]}function ko(s){s[18]=0}function No(s,a){s[5]+=a;let l=s,c=s[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const gt={lFrame:Zl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xa(){return gt.bindingsEnabled}function Me(){return gt.lFrame.lView}function qt(){return gt.lFrame.tView}function Ns(s){return gt.lFrame.contextLView=s,s[8]}function On(){let s=Ja();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ja(){return gt.lFrame.currentTNode}function Er(s,a){const l=gt.lFrame;l.currentTNode=s,l.isParent=a}function zl(){return gt.lFrame.isParent}function Oo(){gt.lFrame.isParent=!1}function Po(){return gt.isInCheckNoChangesMode}function Fo(s){gt.isInCheckNoChangesMode=s}function to(){return gt.lFrame.bindingIndex++}function cs(s){const a=gt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function tl(s,a){const l=gt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Lo(a)}function Lo(s){gt.lFrame.currentDirectiveIndex=s}function Wl(){return gt.lFrame.currentQueryIndex}function da(s){gt.lFrame.currentQueryIndex=s}function yd(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function Kl(s,a,l){if(l&ft.SkipSelf){let f=a,_=s;for(;!(f=f.parent,null!==f||l&ft.Host||(f=yd(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;a=f,s=_}const c=gt.lFrame=nl();return c.currentTNode=a,c.lView=s,!0}function Xu(s){const a=nl(),l=s[1];gt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function nl(){const s=gt.lFrame,a=null===s?null:s.child;return null===a?Zl(s):a}function Zl(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function rl(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const vd=rl;function il(){const s=rl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function An(){return gt.lFrame.selectedIndex}function no(s){gt.lFrame.selectedIndex=s}function gn(){const s=gt.lFrame;return Hi(s.tView,s.selectedIndex)}function Yl(){gt.lFrame.currentNamespace=md}function ro(s,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const _=s.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:k}=_;b&&(s.contentHooks||(s.contentHooks=[])).push(-l,b),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(l,k)}}function Ql(s,a,l){Ju(s,a,3,l)}function ol(s,a,l,c){(3&s[2])===l&&Ju(s,a,l,c)}function Ed(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function Ju(s,a,l,c){const _=null!=c?c:-1,b=a.length-1;let w=0;for(let I=void 0!==c?65535&s[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(w=a[I],null!=c&&w>=c)break}else a[I]<0&&(s[18]+=65536),(w<_||-1==_)&&(wd(s,l,a,I),s[18]=(4294901760&s[18])+I+2),I++}function wd(s,a,l,c){const f=l[c]<0,_=l[c+1],w=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{_.call(w)}finally{}}}else try{_.call(w)}finally{}}class al{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function _n(s,a,l){const c=nn(s);let f=0;for(;f<l.length;){const _=l[f];if("number"==typeof _){if(0!==_)break;f++;const b=l[f++],w=l[f++],I=l[f++];c?s.setAttribute(a,w,I,b):a.setAttributeNS(b,w,I)}else{const b=_,w=l[++f];Ze(b)?c&&s.setProperty(a,b,w):c?s.setAttribute(a,b,w):a.setAttribute(b,w),f++}}return f}function io(s){return 3===s||4===s||6===s}function Ze(s){return 64===s.charCodeAt(0)}function Fn(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?l=f:0===l||ii(s,l,f,null,-1===l||2===l?a[++c]:null)}}return s}function ii(s,a,l,c,f){let _=0,b=s.length;if(-1===a)b=-1;else for(;_<s.length;){const w=s[_++];if("number"==typeof w){if(w===a){b=-1;break}if(w>a){b=_-1;break}}}for(;_<s.length;){const w=s[_];if("number"==typeof w)break;if(w===l){if(null===c)return void(null!==f&&(s[_+1]=f));if(c===s[_+1])return void(s[_+2]=f)}_++,null!==c&&_++,null!==f&&_++}-1!==b&&(s.splice(b,0,a),_=b+1),s.splice(_++,0,l),null!==c&&s.splice(_++,0,c),null!==f&&s.splice(_++,0,f)}function er(s){return-1!==s}function fa(s){return 32767&s}function cl(s,a){let l=function(s){return s>>16}(s),c=a;for(;l>0;)c=c[15],l--;return c}let Jl=!0;function eu(s){const a=Jl;return Jl=s,a}let Bo=0;function jo(s,a){const l=yn(s,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(s.injectorIndex=a.length,tu(c.data,s),tu(a,null),tu(c.blueprint,null));const f=nu(s,a),_=s.injectorIndex;if(er(f)){const b=fa(f),w=cl(f,a),I=w[1].data;for(let x=0;x<8;x++)a[_+x]=w[b+x]|I[b+x]}return a[_+8]=f,_}function tu(s,a){s.push(0,0,0,0,0,0,0,0,a)}function yn(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function nu(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=a;for(;null!==f;){const _=f[1],b=_.type;if(c=2===b?_.declTNode:1===b?f[6]:null,null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function so(s,a,l){!function(s,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(tt)&&(c=l[tt]),null==c&&(c=l[tt]=Bo++);const f=255&c;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function zi(s,a,l){if(l&ft.Optional)return s;Pe(a,"NodeInjector")}function pa(s,a,l,c){if(l&ft.Optional&&void 0===c&&(c=null),0==(l&(ft.Self|ft.Host))){const f=s[9],_=Nr(void 0);try{return f?f.get(a,c,l&ft.Optional):Yr(a,c,l&ft.Optional)}finally{Nr(_)}}return zi(c,a,l)}function Ho(s,a,l,c=ft.Default,f){if(null!==s){const _=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(tt)?s[tt]:void 0;return"number"==typeof a?a>=0?255&a:Id:a}(l);if("function"==typeof _){if(!Kl(a,s,c))return c&ft.Host?zi(f,l,c):pa(a,l,c,f);try{const b=_(c);if(null!=b||c&ft.Optional)return b;Pe(l)}finally{vd()}}else if("number"==typeof _){let b=null,w=yn(s,a),I=-1,x=c&ft.Host?a[16][6]:null;for((-1===w||c&ft.SkipSelf)&&(I=-1===w?nu(s,a):a[w+8],-1!==I&&Hn(c,!1)?(b=a[1],w=fa(I),a=cl(I,a)):w=-1);-1!==w;){const k=a[1];if(oi(_,w,k.data)){const V=ma(w,a,l,b,c,x);if(V!==oo)return V}I=a[w+8],-1!==I&&Hn(c,a[1].data[w+8]===x)&&oi(_,w,a)?(b=k,w=fa(I),a=cl(I,a)):w=-1}}}return pa(a,l,c,f)}const oo={};function Id(){return new $o(On(),Me())}function ma(s,a,l,c,f,_){const b=a[1],w=b.data[s+8],k=Lr(w,b,l,null==c?Qs(w)&&Jl:c!=b&&0!=(3&w.type),f&ft.Host&&_===w);return null!==k?si(a,b,k,w):oo}function Lr(s,a,l,c,f){const _=s.providerIndexes,b=a.data,w=1048575&_,I=s.directiveStart,k=_>>20,G=f?w+k:s.directiveEnd;for(let ee=c?w:w+k;ee<G;ee++){const ye=b[ee];if(ee<I&&l===ye||ee>=I&&ye.type===l)return ee}if(f){const ee=b[I];if(ee&&ni(ee)&&ee.type===l)return I}return null}function si(s,a,l,c){let f=s[l];const _=a.data;if(function(s){return s instanceof al}(f)){const b=f;b.resolving&&function(s,a){throw new $e("200",`Circular dependency in DI detected for ${s}`)}(Te(_[l]));const w=eu(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Nr(b.injectImpl):null;Kl(s,c,ft.Default);try{f=s[l]=b.factory(void 0,_,s,c),a.firstCreatePass&&l>=c.directiveStart&&function(s,a,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(c){const b=fd(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,b)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,_))}(l,_[l],a)}finally{null!==I&&Nr(I),eu(w),b.resolving=!1,vd()}}return f}function oi(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function Hn(s,a){return!(s&ft.Self||s&ft.Host&&a)}class $o{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return Ho(this._tNode,this._lView,a,c,l)}}function Os(s){return zn(()=>{const a=s.prototype.constructor,l=a[xe]||Ln(a),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const _=f[xe]||Ln(f);if(_&&_!==l)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function Ln(s){return qe(s)?()=>{const a=Ln(ae(s));return a&&a()}:ls(s)}function Gt(s){return function(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const _=l[f];if(io(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(_===a)return l[f+1];f+=2}}}return null}(On(),s)}const ds="__parameters__";function Tn(s,a,l){return zn(()=>{const c=function(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(a);function f(..._){if(this instanceof f)return c.apply(this,_),this;const b=new f(..._);return w.annotation=b,w;function w(I,x,k){const V=I.hasOwnProperty(ds)?I[ds]:Object.defineProperty(I,ds,{value:[]})[ds];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(b),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class hn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=dn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hl=new hn("AnalyzeForEntryComponents");function Ki(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(a===s&&(a=s.slice(0,l)),Ki(c,a)):a!==s&&a.push(c)}return a}function hs(s,a){s.forEach(l=>Array.isArray(l)?hs(l,a):a(l))}function Td(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function zo(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function ya(s,a){const l=[];for(let c=0;c<s;c++)l.push(a);return l}function Sr(s,a,l){let c=ao(s,a);return c>=0?s[1|c]=l:(c=~c,function(s,a,l,c){let f=s.length;if(f==a)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=c}}(s,c,a,l)),c}function fs(s,a){const l=ao(s,a);if(l>=0)return s[1|l]}function ao(s,a){return function(s,a,l){let c=0,f=s.length>>l;for(;f!==c;){const _=c+(f-c>>1),b=s[_<<l];if(a===b)return _<<l;b>a?f=_:c=_+1}return~(f<<l)}(s,a,1)}const ba={},Ad="__NG_DI_FLAG__",uo="ngTempTokenPath",lc=/\n/gm,T="__source",M=Ee({provide:String,useValue:Ee});let N;function B(s){const a=N;return N=s,a}function J(s,a=ft.Default){if(void 0===N)throw new Error("inject() must be called from an injection context");return null===N?Yr(s,void 0,a):N.get(s,a&ft.Optional?null:void 0,a)}function X(s,a=ft.Default){return(Sn||J)(ae(s),a)}const at=X;function _t(s){const a=[];for(let l=0;l<s.length;l++){const c=ae(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let f,_=ft.Default;for(let b=0;b<c.length;b++){const w=c[b],I=Wt(w);"number"==typeof I?-1===I?f=w.token:_|=I:f=w}a.push(X(f,_))}else a.push(X(c))}return a}function vt(s,a){return s[Ad]=a,s.prototype[Ad]=a,s}function Wt(s){return s[Ad]}const vn=vt(Tn("Inject",s=>({token:s})),-1),Ur=vt(Tn("Optional"),8),ai=vt(Tn("SkipSelf"),4);let ps;function pl(s){var a;return(null==(a=function(){if(void 0===ps&&(ps=null,Dt.trustedTypes))try{ps=Dt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ps}())?void 0:a.createHTML(s))||s}class wa{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Rd extends wa{getTypeName(){return"HTML"}}class kd extends wa{getTypeName(){return"Style"}}class Fm extends wa{getTypeName(){return"Script"}}class dc extends wa{getTypeName(){return"URL"}}class Lm extends wa{getTypeName(){return"ResourceURL"}}function Fs(s){return s instanceof wa?s.changingThisBreaksApplicationSecurity:s}function du(s,a){const l=hc(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function hc(s){return s instanceof wa&&s.getTypeName()||null}function fc(s){return new Rd(s)}function pc(s){return new kd(s)}function Vm(s){return new Fm(s)}function Um(s){return new dc(s)}function Bm(s){return new Lm(s)}class Od{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(pl(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class _y{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=pl(a),l;const c=this.inertDocument.createElement("body");return c.innerHTML=pl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const b=l.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const jm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,vy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function _l(s){return(s=String(s)).match(jm)||s.match(vy)?s:"unsafe:"+s}function Ls(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function Ca(...s){const a={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(a[c]=!0);return a}const $m=Ls("area,br,col,hr,img,wbr"),Gm=Ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zm=Ls("rp,rt"),Zo=Ca($m,Ca(Gm,Ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ca(zm,Ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ca(zm,Gm)),If=Ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Tf=Ls("srcset"),hu=Ca(If,Tf,Ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vl=Ls("script,style,template");class Ey{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Zo.hasOwnProperty(l))return this.sanitizedSomething=!0,!vl.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=a.attributes;for(let f=0;f<c.length;f++){const _=c.item(f),b=_.name,w=b.toLowerCase();if(!hu.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=_.value;If[w]&&(I=_l(I)),Tf[w]&&(s=I,I=(s=String(s)).split(",").map(a=>_l(a.trim())).join(", ")),this.buf.push(" ",b,'="',Pd(I),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Zo.hasOwnProperty(l)&&!$m.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Pd(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const fu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Km=/([^\#-~ |!])/g;function Pd(s){return s.replace(/&/g,"&amp;").replace(fu,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Km,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mc;function Fd(s,a){let l=null;try{mc=mc||function(s){const a=new _y(s);return function(){try{return!!(new window.DOMParser).parseFromString(pl(""),"text/html")}catch(s){return!1}}()?new Od(a):a}(s);let c=a?String(a):"";l=mc.getInertBodyElement(c);let f=5,_=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=_,_=l.innerHTML,l=mc.getInertBodyElement(c)}while(c!==_);return pl((new Ey).sanitizeChildren(Ld(l)||l))}finally{if(l){const c=Ld(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Ld(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function fo(s){const a=function(){const s=Me();return s&&s[12]}();return a?a.sanitize($n.URL,s)||"":du(s,"URL")?Fs(s):_l(oe(s))}const xf="__ngContext__";function Br(s,a){s[xf]=a}function Rf(s){const a=function(s){return s[xf]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function Nf(s){return s.ngOriginalError}function Ry(s,...a){s.error(...a)}class Ia{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),c=(s=a)&&s.ngErrorLogger||Ry;var s;c(this._console,"ERROR",a),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Nf(a);for(;l&&Nf(l);)l=Nf(l);return l||null}}const tg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function gs(s){return s instanceof Function?s():s}var Us=(()=>((Us=Us||{})[Us.Important=1]="Important",Us[Us.DashCase=2]="DashCase",Us))();function _s(s,a){return undefined(s,a)}function bc(s){const a=s[3];return Bi(a)?a[3]:a}function jr(s){return zd(s[13])}function Ec(s){return zd(s[4])}function zd(s){for(;null!==s&&!Bi(s);)s=s[4];return s}function li(s,a,l,c,f){if(null!=c){let _,b=!1;Bi(c)?_=c:Ui(c)&&(b=!0,c=c[0]);const w=jn(c);0===s&&null!==l?null==f?lt(a,l,w):Se(a,l,w,f||null,!0):1===s&&null!==l?Se(a,l,w,f||null,!0):2===s?function(s,a,l){const c=tr(s,a);c&&function(s,a,l,c){nn(s)?s.removeChild(a,l,c):a.removeChild(l)}(s,c,a,l)}(a,w,b):3===s&&a.destroyNode(w),null!=_&&function(s,a,l,c,f){const _=l[7];_!==jn(l)&&li(a,s,c,_,f);for(let w=10;w<l.length;w++){const I=l[w];Dc(I[1],I,s,a,c,_)}}(a,s,_,l,f)}}function Uf(s,a,l){return nn(s)?s.createElement(a,l):null===l?s.createElement(a):s.createElementNS(l,a)}function p(s,a){const l=s[9],c=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,No(f,-1)),l.splice(c,1)}function m(s,a){if(s.length<=10)return;const l=10+a,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&p(f,c),a>0&&(s[l-1][4]=c[4]);const _=zo(s,10+a);!function(s,a){Dc(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const b=_[19];null!==b&&b.detachView(_[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function E(s,a){if(!(256&a[2])){const l=a[11];nn(l)&&l.destroyNode&&Dc(s,a,l,3,null,null),function(s){let a=s[13];if(!a)return S(s[1],s);for(;a;){let l=null;if(Ui(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==s;)Ui(a)&&S(a[1],a),a=a[3];null===a&&(a=s),Ui(a)&&S(a[1],a),l=a&&a[4]}a=l}}(a)}}function S(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=a[l[c]];if(!(f instanceof al)){const _=l[c+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const w=f[_[b]],I=_[b+1];try{I.call(w)}finally{}}else try{_.call(f)}finally{}}}}(s,a),function(s,a){const l=s.cleanup,c=a[7];let f=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const b=l[_+1],w="function"==typeof b?b(a):jn(a[b]),I=c[f=l[_+2]],x=l[_+3];"boolean"==typeof x?w.removeEventListener(l[_],I,x):x>=0?c[f=x]():c[f=-x].unsubscribe(),_+=2}else{const b=c[f=l[_+1]];l[_].call(b)}if(null!==c){for(let _=f+1;_<c.length;_++)c[_]();a[7]=null}}(s,a),1===a[1].type&&nn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Bi(a[3])){l!==a[3]&&p(l,a);const c=a[19];null!==c&&c.detachView(s)}}}function ie(s,a,l){return function(s,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===et.None||f===et.Emulated)return null}return Nn(c,l)}(s,a.parent,l)}function Se(s,a,l,c,f){nn(s)?s.insertBefore(a,l,c,f):a.insertBefore(l,c,f)}function lt(s,a,l){nn(s)?s.appendChild(a,l):a.appendChild(l)}function dt(s,a,l,c,f){null!==c?Se(s,a,l,c,f):lt(s,a,l)}function tr(s,a){return nn(s)?s.parentNode(a):a.parentNode}function vu(s,a,l){return Hf(s,a,l)}let Hf=function(s,a,l){return 40&s.type?Nn(s,l):null};function wc(s,a,l,c){const f=ie(s,c,a),_=a[11],w=vu(c.parent||a[6],c,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)dt(_,f,l[I],w,!1);else dt(_,f,l,w,!1)}function Cc(s,a){if(null!==a){const l=a.type;if(3&l)return Nn(a,s);if(4&l)return Kd(-1,s[a.index]);if(8&l){const c=a.child;if(null!==c)return Cc(s,c);{const f=s[a.index];return Bi(f)?Kd(-1,f):jn(f)}}if(32&l)return _s(a,s)()||jn(s[a.index]);{const c=Ic(s,a);return null!==c?Array.isArray(c)?c[0]:Cc(bc(s[16]),c):Cc(s,a.next)}}return null}function Ic(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Kd(s,a){const l=10+s+1;if(l<a.length){const c=a[l],f=c[1].firstChild;if(null!==f)return Cc(c,f)}return a[7]}function Tc(s,a,l,c,f,_,b){for(;null!=l;){const w=c[l.index],I=l.type;if(b&&0===a&&(w&&Br(jn(w),c),l.flags|=4),64!=(64&l.flags))if(8&I)Tc(s,a,l.child,c,f,_,!1),li(a,s,f,w,_);else if(32&I){const x=_s(l,c);let k;for(;k=x();)li(a,s,f,k,_);li(a,s,f,w,_)}else 16&I?k0(s,a,c,l,f,_):li(a,s,f,w,_);l=b?l.projectionNext:l.next}}function Dc(s,a,l,c,f,_){Tc(l,c,s.firstChild,a,f,_,!1)}function k0(s,a,l,c,f,_){const b=l[16],I=b[6].projection[c.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)li(a,s,f,I[x],_);else Tc(s,a,I,b[3],f,_,!0)}function N0(s,a,l){nn(s)?s.setAttribute(a,"style",l):a.style.cssText=l}function Sc(s,a,l){nn(s)?""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l):a.className=l}function Uy(s,a,l){let c=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const _=a.length;if(f+_===c||s.charCodeAt(f+_)<=32)return f}l=f+1}}const O0="ng-template";function KD(s,a,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==Uy(f.toLowerCase(),a,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function $f(s){return 4===s.type&&s.value!==O0}function Eu(s,a,l){return a===(4!==s.type||l?s.value:O0)}function sO(s,a,l){let c=4;const f=s.attrs||[],_=function(s){for(let a=0;a<s.length;a++)if(io(s[a]))return a;return s.length}(f);let b=!1;for(let w=0;w<a.length;w++){const I=a[w];if("number"!=typeof I){if(!b)if(4&c){if(c=2|1&c,""!==I&&!Eu(s,I,l)||""===I&&1===a.length){if(Ii(c))return!1;b=!0}}else{const x=8&c?I:a[++w];if(8&c&&null!==s.attrs){if(!KD(s.attrs,x,l)){if(Ii(c))return!1;b=!0}continue}const V=ZD(8&c?"class":I,f,$f(s),l);if(-1===V){if(Ii(c))return!1;b=!0;continue}if(""!==x){let G;G=V>_?"":f[V+1].toLowerCase();const ee=8&c?G:null;if(ee&&-1!==Uy(ee,x,0)||2&c&&x!==G){if(Ii(c))return!1;b=!0}}}}else{if(!b&&!Ii(c)&&!Ii(I))return!1;if(b&&Ii(I))continue;b=!1,c=I|1&c}}return Ii(c)||b}function Ii(s){return 0==(1&s)}function ZD(s,a,l,c){if(null===a)return-1;let f=0;if(c||!l){let _=!1;for(;f<a.length;){const b=a[f];if(b===s)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,s)}function P0(s,a,l=!1){for(let c=0;c<a.length;c++)if(sO(s,a[c],l))return!0;return!1}function Zd(s,a){e:for(let l=0;l<a.length;l++){const c=a[l];if(s.length===c.length){for(let f=0;f<s.length;f++)if(s[f]!==c[f])continue e;return!0}}return!1}function L0(s,a){return s?":not("+a.trim()+")":a}function XD(s){let a=s[0],l=1,c=2,f="",_=!1;for(;l<s.length;){let b=s[l];if("string"==typeof b)if(2&c){const w=s[++l];f+="["+b+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?f+="."+b:4&c&&(f+=" "+b);else""!==f&&!Ii(b)&&(a+=L0(_,f),f=""),c=b,_=_||!Ii(c);l++}return""!==f&&(a+=L0(_,f)),a}const Vt={};function By(s){U0(qt(),Me(),An()+s,Po())}function U0(s,a,l,c){if(!c)if(3==(3&a[2])){const _=s.preOrderCheckHooks;null!==_&&Ql(a,_,l)}else{const _=s.preOrderHooks;null!==_&&ol(a,_,0,l)}no(l)}function sg(s,a){return s<<17|a<<2}function ys(s){return s>>17&32767}function Gf(s){return 2|s}function Da(s){return(131068&s)>>2}function jy(s,a){return-131069&s|a<<2}function og(s){return 1|s}function oS(s,a){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],_=l[c+1];if(-1!==_){const b=s.data[_];da(f),b.contentQueries(2,a[_],_)}}}function hg(s,a,l,c,f,_,b,w,I,x){const k=a.blueprint.slice();return k[0]=f,k[2]=140|c,ko(k),k[3]=k[15]=s,k[8]=l,k[10]=b||s&&s[10],k[11]=w||s&&s[11],k[12]=I||s&&s[12]||null,k[9]=x||s&&s[9]||null,k[6]=_,k[16]=2==a.type?s[16]:k,k}function qf(s,a,l,c,f){let _=s.data[a];if(null===_)_=function(s,a,l,c,f){const _=Ja(),b=zl(),I=s.data[a]=function(s,a,l,c,f,_){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,l,a,c,f);return null===s.firstChild&&(s.firstChild=I),null!==_&&(b?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I)),I}(s,a,l,c,f),gt.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=l,_.value=c,_.attrs=f;const b=function(){const s=gt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return Er(_,!0),_}function Wf(s,a,l,c){if(0===l)return-1;const f=a.length;for(let _=0;_<l;_++)a.push(c),s.blueprint.push(c),s.data.push(null);return f}function fg(s,a,l){Xu(a);try{const c=s.viewQuery;null!==c&&rw(1,c,l);const f=s.template;null!==f&&aS(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&oS(s,a),s.staticViewQueries&&rw(2,s.viewQuery,l);const _=s.components;null!==_&&function(s,a){for(let l=0;l<a.length;l++)FO(s,a[l])}(a,_)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[2]&=-5,il()}}function Kf(s,a,l,c){const f=a[2];if(256==(256&f))return;Xu(a);const _=Po();try{ko(a),function(s){gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&aS(s,a,l,2,c);const b=3==(3&f);if(!_)if(b){const x=s.preOrderCheckHooks;null!==x&&Ql(a,x,null)}else{const x=s.preOrderHooks;null!==x&&ol(a,x,0,null),Ed(a,0)}if(function(s){for(let a=jr(s);null!==a;a=Ec(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const f=l[c],_=f[3];0==(1024&f[2])&&No(_,1),f[2]|=1024}}}(a),function(s){for(let a=jr(s);null!==a;a=Ec(a))for(let l=10;l<a.length;l++){const c=a[l],f=c[1];Za(c)&&Kf(f,c,f.template,c[8])}}(a),null!==s.contentQueries&&oS(s,a),!_)if(b){const x=s.contentCheckHooks;null!==x&&Ql(a,x)}else{const x=s.contentHooks;null!==x&&ol(a,x,1),Ed(a,1)}!function(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)no(~f);else{const _=f,b=l[++c],w=l[++c];tl(b,_),w(2,a[_])}}}finally{no(-1)}}(s,a);const w=s.components;null!==w&&function(s,a){for(let l=0;l<a.length;l++)PO(s,a[l])}(a,w);const I=s.viewQuery;if(null!==I&&rw(2,I,c),!_)if(b){const x=s.viewCheckHooks;null!==x&&Ql(a,x)}else{const x=s.viewHooks;null!==x&&ol(a,x,2),Ed(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),_||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,No(a[3],-1))}finally{il()}}function _O(s,a,l,c){const f=a[10],_=!Po(),b=Ka(a);try{_&&!b&&f.begin&&f.begin(),b&&fg(s,a,c),Kf(s,a,l,c)}finally{_&&!b&&f.end&&f.end()}}function aS(s,a,l,c,f){const _=An(),b=2&c;try{no(-1),b&&a.length>20&&U0(s,a,20,Po()),l(c,f)}finally{no(_)}}function lS(s,a,l){if(tf(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const b=s.data[_];b.contentQueries&&b.contentQueries(1,l[_],_)}}}function Z0(s,a,l){!Xa()||(function(s,a,l,c){const f=l.directiveStart,_=l.directiveEnd;s.firstCreatePass||jo(l,a),Br(c,a);const b=l.initialInputs;for(let w=f;w<_;w++){const I=s.data[w],x=ni(I);x&&xO(a,l,I);const k=si(a,s,w,l);Br(k,a),null!==b&&RO(0,w-f,k,I,0,b),x&&(rn(l.index,a)[8]=k)}}(s,a,l,Nn(l,a)),128==(128&l.flags)&&function(s,a,l){const c=l.directiveStart,f=l.directiveEnd,b=l.index,w=gt.lFrame.currentDirectiveIndex;try{no(b);for(let I=c;I<f;I++){const x=s.data[I],k=a[I];Lo(I),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&gS(x,k)}}finally{no(-1),Lo(w)}}(s,a,l))}function Y0(s,a,l=Nn){const c=a.localNames;if(null!==c){let f=a.index+1;for(let _=0;_<c.length;_+=2){const b=c[_+1],w=-1===b?l(a,s):s[b];s[f++]=w}}}function uS(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Wy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Wy(s,a,l,c,f,_,b,w,I,x){const k=20+c,V=k+f,G=function(s,a){const l=[];for(let c=0;c<a;c++)l.push(c<s?null:Vt);return l}(k,V),ee="function"==typeof x?x():x;return G[1]={type:s,blueprint:G,template:l,queries:null,viewQuery:w,declTNode:a,data:G.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function hS(s,a,l,c){const f=CS(a);null===l?f.push(c):(f.push(l),s.firstCreatePass&&IS(s).push(c,f.length-1))}function fS(s,a,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,f):l[c]=[a,f]}return l}function po(s,a,l,c,f,_,b,w){const I=Nn(a,l);let k,x=a.inputs;!w&&null!=x&&(k=x[c])?(SS(s,l,k,c,f),Qs(a)&&function(s,a){const l=rn(a,s);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=b?b(f,a.value||"",c):f,nn(_)?_.setProperty(I,c,f):Ze(c)||(I.setProperty?I.setProperty(c,f):I[c]=f))}function Q0(s,a,l,c){let f=!1;if(Xa()){const _=function(s,a,l){const c=s.directiveRegistry;let f=null;if(c)for(let _=0;_<c.length;_++){const b=c[_];P0(l,b.selectors,!1)&&(f||(f=[]),so(jo(l,a),s,b.type),ni(b)?(_S(s,l),f.unshift(b)):f.push(b))}return f}(s,a,l),b=null===c?null:{"":-1};if(null!==_){f=!0,vS(l,s.data.length,_.length);for(let k=0;k<_.length;k++){const V=_[k];V.providersResolver&&V.providersResolver(V)}let w=!1,I=!1,x=Wf(s,a,_.length,null);for(let k=0;k<_.length;k++){const V=_[k];l.mergedAttrs=Fn(l.mergedAttrs,V.hostAttrs),bS(s,l,a,x,V),MO(x,V,b),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const G=V.type.prototype;!w&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),x++}!function(s,a){const c=a.directiveEnd,f=s.data,_=a.attrs,b=[];let w=null,I=null;for(let x=a.directiveStart;x<c;x++){const k=f[x],V=k.inputs,G=null===_||$f(a)?null:kO(V,_);b.push(G),w=fS(V,x,w),I=fS(k.outputs,x,I)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=w,a.outputs=I}(s,l)}b&&function(s,a,l){if(a){const c=s.localNames=[];for(let f=0;f<a.length;f+=2){const _=l[a[f+1]];if(null==_)throw new $e("301",`Export of name '${a[f+1]}' not found!`);c.push(a[f],_)}}}(l,c,b)}return l.mergedAttrs=Fn(l.mergedAttrs,l.attrs),f}function mS(s,a,l,c,f,_){const b=_.hostBindings;if(b){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~a.index;(function(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(c,f,b)}}function gS(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function _S(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function MO(s,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=s;ni(a)&&(l[""]=s)}}function vS(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function bS(s,a,l,c,f){s.data[c]=f;const _=f.factory||(f.factory=ls(f.type)),b=new al(_,ni(f),null);s.blueprint[c]=b,l[c]=b,mS(s,a,0,c,Wf(s,l,f.hostVars,Vt),f)}function xO(s,a,l){const c=Nn(a,s),f=uS(l),_=s[10],b=Ky(s,hg(s,f,null,l.onPush?64:16,c,a,_,_.createRenderer(c,l),null,null));s[a.index]=b}function Cl(s,a,l,c,f,_){const b=Nn(s,a);!function(s,a,l,c,f,_,b){if(null==_)nn(s)?s.removeAttribute(a,f,l):a.removeAttribute(f);else{const w=null==b?oe(_):b(_,c||"",f);nn(s)?s.setAttribute(a,f,w,l):l?a.setAttributeNS(l,f,w):a.setAttribute(f,w)}}(a[11],b,_,s.value,l,c,f)}function RO(s,a,l,c,f,_){const b=_[a];if(null!==b){const w=c.setInput;for(let I=0;I<b.length;){const x=b[I++],k=b[I++],V=b[I++];null!==w?c.setInput(l,V,x,k):l[k]=V}}}function kO(s,a){let l=null,c=0;for(;c<a.length;){const f=a[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[c+1])),c+=2}else c+=2;else c+=4}return l}function ES(s,a,l,c){return new Array(s,!0,!1,a,null,0,c,l,null,null)}function PO(s,a){const l=rn(a,s);if(Za(l)){const c=l[1];80&l[2]?Kf(c,l,c.template,l[8]):l[5]>0&&J0(l)}}function J0(s){for(let c=jr(s);null!==c;c=Ec(c))for(let f=10;f<c.length;f++){const _=c[f];if(1024&_[2]){const b=_[1];Kf(b,_,b.template,_[8])}else _[5]>0&&J0(_)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=rn(l[c],s);Za(f)&&f[5]>0&&J0(f)}}function FO(s,a){const l=rn(a,s),c=l[1];(function(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(c,l),fg(c,l,l[8])}function Ky(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function ew(s){for(;s;){s[2]|=64;const a=bc(s);if(nf(s)&&!a)return s;s=a}return null}function nw(s,a,l){const c=a[10];c.begin&&c.begin();try{Kf(s,a,s.template,l)}catch(f){throw DS(a,f),f}finally{c.end&&c.end()}}function wS(s){!function(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],c=Rf(l),f=c[1];_O(f,c,f.template,l)}}(s[8])}function rw(s,a,l){da(0),a(s,l)}const jO=(()=>Promise.resolve(null))();function CS(s){return s[7]||(s[7]=[])}function IS(s){return s.cleanup||(s.cleanup=[])}function DS(s,a){const l=s[9],c=l?l.get(Ia,null):null;c&&c.handleError(a)}function SS(s,a,l,c,f){for(let _=0;_<l.length;){const b=l[_++],w=l[_++],I=a[b],x=s.data[b];null!==x.setInput?x.setInput(I,f,c,w):I[w]=f}}function Cu(s,a,l){const c=Js(a,s);!function(s,a,l){nn(s)?s.setValue(a,l):a.textContent=l}(s[11],c,l)}function Zy(s,a,l){let c=l?s.styles:null,f=l?s.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const w=a[b];"number"==typeof w?_=w:1==_?f=ge(f,w):2==_&&(c=ge(c,w+": "+a[++b]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}const iw=new hn("INJECTOR",-1);class AS{get(a,l=ba){if(l===ba){const c=new Error(`NullInjectorError: No provider for ${de(a)}!`);throw c.name="NullInjectorError",c}return l}}const sw=new hn("Set Injector scope."),pg={},GO={};let ow;function MS(){return void 0===ow&&(ow=new AS),ow}function xS(s,a=null,l=null,c){const f=RS(s,a,l,c);return f._resolveInjectorDefTypes(),f}function RS(s,a=null,l=null,c){return new zO(s,l,a||MS(),c)}class zO{constructor(a,l,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];l&&hs(l,w=>this.processProvider(w,a,l)),hs([a],w=>this.processInjectorType(w,[],_)),this.records.set(iw,Zf(void 0,this));const b=this.records.get(sw);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:de(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=ba,c=ft.Default){this.assertNotDestroyed();const f=B(this),_=Nr(void 0);try{if(!(c&ft.SkipSelf)){let w=this.records.get(a);if(void 0===w){const I=("function"==typeof(s=a)||"object"==typeof s&&s instanceof hn)&&os(a);w=I&&this.injectableDefInScope(I)?Zf(aw(a),pg):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(c&ft.Self?MS():this.parent).get(a,l=c&ft.Optional&&l===ba?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[uo]=b[uo]||[]).unshift(de(a)),f)throw b;return function(s,a,l,c){const f=s[uo];throw a[T]&&f.unshift(a[T]),s.message=function(s,a,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=de(a);if(Array.isArray(a))f=a.map(de).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let w=a[b];_.push(b+":"+("string"==typeof w?JSON.stringify(w):de(w)))}f=`{${_.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(lc,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[uo]=null,s}(b,a,"R3InjectorError",this.source)}throw b}finally{Nr(_),B(f)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((c,f)=>a.push(de(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,l,c){if(!(a=ae(a)))return!1;let f=Io(a);const _=null==f&&a.ngModule||void 0,b=void 0===_?a:_,w=-1!==c.indexOf(b);if(void 0!==_&&(f=Io(_)),null==f)return!1;if(null!=f.imports&&!w){let k;c.push(b);try{hs(f.imports,V=>{this.processInjectorType(V,l,c)&&(void 0===k&&(k=[]),k.push(V))})}finally{}if(void 0!==k)for(let V=0;V<k.length;V++){const{ngModule:G,providers:ee}=k[V];hs(ee,ye=>this.processProvider(ye,G,ee||H))}}this.injectorDefTypes.add(b);const I=ls(b)||(()=>new b);this.records.set(b,Zf(I,pg));const x=f.providers;if(null!=x&&!w){const k=a;hs(x,V=>this.processProvider(V,k,x))}return void 0!==_&&void 0!==a.providers}processProvider(a,l,c){let f=Qd(a=ae(a))?a:ae(a&&a.provide);const _=(s=a,NS(s)?Zf(void 0,s.useValue):Zf(kS(s),pg));var s;if(Qd(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=Zf(void 0,pg,!0),b.factory=()=>_t(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,_)}hydrate(a,l){return l.value===pg&&(l.value=GO,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(s=l.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var s}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ae(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function aw(s){const a=os(s),l=null!==a?a.factory:ls(s);if(null!==l)return l;if(s instanceof hn)throw new Error(`Token ${de(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const a=s.length;if(a>0){const c=ya(a,"?");throw new Error(`Can't resolve all parameters for ${de(s)}: (${c.join(", ")}).`)}const l=function(s){const a=s&&(s[Zr]||s[Oe]);if(a){const l=function(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function kS(s,a,l){let c;if(Qd(s)){const f=ae(s);return ls(f)||aw(f)}if(NS(s))c=()=>ae(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(..._t(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>X(ae(s.useExisting));else{const f=ae(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return ls(f)||aw(f);c=()=>new f(..._t(s.deps))}return c}function Zf(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function NS(s){return null!==s&&"object"==typeof s&&M in s}function Qd(s){return"function"==typeof s}let Yi=(()=>{class s{static create(l,c){var f;if(Array.isArray(l))return xS({name:""},c,l,"");{const _=null!=(f=l.name)?f:"";return xS({name:_},l.parent,l.providers,_)}}}return s.THROW_IF_NOT_FOUND=ba,s.NULL=new AS,s.\u0275prov=dn({token:s,providedIn:"any",factory:()=>X(iw)}),s.__NG_ELEMENT_ID__=-1,s})();function GS(s,a){ro(Rf(s)[1],On())}function pw(s){let a=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;a;){let f;if(ni(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");f=a.\u0275dir}if(f){if(l){c.push(f);const b=s;b.inputs=mw(s.inputs),b.declaredInputs=mw(s.declaredInputs),b.outputs=mw(s.outputs);const w=f.hostBindings;w&&iP(s,w);const I=f.viewQuery,x=f.contentQueries;if(I&&nP(s,I),x&&rP(s,x),le(s.inputs,f.inputs),le(s.declaredInputs,f.declaredInputs),le(s.outputs,f.outputs),ni(f)&&f.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const w=_[b];w&&w.ngInherit&&w(s),w===pw&&(l=!1)}}a=Object.getPrototypeOf(a)}!function(s){let a=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=a+=f.hostVars,f.hostAttrs=Fn(f.hostAttrs,l=Fn(l,f.hostAttrs))}}(c)}function mw(s){return s===W?{}:s===H?[]:s}function nP(s,a){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{a(c,f),l(c,f)}:a}function rP(s,a){const l=s.contentQueries;s.contentQueries=l?(c,f,_)=>{a(c,f,_),l(c,f,_)}:a}function iP(s,a){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{a(c,f),l(c,f)}:a}let Xy=null;function Yf(){if(!Xy){const s=Dt.Symbol;if(s&&s.iterator)Xy=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Xy=c)}}}return Xy}function Xd(s){return!!gg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Yf()in s)}function gg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Xi(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function _w(s,a,l,c){const f=Me();return Xi(f,to(),a)&&(qt(),Cl(gn(),f,s,a,l,c)),_w}function eh(s,a,l,c,f,_){const w=function(s,a,l,c){const f=Xi(s,a,l);return Xi(s,a+1,c)||f}(s,gt.lFrame.bindingIndex,l,f);return cs(2),w?a+oe(l)+c+oe(f)+_:Vt}function Aa(s,a,l,c,f,_,b,w){const I=Me(),x=qt(),k=s+20,V=x.firstCreatePass?function(s,a,l,c,f,_,b,w,I){const x=a.consts,k=qf(a,s,4,b||null,ri(x,w));Q0(a,l,k,ri(x,I)),ro(a,k);const V=k.tViews=Wy(2,k,c,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,k),V.queries=a.queries.embeddedTView(k)),k}(k,x,I,a,l,c,f,_,b):x.data[k];Er(V,!1);const G=I[11].createComment("");wc(x,I,G,V),Br(G,I),Ky(I,I[k]=ES(G,I,G,V)),Wn(V)&&Z0(x,I,V),null!=b&&Y0(I,V,w)}function Cw(s){return function(s,a){return s[a]}(gt.lFrame.contextLView,20+s)}function Pc(s,a=ft.Default){const l=Me();return null===l?X(s,a):Ho(On(),l,ae(s),a)}function ep(){throw new Error("invalid")}function Ow(s,a,l){const c=Me();return Xi(c,to(),a)&&po(qt(),gn(),c,s,a,c[11],l,!1),Ow}function Pw(s,a,l,c,f){const b=f?"class":"style";SS(s,l,a.inputs[b],b,c)}function ih(s,a,l,c){const f=Me(),_=qt(),b=20+s,w=f[11],I=f[b]=Uf(w,a,gt.lFrame.currentNamespace),x=_.firstCreatePass?function(s,a,l,c,f,_,b){const w=a.consts,x=qf(a,s,2,f,ri(w,_));return Q0(a,l,x,ri(w,b)),null!==x.attrs&&Zy(x,x.attrs,!1),null!==x.mergedAttrs&&Zy(x,x.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,x),x}(b,_,f,0,a,l,c):_.data[b];Er(x,!0);const k=x.mergedAttrs;null!==k&&_n(w,I,k);const V=x.classes;null!==V&&Sc(w,I,V);const G=x.styles;null!==G&&N0(w,I,G),64!=(64&x.flags)&&wc(_,f,I,x),0===gt.lFrame.elementDepthCount&&Br(I,f),gt.lFrame.elementDepthCount++,Wn(x)&&(Z0(_,f,x),lS(_,x,f)),null!==c&&Y0(f,x)}function Ig(){let s=On();zl()?Oo():(s=s.parent,Er(s,!1));const a=s;gt.lFrame.elementDepthCount--;const l=qt();l.firstCreatePass&&(ro(l,s),tf(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(a)&&Pw(l,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(a)&&Pw(l,a,Me(),a.stylesWithoutHost,!1)}function Tg(s,a,l,c){ih(s,a,l,c),Ig()}function oh(s,a,l){const c=Me(),f=qt(),_=s+20,b=f.firstCreatePass?function(s,a,l,c,f){const _=a.consts,b=ri(_,c),w=qf(a,s,8,"ng-container",b);return null!==b&&Zy(w,b,!0),Q0(a,l,w,ri(_,f)),null!==a.queries&&a.queries.elementStart(a,w),w}(_,f,c,a,l):f.data[_];Er(b,!0);const w=c[_]=c[11].createComment("");wc(f,c,w,b),Br(w,c),Wn(b)&&(Z0(f,c,b),lS(f,b,c)),null!=l&&Y0(c,b)}function hv(){let s=On();const a=qt();zl()?Oo():(s=s.parent,Er(s,!1)),a.firstCreatePass&&(ro(a,s),tf(s)&&a.queries.elementEnd(s))}function fv(){return Me()}function Ma(s){return!!s&&"function"==typeof s.then}function pv(s){return!!s&&"function"==typeof s.subscribe}const mv=pv;function mo(s,a,l,c){const f=Me(),_=qt(),b=On();return function(s,a,l,c,f,_,b,w){const I=Wn(c),k=s.firstCreatePass&&IS(s),V=a[8],G=CS(a);let ee=!0;if(3&c.type||w){const ze=Nn(c,a),rt=w?w(ze):ze,De=G.length,yt=w?zt=>w(jn(zt[c.index])):c.index;if(nn(l)){let zt=null;if(!w&&I&&(zt=function(s,a,l,c){const f=s.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===l&&f[_+1]===c){const w=a[7],I=f[_+2];return w.length>I?w[I]:null}"string"==typeof b&&(_+=2)}return null}(s,a,f,c.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=_,zt.__ngLastListenerFn__=_,ee=!1;else{_=Sg(c,a,V,_,!1);const sn=l.listen(rt,f,_);G.push(_,sn),k&&k.push(f,yt,De,De+1)}}else _=Sg(c,a,V,_,!0),rt.addEventListener(f,_,b),G.push(_),k&&k.push(f,yt,De,b)}else _=Sg(c,a,V,_,!1);const ye=c.outputs;let Ue;if(ee&&null!==ye&&(Ue=ye[f])){const ze=Ue.length;if(ze)for(let rt=0;rt<ze;rt+=2){const di=a[Ue[rt]][Ue[rt+1]].subscribe(_),xu=G.length;G.push(_,di),k&&k.push(f,c.index,xu,-(xu+1))}}}(_,f,f[11],b,s,a,!!l,c),mo}function Dg(s,a,l,c){try{return!1!==l(c)}catch(f){return DS(s,f),!1}}function Sg(s,a,l,c,f){return function _(b){if(b===Function)return c;const w=2&s.flags?rn(s.index,a):a;0==(32&a[2])&&ew(w);let I=Dg(a,0,c,b),x=_.__ngNextListenerFn__;for(;x;)I=Dg(a,0,x,b)&&I,x=x.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function np(s=1){return function(s){return(gt.lFrame.contextLView=function(s,a){for(;s>0;)a=a[15],s--;return a}(s,gt.lFrame.contextLView))[8]}(s)}function Ag(s,a){let l=null;const c=function(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let f=0;f<a.length;f++){const _=a[f];if("*"!==_){if(null===c?P0(s,_,!0):Zd(c,_))return f}else l=f}return l}function Lw(s){const a=Me()[16][6];if(!a.projection){const c=a.projection=ya(s?s.length:1,null),f=c.slice();let _=a.child;for(;null!==_;){const b=s?Ag(_,s):0;null!==b&&(f[b]?f[b].projectionNext=_:c[b]=_,f[b]=_),_=_.next}}}function Mg(s,a=0,l){const c=Me(),f=qt(),_=qf(f,20+s,16,null,l||null);null===_.projection&&(_.projection=a),Oo(),64!=(64&_.flags)&&function(s,a,l){k0(a[11],0,a,l,ie(s,l,a),vu(l.parent||a[6],l,a))}(f,c,_)}function Gw(s,a,l,c,f){const _=s[l+1],b=null===a;let w=c?ys(_):Da(_),I=!1;for(;0!==w&&(!1===I||b);){const k=s[w+1];yv(s[w],a)&&(I=!0,s[w+1]=c?og(k):Gf(k)),w=c?ys(k):Da(k)}I&&(s[l+1]=c?Gf(_):og(_))}function yv(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&ao(s,a)>=0}function Ev(s,a,l){return Es(s,a,l,!1),Ev}function wv(s,a){return Es(s,a,null,!0),wv}function Es(s,a,l,c){const f=Me(),_=qt(),b=cs(2);_.firstUpdatePass&&function(s,a,l,c){const f=s.data;if(null===f[l+1]){const _=f[An()],b=function(s,a){return a>=s.expandoStartIndex}(s,l);(function(s,a){return 0!=(s.flags&(a?16:32))})(_,c)&&null===a&&!b&&(a=!1),a=function(s,a,l,c){const f=function(s){const a=gt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let _=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(l=ap(l=Tv(null,s,a,l,c),a.attrs,c),_=null);else{const b=a.directiveStylingLast;if(-1===b||s[b]!==f)if(l=Tv(f,s,a,l,c),null===_){let I=function(s,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==Da(c))return s[ys(c)]}(s,a,c);void 0!==I&&Array.isArray(I)&&(I=Tv(null,s,a,I[1],c),I=ap(I,a.attrs,c),function(s,a,l,c){s[ys(l?a.classBindings:a.styleBindings)]=c}(s,a,c,I))}else _=function(s,a,l){let c;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)c=ap(c,s[_].hostAttrs,l);return ap(c,a.attrs,l)}(s,a,c)}return void 0!==_&&(c?a.residualClasses=_:a.residualStyles=_),l}(f,_,a,c),function(s,a,l,c,f,_){let b=_?a.classBindings:a.styleBindings,w=ys(b),I=Da(b);s[c]=l;let k,x=!1;if(Array.isArray(l)){const V=l;k=V[1],(null===k||ao(V,k)>0)&&(x=!0)}else k=l;if(f)if(0!==I){const G=ys(s[w+1]);s[c+1]=sg(G,w),0!==G&&(s[G+1]=jy(s[G+1],c)),s[w+1]=function(s,a){return 131071&s|a<<17}(s[w+1],c)}else s[c+1]=sg(w,0),0!==w&&(s[w+1]=jy(s[w+1],c)),w=c;else s[c+1]=sg(I,0),0===w?w=c:s[I+1]=jy(s[I+1],c),I=c;x&&(s[c+1]=Gf(s[c+1])),Gw(s,k,c,!0),Gw(s,k,c,!1),function(s,a,l,c,f){const _=f?s.residualClasses:s.residualStyles;null!=_&&"string"==typeof a&&ao(_,a)>=0&&(l[c+1]=og(l[c+1]))}(a,k,s,c,_),b=sg(w,I),_?a.classBindings=b:a.styleBindings=b}(f,_,a,l,b,c)}}(_,s,b,c),a!==Vt&&Xi(f,b,a)&&function(s,a,l,c,f,_,b,w){if(!(3&a.type))return;const I=s.data,x=I[w+1];Og(function(s){return 1==(1&s)}(x)?Jw(I,a,l,f,Da(x),b):void 0)||(Og(_)||function(s){return 2==(2&s)}(x)&&(_=Jw(I,null,l,f,w,b)),function(s,a,l,c,f){const _=nn(s);if(a)f?_?s.addClass(l,c):l.classList.add(c):_?s.removeClass(l,c):l.classList.remove(c);else{let b=-1===c.indexOf("-")?void 0:Us.DashCase;if(null==f)_?s.removeStyle(l,c,b):l.style.removeProperty(c);else{const w="string"==typeof f&&f.endsWith("!important");w&&(f=f.slice(0,-10),b|=Us.Important),_?s.setStyle(l,c,f,b):l.style.setProperty(c,f,w?"important":"")}}}(c,b,Js(An(),l),f,_))}(_,_.data[An()],f,f[11],s,f[b+1]=function(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=de(Fs(s)))),s}(a,l),c,b)}function Tv(s,a,l,c,f){let _=null;const b=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<b&&(_=a[w],c=ap(c,_.hostAttrs,f),_!==s);)w++;return null!==s&&(l.directiveStylingLast=w),c}function ap(s,a,l){const c=l?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?f=b:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Sr(s,b,!!l||a[++_]))}return void 0===s?null:s}function Jw(s,a,l,c,f,_){const b=null===a;let w;for(;f>0;){const I=s[f],x=Array.isArray(I),k=x?I[1]:I,V=null===k;let G=l[f+1];G===Vt&&(G=V?H:void 0);let ee=V?fs(G,c):k===c?G:void 0;if(x&&!Og(ee)&&(ee=fs(I,c)),Og(ee)&&(w=ee,b))return w;const ye=s[f+1];f=b?ys(ye):Da(ye)}if(null!==a){let I=_?a.residualClasses:a.residualStyles;null!=I&&(w=fs(I,c))}return w}function Og(s){return void 0!==s}function Dv(s,a=""){const l=Me(),c=qt(),f=s+20,_=c.firstCreatePass?qf(c,f,1,a,null):c.data[f],b=l[f]=function(s,a){return nn(s)?s.createText(a):s.createTextNode(a)}(l[11],a);wc(c,l,b,_),Er(_,!1)}function Sv(s){return Av("",s,""),Sv}function Av(s,a,l){const c=Me(),f=function(s,a,l,c){return Xi(s,to(),l)?a+oe(l)+c:Vt}(c,s,a,l);return f!==Vt&&Cu(c,An(),f),Av}function Pg(s,a,l,c,f){const _=Me(),b=eh(_,s,a,l,c,f);return b!==Vt&&Cu(_,An(),b),Pg}function cp(s,a,l){const c=Me();return Xi(c,to(),a)&&po(qt(),gn(),c,s,a,c[11],l,!0),cp}const Lc=void 0;var pC=["en",[["a","p"],["AM","PM"],Lc],[["AM","PM"],Lc,Lc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lc,"{1} 'at' {0}",Lc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let lh={};function Vg(s){const a=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Vv(a);if(l)return l;const c=a.split("-")[0];if(l=Vv(c),l)return l;if("en"===c)return pC;throw new Error(`Missing locale data for the locale "${s}".`)}function mC(s){return Vg(s)[It.PluralCase]}function Vv(s){return s in lh||(lh[s]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[s]),lh[s]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Bg="en-US";let Bv=Bg;function OC(s,a,l,c,f){if(s=ae(s),Array.isArray(s))for(let _=0;_<s.length;_++)OC(s[_],a,l,c,f);else{const _=qt(),b=Me();let w=Qd(s)?s:ae(s.provide),I=kS(s);const x=On(),k=1048575&x.providerIndexes,V=x.directiveStart,G=x.providerIndexes>>20;if(Qd(s)||!s.multi){const ee=new al(I,f,Pc),ye=FC(w,a,f?k:k+G,V);-1===ye?(so(jo(x,b),_,w),PC(_,s,a.length),a.push(w),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(ee),b.push(ee)):(l[ye]=ee,b[ye]=ee)}else{const ee=FC(w,a,k+G,V),ye=FC(w,a,k,k+G),Ue=ee>=0&&l[ee],ze=ye>=0&&l[ye];if(f&&!ze||!f&&!Ue){so(jo(x,b),_,w);const rt=function(s,a,l,c,f){const _=new al(s,l,Pc);return _.multi=[],_.index=a,_.componentProviders=0,KA(_,f,c&&!l),_}(f?FP:PP,l.length,f,c,I);!f&&ze&&(l[ye].providerFactory=rt),PC(_,s,a.length,0),a.push(w),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(rt),b.push(rt)}else PC(_,s,ee>-1?ee:ye,KA(l[f?ye:ee],I,!f&&c));!f&&c&&ze&&l[ye].componentProviders++}}}function PC(s,a,l,c){const f=Qd(a),_=function(s){return!!s.useClass}(a);if(f||_){const I=(_?ae(a.useClass):a).prototype.ngOnDestroy;if(I){const x=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const k=x.indexOf(l);-1===k?x.push(l,[c,I]):x[k+1].push(c,I)}else x.push(l,I)}}}function KA(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function FC(s,a,l,c){for(let f=l;f<c;f++)if(a[f]===s)return f;return-1}function PP(s,a,l,c){return LC(this.multi,[])}function FP(s,a,l,c){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,w=si(l,l[1],this.providerFactory.index,c);_=w.slice(0,b),LC(f,_);for(let I=b;I<w.length;I++)_.push(w[I])}else _=[],LC(f,_);return _}function LC(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function ZA(s,a=[]){return l=>{l.providersResolver=(c,f)=>function(s,a,l){const c=qt();if(c.firstCreatePass){const f=ni(s);OC(l,c.data,c.blueprint,f,!0),OC(a,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,a)}}class YA{}class XA{resolveComponentFactory(a){throw function(s){const a=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let yp=(()=>{class s{}return s.NULL=new XA,s})();function BP(){return dh(On(),Me())}function dh(s,a){return new vp(Nn(s,a))}let vp=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=BP,s})();function UC(s){return s instanceof vp?s.nativeElement:s}class Au{}let xa=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function(){const s=Me(),l=rn(On().index,s);return function(s){return s[11]}(Ui(l)?l:s)}(),s})(),tM=(()=>{class s{}return s.\u0275prov=dn({token:s,providedIn:"root",factory:()=>null}),s})();class jC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const HC=new jC("13.0.3"),hh={};function Xo(s,a,l,c,f=!1){for(;null!==l;){const _=a[l.index];if(null!==_&&c.push(jn(_)),Bi(_))for(let w=10;w<_.length;w++){const I=_[w],x=I[1].firstChild;null!==x&&Xo(I[1],I,x,c)}const b=l.type;if(8&b)Xo(s,a,l.child,c);else if(32&b){const w=_s(l,a);let I;for(;I=w();)c.push(I)}else if(16&b){const w=Ic(a,l);if(Array.isArray(w))c.push(...w);else{const I=bc(a[16]);Xo(I[1],I,w,c,!0)}}l=f?l.projectionNext:l.next}return c}class fh{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Xo(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Bi(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(m(a,c),zo(l,c))}this._attachedToViewContainer=!1}E(this._lView[1],this._lView)}onDestroy(a){hS(this._lView[1],this._lView,null,a)}markForCheck(){ew(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){nw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,a,l){Fo(!0);try{nw(s,a,l)}finally{Fo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,Dc(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class Ti extends fh{constructor(a){super(a),this._view=a}detectChanges(){wS(this._view)}checkNoChanges(){!function(s){Fo(!0);try{wS(s)}finally{Fo(!1)}}(this._view)}get context(){return null}}class Sl extends yp{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ir(a);return new Hg(l,this.ngModule)}}function $C(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}const GC=new hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>tg});class Hg extends YA{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=a.selectors.map(XD).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return $C(this.componentDef.inputs)}get outputs(){return $C(this.componentDef.outputs)}create(a,l,c,f){const _=(f=f||this.ngModule)?function(s,a){return{get:(l,c,f)=>{const _=s.get(l,hh,f);return _!==hh||c===hh?_:a.get(l,c,f)}}}(a,f.injector):a,b=_.get(Au,xs),w=_.get(tM,null),I=b.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=c?function(s,a,l){if(nn(s))return s.selectRootElement(a,l===et.ShadowDom);let c="string"==typeof a?s.querySelector(a):a;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Uf(b.createRenderer(null,this.componentDef),x,function(s){const a=s.toLowerCase();return"svg"===a?md:"math"===a?"http://www.w3.org/1998/MathML/":null}(x)),V=this.componentDef.onPush?576:528,G=function(s,a){return{components:[],scheduler:s||tg,clean:jO,playerHandler:a||null,flags:0}}(),ee=Wy(0,null,null,1,0,null,null,null,null,null),ye=hg(null,ee,G,V,null,null,b,I,w,_);let Ue,ze;Xu(ye);try{const rt=function(s,a,l,c,f,_){const b=l[1];l[20]=s;const I=qf(b,20,2,"#host",null),x=I.mergedAttrs=a.hostAttrs;null!==x&&(Zy(I,x,!0),null!==s&&(_n(f,s,x),null!==I.classes&&Sc(f,s,I.classes),null!==I.styles&&N0(f,s,I.styles)));const k=c.createRenderer(s,a),V=hg(l,uS(a),null,a.onPush?64:16,l[20],I,c,k,_||null,null);return b.firstCreatePass&&(so(jo(I,l),b,a.type),_S(b,I),vS(I,l.length,1)),Ky(l,V),l[20]=V}(k,this.componentDef,ye,b,I);if(k)if(c)_n(I,k,["ng-version",HC.full]);else{const{attrs:De,classes:yt}=function(s){const a=[],l=[];let c=1,f=2;for(;c<s.length;){let _=s[c];if("string"==typeof _)2===f?""!==_&&a.push(_,s[++c]):8===f&&l.push(_);else{if(!Ii(f))break;f=_}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);De&&_n(I,k,De),yt&&yt.length>0&&Sc(I,k,yt.join(" "))}if(ze=Hi(ee,20),void 0!==l){const De=ze.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const zt=l[yt];De.push(null!=zt?Array.from(zt):null)}}Ue=function(s,a,l,c,f){const _=l[1],b=function(s,a,l){const c=On();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),bS(s,c,a,Wf(s,a,1,null),l));const f=si(a,s,c.directiveStart,c);Br(f,a);const _=Nn(c,a);return _&&Br(_,a),f}(_,l,a);if(c.components.push(b),s[8]=b,f&&f.forEach(I=>I(b,a)),a.contentQueries){const I=On();a.contentQueries(1,b,I.directiveStart)}const w=On();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(no(w.index),mS(l[1],w,0,w.directiveStart,w.directiveEnd,a),gS(a,b)),b}(rt,this.componentDef,ye,G,[GS]),fg(ee,ye,null)}finally{il()}return new WC(this.componentType,Ue,dh(ze,ye),ye,ze)}}class WC extends class{}{constructor(a,l,c,f,_){super(),this.location=c,this._rootLView=f,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new Ti(f),this.componentType=a}get injector(){return new $o(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Bc{}class ph{}const jc=new Map;class $g extends Bc{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sl(this);const c=vr(a);this._bootstrapComponents=gs(c.bootstrap),this._r3Injector=RS(a,l,[{provide:Bc,useValue:this},{provide:yp,useValue:this.componentFactoryResolver}],de(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=Yi.THROW_IF_NOT_FOUND,c=ft.Default){return a===Yi||a===Bc||a===iw?this:this._r3Injector.get(a,l,c)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Gg extends ph{constructor(a){super(),this.moduleType=a,null!==vr(a)&&function(s){const a=new Set;!function l(c){const f=vr(c,!0),_=f.id;null!==_&&(function(s,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${s} - ${de(a)} vs ${de(a.name)}`)}(_,jc.get(_),c),jc.set(_,c));const b=gs(f.imports);for(const w of b)a.has(w)||(a.add(w),l(w))}(s)}(a)}create(a){return new $g(this.moduleType,a)}}function nI(s){return a=>{setTimeout(s,void 0,a)}}const Al=class extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){var I,x,k;let f=a,_=l||(()=>null),b=c;if(a&&"object"==typeof a){const V=a;f=null==(I=V.next)?void 0:I.bind(V),_=null==(x=V.error)?void 0:x.bind(V),b=null==(k=V.complete)?void 0:k.bind(V)}this.__isAsync&&(_=nI(_),f&&(f=nI(f)),b&&(b=nI(b)));const w=super.subscribe({next:f,error:_,complete:b});return a instanceof re.w0&&a.add(w),w}};function uM(){return this._results[Yf()]()}class mh{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Yf(),c=mh.prototype;c[l]||(c[l]=uM)}get changes(){return this._changes||(this._changes=new Al)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const f=Ki(a);(this._changesDetected=!function(s,a,l){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],_=a[c];if(l&&(f=l(f),_=l(_)),_!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ml=(()=>{class s{}return s.__NG_ELEMENT_ID__=cM,s})();const Kg=Ml,Zg=class extends Kg{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a){const l=this._declarationTContainer.tViews,c=hg(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(c[19]=_.createEmbeddedView(l)),fg(l,c,a),new fh(c)}};function cM(){return gh(On(),Me())}function gh(s,a){return 4&s.type?new Zg(a,s,dh(s,a)):null}let Hc=(()=>{class s{}return s.__NG_ELEMENT_ID__=dM,s})();function dM(){return iI(On(),Me())}const hM=Hc,rb=class extends hM{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return dh(this._hostTNode,this._hostLView)}get injector(){return new $o(this._hostTNode,this._hostLView)}get parentInjector(){const a=nu(this._hostTNode,this._hostLView);if(er(a)){const l=cl(a,this._hostLView),c=fa(a);return new $o(l[1].data[c+8],l)}return new $o(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=rI(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){const f=a.createEmbeddedView(l||{});return this.insert(f,c),f}createComponent(a,l,c,f,_){const b=a&&!("function"==typeof a);let w;if(b)w=l;else{const V=l||{};w=V.index,c=V.injector,f=V.projectableNodes,_=V.ngModuleRef}const I=b?a:new Hg(ir(a)),x=c||this.parentInjector;if(!_&&null==I.ngModule&&x){const V=x.get(Bc,null);V&&(_=V)}const k=I.create(x,f,void 0,_);return this.insert(k.hostView,w),k}insert(a,l){const c=a._lView,f=c[1];if(Bi(c[3])){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const V=c[3],G=new rb(V,V[6],V[3]);G.detach(G.indexOf(a))}}const _=this._adjustIndex(l),b=this._lContainer;!function(s,a,l,c){const f=10+c,_=l.length;c>0&&(l[f-1][4]=a),c<_-10?(a[4]=l[f],Td(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const b=a[17];null!==b&&l!==b&&function(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(b,a);const w=a[19];null!==w&&w.insertView(s),a[2]|=128}(f,c,b,_);const w=Kd(_,b),I=c[11],x=tr(I,b[7]);return null!==x&&function(s,a,l,c,f,_){c[0]=f,c[6]=a,Dc(s,c,l,1,f,_)}(f,b[6],I,c,x,w),a.attachToViewContainerRef(),Td(Yg(b),_,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=rI(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=m(this._lContainer,l);c&&(zo(Yg(this._lContainer),l),E(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=m(this._lContainer,l);return c&&null!=zo(Yg(this._lContainer),l)?new fh(c):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function rI(s){return s[8]}function Yg(s){return s[8]||(s[8]=[])}function iI(s,a){let l;const c=a[s.index];if(Bi(c))l=c;else{let f;if(8&s.type)f=jn(c);else{const _=a[11];f=_.createComment("");const b=Nn(s,a);Se(_,tr(_,b),f,function(s,a){return nn(s)?s.nextSibling(a):a.nextSibling}(_,b),!1)}a[s.index]=l=ES(c,a,f,s),Ky(a,l)}return new rb(l,s,a)}class ib{constructor(a){this.queryList=a,this.matches=null}clone(){return new ib(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qg{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let _=0;_<c;_++){const b=l.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new Qg(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==lI(a,l).matches&&this.queries[l].setDirty()}}class Xg{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class _h{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,_=this.getByIndex(c).embeddedTView(a,f);_&&(_.indexInDeclarationView=c,null!==l?l.push(_):l=[_])}return null!==l?new _h(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class oI{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new oI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const _=c[f];this.matchTNodeWithReadOption(a,l,bp(l,_)),this.matchTNodeWithReadOption(a,l,Lr(l,a,_,!1,!1))}else c===Ml?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Lr(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===vp||f===Hc||f===Ml&&4&l.type)this.addMatch(l.index,-2);else{const _=Lr(l,a,f,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function bp(s,a){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function yh(s,a,l,c){return-1===l?function(s,a){return 11&s.type?dh(s,a):4&s.type?gh(s,a):null}(a,s):-2===l?function(s,a,l){return l===vp?dh(a,s):l===Ml?gh(a,s):l===Hc?iI(a,s):void 0}(s,a,c):si(s,s[1],l,a)}function aI(s,a,l,c){const f=a[19].queries[c];if(null===f.matches){const _=s.data,b=l.matches,w=[];for(let I=0;I<b.length;I+=2){const x=b[I];w.push(x<0?null:yh(a,_[x],b[I+1],l.metadata.read))}f.matches=w}return f.matches}function wp(s,a,l,c){const f=s.queries.getByIndex(l),_=f.matches;if(null!==_){const b=aI(s,a,f,l);for(let w=0;w<_.length;w+=2){const I=_[w];if(I>0)c.push(b[w/2]);else{const x=_[w+1],k=a[-I];for(let V=10;V<k.length;V++){const G=k[V];G[17]===G[3]&&wp(G[1],G,x,c)}if(null!==k[9]){const V=k[9];for(let G=0;G<V.length;G++){const ee=V[G];wp(ee[1],ee,x,c)}}}}}return c}function sb(s){const a=Me(),l=qt(),c=Wl();da(c+1);const f=lI(l,c);if(s.dirty&&Ka(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const _=f.crossesNgTemplate?wp(l,a,c,[]):aI(l,a,f,c);s.reset(_,UC),s.notifyOnChanges()}return!0}return!1}function e_(s,a,l){const c=qt();c.firstCreatePass&&(Cp(c,new Xg(s,a,l),-1),2==(2&a)&&(c.staticViewQueries=!0)),$c(c,Me(),a)}function ob(s,a,l,c){const f=qt();if(f.firstCreatePass){const _=On();Cp(f,new Xg(a,l,c),_.index),function(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}$c(f,Me(),l)}function t_(){return s=Me(),a=Wl(),s[19].queries[a].queryList;var s,a}function $c(s,a,l){const c=new mh(4==(4&l));hS(s,a,c,c.destroy),null===a[19]&&(a[19]=new Qg),a[19].queries.push(new ib(c))}function Cp(s,a,l){null===s.queries&&(s.queries=new _h),s.queries.track(new oI(a,l))}function lI(s,a){return s.queries.getByIndex(a)}function Tp(...s){}const u_=new hn("Application Initializer");let bh=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Tp,this.reject=Tp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Ma(_))l.push(_);else if(mv(_)){const b=new Promise((w,I)=>{_.subscribe({complete:w,error:I})});l.push(b)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(X(u_,8))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();const bb=new hn("AppId"),EI={provide:bb,useFactory:function(){return`${Eb()}${Eb()}${Eb()}`},deps:[]};function Eb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wb=new hn("Platform Initializer"),SM=new hn("Platform ID"),AM=new hn("appBootstrapListener");let Cb=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();const c_=new hn("LocaleId"),wI=new hn("DefaultCurrencyCode");class Kn{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Dp=(()=>{class s{compileModuleSync(l){return new Gg(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),_=gs(vr(l).declarations).reduce((b,w)=>{const I=ir(w);return I&&b.push(new Hg(I)),b},[]);return new Kn(c,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();const CI=(()=>Promise.resolve(0))();function Ce(s){"undefined"==typeof Zone?CI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class pr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Al(!1),this.onMicrotaskEmpty=new Al(!1),this.onStable=new Al(!1),this.onError=new Al(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let s=Dt.requestAnimationFrame,a=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(s){const a=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Dt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ut(s),s.isCheckStableRunning=!0,P(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ut(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,_,b,w)=>{try{return d_(s),l.invokeTask(f,_,b,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||s.shouldCoalesceRunChangeDetection)&&a(),Ot(s)}},onInvoke:(l,c,f,_,b,w,I)=>{try{return d_(s),l.invoke(f,_,b,w,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),Ot(s)}},onHasTask:(l,c,f,_)=>{l.hasTask(f,_),c===f&&("microTask"==_.change?(s._hasPendingMicrotasks=_.microTask,ut(s),P(s)):"macroTask"==_.change&&(s.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,c,f,_)=>(l.handleError(f,_),s.runOutsideAngular(()=>s.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,a,ea,Tp,Tp);try{return _.runTask(b,l,c)}finally{_.cancelTask(b)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const ea={};function P(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ut(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function d_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ot(s){s._nesting--,P(s)}class h_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Al,this.onMicrotaskEmpty=new Al,this.onStable=new Al,this.onError=new Al}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,f){return a.apply(l,c)}}let f_=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pr.assertNotInAngularZone(),Ce(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ce(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let _=-1;c&&c>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(X(pr))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})(),Eh=(()=>{class s{constructor(){this._applications=new Map,Tb.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Tb.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();class xM{addToWindow(a){}findTestabilityInTree(a,l,c){return null}}function Ib(s){Tb=s}let ta,Tb=new xM;const $r=new hn("AllowMultipleToken");class Mu{constructor(a,l){this.name=a,this.token=l}}function II(s,a,l=[]){const c=`Platform: ${a}`,f=new hn(c);return(_=[])=>{let b=DI();if(!b||b.injector.get($r,!1))if(s)s(l.concat(_).concat({provide:f,useValue:!0}));else{const w=l.concat(_).concat({provide:f,useValue:!0},{provide:sw,useValue:"platform"});!function(s){if(ta&&!ta.destroyed&&!ta.injector.get($r,!1))throw new $e("400","");ta=s.get(Db);const a=s.get(wb,null);a&&a.forEach(l=>l())}(Yi.create({providers:w,name:c}))}return function(s){const a=DI();if(!a)throw new $e("401","");return a}()}}function DI(){return ta&&!ta.destroyed?ta:null}let Db=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const w=function(s,a){let l;return l="noop"===s?new h_:("zone.js"===s?void 0:s)||new pr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:pr,useValue:w}];return w.run(()=>{const x=Yi.create({providers:I,parent:this.injector,name:l.moduleType.name}),k=l.create(x),V=k.injector.get(Ia,null);if(!V)throw new $e("402","");return w.runOutsideAngular(()=>{const G=w.onError.subscribe({next:ee=>{V.handleError(ee)}});k.onDestroy(()=>{Sp(this._modules,k),G.unsubscribe()})}),function(s,a,l){try{const c=l();return Ma(c)?c.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(V,w,()=>{const G=k.injector.get(bh);return G.runInitializers(),G.donePromise.then(()=>(function(s){Zt(s,"Expected localeId to be defined"),"string"==typeof s&&(Bv=s.toLowerCase().replace(/_/g,"-"))}(k.injector.get(c_,Bg)||Bg),this._moduleDoBootstrap(k),k))})})}bootstrapModule(l,c=[]){const f=Ab({},c);return function(s,a,l){const c=new Gg(l);return Promise.resolve(c)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(l){const c=l.injector.get(xr);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new $e("403","");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(X(Yi))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();function Ab(s,a){return Array.isArray(a)?a.reduce(Ab,s):it(it({},s),a)}let xr=(()=>{class s{constructor(l,c,f,_,b){this._zone=l,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new L.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),I=new L.y(x=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{pr.assertNotInAngularZone(),Ce(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{pr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{k.unsubscribe(),V.unsubscribe()}});this.isStable=(0,he.T)(w,I.pipe((0,ce.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new $e("405","");let f;f=l instanceof YA?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const _=function(s){return s.isBoundToModule}(f)?void 0:this._injector.get(Bc),w=f.create(Yi.NULL,[],c||f.selector,_),I=w.location.nativeElement,x=w.injector.get(f_,null),k=x&&w.injector.get(Eh);return x&&k&&k.registerApplication(I,x),w.onDestroy(()=>{this.detachView(w.hostView),Sp(this.components,w),k&&k.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new $e("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Sp(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(AM,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(X(pr),X(Yi),X(Ia),X(yp),X(bh))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();function Sp(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let Mb=!0,g_=!1;function AI(){return g_=!0,Mb}function MI(){if(g_)throw new Error("Cannot enable prod mode after platform setup.");Mb=!1}let PM=(()=>{class s{}return s.__NG_ELEMENT_ID__=wh,s})();function wh(s){return function(s,a,l){if(Qs(s)&&!l){const c=rn(s.index,a);return new fh(c,c)}return 47&s.type?new fh(a[16],a):null}(On(),Me(),16==(16&s))}class Ub{constructor(){}supports(a){return Xd(a)}create(a){return new UM(a)}}const BI=(s,a)=>a;class UM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||BI}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,f=0,_=null;for(;l||c;){const b=!c||l&&l.currentIndex<Bb(c,f,_)?l:c,w=Bb(b,f,_),I=b.currentIndex;if(b===c)f--,c=c._nextRemoved;else if(l=l._next,null==b.previousIndex)f++;else{_||(_=[]);const x=w-f,k=I-f;if(x!=k){for(let G=0;G<x;G++){const ee=G<_.length?_[G]:_[G]=0,ye=ee+G;k<=ye&&ye<x&&(_[G]=ee+1)}_[b.previousIndex]=k-x}}w!==I&&a(b,w,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Xd(a))throw new Error(`Error trying to diff '${de(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,b,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)_=a[w],b=this._trackByFn(w,_),null!==l&&Object.is(l.trackById,b)?(c&&(l=this._verifyReinsertion(l,_,b,w)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,b,w),c=!0),l=l._next}else f=0,function(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Yf()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,w=>{b=this._trackByFn(f,w),null!==l&&Object.is(l.trackById,b)?(c&&(l=this._verifyReinsertion(l,w,b,f)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,b,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,_,f)):a=this._addAfter(new jI(l,c),_,f),a}_verifyReinsertion(a,l,c,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new __),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new __),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class jI{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class __{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new HI,this.map.set(l,c)),c.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bb(s,a,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+a+f}class $I{constructor(){}supports(a){return a instanceof Map||gg(a)}create(){return new jb}}class jb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||gg(a)))throw new Error(`Error trying to diff '${de(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const c=new Hb(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class Hb{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function y_(){return new mr([new Ub])}let mr=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||y_()),deps:[[s,new ai,new Ur]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=dn({token:s,providedIn:"root",factory:y_}),s})();function Ap(){return new Th([new $I])}let Th=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Ap()),deps:[[s,new ai,new Ur]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=dn({token:s,providedIn:"root",factory:Ap}),s})();const BM=[new $I],GI=new mr([new Ub]),HM=new Th(BM),$b=II(null,"core",[{provide:SM,useValue:"unknown"},{provide:Db,deps:[Yi]},{provide:Eh,deps:[]},{provide:Cb,deps:[]}]),GM=[{provide:xr,useClass:xr,deps:[pr,Yi,Ia,yp,bh]},{provide:GC,deps:[pr],useFactory:function(s){let a=[];return s.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:bh,useClass:bh,deps:[[new Ur,u_]]},{provide:Dp,useClass:Dp,deps:[]},EI,{provide:mr,useFactory:function(){return GI},deps:[]},{provide:Th,useFactory:function(){return HM},deps:[]},{provide:c_,useFactory:function(s){return s||"undefined"!=typeof $localize&&$localize.locale||Bg},deps:[[new vn(c_),new Ur,new ai]]},{provide:wI,useValue:"USD"}];let qb=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(X(xr))},s.\u0275mod=Ul({type:s}),s.\u0275inj=Xn({providers:GM}),s})()},6293:(Xe,be,F)=>{F.d(be,{Z:()=>$e});var h=F(4213),re=F(1177),L=F(1572),he=F(3855);class ce{constructor(Ve,oe){this._delegate=Ve,this.firebase=oe,(0,L._addComponent)(Ve,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ve,oe=L._DEFAULT_ENTRY_NAME){var Te;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(Ve);return!je.isInitialized()&&"EXPLICIT"===(null===(Te=je.getComponent())||void 0===Te?void 0:Te.instantiationMode)&&je.initialize(),je.getImmediate({identifier:oe})}_removeServiceInstance(Ve,oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(oe)}_addComponent(Ve){(0,L._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,L._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const He=function(He){const Ve={},oe={__esModule:!0,initializeApp:function(Ye,we={}){const Q=L.initializeApp(Ye,we);if((0,h.r3)(Ve,Q.name))return Ve[Q.name];const ne=new He(Q,oe);return Ve[Q.name]=ne,ne},app:je,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(Ye){const we=Ye.name,Q=we.replace("-compat","");if(L._registerComponent(Ye)&&"PUBLIC"===Ye.type){const ne=(fe=je())=>{if("function"!=typeof fe[Q])throw le.create("invalid-app-argument",{appName:we});return fe[Q]()};void 0!==Ye.serviceProps&&(0,h.ZB)(ne,Ye.serviceProps),oe[Q]=ne,He.prototype[Q]=function(...fe){return this._getService.bind(this,we).apply(this,Ye.multipleInstances?fe:[])}}return"PUBLIC"===Ye.type?oe[Q]:null},removeApp:function(Ye){delete Ve[Ye]},useAsService:function(Ye,we){return"serverAuth"===we?null:we},modularAPIs:L}};function je(Ye){if(!(0,h.r3)(Ve,Ye=Ye||L._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Ye});return Ve[Ye]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(Ve).map(Ye=>Ve[Ye])}}),je.App=He,oe}(ce);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function(oe){(0,h.ZB)(He,oe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),He}(),K=new he.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=z;(0,L.registerVersion)("@firebase/app-compat","0.1.25",undefined)},1572:(Xe,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>Io,_DEFAULT_ENTRY_NAME:()=>Ct,_addComponent:()=>ur,_addOrOverwriteComponent:()=>mi,_apps:()=>Tt,_clearComponents:()=>os,_components:()=>an,_getProvider:()=>Ts,_registerComponent:()=>dn,_removeServiceInstance:()=>Xn,deleteApp:()=>yr,getApp:()=>_r,getApps:()=>Oe,initializeApp:()=>Zr,onLog:()=>kn,registerVersion:()=>Sn,setLogLevel:()=>Nr});var h=F(8239),re=F(1177),L=F(3855),he=F(4213),ce=F(5600);class Ee{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function(q){const se=q.getComponent();return"VERSION"===(null==se?void 0:se.type)}(xe)){const tt=xe.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(xe=>xe).join(" ")}}const de="@firebase/app",z=new L.Yd("@firebase/app"),Ct="[DEFAULT]",Zt={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tt=new Map,an=new Map;function ur(q,se){try{q.container.addComponent(se)}catch(xe){z.debug(`Component ${se.name} failed to register with FirebaseApp ${q.name}`,xe)}}function mi(q,se){q.container.addOrOverwriteComponent(se)}function dn(q){const se=q.name;if(an.has(se))return z.debug(`There were multiple attempts to register component ${se}.`),!1;an.set(se,q);for(const xe of Tt.values())ur(xe,q);return!0}function Ts(q,se){const xe=q.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),q.container.getProvider(se)}function Xn(q,se,xe=Ct){Ts(q,se).clearInstance(xe)}function os(){an.clear()}const tn=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Un{constructor(se,xe,tt){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}const Io="9.8.1";function Zr(q,se={}){"object"!=typeof se&&(se={name:se});const xe=Object.assign({name:Ct,automaticDataCollectionEnabled:!1},se),tt=xe.name;if("string"!=typeof tt||!tt)throw tn.create("bad-app-name",{appName:String(tt)});const At=Tt.get(tt);if(At){if((0,he.vZ)(q,At.options)&&(0,he.vZ)(xe,At.config))return At;throw tn.create("duplicate-app",{appName:tt})}const kt=new re.H0(tt);for(const Nt of an.values())kt.addComponent(Nt);const pn=new Un(q,xe,kt);return Tt.set(tt,pn),pn}function _r(q=Ct){const se=Tt.get(q);if(!se)throw tn.create("no-app",{appName:q});return se}function Oe(){return Array.from(Tt.values())}function yr(q){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(q){const se=q.name;Tt.has(se)&&(Tt.delete(se),yield Promise.all(q.container.getProviders().map(xe=>xe.delete())),q.isDeleted=!0)})).apply(this,arguments)}function Sn(q,se,xe){var tt;let At=null!==(tt=Zt[q])&&void 0!==tt?tt:q;xe&&(At+=`-${xe}`);const kt=At.match(/\s|\//),pn=se.match(/\s|\//);if(kt||pn){const Nt=[`Unable to register library "${At}" with version "${se}":`];return kt&&Nt.push(`library name "${At}" contains illegal characters (whitespace or "/")`),kt&&pn&&Nt.push("and"),pn&&Nt.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void z.warn(Nt.join(" "))}dn(new re.wA(`${At}-version`,()=>({library:At,version:se}),"VERSION"))}function kn(q,se){if(null!==q&&"function"!=typeof q)throw tn.create("invalid-log-argument");(0,L.Am)(q,se)}function Nr(q){(0,L.Ub)(q)}const zn="firebase-heartbeat-store";let wn=null;function Ua(){return wn||(wn=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(q,se)=>{0===se&&q.createObjectStore(zn)}}).catch(q=>{throw tn.create("storage-open",{originalErrorMessage:q.message})})),wn}function et(){return(et=(0,h.Z)(function*(q){try{return(yield Ua()).transaction(zn).objectStore(zn).get(Fi(q))}catch(se){throw tn.create("storage-get",{originalErrorMessage:se.message})}})).apply(this,arguments)}function Et(q,se){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(q,se){try{const tt=(yield Ua()).transaction(zn,"readwrite");return yield tt.objectStore(zn).put(se,Fi(q)),tt.done}catch(xe){throw tn.create("storage-set",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function Fi(q){return`${q.name}!${q.options.appId}`}class en{constructor(se){this.container=se,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new H(xe),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var se=this;return(0,h.Z)(function*(){const tt=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=To();if(null===se._heartbeatsCache&&(se._heartbeatsCache=yield se._heartbeatsCachePromise),se._heartbeatsCache.lastSentHeartbeatDate!==At&&!se._heartbeatsCache.heartbeats.some(kt=>kt.date===At))return se._heartbeatsCache.heartbeats.push({date:At,agent:tt}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(kt=>{const pn=new Date(kt.date).valueOf();return Date.now()-pn<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,h.Z)(function*(){if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null===se._heartbeatsCache||0===se._heartbeatsCache.heartbeats.length)return"";const xe=To(),{heartbeatsToSend:tt,unsentEntries:At}=function(q,se=1024){const xe=[];let tt=q.slice();for(const At of q){const kt=xe.find(pn=>pn.agent===At.agent);if(kt){if(kt.dates.push(At.date),Y(xe)>se){kt.dates.pop();break}}else if(xe.push({agent:At.agent,dates:[At.date]}),Y(xe)>se){xe.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:xe,unsentEntries:tt}}(se._heartbeatsCache.heartbeats),kt=(0,he.L)(JSON.stringify({version:2,heartbeats:tt}));return se._heartbeatsCache.lastSentHeartbeatDate=xe,At.length>0?(se._heartbeatsCache.heartbeats=At,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),kt})()}}function To(){return(new Date).toISOString().substring(0,10)}class H{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,h.Z)(function*(){return(yield se._canUseIndexedDBPromise)&&(yield function(q){return et.apply(this,arguments)}(se.app))||{heartbeats:[]}})()}overwrite(se){var xe=this;return(0,h.Z)(function*(){var tt;if(yield xe._canUseIndexedDBPromise){const kt=yield xe.read();return Et(xe.app,{lastSentHeartbeatDate:null!==(tt=se.lastSentHeartbeatDate)&&void 0!==tt?tt:kt.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var xe=this;return(0,h.Z)(function*(){var tt;if(yield xe._canUseIndexedDBPromise){const kt=yield xe.read();return Et(xe.app,{lastSentHeartbeatDate:null!==(tt=se.lastSentHeartbeatDate)&&void 0!==tt?tt:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...se.heartbeats]})}})()}}function Y(q){return(0,he.L)(JSON.stringify({version:2,heartbeats:q})).length}dn(new re.wA("platform-logger",se=>new Ee(se),"PRIVATE")),dn(new re.wA("heartbeat",se=>new en(se),"PRIVATE")),Sn(de,"0.7.24",""),Sn(de,"0.7.24","esm2017"),Sn("fire-js","")},1177:(Xe,be,F)=>{F.d(be,{wA:()=>L,H0:()=>de,zt:()=>ce});var h=F(8239),re=F(4213);class L{constructor(z,K,ae){this.name=z,this.instanceFactory=K,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const he="[DEFAULT]";class ce{constructor(z,K){this.name=z,this.container=K,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const K=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(K)){const ae=new re.BH;if(this.instancesDeferred.set(K,ae),this.isInitialized(K)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:K});qe&&ae.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(K).promise}getImmediate(z){var K;const ae=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),qe=null!==(K=null==z?void 0:z.optional)&&void 0!==K&&K;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Ae){if(qe)return null;throw Ae}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if("EAGER"===z.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:he})}catch(K){}for(const[K,ae]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(K);try{const Ae=this.getOrInitializeService({instanceIdentifier:qe});ae.resolve(Ae)}catch(Ae){}}}}clearInstance(z=he){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,h.Z)(function*(){const K=Array.from(z.instances.values());yield Promise.all([...K.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...K.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=he){return this.instances.has(z)}getOptions(z=he){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:K={}}=z,ae=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ae,options:K});for(const[Ae,$e]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Ae)&&$e.resolve(qe);return qe}onInit(z,K){var ae;const qe=this.normalizeInstanceIdentifier(K),Ae=null!==(ae=this.onInitCallbacks.get(qe))&&void 0!==ae?ae:new Set;Ae.add(z),this.onInitCallbacks.set(qe,Ae);const $e=this.instances.get(qe);return $e&&z($e,qe),()=>{Ae.delete(z)}}invokeOnInitCallbacks(z,K){const ae=this.onInitCallbacks.get(K);if(ae)for(const qe of ae)try{qe(z,K)}catch(Ae){}}getOrInitializeService({instanceIdentifier:z,options:K={}}){let ae=this.instances.get(z);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===he?void 0:ge),options:K}),this.instances.set(z,ae),this.instancesOptions.set(z,K),this.invokeOnInitCallbacks(ae,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ae)}catch(qe){}var ge;return ae||null}normalizeInstanceIdentifier(z=he){return this.component?this.component.multipleInstances?z:he:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const K=this.getProvider(z.name);if(K.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);K.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const K=new ce(z,this);return this.providers.set(z,K),K}getProviders(){return Array.from(this.providers.values())}}},3855:(Xe,be,F)=>{F.d(be,{in:()=>re,Yd:()=>le,Ub:()=>de,Am:()=>ge});const h=[];var re=(()=>{return(z=re||(re={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",re;var z})();const L={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},he=re.INFO,ce={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},Ee=(z,K,...ae)=>{if(K<z.logLevel)return;const qe=(new Date).toISOString(),Ae=ce[K];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${K})`);console[Ae](`[${qe}]  ${z.name}:`,...ae)};class le{constructor(K){this.name=K,this._logLevel=he,this._logHandler=Ee,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in re))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"==typeof K?L[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(...K){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...K),this._logHandler(this,re.DEBUG,...K)}log(...K){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...K),this._logHandler(this,re.VERBOSE,...K)}info(...K){this._userLogHandler&&this._userLogHandler(this,re.INFO,...K),this._logHandler(this,re.INFO,...K)}warn(...K){this._userLogHandler&&this._userLogHandler(this,re.WARN,...K),this._logHandler(this,re.WARN,...K)}error(...K){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...K),this._logHandler(this,re.ERROR,...K)}}function de(z){h.forEach(K=>{K.setLogLevel(z)})}function ge(z,K){for(const ae of h){let qe=null;K&&K.level&&(qe=L[K.level]),ae.userLogHandler=null===z?null:(Ae,$e,...He)=>{const Ve=He.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(Te){return null}}).filter(oe=>oe).join(" ");$e>=(null!=qe?qe:Ae.logLevel)&&z({level:re[$e].toLowerCase(),message:Ve,args:He,type:Ae.name})}}}},5600:(Xe,be,F)=>{F.d(be,{Lj:()=>Le,X3:()=>je});var h=F(8239);let L,he;const le=new WeakMap,de=new WeakMap,ge=new WeakMap,z=new WeakMap,K=new WeakMap;let Ae={get(we,Q,ne){if(we instanceof IDBTransaction){if("done"===Q)return de.get(we);if("objectStoreNames"===Q)return we.objectStoreNames||ge.get(we);if("store"===Q)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return oe(we[Q])},set:(we,Q,ne)=>(we[Q]=ne,!0),has:(we,Q)=>we instanceof IDBTransaction&&("done"===Q||"store"===Q)||Q in we};function Ve(we){return"function"==typeof we?function(we){return we!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(we)?function(...Q){return we.apply(Te(this),Q),oe(le.get(this))}:function(...Q){return oe(we.apply(Te(this),Q))}:function(Q,...ne){const fe=we.call(Te(this),Q,...ne);return ge.set(fe,Q.sort?Q.sort():[Q]),oe(fe)}}(we):(we instanceof IDBTransaction&&function(we){if(de.has(we))return;const Q=new Promise((ne,fe)=>{const _e=()=>{we.removeEventListener("complete",Re),we.removeEventListener("error",ue),we.removeEventListener("abort",ue)},Re=()=>{ne(),_e()},ue=()=>{fe(we.error||new DOMException("AbortError","AbortError")),_e()};we.addEventListener("complete",Re),we.addEventListener("error",ue),we.addEventListener("abort",ue)});de.set(we,Q)}(we),((we,Q)=>Q.some(ne=>we instanceof ne))(we,L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(we,Ae):we)}function oe(we){if(we instanceof IDBRequest)return function(we){const Q=new Promise((ne,fe)=>{const _e=()=>{we.removeEventListener("success",Re),we.removeEventListener("error",ue)},Re=()=>{ne(oe(we.result)),_e()},ue=()=>{fe(we.error),_e()};we.addEventListener("success",Re),we.addEventListener("error",ue)});return Q.then(ne=>{ne instanceof IDBCursor&&le.set(ne,we)}).catch(()=>{}),K.set(Q,we),Q}(we);if(z.has(we))return z.get(we);const Q=Ve(we);return Q!==we&&(z.set(we,Q),K.set(Q,we)),Q}const Te=we=>K.get(we);function je(we,Q,{blocked:ne,upgrade:fe,blocking:_e,terminated:Re}={}){const ue=indexedDB.open(we,Q),bt=oe(ue);return fe&&ue.addEventListener("upgradeneeded",jt=>{fe(oe(ue.result),jt.oldVersion,jt.newVersion,oe(ue.transaction))}),ne&&ue.addEventListener("blocked",()=>ne()),bt.then(jt=>{Re&&jt.addEventListener("close",()=>Re()),_e&&jt.addEventListener("versionchange",()=>_e())}).catch(()=>{}),bt}function Le(we,{blocked:Q}={}){const ne=indexedDB.deleteDatabase(we);return Q&&ne.addEventListener("blocked",()=>Q()),oe(ne).then(()=>{})}const ct=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],Ge=new Map;function Ye(we,Q){if(!(we instanceof IDBDatabase)||Q in we||"string"!=typeof Q)return;if(Ge.get(Q))return Ge.get(Q);const ne=Q.replace(/FromIndex$/,""),fe=Q!==ne,_e=Pe.includes(ne);if(!(ne in(fe?IDBIndex:IDBObjectStore).prototype)||!_e&&!ct.includes(ne))return;const Re=function(){var ue=(0,h.Z)(function*(bt,...jt){const Dn=this.transaction(bt,_e?"readwrite":"readonly");let Ct=Dn.store;return fe&&(Ct=Ct.index(jt.shift())),(yield Promise.all([Ct[ne](...jt),_e&&Dn.done]))[0]});return function(jt){return ue.apply(this,arguments)}}();return Ge.set(Q,Re),Re}var we;Ae=pi(it({},we=Ae),{get:(Q,ne,fe)=>Ye(Q,ne)||we.get(Q,ne,fe),has:(Q,ne)=>!!Ye(Q,ne)||we.has(Q,ne)})},8239:(Xe,be,F)=>{function h(L,he,ce,Ee,le,de,ge){try{var z=L[de](ge),K=z.value}catch(ae){return void ce(ae)}z.done?he(K):Promise.resolve(K).then(Ee,le)}function re(L){return function(){var he=this,ce=arguments;return new Promise(function(Ee,le){var de=L.apply(he,ce);function ge(K){h(de,Ee,le,ge,z,"next",K)}function z(K){h(de,Ee,le,ge,z,"throw",K)}ge(void 0)})}}F.d(be,{Z:()=>re})}},Xe=>{Xe(Xe.s=4168)}]);